!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="d29aa0e6-ed4e-4121-afea-776af93698da",e._sentryDebugIdIdentifier="sentry-dbid-d29aa0e6-ed4e-4121-afea-776af93698da")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"2e833bf6"};"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4742],{87903:function(e,t,n){n.d(t,{AS:function(){return T},Hj:function(){return P},Rp:function(){return D},Tt:function(){return L},gE:function(){return B},j7:function(){return k},xT:function(){return _},yi:function(){return S}});var r=n(41733),i=n(21262),o=n(71440),a=n(9122),l=n(82303),c=n(91476);function s(){var e=(0,i._)(["\n  fragment AnnotationsUser on User {\n    id\n    username\n    fullName\n    image\n  }\n"]);return s=function(){return e},e}function u(){var e=(0,i._)(["\n  fragment AnnotationMessageContent on MessageContentType {\n    __typename\n    ... on TextMessageContentType {\n      text\n    }\n    ... on PreviewMessageContentType {\n      preview\n    }\n    ... on StatusMessageContentType {\n      status\n    }\n  }\n"]);return u=function(){return e},e}function d(){var e=(0,i._)(["\n  fragment AnnotationsUIMessage on AnnotationMessage {\n    id\n    user {\n      id\n      ...AnnotationsUser\n    }\n    anchor {\n      id\n    }\n    timeCreated\n    content {\n      __typename\n      ...AnnotationMessageContent\n    }\n    currentUserIsAuthor\n    seen\n  }\n  ","\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i._)(["\n  fragment AnnotationsUIAnchor on AnnotationAnchor {\n    id\n    user {\n      id\n      ...AnnotationsUser\n    }\n    path\n    otVersion\n    indexStart\n    indexEnd\n    isResolved\n    isGeneral\n    messages {\n      id\n      ...AnnotationsUIMessage\n    }\n  }\n  ","\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,i._)(["\n  query AnnotationAnchorsByRepl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        annotationAnchors {\n          id\n          ...AnnotationsUIAnchor\n        }\n      }\n    }\n    currentUser {\n      id\n      username\n      fullName\n      image\n    }\n  }\n  ","\n"]);return h=function(){return e},e}function p(){var e=(0,i._)(["\n  mutation CreateAnnotationAnchor(\n    $annotationAnchor: AnnotationAnchorInput!\n    $annotationMessage: AnnotationMessageInput\n    $highlight: AnnotationHighlightInput\n  ) {\n    createAnnotationAnchor(\n      annotationAnchor: $annotationAnchor\n      annotationMessage: $annotationMessage\n      highlight: $highlight\n    ) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}function m(){var e=(0,i._)(["\n  mutation UpdateAnnotationAnchor(\n    $id: String!\n    $changes: AnnotationAnchorChangesInput!\n  ) {\n    updateAnnotationAnchor(id: $id, changes: $changes) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return m=function(){return e},e}function v(){var e=(0,i._)(["\n  mutation CreateAnnotationMessage(\n    $replId: String!\n    $anchorId: String!\n    $annotationMessage: AnnotationMessageInput!\n    $highlight: AnnotationHighlightInput\n  ) {\n    createAnnotationMessage(\n      replId: $replId\n      anchorId: $anchorId\n      annotationMessage: $annotationMessage\n      highlight: $highlight\n    ) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return v=function(){return e},e}function g(){var e=(0,i._)(["\n  mutation updateThreadPreview(\n    $threadId: String!\n    $messageId: String!\n    $message: String\n  ) {\n    updateThreadPreview(\n      threadId: $threadId\n      messageId: $messageId\n      message: $message\n    )\n  }\n"]);return g=function(){return e},e}function y(){var e=(0,i._)(["\n  subscription AnnotationUpdates($replId: String!) {\n    updatedAnnotation: annotationUpdatesByRepl(replId: $replId) {\n      id\n      ...AnnotationsUIAnchor\n    }\n  }\n  ","\n"]);return y=function(){return e},e}function b(){var e=(0,i._)(["\n  subscription MessagePreview($threadId: String!) {\n    threadPreview(threadId: $threadId) {\n      userId\n      messageId\n      message\n    }\n  }\n"]);return b=function(){return e},e}var w={},Z=(0,o.Ps)(s()),x=(0,o.Ps)(u()),C=(0,o.Ps)(d(),Z,x),k=(0,o.Ps)(f(),Z,C),S=(0,o.Ps)(h(),k);function _(e){var t=(0,r._)({},w,e);return a.a(S,t)}var E=(0,o.Ps)(p(),k);function T(e){var t=(0,r._)({},w,e);return l.D(E,t)}var R=(0,o.Ps)(m(),k);function D(e){var t=(0,r._)({},w,e);return l.D(R,t)}var I=(0,o.Ps)(v(),k);function B(e){var t=(0,r._)({},w,e);return l.D(I,t)}var G=(0,o.Ps)(g());function P(e){var t=(0,r._)({},w,e);return l.D(G,t)}var A=(0,o.Ps)(y(),k);function L(e){var t=(0,r._)({},w,e);return c.m(A,t)}b()},9487:function(e,t,n){n.d(t,{Ft:function(){return d},Vy:function(){return m},kL:function(){return p}});var r=n(27387),i=n(66626),o=n(96583),a=n(80403),l=n(25722);function c(){return(c=(0,r._)(function(e,t,n){var r;return(0,o.Jh)(this,function(i){switch(i.label){case 0:if(!e.path||"number"!=typeof e.indexStart||"number"!=typeof e.indexEnd||!e.otVersion)return[2];if(n===e.otVersion)return[2,{path:e.path,indexStart:e.indexStart,indexEnd:e.indexEnd,otVersion:e.otVersion}];return[4,t({indexStart:e.indexStart,indexEnd:e.indexEnd,versionFrom:e.otVersion,versionTo:n})];case 1:return r=i.sent(),[2,{path:e.path,indexStart:r.indexStart,indexEnd:r.indexEnd,otVersion:n}]}})})).apply(this,arguments)}var s=n(23882),u=n(75271);function d(e){return f.apply(this,arguments)}function f(){return(f=(0,r._)(function(e){var t,n,r,i,s,u,d;return(0,o.Jh)(this,function(o){switch(o.label){case 0:if(t=e.anchor,n=e.version,r=e.transformSelection,i=e.content,!t.path)return[2,null];return[4,function(e,t,n){return c.apply(this,arguments)}(t,r,n)];case 1:if(!(s=o.sent()))return[2,null];return d=function(){if(s){var e=s.indexStart,t=s.indexEnd;try{var n=a.xv.of(i.split("\n")),r=n.lineAt(e),o=n.lineAt(t),c=n.sliceString(n.line(Math.max(r.number-2,1)).from,e),u=n.sliceString(t,n.line(Math.min(o.number+2,n.lines)).to);return{precode:c,code:n.sliceString(e,t),postcode:u}}catch(e){l.Tb(e)}}},[2,{anchor:t,newSelection:s,newPosition:u,getHighlight:d,snippet:h(i,s)}]}})})).apply(this,arguments)}var h=function(e,t){var n=a.xv.of(e.split("\n")),r=n.lineAt(t.indexStart).number,i=n.lineAt(t.indexEnd).number,o=[];r===i&&(r=Math.max(1,r-1),i=Math.min(n.lines,i+1));for(var l=r;l<=i;l++)o.push(n.line(l).text);return{startLineNumber:r,lines:o}};function p(e){var t=(0,s.Z)().fs,n=(0,u.useRef)(null),r=(0,u.useRef)(null),o=(0,i._)((0,u.useState)(!1),2),a=o[0],l=o[1];return(0,u.useEffect)(function(){if(e){var i=function(){r.current=null,l(!1)},o=t.watchTextFile(e,{onReady:function(e){var t=e.transformSelection,i=e.initialContent;n.current=i.toString(),r.current=t,l(!0)},onMoveOrDelete:function(){i()},onError:function(){i()},onChange:function(e){var t=e.latestContent;n.current=t}});return function(){i(),o()}}},[e,t]),{contentRef:n,transformSelectionRef:r,loadedFile:a}}function m(e){var t=(0,s.Z)().fs,n=(0,i._)((0,u.useState)(null),2),r=n[0],o=n[1],a=p(null==e?void 0:e.path),c=a.contentRef,f=a.loadedFile,h=a.transformSelectionRef;return(0,u.useEffect)(function(){(null==e?void 0:e.path)&&f&&h.current&&null!==c.current&&d({anchor:e,version:t.getOTVersion(e.path),transformSelection:h.current,content:c.current}).then(function(e){o(e)}).catch(function(e){o(null),l.Tb(e)})},[t,e,f,h,c]),r}},38970:function(e,t,n){n.d(t,{n:function(){return u}});var r=n(41733),i=n(21262),o=n(71440),a=n(82303);function l(){var e=(0,i._)(["\n  mutation MarkMessagesAsSeen(\n    $replId: String!\n    $threadId: String\n    $messageIds: [String!]\n  ) {\n    markMessagesAsSeen(\n      replId: $replId\n      threadId: $threadId\n      messageIds: $messageIds\n    ) {\n      ... on AnnotationMessageList {\n        messages {\n          id\n          seen\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var c={},s=(0,o.Ps)(l());function u(e){var t=(0,r._)({},c,e);return a.D(s,t)}},61177:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(66626),i=n(75271),o=n(16155),a=n(38970);function l(e){var t=(0,o.Z)(),n=(0,r._)((0,a.n)(),1)[0];(0,i.useEffect)(function(){if(e){var r=e.messages.filter(function(e){return!e.seen}).map(function(e){return e.id});0!==r.length&&n({variables:{replId:t,threadId:e.id,messageIds:r},optimisticResponse:{__typename:"RootMutationType",markMessagesAsSeen:{messages:r.map(function(e){return{id:e,seen:!0,__typename:"AnnotationMessage"}}),__typename:"AnnotationMessageList"}}})}},[t,e,n])}},65894:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(16155),i=n(41733),o=n(21262),a=n(71440),l=n(9122);function c(){var e=(0,o._)(["\n  query ThreadReplCollaborators($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        owner {\n          ... on User {\n            id\n            username\n            image\n            fullName\n          }\n          ... on Team {\n            id\n            username\n            image\n          }\n        }\n        permissions {\n          id\n          user {\n            id\n            username\n            image\n            fullName\n          }\n        }\n      }\n    }\n  }\n"]);return c=function(){return e},e}var s={},u=(0,a.Ps)(c());function d(){var e=(c={variables:{replId:(0,r.Z)()}},d=(0,i._)({},s,c),l.a(u,d)).data;if((null==e?void 0:e.repl.__typename)!=="Repl")return[];var t=[];(null===(f=e.repl.owner)||void 0===f?void 0:f.username)&&"User"===e.repl.owner.__typename&&t.push(e.repl.owner);var n=!0,o=!1,a=void 0;try{for(var c,d,f,h,p=e.repl.permissions[Symbol.iterator]();!(n=(h=p.next()).done);n=!0){var m,v=h.value;(null===(m=v.user)||void 0===m?void 0:m.username)&&t.push(v.user)}}catch(e){o=!0,a=e}finally{try{n||null==p.return||p.return()}finally{if(o)throw a}}return t}},46074:function(e,t,n){n.d(t,{q:function(){return B},J:function(){return I}});var r,i,o,a=n(41733),l=n(30509),c=n(98924),s=n(66626),u=n(3796),d=n(12285),f=n(4955),h=n(9670),p=n(80403),m=n(3030),v=n(25907),g=m.tk.baseTheme({".cm-diff-inserted":{backgroundColor:"#0053A644",borderLeft:"#0053A6 solid 3px"},".cm-diff-deleted":{backgroundColor:"#c93c3733",borderLeft:"#c93c37 solid 3px"}}),y=m.p.line({attributes:{class:"cm-diff-inserted"}}),b=m.p.line({attributes:{class:"cm-diff-deleted"}}),w=p.Py.define({map:function(e,t){return e.map(t)}}),Z=function(e){"use strict";(0,f._)(n,e);var t=(0,h._)(n);function n(){return(0,d._)(this,n),t.apply(this,arguments)}var r=n.prototype;return r.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-alignment cm-line",e.innerHTML="&nbsp;",e},r.ignoreEvent=function(){return!1},n}(m.l9);function x(e){var t=new p.f_,n=new Z;e.sort(function(e,t){return e.character-t.character});var r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0)for(var c=a.value,s=c.character,u=c.padding,d=0;d<u;d++)t.add(s,s,m.p.widget({widget:n,side:-1,block:!0}))}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return t.finish()}function C(e){var t=e.coloredLines,n=e.colorDecoration;return[g,m.lg.fromClass(function e(r){"use strict";(0,d._)(this,e);var i=new p.f_,o=!0,a=!1,l=void 0;try{for(var c,s=t[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value,f=r.state.doc.line(u);i.add(f.from,f.from,n)}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}this.decorations=i.finish()},{decorations:function(e){return e.decorations}}),p.QQ.define({create:function(){return m.p.none},update:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if(l.is(w))return l.value}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t.docChanged?e.map(t.changes):e},provide:function(e){return m.tk.decorations.from(e)}})]}var k=n(91166),S=n(11515),_=n(75271),E=n(53250),T=(r=function(e,t){return m.tk.domEventHandlers({scroll:function(n,r){if(r===e&&n.target){var i=n.target;if(i.scrollTop){var o=i.scrollTop;t.scrollDOM.scrollTo({top:o})}}}})},i=new p.F6,o=new p.F6,{extensions:function(){return{right:i.of([]),left:o.of([])}},setup:function(e,t){e.dispatch({effects:o.reconfigure(r(e,t))}),t.dispatch({effects:i.reconfigure(r(t,e))})}}),R=T.extensions,D=T.setup;function I(e){var t=e.left,n=e.right,r=e.showDiffDecorations,i=void 0===r||r,o=t.code,u=(0,c._)(t,["code"]),d=n.code,f=(0,c._)(n,["code"]),h=(0,S.Z)(),m=h.ref,g=h.view,Z=(0,S.Z)(),k=Z.ref,E=Z.view,T=(0,_.useMemo)(function(){var e=R().left;return u.extensions?[u.extensions,e]:e},[u.extensions]),I=(0,_.useMemo)(function(){var e=R().right;return f.extensions?[f.extensions,e]:e},[f.extensions]);u=(0,l._)((0,a._)({},u),{extensions:T}),f=(0,l._)((0,a._)({},f),{extensions:I});var B=(0,s._)((0,_.useState)(!1),2),G=B[0],P=B[1],A=(0,s._)((0,_.useState)(!1),2),L=A[0],N=A[1];return(0,_.useEffect)(function(){if(g&&E&&G&&L&&i){var e=setTimeout(function(){var e;D(g,E),e=(0,v.Bz)(g.state.doc.sliceString(0),E.state.doc.sliceString(0)),g.dispatch({effects:[p.Py.appendConfig.of(C({coloredLines:e.leftColored.sort(function(e,t){return e-t}),colorDecoration:b})),w.of(x(e.leftPadded))]}),E.dispatch({effects:[p.Py.appendConfig.of(C({coloredLines:e.rightColored.sort(function(e,t){return e-t}),colorDecoration:y})),w.of(x(e.rightPadded))]})});return function(){return clearTimeout(e)}}},[g,E,G,L,i]),(0,_.useEffect)(function(){g&&(g.dispatch({changes:{from:0,to:g.state.doc.length,insert:o}}),P(!0))},[o,g]),(0,_.useEffect)(function(){E&&(E.dispatch({changes:{from:0,to:E.state.doc.length,insert:d}}),N(!0))},[d,E]),{left:{view:g,ref:m,code:o,options:u,ready:G},right:{view:E,ref:k,code:d,options:f,ready:L}}}function B(e){var t=e.diffViewer,n=(0,c._)(e,["diffViewer"]),r=(0,a._)({},t.options,n);return(0,u.BX)(u.HY,{children:[(0,u.tZ)(k.ZP,(0,a._)({ref:t.ref,css:{height:t.ready?0:"auto"},initialDoc:t.code,lineWrapping:!1,readOnly:!0},r)),!t.ready&&(0,u.tZ)(E.Z,{code:t.code,language:r.language,filePath:r.filePath,lineNumbers:!r.hideGutter,fontSize:r.fontSize})]})}},25907:function(e,t,n){n.d(t,{Bz:function(){return p},PO:function(){return m}});var r=n(12285),i=n(66626),o=n(96583),a=n(85386),l=n.n(a),c=l().DIFF_DELETE,s=l().DIFF_INSERT,u=l().DIFF_EQUAL;function d(e,t){var n=new(l()),r=n.diff_linesToChars_(e,t),i=r.chars1,o=r.chars2,a=r.lineArray,c=n.diff_main(i,o,!1);return n.diff_charsToLines_(c,a),c}function f(e){return e.split("\n").length-1}function h(e,t,n){if(e>0){var r=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0===n)return 0;var i=t.indexOf("\n",r);return -1===i?null:1===n?i+1:e(t,n-1,i+1)}(n,t);if(null!==r)return{lineNumber:t,character:r,padding:e}}return null}function p(e,t){var n=!1,r=!1;n="\n"===e[e.length-1],r="\n"===t[t.length-1];for(var o=d(e+(n?"":"\n"),t+(r?"":"\n")),a=0,l=0,p=[],m=[],v=[],g=[],y=0,b=0,w=0;w<o.length;w++){var Z=(0,i._)(o[w],2),x=Z[0],C=f(Z[1]);switch(x){case c:var k,S=(0,i._)(null!==(k=o[w+1])&&void 0!==k?k:[],2),_=S[0],E=S[1];a+=C;for(var T=0;T<C;T++)p.push(a-T);var R=C;_===s&&(R-=f(E));var D=h(R,l,t);D&&g.push(D);break;case s:var I,B=(0,i._)(null!==(I=o[w-1])&&void 0!==I?I:[],2),G=B[0],P=B[1];l+=C;for(var A=0;A<C;A++)m.push(l-A);var L=C;G===c&&(L-=f(P));var N=h(L,a,e);N&&v.push(N);break;case u:l>b&&(b=l),a>y&&(y=a),a+=C,l+=C}}return{leftPadded:v.filter(function(e){return e.lineNumber<b}),rightPadded:g.filter(function(e){return e.lineNumber<y}),leftColored:p,rightColored:m,changedTrailingNewline:n!==r,leftTrailingNewline:n,rightTrailingNewline:r}}var m=function(){"use strict";function e(t,n){(0,r._)(this,e),this.deleted=new Set,this.inserted=new Map,this.linePositions=new Map,this.lineLengths=new Map,this.currentTrailingNewline="\n"===t[t.length-1],this.otherTrailingNewline="\n"===n[n.length-1],this.changedTrailingNewline=this.currentTrailingNewline!==this.otherTrailingNewline;var o=d(t,n),a=[],l=!0,f=!1,h=void 0;try{for(var p,m=o[Symbol.iterator]();!(l=(p=m.next()).done);l=!0){var v=(0,i._)(p.value,2),g=v[0],y=v[1].split("\n");""===y[y.length-1]&&y.pop();var b=!0,w=!1,Z=void 0;try{for(var x,C=y[Symbol.iterator]();!(b=(x=C.next()).done);b=!0){var k=x.value;a.push([g,k])}}catch(e){w=!0,Z=e}finally{try{b||null==C.return||C.return()}finally{if(w)throw Z}}}}catch(e){f=!0,h=e}finally{try{l||null==m.return||m.return()}finally{if(f)throw h}}this.currentTrailingNewline&&!this.otherTrailingNewline?a.push([c,""]):!this.currentTrailingNewline&&this.otherTrailingNewline?a.push([s,""]):this.currentTrailingNewline&&this.otherTrailingNewline&&a.push([u,""]);var S=1,_=0,E=1,T=!0,R=!1,D=void 0;try{for(var I,B=a[Symbol.iterator]();!(T=(I=B.next()).done);T=!0){var G=(0,i._)(I.value,2),P=G[0],A=G[1];switch(P){case c:this.linePositions.set(S,_),this.lineLengths.set(S,A.length),this.deleted.add(S),_+=A.length+1,S++;break;case s:var L=S-1,N=this.inserted.get(L);N||(N=[],this.inserted.set(L,N)),N.push({number:E,content:A}),E++;break;case u:this.linePositions.set(S,_),this.lineLengths.set(S,A.length),_+=A.length+1,S++,E++}}}catch(e){R=!0,D=e}finally{try{T||null==B.return||B.return()}finally{if(R)throw D}}}var t=e.prototype;return t.startInsertions=function(){var e=this.inserted.get(0);return e&&0!==e.length?e:null},t.lineIsDeleted=function(e){return this.deleted.has(e)},t.lineInsertions=function(e){var t=this.inserted.get(e);return t&&0!==t.length?t:null},t.lineInsertedContent=function(e){var t=this.lineInsertions(e);return t?t.map(function(e){return e.content}).join("\n"):null},t.offsetFor=function(e){var t,n,r;r=0+(null!==(n=null===(t=this.inserted.get(0))||void 0===t?void 0:t.length)&&void 0!==n?n:0);for(var i=1;i<e;i++){this.lineIsDeleted(i)&&r--;var o=this.lineInsertions(i);o&&(r+=o.length)}return r},t.linePosition=function(e){var t;return null!==(t=this.linePositions.get(e))&&void 0!==t?t:null},t.lineLength=function(e){var t;return null!==(t=this.lineLengths.get(e))&&void 0!==t?t:null},t.line=function(e){var t=this.linePosition(e),n=this.lineLength(e);if(null===t||null===n)return null;var r=this.offsetFor(e),i=this.lineIsDeleted(e),o=this.lineInsertions(e);return{number:e,from:t,to:t+n,length:n,offset:r,isDeleted:i,insertions:o}},t.lines=function(){var e,t,n,r,a,l,c,s;return(0,o.Jh)(this,function(o){switch(o.label){case 0:e=!0,t=!1,n=void 0,o.label=1;case 1:o.trys.push([1,6,7,8]),r=this.linePositions[Symbol.iterator](),o.label=2;case 2:if(e=(a=r.next()).done)return[3,5];if(l=(0,i._)(a.value,1)[0],!(c=this.line(l)))throw Error("line should not be null");return[4,c];case 3:o.sent(),o.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return s=o.sent(),t=!0,n=s,[3,8];case 7:try{e||null==r.return||r.return()}finally{if(t)throw n}return[7];case 8:return[2]}})},e}()},76659:function(e,t,n){n.d(t,{z:function(){return a}});var r=n(12285),i=n(96583),o=n(96442),a=function(){"use strict";function e(t,n,i,o){(0,r._)(this,e),this.a=t,this.b=n,this.chunks=i,this.map=o}var t=e.prototype;return t.line=function(e,t){return t===o.MF.A?this.a.line(e):this.b.line(e)},t.bounds=function(e){if(0===this.chunks.length)return null;var t=(0,o.Cf)(this.chunks[0],e),n=(0,o.Cf)(this.chunks[this.chunks.length-1],e),r=e===o.MF.A?this.a.length:this.b.length,i=Math.min(n.to,r);return{from:t.from,to:i}},t.hasChanges=function(){return this.chunks.length>0},t.updateA=function(t,n,r){var i=this.b,a=(0,o.U_)(t,i,{chunks:this.chunks,changesA:n},r),l=(0,o.XW)(t,i,a);return new e(t,i,a,l)},t.updateB=function(t,n,r){var i=this.a,a=(0,o.U_)(i,t,{chunks:this.chunks,changesB:n},r),l=(0,o.XW)(i,t,a);return new e(i,t,a,l)},t.getContainingChunk=function(e,t){for(var n=0,r=this.chunks.length-1;n<=r;){var i=n+r>>>1,a=this.chunks[i],l=(0,o.Cf)(a,t);if(e>=l.from&&e<=l.to)return a;e<l.from?r=i-1:e>l.to&&(n=i+1)}return null},t.getCorrespondingLine=function(e,t){var n=this.map.get(t===o.MF.A?-e:e);return n?this.line(n,(0,o.rN)(t)):null},t.getLineChangeType=function(e,t){if(this.map.get(t===o.MF.A?-e:e))return o.dQ.UNCHANGED;var n=this.line(e,t),r=this.getContainingChunk(n.from,t);return r?(0,o.dx)(n,t,r.changes,r):o.dQ.UNCHANGED},t.iterLines=function(e){var t,n,r,a;return(0,i.Jh)(this,function(i){switch(i.label){case 0:t=e===o.MF.A?this.a:this.b,n=1,i.label=1;case 1:if(!(n<=t.lines))return[3,4];return r=t.line(n),a=this.getCorrespondingLine(r.number,e),[4,{line:r,correspondingLine:a}];case 2:i.sent(),i.label=3;case 3:return n++,[3,1];case 4:return[2]}})},t.iterRanges=function(){var e,t,n,r,o;return(0,i.Jh)(this,function(i){switch(i.label){case 0:e=0,i.label=1;case 1:if(!(e<this.chunks.length))return[3,6];t=this.chunks[e].fromA,n=this.chunks[e].fromB,r=0,i.label=2;case 2:if(!(r<this.chunks[e].changes.length))return[3,5];return o=this.chunks[e].changes[r],[4,{fromA:t+o.fromA,toA:t+o.toA,fromB:n+o.fromB,toB:n+o.toB}];case 3:i.sent(),i.label=4;case 4:return r++,[3,2];case 5:return e++,[3,1];case 6:return[2]}})},e.create=function(t,n,r){var i=(0,o.U_)(t,n,void 0,r),a=(0,o.XW)(t,n,i);return new e(t,n,i,a)},e}()},52870:function(e,t,n){n.d(t,{p:function(){return q}});var r,i=n(80403),o=n(12285),a=n(4384),l=n(4955),c=n(9670),s=n(3030),u=n(33083),d=n(99415),f=n(76659),h=n(66299),p=i.r$.define({combine:function(e){var t;return null!==(t=e.filter(Boolean)[0])&&void 0!==t?t:null}}),m=i.QQ.define({create:function(){return{diff:null,tree:d.mp.empty}},update:function(e,t){var n,r,i=t.state.facet(p),o=null===(n=t.state.facet(u.dK))||void 0===n?void 0:n.parser;if(!i)return null===e.diff&&e.tree===d.mp.empty?e:{diff:null,tree:d.mp.empty};var a=e.diff,l=e.tree;return(a&&a.a.eq(i)?t.docChanged&&(a=a.updateB(t.newDoc,t.changes)):(a=f.z.create(i,t.newDoc),l=d.mp.empty),(null===(r=t.startState.facet(u.dK))||void 0===r?void 0:r.parser)!==o&&(l=d.mp.empty),o&&l.length!==a.a.length)?(l=(0,h.p)({parser:o,text:a.a,maxTime:16,base:l}),{diff:a,tree:l}):e.diff===a&&e.tree===l?e:{diff:a,tree:l}}}),v=n(42516),g=n(63163),y="cm-inline-diff-line-deletion-base",b="cm-inline-diff-line-deletion",w="cm-inline-diff-text-deletion",Z="cm-inline-diff-line-insertion-base",x="cm-inline-diff-line-insertion",C="cm-inline-diff-text-insertion",k="rgba(180, 0, 0, 0.075)",S="rgba(180, 0, 0, 0.125)",_="rgba(0, 180, 0, 0.075)",E="rgba(0, 180, 0, 0.125)",T="cm-inline-diff-marker",R="cm-inline-diff-marker-left",D="cm-inline-diff-marker-right";function I(e,t){var n="linear-gradient(to right, ".concat(e,", ").concat(e,")");return t&&(n+=", linear-gradient(to right, ".concat(t,", ").concat(t,")")),n}var B=s.tk.theme((r={},(0,v._)(r,".".concat(y,", .").concat(b),{cursor:"text","&.cm-line ::selection":{backgroundColor:"".concat(g.TV.accentPrimaryDimmest," !important")}}),(0,v._)(r,".".concat(y),{background:I(k)}),(0,v._)(r,".".concat(b),{background:I(k,S)}),(0,v._)(r,".".concat(Z),{background:I(_)}),(0,v._)(r,".".concat(x),{background:I(_,E)}),(0,v._)(r,".".concat(C),{display:"inline-block",background:E,"&:first-of-type":{backgroundClip:"padding-box",borderLeft:"3px solid ".concat(E),paddingLeft:"3px",marginLeft:"-6px"}}),(0,v._)(r,".".concat(w),{display:"inline-block",background:S,"&:first-of-type":{backgroundClip:"padding-box",borderLeft:"3px solid ".concat(S),paddingLeft:"3px",marginLeft:"-6px"}}),(0,v._)(r,".".concat(T),{display:"flex",width:"100%",justifyContent:"space-between"}),(0,v._)(r,".".concat(R),{width:"calc(50% - 1ch)",textAlign:"right"}),(0,v._)(r,".".concat(D),{width:"50%",textAlign:"right"}),r)),G=n(96442),P=n(67464),A=n(3341),L=n.n(A),N=function(e){"use strict";(0,l._)(n,e);var t=(0,c._)(n);function n(e,r,i){var a;return(0,o._)(this,n),(a=t.call(this)).line=e,a.index=r,a.changed=i,a}var r=n.prototype;return r.toDOM=function(){var e=this,t=document.createElement("div");if(t.className=this.changed?"cm-line ".concat(y):"cm-line ".concat(b),!this.changed||!this.changed.length){var n=!0,r=!1,i=void 0;try{for(var o,a=this.line[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value,c=l.text,s=l.tags,u=document.createElement("span");u.textContent=c||"\xa0",u.className=null!=s?s:"",t.appendChild(u)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t}for(var d=0,f=0,h=null,p=null,m=function(t,n){if(!h)throw Error("range is null");var r=e.line[f],i=r.text,o=r.tags,a=i.slice(d-h.from,n-h.from),l=document.createElement("span");l.textContent=a||"\xa0",l.className=null!=o?o:"",t.appendChild(l),d+=a.length};f<this.line.length;){if(!h){var v=this.line[f].text;h={from:d,to:d+v.length}}if(!p){var g=!0,Z=!1,x=void 0;try{for(var C,k=this.changed[Symbol.iterator]();!(g=(C=k.next()).done);g=!0){var S=C.value;if(!(S.from>=h.to)&&!(S.to<=d)){var _=document.createElement("span");_.className=w,p={from:S.from,to:S.to,dom:_},d<p.from&&m(t,p.from),t.appendChild(_);break}}}catch(e){Z=!0,x=e}finally{try{g||null==k.return||k.return()}finally{if(Z)throw x}}}p?(d<p.to&&m(p.dom,p.to),d>=p.to&&(p=null)):m(t,h.to),d>=h.to&&(h=null,f++)}return t},r.eq=function(e){var t,r;return e instanceof n&&this.index===e.index&&this.line.length===e.line.length&&(null===(t=this.changed)||void 0===t?void 0:t.length)===(null===(r=e.changed)||void 0===r?void 0:r.length)&&L()(this.line,e.line)&&L()(this.changed,e.changed)},r.ignoreEvent=function(e){return e.stopImmediatePropagation(),!0},(0,a._)(n,[{key:"estimatedHeight",get:function(){return 21}}]),n}(s.l9),O=s.p.line({class:Z}),U=s.p.line({class:x}),X=s.p.mark({class:C}),M=s.tk.decorations.compute([m],function(e){var t=function(e,t){if(r.getLineChangeType(e.number,G.MF.B)===G.dQ.COVERED)o.push(U.range(e.from));else{o.push(O.range(e.from));var n=!0,i=!1,a=void 0;try{for(var l,c=(0,G.Po)(e,t,G.MF.B,!1)[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var s=l.value;o.push(X.range(s.from,s.to))}}catch(e){i=!0,a=e}finally{try{n||null==c.return||c.return()}finally{if(i)throw a}}}},n=e.field(m,!1);if(!n||!n.diff)return s.p.none;var r=n.diff,i=n.tree,o=[],a=!0,l=!1,c=void 0;try{for(var u,d=r.chunks[Symbol.iterator]();!(a=(u=d.next()).done);a=!0){var f=u.value;if(f.fromB!==f.endB)for(var h=r.b.lineAt(f.fromB),p=r.b.lineAt(f.endB),v=h.number;v<=p.number;v++)t(r.b.line(v),f);else f.fromA===f.endA&&t(r.b.lineAt(f.fromB),f);if(f.fromA!==f.toA)for(var g=r.a.lineAt(f.fromA),y=(0,P.CT)(i,r.a,e,f.fromA,f.endA),b=0;b<y.length;b++){var w=y[b],Z=r.a.line(g.number+b),x=r.getLineChangeType(Z.number,G.MF.A)===G.dQ.COVERED?null:(0,G.Po)(Z,f,G.MF.A,!0),C=s.p.widget({widget:new N(w,Z.number,x),block:!0,side:-(y.length-b)});o.push(C.range(f.fromB))}}}catch(e){l=!0,c=e}finally{try{a||null==d.return||d.return()}finally{if(l)throw c}}return s.p.set(o,!0)}),F=n(71215),W=(0,s.v5)({class:F.Tr,renderEmptyElements:!0,lineMarker:function(e,t){var n=e.state.field(m,!1);if(!n||!n.diff||!n.diff.hasChanges())return null;if(0===n.diff.a.length)return F.vP;var r=e.state.doc.lineAt(t.from);switch(n.diff.getLineChangeType(r.number,G.MF.B)){case G.dQ.COVERED:case G.dQ.MODIFIED:return F.vP;default:return null}},widgetMarker:function(e,t){if(!(t instanceof N))return null;var n=e.state.field(m,!1);if(!n||!n.diff||!n.diff.hasChanges())return null;switch(n.diff.getLineChangeType(t.index,G.MF.A)){case G.dQ.COVERED:case G.dQ.MODIFIED:return F.We;default:return null}},initialSpacer:function(e){var t=e.state.field(m,!1);return(null==t?void 0:t.diff)?F.vP:F.Do},updateSpacer:function(e,t){var n=t.state.field(m,!1),r=(null==n?void 0:n.diff)?F.vP:F.Do;return e===r?e:r}}),V=n(68395),H=function(e){"use strict";(0,l._)(n,e);var t=(0,c._)(n);function n(e,r){var i;return(0,o._)(this,n),(i=t.call(this)).left=e,i.right=r,i}var r=n.prototype;return r.toDOM=function(e){var t=e.state.doc.lines.toString().length,n=document.createElement("div"),r=document.createElement("span"),i=document.createElement("span");return n.className=T,r.className=R,i.className=D,n.style.width="".concat(2*t+1,"ch"),null!==this.left&&(r.textContent=this.left.toString()),null!==this.right&&(i.textContent=this.right.toString()),n.appendChild(r),n.appendChild(i),n},r.eq=function(e){return e instanceof n&&this.left===e.left&&this.right===e.right},n}(s.SJ),z=V.X4.of(function(e,t){if(t instanceof N)return new H(t.index,null)}),j=[V.gy.of(function(e,t){var n,r=e.state.field(m,!1);if(r&&r.diff&&r.diff.hasChanges()){var i=e.state.doc.lineAt(t.from),o=r.diff.getCorrespondingLine(i.number,G.MF.B);return new H(null!==(n=null==o?void 0:o.number)&&void 0!==n?n:null,i.number)}}),z],q=i.r$.define({enables:function(e){return[p.computeN([e],function(t){return t.facet(e)}),F.Lw,m,B,M,j,W]}})},71215:function(e,t,n){n.d(t,{Do:function(){return I},Lw:function(){return _},Tr:function(){return d},Vt:function(){return D},We:function(){return T},vP:function(){return E},wp:function(){return R}});var r,i=n(12285),o=n(42516),a=n(4955),l=n(9670),c=n(3030),s=n(63163),u=s.TV.space2,d="cm-diff-gutter",f="".concat(d,"-element"),h="".concat(f,"-insertion"),p="".concat(f,"-modified"),m="".concat(f,"-deleted"),v="".concat(f,"-file-added"),g="".concat(f,"-empty"),y=s.TV.greenDefault,b=s.TV.greenStronger,w=s.TV.blueDefault,Z=s.TV.blueStronger,x=s.TV.redDefault,C=s.TV.redStronger,k=s.TV.greenDimmer,S=s.TV.greenDefault,_=c.tk.theme((r={},(0,o._)(r,".".concat(d,":first-of-type, .").concat(f),{width:u}),(0,o._)(r,".".concat(h),{backgroundColor:y,"&.cm-activeLineGutter":{backgroundColor:b}}),(0,o._)(r,".".concat(p),{backgroundColor:w,"&.cm-activeLineGutter":{backgroundColor:Z}}),(0,o._)(r,".".concat(m),{backgroundColor:x,"&.cm-activeLineGutter":{backgroundColor:C}}),(0,o._)(r,".".concat(v),{backgroundColor:k,"&.cm-activeLineGutter":{backgroundColor:S}}),(0,o._)(r,".".concat(g),{opacity:0}),r)),E=new(function(e){"use strict";(0,a._)(n,e);var t=(0,l._)(n);function n(){var e;return(0,i._)(this,n),e=t.apply(this,arguments),e.elementClass="".concat(f," ").concat(h),e}return n}(c.SJ)),T=new(function(e){"use strict";(0,a._)(n,e);var t=(0,l._)(n);function n(){var e;return(0,i._)(this,n),e=t.apply(this,arguments),e.elementClass="".concat(f," ").concat(m),e}return n}(c.SJ)),R=new(function(e){"use strict";(0,a._)(n,e);var t=(0,l._)(n);function n(){var e;return(0,i._)(this,n),e=t.apply(this,arguments),e.elementClass="".concat(f," ").concat(p),e}return n}(c.SJ)),D=new(function(e){"use strict";(0,a._)(n,e);var t=(0,l._)(n);function n(){var e;return(0,i._)(this,n),e=t.apply(this,arguments),e.elementClass="".concat(f," ").concat(v),e}return n}(c.SJ)),I=new(function(e){"use strict";(0,a._)(n,e);var t=(0,l._)(n);function n(){var e;return(0,i._)(this,n),e=t.apply(this,arguments),e.elementClass="".concat(f," ").concat(g),e}return n}(c.SJ))},34209:function(e,t,n){n.d(t,{el:function(){return c},er:function(){return u},iG:function(){return s}});var r=n(80403),i=n(25722),o=n(40455),a=r.Py.define(),l=r.Py.define(),c=function(e){var t=e.view,n=e.insert,r=e.scrollIntoView;if(e.overwrite)t.dispatch({changes:{from:0,to:t.state.doc.length,insert:n},effects:a.of(null),scrollIntoView:r,annotations:o.Z.of(!0)});else{var i=t.state.selection.main.head;t.dispatch({changes:{from:t.state.selection.main.from,insert:n},selection:{anchor:i+n.length},effects:a.of(null),scrollIntoView:r,annotations:o.Z.of(!0)})}},s=function(e){var t=e.state.field(u,!1);if(!t){i.Tb(Error("RevetGhostwriterCodeInsertState not found when trying to revert"));return}e.dispatch({changes:t,effects:l.of(null)})},u=r.QQ.define({create:function(){return null},update:function(e,t){e&&(e=e.map(t.changes));var n=!0,r=!1,i=void 0;try{for(var o,c=t.effects[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){var s=o.value;s.is(a)&&(e=t.changes.invert(t.startState.doc)),s.is(l)&&(e=null)}}catch(e){r=!0,i=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw i}}return e}})},43086:function(e,t,n){n.d(t,{i:function(){return d},o:function(){return u}});var r=n(7351),i=n(52130),o=n(50461),a=n(5377),l=n(40455),c=n(78127),s=n(96034),u=function(e){var t=e.state.field(a.WF,!1),n=e.state.facet(o.t);if(!(null==t?void 0:t.presented)||Date.now()-t.timestamp<150)return!1;var u=e.state.selection.main.head,d=e.state.doc.lineAt(u);if(u<=d.from+d.length-d.text.trimStart().length){var f=t.changes.closestRange(u);if(f.value instanceof c.Yf){var h=f.value.unfulfilled.toString(),p=(0,s.L)(h,e.state.tabSize);if(p>0&&p>=e.state.tabSize)return!1}}var m=t.changes.asChangeSpec(),v=e.state.changes(m),g=t.changes.extendSelection(e.state.selection);return(0,r._B)(e),e.dispatch({changes:v,selection:g,scrollIntoView:!0,effects:a.OK.of(t.dismiss(a.VJ.ACCEPTED_BY_USER)),annotations:[l.Z.of(!0),i.Iv.of("full")]}),n.onSuggestionAccepted(e,t),!0},d=function(e){var t=e.state.field(a.WF,!1),n=e.state.facet(o.t);return null!=t&&!!t.presented&&(e.dispatch({effects:a.OK.of(t.dismiss(a.VJ.DISMISSED_BY_USER))}),n.onSuggestionExplicitlyDismissed(e,t),!0)}},50461:function(e,t,n){n.d(t,{t:function(){return r}});var r=n(80403).r$.define({combine:function(e){var t=e.filter(Boolean);return{onDismiss:function(e){return t.forEach(function(t){var n;return null===(n=t.onDismiss)||void 0===n?void 0:n.call(t,e)})},onRequestIgnoredBackendOnly:function(e){return t.forEach(function(t){var n;return null===(n=t.onRequestIgnoredBackendOnly)||void 0===n?void 0:n.call(t,e)})},onRequestFirstEmit:function(e){return t.forEach(function(t){var n;return null===(n=t.onRequestFirstEmit)||void 0===n?void 0:n.call(t,e)})},onRequestEndedWithNoSuggestion:function(e){return t.forEach(function(t){var n;return null===(n=t.onRequestEndedWithNoSuggestion)||void 0===n?void 0:n.call(t,e)})},onRequestCompletelyPresented:function(e){return t.forEach(function(t){var n;return null===(n=t.onRequestCompletelyPresented)||void 0===n?void 0:n.call(t,e)})},onSuggestionExplicitlyDismissed:function(e,n){return t.forEach(function(t){var r;return null===(r=t.onSuggestionExplicitlyDismissed)||void 0===r?void 0:r.call(t,e,n)})},onSuggestionAccepted:function(e,n){return t.forEach(function(t){var r;return null===(r=t.onSuggestionAccepted)||void 0===r?void 0:r.call(t,e,n)})}}}})},6466:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(29574),i=n(93322),o=n(41733),a=n(21262),l=n(71440),c=n(9122);function s(){var e=(0,a._)(['\n  query CompleteCodeEngine {\n    currentUser {\n      id\n      defaultEngine: gateVariation(feature: "flag-ghostwriter-complete-engine")\n      hasOverride: gate(feature: "flag-code-suggestion-engine")\n    }\n  }\n']);return s=function(){return e},e}var u={},d=(0,l.Ps)(s());function f(){var e,t,n,a,l=(0,r.Gn)("completeCodeEngine").preferences,s=(e=(0,o._)({},u,void 0),c.a(d,e)).data,f=null==l?void 0:l.completeCodeEngine;if(f&&(null==s?void 0:null===(t=s.currentUser)||void 0===t?void 0:t.hasOverride)&&i.vw.has(f))return{engine:f,settings:i.Uw[f]};var h=null!==(a=null==s?void 0:null===(n=s.currentUser)||void 0===n?void 0:n.defaultEngine)&&void 0!==a?a:i.OO;return{engine:h,settings:i.Uw[h]}}},32652:function(e,t,n){n.d(t,{Yy:function(){return i},ZP:function(){return p},G_:function(){return h}});var r,i,o=n(37701),a=n(41733),l=n(21262),c=n(71440),s=n(9122);function u(){var e=(0,l._)(['\n  query CompleteCode {\n    currentUser {\n      id\n      hasAiPro\n      hasKillswitch: gate(feature: "flag-killswitch-ghostwriter")\n    }\n  }\n']);return u=function(){return e},e}var d={},f=(0,c.Ps)(u());function h(e){return"None"!==e&&"BackendOnly"!==e}function p(){var e,t=(e=(0,a._)({},d,void 0),s.a(f,e)).data,n=(0,o.v)().isTeamWithAiDisabled,r=null==t?void 0:t.currentUser;return!r||r.hasKillswitch||n?"None":r.hasAiPro?"Pro":"Basic"}(r=i||(i={})).None="None",r.Basic="Basic",r.Pro="Pro",r.BackendOnly="BackendOnly"},1076:function(e,t,n){n.d(t,{Z:function(){return e9}});var r,i,o=n(27387),a=n(96583),l=n(25722),c=n(80403),s=n(3030),u=n(43086),d=c.r$.define({combine:function(e){var t;return null!==(t=e.filter(Boolean)[0])&&void 0!==t?t:null}}),f=n(12285),h=n(4384),p=n(5377),m=function(){"use strict";function e(t,n){(0,f._)(this,e),this.cooldown=t,this.ignored=n}var t=e.prototype;return t.delay=function(t){return new e(Date.now()+t,this.ignored)},t.ignore=function(t){return this.ignored!==t?new e(this.cooldown,t):this},t.vent=function(){return null!==this.cooldown?new e(null,this.ignored):this},t.clear=function(){return null!==this.cooldown||null!==this.ignored?new e(null,null):this},t.tick=function(){return null!==this.cooldown&&Date.now()>this.cooldown?this.vent():this},t.handle=function(e,t){switch(t.reason){case p.VJ.FULLY_TYPED_INTO:case p.VJ.ACCEPTED_BY_USER:return this.clear();case p.VJ.DISMISSED_BY_USER:return this.delay(5e3).ignore(e.suggestion.content);case p.VJ.INCOMPATIBLE_DOCUMENT_CHANGE:case p.VJ.INCOMPATIBLE_CURSOR_CHANGE:return e.suggestion.ctx.onEmptyLine?this.delay(5e3):this.delay(1e3)}return this},t.isIgnored=function(e){return null!==this.ignored&&function(e,t){for(var n=Math.max(e.length,t.length),r=0,i=0;i<n;i++)e[i]!==t[i]&&r++;return 1-r/n}(this.ignored,e)>=.8},(0,h._)(e,[{key:"cooling",get:function(){return null!==this.cooldown&&Date.now()<this.cooldown}},{key:"remaining",get:function(){return null!==this.cooldown?Math.max(0,this.cooldown-Date.now()):0}}]),e}(),v=c.r$.define({combine:function(e){return!e.length||e[0]}}),g=c.QQ.define({create:function(){return new m(null,null)},update:function(e,t){if(!t.state.facet(v)||(e=e.tick()).cooling)return e;var n=t.startState.field(p.WF,!1),r=t.state.field(p.WF,!1);return n&&r&&n.presented&&r.stopped?e.handle(n,r):e}}),y=n(81722),b=n(16634),w=n(40455),Z=c.QQ.define({create:function(){return null},update:function(e,t){if(t.annotation(w.Z)||!t.state.field(p.WF).stopped)return null;if(!t.docChanged&&!t.selection)return e;var n=t.newDoc,r=t.newSelection.main.head;return t.annotation(c.YW.remote)?null!==e&&(0,y.zV)(n,r)&&(0,y.to)(n,r)?e:null:t.selection&&t.isUserEvent("select")?(0,y.zV)(n,r)&&(0,y.to)(n,r)?Date.now():null:t.docChanged&&null!==e?(0,y.zV)(n,r)&&(0,y.to)(n,r)?e:null:e}}),x=function(){"use strict";function e(t){(0,f._)(this,e),this.view=t,this.timeout=null}var t=e.prototype;return t.update=function(e){var t=this,n=e.startState.field(Z),r=e.state.field(Z);n!==r&&(null!==this.timeout&&(clearTimeout(this.timeout),this.timeout=null),null!==r&&(this.timeout=setTimeout(function(){t.timeout=null,t.view.dispatch({effects:[b.mb.of(b.xz.NOW)]})},2500)))},t.destroy=function(){null!==this.timeout&&(clearTimeout(this.timeout),this.timeout=null)},e}(),C=s.lg.fromClass(x,{provide:function(){return Z}}),k=n(41733),S=n(30509),_=n(33083),E=n(6715),T=n(50461);(r=i||(i={}))[r.HIGH=1]="HIGH",r[r.NORMAL=0]="NORMAL",r[r.LOW=-1]="LOW";var R=c.r$.define({combine:function(e){var t=e.filter(Boolean);return function(e){return t.map(function(t){return"function"==typeof t?t(e):t}).filter(Boolean).flat()}}}),D=function(){"use strict";function e(t){if((0,f._)(this,e),this.priority=null!==(n=t.priority)&&void 0!==n?n:i.NORMAL,this.header=t.header,this.segments=t.segments,this.accepted=0,this.curLength=0,this.segments.length){var n,r=this.header?this.header.length+1:0;this.maxLength=r+this.segments.reduce(function(e,t){return e+t.length},0),this.minLength=r+this.segments[this.segments.length-1].length}else this.maxLength=0,this.minLength=0}var t=e.prototype;return t.acceptSegment=function(e){if(this.accepted===this.segments.length)return 0;var t=this.segments[this.index-1],n=0===this.accepted&&this.header?this.header.length+t.length+1:t.length;return n>e?0:(this.accepted++,this.curLength+=n,n)},t.acceptAll=function(){this.accepted=this.segments.length,this.curLength=this.maxLength},t.finalize=function(){return 0===this.accepted?null:(this.header?this.header+"\n":"")+this.segments.slice(this.index).join("").trimEnd()},e.acceptSegments=function(e,t){for(var n=t;t>0;){var r=!1,i=!0,o=!1,a=void 0;try{for(var l,c=e[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value.acceptSegment(t);s&&(t-=s,r=!0)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}if(!r)break}return n-t},(0,h._)(e,[{key:"index",get:function(){return this.segments.length-this.accepted}}]),e}(),I=function(){"use strict";function e(t){(0,f._)(this,e),this.priority=t,this.chunks=[],this.size=0}var t=e.prototype;return t.add=function(e){this.chunks.push(e),this.size+=e.maxLength},t.resize=function(e){if(e<this.accepted)throw Error("Cannot resize below already accepted");this.size=e},t.accept=function(){D.acceptSegments(this.chunks,this.size-this.accepted)},e.fromChunkViews=function(t){var n=[],r=new Map,i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value,u=r.get(s.priority);u||(u=new e(s.priority),n.push(u),r.set(s.priority,u)),u.add(s)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return n},(0,h._)(e,[{key:"accepted",get:function(){return this.chunks.reduce(function(e,t){return e+t.curLength},0)}},{key:"empty",get:function(){return 0===this.size}}]),e}();function B(e,t){switch(e){case"coffeescript":case"dockerfile":case"elixir":case"julia":case"makefile":case"perl":case"python":case"python 3":case"shellscript":case"terraform":case"yaml":return"# ".concat(t);case"sql":case"lua":return"-- ".concat(t);case"html":case"svelte":case"xml":case"xsl":return"<!-- ".concat(t," -->");case"css":return"/* ".concat(t," */");case"tex":case"latex":case"matlab":return"% ".concat(t);case"vb":return"' ".concat(t);case"markdown":return"[]: # ".concat(t);case"handlebars":return"{{!-- ".concat(t," --}}");case"haml":return"-# ".concat(t);case"erb":return"<%# ".concat(t," %>");default:return"// ".concat(t)}}var G=n(31417),P=n(16689),A=n.n(P),L=["o17pu","o1gpu","ovgpu","ovgpure","ovgpuref","ovgpurf","ovgpuva","ovgpuvat","o!gpu","pnzfyhg","pnzjuber","puvap","puvax","pbba","pbbaf","phaavr","phag","phagsnpr","phagubyr","phagyvpx","phagyvpx","phagyvpxre","phagyvpxre","phagyvpxvat","phagyvpxvat","phagent","phagf","qnexvr","qngr encr","qngrencr","snt","sntont","sntt","snttvat","snttvg","snttvgg","snttbg","snttf","sntbg","sntbgf","sntf","sntgneq","sngnff","shpxgneq","shpxgneqf","tnat onat","tnatonat","tnatonatrq","tnatonatrq","tnatonatf","tnlgneq","tnljnq","tbngpk","tbngfr","tevatb","ubne","ubner","ubre","ubbxre","wnvy onvg","wnvyonvg","wnc","wvtnobb","wvttnobb","wvttreobb","xhag","y3v+pu","y3vgpu","yrzba cnegl","ybyvgn","a1ttn","a1ttre","anzoyn","arteb","avtt3e","avtt4u","avttn","avttnu","avttnf","avttnm","avttre","avttref","avtyrg","avt abt","dhrreonvg","dhrreubyr","encr","encvat","encvfg","ergneq","ehfxv","furznyr","fubgn","fxnax","fyhg","fyhgont","fyhgf","jrgonpx","juvgr cbjre","juber"],N=L.reduce(function(e,t){return Math.max(e,t.length)},0),O=new RegExp("(?:\\w+[^\\S\\n]*)?\\w*[^]{".concat(N,"}$")),U=null,X=function(){"use strict";function e(t){var n=this;(0,f._)(this,e),this.config=t,this.finished=!1,this.abortController=new AbortController,this.suggestion="",this.promise=this.start(),this.abortController.signal.addEventListener("abort",function(){if(!n.finished){var e,t;n.finished=!0,null===(e=(t=n.config).onFinished)||void 0===e||e.call(t,null)}})}var t=e.prototype;return t.start=function(){var e=this;return(0,o._)(function(){var t,n,r,i,o,l,c,s,u,d,f,h,p,m,v,g,b,w,Z,x,C,k,S,_,E,T,R,D,I,B,P,X;return(0,a.Jh)(this,function(a){switch(a.label){case 0:a.trys.push([0,13,,14]),i="",o=!0,l=!1,c=void 0;try{for(s=e.config.prefix.iter(-1)[Symbol.iterator]();!(o=(u=s.next()).done)&&(f=(d=u.value).trimEnd(),i=(d?d.slice(f.length):"\n")+i,!(f.length>0));o=!0);}catch(e){l=!0,c=e}finally{try{o||null==s.return||s.return()}finally{if(l)throw c}}h=e.config.prefix.length-i.length,p=i?e.config.prefix.slice(0,h):e.config.prefix,v=e.config.request({prefix:p.toString(),suffix:null===(r=e.config.suffix)||void 0===r?void 0:r.toString(),header:null!==(m=e.config.header)&&void 0!==m?m:void 0,language:e.config.language,maxTokens:e.config.maxTokens,signal:e.abortController.signal}),g=!0,b=!!i,w="",Z=!1,x=!1,a.label=1;case 1:a.trys.push([1,6,7,12]),k=(0,G._)(v),a.label=2;case 2:return[4,k.next()];case 3:if(!(Z=!(S=a.sent()).done))return[3,5];if(_=S.value,b){if(w+=_,(0,y.xb)(_))return[3,4];if(b=!1,E=(0,y.O8)(w),T=(0,y.O8)(i),!E.indentation.startsWith(T.indentation)||!!T.newlines!=!!E.newlines)return e.abort(),[3,5];_=E.indentation.slice(T.indentation.length)+E.content}if(function(e,t){if(t){var n,r;"string"!=typeof t&&(t=t.sliceString(Math.max(0,t.length-2*N))),e=(null!==(r=null===(n=t.match(O))||void 0===n?void 0:n[0])&&void 0!==r?r:t)+e}if(null===U){var i=L.map(function(e){return e.replace(/[a-zA-Z]/g,function(e){return String.fromCharCode(e.charCodeAt(0)+("n">e.toLowerCase()?13:-13))})}).map(function(e){return A()(e.toLowerCase().trim())}).sort(function(e,t){return t.length-e.length}).join("|"),o="\\b|\\d|_";U=RegExp("(?:".concat(o,")(?:").concat(i,")(?:").concat(o,")"),"i")}return U.test(e)}(_,g?p:e.suggestion))return e.abort(),null===(R=(D=e.config).onError)||void 0===R||R.call(D,Error("Slur detected in output")),[3,5];if(e.suggestion+=_,e.config.onTextReceived&&!1===e.config.onTextReceived(e.suggestion,g))return e.abort(),[3,5];g=!1,a.label=4;case 4:return Z=!1,[3,2];case 5:return[3,12];case 6:return I=a.sent(),x=!0,C=I,[3,12];case 7:if(a.trys.push([7,,10,11]),!(Z&&null!=k.return))return[3,9];return[4,k.return()];case 8:a.sent(),a.label=9;case 9:return[3,11];case 10:if(x)throw C;return[7];case 11:return[7];case 12:return[3,14];case 13:return B=a.sent(),e.aborted||e.abort(),B instanceof DOMException&&"AbortError"===B.name||null===(P=(X=e.config).onError)||void 0===P||P.call(X,B),[3,14];case 14:if(e.aborted)return[2,null];return e.finished=!0,null===(t=(n=e.config).onFinished)||void 0===t||t.call(n,e.suggestion),[2,e.suggestion]}})})()},t.abort=function(){this.aborted||this.abortController.abort()},t.then=function(e,t){return this.promise.then(e,t)},(0,h._)(e,[{key:"aborted",get:function(){return this.abortController.signal.aborted}}]),e}(),M=n(16079),F=n(66299),W=n(24986),V=function(){"use strict";function e(t,n,r,i,o){(0,f._)(this,e),this.text=t,this.pos=n,this.docA=r,this.treeA=i,this.parser=o}var t=e.prototype;return t.hasTree=function(){return null!==this.parser&&null!==this.treeA},t.update=function(t){var n=this,r=new e(t,this.pos,this.docA,this.treeA,this.parser);if(r._line=this._line,r._onEmptyLine=this._onEmptyLine,r._inEmptyBlock=this._inEmptyBlock,r._blockA=this._blockA,this.parser&&this.treeA&&(this.reuseData||this._treeB)){var i=(0,W.F)(this.text,t),o=[];i.iterChanges(function(e,t,r,i,a){o.push({from:n.pos+e,to:n.pos+t,insert:a})});var a=c.as.of(o,this.docB.length);this.reuseData&&!this._treeB?r.reuseData={diff:this.reuseData.diff.compose(a),docB:this.reuseData.docB,treeB:this.reuseData.treeB}:this._treeB&&(r.reuseData={diff:a,docB:this.docB,treeB:this._treeB})}return r},(0,h._)(e,[{key:"line",get:function(){return void 0===this._line&&(this._line=this.docA.lineAt(this.pos)),this._line}},{key:"onEmptyLine",get:function(){return void 0===this._onEmptyLine&&(this._onEmptyLine=(0,y.xb)(this.line)),this._onEmptyLine}},{key:"changesAtoB",get:function(){return void 0===this._changesAtoB&&(this._changesAtoB=c.as.of({from:this.pos,to:this.docA.length,insert:this.text},this.docA.length)),this._changesAtoB}},{key:"docB",get:function(){return void 0===this._docB&&(this._docB=this.reuseData?this.reuseData.diff.apply(this.reuseData.docB):this.changesAtoB.apply(this.docA)),this._docB}},{key:"treeB",get:function(){return void 0===this._treeB&&(this.treeA&&this.parser?this.reuseData?this._treeB=(0,F.p)({parser:this.parser,changes:this.reuseData.diff,text:this.docB,base:this.reuseData.treeB}):this._treeB=(0,F.p)({parser:this.parser,changes:this.changesAtoB,text:this.docB,base:this.treeA}):this._treeB=null),this._treeB}},{key:"inEmptyBlock",get:function(){return void 0===this._inEmptyBlock&&(this._inEmptyBlock=!!this.treeA&&(0,M.ib)(this.docA,this.treeA,this.pos)),this._inEmptyBlock}},{key:"blockA",get:function(){return void 0===this._blockA&&(this._blockA=this.treeA?(0,M.gQ)(this.treeA,this.pos):null),this._blockA}},{key:"blockB",get:function(){return void 0===this._blockB&&(this._blockB=this.treeB?(0,M.gQ)(this.treeB,this.pos):null),this._blockB}}]),e}(),H=n(63257),z=n(99415);function j(e,t,n){var r,i=null!==(r=e.prop(t<0?z.md.openedBy:z.md.closedBy))&&void 0!==r?r:null;if(null===i||n&&!i.includes(n.name)){if(!n)return null;i=i?(0,H._)(i).concat([n.name]):[n.name]}return i}function q(e,t,n){var r=j(e.type,t,n);if(null===r)return null;for(var i=e.cursor(),o=0;t<0?i.prevSibling():i.nextSibling();){if(0===o&&i.from!==i.to&&r.includes(i.name))return i.node;if(null!==j(i.type,t)){o++;continue}if(null!==j(i.type,-t)){if(0===o)return null;o--}}return null}function J(e){return e.split("").reverse().join("")}function Y(e){if(!e[0]||1===e.length)return e[0]||"";for(var t=0;e[0][t]&&e.every(function(n){return n[t]===e[0][t]});)t++;return e[0].substring(0,t)}function $(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(e.length<1)return{halt:!1};for(var i=e[e.length-1],o=null!==r?i.split(r):e,a=1;a<=n;a++){var l=!1;if(o.length<a+t)break;for(var c=t;c>0;c--)if(o[o.length-c]!==o[o.length-c-a]){l=!0;break}if(!l)return{halt:!0,truncateLine:e.length-1}}return{halt:!1}}var K=function(e,t){return e.length<t.length},Q=function(e,t){var n=""===e?1:parseInt(e,10),r=parseInt(t,10);return!(isNaN(n)||isNaN(r))&&n+1===r};function ee(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:K;if(e.length<t)return{halt:!1};var o=e.slice(-1*t),a=Y(o),l=J(Y(o.map(J)));if(a.length<n||l.length<r)return{halt:!1};for(var c=null,s=0;s<t;s++){var u=o[s].substring(a.length),d=u.substring(0,u.length-l.length);if(!(!c||i(c,d)))return{halt:!1};c=d}return{halt:!0,truncateLine:e.length-t}}var et=[function(e){return function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=1;r<t;r++){var i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return e.length<t||e[e.length-1].trim().length<n?{halt:!1}:e[e.length-1]===e[e.length-t-1]?{halt:!0,truncateLine:e.length-t}:{halt:!1}}(e,r,n);if(i.halt)return i}return{halt:!1}}(e,8,3)},function(e){return ee(e,3,6,3,K)},function(e){return ee(e,3,6,1,Q)},function(e){return $(e,12,12," ")},function(e){return $(e,8,16,"")}],en=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et;return function(t){for(var n=t.split("\n"),r=n.slice(0,-1),i=0;i<e.length;i++){var o=e[i](n);if(o.halt)return{haltAfter:!0,replacementSuggestion:n.slice(0,o.truncateLine).join("\n")};var a=e[i](r);if(a.halt)return{haltAfter:!0,replacementSuggestion:r.slice(0,a.truncateLine).join("\n")}}return{haltAfter:!1}}}(),er=n(78127),ei=/[([{]+(?=\s*$)/,eo=/[)\]};]+\s*$/,ea=function(){"use strict";function e(t,n,r,i,o){(0,f._)(this,e),this.source=t,this.pos=n,this.newlines=r,this.content=i,this.ctx=o,this.empty=(0,y.xb)(i),this.text=this.empty?"":r+i,this.lines=(0,y.uq)(i)}var t=e.prototype;return t.with=function(t){var n=this.source,r=this.content,i=this.newlines;if("source"in t&&void 0!==t.source){n=t.source;var o=(0,y.O8)(n);r=o.indentation+o.content,i=o.newlines}if("text"in t&&void 0!==t.text){var a=(0,y.O8)(t.text);r=a.indentation+a.content,i=a.newlines}"content"in t&&void 0!==t.content&&(r=t.content),"newlines"in t&&void 0!==t.newlines&&(i=t.newlines);var l=this;if(n!==this.source||r!==this.content||i!==this.newlines){var c=this.ctx.update((0,y.xb)(r)?"":i+r);l=new e(n,this.pos,i,r,c)}return!l.empty&&t.process&&(l="boolean"==typeof t.process?l.process():l.process(t.process)),l},t.slice=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n?this.with({text:this.text.slice(e,t)}):this.with({content:this.content.slice(e,t)})},t.splice=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=r?this.text:this.content,o=i.slice(0,e),a=i.slice(e+t);return r?this.with({text:o+n+a}):this.with({content:o+n+a})},t.clip=function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=this.segments[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;if(a.pos>=e)return this.slice(0,a.index+a.offset,!0)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return this},t.stopAtLine=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t?this.newlines.length:0;if(e<0||e>this.lines.length+n)throw Error("Index out of range: "+e);if(t&&e<n)return this.with({text:this.newlines.slice(0,e)});for(var r=e-n;r<this.lines.length&&(0,y.Jz)(this.lines[r]);)r++;var i=this.lines.slice(0,r).join("\n");return this.with({content:i})},t.removeIncompleteLine=function(){if(1===this.lines.length)return this;var e=this.lines[this.lines.length-1];return(0,y.xb)(e)||eo.test(e)?this:this.slice(0,this.content.length-e.length)},t.trimEnd=function(){return this.with({content:this.content.trimEnd()})},t.removeNewlinesIfOnEmptyLine=function(){return this.newlines&&this.ctx.onEmptyLine?this.with({newlines:""}):this},t.cutSuggestion=function(){if(this.empty)return this;if((0,y.Jz)(this.lines[0])||!this.ctx.hasTree())return this.stopAtLine(1);var e=(0,M.zX)(this.ctx.treeB,this.pos);if(!e.length)return this.stopAtLine(1);var t=this.pos+this.lines[0].length,n=this.ctx.inEmptyBlock?e:e.filter(function(e){return e.from<=t}),r=n.length?n[n.length-1].to-this.pos:null;return(null!==r&&r<0&&(r=null),this.ctx.blockB&&this.ctx.blockB.node.from<this.pos&&(null===r||r>this.ctx.blockB.node.to-this.pos)&&(this.ctx.inEmptyBlock||!this.ctx.blockA||this.ctx.blockA.node.from<this.ctx.blockB.node.from)&&(r=this.ctx.blockB.node.to-this.pos),null===r)?this.ctx.inEmptyBlock?this.ctx.blockA?this.clip(this.ctx.blockA.node.to):this:this.ctx.blockA?this.stopAtLine(1).clip(this.ctx.blockA.node.to):this.stopAtLine(1):this.ctx.blockA&&(this.ctx.inEmptyBlock||!this.ctx.onEmptyLine)?this.slice(0,r,!0).clip(this.ctx.blockA.node.to):this.slice(0,r,!0)},t.filter=function(){var e=en(this.content).replacementSuggestion;return e?this.with({content:e}):this},t.clearIfContentIsIsolated=function(){if(!this.ctx.onEmptyLine)return this;if(this.newlines)return this.with({content:""});if(1===this.segments.length&&0===this.segments[0].offset)return this;var e=this.segments.find(function(e){return!(0,y.xb)(e.text.slice(e.offset))});return e&&this.ctx.docA.lineAt(e.pos).number!==this.ctx.line.number?this.with({content:""}):this},t.removeDuplicateLastLine=function(){if(!this.newlines&&1===this.lines.length&&!this.ctx.onEmptyLine)return this;var e=this.segments[this.segments.length-1];if(e.offset===e.text.length-1)return this;var t=this.ctx.docA.lineAt(e.pos);if(t.number===this.ctx.docA.lines)return this;var n=e.text.slice(e.offset),r=n.lastIndexOf("\n"),i=-1!==r,o=i?e.index+e.offset+r:e.index+e.offset,a=i?n.slice(r+1):n;return(0,y.xb)(a)?this:(!i&&(0,y.xb)(t)&&(a=t.text+a),a===this.ctx.docA.line(t.number+1).text)?this.slice(0,o,!0):this},t.removeTrailingOpenBrackets=function(){var e=ei.exec(this.content);return e?this.splice(e.index,e.length):this},t.process=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.skipComplexProcessing?this.removeIncompleteLine().trimEnd().removeNewlinesIfOnEmptyLine():this.removeIncompleteLine().removeNewlinesIfOnEmptyLine().cutSuggestion().filter().trimEnd().removeDuplicateLastLine().removeTrailingOpenBrackets().trimEnd().clearIfContentIsIsolated()},e.create=function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=(0,y.O8)(t),l=a.indentation+a.content,c=a.newlines,s=new V((0,y.xb)(l)?"":c+l,n,r,i,o);return new e(t,n,c,l,s)},(0,h._)(e,[{key:"segments",get:function(){if(void 0===this._segments){if(this.ctx.hasTree()){var e,t=function(e){var t=function(e){var t,n,r,i,o=e.insertion,a=e.pos;if("doc"in e){var l=e.parser;t=e.doc,n=e.tree;var s=c.as.of({from:a,to:t.length,insert:o},t.length);r=s.apply(t),i=(0,F.p)({parser:l,changes:s,text:r,base:n})}else t=e.docA,n=e.treeA,r=e.docB,i=e.treeB;return{insertion:o,pos:a,docA:t,treeA:n,docB:r,treeB:i}}(e),n=t.insertion,r=t.pos,i=t.docA,o=t.treeA,a=t.docB,l=t.treeB,s=[],u=[],d=l.cursor();do{if(null===j(d.type,-1))continue;var f=d.node,h=q(f,-1);if(h&&h.to<=r){var p=function(e,t){for(var n=t.resolveInner(e.from,1).node;n&&n.from===e.from;){if(n.type===e.type)return n;n=n.parent}return null}(h,o);if(p){s.push({openA:p,closeB:f});var m=q(p,1,f.type);m&&m.from>=r&&u.push(m)}}}while(d.prev()&&d.to>r);if(0===s.length||0===u.length)return null;var v=[],g=!0,y=!1,b=void 0;try{for(var w,Z=s[Symbol.iterator]();!(g=(w=Z.next()).done);g=!0){var x=w.value,C=x.openA,k=x.closeB,S=a.sliceString(k.from,k.to),_=j(C.type,1,k.type);if(null===_)throw Error("Unexpected null matching types");for(var E=0;E<u.length;E++){var T=u[E];if(_.includes(T.name)&&i.sliceString(T.from,T.to)===S){u.splice(0,E+1),v.unshift({closeA:T,closeB:k});break}}}}catch(e){y=!0,b=e}finally{try{g||null==Z.return||Z.return()}finally{if(y)throw b}}if(0===v.length)return null;var R=[{text:n,pos:r,index:0,offset:0}],D=0,I=!0,B=!1,G=void 0;try{for(var P,A=v[Symbol.iterator]();!(I=(P=A.next()).done);I=!0){var L=P.value,N=L.closeA,O=L.closeB,U=R.pop();if(!U)throw Error("Unexpected empty split");var X=O.from-r,M=0;if(U.pos<N.from){for(var W=1;function(e,t,n,r){var i=e.sliceString(n,n+1);return i===t.sliceString(r,r+1)&&""===i.trim()}(i,a,N.from-W,O.from-W)&&N.from-W>=U.pos&&O.from-W>=r;)W++;M=W-1}X-=M;var V={text:n.slice(D,X),pos:U.pos,index:U.index,offset:U.offset},H={text:n.slice(X),pos:N.to,index:X,offset:N.to-N.from+M};D=X,R.push(V,H)}}catch(e){B=!0,G=e}finally{try{I||null==A.return||A.return()}finally{if(B)throw G}}return""===R[R.length-1].text&&R.pop(),R}({insertion:this.text,pos:this.pos,docA:this.ctx.docA,treeA:this.ctx.treeA,docB:this.ctx.docB,treeB:this.ctx.treeB});t&&(this._segments=t)}null!==(e=this._segments)&&void 0!==e||(this._segments=[{text:this.text,index:0,pos:this.pos,offset:0}])}return this._segments}},{key:"insertions",get:function(){if(void 0===this._insertions){var e=new c.f_,t=!0,n=!1,r=void 0;try{for(var i,o=this.segments[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value,l=c.xv.of((0,y.uq)(a.text)),s=new er.Yf(l,a.offset);e.add(a.pos,a.pos,s)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}this._insertions=e.finish()}return this._insertions}}]),e}(),el=n(41091),ec=n(64988),es=function(){"use strict";function e(t){(0,f._)(this,e),this.view=t,this.destroyed=!1,this.stream=null,this.debounceTimeout=null,this.queued=!1,this.lastPrefixLength=0}var t=e.prototype;return t.dispatchSuggestion=function(e){this.view.dispatch({effects:p.OK.of(e)})},t.dismiss=function(e){this.queued=!1,null!==this.debounceTimeout&&(clearTimeout(this.debounceTimeout),this.debounceTimeout=null),!this.stream||this.stream.finished||this.stream.aborted||this.stream.abort(),this.destroyed||this.suggestion.stopped||this.dispatchSuggestion(this.suggestion.dismiss(e)),this.listeners.onDismiss(this.view)},t.requestSuggestion=function(e){var t,n,r=this;if(null!==this.config&&null!==this.fileTypeConfig){if(null!==this.debounceTimeout&&(clearTimeout(this.debounceTimeout),this.debounceTimeout=null),!this.config.debounceAlways&&!this.regulator.cooling&&e===b.xz.NOW){this.requestSuggestionImmediately();return}var i=this.view.state.selection.main.head,o=this.view.state.wordAt(i),a=o&&o.from!==i?null!==(n=this.config.debounceTimeInsideWord)&&void 0!==n?n:0:null!==(t=this.config.debounceTimeOutsideWord)&&void 0!==t?t:0;this.regulator.cooling&&(a=Math.max(a,this.regulator.remaining)),0===a?this.requestSuggestionImmediately():this.debounceTimeout=setTimeout(function(){r.debounceTimeout=null,r.requestSuggestionImmediately()},a)}},t.requestSuggestionImmediately=function(){var e,t,n,r,i=this;if(this.dismiss(),!this.suggestion.stopped)throw Error("dismiss should have stopped the suggestion");if(null!==this.config&&null!==this.fileTypeConfig&&!this.destroyed&&this.view.hasFocus&&(0,y.zV)(this.view.state.doc,this.view.state.selection.main.head)){var o=this.config,a=this.view.state,c=a.selection.main.head,s=a.doc,u=(0,_.qz)(a),d=null!==(t=null===(e=a.facet(_.dK))||void 0===e?void 0:e.parser)&&void 0!==t?t:null,f=this.fileTypeConfig,h={skipComplexProcessing:null!==(n=f.skipComplexProcessing)&&void 0!==n&&n},m=a.facet(R),v=function(e){var t=e.doc,n=e.pos,r=e.path,i=e.language,o=e.infill,a=e.context,l=e.limit,c=void 0===l?E.UQ:l,s=e.reserved,u=void 0===s?E.i$:s,d=["Language: ".concat(i),"Path: ".concat(r)].map(function(e){return B(i,e)}).join("\n")+"\n";if(d.length>c)throw Error("Cannot fit required header parts in prompt");if(null==a?void 0:a.length){var f=function(e,t){if((t-=2*e.length)<=0)return null;var n=e.map(function(e){return new D(e)}).filter(function(e){return e.maxLength>0&&e.minLength<=t}).sort(function(e,t){return e.priority===t.priority?e.minLength-t.minLength:t.priority-e.priority});if(!n.length)return null;var r=I.fromChunkViews(n),i=r.reduce(function(e,t){return e+t.size},0);if(i>t){var o=!0,a=!1,l=void 0;try{for(var c,s=r[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value;u.size>t&&(i-=u.size-t,u.resize(t))}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}for(;i>t;){var d=1,f=!0,h=!1,p=void 0;try{for(var m,v=r[Symbol.iterator]();!(f=(m=v.next()).done);f=!0){var g=m.value;if(!g.empty){var y=Math.max(0,g.size-d);i-=g.size-y,g.resize(y),d++}}}catch(e){h=!0,p=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw p}}}var b=!0,w=!1,Z=void 0;try{for(var x,C=r[Symbol.iterator]();!(b=(x=C.next()).done);b=!0){var k=x.value;k.empty||k.accept()}}catch(e){w=!0,Z=e}finally{try{b||null==C.return||C.return()}finally{if(w)throw Z}}var S=r.reduce(function(e,t){return e+t.accepted},0);S<t&&D.acceptSegments(n,t-S)}else n.forEach(function(e){return e.acceptAll()});return n.map(function(e){return e.finalize()}).filter(Boolean).reverse().join("\n\n")||null}(a,Math.max(u-d.length-2,c-n-d.length-2));f&&(d=f+"\n\n"+d)}var h=function(e,t,n){for(var r=e.slice(0,t);r.length>n;)r=r.lines>1?r.slice(r.line(1).to+1):r.slice(r.length-n);return r}(t,n,c-d.length),p=o?function(e,t){var n=e.slice(t);if(1===n.lines)return n;var r=0,i=null,o=!0,a=!1,l=void 0;try{for(var c,s=n.iterLines()[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value;if(r++,""!==u&&u.trimStart()===u){i=n.line(r);break}}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return i?n.slice(0,i.to):n}(t,n):null;if(d.length+h.length>c)throw Error("Prompt is over the maximum length");return{prefix:h,suffix:p,header:d}}({doc:s,pos:c,path:f.path,language:f.id,infill:null!==(r=this.config.infill)&&void 0!==r&&r,context:m(this.view)}),g=v.prefix,w=v.suffix,Z=v.header,x=(0,M.ib)(s,u,c)?E.uV.EMPTY_BLOCK:E.uV.DEFAULT;this.lastPrefixLength=g.length,o.backendOnly||this.dispatchSuggestion(this.suggestion.start()),this.stream=new X({request:o.request,language:f.id,maxTokens:x,prefix:g,suffix:w,header:Z,onTextReceived:function(e,t){if(t&&i.listeners.onRequestFirstEmit(i.view),o.backendOnly){i.listeners.onRequestIgnoredBackendOnly(i.view);return}if(i.suggestion.stopped||!t&&i.suggestion.slotted)return!1;var n=i.suggestion.slotted?i.suggestion.upgrade(ea.create(e,c,s,u,d).process(h)):i.suggestion.with({source:e,process:h});if(n.stopped||n.suggestion.empty)return!1;i.dispatchSuggestion(n)},onFinished:function(e){var t=i.queued;if(i.queued=!1,!o.backendOnly){if(e&&i.suggestion.active){var n=i.suggestion.suggestion.source!==e?i.suggestion.with({source:e,process:h}):i.suggestion;if(!n.stopped&&!n.suggestion.empty&&!i.regulator.isIgnored(n.suggestion.content)){i.dispatchSuggestion(n.presented?n:n.present()),i.listeners.onRequestCompletelyPresented(i.view);return}}i.dismiss(p.VJ.INCOMPATIBLE_SUGGESTION),t&&i.requestSuggestion(b.xz.ENQUEUE),""===e&&i.listeners.onRequestEndedWithNoSuggestion(i.view)}},onError:function(e){l.$e(function(t){t.setExtra("prefix",g.toString()),t.setExtra("suffix",null==w?void 0:w.toString()),t.setExtra("header",Z),t.setExtra("maxTokens",x),t.setExtra("filePath",f.path),t.setExtra("language",f.id),t.setExtra("selection-head",c),t.setExtra("previous-character",s.sliceString(c-1,c)),t.setTag("ghostwriter",!0),l.Tb(e)})}})}},t.postUpdate=function(e){var t=e.startState.field(p.WF,!1),n=e.state.field(p.WF,!1);t&&n&&t.presented&&n.stopped&&n.reason===p.VJ.FULLY_TYPED_INTO&&this.listeners.onSuggestionAccepted(this.view,t),(0,ec.aU)(e,d,el.Yp,el.xR)&&this.dismiss(),(0,ec.aU)(e,p.WF)&&this.suggestion.stopped&&this.streaming&&this.dismiss();var r=(0,b.Io)(e.transactions);switch(r){case b.xz.STOP:this.active&&this.dismiss();break;case b.xz.ENQUEUE:case b.xz.NOW:this.active?this.queued=!0:this.requestSuggestion(r)}},t.destroy=function(){this.destroyed=!0,this.dismiss()},(0,h._)(e,[{key:"config",get:function(){return this.view.state.facet(d)}},{key:"listeners",get:function(){return this.view.state.facet(T.t)}},{key:"suggestion",get:function(){return this.view.state.field(p.WF)}},{key:"regulator",get:function(){return this.view.state.field(g)}},{key:"fileTypeConfig",get:function(){var e,t=this.view.state.facet(el.Yp),n=this.view.state.facet(el.xR),r=null==n?void 0:null===(e=n.getFeature("ai"))||void 0===e?void 0:e.complete;return t&&n&&(null==r?void 0:r.enabled)?(0,S._)((0,k._)({},r),{id:n.id,path:t}):null}},{key:"streaming",get:function(){return null!==this.debounceTimeout||null!==this.stream&&!this.stream.finished}},{key:"active",get:function(){return this.streaming||!this.suggestion.stopped}}]),e}(),eu=s.lg.fromClass(es,{provide:function(e){return s.tk.updateListener.of(function(t){var n;null===(n=t.view.plugin(e))||void 0===n||n.postUpdate(t)})}}),ed=function(){"use strict";function e(t){(0,f._)(this,e),this.view=t,this.gesture=null,this.touchstart=this.touchstart.bind(this),this.touchmove=this.touchmove.bind(this),this.touchend=this.touchend.bind(this),this.touchcancel=this.touchcancel.bind(this),t.dom.addEventListener("touchstart",this.touchstart)}var t=e.prototype;return t.shouldAllowSwiping=function(){if(!this.view.hasFocus)return!1;var e=this.view.state.selection.main.head,t=this.view.viewport;if(t.from>e||t.to<e)return!1;var n=this.view.state.field(p.WF,!1);return!!(null==n?void 0:n.presented)},t.stop=function(){this.gesture&&(this.gesture=null,document.removeEventListener("touchmove",this.touchmove),document.removeEventListener("touchend",this.touchend),document.removeEventListener("touchcancel",this.touchcancel))},t.touchFor=function(e){if(!this.gesture)return null;var t=!0,n=!1,r=void 0;try{for(var i,o=e.changedTouches[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;if(a.identifier===this.gesture.id)return a}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return null},t.touchstart=function(e){if(this.gesture&&!this.gesture.time)return this.stop();if(!this.gesture&&this.shouldAllowSwiping()&&1===e.changedTouches.length){var t=e.changedTouches[0];this.gesture={id:t.identifier,start:{x:t.clientX,y:t.clientY},end:{x:t.clientX,y:t.clientY},time:null},document.addEventListener("touchmove",this.touchmove,{passive:!1}),document.addEventListener("touchend",this.touchend,{passive:!1}),document.addEventListener("touchcancel",this.touchcancel)}},t.touchmove=function(e){var t=this.touchFor(e);if(this.gesture&&t){if(this.gesture.end.x=t.clientX,this.gesture.end.y=t.clientY,this.gesture.time&&Date.now()-this.gesture.time>500)return this.stop();var n=Math.abs(this.gesture.start.y-this.gesture.end.y),r=Math.abs(this.gesture.start.x-this.gesture.end.x);if(n>20)return this.stop();if(r>10){if(this.gesture.start.x>this.gesture.end.x)return this.stop();this.gesture.time||(this.gesture.time=Date.now()),e.preventDefault()}}},t.touchend=function(e){var t=this.touchFor(e);if(this.gesture&&t){this.gesture.end.x=t.clientX,this.gesture.end.y=t.clientY;var n=Math.abs(this.gesture.start.y-this.gesture.end.y),r=Math.abs(this.gesture.start.x-this.gesture.end.x);n<=20&&r>75&&this.gesture.start.x<this.gesture.end.x&&(!this.gesture.time||Date.now()-this.gesture.time<500)&&((0,u.o)(this.view),e.preventDefault()),this.stop()}},t.touchcancel=function(e){this.touchFor(e)&&this.stop()},t.update=function(){this.gesture&&!this.shouldAllowSwiping()&&this.stop()},t.destroy=function(){this.view.dom.removeEventListener("touchstart",this.touchstart),document.removeEventListener("touchmove",this.touchmove),document.removeEventListener("touchend",this.touchend),document.removeEventListener("touchcancel",this.touchcancel)},e}(),ef=s.lg.fromClass(ed),eh=n(70625),ep=c.r$.define({combine:function(e){var t;return null!==(t=e.filter(Boolean)[0])&&void 0!==t?t:null},enables:function(e){return[d.compute([e],function(t){return t.facet(e)}),p.WF,b._v,eu,ef,C,g,c.Wl.high(s.$f.compute([e],function(t){var n=t.facet(e),r=[];return(null==n?void 0:n.keyAcceptSuggestion)&&r.push({key:(0,eh.cU)(n.keyAcceptSuggestion),run:u.o}),(null==n?void 0:n.keyDismissSuggestion)&&r.push({key:(0,eh.cU)(n.keyDismissSuggestion),run:u.i}),r}))]}}),em=n(17528),ev=n(2178),eg=n(75271);function ey(){return(ey=(0,ev._)(function(e){var t,n,r,i;return(0,a.Jh)(this,function(o){switch(o.label){case 0:t=e.getReader(),o.label=1;case 1:return[4,(0,em._)(t.read())];case 2:if(r=(n=o.sent()).done,i=n.value,r)return[3,4];return[4,i];case 3:return o.sent(),[3,1];case 4:return t.releaseLock(),[2]}})})).apply(this,arguments)}var eb=n(46780),ew=n(90169);function eZ(){return(eZ=(0,ev._)(function(e){var t,n,r,i,o,l,c,s,u,d,f,h,p,m;return(0,a.Jh)(this,function(a){switch(a.label){case 0:t=new TextDecoder("utf-8"),n="",r=!1,i=!1,a.label=1;case 1:a.trys.push([1,11,12,17]),l=(0,G._)(function(e){return ey.apply(this,arguments)}(e)),a.label=2;case 2:return[4,(0,em._)(l.next())];case 3:if(!(r=!(c=a.sent()).done))return[3,10];s=c.value,u=t.decode(s,{stream:!0}),n+=u,d=void 0,a.label=4;case 4:if(!(-1!==(d=n.indexOf("\n\n"))))return[3,9];if(!n.startsWith("data: ")||!("text"in(f=JSON.parse(n.slice(6,d)))))return[3,8];h=f.text.split("\n"),p=0,a.label=5;case 5:if(!(p<h.length))return[3,8];return[4,JSON.stringify({text:h[p]+"\n"})+"\n"];case 6:a.sent(),a.label=7;case 7:return p++,[3,5];case 8:return n=n.substring(d+1),[3,4];case 9:return r=!1,[3,2];case 10:return[3,17];case 11:return m=a.sent(),i=!0,o=m,[3,17];case 12:if(a.trys.push([12,,15,16]),!(r&&null!=l.return))return[3,14];return[4,l.return()];case 13:a.sent(),a.label=14;case 14:return[3,16];case 15:if(i)throw o;return[7];case 16:return[7];case 17:return[2]}})})).apply(this,arguments)}var ex=n(32652),eC=n(10777),ek=n(13556),eS=new Map,e_={beforeCompletion:function(e){l.n_({category:"ghostwriter",message:"Called completeCode: "+e.engine,level:"debug"});var t=ek.YX.add(e),n=eC.kg.timeStart({engine:e.engine,replid:e.replId,codeLength:e.header?e.header.length+e.prefix.length:e.prefix.length});return eS.set(t,n),t},afterCompletion:function(e,t,n,r){switch(e){case"aborted":ek.YX.abort(r),eS.delete(r);break;case"success":l.n_({category:"ghostwriter",message:"Suggestion emitted: "+n.partialSuggestion,level:"debug"});var i,o=eS.get(r);if(!o)throw Error("No latency logger found for handle: "+JSON.stringify(r));o("code suggestion",{type:"success",fromCache:n.fromCache,length:null===(i=n.partialSuggestion)||void 0===i?void 0:i.length}),eS.delete(r);break;case"finished":ek.YX.complete(r,{__typename:"CompleteCodeResult",id:Date.now().toString(),code:n.completeSuggestion});break;default:throw Error("Unknown completion kind: "+e)}},erroredCompletion:function(e,t){t&&(ek.YX.abort(t),eS.delete(t)),eC.kg.error("CompleteCode: error in completion provider",{err:String(e)})}},eE=n(96949),eT=n(59266),eR=n(42305),eD=n(29574),eI=n(14118),eB=n(16155),eG=n(83059),eP=n(10126);function eA(e){return JSON.stringify({text:e})+"\n"}var eL=function(){"use strict";function e(){(0,f._)(this,e),this.list=[]}var t=e.prototype;return t.add=function(e,t,n){this.list.push({prefix:e,suggestion:t,tokens:n}),this.list.length>25&&this.list.pop(),this.list.sort(function(e,t){return t.suggestion.length-e.suggestion.length})},t.retrieve=function(e,t){for(var n=0;n<this.list.length;n++){var r=this.list[n],i=r.prefix,o=r.suggestion,a=r.tokens;if(!(2*a<t)){if(e===i)return eA(o);if(!(i.length>e.length||i.length+o.length<=e.length||2*Math.floor((i.length+o.length-e.length)/(o.length/a))<t)){var l=o.lastIndexOf("\n");if(-1===l||!(l<=e.length-i.length)){var c=i+o;if(c.startsWith(e)){var s=c.slice(e.length);if(s.trim().length)return eA(s)}}}}}return null},e}(),eN=n(6466),eO=n(66626),eU=n(82973),eX=n(49853),eM=n(80786),eF="ai.codecomplete.lastTooltipHintTimestamp",eW=(0,eX.cn)({tooltipOpen:!1,consecutiveRejections:0}),eV=n(23882),eH=n(65559),ez=n(45077),ej=n(22961),eq=n(22524),eJ=n(35370),eY=/\n\n(?![^\S\n])/g,e$=new(function(){"use strict";function e(){(0,f._)(this,e),this.map=new Map}var t=e.prototype;return t.removeExpired=function(){if(this.map.size){var e=Date.now(),t=!0,n=!1,r=void 0;try{for(var i,o=this.map.entries()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=(0,eO._)(i.value,2),l=a[0],c=a[1];e-c.timestamp>6e4&&this.map.delete(l)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}}},t.get=function(e){return this.removeExpired(),this.map.get(e)},t.add=function(e,t,n){if(this.removeExpired(),!this.map.has(e)&&10===this.map.size){var r=null,i=!0,o=!1,a=void 0;try{for(var l,c=this.map.values()[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;(!r||s.timestamp<r.timestamp)&&(r=s)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}if(!r)throw Error("Expected to find entry to remove from file cache");this.map.delete(r.path)}this.map.set(e,{path:e,type:t,content:n,timestamp:Date.now()})},t.clear=function(){this.map.clear()},e}()),eK=function(){"use strict";function e(t,n,r){var i=this;(0,f._)(this,e),this.view=t,this.readFile=n,this.recentFiles=r,this.destroyed=!1,this.chunks=[],this.dispose=r.subscribe(function(){return i.updateChunks()}),r.current.length&&this.updateChunks()}var t=e.prototype;return t.updateChunks=function(){var e=this;return(0,o._)(function(){var t,n,r,o,l,c,s,u,d,f,h,p,m,v,g,b;return(0,a.Jh)(this,function(w){switch(w.label){case 0:if(r=[],e.chunks=r,o=e.view.state.facet(el.Yp),l=e.view.state.facet(el.xR),!o||!l)return[2];"all"===(s=null!==(c=null===(n=l.features.ai)||void 0===n?void 0:null===(t=n.complete)||void 0===t?void 0:t.groups)&&void 0!==c?c:[])&&(s=[]),u=e.recentFiles.current.filter(function(e){return e!==o&&(0,eJ.Mb)(e)}),d=!0,f=!1,h=void 0,w.label=1;case 1:w.trys.push([1,6,7,8]),p=function(){var t,n,c,u,d,f,h,p,m,g,b,w,Z,x,C;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(t=v.value,h=null==(f=null!==(d=null==(u=e$.get(t))?void 0:u.type)&&void 0!==d?d:ej.$R.from(t))?void 0:null===(n=f.features.ai)||void 0===n?void 0:n.complete,!f||!(null==h?void 0:h.enabled))return[2,"continue"];if(!(f.id===l.id||"all"===h.groups||(null===(c=h.groups)||void 0===c?void 0:c.some(function(e){return s.includes(e)}))))return[3,3];if(void 0!==(p=null==u?void 0:u.content))return[3,2];return[4,e.readFile(t)];case 1:if(m=a.sent(),e.destroyed||e.chunks!==r)return[2,{v:void 0}];if(null===m)return[2,"continue"];p=m,e$.add(t,f,p),a.label=2;case 2:var k;if(!(g=(k=(k=p).trim())?k.split(eY).map(function(e){return e.trim()}).filter(Boolean):[]).length)return[2,"continue"];if(b=B(l.id,"Consider this snippet from ".concat((0,eq.LA)(t,o))),w=B(l.id,""),Z=g.map(function(e){return(0,y.uq)(e).map(function(e){return B(l.id,e)}).join("\n")+"\n".concat(w,"\n")}),x=r.length,C=i.NORMAL,x<2?C=i.HIGH:x>=5&&(C=i.LOW),r.push({header:b,segments:Z,priority:C}),r.length>=10)return[2,"break"];a.label=3;case 3:return[2]}})},m=u[Symbol.iterator](),w.label=2;case 2:if(d=(v=m.next()).done)return[3,5];return[5,(0,a.XA)(p())];case 3:if(g=w.sent(),"object"===(0,ez._)(g))return[2,g.v];if("break"===g)return[3,5];w.label=4;case 4:return d=!0,[3,2];case 5:return[3,8];case 6:return b=w.sent(),f=!0,h=b,[3,8];case 7:try{d||null==m.return||m.return()}finally{if(f)throw h}return[7];case 8:return[2]}})})()},t.update=function(e){(0,ec.aU)(e,el.Yp,el.xR)&&this.updateChunks()},t.destroy=function(){this.destroyed=!0,this.dispose()},e}(),eQ=new eR.j(function(e,t){return e&&t?s.lg.define(function(n){return new eK(n,e,t)},{provide:function(e){return R.of(function(t){var n,r;return null!==(r=null===(n=t.plugin(e))||void 0===n?void 0:n.chunks)&&void 0!==r?r:null})}}):null}),e0=n(78950),e1=n(13054),e2=[];function e3(e){if(!(e.length>800)){var t=e2.indexOf(e);-1!==t&&e2.splice(t,1),e2.unshift(e),e2.length>10&&e2.pop()}}var e4=!1;function e8(e,t){var n=(0,e1.I)(t.state),r=n.text,i=n.linewise;if(r&&r.trim()){if(i){var o=r.split(t.state.lineBreak).filter(function(e){return e.trim()}),a=!0,l=!1,c=void 0;try{for(var s,u=o[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value;e3(d)}}catch(e){l=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}}else e3(r)}}var e6=[s.lg.define(function(){return!function(){if(!e4){e4=!0;var e=function(e){var t,n=null===(t=document.getSelection())||void 0===t?void 0:t.toString();n&&n.trim()&&Promise.resolve().then(function(){e.defaultPrevented||e3(n)})};document.addEventListener("copy",e),document.addEventListener("cut",e)}}(),{}}),c.Wl.highest(s.tk.domEventObservers({copy:function(e,t){return e8(e,t)},cut:function(e,t){return e8(e,t)}})),R.of(function(e){if(!e2.length)return null;var t=e.state.facet(el.xR);if(!t)return null;var n=function(e){return B(t.id,e)},r=(0,e0._)(e2),o=r[0],a=r.slice(1),l=[];if(o&&o.trim()){var c=n("Consider the current clipboard:"),s=o.trimEnd().split("\n").map(function(e){return n(e)}).join("\n");l.push({header:c,segments:[s],priority:i.HIGH})}var u=a.filter(function(e){return e&&e.trim()});if(u.length){var d=n("Consider the clipboard history:"),f=u.map(function(e){return e.trimEnd().split("\n").map(function(e,t){return 0===t?n("- ".concat(e)):n("  ".concat(e))}).join("\n")}).reverse();l.push({header:d,segments:f})}return l.length?l:null})],e5=new eR.j(function(e,t,n,r,i,o,a,l,c){var s,u;return e?(t===ex.Yy.Pro?(s=E.Dz,u=E.Dz):(s=a,u=a),[ep.of({request:o,infill:i,backendOnly:t===ex.Yy.BackendOnly,debounceTimeOutsideWord:s,debounceTimeInsideWord:u,debounceAlways:t!==ex.Yy.Pro,keyAcceptSuggestion:n,keyDismissSuggestion:r}),l?e6:[],c?[]:v.of(!1)]):null}),e7=new eR.j(function(e,t,n,r){if(!e)return null;var i,o,a=(i=null,o=function(){},{queue:function(e){if(!(Math.random()>.1)){i&&clearTimeout(i);var t=function(){(0,eE.j)(eE.U3.CODE_SUGGESTION_USED,(0,k._)({type:"suggestionPresented"},e))};i=setTimeout(t,500),o=t}},flush:function(){i&&clearTimeout(i),o()},cancel:function(){i&&clearTimeout(i)}});return T.t.of({onDismiss:function(){a.cancel()},onRequestIgnoredBackendOnly:function(){l.n_({category:"ghostwriter",message:"called completeCode for free user but did not show the ghost text.",level:"info"}),(0,eE.j)(eE.U3.CODE_SUGGESTION_USED,{type:"suggestionNotPresented",engine:t,filePath:n,reason:"ghostTextNotEnabledForFreeUser"})},onRequestFirstEmit:function(e){var r=e.plugin(eu);r&&(l.n_({category:"ghostwriter",message:"Suggestion presented",level:"debug"}),a.queue({engine:t,filePath:n,prefixLength:r.lastPrefixLength}))},onRequestEndedWithNoSuggestion:function(){l.n_({category:"ghostwriter",message:"Exited completeCode iteration with no suggestion.",level:"info"}),(0,eE.j)(eE.U3.CODE_SUGGESTION_USED,{type:"suggestionNotPresented",engine:t,filePath:n,reason:"noSuggestion"})},onSuggestionAccepted:function(e,i){var o=e.plugin(eu);o&&(a.flush(),(0,eE.j)(eE.U3.CODE_SUGGESTION_USED,{type:"suggestionAccepted",engine:t,filePath:n,prefixLength:o.lastPrefixLength,suggestionLength:i.suggestion.content.length}),l.n_({category:"ghostwriter",message:"Suggestion accepted",level:"info"}),null==r||r.recordAccept())},onSuggestionExplicitlyDismissed:function(e){var i=e.plugin(eu);i&&(a.flush(),(0,eE.j)(eE.U3.CODE_SUGGESTION_USED,{type:"suggestionDismissed",engine:t,filePath:n,prefixLength:i.lastPrefixLength}),l.n_({category:"ghostwriter",message:"Suggestion explicitly dismissed",level:"info"}),null==r||r.recordReject())}})});function e9(e){var t,n,r,i,l,c,s,u,d,f,h,p,m,v=e.filePath,g=(0,eV.Z)().fs,y=(0,eB.Z)(),b=(0,eD.Gn)("codeSuggestion").preferences,w=(0,ex.ZP)(),Z=b.codeSuggestion&&w!==ex.Yy.None;(0,eg.useEffect)(function(){ek.YX.toggle(Z)},[Z]);var x=(0,eN.Z)(),C=x.engine,_=x.settings,T=(0,eP.gf)(eT.CN.acceptPrimaryCompletion.id),R=(0,eP.gf)(eT.CN.cancelCompletion.id),D=null!==(m=null==_?void 0:_.infill)&&void 0!==m&&m,I=(0,eG.Z)(function(){return new eL},[v,y,C]),P=(n=(t={engine:C,replId:y,provider:(0,eG.Z)(function(){var e;return e=(0,o._)(function(e,t){var n,r,i,o,l,c,s,u,d;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return n=eb.t.production,[4,(0,ew.I8)(e.replId,"completions-1")];case 1:return r=a.sent(),i={model:"replit-code-v1-5",context:e.header?e.header+e.prefix:e.prefix,max_tokens:e.maxTokens,stop_words:e.stop},[4,fetch("".concat(n,"/completions"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},signal:t,body:JSON.stringify(i)})];case 2:if(l=(o=a.sent()).body,!(200!==(c=o.status)))return[3,4];return s=Error.bind,d=(u="Error (".concat(c,") response from /ai/complete: ")).concat,[4,o.text()];case 3:throw new(s.apply(Error,[void 0,d.apply(u,[a.sent()])]));case 4:if(!l)throw Error("No body in response");return[2,function(){return function(e){return eZ.apply(this,arguments)}(l)}]}})}),function(t,n){return e.apply(this,arguments)}},[]),cache:I,hooks:e_}).engine,r=t.replId,i=t.provider,l=t.cache,c=t.hooks,(0,eg.useCallback)((s=(0,ev._)(function(e){var t,o,s,u,d,f,h,p,m,v,g,y,b,w,Z,x,C,k,S,_,E,T,R,D,I;return(0,a.Jh)(this,function(P){switch(P.label){case 0:if(t=e.prefix,o=e.suffix,s=e.header,u=e.language,d=e.maxTokens,f=e.signal,!t)return[2];if(h={prefix:t,suffix:o,header:s,engine:n,maxTokens:d,replId:r,stop:["\n\n","```"]},"markdown"===u&&(h.maxTokens=75,h.stop=[]),p=null==c?void 0:c.beforeCompletion(h),!(null!==(v=l.retrieve(t,d))))return[3,1];return m=(0,ev._)(function(){return(0,a.Jh)(this,function(e){switch(e.label){case 0:return[4,v];case 1:return e.sent(),[2]}})}),[3,4];case 1:return P.trys.push([1,3,,4]),[4,(0,em._)(i(h,f))];case 2:return m=P.sent(),[3,4];case 3:if((null==(g=P.sent())?void 0:g.name)==="AbortError")return[2];return null==c||c.erroredCompletion(g instanceof Error?g:Error("Unknown error"),p),[2];case 4:y="",b="",w=!0,Z=!1,f.addEventListener("abort",function(){p&&(null==c||c.afterCompletion("aborted",h,{},p)),Z=!0}),x=!1,C=!1,P.label=5;case 5:P.trys.push([5,13,14,19]),S=(0,G._)(m()),P.label=6;case 6:return[4,(0,em._)(S.next())];case 7:if(!(x=!(_=P.sent()).done))return[3,12];E=_.value,b+=E,T=void 0,P.label=8;case 8:var A;if(!(-1!==(T=b.indexOf("\n"))))return[3,11];if(R=JSON.parse(b.substring(0,T)).text,b=b.substring(T+1),A=u,D=({replacementSuggestion:R.split("\n").filter(function(e){return!(e.startsWith(B(A,"Language: "))||e.startsWith(B(A,"Path: ")))}).join("\n")}).replacementSuggestion,y+=D,Z)return[3,10];return[4,D];case 9:P.sent(),P.label=10;case 10:return!Z&&w&&p&&(null==c||c.afterCompletion("success",h,{fromCache:!!v,partialSuggestion:D},p)),w=!1,en(y).haltAfter&&(Z=!0),[3,8];case 11:return x=!1,[3,6];case 12:return[3,19];case 13:return I=P.sent(),C=!0,k=I,[3,19];case 14:if(P.trys.push([14,,17,18]),!(x&&null!=S.return))return[3,16];return[4,S.return()];case 15:P.sent(),P.label=16;case 16:return[3,18];case 17:if(C)throw k;return[7];case 18:return[7];case 19:if(null===v&&y.trim().length&&l.add(t,y,d),!(!Z&&b))return[3,21];return[4,b];case 20:P.sent(),P.label=21;case 21:return p&&(null==c||c.afterCompletion("finished",h,{completeSuggestion:y,fromCache:!!v},p)),[2]}})}),function(e){return s.apply(this,arguments)}),[n,r,l,c,i])),A=(d=(u=(0,eO._)((0,eM.KO)(eW),2))[0],f=u[1],h=(0,eI.P5)({controlName:"flag-killswitch-pichu",logFlagToAnalytics:!1}),(0,eg.useEffect)(function(){if(h&&d.tooltipOpen){var e=setTimeout(function(){return f(function(e){return(0,S._)((0,k._)({},e),{tooltipOpen:!1})})},2500);return function(){return clearTimeout(e)}}},[h,d.tooltipOpen,f]),(0,eg.useMemo)(function(){return h?{recordAccept:function(){f(function(e){return(0,S._)((0,k._)({},e),{consecutiveRejections:0})})},recordReject:function(){f(function(e){var t=e.consecutiveRejections+1;if(t>=5){var n=eU.Z.get(eF,"number");if(!n||Date.now()-n>=432e6)return eU.Z.set(eF,Date.now()),(0,S._)((0,k._)({},e),{consecutiveRejections:t,tooltipOpen:!0})}return(0,S._)((0,k._)({},e),{consecutiveRejections:t})})}}:null},[h,f])),L=(0,eg.useCallback)((p=(0,o._)(function(e){var t;return(0,a.Jh)(this,function(n){switch(n.label){case 0:return[4,g.readFile(e)];case 1:if(null!==(t=n.sent()).error)return[2,null];return[2,t.content.toString()]}})}),function(e){return p.apply(this,arguments)}),[g]),N=(0,eH._3)(),O=(0,eI.P5)({controlName:"flag-gw-magikarp-bounce-time",logFlagToAnalytics:!1,default:E.yr,type:"number"}),U=(0,eI.P5)({controlName:"flag-completely-different-clipboard",logFlagToAnalytics:!0}),X=(0,eI.P5)({controlName:"flag-completely-different-regulator"}),M=[e5.use(Z,w,T,R,D,P,O,U,X),e7.use(Z,C,v,A),eQ.use(L,N)];return(0,eg.useMemo)(function(){return M},M)}},71049:function(e,t,n){n.d(t,{$_:function(){return L},Bk:function(){return k},II:function(){return I},If:function(){return D},U1:function(){return A},Xs:function(){return G},fL:function(){return R},k4:function(){return P}});var r=n(66626),i=n(63257),o=n(3796),a=n(28949),l=n(37862),c=n(68220),s=n(86466),u=n(24766),d=n(22419),f=n(93245),h=n(36809),p=n(23802),m=n(10578),v=n(98571),g=n(45252),y=n(63163),b=n(34525),w=n(75271),Z=n(22893),x=n(54300),C=n(35177),k=350,S=[y.l0.p(4),y.l0.center,y.l0.borderRadius(4)],_=(0,h.X)({root:(0,i._)(S).concat([y.l0.cursor.pointer,(0,c.ec)("blurple")]),disabled:(0,i._)(S).concat([(0,c.ec)("grey")])});function E(e){return e.disabled||e.connecting?(0,o.tZ)(f.G,{css:_.disabled,tag:"button","data-cy":"ghostwriter-inline-submit",children:e.connecting?(0,o.tZ)(m.Z,{size:12}):(0,o.tZ)(v.Z,{size:12})}):(0,o.tZ)(f.G,{"data-cy":"ghostwriter-inline-submit",css:_.root,tag:"button",onClick:e.onClick,children:e.loading?(0,o.tZ)(g.Z,{size:12}):(0,o.tZ)(v.Z,{size:12})})}var T=(0,h.X)({root:[y.l0.py(8),y.l0.pr(8),y.l0.maxWidth(800),y.l0.colWithGap(4),{fontFamily:y.TV.fontFamilyDefault}],container:[y.l0.position.relative,y.l0.backgroundColor.backgroundDefault],input:[s.gU.outlined,y.l0.borderRadius(4),{paddingBottom:36,"@media (hover: hover)":{":not([disabled]):hover":{backgroundColor:"transparent"}}}],textarea:[y.l0.p(8),y.l0.pb(0),{caretColor:"initial",fontFamily:y.TV.fontFamilyDefault,border:"0 none",resize:"none",height:"1em",backgroundColor:"transparent","@media (hover: hover)":{":not([disabled]):focus":{outline:"0 none"}},"::placeholder":{color:y.TV.foregroundDimmest}}],footer:[y.l0.px(8),y.l0.pr(6),y.l0.rowWithGap(8),y.l0.align.center,y.l0.position.absolute,y.l0.bottom(0),y.l0.left(0),y.l0.width("100%"),{height:36}],footerLeft:[y.l0.rowWithGap(8),y.l0.flex.growAndShrink(1),y.l0.align.center],modelLabel:[y.l0.rowWithGap(4),y.l0.align.center,y.l0.pt(1)],iconText:[y.l0.rowWithGap(4),y.l0.align.center],footerRight:[y.l0.rowWithGap(4),y.l0.align.center,{"& button":[y.l0.height(22),y.l0.py(6),y.l0.py(4),y.l0.borderRadius(4)]}],error:[y.l0.color.accentNegativeStronger]}),R=function(e){var t=e.requestMeasure,n=e.type,r=e.children,i=e.isCodeMirrorPocket,a=(0,l.Z)(t);return(0,o.tZ)(b.Z,{bsod:!0,tags:{ai:!0},extras:{type:n},origin:"ErrorBoundary: InlineAiWidget",children:(0,o.tZ)(f.G,{css:T.root,innerRef:a,className:void 0===i||i?"cm-pocket-widget":void 0,children:r})})},D=function(e){var t=e.requestMeasure,n=e.type,r=e.children,i=e.isCodeMirrorPocket,a=e.error,l=e.clearError,c=e.innerRef;return(0,o.BX)(R,{type:n,requestMeasure:t,isCodeMirrorPocket:void 0===i||i,children:[(0,o.tZ)(f.G,{css:T.container,innerRef:c,children:r}),a?(0,o.tZ)(Z.E,{icon:(0,o.tZ)(x.Z,{color:y.TV.accentNegativeDefault}),text:a,closable:!0,closeAction:l}):null]})};function I(e){var t=(0,a.Z)();return(0,o.tZ)(f.G,{css:T.input,children:(0,o.tZ)("textarea",{value:e.value,onChange:e.onChange,placeholder:e.placeholder,css:T.textarea,ref:function(n){e.inputRef.current=n,t.ref(n)},onKeyDown:e.onKeyDown,autoFocus:e.autoFocus,"data-cy":"ghostwriter-inline-input"})})}var B={generateCode:"Generate new code based on this file.",transformCode:"Modify selected code based on the context of this file."};function G(e){var t=e.type;return(0,o.tZ)(d.u,{tooltip:B[t],children:(0,o.BX)(f.G,{css:T.modelLabel,children:[(0,o.tZ)(p.Z,{size:12,color:y.TV.foregroundDimmest}),(0,o.tZ)(u.xv,{variant:"small",color:"dimmest",children:"transformCode"===t?"Modify with AI":"Generate with AI"})]})})}function P(e){var t=e.loading,n=e.disabled,r=e.promptPresentation,i=e.onClick,a=e.connecting,l=e.escPressed,c=e.codeLengthExceeded;return(0,o.BX)(o.HY,{children:[t?(0,o.BX)(f.G,{css:T.iconText,children:[(0,o.tZ)(m.Z,{size:12,color:y.TV.blurpleDefault}),r?(0,o.tZ)(u.xv,{variant:"small",color:"dimmest",children:"AI is writing"}):null]}):(0,o.tZ)(o.HY,{children:r?(0,o.tZ)(u.xv,{variant:"small",color:"dimmest",children:c?"Code length exceeded":l?"Press Esc again to dismiss":"Esc to close, Enter to submit"}):null}),(0,o.tZ)(E,{connecting:a,loading:t,disabled:n,onClick:i})]})}function A(e){var t=e.id,n=e.inputRef,i=e.onClose,o=e.loading,a=e.onSubmit,l=(0,r._)((0,w.useState)(""),2),c=l[0],s=l[1],u=(0,r._)((0,w.useState)(!1),2),d=u[0],f=u[1];return(0,w.useEffect)(function(){var e="inline-ai/input-state/".concat(t),r=C.Z.get(e,"string");r&&s(r);var i=n.current;return function(){if(i){var t=i.value;if(0===t.length){C.Z.remove(e);return}C.Z.set(e,t)}}},[t,n]),{value:c,setValue:s,onKeyDown:function(e){switch(e.key){case"Escape":e.preventDefault(),c.length?d?i():f(!0):i();break;case"Enter":if(e.preventDefault(),o)break;e.shiftKey?s(function(e){return e+"\n"}):!e.metaKey&&c.length&&c.trim()&&a();break;default:f(!1)}},escPressed:d}}var L=function(e){var t=(0,r._)(e.children,2),n=t[0],i=t[1];return(0,o.BX)(f.G,{css:T.footer,children:[(0,o.tZ)(f.G,{css:T.footerLeft,children:n}),(0,o.tZ)(f.G,{css:T.footerRight,children:i})]})}},48096:function(e,t,n){n.d(t,{W:function(){return tS}});var r,i,o,a=n(80403),l=n(3030),c=n(24006),s=n(12285),u=n(4384),d=n(4955),f=n(9670),h=n(33083),p=n(99415),m=n(76659),v=n(66299),g=a.r$.define({combine:function(e){var t;return null!==(t=e.filter(Boolean)[0])&&void 0!==t?t:null}}),y=a.QQ.define({create:function(){return{diff:null,tree:p.mp.empty}},update:function(e,t){var n,r,i=t.state.facet(g),o=null===(n=t.state.facet(h.dK))||void 0===n?void 0:n.parser;if(!i)return null===e.diff&&e.tree===p.mp.empty?e:{diff:null,tree:p.mp.empty};var a=e.diff,l=e.tree;return(a&&a.b.eq(i)?t.docChanged&&(a=a.updateA(t.newDoc,t.changes)):(a=m.z.create(t.newDoc,i),l=p.mp.empty),(null===(r=t.startState.facet(h.dK))||void 0===r?void 0:r.parser)!==o&&(l=p.mp.empty),o&&l.length!==a.b.length)?(l=(0,v.p)({parser:o,text:a.b,maxTime:16,base:l}),{diff:a,tree:l}):e.diff===a&&e.tree===l?e:{diff:a,tree:l}}}),b=n(42516),w=n(63163),Z="cm-transform-diff-line-deletion-base",x="cm-transform-diff-line-deletion",C="cm-transform-diff-text-deletion",k="cm-transform-diff-line-insertion-base",S="cm-transform-diff-line-insertion",_="cm-transform-diff-text-insertion",E="cm-transform-diff-number-marker",T="rgba(180, 0, 0, 0.1)",R="rgba(180, 0, 0, 0.125)",D="rgba(0, 180, 0, 0.1)",I="rgba(0, 180, 0, 0.125)";function B(e,t){var n="linear-gradient(to right, ".concat(e,", ").concat(e,")");return t&&(n+=", linear-gradient(to right, ".concat(t,", ").concat(t,")")),n}var G=l.tk.theme((i={},(0,b._)(i,".".concat(k,", .").concat(S),{cursor:"text","&.cm-line ::selection":{backgroundColor:"".concat(w.TV.accentPrimaryDimmest," !important")}}),(0,b._)(i,".".concat(Z),{background:B(T),backgroundClip:"content-box"}),(0,b._)(i,".".concat(x),{background:B(T,R),backgroundClip:"content-box"}),(0,b._)(i,".".concat(k),{background:B(D),backgroundClip:"content-box"}),(0,b._)(i,".".concat(S),{background:B(D,I),backgroundClip:"content-box"}),(0,b._)(i,".".concat(_),{display:"inline-block",background:I}),(0,b._)(i,".".concat(C),{display:"inline-block",background:R}),(0,b._)(i,".".concat(E),{opacity:.5}),i)),P=n(96442),A=n(67464),L=n(3341),N=n.n(L),O=function(e){"use strict";(0,d._)(n,e);var t=(0,f._)(n);function n(e,r,i){var o;return(0,s._)(this,n),(o=t.call(this)).line=e,o.index=r,o.changed=i,o}var r=n.prototype;return r.toDOM=function(){var e=this,t=document.createElement("div");if(t.className=this.changed?"cm-line ".concat(k):"cm-line ".concat(S),!this.changed||!this.changed.length){var n=!0,r=!1,i=void 0;try{for(var o,a=this.line[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value,c=l.text,s=l.tags,u=document.createElement("span");u.textContent=c||"\xa0",u.className=null!=s?s:"",t.appendChild(u)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t}for(var d=0,f=0,h=null,p=null,m=function(t,n){if(!h)throw Error("range is null");var r=e.line[f],i=r.text,o=r.tags,a=i.slice(d-h.from,n-h.from),l=document.createElement("span");l.textContent=a||"\xa0",l.className=null!=o?o:"",t.appendChild(l),d+=a.length};f<this.line.length;){if(!h){var v=this.line[f].text;h={from:d,to:d+v.length}}if(!p){var g=!0,y=!1,b=void 0;try{for(var w,Z=this.changed[Symbol.iterator]();!(g=(w=Z.next()).done);g=!0){var x=w.value;if(!(x.from>=h.to)&&!(x.to<=d)){var C=document.createElement("span");C.className=_,p={from:x.from,to:x.to,dom:C},d<p.from&&m(t,p.from),t.appendChild(C);break}}}catch(e){y=!0,b=e}finally{try{g||null==Z.return||Z.return()}finally{if(y)throw b}}}p?(d<p.to&&m(p.dom,p.to),d>=p.to&&(p=null)):m(t,h.to),d>=h.to&&(h=null,f++)}return t},r.eq=function(e){var t,r;return e instanceof n&&this.index===e.index&&this.line.length===e.line.length&&(null===(t=this.changed)||void 0===t?void 0:t.length)===(null===(r=e.changed)||void 0===r?void 0:r.length)&&N()(this.line,e.line)&&N()(this.changed,e.changed)},r.ignoreEvent=function(e){return e.stopImmediatePropagation(),!0},(0,u._)(n,[{key:"estimatedHeight",get:function(){return 21}}]),n}(l.l9),U=l.p.line({class:Z}),X=l.p.line({class:x}),M=l.p.mark({class:C}),F=l.tk.decorations.compute([y],function(e){var t=function(e,t){if(r.getLineChangeType(e.number,P.MF.A)===P.dQ.COVERED)o.push(X.range(e.from));else{o.push(U.range(e.from));var n=!0,i=!1,a=void 0;try{for(var l,c=(0,P.Po)(e,t,P.MF.A,!1)[Symbol.iterator]();!(n=(l=c.next()).done);n=!0){var s=l.value;o.push(M.range(s.from,s.to))}}catch(e){i=!0,a=e}finally{try{n||null==c.return||c.return()}finally{if(i)throw a}}}},n=e.field(y,!1);if(!n||!n.diff)return l.p.none;var r=n.diff,i=n.tree,o=[],a=!0,c=!1,s=void 0;try{for(var u,d=r.chunks[Symbol.iterator]();!(a=(u=d.next()).done);a=!0){var f=u.value;if(f.fromA!==f.endA)for(var h=r.a.lineAt(f.fromA),p=r.a.lineAt(f.endA),m=h.number;m<=p.number;m++)t(r.a.line(m),f);else f.fromB===f.endB&&t(r.a.lineAt(f.fromA),f);if(f.fromB!==f.toB)for(var v=r.b.lineAt(f.fromB),g=(0,A.CT)(i,r.b,e,f.fromB,f.endB),b=0;b<g.length;b++){var w=g[b],Z=r.b.line(v.number+b),x=r.getLineChangeType(Z.number,P.MF.B)===P.dQ.COVERED?null:(0,P.Po)(Z,f,P.MF.B,!0),C=l.p.widget({widget:new O(w,Z.number,x),block:!0,side:b+1}),k=Math.min(f.endA,r.a.length);o.push(C.range(k))}}}catch(e){c=!0,s=e}finally{try{a||null==d.return||d.return()}finally{if(c)throw s}}return l.p.set(o,!0)}),W=n(68395),V=function(e){"use strict";(0,d._)(n,e);var t=(0,f._)(n);function n(e){var r;return(0,s._)(this,n),(r=t.call(this)).index=e,r}var r=n.prototype;return r.toDOM=function(){var e=document.createElement("span");return e.className=E,e.textContent=String(this.index),e},r.eq=function(e){return this.index===e.index},n}(l.SJ),H=W.X4.of(function(e,t){if(t instanceof O)return new V(t.index)}),z=a.r$.define({enables:function(e){return[g.computeN([e],function(t){return t.facet(e)}),y,G,F,H]}}),j=n(84797),q=n(24169);(r=o||(o={}))[r.Compare=0]="Compare",r[r.Original=1]="Original",r[r.Suggestion=2]="Suggestion";var J=a.Py.define(),Y=a.QQ.define({create:function(){return o.Suggestion},update:function(e,t){var n=!0,r=!1,i=void 0;try{for(var a,l=t.effects[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=a.value;if(c.is(J))e=c.value;else if(c.is(q.Q))e=null;else if(c.is(q.h)){var s=t.state.field(j.$);if((null==s?void 0:s.type)==="transformCode"&&c.value){var u=t.startState.field(j.u),d=c.value;!u&&d&&(e=o.Suggestion)}}}}catch(e){r=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}return e}}),$=n(41091),K=n(64988),Q=a.QQ.define({create:function(){return null},update:function(e,t){if(!(0,K.aU)(t,"doc",j.$,$.Yp,Y,j.u))return e;var n,r=t.state.field(j.$),i=t.state.facet($.Yp),a=t.state.field(Y);if(!r||!i||r.codeReference.filePath!==i||a!==o.Suggestion)return null;var l=r.codeReference.range.indexFrom,c=r.codeReference.range.indexTo,s=t.state.doc.slice(l,c),u=null!==(n=t.state.field(j.u))&&void 0!==n?n:"",d=s.lines,f=u.split(t.state.lineBreak).length-d;return e&&e.after===l&&e.offset===f?e:{after:l,offset:f}}}),ee=W.gy.of(function(e,t){var n=e.state.doc.lineAt(t.from),r=e.state.field(Q);if(r&&!(n.from<=r.after))return new W.un(n.number+r.offset)}),et=W.X4.of(function(e,t){if(t instanceof en)return new W.un(t.index)}),en=function(e){"use strict";(0,d._)(n,e);var t=(0,f._)(n);function n(e,r,i){var o;return(0,s._)(this,n),(o=t.call(this)).line=e,o.block=r,o.index=i,o}var r=n.prototype;return r.toDOM=function(){var e=document.createElement(this.block?"div":"span");e.className=this.block?"cm-line":"";var t=!0,n=!1,r=void 0;try{for(var i,o=this.line[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value,l=a.text,c=a.tags,s=document.createElement("span");s.textContent=l||"\xa0",c&&(s.className=c),e.appendChild(s)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return e},r.eq=function(e){return this.index===e.index&&(0,A.gj)(this.line,e.line)},r.ignoreEvent=function(){return!1},(0,u._)(n,[{key:"estimatedHeight",get:function(){return 21}}]),n}(l.l9),er=[Q,ee,et,l.tk.decorations.compute([h.dK,j.$,j.u,Y,y,$.Yp,a.yy.lineSeparator],function(e){var t=e.field(j.$),n=e.facet($.Yp),r=e.field(Y);if(!t||"transformCode"!==t.type||!n||t.codeReference.filePath!==n||r!==o.Suggestion)return l.p.none;var i=t.codeReference.range.indexFrom,a=t.codeReference.range.indexTo,c=e.doc.lineAt(i),s=e.doc.lineAt(a),u=e.toText(null!==(x=e.field(j.u))&&void 0!==x?x:""),d=e.changes({from:i,to:a,insert:u}),f=d.apply(e.doc),p=i+u.length,m=null===(Z=e.facet(h.dK))||void 0===Z?void 0:Z.parser,g=null;if(m)g=(0,v.p)({parser:m,text:f,changes:d,base:e,upTo:p}),C=(0,A.CT)(g,f,e,i,p);else{C=[];var y=!0,b=!1,w=void 0;try{for(var Z,x,C,k,S=u.iterLines()[Symbol.iterator]();!(y=(k=S.next()).done);y=!0){var _=k.value;C.push([{text:_}])}}catch(e){b=!0,w=e}finally{try{y||null==S.return||S.return()}finally{if(b)throw w}}}var E=[];C.length>1&&i!==a&&0!==s.length&&a===s.to&&a<e.doc.length?E.push(l.p.replace({inclusive:!1,block:!0}).range(i,a)):E.push(l.p.replace({inclusiveStart:!1,block:!0}).range(i,a));for(var T=0;T<C.length;T++){var R=C[T],D=c.number+T,I=l.p.widget({widget:new en(R,T>0,D),inlineOrder:!0,side:T+1,block:T>0});E.push(I.range(i))}return l.p.set(E,!0)})],ei=n(3796),eo=n(5377),ea=n(8571),el=n(52927),ec=n(42305),es=n(42965),eu=n(96949),ed=n(93245),ef=n(36809),eh=n(42354),ep=n(53616),em=n(31252),ev=n(81202),eg=n.n(ev),ey=n(52589),eb=(0,ef.X)({container:[{marginRight:16},w.l0.height("100%")],hintButton:[w.l0.height("100%")]}),ew=new el.J(function(e){var t=e.onGenerateCode,n=e.height,r=(0,es.T3)(),i=(0,em.gf)(eh.x.id);return(0,ei.tZ)(ed.G,{css:eb.container,children:(0,ei.tZ)(ep.s,{keyCombo:r?void 0:i,text:"Generate",fontSize:Math.round(.6*n),css:eb.hintButton,onClick:function(){(0,eu.j)(ey.U3.GHOSTWRITER_CHAT_INLINE_HINT_CLICKED,{action:"generate"}),t()}})})}),eZ=l.tk.theme({".cm-ghostwriter-hint-layer":{width:"100%"}}),ex=function(e){var t=e.selection.main.head;return e.doc.lineAt(t)},eC=new ec.j(function(e){return a.QQ.define({create:function(e){return ex(e)},compare:eg(),update:function(e,t){return ex(t.state)},provide:function(t){return[eZ,a.Wl.high((0,l.EY)({above:!0,class:"cm-ghostwriter-hint-layer",update:function(e){return(0,K.aU)(e,t,j.$,eo.WF)},markers:function(n){var r=n.state.field(t,!1);if(!r||!n.state.selection.main.empty)return[];var i=n.state.field(j.$,!1),o=0===n.state.doc.length,a=(0,ea.o)(n.state);if(r.length>0||i||a||o)return[];var l=n.dom.querySelector(".cm-minimap-gutter"),c=(null==l?void 0:l.clientWidth)||0,s=r.to,u=n.lineBlockAt(s),d=u.top,f=u.height;return[new ek({top:d+n.documentPadding.top,height:f,right:c,pocketOpen:null!==i,activeEditor:n.hasFocus,onGenerateCode:e})]}}))]}})}),ek=function(){"use strict";function e(t){(0,s._)(this,e),this.options=t}var t=e.prototype;return t.position=function(e){e.style.top=this.options.top+"px",e.style.height=this.options.height+"px",e.style.right=this.options.right+"px",e.style.paddingRight=Math.round(.2*this.options.height)+"px"},t.draw=function(){var e=ew.create({onGenerateCode:this.options.onGenerateCode,height:this.options.height});return e.className="cm-ghostwriter-hint-marker",this.options.activeEditor||(e.style.visibility="hidden"),this.position(e),e},t.eq=function(e){return this.options.top===e.options.top&&this.options.pocketOpen===e.options.pocketOpen&&this.options.activeEditor===e.options.activeEditor},e}(),eS=n(75271),e_=n(97420),eE=n(9602),eT=n(7935),eR=n(36608),eD=n(71049),eI=n(52130),eB=n(34209),eG=n(40455);function eP(e,t){e.dispatch({effects:q.Q.of(null),selection:{anchor:t.range.indexTo,head:t.range.indexTo}}),e.hasFocus||e.focus()}function eA(e,t){(0,eB.el)({view:e,insert:t,scrollIntoView:!0}),e.dispatch({effects:q.Q.of(null)}),e.hasFocus||e.focus()}function eL(e,t){e.dispatch({effects:q.h.of(t)})}function eN(e,t,n){e.dispatch({changes:{from:n.range.indexFrom,to:n.range.indexTo,insert:t},scrollIntoView:!0,effects:q.Q.of(null),annotations:[eG.Z.of(!0),eI.Iv.of("full")]}),e.hasFocus||e.focus()}function eO(e,t){return e.range.indexFrom===t.range.indexFrom&&e.range.indexTo===t.range.indexTo&&e.filePath===t.filePath&&e.fileVersion===t.fileVersion&&e.referenceType===t.referenceType}var eU=(0,ef.X)({root:[w.l0.rowWithGap(8),w.l0.border({color:w.TV.outlineDimmest}),w.l0.p(8),w.l0.borderRadius(4)],text:[w.l0.flex.growAndShrink(1)]}),eX=new el.J(function(e){var t=e.onClose,n=e.requestMeasure;return(0,ei.tZ)(eD.fL,{requestMeasure:n,type:"ghostwriterKillswitch",children:(0,ei.BX)(ed.G,{css:eU.root,children:[(0,ei.tZ)(ed.G,{css:eU.text,children:(0,ei.tZ)(eR.r,{textVariant:"text"})}),(0,ei.tZ)(eE.hU,{alt:"Close",onClick:t,type:"button",children:(0,ei.tZ)(eT.Z,{})})]})})}),eM=function(e){"use strict";(0,d._)(n,e);var t=(0,f._)(n);function n(e){var r,i=e.codeReference;return(0,s._)(this,n),(r=t.call(this)).codeReference=i,r}return n.prototype.toDOM=function(e){var t=this;return eX.create({onClose:function(){return eP(e,t.codeReference)},requestMeasure:function(){return e.requestMeasure()}})},n}(l.l9),eF=n(66626),eW=n(90169),eV=n(79904),eH=n(15323),ez=n(41974),ej=n(64993),eq=n(52551),eJ=n(29574),eY=n(85995),e$=n(49853),eK=n(80786),eQ=n(37862),e0=n(86283),e1=(0,e$.cn)(0),e2=(0,e$.cn)(function(e){return e(e1)<=eD.Bk?"compact":"normal"}),e3=new el.J(function(e){var t=e.id,n=e.requestMeasure,r=e.codeReference,i=e.updateCodeBlock,o=e.acceptSuggestion,a=e.onClose,l=e.autoFocus,c=e.source,s=function(){var e=S();(null==e?void 0:e.code)?(o(e.code),(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"suggestion_accepted",intent_type:"generate",message_content:e.code,source:c})):D()},u=function(){var e,t;B.current=P,(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"message_sent",intent_type:"generate",message_content:P,source:c}),C({message:P,type:eW.G_.GENERATE_CODE,codeReference:{code:r.code,range:r.range,filePath:r.filePath,fileContent:null!==(e=r.fileContent)&&void 0!==e?e:"",fileVersion:r.fileVersion,language:null!==(t=r.language)&&void 0!==t?t:"",referenceType:eW.MD.INLINE}})},d=(0,eW.xe)(),f=(0,eF._)((0,eW.s)(),2),h=f[0],p=f[1],m=(0,eW.ZR)().hasAccessToAdvancedModel,v=(0,eF._)((0,eS.useState)(!1),2),g=v[0],y=v[1],b=(0,eJ.Gn)("chatEngine").preferences,w=(0,eS.useRef)(null),Z=(0,e0.c)(),x=(0,eW.XW)({onCode:i,getFileContext:Z}),C=x.sendMessage,k=x.stopMessage,S=x.getCode,_=x.loading,E=x.completed,T=x.error,R=x.clearError,D=(0,eS.useCallback)(function(){k(),a()},[k,a]),I=(0,eS.useCallback)(function(){(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"inline_textbox_closed",intent_type:"generate",source:c}),D()},[D,c]),B=(0,eS.useRef)(null),G=(0,eD.U1)({id:t,inputRef:w,loading:_,onSubmit:function(){X?s():u()},onClose:I}),P=G.value,A=G.setValue,L=G.onKeyDown,N=G.escPressed,O=function(){(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"generation_stopped",intent_type:"generate",message_content:P,source:c}),k()},U=(0,eW.Un)(),X=U&&E&&B.current===P,M=(0,eF._)((0,eS.useState)(function(){return(0,e$.MT)()}),1)[0],F=(0,eK.b9)(e1,{store:M}),W=(0,eK.Dv)(e2,{store:M}),V=(0,eQ.Z)(function(e){return F(e.width)});return(0,ei.BX)(ei.HY,{children:[(0,ei.BX)(eD.If,{requestMeasure:n,type:"generateCode",error:T,clearError:R,innerRef:V,children:[(0,ei.tZ)(eD.II,{value:P,inputRef:w,onChange:function(e){return A(e.currentTarget.value)},placeholder:"Enter a prompt to generate new code",onKeyDown:L,autoFocus:l}),(0,ei.BX)(eD.$_,{children:[(0,ei.BX)(ei.HY,{children:[(0,ei.tZ)(eD.Xs,{type:"generateCode"}),E?(0,ei.tZ)(eE.hU,{disabled:!U,alt:"Rerun the same prompt",onClick:function(){return u()},size:12,colorway:"grey",children:(0,ei.tZ)(eH.Z,{})}):null,d?(0,ei.tZ)(eq.q2,{userLimits:d,selectedItem:h,hasAccessToAdvancedModel:m,onChange:function(e){if(!m&&"advanced"===e){y(!0);return}p(e)},advancedChatEngineOverride:b.chatEngine}):null]}),X?(0,ei.BX)(ei.HY,{children:[(0,ei.tZ)(eV.zx,{variant:"outlined",size:"small",text:"Reject",onClick:function(){var e=S();(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"suggestion_rejected",intent_type:"generate",message_content:(null==e?void 0:e.code)?e.code:"",source:c}),I()}}),(0,ei.tZ)(eV.zx,{size:"small",text:"Accept",colorway:"blurple",onClick:s,dataCy:"ghostwriter-inline-accept-suggestion"})]}):(0,ei.tZ)(eD.k4,{escPressed:N,connecting:!U,loading:_,disabled:!P||!P.trim(),promptPresentation:"normal"===W,onClick:function(){_?O():u()}})]})]}),(0,ei.tZ)(eY.Z,{isOpen:g,onClose:function(){return y(!1)},type:"purchase",analyticsContext:{upgrade:{context:"ai_model_selector",surface:"ghostwriter_power_up_dialog"}}})]})}),e4=function(e){"use strict";(0,d._)(n,e);var t=(0,f._)(n);function n(e){var r,i=e.id,o=e.codeReference,a=e.source;return(0,s._)(this,n),(r=t.call(this)).id=i,r.codeReference=o,r.source=a,r}var r=n.prototype;return r.toDOM=function(e){var t=this.id,n=this.codeReference,r=this.source,i=e3.create({id:t,requestMeasure:function(){return e.requestMeasure()},codeReference:n,onClose:function(){return eP(e,n)},acceptSuggestion:function(t){return eA(e,t)},updateCodeBlock:function(t){return eL(e,t)},autoFocus:!0,source:r});return i.style.position="sticky",i.style.top="0px",i.style.zIndex=String(ej.M.floatingHeaderActive),i},r.updateDOM=function(e,t){var n=this.codeReference;return e3.update(e,function(e){return(0,ez.Uy)(e,function(e){e.requestMeasure=function(){return t.requestMeasure()},e.codeReference=n,e.onClose=function(){return eP(t,n)},e.acceptSuggestion=function(e){return eA(t,e)},e.updateCodeBlock=function(e){return eL(t,e)},e.autoFocus=!1})}),!0},r.eq=function(e){return eO(this.codeReference,e.codeReference)},n}(l.l9),e8=n(52657),e6=n(35177),e5=(0,e$.cn)(0),e7=(0,e$.cn)(function(e){return e(e5)<=eD.Bk?"compact":"normal"}),e9=new el.J(function(e){var t=e.id,n=e.requestMeasure,r=e.codeReference,i=e.updateCodeBlock,a=e.acceptSuggestion,l=e.onClose,c=e.autoFocus,s=e.updateDiffSelection,u=e.source,d=function(){var e=_();(null==e?void 0:e.completed)===void 0&&(null==A?void 0:A.completed)&&(e=A),(null==e?void 0:e.code)?((0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"suggestion_accepted",intent_type:"modify",message_content:e.code,source:u}),a(e.code)):O()},f=function(){var e,t;X.current=V,(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"message_sent",intent_type:"modify",message_content:V,source:u}),k({message:V,type:eW.G_.TRANSFORM_CODE,codeReference:{code:r.code,range:r.range,filePath:r.filePath,fileContent:null!==(e=r.fileContent)&&void 0!==e?e:"",fileVersion:r.fileVersion,language:null!==(t=r.language)&&void 0!==t?t:"",referenceType:eW.MD.INLINE}})},h=(0,eW.xe)(),p=(0,eF._)((0,eW.s)(),2),m=p[0],v=p[1],g=(0,eW.ZR)().hasAccessToAdvancedModel,y=(0,eF._)((0,eS.useState)(!1),2),b=y[0],w=y[1],Z=(0,eJ.Gn)("chatEngine").preferences,x=(0,e0.c)(),C=(0,eW.XW)({onCode:i,getFileContext:x}),k=C.sendMessage,S=C.stopMessage,_=C.getCode,E=C.loading,T=C.completed,R=C.error,D=C.clearError,I=(0,eF._)((0,eS.useState)(!1),2),B=I[0],G=I[1],P=(0,eF._)((0,eS.useState)(null),2),A=P[0],L=P[1],N=(0,e8.Z)(s);(0,eS.useEffect)(function(){if(E){N.current(o.Suggestion);return}(T||B)&&N.current(R?o.Original:o.Compare)},[N,T,B,R,E]);var O=(0,eS.useCallback)(function(){S(),l()},[S,l]),U=(0,eS.useCallback)(function(){(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"inline_textbox_closed",intent_type:"modify",source:u}),O()},[O,u]),X=(0,eS.useRef)(null),M=function(){(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"generation_stopped",intent_type:"modify",message_content:V,source:u}),S()},F=(0,eS.useRef)(null),W=(0,eD.U1)({id:t,inputRef:F,loading:E,onSubmit:function(){J?d():f()},onClose:U}),V=W.value,H=W.setValue,z=W.onKeyDown,j=W.escPressed,q=(0,eW.Un)(),J=q&&!R&&(T||B)&&X.current===V,Y=(0,eF._)((0,eS.useState)(function(){return(0,e$.MT)()}),1)[0],$=(0,eK.b9)(e5,{store:Y}),K=(0,eK.Dv)(e7,{store:Y}),Q=(0,eQ.Z)(function(e){return $(e.width)});(0,eS.useEffect)(function(){var e="inline-ai/last-sent-value/".concat(t),n="inline-ai/last-completed/".concat(t),r="inline-ai/last-code-res/".concat(t),i=e6.Z.get(e,"string"),o=e6.Z.get(n,"boolean"),a=e6.Z.get(r,"object");return i&&(X.current=i),G(!!o&&o),a&&L({code:a.code,completed:a.completed,error:a.error}),function(){e6.Z.set(n,T||o);var t=_();if((null==t?void 0:t.completed)!==void 0&&e6.Z.set(r,t),X.current){var i=X.current;if(0===i.length){e6.Z.remove(e);return}e6.Z.set(e,i)}}},[T,_,t]);var ee="advanced"===m?eW.GB:eW.hm,et=r.code.length>ee;return(0,ei.BX)(ei.HY,{children:[(0,ei.BX)(eD.If,{requestMeasure:n,type:"generateCode",error:R,clearError:D,innerRef:Q,children:[(0,ei.tZ)(eD.II,{value:V,inputRef:F,onChange:function(e){return H(e.currentTarget.value)},placeholder:"Enter a prompt to modify selection",onKeyDown:z,autoFocus:c}),(0,ei.BX)(eD.$_,{children:[(0,ei.BX)(ei.HY,{children:[(0,ei.tZ)(eD.Xs,{type:"transformCode"}),T||B?(0,ei.tZ)(eE.hU,{alt:"Rerun the same prompt",onClick:function(){return f()},size:12,colorway:"grey",disabled:!q,children:(0,ei.tZ)(eH.Z,{})}):null,h?(0,ei.tZ)(eq.q2,{userLimits:h,selectedItem:m,hasAccessToAdvancedModel:g,onChange:function(e){if(!g&&"advanced"===e){w(!0);return}v(e)},advancedChatEngineOverride:Z.chatEngine}):null]}),J?(0,ei.BX)(ei.HY,{children:[(0,ei.tZ)(eV.zx,{variant:"outlined",size:"small",text:"Reject",onClick:function(){var e=_();(null==e?void 0:e.completed)===void 0&&(null==A?void 0:A.completed)&&(e=A),(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"suggestion_rejected",intent_type:"modify",message_content:(null==e?void 0:e.code)?e.code:"",source:u}),U()}}),(0,ei.tZ)(eV.zx,{size:"small",text:"Accept",colorway:"blurple",onClick:d,dataCy:"ghostwriter-inline-accept-suggestion"})]}):(0,ei.tZ)(eD.k4,{escPressed:j,connecting:!q,loading:E,disabled:!V||!V.trim()||et,promptPresentation:"normal"===K,onClick:function(){E?M():f()},codeLengthExceeded:et})]})]}),(0,ei.tZ)(eY.Z,{isOpen:b,onClose:function(){return w(!1)},type:"purchase",analyticsContext:{upgrade:{context:"ai_model_selector",surface:"ghostwriter_power_up_dialog"}}})]})}),te=function(e){"use strict";(0,d._)(n,e);var t=(0,f._)(n);function n(e){var r,i=e.id,o=e.codeReference,a=e.source;return(0,s._)(this,n),(r=t.call(this)).id=i,r.codeReference=o,r.source=a,r}var r=n.prototype;return r.toDOM=function(e){var t=this.id,n=this.codeReference,r=this.source,i=e9.create({id:t,requestMeasure:function(){return e.requestMeasure()},codeReference:n,onClose:function(){return eP(e,n)},acceptSuggestion:function(t){return eN(e,t,n)},updateCodeBlock:function(t){eL(e,t)},updateDiffSelection:function(t){e.dispatch({effects:J.of(t)})},autoFocus:!0,source:r});return i.style.position="sticky",i.style.top="0px",i.style.zIndex="10",i},r.updateDOM=function(e,t){var n=this.codeReference;return e9.update(e,function(e){return(0,ez.Uy)(e,function(e){e.requestMeasure=function(){return t.requestMeasure()},e.codeReference=n,e.onClose=function(){return eP(t,n)},e.acceptSuggestion=function(e){return eN(t,e,n)},e.updateCodeBlock=function(e){return eL(t,e)},e.updateDiffSelection=function(e){t.dispatch({effects:J.of(e)})},e.autoFocus=!1})}),!0},r.eq=function(e){return eO(this.codeReference,e.codeReference)},n}(l.l9),tt=n(82231),tn=n(24766),tr=n(19453),ti=n(10578),to=n(53366),ta=n(20957),tl=n(68417),tc=n(13585),ts=n(47305),tu=a.r$.define({combine:function(e){var t;return null!==(t=e[0])&&void 0!==t?t:function(){}}});new ec.j(function(e){return tu.of(e)});var td=(0,ef.X)({root:[w.l0.colWithGap(8),w.l0.border({color:w.TV.outlineDimmest}),w.l0.p(8),w.l0.borderRadius(4)],header:[w.l0.rowWithGap(8),w.l0.align.center,w.l0.justify.spaceBetween,w.l0.minHeight(28)],headerLeft:[w.l0.flex.growAndShrink(1),w.l0.rowWithGap(8),w.l0.align.center],footer:[w.l0.rowWithGap(8),w.l0.align.center,w.l0.justify.end]}),tf=new el.J(function(e){var t=e.requestMeasure,n=e.codeReference,r=e.onClose,i=e.openAiChatPane,o=e.source,a=(0,e0.c)(),l=(0,eW.gS)({getFileContext:a}),c=l.sessionId,s=l.sendMessage,u=l.stopMessage,d=l.model,f=l.loading,h=l.completed,p=l.message,m=l.retry,v=(0,eW.nV)(),g=(0,eS.useCallback)(function(){var e,t;(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"message_sent",intent_type:"explain",source:o,message_content:n.code}),s({codeReference:{code:n.code,range:n.range,filePath:n.filePath,fileContent:null!==(e=n.fileContent)&&void 0!==e?e:"",fileVersion:n.fileVersion,language:null!==(t=n.language)&&void 0!==t?t:"",referenceType:eW.MD.INLINE}})},[s,n,o]),y=(0,e8.Z)(g),b=(0,e8.Z)(u);(0,eS.useEffect)(function(){y.current();var e=b.current;return function(){e()}},[y,b]);var Z=(0,eW.Un)();return(0,ei.tZ)(eD.fL,{requestMeasure:t,type:"explainCode",children:(0,ei.BX)(ed.G,{css:td.root,dataCy:"ghostwriter-inline-explain-content",children:[p||f?(0,ei.BX)(ed.G,{css:td.header,children:[(0,ei.BX)(ed.G,{css:td.headerLeft,children:[(0,ei.tZ)(tl.R,{advanced:"advanced"===d}),(0,ei.tZ)(ts.Dz,{intent:eW.$h.EXPLAIN,text:{color:"dimmest",variant:"small"},icon:{color:w.TV.foregroundDimmest}})]}),h?(0,ei.tZ)(eE.hU,{alt:"Close",dataCy:"ghostwriter-inline-close",children:(0,ei.tZ)(eT.Z,{onClick:function(){r(),(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"inline_textbox_closed",intent_type:"explain",source:o})}})}):(0,ei.tZ)(eV.zx,{iconLeft:(0,ei.tZ)(ta.Z,{}),size:"small",text:"Stop",onClick:function(){u(),(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"generation_stopped",intent_type:"explain",source:o,message_content:n.code})}})]}):null,f&&!p?(0,ei.tZ)(ti.Z,{}):null,p?(0,ei.tZ)(tt.JG,{text:p,codeComponent:tt._l,messageState:h?eW.he.COMPLETE:void 0}):null,h?(0,ei.BX)(ed.G,{css:td.footer,children:[(0,ei.tZ)(tn.xv,{variant:"small",color:"dimmer",children:"Esc to close"}),(0,ei.tZ)(eV.zx,{iconLeft:(0,ei.tZ)(to.Z,{}),variant:"outlined",size:"small",text:"Retry",disabled:!Z,onClick:function(){m(),(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"response_regenerated",intent_type:"explain",source:o,message_content:n.code})}}),c?(0,ei.tZ)(eV.zx,{dataCy:"ghostwriter-inline-reply-in-chat",iconLeft:Z?(0,ei.tZ)(tr.Z,{}):(0,ei.tZ)(ti.Z,{}),disabled:!Z,size:"small",text:"Reply in Chat",colorway:Z?"blurple":void 0,onClick:function(){(0,eu.j)(eu.U3.AI_INLINE_EVENT,{action:"reply_in_chat",intent_type:"explain",source:o,message_content:n.code}),v(c,{sessionType:eW.FF.CHAT}),i(c)}}):null]}):null]})})}),th=function(e){"use strict";(0,d._)(n,e);var t=(0,f._)(n);function n(e){var r,i=e.codeReference,o=e.source;return(0,s._)(this,n),(r=t.call(this)).codeReference=i,r.source=o,r}var r=n.prototype;return r.toDOM=function(e){var t=this.codeReference,n=this.source;return tf.create({requestMeasure:function(){return e.requestMeasure()},codeReference:t,onClose:function(){return eP(e,t)},openAiChatPane:function(t){return(0,tc.ZM)(e.state,{pane:{type:"ghostwriterChat",data:{sessionId:t}}})},source:n})},r.updateDOM=function(e,t){var n=this.codeReference;return tf.update(e,function(e){return(0,ez.Uy)(e,function(e){e.requestMeasure=function(){return t.requestMeasure()},e.codeReference=n,e.onClose=function(){return eP(t,n)}})}),!0},r.eq=function(e){return eO(this.codeReference,e.codeReference)},n}(l.l9),tp=n(37701),tm=(0,ef.X)({root:[w.l0.rowWithGap(8),w.l0.border({color:w.TV.outlineDimmest}),w.l0.p(8),w.l0.borderRadius(4)],text:[w.l0.flex.growAndShrink(1)]}),tv=new el.J(function(e){var t=e.onClose,n=e.requestMeasure;return(0,ei.tZ)(eD.fL,{requestMeasure:n,type:"ghostwriterKillswitch",children:(0,ei.BX)(ed.G,{css:tm.root,children:[(0,ei.tZ)(ed.G,{css:tm.text,children:(0,ei.tZ)(tn.xv,{children:"Code length exceeded. Please select a smaller code block."})}),(0,ei.tZ)(eE.hU,{alt:"Close",onClick:t,type:"button",children:(0,ei.tZ)(eT.Z,{})})]})})}),tg=function(e){"use strict";(0,d._)(n,e);var t=(0,f._)(n);function n(e){var r,i=e.codeReference;return(0,s._)(this,n),(r=t.call(this)).codeReference=i,r}return n.prototype.toDOM=function(e){var t=this;return tv.create({onClose:function(){return eP(e,t.codeReference)},requestMeasure:function(){return e.requestMeasure()}})},n}(l.l9),ty=e_.TV.blurpleDimmest,tb=e_.TV.accentPrimaryDimmest,tw=l.tk.theme({".cm-pocket-highlight":{backgroundColor:e_.TV.blurpleDimmest,opacity:.2},"@keyframes moveGradient":{"0%":{backgroundPositionX:"100%"},"100%":{backgroundPositionX:"0%"}},".cm-pocket-highlight-loading":{background:"linear-gradient(90deg, ".concat(e_.TV.blurpleDimmest,", ").concat(tb,", ").concat(ty,", ").concat(tb,")"),backgroundSize:"300% 100%",backgroundPositionX:"0%",animation:"moveGradient 2s linear infinite"}}),tZ=l.tk.decorations.compute([j.$,Y,$.Yp],function(e){var t=e.field(j.$),n=e.facet($.Yp);if(!t||!n||t.codeReference.filePath!==n)return l.p.none;var r=e.doc.lineAt(t.codeReference.range.indexFrom).from,i={generateCode:e4,transformCode:te,explainCode:th,ghostwriterKillswitch:eM,codeLengthExceeded:tg}[t.type],o=l.p.widget({widget:new i({id:t.id,codeReference:t.codeReference,source:t.source}),block:!0,side:0}).range(r);return l.p.set(o)}),tx=(0,l.EY)({above:!1,update:function(e){return(0,K.aU)(e,j.$)},markers:function(e){var t=e.state.field(j.$),n=e.state.facet($.Yp);if(!t||!n||t.codeReference.filePath!==n)return[];var r=t.codeReference.range.indexFrom,i=t.codeReference.range.indexTo,o=e.state.doc.lineAt(i);o.from>=r&&o.to===i&&i<e.state.doc.length&&(i+=1);var c=a.jT.range(r,i),s=t.loading&&t.codeReference.range.indexFrom<t.codeReference.range.indexTo?"cm-pocket-highlight-loading":"cm-pocket-highlight";return l.dc.forRange(e,s,c)}}),tC=z.compute([j.$,j.u,$.Yp,Y],function(e){var t=e.field(j.$),n=e.field(j.u),r=e.facet($.Yp),i=e.field(Y);return t&&n&&r&&t.codeReference.filePath===r&&"transformCode"===t.type&&i===o.Compare?a.as.of({from:t.codeReference.range.indexFrom,to:t.codeReference.range.indexTo,insert:n},e.doc.length).apply(e.doc):null}),tk=c.V.compute([j.$,j.u,$.Yp],function(e){var t=e.field(j.$),n=e.field(j.u),r=e.facet($.Yp);return t&&n&&r&&t.codeReference.filePath===r&&"generateCode"===t.type?a.as.of({from:t.codeReference.range.indexTo,to:t.codeReference.range.indexTo,insert:n},e.doc.length):null});function tS(e){var t=e.onGenerateCode,n=(0,tp.v)().isTeamWithAiDisabled,r=eC.use(t);return(0,eS.useMemo)(function(){var e=[tw,j.$,j.u,tZ,tx,Y,tC,er,tk,r];return n||e.push(r),e},[r,n])}},24169:function(e,t,n){n.d(t,{Q:function(){return i},h:function(){return o}});var r=n(80403),i=r.Py.define(),o=r.Py.define()},84797:function(e,t,n){n.d(t,{$:function(){return f},u:function(){return h}});var r=n(41733),i=n(30509),o=n(80403),a=n(3030),l=n(24169),c=n(54923),s=n(37505),u=n(96949);function d(e){var t=e.state.field(f);if(t){var n=t.type;return"explainCode"===n?(0,u.j)(u.U3.AI_INLINE_EVENT,{action:"inline_textbox_closed",intent_type:"explain",source:t.source}):"generateCode"===n?(0,u.j)(u.U3.AI_INLINE_EVENT,{action:"inline_textbox_closed",intent_type:"generate",source:t.source}):"transformCode"===n&&(0,u.j)(u.U3.AI_INLINE_EVENT,{action:"inline_textbox_closed",intent_type:"modify",source:t.source}),e.dispatch({effects:l.Q.of(null)}),!0}return!1}var f=o.QQ.define({create:function(){return null},update:function(e,t){if((0,s.j)(t,l.Q,function(t){e=t.value?{id:t.value.id,codeReference:t.value.codeReference,type:t.value.type,source:t.value.source,loading:t.value.loading,data:t.value.data}:null}),!e||t.changes.empty)return e;var n=e.codeReference.range.indexFrom>t.newDoc.length?t.newDoc.length:t.changes.mapPos(e.codeReference.range.indexFrom),o=e.codeReference.range.indexTo>t.newDoc.length?t.newDoc.length:t.changes.mapPos(e.codeReference.range.indexTo);return n>=o?null:e=(0,i._)((0,r._)({},e),{codeReference:(0,i._)((0,r._)({},e.codeReference),{range:{indexFrom:n,indexTo:o,lineFrom:t.newDoc.lineAt(n).number,lineTo:t.newDoc.lineAt(o).number}})})},provide:function(e){return[o.Wl.highest(a.$f.of([{key:"Escape",run:d}])),c.gb.from(e,function(e){var t;return null!==(t=(null==e?void 0:e.loading)&&e.codeReference.range.indexFrom===e.codeReference.range.indexTo)&&void 0!==t?t:null})]}}),h=o.QQ.define({create:function(){return null},update:function(e,t){if(!t.state.field(f))return null;var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var c=o.value;c.is(l.Q)&&(e=null),c.is(l.h)&&(e=c.value)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e}})},13054:function(e,t,n){n.d(t,{I:function(){return r}});function r(e){var t=[],n=[],r=!1,i=!0,o=!1,a=void 0;try{for(var l,c=e.selection.ranges[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;s.empty||(t.push(e.sliceDoc(s.from,s.to)),n.push(s))}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}if(!t.length){var u=-1,d=!0,f=!1,h=void 0;try{for(var p,m=e.selection.ranges[Symbol.iterator]();!(d=(p=m.next()).done);d=!0){var v=p.value.from,g=e.doc.lineAt(v);g.number>u&&(t.push(g.text),n.push({from:g.from,to:Math.min(e.doc.length,g.to+1)})),u=g.number}}catch(e){f=!0,h=e}finally{try{d||null==m.return||m.return()}finally{if(f)throw h}}r=!0}return{text:t.join(e.lineBreak),ranges:n,linewise:r}}},65895:function(e,t,n){n.d(t,{BB:function(){return C},AU:function(){return b},qU:function(){return x}});var r=n(27387),i=n(12285),o=n(96583),a=n(80403),l=n(3030),c=n(99842),s=n(37505),u=n(81202),d=n.n(u),f=n(17437),h=n(41091),p=n(23572),m=n(64988),v=n(23469);function g(e){var t,n;return null!==(n=null===(t=e.facet(c.N))||void 0===t?void 0:t.isDocumentSymbolSupported)&&void 0!==n&&n}var y=a.Py.define(),b=a.QQ.define({create:function(){return null},update:function(e,t){var n=e;return(0,s.j)(t,y,function(e){n=e.value}),n}});function w(){return(w=(0,r._)(function(e,t,n){var r,i,a,l,c,s,u,d,f;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return[4,e.request.documentSymbol(t,{signal:n})];case 1:if(!(r=o.sent())||r.cancelled||!(i="result"in r&&!r.cancelled?r.result:null))return[2,null];a=[],l=!0,c=!1,s=void 0;try{for(u=i[Symbol.iterator]();!(l=(d=u.next()).done);l=!0)(f=d.value)&&"range"in f&&a.push(f)}catch(e){c=!0,s=e}finally{try{l||null==u.return||u.return()}finally{if(c)throw s}}return[2,a.length?a:null]}})})).apply(this,arguments)}function Z(e){if("Debounced function cancelled"!==e.message)throw e}var x=a.QQ.define({create:function(){return[]},update:function(e,t){if(!(0,m.aU)(t,b,"selection"))return e;var n=t.state.field(b);return n?function e(t,n,r){var i=r.find(function(e){var r=e.range;return(0,p.RL)(t,r.end)>=n&&(0,p.RL)(t,r.start)<=n});return null==i?[]:i.children?[i].concat(e(t,n,i.children)):[i]}(t.state.doc,t.state.selection.main.head,n):[]},compare:d()});function C(e){return[b,x,l.lg.fromClass(function(){"use strict";function t(n){(0,i._)(this,t),this.abortControllers=[];var a=this;this.getSymbolMap=(0,f.Z)((0,r._)(function(){var t,r,i;return(0,o.Jh)(this,function(o){switch(o.label){case 0:if(!(t=n.state.facet(h.Yp)))return[2];return a.abortControllers=[],[4,Promise.all(e.map(function(e){if(!(0,v.Z)(e).isDocumentSymbolSupported)return null;var n=new AbortController;return a.abortControllers.push(n),function(e,t,n){return w.apply(this,arguments)}(e,t,n.signal)}))];case 1:return r=o.sent(),n.dispatch({effects:y.of(null!==(i=r.find(Boolean))&&void 0!==i?i:null)}),[2]}})}),{wait:200}),g(n.state)&&this.getSymbolMap().catch(Z)}var n=t.prototype;return n.update=function(e){(0,m.aU)(e,"doc",c.N)&&g(e.state)&&(this.abortControllers.forEach(function(e){return e.abort()}),this.getSymbolMap().catch(Z))},n.destroy=function(){this.abortControllers.forEach(function(e){return e.abort()}),this.getSymbolMap.isScheduled()&&this.getSymbolMap.cancel()},t}())]}},92799:function(e,t,n){n.d(t,{Z:function(){return O},f:function(){return X}});var r=n(27387),i=n(41733),o=n(30509),a=n(96583),l=n(80403),c=n(3030),s=n(41091),u=n(54923),d=n(99842),f=n(3796),h=n(84238),p=n(84864),m=n(79904),v=n(9602),g=n(24766),y=n(93245),b=n(36809),w=n(27840),Z=n(7935),x=n(63163),C=n(26726),k=n(75271),S=n(48087),_=(0,b.X)({styles0:[x.l0.p(4),x.l0.pl(8)],styles1:[x.l0.maxWidth(100),x.l0.overflow("hidden"),{whiteSpace:"nowrap",textOverflow:"ellipsis"}],styles2:[x.l0.position.absolute,x.l0.top(4),x.l0.right(4)],styles3:[x.l0.flex.rowReverse,x.l0.p(8),x.l0.pt(0)]}),E=(0,b.X)({headerContainer:[x.l0.flex.row,x.l0.align.center,x.l0.pr(4)],bodyContainer:[x.l0.justify.center,x.l0.align.center,x.l0.p(8),x.l0.pt(4)],input:[x.l0.p(4),x.l0.borderRadius(4)],wrapper:[x.l0.flex.column,x.l0.justify.center,x.l0.borderRadius(4),x.l0.shadow(2),x.l0.width(200)]});function T(e){var t=(0,h.Z)(e.onClose,[e.onClose]),n=(0,k.useRef)(null),r=(0,p.Y)(e.currentValue,function(t){return t?t===e.currentValue?{message:"Must pick a new name"}:void 0:{message:"New name can't be empty"}});return(0,f.tZ)(S.ZP,{children:(0,f.tZ)(y.G,{"data-testid":"RenameInput",innerRef:t,css:E.wrapper,onKeyDown:function(t){"Escape"===t.key&&e.onClose(),t.stopPropagation()},children:(0,f.BX)("form",{onSubmit:function(t){t.preventDefault(),r.error||e.onRename(r.value)},children:[(0,f.BX)(y.G,{css:E.headerContainer,children:[(0,f.tZ)(g.h4,{level:2,variant:"subheadDefault",css:_.styles0,children:"Rename"}),(0,f.tZ)(g.h4,{level:2,variant:"subheadDefault",color:"dimmer",css:_.styles1,children:e.currentValue}),(0,f.tZ)(v.hU,{alt:"Close rename input",tooltipBehavior:"hidden",onClick:e.onClose,css:_.styles2,children:(0,f.tZ)(Z.Z,{})})]}),(0,f.tZ)(y.G,{css:E.bodyContainer,children:(0,f.tZ)(C.ZP,{css:E.input,name:"rename",ref:n,onBlur:r.handleBlur,onChange:function(e){r.setValue(e.target.value)},value:r.value,placeholder:"New name",autoFocus:!0,autoCorrect:"off",autoCapitalize:"off",autoComplete:"off",validationResults:r.error?[{message:r.error.message,state:"error"}]:void 0})}),(0,f.tZ)(y.G,{css:_.styles3,children:(0,f.tZ)(m.zx,{type:"submit",text:"Rename",colorway:"primary",iconLeft:(0,f.tZ)(w.Z,{}),disabled:!!r.error||!r.value})})]})})})}var R=n(4960),D=n(52927),I=n(37505),B=n(23572),G=n(21480),P=n(23469),A=l.Py.define(),L=l.Py.define();function N(e){var t,n;return null!==(n=null===(t=e.facet(d.N))||void 0===t?void 0:t.isRenameSupported)&&void 0!==n&&n}var O=function(e){if(!N(e.state))return!1;var t=e.state.selection.main.head;return e.state.wordAt(t)?(e.dispatch({effects:A.of(t)}),!0):((0,R.J)(e,{message:"You cannot rename this element",offset:t}),!1)},U=l.QQ.define({create:function(){return null},update:function(e,t){return(null!==e&&(e=t.changes.mapPos(e,-1,l.gc.TrackDel)),(0,I.j)(t,A,function(t){e=t.value}),e&&(e>t.state.doc.length||!t.state.wordAt(e)||!N(t.state)))?null:e},provide:function(e){var t=new D.J(T),n=function(t){var n=t.field(e);if(null==n)throw Error("Expected non-null offset");var r=t.wordAt(n);if(!r)throw Error("Expected non-null range");return t.sliceDoc(r.from,r.to)},r=function(r){var a=r.state.field(e);if(null==a)throw Error("Expected non-null offset");if(!r.state.wordAt(a))throw Error("Expected non-null range");var l=t.create({currentValue:n(r.state),onClose:function(){r.dispatch({effects:A.of(null)}),r.focus()},onRename:function(e){r.dispatch({effects:L.of(e)})}});return l.classList.add("replit-tooltip"),l.style.padding="0",{dom:l,update:function(e){t.update(l,function(t){var r=n(e.state);return r!==t.currentValue?(0,o._)((0,i._)({},t),{currentValue:r}):t})}}};return c.hJ.from(e,function(e){return null===e?null:{pos:e,create:r}})}});function X(e,t){return[U,c.lg.define(function(n){var i=null;return{onRename:function(t,o){return(0,r._)(function(){var r,l,c,d;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(!N(n.state))return[2,this.cancelInflightRequest()];if(this.cancelInflightRequest(),!(r=n.state.facet(s.Yp)))throw Error("Expected non-null file path");if(!(l=n.state.field(U)))return[2];return i={clientId:t.clientId,requestId:t.generateId()},[4,t.request.rename(r,(0,B.sg)(n.state.doc,l),o,{id:i.requestId,tap:function(e){return(0,u.SC)(n,e)}})];case 1:if((c=a.sent()).cancelled)return[2];if("error"in c)throw Error("Something went wrong renaming ".concat(c.error.message));if(!(d=c.result))return[2];return(0,G.w)({edit:d,fs:e,client:t}),n.dispatch({effects:A.of(null)}),[2]}})}).apply(this)},cancelInflightRequest:function(){if(i){var e=!0,n=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var l=o.value;if(l.clientId===i.clientId){l.notify.cancelRequest(i.requestId);break}}}catch(e){n=!0,r=e}finally{try{e||null==a.return||a.return()}finally{if(n)throw r}}i=null}},update:function(e){var n=!0,r=!1,i=void 0;try{for(var o,a=e.transactions[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value,c=!0,s=!1,u=void 0;try{for(var d,f=l.effects[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var h=d.value;if(h.is(L)){var p=!0,m=!1,v=void 0;try{for(var g,y=t[Symbol.iterator]();!(p=(g=y.next()).done);p=!0){var b=g.value;if((0,P.Z)(b).isRenameSupported){this.onRename(b,h.value);return}}}catch(e){m=!0,v=e}finally{try{p||null==y.return||y.return()}finally{if(m)throw v}}}}}catch(e){s=!0,u=e}finally{try{c||null==f.return||f.return()}finally{if(s)throw u}}}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}},destroy:function(){this.cancelInflightRequest()}}})]}},70125:function(e,t,n){n.d(t,{hx:function(){return h},l:function(){return d},sy:function(){return f}});var r=n(80403),i=n(3030),o=n(41091),a=n(42305),l=n(25639),c=n(35370),s=n(32508),u=n.n(s);function d(e){var t=e.view,n=e.event,i=e.clipboardText,o=e.filePath,a=t.state.selection;if(!o||!(0,c.gK)(o)||a.ranges.length>1||a.main.from===a.main.to||!i||!u()(i)){!function(){if(!n){var e=i||"";if(a.main.empty){var o=a.main.from+e.length;t.dispatch({changes:[{from:a.main.from,insert:e}],selection:r.jT.range(o,o)})}else t.dispatch(t.state.replaceSelection(e))}}();return}n&&n.preventDefault();var l=t.state.sliceDoc(a.main.from,a.main.to),s="[".concat(l,"](").concat(i,")"),d=a.main.from+s.length;t.dispatch({changes:{from:a.main.from,to:a.main.to,insert:s},selection:r.jT.range(d,d)})}var f=i.tk.domEventHandlers({paste:function(e,t){var n;d({filePath:t.state.facet(o.Yp),view:t,event:e,clipboardText:null===(n=e.clipboardData)||void 0===n?void 0:n.getData("Text")})}}),h=new a.j(function(e){return i.tk.domEventHandlers({paste:function(t,n){var r=n.state.facet(o.Yp),i=null==t?void 0:null===(f=t.clipboardData)||void 0===f?void 0:f.files,a=function(e){var t=n.state.selection.main.head;n.dispatch({changes:{from:t,insert:e},selection:{anchor:t,head:t+e.length}})};if(i){var s=!0,u=!1,d=void 0;try{for(var f,h,p=i[Symbol.iterator]();!(s=(h=p.next()).done);s=!0){var m=h.value;r&&(0,c.gK)(r)&&(0,l.r)(m,e,r).then(a)}}catch(e){u=!0,d=e}finally{try{s||null==p.return||p.return()}finally{if(u)throw d}}}}})})},61873:function(e,t,n){n.d(t,{ZB:function(){return w},qs:function(){return x},Lo:function(){return b},xv:function(){return R},xg:function(){return D},uh:function(){return y},Do:function(){return T},$X:function(){return I},Yt:function(){return Z},Gv:function(){return B},Pz:function(){return C}});var r=n(12285),i=n(4955),o=n(41733),a=n(30509),l=n(9670),c=n(80403),s=n(3030),u=n(16634),d=n(96949),f=n(66626),h={"AWS API Key":/AKIA[0-9A-Z]{16}/g,"AWS AppSync GraphQL Key":/da2-[a-z0-9]{26}/g,"AWS MWS ID":/mzn\.mws\.[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}/g,"AWS client ID":/(A3T[A-Z0-9]|AKIA|AGPA|AIDA|AROA|AIPA|ANPA|ANVA|ASIA)[A-Z0-9]{16}/g,"Discord Bot Token":/(?:N|M|O)[a-zA-Z0-9]{23}\\.[a-zA-Z0-9-_]{6}\\.[a-zA-Z0-9-_]{27}/g,"Discord Webhook Url":/https?:\/\/(?:ptb\.|canary\.)?discord\.com\/api(?:\/v\d{1,2})?\/webhooks\/(\d{17,19})\/([\w-]{68})/gi,"Dynatrace Token":/dt0[a-zA-Z]{1}[0-9]{2}\\.[A-Z0-9]{24}\\.[A-Z0-9]{64}/gi,"Facebook Access Token":/EAACEdEose0cBA[0-9A-Za-z]+/g,"Facebook OAuth":/[fF][aA][cC][eE][bB][oO][oO][kK].*['|"][0-9a-f]{32}['|"]/g,"Github Personal Access Token":/ghp_[0-9a-zA-Z]{36}/g,"Github OAuth Access Token":/gho_[0-9a-zA-Z]{36}/g,"Github App Installation Access Token":/(ghu|ghs)_[0-9a-zA-Z]{36}/g,"Github App Refresh Token":/ghr_[0-9a-zA-Z]{76}/g,"Generic API Key":/[aA][pP][iI]_?[kK][eE][yY].*['|"][0-9a-zA-Z]{32,45}['|"]/g,"Generic Secret":/[sS][eE][cC][rR][eE][tT].*['|"][0-9a-zA-Z]{32,45}['|"]/g,"Google API Key":/AIza[0-9A-Za-z\\-_]{35}/g,"Google Gmail API Key":/AIza[0-9A-Za-z\\-_]{35}/g,"Google OAuth Access Token":/ya29\\.[0-9A-Za-z\\-_]+/g,"Google YouTube API Key":/AIza[0-9A-Za-z\\-_]{35}/g,"Heroku API Key":/[hH][eE][rR][oO][kK][uU].*[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}/g,"MailChimp API Key":/[0-9a-f]{32}-us[0-9]{1,2}/g,"Mailgun API Key":/key-[0-9a-zA-Z]{32}/g,"Mapbox, Public Key":/([s,p]k.eyJ1Ijoi[\w.-]+)/g,"Mapbox, Secret Key":/([s,p]k.eyJ1Ijoi[\w.-]+)/g,"npm Access Token":/npm_[0-9a-zA-Z]{36}/g,"NuGet API Key":/oy2[a-z0-9]{43}/g,"OpenAI API Key":/sk-[a-zA-Z0-9]{48}/g,"PGP private key block":/-----BEGIN PGP PRIVATE KEY BLOCK-----/g,"Picatic API Key":/sk_live_[0-9a-z]{32}/g,"PyPI API Token":/pypi-AgEIcHlwaS5vcmc[A-Za-z0-9-_]{50,1000}/g,"SSH (DSA) private key":/-----BEGIN DSA PRIVATE KEY-----/g,"SSH (EC) private key":/-----BEGIN EC PRIVATE KEY-----/g,"SSH (RSA) private key":/-----BEGIN RSA PRIVATE KEY-----/g,"SendGrid API Key":/SG\\.[0-9A-Za-z\\-_]{22}\\.[0-9A-Za-z-_]{43}/g,"Shopify Access Token":/shpat_[a-fA-F0-9]{32}/g,"Shopify App Shared Secret":/shpss_[a-fA-F0-9]{32}/g,"Shopify Custom App Access Token":/shpca_[a-fA-F0-9]{32}/g,"Shopify Private App Password":/shppa_[a-fA-F0-9]{32}/g,"Slack Token":/(xox[pborsa]-[0-9]{12}-[0-9]{12}-[0-9]{12}-[a-z0-9]{32})/g,"Slack API Token":/xox[baprs]-([0-9a-zA-Z]{10,48})?/g,"Slack Live API Key":/(?:r|s)k_live_[0-9a-zA-Z]{24}/g,"Slack Test API Key":/(?:r|s)k_test_[0-9a-zA-Z]{24}/g,"Slack, OAuth v2 Bot Access Token":/xoxb-[0-9]{11}-[0-9]{11}-[0-9a-zA-Z]{24}/g,"Slack, OAuth v2 Configuration Token":/xoxe.xoxp-1-[0-9a-zA-Z]{166}/g,"Slack, OAuth v2 Refresh Token":/xoxe-1-[0-9a-zA-Z]{147}/g,"Slack, OAuth v2 User Access Token":/xoxp-[0-9]{11}-[0-9]{11}-[0-9a-zA-Z]{24}/g,"Slack Webhook":/https:\/\/hooks.slack.com\/services\/T[a-zA-Z0-9_]{10}\/B[a-zA-Z0-9_]{10}\/[a-zA-Z0-9_]{24}/g,"Square Access Token":/sq0atp-[0-9A-Za-z\\-_]{22}/g,"Square OAuth Secret":/sq0csp-[0-9A-Za-z\\-_]{43}/g,"Stripe API Key":/sk_live_[0-9a-zA-Z]{24}/g,"Stripe Restricted API Key":/rk_live_[0-9a-zA-Z]{24}/g,"Twilio API Key":/SK[0-9a-fA-F]{32}/g,"Twitter Access Token":/[tT][wW][iI][tT][tT][eE][rR].*[1-9][0-9]+-[0-9a-zA-Z]{40}/g,"Twitter OAuth":/[tT][wW][iI][tT][tT][eE][rR].*['|"][0-9a-zA-Z]{35,44}['|"]/g,"Vault Token":/([sb]\.[a-zA-Z0-9]{24})/g},p={"Instagram oauth":/[0-9a-fA-F]{7}\.[0-9a-fA-F]{32}/g},m=function(e){"use strict";(0,i._)(n,e);var t=(0,l._)(n);function n(e,i){var o;return(0,r._)(this,n),(o=t.call(this)).id=e,o.result=i,o}return n.range=function(e,t,n){return new this(e,n).range(t.from,t.to)},n.generateId=function(){return this.secretId++},n}(c.uU);m.secretId=0;var v=function(e){"use strict";(0,i._)(n,e);var t=(0,l._)(n);function n(e){var i;return(0,r._)(this,n),(i=t.call(this)).key=e,i}return n.from=function(e){return new this(e)},n}(c.uU),g=c.Py.define({map:function(e,t){var n=c.Xs.of(e).map(t).iter(),r=n.from,i=n.to;return m.range(e.value.id,c.jT.cursor(r,i),e.value.result)}}),y=c.Py.define(),b=c.Py.define(),w=c.Py.define(),Z=c.Py.define(),x=c.Py.define(),C=function(e){var t=e.state.field(D);if(!t.size)return!1;for(var n=t.iter(),r=[];n.value;){var i=n.from,o=n.to,a=n.value;r.push({from:i,to:o,value:a}),n.next()}var l=e.state.doc.length,s=c.as.empty(l),u=[],f=[],h=!0,p=!1,m=void 0;try{for(var v,g=r[Symbol.iterator]();!(h=(v=g.next()).done);h=!0)!function(){var e=v.value,t=e.from,n=e.to,r=e.value,i=r.result.secret,o=c.as.of({from:t,to:n,insert:i},l).map(s,!0);u=u.map(function(e){return e.map(o)});var a=(s=s.compose(o)).mapPos(t)+i.length;u.push(c.jT.cursor(a)),f.push(y.of(r.id)),(0,d.j)(d.U3.PASTE_SCANNER_USED,{action:"original_accepted",provider:r.result.provider})}()}catch(e){p=!0,m=e}finally{try{h||null==g.return||g.return()}finally{if(p)throw m}}return e.dispatch({changes:s,effects:f,selection:c.jT.create(u)}),!0},k=function(e){return!!e.state.facet(I)&&!!e.state.field(D).size&&(e.dispatch({effects:e.state.selection.ranges.map(function(e){return b.of(e)})}),!0)},S=function(e){return!e.state.facet(I)&&_(e)},_=function(e){return!!e.state.field(D).size&&(e.dispatch({effects:e.state.selection.ranges.map(function(e){return y.of(e)})}),!0)};function E(e,t){var n,r=null===(n=e.clipboardData)||void 0===n?void 0:n.getData("text/plain");if(!r)return!1;var i=function(e){if(e.length>2e3)return!1;var t=!0,n=!1,r=void 0;try{for(var i,o=[h,p][Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value,l=!0,c=!1,s=void 0;try{for(var u,d=Object.entries(a)[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var m=(0,f._)(u.value,2),v=m[0],g=m[1],y=e.search(g);if(!(y<0)){var b=e.match(g);if(b){var w=y+b[0].length;return{start:y,end:w,secret:e.slice(y,w),provider:v}}}}}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return!1}(r);if(!i)return!1;e.preventDefault(),e.stopPropagation();var l=r.slice(0,i.start)+r.slice(i.end),s=m.generateId();return t.dispatch((0,a._)((0,o._)({},t.state.changeByRange(function(e){var t=e.from,n=e.to,r=c.jT.cursor(t+i.start);return{range:r,changes:{from:t,to:n,insert:l},effects:g.of(m.range(s,r,i))}})),{scrollIntoView:!0})),(0,d.j)(d.U3.PASTE_SCANNER_USED,{action:"secret_detected",provider:i.provider}),!0}var T=c.QQ.define({create:function(){return c.Xs.empty},update:function(e,t){e=e.map(t.changes);var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if(l.is(Z)){var s=l.value,u=s.from,d=s.to,f=s.secret;e=e.update({add:[v.from(f).range(u,d)],filter:function(){return!1}})}l.is(x)&&(e=c.Xs.empty)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e}}),R=c.QQ.define({create:function(){return null},update:function(e,t){var n=t.state.field(D,!1),r=!0,i=!1,o=void 0;try{for(var a,l=t.effects[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var s=a.value;n&&s.is(b)&&(s.value instanceof c.xm?n.between(s.value.from,s.value.to,function(t,n,r){e=r}):e=s.value),s.is(w)&&(e=null)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return e}}),D=c.QQ.define({create:function(){return c.Xs.empty},update:function(e,t){e=e.map(t.changes);var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0)!function(){var t=o.value;t.is(g)&&(e=e.update({add:[t.value],sort:!0})),t.is(y)&&(e=t.value instanceof c.xm?e.update({filter:function(){return!1},filterFrom:t.value.from,filterTo:t.value.to}):e.update({filter:function(e,n,r){return r.id!==t.value}}))}()}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e},provide:function(){return[s.tk.domEventHandlers({paste:E}),c.Wl.highest(s.$f.of([{key:"Mod-z",run:_},{key:"Enter",run:C},{key:"Tab",run:k,stopPropagation:!0},{key:"Escape",run:S}]))]}}),I=c.r$.define({combine:function(e){return e.some(Boolean)}}),B=u.RR.of(function(e){var t=e.state.field(D,!1);if(!t||!t.size)return!1;var n=!1;return t.between(e.newSelection.main.from,e.newSelection.main.to,function(){return n=!0,!1}),n})},66938:function(e,t,n){n.d(t,{F:function(){return v}});var r=n(3796),i=n(3030),o=n(62279),a=n(91166),l=n(11515),c=n(42305),s=n(63163),u=n(75271),d=n(23572),f=(0,o.iv)({scrollbarWidth:"thin",outline:"none",overflow:"auto",".cm-content":{paddingBottom:0},"::-webkit-scrollbar":{width:4},".cm-gutters":{minWidth:"unset"}}),h=(0,o.iv)({overflow:"hidden",".cm-scroller":{overflow:"hidden"}}),p={root:s.l0.backgroundColor.backgroundRoot,higher:s.l0.backgroundColor.backgroundHigher,highest:s.l0.backgroundColor.backgroundHighest,default:s.l0.backgroundColor.backgroundDefault},m=new c.j(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return(0,i.Eu)({formatNumber:function(t,n){for(var r=String(n.doc.lines).length,i=String(t+e-1);r>i.length;)i="\xa0"+i;return i}})});function v(e){var t=e.path,n=e.initialDoc,i=e.maxHeight,c=e.minHeight,s=e.extensions,v=e.allowScroll,g=e.fontSize,y=e.hideGutter,b=e.startLineNumber,w=e.style,Z=e.elevation,x=e.onNavigateToCode,C=(0,l.Z)(),k=C.ref,S=C.view,_=(0,u.useMemo)(function(){var e;return e=p[null!=Z?Z:"default"],(0,o.iv)({".cm-editor":e,".cm-gutters":e})},[Z]),E=m.use(b);return(0,r.tZ)("div",{style:w,children:(0,r.tZ)(a.ZP,{ref:k,initialDoc:n,css:[f,_,void 0===v||v?null:h],extensions:[E,void 0===s?[]:s],style:{minHeight:c,maxHeight:null!=i?i:"10em"},hideGutter:y,filePath:t,fontSize:g,readOnly:!0,onClick:function(e){if(x&&S){var t=e.clientX,n=e.clientY,r=S.posAtCoords({x:t,y:n});x(null!==r?(0,d.sg)(S.state.doc,r):null)}}})})}},38031:function(e,t,n){n.d(t,{d:function(){return d},z:function(){return u}});var r=n(12285),i=n(66626),o=n(75271),a=n(82973),l=n(86763),c=n.n(l),s=n(65037),u=function(){"use strict";function e(t){var n=this;if((0,r._)(this,e),this.saveToLocalStorage=c()(function(){a.Z.set("stateCache",{version:2,entries:Array.from(n.map.entries())})},500,{leading:!1,trailing:!0,maxWait:1e3}),this.map=new s.L(20),t){if("object"!=typeof t||null===t||!Object.prototype.hasOwnProperty.call(t,"version")||!Object.prototype.hasOwnProperty.call(t,"entries")||"number"!=typeof t.version||2!==t.version)return;var o=t.entries,l=!0,u=!1,d=void 0;try{for(var f,h=o[Symbol.iterator]();!(l=(f=h.next()).done);l=!0){var p=(0,i._)(f.value,2),m=p[0],v=p[1];this.map.set(m,v)}}catch(e){u=!0,d=e}finally{try{l||null==h.return||h.return()}finally{if(u)throw d}}}}var t=e.prototype;return t.set=function(e,t){this.map.set(e,t),this.saveToLocalStorage()},t.get=function(e){return this.map.get(e)},e}(),d=(0,o.createContext)(null)},38158:function(e,t,n){n.d(t,{B:function(){return o}});var r=n(80403),i=n(37505);function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=r.Py.define(),o=r.QQ.define({create:function(){return t},update:function(t,r){return(0,i.j)(r,n,function(n){t=e(n.value,t)}),t}});return{effect:n,state:o}}},6069:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(3796),i=n(53250),o=n(75271);function a(e){var t=e.json,n=(0,o.useMemo)(function(){return JSON.stringify(t,null,2)},[t]);return(0,r.tZ)(i.Z,{language:"json",code:n})}},21936:function(e,t,n){n.d(t,{X:function(){return w}});var r=n(31417),i=n(27387),o=n(66626),a=n(96583),l=n(3796),c=n(96949),s=n(79904),u=n(58532),d=n(24766),f=n(93245),h=n(27840),p=n(63163),m=n(75271),v=n(36809),g=n(14118),y=n(40703),b=(0,v.X)({modal:[p.l0.colWithGap(16)],buttons:[p.l0.justify.end,p.l0.rowWithGap(16)]});function w(e){var t,n=e.openDeploymentPane,p=(0,o._)((0,m.useState)(null),2),v=p[0],w=p[1],Z=(0,g.P5)({controlName:"flag-porygon-button",logFlagToAnalytics:!1});return(0,y.C)((t=(0,i._)(function(e,t){var n,i,l,c,s,u,d,f,h,p,m,v;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(n=t.addCleanup,!Z)return[2];return[4,e.agentToolDeploy.workspace.stream({})];case 1:l=(i=o._.apply(void 0,[a.sent(),3]))[0],c=i[1],s=i[2],n(s),u=!1,d=!1,a.label=2;case 2:a.trys.push([2,7,8,13]),h=(0,r._)(c),a.label=3;case 3:return[4,h.next()];case 4:if(!(u=!(p=a.sent()).done))return[3,6];if(!(m=p.value).ok)return[3,5];"confirmDeploy"===m.payload.$kind&&w(function(){return function(e){if(!e){w(null),l.push({$kind:"deployCanceled"});return}l.push({$kind:"deployConfirmed"}),w(null)}}),a.label=5;case 5:return u=!1,[3,3];case 6:return[3,13];case 7:return v=a.sent(),d=!0,f=v,[3,13];case 8:if(a.trys.push([8,,11,12]),!(u&&null!=h.return))return[3,10];return[4,h.return()];case 9:a.sent(),a.label=10;case 10:return[3,12];case 11:if(d)throw f;return[7];case 12:return[7];case 13:return[2]}})}),function(e,n){return t.apply(this,arguments)}),[Z]),(0,l.tZ)(u.u,{isOpen:"function"==typeof v,onRequestClose:function(){null==v||v(!1),(0,c.j)(c.U3.AGENT_DEPLOY_MODAL_USED,{response:"close"})},children:(0,l.BX)(f.G,{css:b.modal,children:[(0,l.tZ)(d.h4,{variant:"headerDefault",level:3,children:"Time to deploy"}),(0,l.tZ)(d.xv,{children:"Your AI agent would like you to Deploy."}),(0,l.BX)(f.G,{css:b.buttons,children:[(0,l.tZ)(s.zx,{onClick:function(){null==v||v(!1),(0,c.j)(c.U3.AGENT_DEPLOY_MODAL_USED,{response:"cancel"})},text:"Cancel"}),(0,l.tZ)(s.zx,{onClick:function(){null==v||v(!0),(0,c.j)(c.U3.AGENT_DEPLOY_MODAL_USED,{response:"okay"}),n()},iconLeft:(0,l.tZ)(h.Z,{}),text:"Okay",colorway:"primary"})]})]})})}},13080:function(e,t,n){n.d(t,{E:function(){return R}});var r=n(31417),i=n(27387),o=n(66626),a=n(96583),l=n(3796),c=n(96949),s=n(79904),u=n(58532),d=n(24766),f=n(93245),h=n(27840),p=n(63163),m=n(23882),v=n(75271),g=n(36809),y=n(14118),b=n(40703),w=n(41733),Z=n(21262),x=n(71440),C=n(9122);function k(){var e=(0,Z._)(["\n  query CurrentUserGithubToken {\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n      }\n    }\n  }\n"]);return k=function(){return e},e}var S={},_=(0,x.Ps)(k()),E=n(37475),T=(0,g.X)({styles0:[p.l0.colWithGap(16)],styles1:[p.l0.justify.end,p.l0.rowWithGap(16)]});function R(){var e,t,n=(0,m.Z)().replspaceApi,p=(0,o._)((0,v.useState)(null),2),g=p[0],Z=p[1],x=(0,o._)((0,v.useState)(!1),2),k=x[0],R=x[1],D=(e=(0,w._)({},S,void 0),C.a(_,e)).data,I=(null==D?void 0:D.currentUser)||void 0,B=(0,E.iM)(),G=(0,y.P5)({controlName:"flag-pid2-shell",logFlagToAnalytics:!1}),P=B&&G;return(0,v.useEffect)(function(){return n.onConfirmSendToken(function(e){e&&(0,c.j)(c.U3.MODAL_VIEWED,{modalName:"git_token_modal"}),Z(function(){return e})})},[n]),(0,b.C)((t=(0,i._)(function(e,t){var n,i,l,s,u,d,f,h,p,m,v,g,y;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(n=t.session,i=t.addCleanup,!P)return[2];return[4,e.replspaceApi.init.stream({session:n.from})];case 1:s=(l=o._.apply(void 0,[a.sent(),3]))[0],u=l[1],d=l[2],i(d),f=!1,h=!1,a.label=2;case 2:a.trys.push([2,7,8,13]),m=function(){var e=g.value;if(e.ok&&"getGithubToken"===e.payload.$kind){var t,n,r=e.payload.nonce,i=null!==(n=null==I?void 0:null===(t=I.gitHubInfo)||void 0===t?void 0:t.accessToken)&&void 0!==n?n:void 0;if(!i)return s.push({$kind:"githubToken",nonce:r}),"continue";if(k)return s.push({$kind:"githubToken",token:i,nonce:r}),"continue";(0,c.j)(c.U3.MODAL_VIEWED,{modalName:"git_token_modal"}),Z(function(){return function(e){if(!e){Z(null),s.push({$kind:"githubToken",nonce:r});return}s.push({$kind:"githubToken",token:i,nonce:r}),Z(null),R(!0)}})}},v=(0,r._)(u),a.label=3;case 3:return[4,v.next()];case 4:if(!(f=!(g=a.sent()).done))return[3,6];m(),a.label=5;case 5:return f=!1,[3,3];case 6:return[3,13];case 7:return y=a.sent(),h=!0,p=y,[3,13];case 8:if(a.trys.push([8,,11,12]),!(f&&null!=v.return))return[3,10];return[4,v.return()];case 9:a.sent(),a.label=10;case 10:return[3,12];case 11:if(h)throw p;return[7];case 12:return[7];case 13:return[2]}})}),function(e,n){return t.apply(this,arguments)}),[I,k,P]),(0,l.tZ)(u.u,{isOpen:"function"==typeof g,onRequestClose:function(){null==g||g(!1),(0,c.j)(c.U3.GIT_TOKEN_MODAL_ACCEPTED,{response:"close"}),Z(null)},children:(0,l.BX)(f.G,{css:T.styles0,children:[(0,l.tZ)(d.h4,{variant:"headerDefault",level:3,children:"Pass GitHub Credentials"}),(0,l.tZ)(d.xv,{children:"It looks like you're trying to connect to your GitHub repository through the shell. Pass your token to the shell?"}),(0,l.tZ)(d.xv,{children:"If you did not initiate a git command, you should deny this."}),(0,l.BX)(f.G,{css:T.styles1,children:[(0,l.tZ)(s.zx,{onClick:function(){null==g||g(!1),(0,c.j)(c.U3.GIT_TOKEN_MODAL_ACCEPTED,{response:"deny"}),Z(null)},text:"Deny"}),(0,l.tZ)(s.zx,{onClick:function(){null==g||g(!0),(0,c.j)(c.U3.GIT_TOKEN_MODAL_ACCEPTED,{response:"confirm"}),Z(null)},iconLeft:(0,l.tZ)(h.Z,{}),text:"Confirm for this session",colorway:"primary"})]})]})})}},97891:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(3796),i=n(48088),o=n(63062),a=n(24766),l=n(93245),c=n(63163),s=n(36809),u=n(48087),d=(0,s.X)({overlay:[c.l0.position.fixed,c.l0.flex.row,c.l0.align.center,c.l0.justify.center,c.l0.backgroundColor.backgroundOverlay,{top:0,bottom:0,left:0,right:0,zIndex:c.n0+1,cursor:"not-allowed"}],animationWrapper:[c.l0.center,c.l0.minWidth(225),c.l0.height(225),c.l0.p(16),c.l0.color.foregroundDefault,c.l0.borderRadius(8),c.l0.backgroundColor.backgroundOverlay,c.l0.zIndex(c.n0+1),{cursor:"not-allowed"}],lockText:c.l0.mt(32)});function f(e){var t=e.reason;return(0,r.tZ)(o.h,{children:(0,r.tZ)(l.G,{css:d.overlay,children:(0,r.tZ)(u.ZP,{children:(0,r.BX)(l.G,{css:d.animationWrapper,tabIndex:-1,children:[(0,r.tZ)(i.Z,{height:80}),(0,r.tZ)(a.xv,{multiline:!1,variant:"subheadBig",css:d.lockText,dataCy:"lock-screen",children:t})]})})})})}},71724:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(66626),i=n(3796),o=n(79904),a=n(44935),l=n(24766),c=n(93245),s=n(63163),u=n(75271),d=(0,n(36809).X)({styles0:[s.l0.colWithGap(24)],styles1:[s.l0.color.accentNegativeStronger],styles2:[s.l0.rowWithGap(12),s.l0.justify.end]});function f(e){var t=e.prompt,n=e.desc,s=e.type,f=e.placeholder,h=e.confirmText,p=e.loading,m=e.errorMessage,v=e.onCancel,g=e.onConfirm,y=e.isDanger,b=e.buttonIcon,w=(0,r._)((0,u.useState)(),2),Z=w[0],x=w[1];return(0,i.BX)(c.G,{css:d.styles0,children:[(0,i.tZ)(l.h4,{variant:"headerDefault",level:2,children:t}),(0,i.tZ)(l.xv,{children:n}),(0,i.tZ)(a.II,{type:s,value:Z,placeholder:f,autoFocus:!0,onChange:function(e){return x(e.target.value)}}),m?(0,i.tZ)(l.xv,{css:d.styles1,multiline:!1,children:m}):null,(0,i.BX)(c.G,{css:d.styles2,children:[(0,i.tZ)(o.zx,{disabled:p,onClick:v,text:"Cancel"}),(0,i.tZ)(o.zx,{colorway:y?"negative":"primary",disabled:p,onClick:function(){return Z&&g(Z)},text:h||"Ok",iconLeft:b,dataCy:"prompt-confirm-button"})]})]})}},67887:function(e,t,n){n.d(t,{Z:function(){return x}});var r=n(3796),i=n(54505),o=n(79904),a=n(39808),l=n(9602),c=n(44134),s=n(24766),u=n(22419),d=n(93245),f=n(30231),h=n(86201),p=n(41733),m=n(30509),v=n(28065),g=function(e){return(0,r.tZ)(v.ZP,(0,m._)((0,p._)({viewBox:"0 0 800.5 907.77"},e),{children:(0,r.tZ)("path",{d:"M303.36,238.61c31.36-21.37,71.76-12.97,65-6.53c-12.89,12.28,4.26,8.65,6.11,31.31 c1.36,16.69-4.09,25.88-8.78,31.11c-9.79,1.28-21.69,3.67-36.02,8.33c-8.48,2.76-15.85,5.82-22.31,8.9 c-1.7-1.11-3.55-2.47-5.74-4.36C279.5,288.19,280.24,254.37,303.36,238.61 M490.68,370.72c5.69-4.41,31.55-12.72,55.49-15.55 c12.57-1.48,30.49-2.34,34.31-0.2c7.59,4.19,7.59,17.16,2.39,29.14c-7.57,17.4-18.27,36.63-30.39,38.21 c-19.77,2.61-38.46-8.09-59.8-24.03C485.06,392.56,480.38,378.68,490.68,370.72 M526.75,201.27c29.19,13.58,25.37,39.42,26.18,54.6 c0.22,4.36,0.15,7.3-0.22,9.32c-4.04-2.19-10.43-3.8-20.56-3.35c-2.96,0.12-5.84,0.47-8.63,0.91c-10.77-5.77-17.21-17.06-23.1-29.06 c-0.54-1.11-0.96-2.1-1.36-3.06c-0.17-0.44-0.35-0.91-0.52-1.31c-0.07-0.22-0.12-0.39-0.2-0.59c-3.23-10.25-1.06-12.3,0.3-15.46 c1.41-3.23,6.68-5.89-1.11-8.58c-0.67-0.25-1.5-0.39-2.44-0.57C500.25,197.72,515.7,196.17,526.75,201.27 M367.62,510.22 c-31.45-20.19-63.99-49.15-78.22-65.18c-2.39-1.8-2-9.79-2-9.79c12.84,9.98,66.11,48.04,122.44,65.42 c19.87,6.14,50.36,8.46,76.81-6.53c20.21-11.46,44.54-31.43,59.06-52.01l2.66,4.61c-0.1,3.06-6.78,17.97-10.18,23.96 c6.14,3.53,10.72,4.49,17.55,6.36l46.64-7.27c16.74-27.04,28.74-70.65,15.95-112.16c-7.3-23.81-45.36-71.22-48.09-73.83 c-9.56-9.19,1.6-44.69-17.35-83.42C532.86,159.41,480.67,116.69,458,98.1c6.68,4.88,47.82,21.47,67,44.62 c1.8-2.39,2.54-14.82,4.19-17.97c-16.47-21.57-17.75-59.95-17.75-70.21c0-18.81-9.56-40.13-9.56-40.13s16.47,13.04,20.73,35.5 c5.03,26.6,15.75,47.55,29.93,65.28c26.84,33.43,51.08,50.58,63.33,38.23C630.53,138.58,601,72.2,563.28,35.15 C519.25-8.09,507.74-2.52,481.91,6.7c-20.61,7.35-31.75,65.87-85.47,64.71c-9.1-1.06-32.54-1.63-44.13-1.53 c6.04-8.43,11.22-14.94,11.22-14.94s-18.02,7.25-33.38,16.44l-1.18-1.77c5.18-10.92,10.75-17.82,10.75-17.82s-14.4,8.65-27.54,19.01 c2.39-13.02,11.44-21.27,11.44-21.27s-18.19,3.28-41.36,28.77c-26.33,7.2-32.66,11.93-53.64,21.22 c-34.12-7.44-50.21-19.45-65.55-41.56c-11.68-16.89-32.47-19.45-53.71-10.72c-30.97,12.8-70.14,30.33-70.14,30.33 s12.77-0.52,26.08,0.05c-18.22,6.9-35.72,16.39-35.72,16.39s8.53-0.3,19.06-0.12c-7.27,6.04-11.29,8.92-18.22,13.51 c-16.66,12.1-30.17,26.08-30.17,26.08s11.31-5.15,21.47-8.04c-7.1,16.27-21.18,28.25-18.59,48.17 c2.49,18.19,24.82,55.66,53.64,78.66c2.49,2,41.86,38.43,71.56,23.47c29.68-14.94,41.39-28.25,46.27-48.66 c5.74-23.44,2.47-41.17-9.79-92.05c-4.04-16.79-14.57-51.37-19.65-67.91l1.13-0.81c9.71,20.49,34.56,74.5,44.57,110.78 c15.63,56.57,10.75,85.27,3.6,95.79c-21.57,31.73-76.84,35.92-101.98,18.34c-3.85,60.91,9.76,87.73,14.37,101.24 c-2.29,15.53,7.77,44.37,7.77,44.37s1.13-13.11,5.74-20.02c1.23,15.41,9,33.72,9,33.72s-0.47-11.31,3.06-21.08 c4.98,8.43,8.63,10.43,13.34,16.76c4.71,16.47,14.15,28.5,14.15,28.5s-1.53-8.83-0.69-18.02c23.05,22.14,27.02,54.45,29.31,79.28 c6.46,68.26-107.63,122.54-129.74,165.24c-16.76,25.29-26.8,65.3,1.58,88.89c68.6,56.97,42.25,72.65,76.59,97.69 c47.11,34.34,106.05,18.96,126.11-8.97c27.93-38.92,20.76-75.63,10.38-109.97c-8.11-26.85-30.15-71.46-57.41-88.72 c-27.86-17.65-54.95-20.95-77.9-18.59l2.12-2.44c33.01-6.56,67.52-2.96,92.49,13.14c28.35,18.22,54.28,49.47,67.84,97.37 c15.38-2.19,17.55-3.18,31.63-5.18l-31.7-246.76L367.62,510.22z M385.94,819.52l-3.65-34.22l71.29-108.74l80.93,23.64l69.59-116.23 L687.52,639l63.38-132.92l22.53,242.07L385.94,819.52z M774.27,456.51l-254.72,46.17c-6.31,8.13-21.91,22.41-29.41,26.13 c-32.17,16.2-53.91,11.51-72.7,6.63c-12.08-3.06-19.08-4.78-29.11-9.29l-62.17,8.53l37.74,314.87l436.35-78.66L774.27,456.51z"})}))},y=n(25),b=n(63163),w=n(14861),Z=(0,n(36809).X)({styles0:[b.l0.rowWithGap(2),{alignItems:"center"}],styles1:[b.l0.align.center]});function x(e){var t=e.replId,n=e.showFlag,p=e.buttonsOnly,m=(0,w.F)().isDarkColorScheme;return(0,r.BX)(r.HY,{children:[(0,r.tZ)(a.Z,{href:"https://app.datadoghq.com/logs?"+new URLSearchParams({query:"@replid:".concat(t)}).toString(),iconLeft:(0,r.tZ)(g,{color:m?"#FFFFFF":"#632CA6"}),iconRight:(0,r.tZ)(f.Z,{}),target:"_blank",text:"View Datadog Logs by Repl ID"}),(0,r.tZ)(a.Z,{href:"https://app.datadoghq.com/logs?"+new URLSearchParams({query:"@replid:".concat(t),agg_q:"@containerid",agg_q_source:"base",cols:"host,service",messageDisplay:"inline",stream_sort:"desc",top_n:"30",top_o:"top",viz:"transaction",x_missing:"true",live:"true"}).toString(),iconLeft:(0,r.tZ)(g,{color:m?"#FFFFFF":"#632CA6"}),iconRight:(0,r.tZ)(f.Z,{}),target:"_blank",text:"View Datadog Logs by Container ID"}),void 0!==p&&p?(0,r.tZ)(u.u,{maxWidth:300,tooltip:(0,r.tZ)(s.xv,{multiline:!1,children:t}),children:(0,r.tZ)(o.zx,{iconLeft:(0,r.tZ)(h.Z,{}),text:"Copy Repl ID",onClick:function(){return(0,i.Z)(t)}})}):(0,r.BX)(d.G,{css:Z.styles0,children:[void 0!==n&&n?(0,r.BX)(u.u,{tooltip:"You are seeing this functionality because you have special permissions.",children:[(0,r.tZ)(y.Z,{})," "]}):null,(0,r.BX)(s.xv,{css:Z.styles1,multiline:!1,children:["Repl ID: ",(0,r.tZ)(c.Z,{children:t})]}),(0,r.tZ)(l.hU,{alt:"Copy to clipboard",onClick:function(){return(0,i.Z)(t)},children:(0,r.tZ)(h.Z,{})})]})]})}},46134:function(e,t,n){n.d(t,{$s:function(){return s},G$:function(){return i},fZ:function(){return o},p6:function(){return c}});var r=n(66791),i=.01,o=function(e,t){var n=t.resourceUsageType,r=t.forceGib,i=t.precision,o=t.skipUnits,a=t.additional,c=t.minimumValue,s=t.truncateToMillions,u=t.gibsDisplayAsBytes,d=l({input:e,resourceUsageType:n,forceGib:void 0!==r&&r,precision:void 0===i?4:i,minimumValue:void 0===c?null:c,truncateToMillions:void 0!==s&&s,gibsDisplayAsBytes:void 0!==u&&u});return void 0!==o&&o?d.formattedValue:void 0!==a&&a?[d.formattedValue,"additional",d.units].join(" "):[d.formattedValue,d.units].join(" ")};function a(e,t){var n=t.precision,r=t.minimumValue,i=t.forceGib,o=r&&0!==e;return e>=1073741824*(null!=r?r:1)||i?o&&e<1073741824*r?{formattedValue:"<".concat(r.toLocaleString(void 0,{minimumFractionDigits:n})),units:"GiB"}:{formattedValue:s(e).toFixed(n),units:"GiB"}:o&&e<1048576*r?{formattedValue:"<".concat(r.toLocaleString(void 0,{minimumFractionDigits:n})),units:"MiB"}:{formattedValue:c(e).toFixed(n),units:"MiB"}}var l=function(e){var t=e.input,n=e.resourceUsageType,i=e.forceGib,o=e.precision,l=e.minimumValue,c=e.truncateToMillions,s=e.gibsDisplayAsBytes,u=l&&0!==t&&t<l;switch(n){case"Bytes":return a(t,{precision:o,minimumValue:l,forceGib:i});case"GiB":if(0===t)return{formattedValue:t.toFixed(o),units:"GiB"};if(s)return a(1073741824*t,{precision:o,minimumValue:l,forceGib:!1});if(u)return{formattedValue:"<".concat(l.toLocaleString(void 0,{minimumFractionDigits:o})),units:"GiB"};return{formattedValue:t.toFixed(o),units:"GiB"};case"GiB-months":if(0===t)return{formattedValue:t.toFixed(o),units:"GiB-months"};if(u)return{formattedValue:"<".concat(l.toLocaleString(void 0,{minimumFractionDigits:o})),units:"GiB-months"};return{formattedValue:t.toFixed(o),units:"GiB-months"};case"ComputeUnits":if(t>=1e6&&c)return{formattedValue:(t/1e6).toLocaleString(void 0,{maximumFractionDigits:t>=1e6&&c?2:0})+" million",units:"compute units"};return{formattedValue:t.toLocaleString(void 0,{maximumFractionDigits:0}),units:"compute units"};case"ComputeHours":return{formattedValue:t.toLocaleString(void 0,{maximumFractionDigits:0}),units:"compute hours"};case"Requests":if(t>=1e6&&c)return{formattedValue:(t/1e6).toLocaleString(void 0,{maximumFractionDigits:t>=1e6&&c?2:0})+" million",units:"requests"};return{formattedValue:t.toLocaleString(void 0,{maximumFractionDigits:0}),units:"requests"};case"Site":return{formattedValue:t.toLocaleString(void 0,{maximumFractionDigits:0}),units:"site"};case"Hours":return{formattedValue:t.toLocaleString(void 0,{maximumFractionDigits:2}),units:"hours"};case"ScheduledDays":return{formattedValue:t.toLocaleString(void 0,{maximumFractionDigits:2}),units:"days"};case"Tokens":return{formattedValue:t.toLocaleString(void 0,{maximumFractionDigits:0}),units:"tokens"};default:(0,r.Z)(n)}},c=function(e){return e/1048576},s=function(e){return e/1073741824}},80983:function(e,t,n){n.d(t,{u:function(){return o}});var r=n(21262);function i(){var e=(0,r._)(["\n  fragment BuildStatusBadgeHostingDeployment on HostingDeployment {\n    id\n    currentBuild {\n      id\n      status\n      timeCreated\n      user {\n        id\n        displayName\n      }\n    }\n  }\n"]);return i=function(){return e},e}var o=(0,n(71440).Ps)(i())},7830:function(e,t,n){n.d(t,{e:function(){return p}});var r=n(3796),i=n(79035),o=n(24766),a=n(22419),l=n(93245),c=n(36809),s=n(42427),u=n(63163),d=n(17202),f=n(85983),h=(0,c.X)({root:[u.l0.py(4),u.l0.rowWithGap(4),u.l0.align.center]});function p(e){var t=e.deployment,n=e.small,c=t.currentBuild,u=i.V[c.status],p=u.title,m=u.color,v=(0,d.Z)(new Date(c.timeCreated),Date.now(),{addSuffix:!0}),g="Deployed ".concat(v," by ").concat(c.user.displayName),y=c.status===f.Fe.Success?"Deployed":p;return(0,r.tZ)(a.u,{tooltip:g,children:(0,r.BX)(l.G,{css:h.root,children:[(0,r.tZ)(s.Z,{size:n?12:16,color:m}),(0,r.tZ)(o.xv,{variant:n?"small":void 0,color:"dimmest",multiline:!1,children:y})]})})}},94988:function(e,t,n){n.d(t,{$:function(){return s}});var r=n(66626),i=n(3796),o=n(75271),a=n(49853),l=n(27598),c=n(20394);function s(e){var t=(0,r._)((0,o.useState)(function(){var t,n,r,i,o,c,s;return n=(t={fs:e.fs,container:e.container,dotReplit:e.dotReplit,ports:e.ports,secrets:e.secrets}).container,r=t.fs,i=t.dotReplit,o=t.ports,c=t.secrets,(s=(0,a.MT)()).set(l.CK,n),s.set(l.bA,r),s.set(l.My,i),s.set(l.l,o),s.set(l.fN,c),s}),1)[0];return(0,i.BX)(c.aT.Provider,{value:t,children:[e.children,(0,i.tZ)(l.jd,{replId:e.replId})]})}},27598:function(e,t,n){n.d(t,{jd:function(){return eX},CK:function(){return er},My:function(){return ea},bA:function(){return ei},l:function(){return el},fN:function(){return eo},_U:function(){return eL},rm:function(){return eJ},XA:function(){return eH},$y:function(){return eS},BU:function(){return ex},ev:function(){return eR},hn:function(){return eg},pn:function(){return eE},kW:function(){return em},v5:function(){return eu},XZ:function(){return ec},MV:function(){return ew},l9:function(){return eC},U:function(){return eN},t7:function(){return ed},m8:function(){return eM},Qk:function(){return es},mF:function(){return ej}});var r,i,o,a=n(27387),l=n(41733),c=n(30509),s=n(66626),u=n(96583),d=n(52657),f=n(16155),h=n(82419),p=n(85983),m=n(41974),v=n(49853),g=n(75271),y=n(66791),b=n(77631),w=n(99799),Z=n(96394),x=n(64172),C=n(38242),k=n(21262),S=n(71440),_=n(39537),E=n(9122),T=n(76143),R=n(91476),D=n(82303);function I(){var e=(0,k._)(["\n  fragment DeploymentSessionCurrentUser on CurrentUser {\n    id\n  }\n"]);return I=function(){return e},e}function B(){var e=(0,k._)(["\n  fragment DeploymentSessionHostingDeployment on HostingDeployment {\n    ...TargetHostingDeployment\n    currentBuild {\n      ...CurrentBuild2\n    }\n    inProgressBuild {\n      ...CurrentBuild2\n    }\n  }\n  ","\n  ","\n"]);return B=function(){return e},e}function G(){var e=(0,k._)(["\n  fragment DeploymentAuthorizations on Repl {\n    id\n    authorizations {\n      createAutoscaleDeployment: createDeployment(provider: cloud_run) {\n        isAuthorized\n        code\n        message\n      }\n      createRvmDeployment: createDeployment(provider: gce) {\n        isAuthorized\n        code\n        message\n      }\n      createScheduledDeployment: createDeployment(provider: cron) {\n        isAuthorized\n        code\n        message\n      }\n      createStaticDeployment: createDeployment(provider: static) {\n        isAuthorized\n        code\n        message\n      }\n      redeployAutoscaleDeployment: redeployDeployment(provider: cloud_run) {\n        isAuthorized\n        code\n        message\n      }\n      redeployRvmDeployment: redeployDeployment(provider: gce) {\n        isAuthorized\n        code\n        message\n      }\n      redeployScheduledDeployment: redeployDeployment(provider: cron) {\n        isAuthorized\n        code\n        message\n      }\n      redeployStaticDeployment: redeployDeployment(provider: static) {\n        isAuthorized\n        code\n        message\n      }\n      useDeploymentDebugSummaries {\n        isAuthorized\n        code\n        message\n      }\n    }\n  }\n"]);return G=function(){return e},e}function P(){var e=(0,k._)(["\n  fragment DeploymentSessionRepl on Repl {\n    id\n    __typename\n    slug\n    config {\n      isVnc\n    }\n    source {\n      release {\n        repl {\n          title\n        }\n      }\n    }\n    owner {\n      __typename\n      ... on User {\n        id\n        username\n      }\n      ... on Team {\n        id\n        username\n      }\n    }\n    hostingDeployment {\n      ... on HostingDeployment {\n        ...DeploymentSessionHostingDeployment\n      }\n      ... on Error {\n        message\n      }\n    }\n    ...DeploymentAuthorizations\n  }\n  ","\n  ","\n"]);return P=function(){return e},e}function A(){var e=(0,k._)(["\n  query DeploymentSession($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...DeploymentSessionRepl\n      }\n    }\n    currentUser {\n      ...DeploymentSessionCurrentUser\n    }\n  }\n  ","\n  ","\n"]);return A=function(){return e},e}function L(){var e=(0,k._)(["\n  subscription DeploymentSessionBuildDeployActionUpdates(\n    $input: HostingBuildDeployActionUpdatesInput!\n  ) {\n    hostingBuildDeployActionUpdates(input: $input) {\n      ... on HostingBuildDeployLogAction {\n        log\n      }\n      ... on HostingBuildDeployStatusAction {\n        status\n        message\n        debugSummary {\n          ...BuildDebugSummary\n        }\n      }\n    }\n  }\n  ","\n"]);return L=function(){return e},e}function N(){var e=(0,k._)(["\n  mutation DeploymentSessionDeployBuild($input: DeployHostingBuild2Input!) {\n    deployHostingBuild2(input: $input) {\n      ... on DeployHostingBuild2Result {\n        build {\n          ...CurrentBuild2\n        }\n        targetDeployment {\n          ...TargetHostingDeployment\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return N=function(){return e},e}function O(){var e=(0,k._)(["\n  mutation DeploymentSessionSendDeploymentLifecycleCommand(\n    $input: SendDeploymentLifecycleCommandInput!\n  ) {\n    sendDeploymentLifecycleCommand(input: $input) {\n      ... on SendDeploymentLifecycleCommandResult {\n        repl {\n          id\n          hostingDeployment {\n            ... on HostingDeployment {\n              ...DeploymentSessionHostingDeployment\n            }\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return O=function(){return e},e}function U(){var e=(0,k._)(["\n  mutation DeploymentSessionCancelInProgressDeploymentsBuild(\n    $input: FailHostingBuildInput!\n  ) {\n    failHostingBuild(input: $input) {\n      ... on FailHostingBuildResult {\n        build {\n          ...CurrentBuild2\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return U=function(){return e},e}var X={},M=(0,S.Ps)(I()),F=(0,S.Ps)(B(),_.uC,_.MX),W=(0,S.Ps)(G()),V=(0,S.Ps)(P(),F,W),H=(0,S.Ps)(A(),V,M);function z(e){var t=(0,l._)({},X,e);return T.t(H,t)}var j=(0,S.Ps)(L(),_.Si),q=(0,S.Ps)(N(),_.MX,_.uC),J=(0,S.Ps)(O(),F),Y=(0,S.Ps)(U(),_.MX);function $(){return($=(0,a._)(function(e){var t,n,r,i,o,a,l,c,s,d,f;return(0,u.Jh)(this,function(u){switch(u.label){case 0:if(t=e.command,n=e.replId,r=e.buildId,i=e.machineConfigurationId,o=e.maxMachineInstances,!C.l)throw Error("expected apolloClient to be initialized");return[4,C.l.mutate({mutation:J,variables:{input:{command:t,replId:n,buildId:r,machineConfigurationId:i,maxMachineInstances:o}}})];case 1:if(null===(a=(s=u.sent()).errors)||void 0===a?void 0:a.length)throw Error(s.errors.map(function(e){return e.message}).join(", "));if((null===(c=s.data)||void 0===c?void 0:null===(l=c.sendDeploymentLifecycleCommand)||void 0===l?void 0:l.__typename)!=="SendDeploymentLifecycleCommandResult")throw Error((null===(f=s.data)||void 0===f?void 0:null===(d=f.sendDeploymentLifecycleCommand)||void 0===d?void 0:d.message)||"An unexpected error occurred while sending command. Please try again or contact support.");return[2]}})})).apply(this,arguments)}function K(){return(K=(0,a._)(function(e){var t,n,r,i,o,a,l,c;return(0,u.Jh)(this,function(s){switch(s.label){case 0:if(t=e.buildId,n=e.targetDeploymentId,!C.l)throw Error("expected apolloClient to be initialized");return[4,C.l.mutate({mutation:Y,variables:{input:{buildId:t,targetDeploymentId:n}}})];case 1:if(null===(r=(a=s.sent()).errors)||void 0===r?void 0:r.length)throw Error(a.errors.map(function(e){return e.message}).join(", "));if((null===(o=a.data)||void 0===o?void 0:null===(i=o.failHostingBuild)||void 0===i?void 0:i.__typename)!=="FailHostingBuildResult")throw Error((null===(c=a.data)||void 0===c?void 0:null===(l=c.failHostingBuild)||void 0===l?void 0:l.message)||"An unexpected error occurred while trying to cancel. Please try again or contact support.");return[2]}})})).apply(this,arguments)}var Q=n(20394),ee=n(54821),et=n(80703),en=n(14118),er=(0,v.cn)({}),ei=(0,v.cn)({}),eo=(0,v.cn)({}),ea=(0,v.cn)({}),el=(0,v.cn)({});function ec(){return(0,Q.Hg)(ei)}function es(){return(0,Q.Hg)(eo)}function eu(){return(0,Q.Hg)(ea)}function ed(){return(0,Q.Hg)(el)}var ef=(0,v.cn)(void 0),eh=(0,v.cn)(void 0),ep=(0,v.cn)(ee.z.Loading);function em(){return(0,Q.Hg)(ep)}var ev=(0,v.cn)(void 0);function eg(){return(0,Q.Hg)(ev)}var ey=(0,v.cn)(void 0),eb=(0,v.cn)(void 0);function ew(){return(0,Q.Hg)(eb)}var eZ=(0,v.cn)(void 0);function ex(){var e,t,n=(0,Q.Hg)(ef),r=(0,Q.Hg)(eZ),i=(0,Q.Hg)(ek),o=(0,Q.$X)(eI),a=(0,Q.$X)(eF),l=(0,s._)(z({fetchPolicy:"no-cache",onCompleted:o,onError:function(e){a(e.message)}}),1)[0],c=function(e){if(!e||!r)return{deploy:{__typename:"ReplAuthorization",isAuthorized:!1,code:p.RO.InsufficientPermissions,message:"Loading"},redeploy:{__typename:"ReplAuthorization",isAuthorized:!1,code:p.RO.InsufficientPermissions,message:"Loading"},isIncludedInSubscription:!1};var t=r.createAutoscaleDeployment,i=r.createRvmDeployment,o=r.createScheduledDeployment,a=r.createStaticDeployment,l=r.redeployAutoscaleDeployment,c=r.redeployRvmDeployment,s=r.redeployScheduledDeployment,u=r.redeployStaticDeployment;switch(e){case p.r4.Static:return{deploy:a,redeploy:u,isIncludedInSubscription:!1};case p.r4.Cron:return{deploy:o,redeploy:s,isIncludedInSubscription:!1};case p.r4.CloudRun:return{deploy:t,redeploy:l,isIncludedInSubscription:!1};case p.r4.Gce:var d,f=i.isAuthorized,h=(null==n?void 0:n.__typename)==="Repl"&&(null===(d=n.owner)||void 0===d?void 0:d.__typename)==="Team";return{deploy:i,redeploy:c,isIncludedInSubscription:f&&h};case p.r4.Extension:case p.r4.Goval:throw Error("Found unexpected provider");default:(0,y.Z)(e)}};return{deployability:c(null==i?void 0:i.provider),getDeployabilityByProvider:c,refetch:function(){if(n)return l({variables:{replId:n.id}})},hasDebugSummariesAuthorization:null!==(t=(0,en.P5)({controlName:b.Iw,logFlagToAnalytics:!1})&&(null==r?void 0:null===(e=r.useDeploymentDebugSummaries)||void 0===e?void 0:e.isAuthorized))&&void 0!==t&&t}}function eC(e){var t,n,r,i,o,a;return!!(i=(t=(0,l._)({},X,{variables:{replId:e}}),r=E.a(H,t)).data,o=r.refetch,{isTeamRepl:(null==(a=(null==i?void 0:i.repl.__typename)==="Repl"?i.repl:null)?void 0:null===(n=a.owner)||void 0===n?void 0:n.__typename)==="Team",refetch:o}).isTeamRepl}var ek=(0,v.cn)(void 0);function eS(){return(0,Q.Hg)(ek)}var e_=(0,v.cn)(void 0);function eE(){return(0,Q.Hg)(e_)}var eT=(0,v.cn)(void 0);function eR(){return(0,Q.Hg)(eT)}var eD=(0,v.cn)(null,function(e,t){t(ev,void 0),t(ey,void 0),t(ek,void 0),t(e_,void 0),t(ep,ee.z.Ready)}),eI=(0,v.cn)(null,function(e,t,n){var r,i="Repl"===n.repl.__typename?n.repl:null,o=(null===(r=n.currentUser)||void 0===r?void 0:r.__typename)==="CurrentUser"?n.currentUser:null;i&&o&&t(eZ,i.authorizations)}),eB=(0,v.cn)(null,function(e,t,n){var r,i,o,a="Repl"===n.repl.__typename?n.repl:null,l=(null===(r=n.currentUser)||void 0===r?void 0:r.__typename)==="CurrentUser"?n.currentUser:null;if(a&&l){t(ef,a),t(eh,l),t(eI,n),t(eb,!!a.config.isVnc);var c=a.hostingDeployment;if(c){if("HostingDeployment"!==c.__typename)return t(eT,"Unexpected hosting deployment typename: ".concat(c.__typename));if(t(ev,c.id),t(ek,c.currentBuild),t(ey,c.replitAppSubdomain||(0,w.Jw)({replSlug:a.slug,username:null===(o=a.owner)||void 0===o?void 0:o.username})),c.inProgressBuild){t(e_,c.inProgressBuild),t(ep,ee.z.Deploying);return}return void t(ep,(0,et.Zx)(c.currentBuild.status))}t(ey,(0,w.Jw)({replSlug:a.slug,username:null===(i=a.owner)||void 0===i?void 0:i.username})),t(ep,ee.z.Ready)}});function eG(){var e=(0,Q.$X)(eB),t=(0,Q.$X)(eF);return(0,s._)(z({fetchPolicy:"no-cache",onCompleted:e,onError:function(e){t(e.message)}}),1)[0]}var eP=(0,v.cn)(null,function(e,t,n){if("HostingBuildDeployStatusAction"===n.__typename){var r=e(ep),i=e(e_),o=e(ek),a=n.status;if(r===ee.z.Deploying){if(!i){t(eF,"No deployment in progress found");return}t(e_,(0,m.Uy)(i,function(e){e.status=a})),a!==p.Fe.Success&&a!==p.Fe.Failed||(t(e_,void 0),a!==p.Fe.Success&&o||t(ek,(0,m.Uy)(i,function(e){e.status=a,e.hasImageTag=i.provider!==p.r4.Static&&a===p.Fe.Success})))}else if(r===ee.z.ProcessingLifecycleCommand){if(!o){t(eF,"No current build found");return}t(ek,(0,m.Uy)(o,function(e){e.status=a}))}t(ep,(0,et.Zx)(a)),n.message&&a===p.Fe.Failed&&t(eF,n.message)}}),eA=(0,v.cn)(null);function eL(){return(0,Q.Hg)(eA)}function eN(e){var t=(0,Q.yL)(eA),n=(0,d.Z)(e);(0,g.useEffect)(function(){return t.subscribe(function(e){e&&n.current(e)})},[t,n])}var eO=(0,v.cn)(function(e){var t,n;switch(e(ep)){case ee.z.Deploying:return null===(t=e(e_))||void 0===t?void 0:t.id;case ee.z.ProcessingLifecycleCommand:return null===(n=e(ek))||void 0===n?void 0:n.id;default:return}}),eU=(0,v.cn)(null,(r=(0,a._)(function(e,t,n){var r;return(0,u.Jh)(this,function(e){return(r=n.data.data)&&(t(eP,r.hostingBuildDeployActionUpdates),t(eA,r.hostingBuildDeployActionUpdates)),[2]})}),function(e,t,n){return r.apply(this,arguments)}));function eX(e){var t,n,r,i,o,a,c;return t=e.replId,n=eG(),r=(0,Q.$X)(eU),i=(0,Q.$X)(eF),(0,g.useEffect)(function(){n({variables:{replId:t}})},[n,t]),a={variables:{input:{buildId:null!=(o=(0,Q.Hg)(eO))?o:""}},skip:!o,onData:r,onError:function(e){i(e.message)}},c=(0,l._)({},X,a),R.m(j,c),null}function eM(){var e=(0,f.Z)(),t=eG(),n=(0,Q.$X)(ep);return(0,g.useCallback)(function(){return n(ee.z.Loading),t({variables:{replId:e}})},[t,n,e])}var eF=(0,v.cn)(null,function(e,t,n){t(eT,n)}),eW=(0,v.cn)(null,function(e,t,n){var r,i=n.deployHostingBuild2;if(i){if("DeployHostingBuild2Result"!==i.__typename){t(eF,i.message);return}t(e_,i.build),t(ev,i.targetDeployment.id),t(ey,null!==(r=i.targetDeployment.replitAppSubdomain)&&void 0!==r?r:void 0),t(ep,ee.z.Deploying)}});function eV(e){var t=e.provider,n=e.ignorePorts;switch(t){case p.r4.Static:return p.Vp.Static;case p.r4.CloudRun:return p.Vp.CloudRun;case p.r4.Cron:return p.Vp.Cron;default:return n?p.Vp.Worker:p.Vp.Server}}function eH(){var e,t,n=(0,f.Z)(),r=eg(),i=eu(),o=(0,Q.Hg)(er),c=ec(),d=(0,s._)((e=(0,l._)({},X,void 0),D.D(q,e)),1)[0],m=(0,Q.$X)(eW),v=(0,Q.$X)(eF),C=(0,Q.$X)(ep),k=(0,Q.XD)(e_),S=eS();return{deployBuild:(0,g.useCallback)((t=(0,a._)(function(e){var t,a,l,s,f,g,_,E,T,R,D,I,B,G,P;return(0,u.Jh)(this,function(u){switch(u.label){case 0:if(t=e.envVars,a=e.subdomain,l=e.machineConfigurationId,s=e.maxMachineInstances,f=e.config,g=e.machineJob,_=e.isPrivate,k())return v("Deployment already in progress"),[2];u.label=1;case 1:if(u.trys.push([1,5,,6]),E=f.buildCommand,T=f.runCommand,R=f.publicDir,D=f.ignorePorts,!(I=S?eV({provider:null==S?void 0:S.provider,ignorePorts:!!D}):f.appType))throw new x.P3;if(!a)throw new x.Q5;switch(I){case p.Vp.Static:if(!(0,w.Ar)(R))throw new x.SF;break;case p.Vp.Worker:case p.Vp.Server:case p.Vp.CloudRun:case p.Vp.Cron:if(!(0,w.Ar)(T))throw new x.ZG;if(I===p.Vp.Cron){if(!(null==g?void 0:g.crontab)||""===g.crontab)throw new x.Bz("Schedule cannot be empty.");if(!(0,h.isValidCron)(g.crontab))throw new x.Bz("Invalid schedule. Must be a valid cron expression.");if(!(null==g?void 0:g.timezone)||""===g.timezone)throw new x.Iy("Timezone cannot be empty.");if(!(0,b.lb)(g.timezone))throw new x.Iy("Invalid timezone. Must be valid a timezone abbreviation.")}break;default:(0,y.Z)(I)}return C(ee.z.Preparing),[4,(0,Z.$f)(i)];case 2:return B=u.sent(),[4,(0,Z.OD)({buildCommand:E,runCommand:T,appType:I,publicDir:R,ignorePorts:D},B,{dotReplit:i,fs:c,container:o})];case 3:return u.sent(),G=(0,et.oU)(I),[4,d({variables:{input:{replId:n,targetDeploymentId:r,targetMachineConfigurationId:l,maxMachineInstances:s,commands:{build:E,run:T||""},envVars:t,subdomain:a,provider:G,appType:I,context:"workspace",machineJob:g,isPrivate:_}},onCompleted:m})];case 4:return u.sent(),[3,6];case 5:throw P=u.sent(),C(ee.z.Ready),P;case 6:return[2]}})}),function(e){return t.apply(this,arguments)}),[d,m,v,C,k,r,n,o,c,i,S]),redeployWithNoNewOptions:(0,g.useCallback)((0,a._)(function(){var e,t,o,a,l,c,s;return(0,u.Jh)(this,function(u){switch(u.label){case 0:if(k())return v("Deployment already in progress"),[2];u.label=1;case 1:return u.trys.push([1,4,,5]),C(ee.z.Preparing),[4,(0,Z.$f)(i)];case 2:if(t=(e=u.sent()).buildCommand,o=e.runCommand,a=e.publicDir,l=e.ignorePorts,!r)throw new x.wQ;if(!S)throw new x.ZH;if(!(c=eV({provider:S.provider,ignorePorts:!!l})))throw new x.P3;switch(c){case p.Vp.Static:if(!(0,w.Ar)(a))throw new x.SF;break;case p.Vp.Worker:case p.Vp.Server:case p.Vp.CloudRun:case p.Vp.Cron:if(!(0,w.Ar)(o))throw new x.ZG;break;default:(0,y.Z)(c)}return[4,d({variables:{input:{replId:n,targetDeploymentId:r,commands:{build:t,run:o||""},provider:(0,et.oU)(c),appType:c,context:"workspace",isPrivate:S.isPrivate}},onCompleted:m})];case 3:return u.sent(),[3,5];case 4:throw s=u.sent(),C(ee.z.Ready),s;case 5:return[2]}})}),[d,m,v,C,k,r,n,i,S])}}var ez=(0,v.cn)(null,(i=(0,a._)(function(e,t,n){var r,i,o,a,s,d,f,h;return(0,u.Jh)(this,function(u){switch(u.label){case 0:if(r=n.args,i=n.replId,o=void 0,(a=r.command)===p.Qc.UpdateMachineConfiguration){if(!(s=e(ek)))return t(eF,"No current build found"),[2];if(!r.machineConfigurationId)return t(eF,"No machine configuration found"),[2];(d=(0,et.Ti)(a))&&(t(ek,(0,m.Uy)(s,function(e){e.status=d})),t(ep,(0,et.Zx)(d)))}if(a===p.Qc.Resume||a===p.Qc.Suspend){if(!(f=e(ek)))return t(eF,"No current build found"),[2];o=f.id,(h=(0,et.Ti)(a))&&(t(ek,(0,m.Uy)(f,function(e){e.status=h})),t(ep,(0,et.Zx)(h)))}u.label=1;case 1:return u.trys.push([1,3,,4]),[4,function(e){return $.apply(this,arguments)}((0,c._)((0,l._)({},r),{buildId:o,replId:i}))];case 2:return u.sent(),a===p.Qc.Destroy&&t(eD),[3,4];case 3:return t(eF,u.sent().message),[3,4];case 4:return[2]}})}),function(e,t,n){return i.apply(this,arguments)}));function ej(){var e,t=(0,f.Z)(),n=(0,Q.$X)(ez);return(0,g.useCallback)((e=(0,a._)(function(e){return(0,u.Jh)(this,function(r){switch(r.label){case 0:return[4,n({replId:t,args:e})];case 1:return r.sent(),[2]}})}),function(t){return e.apply(this,arguments)}),[n,t])}var eq=(0,v.cn)(null,(o=(0,a._)(function(e,t){var n,r,i;return(0,u.Jh)(this,function(o){switch(o.label){case 0:if(!(n=e(ev)))return t(eF,"No deployment found"),[2];if(!(r=e(e_)))return t(eF,"No deployment in progress found"),[2];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,function(e){return K.apply(this,arguments)}({buildId:r.id,targetDeploymentId:n})];case 2:return o.sent(),[3,4];case 3:return t(eF,o.sent().message),[2];case 4:if(t(e_,void 0),t(ep,ee.z.Ready),(i=e(ek))&&(i.status===p.Fe.Success||i.status===p.Fe.Failed))return[2];return t(ek,(0,m.Uy)(r,function(e){e.status=p.Fe.Failed})),[2]}})}),function(e,t){return o.apply(this,arguments)}));function eJ(){return(0,Q.$X)(eq)}},20394:function(e,t,n){n.d(t,{$X:function(){return d},Hg:function(){return s},XD:function(){return f},aT:function(){return l},yL:function(){return u}});var r=n(3702),i=n(80786),o=n(21962),a=n(75271),l=(0,a.createContext)(null);function c(){var e=(0,a.useContext)(l);if(!e)throw Error("Expected store in context");return e}function s(e){return(0,i.Dv)(e,{store:c()})}function u(e){return(0,r.b)(e,c())}var d=function(e){return(0,i.b9)(e,{store:c()})};function f(e){return(0,o.lV)((0,a.useCallback)(function(t){return t(e)},[e]),{store:c()})}},14769:function(e,t,n){n.d(t,{Qm:function(){return s},fG:function(){return u},G8:function(){return p},lV:function(){return h},KU:function(){return m},Lv:function(){return d},lt:function(){return f}});var r=n(3796),i=n(62279),o=n(93245),a=n(9101),l=n(63163),c=(0,i.iv)({filter:"drop-shadow(0px 2px 6px rgba(0, 0, 0, 0.15))"});function s(e){var t=e.height,n=void 0===t?44:t;return(0,r.BX)("svg",{width:56*n/44,height:n,viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:c,children:[(0,r.tZ)("path",{d:"M7 42.2858L8 32.6684H14L15 42.2858H24L26 27.1837H32L34 42.2858H43L45 21.699H52L55 3.71436H56V43.0001H1V42.2858H7Z",fill:"url(#paint0_linear_3629_241)"}),(0,r.tZ)("path",{d:"M55 3.71436L52 21.699H45L43 42.2858H34L32 27.1837H26L24 42.2858H15L14 32.6684H8L7 42.2858H1",stroke:"#57ABFF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("defs",{children:(0,r.BX)("linearGradient",{id:"paint0_linear_3629_241",x1:"28.5",y1:"3.71436",x2:"28.5",y2:"43.0001",gradientUnits:"userSpaceOnUse",children:[(0,r.tZ)("stop",{stopColor:"#0079F2"}),(0,r.tZ)("stop",{offset:"0.395833",stopColor:"#0079F2"}),(0,r.tZ)("stop",{offset:"0.958333",stopColor:"#0079F2",stopOpacity:"0"})]})})]})}function u(){return(0,r.BX)("svg",{width:"56",height:"44",viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:c,children:[(0,r.BX)("g",{clipPath:"url(#clip0_3629_246)",children:[(0,r.tZ)("rect",{x:"0.5",y:"9.5",width:"55",height:"19",rx:"5.5",fill:"#2B3245"}),(0,r.tZ)("g",{filter:"url(#filter0_dii_3629_246)",children:(0,r.tZ)("path",{d:"M3 15C3 13.3431 4.34315 12 6 12H20C20.5523 12 21 12.4477 21 13V25C21 25.5523 20.5523 26 20 26H6C4.34315 26 3 24.6569 3 23V15Z",fill:"#0079F2"})}),(0,r.tZ)("g",{filter:"url(#filter1_dii_3629_246)",children:(0,r.tZ)("rect",{x:"23",y:"12",width:"12",height:"14",rx:"1",fill:"#0079F2"})}),(0,r.tZ)("g",{filter:"url(#filter2_dii_3629_246)",children:(0,r.tZ)("rect",{x:"37",y:"12",width:"8",height:"14",rx:"1",fill:"#0079F2"})}),(0,r.tZ)("rect",{x:"0.5",y:"9.5",width:"55",height:"19",rx:"5.5",stroke:"#3C445C"})]}),(0,r.BX)("defs",{children:[(0,r.BX)("filter",{id:"filter0_dii_3629_246",x:"-3",y:"6",width:"30",height:"26",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.tZ)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feOffset",{}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"3"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.341176 0 0 0 0 0.670588 0 0 0 0 1 0 0 0 0.5 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_246"}),(0,r.tZ)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_246",result:"shape"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect2_innerShadow_3629_246"}),(0,r.tZ)("feOffset",{dy:"-2"}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"shape",result:"effect2_innerShadow_3629_246"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect3_innerShadow_3629_246"}),(0,r.tZ)("feOffset",{dy:"2"}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.1 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"effect2_innerShadow_3629_246",result:"effect3_innerShadow_3629_246"})]}),(0,r.BX)("filter",{id:"filter1_dii_3629_246",x:"17",y:"6",width:"24",height:"26",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.tZ)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feOffset",{}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"3"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.341176 0 0 0 0 0.670588 0 0 0 0 1 0 0 0 0.5 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_246"}),(0,r.tZ)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_246",result:"shape"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect2_innerShadow_3629_246"}),(0,r.tZ)("feOffset",{dy:"-2"}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"shape",result:"effect2_innerShadow_3629_246"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect3_innerShadow_3629_246"}),(0,r.tZ)("feOffset",{dy:"2"}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.1 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"effect2_innerShadow_3629_246",result:"effect3_innerShadow_3629_246"})]}),(0,r.BX)("filter",{id:"filter2_dii_3629_246",x:"31",y:"6",width:"20",height:"26",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.tZ)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feOffset",{}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"3"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.341176 0 0 0 0 0.670588 0 0 0 0 1 0 0 0 0.5 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_246"}),(0,r.tZ)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_246",result:"shape"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect2_innerShadow_3629_246"}),(0,r.tZ)("feOffset",{dy:"-2"}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"shape",result:"effect2_innerShadow_3629_246"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feMorphology",{radius:"2",operator:"dilate",in:"SourceAlpha",result:"effect3_innerShadow_3629_246"}),(0,r.tZ)("feOffset",{dy:"2"}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.1 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"effect2_innerShadow_3629_246",result:"effect3_innerShadow_3629_246"})]}),(0,r.tZ)("clipPath",{id:"clip0_3629_246",children:(0,r.tZ)("rect",{width:"56",height:"44",fill:"white"})})]})]})}function d(e){var t=e.height,n=void 0===t?44:t;return(0,r.BX)("svg",{width:56*n/44,height:n,viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:c,children:[(0,r.tZ)("path",{d:"M1 42H55",stroke:"#57ABFF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("g",{filter:"url(#filter0_d_3629_304)",children:(0,r.tZ)("path",{d:"M21 11L35 25M38 18C38 23.5228 33.5228 28 28 28C22.4772 28 18 23.5228 18 18C18 12.4772 22.4772 8 28 8C33.5228 8 38 12.4772 38 18Z",stroke:"#0053A6",strokeWidth:"2"})}),(0,r.tZ)("defs",{children:(0,r.BX)("filter",{id:"filter0_d_3629_304",x:"9",y:"3",width:"38",height:"38",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.tZ)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feOffset",{dy:"4"}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"4"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0.32549 0 0 0 0 0.65098 0 0 0 0.5 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_304"}),(0,r.tZ)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_304",result:"shape"})]})})]})}function f(){return(0,r.BX)("svg",{width:"56",height:"44",viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:c,children:[(0,r.tZ)("circle",{cx:"28",cy:"22",r:"13",fill:"#0053A6"}),(0,r.tZ)("path",{d:"M28 9C30.2851 9 32.5297 9.6023 34.5079 10.7462L28 22L28 9Z",fill:"#0079F2"}),(0,r.tZ)("circle",{cx:"28",cy:"22",r:"10.5",stroke:"#57ABFF",strokeDasharray:"1 4"}),(0,r.tZ)("g",{filter:"url(#filter0_d_3629_309)",children:(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M28 36.3334C35.9161 36.3334 42.3333 29.9162 42.3333 22.0001C42.3333 15.1129 37.4759 9.36028 31 7.98119V6C31 5 30 4 29 4H27C26 4 25 5 25 6V7.9812C18.5241 9.36029 13.6667 15.1129 13.6667 22.0001C13.6667 29.9162 20.0839 36.3334 28 36.3334ZM15.6667 22.0001C15.6667 15.1886 21.1885 9.66675 28 9.66675C34.8115 9.66675 40.3333 15.1886 40.3333 22.0001C40.3333 28.8116 34.8115 34.3334 28 34.3334C21.1885 34.3334 15.6667 28.8116 15.6667 22.0001Z",fill:"#0079F2"})}),(0,r.tZ)("g",{filter:"url(#filter1_d_3629_309)",children:(0,r.tZ)("path",{d:"M28 12V22L33 13.3",stroke:"#B2D9FF",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,r.BX)("defs",{children:[(0,r.BX)("filter",{id:"filter0_d_3629_309",x:"11.6667",y:"3",width:"32.6667",height:"36.3335",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.tZ)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feOffset",{dy:"1"}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_309"}),(0,r.tZ)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_309",result:"shape"})]}),(0,r.BX)("filter",{id:"filter1_d_3629_309",x:"25.25",y:"10.25",width:"10.5001",height:"15.5",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.tZ)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feOffset",{dy:"1"}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_309"}),(0,r.tZ)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_309",result:"shape"})]})]})]})}function h(e){var t=e.height,n=void 0===t?44:t;return(0,r.BX)("svg",{width:56*n/44,height:n,viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:c,children:[(0,r.tZ)("path",{d:"M0 37V6H14.5L16 9L17.5 6H37.5L39 8L40.5 6H56V37H0Z",fill:"url(#paint0_linear_3629_271)"}),(0,r.tZ)("path",{d:"M1 6H14.5L16 9L17.5 6H37.5L39 8L40.5 6H55",stroke:"#57ABFF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("defs",{children:(0,r.BX)("linearGradient",{id:"paint0_linear_3629_271",x1:"28",y1:"6",x2:"28",y2:"37",gradientUnits:"userSpaceOnUse",children:[(0,r.tZ)("stop",{stopColor:"#0079F2",stopOpacity:"0.7"}),(0,r.tZ)("stop",{offset:"0.958333",stopColor:"#0079F2",stopOpacity:"0"})]})})]})}function p(){return(0,r.BX)("svg",{width:"56",height:"44",viewBox:"0 0 56 44",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:c,children:[(0,r.tZ)("path",{d:"M16 8C16 6.89543 16.8954 6 18 6H37C38.1046 6 39 6.89543 39 8V13H16V8Z",fill:"#0053A6"}),(0,r.tZ)("path",{d:"M16 14H39V27C39 28.1046 38.1046 29 37 29H18C16.8954 29 16 28.1046 16 27V14Z",fill:"#0053A6"}),(0,r.tZ)("g",{filter:"url(#filter0_d_3629_276)",children:(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.1667 1.6665C22.719 1.6665 23.1667 2.11422 23.1667 2.6665V4.33317H31.8333V2.6665C31.8333 2.11422 32.281 1.6665 32.8333 1.6665C33.3856 1.6665 33.8333 2.11422 33.8333 2.6665V4.33317H36.8333C38.8584 4.33317 40.5 5.97479 40.5 7.99984V26.6665C40.5 28.6915 38.8584 30.3332 36.8333 30.3332H18.1667C16.1416 30.3332 14.5 28.6915 14.5 26.6665V7.99984C14.5 5.97479 16.1416 4.33317 18.1667 4.33317H21.1667V2.6665C21.1667 2.11422 21.6144 1.6665 22.1667 1.6665ZM21.1667 6.33317H18.1667C17.2462 6.33317 16.5 7.07936 16.5 7.99984V12.3332H38.5V7.99984C38.5 7.07936 37.7538 6.33317 36.8333 6.33317H33.8333V7.99984C33.8333 8.55212 33.3856 8.99984 32.8333 8.99984C32.281 8.99984 31.8333 8.55212 31.8333 7.99984V6.33317H23.1667V7.99984C23.1667 8.55212 22.719 8.99984 22.1667 8.99984C21.6144 8.99984 21.1667 8.55212 21.1667 7.99984V6.33317ZM38.5 14.3332H16.5V26.6665C16.5 27.587 17.2462 28.3332 18.1667 28.3332H36.8333C37.7538 28.3332 38.5 27.587 38.5 26.6665V14.3332Z",fill:"#57ABFF"})}),(0,r.BX)("g",{filter:"url(#filter1_d_3629_276)",children:[(0,r.tZ)("path",{d:"M43.0779 26.019C42.2616 23.6789 40.0353 22 37.4169 22C35.7617 22 34.2632 22.6709 33.1785 23.7556L30.2721 26.662M30.2721 26.662V22.666M30.2721 26.662H34.2667",stroke:"#B2D9FF",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.tZ)("path",{d:"M31.7706 29.9688C32.5869 32.3089 34.8132 33.9878 37.4316 33.9878C39.0868 33.9878 40.5853 33.3169 41.67 32.2322L44.5764 29.3258M44.5764 29.3258L44.5764 33.3218M44.5764 29.3258L40.5818 29.3258",stroke:"#B2D9FF",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),(0,r.BX)("defs",{children:[(0,r.BX)("filter",{id:"filter0_d_3629_276",x:"12.5",y:"0.666504",width:"30",height:"32.6665",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.tZ)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feOffset",{dy:"1"}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_276"}),(0,r.tZ)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_276",result:"shape"})]}),(0,r.BX)("filter",{id:"filter1_d_3629_276",x:"27.5221",y:"20.25",width:"19.8043",height:"17.4878",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,r.tZ)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,r.tZ)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,r.tZ)("feOffset",{dy:"1"}),(0,r.tZ)("feGaussianBlur",{stdDeviation:"1"}),(0,r.tZ)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,r.tZ)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0"}),(0,r.tZ)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3629_276"}),(0,r.tZ)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3629_276",result:"shape"})]})]})]})}function m(){return(0,r.tZ)(o.G,{css:[l.l0.py(6),l.l0.px(12),l.l0.color.accentPrimaryStronger],children:(0,r.tZ)(a.Z,{size:32})})}},8278:function(e,t,n){var r,i,o,a;n.d(t,{a:function(){return i},k:function(){return r}}),(o=r||(r={})).Intro="intro",o.Deployment="deployment",o.DeploymentInProgress="deployment_in_progress",o.Analytics="analytics",o.Logs="logs",o.Settings="settings",o.Schedule="schedule",o.ResourceMonitoring="resource_monitoring",o.ReservedVMTierSelection="reserved_vm_tier_selection",o.AutoscaleMachineConfiguration="autoscale_machine_configuration",(a=i||(i={})).SendDeploymentLifecycleCommand="send_deployment_lifecycle_command",a.ChangeView="change_view",a.OpenPane="open_pane"},79035:function(e,t,n){n.d(t,{B:function(){return f},V:function(){return d}});var r,i=n(42516),o=n(3796),a=n(30286),l=n(98724),c=n(54300),s=n(63163),u=n(85983),d=(r={},(0,i._)(r,u.Fe.Suspended,{title:"Paused",color:s.TV.greyDefault,colorway:"grey",icon:(0,o.tZ)(a.Z,{})}),(0,i._)(r,u.Fe.UpdatingTier,{title:"Updating tier",color:s.TV.orangeStronger,colorway:"orange",icon:(0,o.tZ)(l.Z,{})}),(0,i._)(r,u.Fe.Suspending,{title:"Pausing",color:s.TV.orangeStronger,colorway:"orange",icon:(0,o.tZ)(l.Z,{})}),(0,i._)(r,u.Fe.Resuming,{title:"Resuming",color:s.TV.orangeStronger,colorway:"orange",icon:(0,o.tZ)(l.Z,{})}),(0,i._)(r,u.Fe.Pending,{title:"Provisioning",color:s.TV.orangeStronger,colorway:"orange",icon:(0,o.tZ)(l.Z,{})}),(0,i._)(r,u.Fe.Building,{title:"Building",color:s.TV.orangeStronger,colorway:"orange",icon:(0,o.tZ)(l.Z,{})}),(0,i._)(r,u.Fe.Running,{title:"Bundling",color:s.TV.orangeStronger,colorway:"orange",icon:(0,o.tZ)(l.Z,{})}),(0,i._)(r,u.Fe.Promoting,{title:"Promoting",color:s.TV.orangeStronger,colorway:"orange",icon:(0,o.tZ)(l.Z,{})}),(0,i._)(r,u.Fe.Failed,{title:"Failed",color:s.TV.accentNegativeDefault,colorway:"negative",icon:(0,o.tZ)(c.Z,{})}),(0,i._)(r,u.Fe.Success,{title:"Deployed",color:s.TV.accentPositiveDefault,colorway:"positive"}),r);function f(e){switch(e){case u.Fe.Building:case u.Fe.Promoting:case u.Fe.Running:case u.Fe.Pending:return"is deploying";case u.Fe.Resuming:return"is resuming";case u.Fe.Suspending:return"is pausing";case u.Fe.Failed:return"failed to deploy";case u.Fe.Success:return"deployed";case u.Fe.Suspended:return"paused";case u.Fe.UpdatingTier:return"is updating tier"}}},39537:function(e,t,n){n.d(t,{Si:function(){return v},MX:function(){return Z},r5:function(){return C},bN:function(){return w},uC:function(){return b}});var r=n(21262),i=n(71440),o=n(33479);function a(){var e=(0,r._)(["\n  fragment DeploymentLink on HostingDeployment {\n    id\n    replitAppSubdomain\n    domains {\n      id\n      domain\n      state\n    }\n  }\n"]);return a=function(){return e},e}var l=(0,i.Ps)(a());function c(){var e=(0,r._)(["\n  fragment BuildDebugSummary on HostingDebugSummary {\n    id\n    sessionId\n    eventId\n  }\n"]);return c=function(){return e},e}function s(){var e=(0,r._)(["\n  fragment ReplDomain2 on Domain {\n    hosting_deployment_id\n    domain\n    state\n  }\n"]);return s=function(){return e},e}function u(){var e=(0,r._)(["\n  fragment CustomDomain on Domain {\n    ...ReplDomain2\n  }\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,r._)(["\n  fragment TargetHostingDeployment on HostingDeployment {\n    id\n    replitAppSubdomain\n  }\n"]);return d=function(){return e},e}function f(){var e=(0,r._)(["\n  fragment MachineConfiguration on HostingMachineConfiguration {\n    id\n    label\n    vcpu\n    memory\n    slug\n  }\n"]);return f=function(){return e},e}function h(){var e=(0,r._)(["\n  fragment CurrentBuild2 on HostingBuild {\n    id\n    description\n    status\n    hasDeployLogs\n    timeCreated\n    hasImageTag\n    envVars {\n      name\n      value\n    }\n    debugSummary {\n      ...BuildDebugSummary\n    }\n    repl {\n      id\n      slug\n      apexProxy\n      domains {\n        ... on Domain {\n          ...CustomDomain\n        }\n      }\n      owner {\n        ... on Team {\n          id\n          username\n        }\n        ... on User {\n          id\n          username\n        }\n      }\n      hostingDeployment {\n        ... on HostingDeployment {\n          ...TargetHostingDeployment\n        }\n      }\n    }\n    provider\n    machineConfiguration {\n      ...MachineConfiguration\n    }\n    maxMachineInstances\n    machineJob {\n      timezone\n      crontab\n    }\n    user {\n      id\n      displayName\n      username\n    }\n    isPrivate\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return h=function(){return e},e}function p(){var e=(0,r._)(["\n  fragment DeploymentStatus on HostingDeployment {\n    id\n    currentBuild {\n      id\n      status\n      timeCreated\n      user {\n        id\n        displayName\n      }\n      provider\n    }\n    inProgressBuild {\n      id\n    }\n    latestBuildStatus\n  }\n"]);return p=function(){return e},e}function m(){var e=(0,r._)(["\n  fragment DeploymentItem on HostingDeployment {\n    id\n    replitAppSubdomain\n    domains {\n      id\n      domain\n      state\n    }\n    repl {\n      id\n      title\n      iconUrl\n      ...ReplLinkRepl\n    }\n    ...DeploymentLink\n    ...DeploymentStatus\n  }\n  ","\n  ","\n  ","\n"]);return m=function(){return e},e}var v=(0,i.Ps)(c()),g=(0,i.Ps)(s()),y=(0,i.Ps)(u(),g),b=(0,i.Ps)(d()),w=(0,i.Ps)(f()),Z=(0,i.Ps)(h(),v,y,b,w),x=(0,i.Ps)(p()),C=(0,i.Ps)(m(),o.Y,l,x)},77317:function(e,t,n){n.d(t,{EC:function(){return v},U4:function(){return f}});var r=n(41733),i=n(21262),o=n(71440),a=n(82303);function l(){var e=(0,i._)(["\n  fragment MultiplayerUser on User {\n    id\n    image\n    username\n    url\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i._)(["\n  fragment MultiplayerRepl on Repl {\n    id\n    collaborators {\n      user {\n        ...MultiplayerUser\n      }\n    }\n    multiplayerInvites {\n      email\n      type\n    }\n  }\n  ","\n"]);return c=function(){return e},e}function s(){var e=(0,i._)(["\n  fragment MultiplayerReplInvite on MultiplayerInvite {\n    email\n    repl {\n      ...MultiplayerRepl\n    }\n    invitePermissionType: type\n  }\n  ","\n"]);return s=function(){return e},e}function u(){var e=(0,i._)(["\n  mutation AddOrInviteReplMultiplayer(\n    $input: AddOrInviteReplMultiplayerInput!\n  ) {\n    addOrInviteReplMultiplayer(input: $input) {\n      __typename\n      ... on AddOrInviteReplMultiplayerOuput {\n        result {\n          ... on MultiplayerInvite {\n            ...MultiplayerReplInvite\n          }\n          ... on ReplPermission {\n            id\n            repl {\n              ...MultiplayerRepl\n            }\n            user {\n              ...MultiplayerUser\n            }\n            replPermissionType: type\n          }\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return u=function(){return e},e}var d={},f=(0,o.Ps)(l()),h=(0,o.Ps)(c(),f),p=(0,o.Ps)(s(),h),m=(0,o.Ps)(u(),p,h,f);function v(e){var t=(0,r._)({},d,e);return a.D(m,t)}},7283:function(e,t,n){var r=n(66626),i=n(25722),o=n(77317),a=n(99595),l=n(96949),c=n(85983),s=n(52589);t.Z=function(e){var t=e.isMobileApp,n=e.isTeam,u=e.handleUpgradeTriggered,d=e.replId,f=(0,a.Z)(),h=f.showConfirm,p=f.showError,m=function(e,t){i.n_({message:t}),i.Tb(Error(e.message)),p("Something unexpected happened, please try again.")},v=(0,r._)((0,o.EC)({onError:function(e){return m(e,"useAddOrInviteReplMultiplayerMutation")},onCompleted:function(e){var r,i,o,a=e.addOrInviteReplMultiplayer;switch(a.__typename){case"NotFoundError":case"UnauthorizedError":p(a.message);return;case"UserError":if(a.message.includes("reached the limit")){if(t&&!n){p("You have reached the invite limit for a free account. Please upgrade to add more collaborators.");return}if(!t&&u){u(!0);return}}p(a.message);return;case"AddOrInviteReplMultiplayerOuput":"MultiplayerInvite"===a.result.__typename?(r=c.ml.Email,i=a.result.email):(r=c.ml.Username,i=(null===(o=a.result.user)||void 0===o?void 0:o.username)?"@".concat(a.result.user.username):"user")}(0,l.j)(s.U3.MULTIPLAYER_INVITED,{replId:d,inviteMethod:r}),h("Added ".concat(i))}}),2);return{addOrInviteReplMultiplayer:v[0],loadingAddMutation:v[1].loading}}},60873:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(75271);function i(){return(0,r.useMemo)(function(){return function(){if("undefined"==typeof document)return!1;var e=document.createElement("input");return"webkitdirectory"in e||"mozdirectory"in e||"msdirectory"in e||"odirectory"in e||"directory"in e}()},[])}},45883:function(e,t,n){var r=n(75271);t.Z=function(e,t,n){(0,r.useEffect)(function(){var t=setTimeout(e,n);return function(){clearTimeout(t)}},t)}},37701:function(e,t,n){n.d(t,{v:function(){return d}});var r=n(41733),i=n(21262),o=n(71440),a=n(9122);function l(){var e=(0,i._)(["\n  query ReplTeamOrgSettings($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        owner {\n          __typename\n          ... on Team {\n            id\n            organization {\n              id\n              isAiEnabled\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var c={},s=(0,o.Ps)(l()),u=n(16155);function d(){var e,t,n,i,o=(n={variables:{replId:(0,u.Z)()}},i=(0,r._)({},c,n),a.a(s,i)).data;return{isTeamWithAiDisabled:(null==o?void 0:o.repl.__typename)==="Repl"&&(null===(e=o.repl.owner)||void 0===e?void 0:e.__typename)==="Team"&&(null===(t=o.repl.owner.organization)||void 0===t?void 0:t.isAiEnabled)===!1}}},27001:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(66626),i=n(82973),o=n(75271);function a(e,t){var n=(0,r._)((0,o.useState)(function(){var n;return null!==(n=i.Z.get(e))&&void 0!==n?n:t}),2),a=n[0],l=n[1];return(0,o.useEffect)(function(){i.Z.set(e,a)},[e,a]),[a,l]}},53904:function(e,t,n){n.d(t,{_:function(){return c}});var r=n(27387),i=n(96583),o=n(10777),a=n(23882),l=n(54129);function c(){var e=(0,a.Z)().toolchain;function t(){return(t=(0,r._)(function(t){return(0,i.Jh)(this,function(n){return[2,e.setModuleConfig(t)]})})).apply(this,arguments)}function n(){return(n=(0,r._)(function(t){return(0,i.Jh)(this,function(n){switch(n.label){case 0:return[4,e.addModule(t).catch(function(e){o.kg.error("Toolchain: failed to add Nix module: "+e.message)})];case 1:return n.sent(),[2]}})})).apply(this,arguments)}function c(){return(c=(0,r._)(function(t){return(0,i.Jh)(this,function(n){switch(n.label){case 0:return[4,e.removeModule(t).catch(function(e){o.kg.error("Toolchain: failed to remove Nix module: "+e.message)})];case 1:return n.sent(),[2]}})})).apply(this,arguments)}function s(){return(s=(0,r._)(function(t,n){return(0,i.Jh)(this,function(r){switch(r.label){case 0:return[4,e.upgradeModule(t,n).catch(function(e){o.kg.error("Toolchain: failed to upgrade Nix module: "+e.message)})];case 1:return r.sent(),[2]}})})).apply(this,arguments)}return{modules:(0,l.Z)(e.modules),configs:(0,l.Z)(e.configs),moduleConfig:(0,l.Z)(e.moduleConfig),setModuleConfig:function(e){return t.apply(this,arguments)},addModule:function(e){return n.apply(this,arguments)},removeModule:function(e){return c.apply(this,arguments)},upgradeModule:function(e,t){return s.apply(this,arguments)}}}},52697:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(66626),i=n(92943),o=n(23882),a=n(75271),l=n(17437),c=n(41733),s=n(21262),u=n(71440),d=n(82303);function f(){var e=(0,s._)(["\n  mutation ReplFsUpdated($replId: String!) {\n    updateReplTimeUpdated(id: $replId) {\n      ... on Repl {\n        id\n        timeUpdated\n      }\n    }\n  }\n"]);return f=function(){return e},e}var h={},p=(0,u.Ps)(f());function m(){var e,t=(0,r._)((e=(0,c._)({},h,void 0),d.D(p,e)),1)[0],n=(0,o.Z)().fs,s=(0,i.Z)(),u=null==s?void 0:s.authorizations.editFileContents.isAuthorized,f=null==s?void 0:s.id;(0,a.useEffect)(function(){if(u&&f){var e=(0,l.Z)(function(){return t({variables:{replId:f}})},{wait:6e4,maxWait:6e5}),r=n.onStatusChange(function(){e()});return function(){e.isScheduled()&&e.flush(),r()}}},[n,f,u,t])}},79685:function(e,t,n){n.d(t,{T:function(){return o}});var r=n(50013),i=n(75271);function o(){var e=(0,i.useContext)(r.Z);if(!e)throw Error("Expected Repl info to be in context");return"html"===e.language}},76684:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(66626),i=n(63257),o=n(46954),a=n(75271),l=n(41733),c=n(30509),s=function(e){return/\s/.test(e)};function u(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=(0,r._)((0,a.useState)(null),2),o=i[0],u=i[1],d=(0,a.useCallback)(u,[u]),f=(0,a.useRef)(t);(0,a.useEffect)(function(){f.current=t},[t]);var h=(0,r._)((0,a.useState)(null),2),p=h[0],m=h[1];return(0,a.useEffect)(function(){if(o){var e=function(){var e=o.value,t=o.selectionStart;if(!t){m(null);return}var n=1===t||s(e[t-2]||""),r=e.length?e[t-1]:null;m(function(i){if(i&&(t<i.index||0===t))return null;if(!r||!i&&!n)return i;var o=f.current.includes(r);return i||o?i?s(r)?null:(0,c._)((0,l._)({},i),{text:e.slice(i.index,t)}):{index:t,text:"",match:r}:i})},t=function(){m(null)};return o.addEventListener("focus",e),o.addEventListener("keyup",e),o.addEventListener("blur",t),function(){m(null),o.removeEventListener("focus",e),o.removeEventListener("keyup",e),o.removeEventListener("blur",t)}}},[o,m]),[p,d]}function d(e){var t=(0,a.useRef)(e);(0,a.useEffect)(function(){t.current=e},[e]);var n=(0,r._)((0,a.useState)(!1),2),l=n[0],c=n[1],s=(0,r._)((0,a.useState)(null),2),d=s[0],f=s[1],h=(0,r._)(u.apply(void 0,(0,i._)(Object.keys(e))),2),p=h[0],m=h[1],v=(0,a.useRef)(p);(0,a.useEffect)(function(){v.current=p},[p]);var g=(0,o.Z)(p,100);return(0,a.useEffect)(function(){if(!g){f(null);return}var e=g.match,n=g.text,r=t.current[e]?t.current[e]:null;if(!r){f(null);return}var i=!1;return c(!0),r(n).then(function(e){i||v.current!==g||(c(!1),f({textTrigger:g,results:e,applySuggestion:function(e){var t=e.targetValue,n=e.suggestionValue,r=t.slice(0,g.index),i=n,o=t.slice(g.index+g.text.length);o&&o.startsWith(" ")||(i+=" ");var a=r+i+o;return{cursorIndex:(r+i).length+(o&&o.startsWith(" ")?1:0),fullValue:a}}}))}),function(){i=!0}},[g,f]),[{isLoading:l,suggestions:d},m]}},97763:function(e,t,n){n.d(t,{T:function(){return o}});var r=n(23882),i=n(54129);function o(){var e=(0,r.Z)().toolchain;return(0,i.Z)(e.configs)}},14274:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(66626),i=n(42965),o=n(50938),a=n(75271);function l(){var e=(0,a.useRef)(0),t=(0,r._)((0,a.useState)(!1),2),n=t[0],l=t[1],c=(0,i.T3)(),s=(0,i.sG)(),u=(0,o.u)();return(0,a.useEffect)(function(){var t,n=window.visualViewport;if(n){if(s){l(null!==(t=null==u?void 0:u.isShown)&&void 0!==t&&t);return}if(c){var r=function(){l(n.height<.8*e.current)};return e.current=n.height,n.addEventListener("resize",r),function(){n.removeEventListener("resize",r)}}}},[c,s,null==u?void 0:u.isShown]),n}},16354:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(66626),i=n(47),o=n(23882),a=n(75271),l=n(10777);function c(e,t){var n,c,s,u,d=(n=(0,o.Z)().container,s=(c=(0,r._)((0,a.useState)(null),2))[0],u=c[1],(0,a.useEffect)(function(){if(n)return n.onConnectionStateChanged(function(){u(n.getConnectionMetadata())})},[n]),(0,a.useMemo)(function(){return s?(0,i.he)(s.token):null},[s]));(0,a.useEffect)(function(){if(e&&t){var n,r,i,o=(null===(n=e.origin)||void 0===n?void 0:n.__typename)==="Repl"?e.origin.id:null,a={id:e.id,slug:e.slug,originId:o,roles:t.roles&&t.roles.map(function(e){return e.name}),rootOriginReplUrl:e.rootOriginReplUrl,rootOriginReplReleaseId:null===(i=e.source)||void 0===i?void 0:null===(r=i.release)||void 0===r?void 0:r.id,tokenCluster:null==d?void 0:d.cluster};return(0,l.Fy)(a),function(){(0,l.dv)()}}},[e,t,d])}},2763:function(e,t,n){n.d(t,{Y:function(){return v},w:function(){return h}});var r=n(27387),i=n(96583),o=n(37475),a=n(23882),l=n(55992),c=n.n(l),s=n(75271),u=n(43257),d=n(73878),f=n(72106);function h(e,t,n,r){return p.apply(this,arguments)}function p(){return(p=(0,r._)(function(e,t,n,r){var a,l,s,u,d,f,h,p,v,g,y;return(0,i.Jh)(this,function(i){switch(i.label){case 0:return l="/home/runner/".concat(e.slug),s="/home/runner/bin/pid2",[4,(0,o.jy)()];case 1:if("dev"===(u=i.sent()))return r("dev is not a version we can upload to the container"),[2];return[4,function(e,t,n,r){return m.apply(this,arguments)}(u,t,n,r)];case 2:return i.sent(),d=c().join(l,".cache/replit/pid2/".concat(u)),f=c().join(d,"pid2"),[4,t.exec("stat","-c","%N",s)];case 3:if(!(h=i.sent()).error&&(null===(a=h.output)||void 0===a?void 0:a.includes(f)))return r("pid2  version ".concat(u," already exists in container")),[2];return p=c().dirname(s),[4,t.exec("mkdir","-p",p)];case 4:if((v=i.sent()).error)throw Error("pid2: mkdir ".concat(p,": ").concat(v.error));return[4,t.exec("ln","-sf",f,s)];case 5:if((g=i.sent()).error)throw Error("pid2: link ".concat(s,": ").concat(g.error));return r("pid2 version ".concat(u," installed, restarting pid2")),[4,t.exec("bash","-c","kill -9 $(pidof pid2)")];case 6:return(y=i.sent()).error&&r("pid2: couldn't kill ".concat(y.error)),r("pid2 version ".concat(u," installed")),[2]}})})).apply(this,arguments)}function m(){return(m=(0,r._)(function(e,t,n,r){var o,a,l,s,h,p,m,v,g,y;return(0,i.Jh)(this,function(i){switch(i.label){case 0:return o=c().join(f.Ql,".cache/replit/pid2/".concat(e)),a=c().join(o,"success"),[4,n.stat(a)];case 1:if((l=i.sent()).exists&&l.type===d.Tv.File)return[2];return r("pid2: uploading version ".concat(e," to container...")),[4,fetch("/pid2/bundle")];case 2:if(!(s=i.sent()).ok)throw Error("Error fetching PID2 bundle: ".concat(s.statusText));if(!s.body)throw Error("Error fetching PID2 bundle: ".concat(s));return[4,s.arrayBuffer()];case 3:return h=i.sent(),p=".cache/replit/pid2/pid2-".concat(e,".tar.gz"),[4,n.writeFile(p,u.Z.from(h))];case 4:if((m=i.sent()).error)throw Error("pid2: writing tarball: ".concat(m.error));return[4,t.exec("mkdir","-p",o)];case 5:if((v=i.sent()).error)throw Error("pid2: mkdir: ".concat(v.error));return[4,t.exec("tar","-C",o,"-xf",p)];case 6:if((g=i.sent()).error)throw Error("pid2: untar: ".concat(g.error));return[4,n.writeFile(c().join(o,"pid2.version"),e)];case 7:if((y=i.sent()).error)throw Error("pid2: writeVersion: ".concat(y.error));return[4,t.exec("touch",a)];case 8:return i.sent(),[4,t.exec("rm","-f",p)];case 9:return i.sent(),r("pid2: ".concat(e," upload success")),[2]}})})).apply(this,arguments)}n(49500);var v=function(){var e,t=(0,o.iM)(),n=((0,s.useRef)(!1),(0,a.Z)()),r=n.fs,i=n.container,l=null===(e=i.getContext())||void 0===e?void 0:e.repl;return(0,s.useEffect)(function(){},[r,t,i,l]),null}},1252:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(27387),i=n(96583),o=n(35370),a=/\(copy\)( \d+)?$/,l=/\d+$/,c=n(72106);function s(e,t){return u.apply(this,arguments)}function u(){return(u=(0,r._)(function(e,t){var n,r,s,u,d,f;return(0,i.Jh)(this,function(i){switch(i.label){case 0:return n=(0,o.Il)(e),[4,t.readDir(0===n.length?c.Ql:n)];case 1:if((r=i.sent()).error)throw r.error;return s=new Set(r.children.map(function(e){return e.filename})),u=function(e,t){var n=(0,o.r6)(e),r=(0,o.eb)(e);if(!r&&e.startsWith(".")){var i=e.lastIndexOf(".");r=i>0?e.slice(0,i):e}for(var c=a.test(r)?e:"".concat(r," (copy)").concat(n.length>0?".".concat(n):""),s=1;s<=t.size&&t.has(c);s++){var u=(0,o.eb)(c),d=u.split(" ");l.test(u)&&d.pop(),c="".concat(d.join(" ")," ").concat(s),n.length>0&&(c+=".".concat(n))}return c}((0,o.UO)(e),s),d=n?"".concat(n,"/").concat(u):u,[4,t.copyFile(e,d)];case 2:if((f=i.sent()).error)throw f.error;return[2,d]}})})).apply(this,arguments)}},18757:function(e,t){t.Z={sandbox:"allow-same-origin allow-forms allow-popups allow-popups-to-escape-sandbox allow-modals allow-downloads allow-downloads-without-user-activation allow-presentation allow-orientation-lock allow-scripts",allow:"accelerometer; ambient-light-sensor; autoplay; battery; camera; display-capture; encrypted-media; execution-while-not-rendered; execution-while-out-of-viewport; fullscreen; gamepad; geolocation; gyroscope; layout-animations; legacy-image-formats; magnetometer; microphone; midi; navigation-override; oversized-images; payment; picture-in-picture; publickey-credentials; speaker-selection; sync-xhr; unoptimized-images; unsized-media; usb; screen-wake-lock; web-share; xr-spatial-tracking; clipboard-read; clipboard-write",allowFullScreen:!0,allowtransparency:"true",allowpaymentrequest:"true",allowpopups:"true"}},36082:function(e,t,n){n.d(t,{Y:function(){return k},K:function(){return S}});var r,i=n(3796),o=n(63952),a=n(14118),l=n(27387),c=n(12285),s=n(96583),u=n(61374),d=n(10777),f=new(function(){"use strict";function e(){(0,c._)(this,e)}var t=e.prototype;return t.export=function(e,t){var n=new Map,r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c,s=a.value,f=s.spanContext(),h={name:s.name,service:"repl.it-web",trace_id:f.traceId,span_id:f.spanId,start:s.startTime,end:s.endTime,parent_id:s.parentSpanId,attributes:s.attributes};n.has(f.traceId)||n.set(f.traceId,[]),null===(c=n.get(f.traceId))||void 0===c||c.push(h)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}var p=Array.from(n.values());if(0===p.length){t({code:u.I.SUCCESS});return}var m=(0,d.Q0)();fetch("/datadog/traces",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","X-Requested-With":"fetch"},body:JSON.stringify({repl:{id:null==m?void 0:m.id,rootOriginReplUrl:null==m?void 0:m.rootOriginReplUrl},traces:p})}).then(function(){t({code:u.I.SUCCESS})}).catch(function(e){d.kg.error("Failed to send traces to Datadog: ".concat(e.message)),t({code:u.I.FAILED,error:e.message})})},t.shutdown=function(){return(0,l._)(function(){return(0,s.Jh)(this,function(e){return[2]})})()},t.forceFlush=function(){return(0,l._)(function(){return(0,s.Jh)(this,function(e){return[2]})})()},e}()),h=n(83176),p=n(25490),m=n(4955),v=n(9670),g=n(51305),y=n(2854),b=n(96125),w=function(e){"use strict";(0,m._)(n,e);var t=(0,v._)(n);function n(){var e;return(0,c._)(this,n),e=t.apply(this,arguments),e.spanSet=new Map,e}var r=n.prototype;return r.startSpan=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g.D.active(),i=(0,h._)((0,p._)(n.prototype),"startSpan",this).call(this,e,t,r);return this.spanSet.set(i.spanContext().spanId,i),i},r.pruneSpans=function(){this.spanSet.forEach(function(e){e.isRecording()&&e.setAttribute("pruned",!0)}),this.spanSet=new Map},n}(y.k),Z=function(e){"use strict";(0,m._)(n,e);var t=(0,v._)(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,c._)(this,n),(e=t.call(this,r))._wsTracers=new Map,e._wsConfig=r,e}var r=n.prototype;return r.getTracer=function(e,t,n){var r="".concat(e,"@").concat(t||"",":").concat((null==n?void 0:n.schemaUrl)||"");return this._wsTracers.has(r)||this._wsTracers.set(r,new w({name:e,version:t,schemaUrl:null==n?void 0:n.schemaUrl},this._wsConfig,this)),this._wsTracers.get(r)},r.pruneSpansForTracer=function(e,t,n){var r,i="".concat(e,"@").concat(t||"",":").concat((null==n?void 0:n.schemaUrl)||"");this._wsTracers.has(i)&&(null===(r=this._wsTracers.get(i))||void 0===r||r.pruneSpans())},n}(b.m),x=n(75271),C=n(18293);function k(){var e=(0,a.P5)({controlName:"flag-open-telemetry-tracing",forceCheckLiveClient:!0});return(0,x.useEffect)(function(){e&&((r=new Z).addSpanProcessor(new o.p(f)),r.register({propagator:new C.jf}))},[e]),(0,i.tZ)(i.HY,{})}function S(e){r.pruneSpansForTracer(e)}},42876:function(e,t,n){n.d(t,{Z:function(){return i},c:function(){return r}});var r="https://twitter.com/intent/tweet";function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.text,n=e.url,i=e.hashtags,o=e.via,a=new URLSearchParams;t&&a.append("text",t),n&&a.append("url",n),i&&a.append("hashtags",i.join(",")),o&&a.append("via",o);var l=a.toString();return l.length>0?"".concat(r,"?").concat(l):r}},32663:function(e,t,n){n.d(t,{Z:function(){return A}});var r=n(66626),i=n(3796),o=n(99595),a=n(54505),l=n(96949),c=n(44935),s=n(24374),u=n(14548),d=n(49784),f=n(24766),h=n(93245),p=n(36809),m=n(34030),v=n(77402),g=n(10578),y=n(54300),b=n(63163),w=n(41733),Z=n(21262),x=n(71440),C=n(9122),k=n(82303);function S(){var e=(0,Z._)(["\n  query MultiplayerInviteUrl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        inviteUrl\n        owner {\n          ... on User {\n            id\n          }\n          ... on Team {\n            id\n            capabilities {\n              isBusinessPlan\n              hasValidSubscription\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return S=function(){return e},e}function _(){var e=(0,Z._)(["\n  mutation MultiplayerRefreshInviteUrl($replId: String!) {\n    refreshMultiplayerInviteLink(replId: $replId) {\n      id\n      ... on Repl {\n        id\n        inviteUrl\n      }\n    }\n  }\n"]);return _=function(){return e},e}function E(){var e=(0,Z._)(["\n  mutation DeleteMultiplayerInviteUrl($replId: String!) {\n    deleteMultiplayerInviteLink(replId: $replId) {\n      ... on Repl {\n        id\n        inviteUrl\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return E=function(){return e},e}var T={},R=(0,x.Ps)(S()),D=(0,x.Ps)(_()),I=(0,x.Ps)(E()),B=n(23522),G=(0,p.X)({container:[b.l0.colWithGap(12),b.l0.px(12)],header:[b.l0.flex.row,b.l0.justify.spaceBetween],globeIconContainer:[b.l0.width(40),b.l0.height(40),b.l0.backgroundColor.accentPrimaryDimmer,b.l0.borderRadius("full"),b.l0.align.center,b.l0.justify.center],title:[b.l0.fontWeight.medium],loading:[b.l0.rowWithGap(4),b.l0.align.center],inviteUrlContainer:[b.l0.borderRadius(8),b.l0.flex.row],input:[b.l0.borderRadius(8,0,0,8),b.l0.color.foregroundDimmer],copyToClipboard:[b.l0.borderRadius(0,8,8,0)],titleGroup:[b.l0.rowWithGap(12)]}),P=function(){return(0,i.BX)(h.G,{css:G.titleGroup,children:[(0,i.tZ)(h.G,{css:G.globeIconContainer,children:(0,i.tZ)(m.Z,{color:b.TV.accentPrimaryStrongest,size:20})}),(0,i.BX)(h.G,{children:[(0,i.tZ)(f.xv,{css:G.title,id:"link-switch-label",multiline:!1,children:"Private join link"}),(0,i.tZ)(f.xv,{variant:"small",color:"dimmest",multiline:!1,children:"Anyone with this link can edit files"})]})]})};function A(e){var t,n,p,m,Z,x,S,_,E,A,L,N=e.replId,O=(0,o.Z)(),U=O.showConfirm,X=O.showError,M=(t=(0,w._)({},T,{variables:{replId:N}}),C.a(R,t)),F=M.data,W=M.loading,V=M.error,H=M.refetch,z=(0,r._)((n=(0,w._)({},T,{variables:{replId:N},onError:function(e){return X(e.message)},onCompleted:function(){return U("Join link created")}}),k.D(D,n)),2),j=z[0],q=z[1],J=(0,r._)((p=(0,w._)({},T,{variables:{replId:N},onError:function(e){return X(e.message)},onCompleted:function(e){if("UserError"===e.deleteMultiplayerInviteLink.__typename){X(e.deleteMultiplayerInviteLink.message);return}"Repl"===e.deleteMultiplayerInviteLink.__typename&&U("Join link deleted")}}),k.D(I,p)),2),Y=J[0],$=J[1],K=(null==F?void 0:null===(m=F.repl)||void 0===m?void 0:m.__typename)==="Repl"?F.repl:null,Q=q.loading||$.loading,ee=(null==F?void 0:null===(Z=F.repl)||void 0===Z?void 0:Z.__typename)==="Repl"&&(null==K?void 0:null===(x=K.owner)||void 0===x?void 0:x.__typename)==="Team",et=(null==F?void 0:null===(S=F.repl)||void 0===S?void 0:S.__typename)==="Repl"&&(null==K?void 0:null===(_=K.owner)||void 0===_?void 0:_.__typename)==="Team"&&(null==K?void 0:null===(E=K.owner.capabilities)||void 0===E?void 0:E.isBusinessPlan)&&(null==K?void 0:null===(A=K.owner.capabilities)||void 0===A?void 0:A.hasValidSubscription),en=(null==F?void 0:null===(L=F.repl)||void 0===L?void 0:L.__typename)==="Repl"&&(null==K?void 0:K.inviteUrl)?window.location.origin+(null==K?void 0:K.inviteUrl):null;return W||ee&&!et?null:V?(0,i.BX)(h.G,{css:G.container,children:[(0,i.BX)(h.G,{css:G.header,children:[(0,i.tZ)(P,{}),(0,i.tZ)(d.r,{isSelected:!1,isDisabled:!0,"aria-labelledby":"link-switch-label"})]}),(0,i.tZ)(s.u,{css:[b.l0.textAlign.left],iconLeft:(0,i.tZ)(y.Z,{color:b.TV.accentNegativeStrongest}),colorway:"negative",text:"Error loading join link. Click here to try again, or contact support.",onClick:function(){return H({replId:N})}})]}):(0,i.BX)(h.G,{css:G.container,children:[(0,i.BX)(h.G,{css:G.header,children:[(0,i.tZ)(P,{}),W?(0,i.BX)(h.G,{css:G.loading,children:[(0,i.tZ)(g.Z,{color:b.TV.foregroundDimmer}),(0,i.tZ)(f.xv,{color:"dimmer",multiline:!1,children:"Loading..."})]}):(0,i.tZ)(d.r,{isSelected:!!en,isDisabled:Q,onChange:function(e){Q||(e?j():Y())},"aria-labelledby":"link-switch-label"})]}),!W&&en?(0,i.BX)(i.HY,{children:[(0,i.BX)(u.Tg,{css:G.inviteUrlContainer,children:[(0,i.tZ)(c.II,{type:"url",readOnly:!0,disabled:!0,value:Q?"Loading...":en,css:G.input}),(0,i.tZ)(B.q,{textToCopy:en,onClick:function(){en?((0,a.Z)(en),(0,l.j)(l.U3.JOIN_LINK_COPIED,{replId:null==K?void 0:K.id,isTeamRepl:ee,source:"replEnvironment"}),U("Link copied")):X("Could not copy link")},tooltipSuccessText:"Copied to clipboard",text:"Copy join link",iconLeft:(0,i.tZ)(v.Z,{}),css:G.copyToClipboard,colorway:"primary",disabled:Q})]}),(0,i.tZ)(h.G,{children:(0,i.BX)(f.xv,{color:"dimmer",variant:"small",multiline:!1,children:["Want to revoke access to this link?"," ",(0,i.tZ)("a",{css:b.l0.linkStyle,role:"button",tabIndex:0,onKeyDown:function(e){"Enter"!==e.key||(e.preventDefault(),Q||j())},onClick:function(e){e.preventDefault(),Q||j()},children:"Generate a new link"})]})})]}):null]})}},55629:function(e,t,n){n.d(t,{_U:function(){return P},ln:function(){return A},ZP:function(){return L}});var r=n(63257),i=n(3796),o=n(7283),a=n(42965),l=n(46321),c=n(14548),s=n(24766),u=n(22419),d=n(93245),f=n(39819),h=n(39031),p=n(10578),m=n(63163),v=n(5297),g=n(42306),y=n(85983),b=n(7391),w=n(2553),Z=n(14709),x=n.n(Z),C=n(41733),k=n(21262),S=n(71440),_=n(77317),E=n(9122);function T(){var e=(0,k._)(["\n  query MultiplayerManager($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isOwner\n        collaborators {\n          user {\n            ...MultiplayerUser\n          }\n        }\n        authorizations {\n          editPermissions {\n            isAuthorized\n          }\n        }\n        multiplayerInvites {\n          email\n          type\n        }\n      }\n    }\n    currentUser {\n      id\n      isSubscribed\n    }\n  }\n  ","\n"]);return T=function(){return e},e}var R={},D=(0,S.Ps)(T(),_.U4),I=n(28109),B=n(26456);function G(e,t){return t.some(function(t){return t.id===e})}var P={root:[m.l0.color.foregroundDefault,m.l0.colWithGap(12),m.l0.align.stretch,m.l0.flex.growAndShrink(1),m.l0.px(12)],header:[m.l0.flex.row,m.l0.justify.spaceBetween,m.l0.align.center],header_mobile:[m.l0.px(0)],titleContainer:[m.l0.flex.row,m.l0.rowWithGap(4),m.l0.align.center],limitsContainer:[m.l0.align.center,m.l0.rowWithGap(8)],loading:[m.l0.rowWithGap(4),m.l0.align.center,m.l0.flex.grow(1),m.l0.justify.center],measureBar:[m.l0.height(8),m.l0.width(60)],searchContainer:[m.l0.position.relative,m.l0.maxHeight(32)],userList:[m.l0.flex.column,m.l0.colWithGap(16),m.l0.scrollbar.thin,m.l0.position.relative,m.l0.overflowY("auto"),m.l0.flex.growAndShrink(1),{maxHeight:300,"::-webkit-scrollbar-thumb":[m.l0.backgroundColor.backgroundHighest,m.l0.borderRadius(4)],scrollbarColor:"".concat(m.TV.backgroundDefault," ").concat(m.TV.backgroundHighest)}],userGroup:{root:[m.l0.colWithGap(8)],titleContainer:[m.l0.rowWithGap(4),m.l0.align.center],title:[m.l0.fontWeight.medium]},emptyContainer:[m.l0.position.relative,m.l0.colWithGap(16),m.l0.py(16),m.l0.justify.start,{maxHeight:220}]},A=function(e){var t=e.title,n=e.count,r=e.color,o=e.tooltip;return(0,i.BX)(d.G,{css:P.userGroup.titleContainer,children:[(0,i.tZ)(f.Z,{color:r,size:6}),(0,i.tZ)(s.xv,{variant:"small",css:P.userGroup.title,multiline:!1,children:t}),(0,i.tZ)(s.xv,{multiline:!1,variant:"small",color:"dimmest",css:P.userGroup.title,children:n}),o?(0,i.tZ)(u.u,{tooltip:o,children:(0,i.tZ)(h.Z,{})}):null]})},L=function(e){var t,n,u=e.replId,f=e.handleUpgradeTriggered,h=(0,b.useRouter)(),Z=(0,a.Gv)(h),k=(0,o.Z)({isMobileApp:Z,isTeam:!1,handleUpgradeTriggered:f,replId:u}),S=k.addOrInviteReplMultiplayer,_=k.loadingAddMutation,T=(0,g.aG)(),L=(t=(0,C._)({},R,{variables:{replId:u},pollInterval:8e3}),E.a(D,t)),N=L.data,O=L.loading,U=(null==N?void 0:N.repl.__typename)==="Repl"?N.repl:null,X=null==N?void 0:N.currentUser,M=(null!==(n=null==U?void 0:U.collaborators)&&void 0!==n?n:[]).reduce(function(e,t){var n=t.user;return(0,r._)(e).concat([n.username])},[]),F=(null==U?void 0:U.authorizations.editPermissions.isAuthorized)||!1,W=!!(U&&!M.length&&!U.multiplayerInvites.length),V=null==U?void 0:U.collaborators.map(function(e){return e.user}).filter(function(e){return e.id!==(null==X?void 0:X.id)}),H=null==V?void 0:V.filter(function(e){return e&&G(e.id,T)}),z=null==V?void 0:V.filter(function(e){return e&&!G(e.id,T)}),j=V?V.length:null;return(0,i.BX)(c.Tg,{background:"default",css:P.root,children:[(0,i.BX)(d.G,{css:[P.header,Z&&P.header_mobile],children:[(0,i.tZ)(d.G,{css:P.titleContainer,children:(0,i.tZ)(s.xv,{variant:"subheadDefault",multiline:!1,children:"Multiplayers"})}),(0,i.BX)(d.G,{css:P.limitsContainer,children:[O?(0,i.BX)(d.G,{css:P.loading,children:[(0,i.tZ)(p.Z,{color:m.TV.foregroundDimmer}),(0,i.tZ)(s.xv,{color:"dimmer",multiline:!1,children:"Loading..."})]}):null,null===j||(null==X?void 0:X.isSubscribed)?null:(0,i.BX)(i.HY,{children:[(0,i.BX)(s.xv,{variant:"small",color:"dimmest","aria-hidden":!0,multiline:!1,children:[j," / ",w.z]}),(0,i.tZ)(l.J,{css:P.measureBar,total:w.z,current:j,tooltip:"".concat(w.z-j," free editors remaining")})]}),O||(null==X?void 0:X.isSubscribed)||Z?null:(0,i.tZ)(v.Z,{size:"small",context:"workspace_multiplayer_header",onClickCallback:function(){f&&f(!0)},onCancel:function(){f&&f(!1)}})]})]}),F&&M&&U?(0,i.tZ)(d.G,{css:P.searchContainer,children:(0,i.tZ)(B.Z,{existingUsernames:M,onSubmit:function(e){(!O||(null==X?void 0:X.isSubscribed))&&(_||S({variables:{input:{replId:u,target:{method:x()(e)?y.ml.Email:y.ml.Username,value:e},level:y.gA.Rw}}}))}})}):null,W?(0,i.tZ)(d.G,{css:P.emptyContainer,children:(0,i.tZ)(d.G,{children:(0,i.tZ)(s.xv,{color:"dimmest",multiline:!1,children:"No one else is here"})})}):(0,i.BX)(c.Tg,{css:P.userList,children:[(null==H?void 0:H.length)?(0,i.BX)(d.G,{css:P.userGroup.root,children:[(0,i.tZ)(A,{title:"Online",count:H.length||0,color:m.TV.greenStrongest}),H.map(function(e){return e?(0,i.tZ)(I.Z,{isPendingInvitation:!1,replId:u,canEditMultiplayers:F,user:e},e.id):null})]}):null,(null==z?void 0:z.length)?(0,i.BX)(d.G,{css:P.userGroup.root,children:[(0,i.tZ)(A,{title:"Offline",count:z.length||0,color:m.TV.outlineStrongest}),null==z?void 0:z.map(function(e){return e?(0,i.tZ)(I.Z,{canEditMultiplayers:F,isPendingInvitation:!1,user:e,replId:u},e.id):null})]}):null,(null==U?void 0:U.multiplayerInvites.length)?(0,i.BX)(d.G,{css:P.userGroup.root,children:[(0,i.tZ)(A,{title:"Pending Invitations",count:(null==U?void 0:U.multiplayerInvites.length)||0,color:m.TV.outlineStrongest}),U.multiplayerInvites.map(function(e){return(0,i.tZ)(I.Z,{canEditMultiplayers:F,replId:u,isPendingInvitation:!0,email:e.email},e.email)})]}):null]})]})}},28109:function(e,t,n){n.d(t,{Z:function(){return I}});var r=n(3796),i=n(59325),o=n(66626),a=n(25722),l=n(99595),c=n(41733),s=n(21262),u=n(71440),d=n(77317),f=n(82303);function h(){var e=(0,s._)(["\n  mutation RemoveMultiplayerUser($replId: String!, $username: String!) {\n    removeMultiplayerUser(replId: $replId, username: $username) {\n      id\n      user {\n        id\n        ...MultiplayerUser\n      }\n      repl {\n        id\n        collaborators {\n          user {\n            ...MultiplayerUser\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return h=function(){return e},e}function p(){var e=(0,s._)(["\n  mutation DeleteMultiplayerInvite($replId: String!, $email: String!) {\n    deleteMultiplayerInvite(replId: $replId, email: $email) {\n      ... on MultiplayerInvite {\n        email\n        type\n        repl {\n          id\n          collaborators {\n            user {\n              ...MultiplayerUser\n            }\n          }\n          multiplayerInvites {\n            email\n            type\n          }\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}var m={},v=(0,u.Ps)(h(),d.U4),g=(0,u.Ps)(p(),d.U4),y=function(){var e,t,n=(0,l.Z)(),r=n.showConfirm,i=n.showError,s=function(e,t){a.n_({message:t}),a.Tb(Error(e.message)),i("Something unexpected happened, please try again.")},u=(0,o._)((e=(0,c._)({},m,{onError:function(e){return s(e,"useRemoveMultiplayerUser")},onCompleted:function(e){var t,n=null===(t=e.removeMultiplayerUser.user)||void 0===t?void 0:t.username;n?r("@".concat(n," removed")):r("User removed")}}),f.D(v,e)),2),d=u[0],h=u[1].loading,p=(0,o._)((t=(0,c._)({},m,{onError:function(e){return s(e,"useDeleteMultiplayerInviteMutation")},onCompleted:function(e){if("UserError"===e.deleteMultiplayerInvite.__typename){i(e.deleteMultiplayerInvite.message);return}if("MultiplayerInvite"===e.deleteMultiplayerInvite.__typename){var t=e.deleteMultiplayerInvite.email;r("Invite canceled for ".concat(t))}}}),f.D(g,t)),2);return{removeMultiplayerUser:d,loadingRemoveUser:h,deleteMultiplayerInvite:p[0],loadingDeleteInvite:p[1].loading}},b=n(9602),w=n(24766),Z=n(10539),x=n(93245),C=n(36809),k=n(56981),S=n(7935),_=n(63163),E=n(4204),T=n(9834),R=n.n(T),D=(0,C.X)({root:[_.l0.px(16),_.l0.py(4),_.l0.flex.row,_.l0.rowWithGap(8),_.l0.align.center,_.l0.cursor.default,_.l0.justify.spaceBetween],userContainer:_.l0.color.foregroundDefault,userContainer_pending:[_.l0.flex.grow(1),_.l0.flex.row,_.l0.rowWithGap(8),_.l0.align.center,{fontStyle:"italic"}],permissionsContainer:[_.l0.flex.row,_.l0.rowWithGap(8),_.l0.align.center]}),I=function(e){var t,n=e.isPendingInvitation,o=e.canEditMultiplayers,a=e.replId,l=y(),c=l.removeMultiplayerUser,s=l.loadingRemoveUser,u=l.deleteMultiplayerInvite,d=l.loadingDeleteInvite,f=!n,h=f?(0,r.tZ)(i.Z,{size:"m",url:e.user.image,username:e.user.username,fullName:e.user.fullName}):(0,r.tZ)(k.Z,{color:_.TV.outlineDefault,size:32}),p=f?e.user.username:e.email;return(0,r.BX)(x.G,{css:D.root,children:[f?(0,r.tZ)(E.Z,{username:e.user.username,children:(0,r.tZ)(R(),{legacyBehavior:!0,href:"/@".concat(e.user.username),passHref:!0,children:(0,r.tZ)(x.G,{tag:"a",css:D.userContainer,children:(0,r.tZ)(Z.n,{username:e.user.username,src:null!==(t=e.user.image)&&void 0!==t?t:null})})})}):(0,r.BX)(x.G,{css:[D.userContainer_pending],children:[h,(0,r.tZ)(w.xv,{color:f?"default":"dimmest",multiline:!1,children:p})]}),(0,r.BX)(x.G,{css:D.permissionsContainer,children:[(0,r.tZ)(w.xv,{color:"dimmest",variant:"small",multiline:!1,children:e.isPendingInvitation?"Invited":"Can edit"}),o?(0,r.tZ)(b.hU,{alt:f?"Remove member":"Cancel invitation",onClick:function(){!o||s||d||(f?c({variables:{replId:a,username:e.user.username}}):u({variables:{replId:a,email:e.email}}))},children:(0,r.tZ)(S.Z,{size:12})}):null]})]})}},26456:function(e,t,n){n.d(t,{Z:function(){return _}});var r=n(41733),i=n(30509),o=n(66626),a=n(3796),l=n(59325),c=n(46954),s=n(99595),u=n(79904),d=n(44935),f=n(14548),h=n(24766),p=n(93245),m=n(36809),v=n(27840),g=n(10578),y=n(63163),b=n(31089),w=n(43133),Z=n(75271),x=n(14709),C=n.n(x),k=n(73833),S=(0,m.X)({form:[y.l0.align.start,y.l0.display.flex,y.l0.rowWithGap(8),y.l0.width("100%")],searchContainer:[y.l0.position.relative,y.l0.flex.growAndShrink(1)],dropdownMenu:[y.l0.borderRadius(8),y.l0.overflow("hidden"),y.l0.mt(2),y.l0.zIndex(2),y.l0.border({color:y.TV.outlineDimmer,width:1,style:"solid"}),y.l0.maxHeight(280),y.l0.overflowY("auto"),y.l0.scrollbar.thin,{scrollbarColor:y.TV.backgroundHigher+" "+y.TV.backgroundHighest,"&::-webkit-scrollbar-thumb":{backgroundColor:y.TV.backgroundHighest}}],result:[y.l0.p(8),y.l0.rowWithGap(8),y.l0.justify.spaceBetween,y.l0.align.center,y.l0.cursor.pointer],result_active:[y.l0.backgroundColor.accentPrimaryDimmer],userContainer:[y.l0.rowWithGap(8),y.l0.align.center],loadingContainer:[y.l0.align.center,y.l0.m(8),y.l0.rowWithGap(8),y.l0.align.center],emptyText:[y.l0.m(8)]});function _(e){var t=e.onSubmit,n=e.existingUsernames,m=e.isDisabled,x=e.onChange,_=e.placeholder,E=(0,o._)((0,Z.useState)(""),2),T=E[0],R=E[1],D=(0,b.U)(),I=(0,c.Z)(T.trim().replace(/^@/,""),250),B=(0,k.sk)({skip:!I||C()(T),variables:{query:I,limit:6}}),G=B.data,P=B.loading,A=B.error,L=(0,s.Z)().showError;(0,Z.useEffect)(function(){A&&L(A.message)},[A,L]);var N=null==G?void 0:G.usernameSearch,O=function(e){R(e.currentTarget.value),null==x||x(e.currentTarget.value)},U=function(e){"Enter"===e.key&&T.match(/.+@.+/)&&(t(T),R(""),e.currentTarget.blur())};return(0,a.BX)("form",{onSubmit:function(e){e.preventDefault(),t(T),R("")},css:S.form,children:[(0,a.tZ)(w.ZP,{onChange:function(e){e&&R(e.username)},itemToString:function(e){return(null==e?void 0:e.username)||""},initialHighlightedIndex:0,defaultHighlightedIndex:0,children:function(e){var t=e.getInputProps,o=e.getItemProps,c=e.getMenuProps,s=e.isOpen,u=e.highlightedIndex,m=e.getRootProps;return(0,a.BX)(p.G,(0,i._)((0,r._)({css:S.searchContainer},m({refKey:"innerRef"})),{children:[(0,a.tZ)(d.II,(0,r._)({id:D("username-search")},t({ref:null,value:T,onChange:O,placeholder:null!=_?_:"Add people by username or email",autoComplete:"off",onKeyDown:U}))),s?(0,a.BX)(p.G,{children:[N&&N.length?(0,a.tZ)(f.Tg,(0,i._)((0,r._)({elevated:!0,css:S.dropdownMenu,tag:"ul"},c({refKey:"innerRef"})),{children:N.map(function(e,t){return(0,a.BX)(p.G,(0,i._)((0,r._)({tag:"li"},o({item:e,index:t})),{css:[S.result,t===u&&S.result_active],children:[(0,a.BX)(p.G,{css:S.userContainer,children:[(0,a.tZ)(l.Z,{size:"m",url:e.image,username:e.username,fullName:e.fullName}),(0,a.tZ)(h.xv,{multiline:!1,children:e.username})]}),n.includes(e.username)?(0,a.tZ)(p.G,{children:(0,a.tZ)(v.Z,{color:y.TV.accentPositiveStronger})}):null]}),t)})})):null,P?(0,a.tZ)(f.Tg,{elevated:!0,css:S.dropdownMenu,children:(0,a.BX)(p.G,{css:S.loadingContainer,children:[(0,a.tZ)(g.Z,{}),(0,a.tZ)(h.xv,{color:"dimmer",multiline:!1,children:"Loading"})]})}):null,N&&0===N.length?(0,a.tZ)(f.Tg,{elevated:!0,css:S.dropdownMenu,children:(0,a.BX)(h.xv,{css:S.emptyText,color:"dimmer",multiline:!1,children:['No results found for "',T,'"']})}):null]}):null]}))}}),(0,a.tZ)(p.G,{children:(0,a.tZ)(u.zx,{colorway:"primary",type:"submit",disabled:m||!T,text:"Invite"})})]})}},33628:function(e,t,n){n.d(t,{m:function(){return Z}});var r=n(66626),i=n(16155),o=n(37782),a=n(65117),l=n(23882),c=n(41733),s=n(21262),u=n(71440),d=n(91476),f=n(82303);function h(){var e=(0,s._)(["\n  subscription StartOrgReplPresenceSession(\n    $input: StartOrgReplPresenceSessionInput!\n  ) {\n    startOrgReplPresenceSession(input: $input)\n  }\n"]);return h=function(){return e},e}function p(){var e=(0,s._)(["\n  mutation PingOrgReplPresenceSession(\n    $input: PingOrgReplPresenceSessionInput!\n  ) {\n    pingOrgReplPresenceSession(input: $input)\n  }\n"]);return p=function(){return e},e}var m={},v=(0,u.Ps)(h()),g=(0,u.Ps)(p()),y=n(75271),b=n(85234),w=n.n(b);function Z(){var e,t,n,s=arguments.length>0&&void 0!==arguments[0]&&arguments[0],u=(0,i.Z)(),h=(0,y.useRef)(w()()),p=(0,l.Z)().container,b=(0,a.Z)(p),Z=(0,r._)((e=(0,c._)({},m,void 0),f.D(g,e)),1)[0],x=b!==o.em.CONNECTED||s;(0,y.useEffect)(function(){var e=!1;if(!x&&b===o.em.CONNECTED){var t=null;return function n(){Z({variables:{input:{sessionId:h.current}},onCompleted:function(){e||(t=setTimeout(n,1e4))}})}(),function(){e=!0,t&&clearTimeout(t)}}},[b,h,Z,x]),t={variables:{input:{replId:u,sessionId:h.current}},skip:x},n=(0,c._)({},m,t),d.m(v,n)}},34586:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(31417),i=n(27387),o=n(66626),a=n(96583),l=n(40703),c=n(49500);function s(){var e;return(0,l.C)((e=(0,i._)(function(e,t){var n,i,l,s,u,d,f,h,p,m,v;return(0,a.Jh)(this,function(e){switch(e.label){case 0:return n=t.addCleanup,[3,13];case 1:l=(i=o._.apply(void 0,[e.sent(),2]))[0],s=i[1],n(s),u=!1,d=!1,e.label=2;case 2:e.trys.push([2,7,8,13]),h=(0,r._)(l),e.label=3;case 3:return[4,h.next()];case 4:if(!(u=!(p=e.sent()).done))return[3,6];(m=p.value).ok&&c.log("[pid2]: ".concat(m.payload.message)),e.label=5;case 5:return u=!1,[3,3];case 6:return[3,13];case 7:return v=e.sent(),d=!0,f=v,[3,13];case 8:if(e.trys.push([8,,11,12]),!(u&&null!=h.return))return[3,10];return[4,h.return()];case 9:e.sent(),e.label=10;case 10:return[3,12];case 11:if(d)throw f;return[7];case 12:return[7];case 13:return[2]}})}),function(t,n){return e.apply(this,arguments)}),[]),null}},1716:function(e,t,n){n.d(t,{D:function(){return i},u:function(){return o}});var r=n(96949);function i(){(0,r.j)(r.U3.MODAL_VIEWED,{modalName:"projects_help_dialog"})}function o(e){(0,r.j)(r.U3.GIT_PROJECT_FEATURE_USED,e)}},77876:function(e,t,n){n.d(t,{F:function(){return c}});var r=n(66626),i=n(80863),o=n(85983),a=n(75271),l=function(e){var t,n,r,i=e.orgId,a=e.repl,l=e.forkSource;return{originId:a.id,teamId:null,title:null,description:null,isPrivate:!0,forkToPersonal:null,replReleaseId:null!==(r=null===(n=a.deployment)||void 0===n?void 0:null===(t=n.activeRelease)||void 0===t?void 0:t.id)&&void 0!==r?r:void 0,orgId:i,trackingData:{forkSource:l,isOnboarding:!1,isApp:a.publishedAs===o.O2.App,isTemplate:a.publishedAs===o.O2.Template}}};function c(e){var t=e.onFork,n=e.onError,o=(0,r._)((0,i.Z)({navigateAfterFork:!0,replLinkOptions:{projectPane:!0},onFork:function(){t()},onError:function(){n()}}),2),c=o[0],s=o[1].loading;return[(0,a.useCallback)(function(e){var t=e.repl;return c(l({orgId:e.orgId,repl:t,forkSource:e.forkSource}))},[c]),{loading:s}]}},89549:function(e,t,n){n.d(t,{e9:function(){return h},wd:function(){return d}});var r=n(41733),i=n(21262),o=n(71440),a=n(48574),l=n(9122);function c(){var e=(0,i._)(["\n  fragment PublishReleaseFormRepl on Repl {\n    id\n    title\n    description\n    slug\n    user {\n      username\n    }\n    ...PublishedReplShareInfoReplData\n    deployment {\n      id\n      activeRelease {\n        id\n      }\n    }\n    releases {\n      items {\n        id\n        timeCreated\n        description\n        initialLayoutState\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}function s(){var e=(0,i._)(["\n  query PublishReleaseFormCurrentUser {\n    currentUser {\n      id\n      username\n    }\n  }\n"]);return s=function(){return e},e}var u={},d=(0,o.Ps)(c(),a.B),f=(0,o.Ps)(s());function h(e){var t=(0,r._)({},u,e);return l.a(f,t)}},33470:function(e,t,n){n.d(t,{O:function(){return k},Z:function(){return x}});var r=n(41733),i=n(30509),o=n(63257),a=n(3796),l=n(62279),c=n(43769),s=n(48718),u=n(30851),d=n(15023),f=n(6065),h=n(14548),p=n(24766),m=n(93245),v=n(39290),g=n(63163),y=n(9834),b=n.n(y),w=m.K.a,Z=(0,l.iv)({"::after":{content:'""',position:"absolute",top:0,right:0,bottom:0,left:0,display:"block",zIndex:1}});function x(e){var t=e.post,n=t.repl,o=t.user,l=n.isTemplate?"Template":"Repl";return(0,a.BX)(m.G,{css:g.l0.colWithGap(8),children:[(0,a.BX)(m.G,{css:[g.l0.flex.row,g.l0.align.center,g.l0.justify.spaceBetween],children:[(0,a.tZ)(m.G,{css:[g.l0.flex.row,g.l0.align.center],children:(0,a.BX)(m.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,a.tZ)(f.q,{size:24,username:o.username,src:o.image}),(0,a.BX)(m.G,{css:g.l0.rowWithGap(4),children:[(0,a.tZ)(p.xv,{multiline:!1,children:o.username}),(0,a.BX)(p.xv,{color:"dimmest",multiline:!1,children:[" ","published a ",l]})]})]})}),(0,a.tZ)(v.Z,{size:12})]}),(0,a.BX)(h.Tg,{css:[g.l0.borderRadius(8),g.l0.colWithGap(8),g.l0.p(8),g.l0.position.relative,{border:"1px solid "+g.TV.outlineDimmest}],children:[(0,a.tZ)(m.G,{css:[g.l0.colWithGap(16)],children:(0,a.tZ)(m.G,{css:[g.l0.rowWithGap(16),g.l0.justify.spaceBetween],children:(0,a.BX)(m.G,{css:[g.l0.rowWithGap(8),g.l0.align.start,g.l0.flex.growAndShrink(1)],children:[(0,a.tZ)(d.ZP,{iconUrl:n.iconUrl,alt:n.title,size:84,css:[g.l0.backgroundColor.backgroundHigher]}),(0,a.BX)(m.G,{css:[g.l0.flex.growAndShrink(1),g.l0.colWithGap(4)],children:[(0,a.BX)(m.G,{css:[g.l0.flex.row],children:[(0,a.tZ)(b(),(0,i._)((0,r._)({legacyBehavior:!0,passHref:!0},(0,c.j3)(n)),{children:(0,a.tZ)(w,{css:[{color:"inherit"},Z,g.l0.flex.growAndShrink(1),g.l0.minWidth(0)],onClick:function(e){return e.preventDefault()},children:(0,a.tZ)(p.xv,{variant:"subheadBig",multiline:!1,children:n.title})})})),n.isTemplate?(0,a.tZ)(C,{}):null]}),n.description?(0,a.tZ)(p.xv,{color:"dimmer",maxLines:2,multiline:!1,children:n.description}):null]})]})})}),(0,a.BX)(m.G,{css:[g.l0.rowWithGap(8),g.l0.justify.spaceBetween,g.l0.minHeight(24)],children:[(0,a.tZ)(u.Z,{repl:{id:n.id,publicForkCount:0,likeCount:0}}),(0,a.tZ)(m.G,{css:[g.l0.position.relative,{zIndex:1},g.l0.flex.shrink(1)],children:(0,a.tZ)(s.fv,{tags:n.tags})})]})]})]})}var C=function(){return(0,a.tZ)("span",{css:[g.l0.display.inlineFlex,g.l0.align.center,g.l0.height(24),g.l0.px(8),g.l0.borderRadius(16),g.l0.backgroundColor.yellowDimmest,g.l0.color.yellowStrongest,g.l0.justify.center,g.l0.ml(8),{fontSize:g.TV.fontSizeSmall,lineHeight:g.TV.fontSizeSmall}],children:"Template"})},k=function(){return(0,a.BX)(m.G,{css:[g.l0.colWithGap(8),{opacity:.5}],children:[(0,a.BX)(m.G,{css:[g.l0.flex.row,g.l0.align.center,g.l0.flex.grow(1),g.l0.justify.spaceBetween],children:[(0,a.BX)(m.G,{css:[g.l0.rowWithGap(8),g.l0.align.center],children:[(0,a.tZ)("span",{css:[g.l0.backgroundColor.backgroundHigher,g.l0.width(24),g.l0.height(24),g.l0.borderRadius(16)]}),(0,a.tZ)("span",{css:[g.l0.backgroundColor.backgroundHigher,g.l0.width(126),g.l0.height(12),g.l0.borderRadius(4)]})]}),(0,a.tZ)("span",{css:[g.l0.backgroundColor.backgroundHigher,g.l0.width(12),g.l0.height(12),g.l0.borderRadius(8)]})]}),(0,a.BX)(m.G,{css:[g.l0.backgroundColor.backgroundDefault,g.l0.width("100%"),g.l0.height(132),g.l0.borderRadius(8),g.l0.colWithGap(8),g.l0.p(8)],children:[(0,a.BX)(m.G,{css:g.l0.rowWithGap(8),children:[(0,a.tZ)("span",{css:[g.l0.backgroundColor.backgroundHigher,g.l0.height(84),g.l0.width(84),g.l0.borderRadius(4)]}),(0,a.BX)(m.G,{css:[g.l0.colWithGap(12),g.l0.pt(4),g.l0.flex.grow(1)],children:[(0,a.tZ)("span",{css:[g.l0.backgroundColor.backgroundHigher,g.l0.width(80),g.l0.height(16),g.l0.borderRadius(4)]}),(0,a.BX)(m.G,{css:g.l0.colWithGap(8),children:[(0,a.tZ)("span",{css:[g.l0.backgroundColor.backgroundHigher,g.l0.width("100%"),g.l0.height(12),g.l0.borderRadius(4)]}),(0,a.tZ)("span",{css:[g.l0.backgroundColor.backgroundHigher,g.l0.width("80%"),g.l0.height(12),g.l0.borderRadius(4)]})]})]})]}),(0,a.BX)(m.G,{css:[g.l0.flex.row,g.l0.flex.grow(1),g.l0.align.center,g.l0.justify.spaceBetween],children:[(0,a.tZ)(m.G,{css:g.l0.rowWithGap(16),children:(0,o._)([,,,]).map(function(e,t){return(0,a.BX)(m.G,{css:[g.l0.rowWithGap(4),g.l0.align.center],children:[(0,a.tZ)("span",{css:[g.l0.backgroundColor.backgroundHigher,g.l0.width(12),g.l0.height(12),g.l0.borderRadius(8)]}),(0,a.tZ)("span",{css:[g.l0.backgroundColor.backgroundHigher,g.l0.width(16),g.l0.height(8),g.l0.borderRadius(2)]})]},t)})}),(0,a.tZ)(m.G,{css:g.l0.rowWithGap(4),children:(0,o._)([,,]).map(function(e,t){return(0,a.tZ)("span",{css:[g.l0.backgroundColor.backgroundHigher,g.l0.width(48),g.l0.height(24),g.l0.borderRadius(16)]},t)})})]})]})]})}},92678:function(e,t,n){n.d(t,{Z:function(){return d},_:function(){return p}});var r=n(66626),i=n(3796),o=n(82549),a=n(63163),l=n(7420),c=n(55621),s=n(42704),u=n(75271);function d(e){var t=(0,r._)((0,u.useState)(!1),2),n=t[0],o=t[1],a=[],d=[];if(e.variables.length>0){var f=e.variables[0].parentVariableReference,h=!0,m=!1,v=void 0;try{for(var g,y=e.variables[Symbol.iterator]();!(h=(g=y.next()).done);h=!0){var b=g.value;b.parentVariableReference===f?a.push(b):d.push(b)}}catch(e){m=!0,v=e}finally{try{h||null==y.return||y.return()}finally{if(m)throw v}}}return(0,i.BX)(i.HY,{children:[(0,i.tZ)(c.Z,{truncate:!0,level:5,children:"Variables"}),(0,i.BX)(s.gC,{align:"stretch",constrainWidth:!0,children:[a.map(function(t){return(0,i.tZ)(p,{depth:0,variable:t,client:e.client},t.parentVariableReference+"/"+t.name)}),d.length>0&&(0,i.BX)(i.HY,{children:[(0,i.BX)(l.Z,{filled:!1,border:!1,onClick:function(){return o(function(e){return!e})},children:["See ",n?"Less":"More"]}),n&&d.map(function(t){return(0,i.tZ)(p,{depth:0,variable:t,client:e.client},t.parentVariableReference+"/"+t.name)})]})]})]})}function f(e){var t=e.variable,n=e.expanded;return t.variablesReference>0?(0,i.tZ)("div",{css:[a.l0.transition.snappy,{transform:"rotate(".concat(n?0:-90,"deg)")}],children:(0,i.tZ)(o.Z,{})}):null}function h(e){var t=e.expanded,n=e.depth,r=e.variable;return 0!==n||"parentVariableReference"in r?(0,i.tZ)("div",{css:[a.l0.flex.grow(0),a.l0.flex.shrink(0),a.l0.width(a.TV.space16),a.l0.display.flex,a.l0.align.center,a.l0.justify.end],children:(0,i.tZ)(f,{expanded:t,variable:r})}):(0,i.tZ)(f,{expanded:t,variable:r})}function p(e){var t=e.depth,n=e.variable,o=e.client,a=(0,r._)((0,u.useState)(!1),2),l=a[0],c=a[1],d=(0,r._)((0,u.useState)([]),2),f=d[0],m=d[1];return(0,u.useEffect)(function(){l&&o.fetchVariables(n.variablesReference).then(function(e){return m(e)},function(){return c(!1)})},[l,o,n.variablesReference]),(0,i.BX)(i.HY,{children:[(0,i.BX)("div",{className:"variable",onClick:function(){n.variablesReference>0&&c(function(e){return!e})},css:{"&":{display:"flex",alignItems:"center",maxWidth:"100%",height:"var(--space-32)",minHeight:"var(--space-32)",cursor:"pointer",color:"var(--foreground-dimmer)",borderRadius:"var(--border-radius-4)",fontSize:"var(--font-size-default)",paddingLeft:"calc(".concat(t," * var(--space-16))"),fontFamily:"var(--font-family-code)"},"&:hover":{backgroundColor:"var(--background-higher)",color:"var(--foreground-default)"},".label":{fontSize:"var(--font-size-default)",paddingLeft:"var(--space-8)",paddingRight:"var(--space-8)",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:"1 0 auto"},".type":{opacity:"0.5"},".value":{textAlign:"right",flexShrink:1}},children:[(0,i.tZ)(h,{expanded:l,variable:n,depth:t}),(0,i.BX)("div",{className:"label",children:[n.name,n.type?(0,i.BX)("span",{className:"type",children:[" ",n.type]}):null,""!==n.value&&": "]}),(0,i.tZ)("div",{className:"label value",children:(0,i.tZ)("pre",{children:n.value})})]}),l?(0,i.tZ)(s.gC,{align:"stretch",constrainWidth:!0,children:f.map(function(e){return(0,i.tZ)(p,{depth:t+1,variable:e,client:o},"parentVariableReference"in e?e.parentVariableReference+"/"+e.name:e.name)})}):null]})}},90744:function(e,t,n){n.d(t,{cp:function(){return Z},UQ:function(){return w},od:function(){return x}});var r=n(21262),i=n(71440),o=n(71793);function a(){var e=(0,r._)(["\n  fragment WorkspaceHeaderComputeAlertCurrentUser on CurrentUser {\n    id\n    userSubscriptionType\n  }\n"]);return a=function(){return e},e}function l(){var e=(0,r._)(["\n  fragment WorkspaceHeaderComputeAlertRepl on Repl {\n    id\n    owner {\n      __typename\n      ... on User {\n        id\n      }\n    }\n  }\n"]);return l=function(){return e},e}var c=(0,i.Ps)(a()),s=(0,i.Ps)(l()),u=n(56250);function d(){var e=(0,r._)(["\n  fragment ReplEnvironmentHeaderLeftCurrentUser on CurrentUser {\n    id\n    isFirewallMode\n    ...WorkspaceHeaderComputeAlertCurrentUser\n  }\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,r._)(["\n  fragment ReplEnvironmentHeaderLeftRepl on Repl {\n    id\n    slug\n    url\n    ...WorkspaceHeaderReplMetadataRepl\n    ...WorkspaceHeaderComputeAlertRepl\n  }\n  ","\n  ","\n"]);return f=function(){return e},e}var h=(0,i.Ps)(d(),c),p=(0,i.Ps)(f(),u.s,s),m=n(17878),v=n(63769);function g(){var e=(0,r._)(['\n  fragment ReplEnvironmentDesktopCurrentUser on CurrentUser {\n    id\n    image\n    isFirewallMode\n    isAdmin: hasRole(role: ADMIN)\n    ...CrosisContextCurrentUser\n    workspacePreferences\n    ...ReplEnvironmentHeaderLeftCurrentUser\n    ...ReplEnvironmentTourCurrentUser\n    ...LayoutHeaderAvatarDropdownCurrentUser\n    canMigrateRepls: gate(feature: "migrate2nix-killswitch")\n  }\n  ',"\n  ","\n  ","\n  ","\n"]);return g=function(){return e},e}function y(){var e=(0,r._)(["\n  fragment ReplAiAuthorizations on ReplAuthorizations {\n    useBasicChat: useAiChat(model: basic) {\n      isAuthorized\n      code\n      message\n    }\n    useAdvancedChat: useAiChat(model: advanced) {\n      isAuthorized\n      code\n      message\n    }\n  }\n"]);return y=function(){return e},e}function b(){var e=(0,r._)(["\n  fragment ReplEnvironmentDesktopRepl on Repl {\n    id\n    title\n    layoutState\n    description\n    hostedUrl: hostedUrl(dotty: true)\n    isAlwaysOn\n    multiplayers {\n      id\n    }\n    origin {\n      id\n    }\n    config {\n      isVnc\n      isServer\n      isExtension\n    }\n    lesson {\n      id\n    }\n    rootOriginReplUrl\n    source {\n      release {\n        id\n        repl {\n          id\n        }\n      }\n    }\n    ...CrosisContextRepl\n    ...ReplEnvironmentHeaderLeftRepl\n    authorizations {\n      ...ReplAiAuthorizations\n    }\n  }\n  ","\n  ","\n  ","\n"]);return b=function(){return e},e}var w=(0,i.Ps)(g(),o.D,h,m.f,v.z),Z=(0,i.Ps)(y()),x=(0,i.Ps)(b(),o.C,p,Z)},64993:function(e,t,n){n.d(t,{M:function(){return i}});var r=n(18557),i={overlay:r.Is+20,gutterActive:r.Is+19,maximizedTooltip:r.Is+18,maximizedPane:r.Is+17,maximizedHeader:r.Is+16,filetreeDragLayer:17,detachPreview:16,draggingPane:15,draggingHeader:14,floatingPaneActive:11,floatingHeaderActive:10,floatingPane:9,floatingHeader:8,dropPreview:7,gutterHovered:6,tiledPaneActive:5,tiledHeaderActive:4,tiledPane:3,tiledHeader:2,gutter:1}},17878:function(e,t,n){n.d(t,{f:function(){return l},z:function(){return c}});var r=n(21262),i=n(71440);function o(){var e=(0,r._)(['\n  fragment ReplEnvironmentTourCurrentUser on CurrentUser {\n    id\n    hasSeenOldWorkspaceTour: tourSeen(name: "workspace-desktop-tour")\n    hasSeenOldSidebarTour: tourSeen(name: "workspace-desktop-sidebar-tour")\n  }\n']);return o=function(){return e},e}function a(){var e=(0,r._)(["\n  fragment ReplEnvironmentTourRepl on Repl {\n    id\n    lesson {\n      id\n    }\n  }\n"]);return a=function(){return e},e}var l=(0,i.Ps)(o()),c=(0,i.Ps)(a())},73581:function(e,t,n){n.d(t,{y:function(){return i},Q:function(){return d}});var r,i,o=n(3796),a=n(24766),l=n(93245),c=n(63163);function s(e){var t=e.src,n=e.autoPlay,r=e.loop,i=e.width;return(0,o.tZ)(l.G,{css:[c.l0.p(4),c.l0.borderRadius(8),c.l0.width(void 0===i?280:i),c.l0.backgroundColor.backgroundRoot,{border:"solid 1px ".concat(c.TV.outlineDimmest)}],children:(0,o.tZ)("video",{style:{width:"100%"},css:c.l0.borderRadius(8),src:t,autoPlay:void 0===n||n,loop:void 0===r||r,playsInline:!0,muted:!0})})}(r=i||(i={})).Welcome="Welcome",r.Editor="Editor",r.Examples="Examples",r.Run="Run",r.Output="Output",r.Sidepane="Sidepane",r.Share="Share";var u=function(e){return"/public/videos/workspace-onboarding/".concat(e,".mp4")},d={id:"workspace-desktop-new-user-tour",steps:[{id:"Welcome",isModal:!0,title:"Welcome to the Workspace",content:function(){return(0,o.tZ)(l.G,{"data-cy":"workspace-tour-welcome",css:[c.l0.maxWidth(400)],children:(0,o.BX)(a.xv,{children:["The Workspace is where you create projects on Replit. These are called"," ",(0,o.tZ)("strong",{children:"Repls."}),(0,o.tZ)("br",{}),"Let's explore around!"]})})}},{id:"Editor",title:"Code Editor",content:function(){return(0,o.BX)(l.G,{css:[c.l0.width("100%"),c.l0.center,c.l0.position.relative],children:[(0,o.tZ)(s,{src:u("editor"),autoPlay:!0,loop:!0}),(0,o.tZ)(l.G,{css:[c.l0.colWithGap(8),c.l0.width("100%"),c.l0.py(8)],children:(0,o.tZ)(a.xv,{children:"This is where you write code. The editor helps you by giving you suggestions and coloring your code."})})]})}},{id:"Examples",title:"Examples",content:"Click on one of these examples to insert into your editor",autoSkipIfNoTarget:!0},{id:"Run",title:"Run Button",content:function(){return(0,o.BX)(l.G,{css:[c.l0.width("100%"),c.l0.center,c.l0.position.relative],children:[(0,o.tZ)(s,{src:u("run-button"),autoPlay:!0,loop:!0}),(0,o.tZ)(l.G,{css:[c.l0.colWithGap(8),c.l0.width("100%"),c.l0.py(8)],children:(0,o.tZ)(a.xv,{children:"Tap the Run button to run your code and see its output."})})]})}},{id:"Output",title:"Output",content:function(){return(0,o.BX)(l.G,{css:[c.l0.width("100%"),c.l0.center,c.l0.position.relative],children:[(0,o.tZ)(s,{src:u("output"),autoPlay:!0,loop:!0}),(0,o.tZ)(l.G,{css:[c.l0.colWithGap(8),c.l0.width("100%"),c.l0.py(8)],children:(0,o.tZ)(a.xv,{children:"This is where your run output appears. This can be text, websites, games, and more depending on the template youre using."})})]})}},{id:"Sidepane",title:"Sidebar",content:function(){return(0,o.BX)(l.G,{css:[c.l0.width("100%"),c.l0.center,c.l0.position.relative],children:[(0,o.tZ)(s,{src:u("sidebar"),autoPlay:!0,loop:!0}),(0,o.BX)(l.G,{css:[c.l0.colWithGap(8),c.l0.width("100%"),c.l0.p(8)],children:[(0,o.BX)(a.xv,{children:[(0,o.tZ)("strong",{children:"Files"})," is where all of your Repls code is."]}),(0,o.BX)(a.xv,{children:[(0,o.tZ)("strong",{children:"Tools"})," is where Packages, Debugger, Chat, Git, and more can be found."]}),(0,o.tZ)(a.xv,{children:"You can drag and drop any file or tool. All tools open as tabs instead of opening in the sidebar."})]})]})}},{id:"Share",title:"Invite & Collaborate",content:function(){return(0,o.BX)(l.G,{css:[c.l0.width("100%"),c.l0.center,c.l0.position.relative],children:[(0,o.tZ)(s,{src:u("invite-multiplayer"),autoPlay:!0,loop:!0}),(0,o.tZ)(l.G,{css:[c.l0.colWithGap(8),c.l0.width("100%"),c.l0.py(8)],children:(0,o.tZ)(a.xv,{children:"Invite others to your Repl to collaborate and work together at the same time."})})]})}}]}},48718:function(e,t,n){n.d(t,{ZP:function(){return S},fv:function(){return C},p0:function(){return k}});var r=n(41733),i=n(30509),o=n(3796),a=n(62279),l=n(43769),c=n(30851),s=n(29626),u=n(15023),d=n(6065),f=n(86466),h=n(14548),p=n(24766),m=n(93245),v=n(63163),g=n(4204),y=n(38865),b=n(9834),w=n.n(b);n(75271);var Z=m.K.a,x=(0,a.iv)([v.l0.focusRingOnAfter,{"::after":{borderRadius:v.TV.space8,content:'""',position:"absolute",top:0,right:0,bottom:0,left:0,display:"block",zIndex:1}}]);function C(e){var t=e.tags,n=e.maxVisible,r=t.slice(0,void 0===n?3:n),i=t.length-r.length;return(0,o.BX)(m.G,{css:[v.l0.rowWithGap(4),v.l0.align.center],children:[r.map(function(e){return(0,o.tZ)(s.c,{small:!0,tag:e},e.id)}),i>0?(0,o.BX)(p.xv,{variant:"small",color:"dimmest",multiline:!1,children:["+",i]}):null]})}function k(e){var t=e.repl,n=e.showOwner,a=e.maxVisibleTags,s=e.smallerTitle,f=e.onReplClick,h=e.onUserClick,b=t.owner;return(0,o.BX)(m.G,{css:[v.l0.colWithGap(16),v.l0.justify.spaceBetween,v.l0.height("100%")],children:[(0,o.BX)(m.G,{css:[v.l0.rowWithGap(8),v.l0.align.start,v.l0.flex.growAndShrink(1)],children:[(0,o.tZ)(u.ZP,{size:84,iconUrl:t.iconUrl,alt:t.title}),(0,o.BX)(m.G,{css:[v.l0.flex.growAndShrink(1),v.l0.colWithGap(4)],children:[(0,o.tZ)(w(),(0,i._)((0,r._)({legacyBehavior:!0,passHref:!0},(0,l.j3)(t)),{children:(0,o.tZ)(Z,{css:[{color:"inherit"},x],onClick:f,children:(0,o.tZ)(p.xv,{variant:s?"subheadDefault":"subheadBig",multiline:!1,children:t.title})})})),n&&b?(0,o.tZ)(m.G,{css:[{maxWidth:"fit-content",zIndex:1}],children:(0,o.tZ)(g.Z,{username:b.username,children:(0,o.tZ)(y.ZP,{user:b,children:(0,o.BX)(Z,{css:[{color:"inherit"},v.l0.rowWithGap(4),v.l0.align.center,v.l0.focusRing,{"&:focus":{outlineOffset:2}},v.l0.borderRadius(8)],onClick:h,children:[(0,o.tZ)(d.q,{src:b.image,username:b.username,size:16,layout:"intrinsic"}),(0,o.tZ)(p.xv,{multiline:!1,children:b.username})]})})})}):null,t.description?(0,o.tZ)(p.xv,{color:"dimmer",maxLines:2,css:[v.l0.maxWidth(450)],multiline:!1,children:t.description}):null]})]}),(0,o.BX)(m.G,{css:[v.l0.rowWithGap(8),v.l0.justify.spaceBetween,v.l0.flex.wrap],children:[(0,o.tZ)(c.Z,{css:[v.l0.pb(2)],repl:t}),a?(0,o.tZ)(m.G,{css:[v.l0.position.relative,v.l0.pt(2),{zIndex:1}],children:(0,o.tZ)(C,{tags:t.tags,maxVisible:a})}):null]})]})}function S(e){var t=e.repl,n=e.showOwner,r=e.maxVisibleTags,i=e.smallerTitle,a=e.onReplClick,l=e.onUserClick,c=e.dataCy;return(0,o.tZ)(h.Tg,{css:[v.l0.borderRadius(8),v.l0.p(8),v.l0.position.relative,f.gU.filledAndOutlined,{border:"1px solid "+v.TV.outlineDimmest}],dataCy:c,children:(0,o.tZ)(k,{repl:t,showOwner:n,maxVisibleTags:r,smallerTitle:i,onReplClick:a,onUserClick:l})})}},30851:function(e,t,n){n.d(t,{Z:function(){return h}});var r=n(3796),i=n(71051),o=n(96399),a=n(24766),l=n(93245),c=n(28065),s=n(63163);function u(e){var t=e.count,n=e.children,i=e.tooltip,u=e.small,d=(0,o.d)(t);return(0,r.BX)(l.G,{"aria-label":i,"data-microtip-position":"left",role:"tooltip",css:[s.l0.rowWithGap(4),s.l0.align.center,s.l0.color.foregroundDimmer,{userSelect:"none",lineHeight:1}],children:[(0,r.tZ)(c.jS,{size:u?12:void 0,children:n}),(0,r.tZ)(a.xv,{variant:u?"small":void 0,color:"dimmer",multiline:!1,children:d})]})}n(75271);var d=n(4135),f=n(39290);function h(e){var t=e.repl;return(0,r.BX)(l.G,{css:[s.l0.rowWithGap(16),s.l0.align.center],children:[(0,r.tZ)(u,{small:!0,count:t.publicForkCount,tooltip:(0,i.Z)("fork",t.publicForkCount),children:(0,r.tZ)(d.Z,{})}),(0,r.tZ)(u,{small:!0,count:t.likeCount,tooltip:(0,i.Z)("like",t.likeCount),children:(0,r.tZ)(f.Z,{})})]})}},29626:function(e,t,n){n.d(t,{c:function(){return m},g:function(){return g}});var r=n(3796),i=n(62279),o=n(86466),a=n(14548),l=n(24766),c=n(93245),s=n(7935),u=n(63163),d=n(76547);n(75271);var f=(0,i.iv)({border:"1px solid "+u.TV.accentPrimaryDefault,backgroundColor:"transparent"}),h=function(e){var t=e.isActive,n=e.small;return(0,i.iv)([u.l0.p(n?4:8),u.l0.align.center,u.l0.rowWithGap(4),u.l0.fontSize(12),t?f:o.gU.outlined,u.l0.borderRadius(16),{color:"inherit","&:active":f,height:n?"auto":u.TV.space32}])};function p(e){var t=e.tag,n=e.isActive,i=e.isRemovable,o=e.small,f=o?"small":"text";return(0,r.tZ)(a.Tg,{elevated:!0,css:[u.l0.borderRadius(16)],children:(0,r.BX)(a.Tg,{elevated:n,css:[h({isActive:n,small:o})],children:[(0,r.BX)(c.G,{css:[u.l0.flex.row,u.l0.align.center,u.l0.flex.shrink(1)],children:[(0,r.tZ)(l.xv,{variant:f,color:"dimmest",multiline:!1,children:"#"}),(0,r.tZ)(l.xv,{color:"dimmer",variant:f,css:[u.l0.flex.shrink(1)],multiline:!1,children:t.id})]}),t.isOfficial&&!o?(0,r.tZ)(d.Z,{}):null,i?(0,r.tZ)(s.Z,{size:o?12:16}):null]})})}function m(e){var t=e.tag,n=e.isActive,i=e.small;return(0,r.tZ)(p,{tag:t,isActive:n,small:i,isRemovable:n})}var v=c.K.button;function g(e){var t=e.tag,n=e.onClick,i=e.isActive,o=e.small;return(0,r.tZ)(v,{css:[u.l0.reset.button],onClick:n,children:(0,r.tZ)(p,{tag:t,isActive:i,small:o,isRemovable:!0})})}},25703:function(e,t,n){n.d(t,{W:function(){return g},Z:function(){return y}});var r=n(41733),i=n(30509),o=n(66626),a=n(3796),l=n(62372),c=n(98587),s=n(15023),u=n(14548),d=n(93245),f=n(89313),h=n(10578),p=n(78421),m=n(63163),v=n(75271);function g(e){var t=(0,o._)((0,v.useState)(null),2),n=t[0],a=t[1],c=(0,o._)((0,v.useState)(null),2),s=c[0],u=c[1],d=(0,l.Z)({onUpload:function(t){var n=t.url;a(null),e(n)},onUploadPreview:function(e){var t=e.dataUrl;u(null),a(t)},onError:function(e){a(null),u(e.message)}}),f=(0,v.useCallback)(function(){return u(null)},[]);return(0,i._)((0,r._)({},d),{error:s,clearError:f,previewUrl:n})}function y(e){var t=(0,v.useRef)(null),n=e.size||48;return(0,a.BX)(d.G,{css:[m.l0.position.relative,{cursor:"pointer","&:hover .surface":{opacity:.8},"&:hover .icon":{opacity:1}}],onClick:function(){var e;null===(e=t.current)||void 0===e||e.click()},"aria-label":e.value?"Change icon":"Upload an icon","data-microtip-position":"right",role:"tooltip",children:[e.value?(0,a.BX)(a.HY,{children:[(0,a.tZ)(s.ZP,{iconUrl:e.value,size:e.size,alt:"icon"}),(0,a.tZ)(u.Tg,{className:"surface",elevated:!0,css:[m.l0.borderRadius(8),m.l0.coverContainer,{opacity:e.isUploading?.8:0}]}),(0,a.tZ)(d.G,{className:"icon",css:[m.l0.coverContainer,m.l0.center,m.l0.color.accentPrimaryDefault,{overflow:"hidden",opacity:e.isUploading?1:0}],children:e.isUploading?(0,a.tZ)(h.Z,{}):(0,a.tZ)(f.Z,{})})]}):(0,a.tZ)(d.G,{css:[m.l0.center,m.l0.width(n),m.l0.height(n),m.l0.borderRadius(8),m.l0.color.foregroundDimmer,{border:"1px dashed "+m.TV.outlineDefault,"&:hover":{color:m.TV.accentPrimaryDefault,borderColor:m.TV.accentPrimaryDefault}}],children:(0,a.tZ)(p.Z,{})}),(0,a.tZ)("input",{css:[[m.l0.coverContainer,{opacity:0,zIndex:-1}]],ref:t,accept:c.W9.join(","),type:"file",onChange:function(t){var n=t.target,r=n.validity,i=n.files;if(r.valid){var o=i?i[0]:null;o&&e.onUpload(o)}}})]})}},89885:function(e,t,n){n.d(t,{d:function(){return l}});var r=n(21262),i=n(71440),o=n(80983);function a(){var e=(0,r._)(["\n  fragment BulkDeleteConfirmationModalRepl on Repl {\n    id\n    iconUrl\n    title\n    hostingDeployment {\n      ... on HostingDeployment {\n        id\n        replitAppSubdomain\n        ...BuildStatusBadgeHostingDeployment\n      }\n    }\n  }\n  ","\n"]);return a=function(){return e},e}var l=(0,i.Ps)(a(),o.u)},24562:function(e,t,n){var r=n(66626),i=n(3796),o=n(7830),a=n(71051),l=n(15023),c=n(79904),s=n(44935),u=n(58532),d=n(22893),f=n(24766),h=n(93245),p=n(36809),m=n(19602),v=n(54300),g=n(63163),y=n(75271),b=(0,p.X)({wrapper:[g.l0.colWithGap(16)],repls:[g.l0.maxHeight("60vh"),g.l0.overflow("auto"),{"& > div":[g.l0.py(8),{borderTop:"1px solid "+g.TV.outlineDimmest}],"& > div:last-of-type":{borderBottom:"1px solid "+g.TV.outlineDimmest}}],row:[g.l0.colWithGap(8)],replRow:[g.l0.rowWithGap(8),g.l0.align.center],additionalReplsCount:[g.l0.pl(12),g.l0.pt(8)],buttons:[g.l0.rowWithGap(12),g.l0.justify.end]}),w=function(e){var t,n=e.repl,a=e.onConfirmedChange,c=(0,r._)((0,y.useState)(""),2),u=c[0],p=c[1],m=(null===(t=n.hostingDeployment)||void 0===t?void 0:t.__typename)==="HostingDeployment"?n.hostingDeployment:null,g=(0,y.useRef)(!1),w=(null==m?void 0:m.replitAppSubdomain)?m.replitAppSubdomain:n.title;return(0,i.BX)(h.G,{css:b.row,children:[(0,i.BX)(h.G,{css:b.replRow,children:[(0,i.tZ)(l.ZP,{size:24,iconUrl:n.iconUrl,alt:""}),(0,i.tZ)(f.xv,{height:"singleLine",multiline:!1,children:n.title}),m?(0,i.tZ)(o.e,{deployment:m}):null]},n.id),m?(0,i.BX)(i.HY,{children:[(0,i.tZ)(d.E,{icon:(0,i.tZ)(v.Z,{}),colorway:"red",text:"This repl has been deployed. If you delete this Repl, the associated\nproduction deployment will also be shut down and deleted. To\nproceed, please type: ".concat(w)}),(0,i.tZ)(s.II,{placeholder:"Type here",value:u,onChange:function(e){var t=e.currentTarget.value;p(t);var n=t.trim()===w;n!==g.current&&a(n),g.current=n}})]}):null]})};t.Z=function(e){var t=e.selectedRepls,n=e.isOpen,o=e.onClose,l=e.onDelete,s=e.deleting,d=t.length,p=(0,a.Z)("Repl",d),v=t.filter(function(e){var t;return(null===(t=e.hostingDeployment)||void 0===t?void 0:t.__typename)==="HostingDeployment"}).length,g=(0,a.Z)("Deployment",v),Z=v>0?" & ".concat(v>1?v+" ":""," ").concat(g):"",x=(0,r._)((0,y.useState)(0),2),C=x[0],k=x[1];return(0,y.useEffect)(function(){n||k(0)},[n]),(0,i.tZ)(u.u,{isOpen:n,onRequestClose:o,children:(0,i.BX)(h.G,{css:b.wrapper,children:[(0,i.BX)(f.h4,{variant:"subheadBig",level:2,children:["Delete ",p,v>0?" & ".concat(g):"","?"]}),(0,i.tZ)(f.xv,{color:"dimmer",children:"Are you sure? This cannot be undone. Some Repls may take a few minutes to finish deleting."}),(0,i.tZ)(h.G,{css:b.repls,children:t.map(function(e){return(0,i.tZ)(w,{css:b.row,repl:e,onConfirmedChange:function(e){return k(function(t){return t+(e?1:-1)})}},e.id)})}),(0,i.BX)(h.G,{css:b.buttons,children:[(0,i.tZ)(c.zx,{text:"Cancel",onClick:o,disabled:s}),(0,i.tZ)(c.zx,{iconLeft:(0,i.tZ)(m.Z,{}),onClick:l,disabled:s||C<v,text:"Yes, delete ".concat(d>1?d+" ":""," ").concat(p).concat(Z),colorway:"negative"})]})]})})}},56632:function(e,t,n){n.d(t,{I:function(){return b}});var r=n(42516),i=n(41733),o=n(30509),a=n(98924),l=n(3796),c=n(99399),s=n(14074),u=n(9602),d=n(22419),f=n(93245),h=n(9834),p=n.n(h),m=n(75271),v=n(28065),g=f.K.a,y=m.forwardRef(function(e,t){var n,s=e.alt,d=e.children,f=e.colorway,h=e.disabled,m=e.size,y=void 0===m?u.Pl:m,b=e.triggerProps,w=e.as,Z=e.href,x=e.prefetch,C=e.replace,k=e.scroll,S=e.shallow,_=e.className,E=(0,a._)(e,["alt","children","colorway","disabled","size","triggerProps","as","href","prefetch","replace","scroll","shallow","className"]),T=(0,i._)({disabled:h,style:(n={},(0,r._)(n,u.Xm.height,y+"px"),(0,r._)(n,u.Xm.width,y+"px"),n),css:f?u.t1.get(f):u.uW,ref:t},(0,c.d)(E,b)),R=(0,l.tZ)(v.jS,{alt:s,size:u.cy[y],children:d});return h?(0,l.tZ)(g,(0,o._)((0,i._)({"aria-disabled":h,className:_,role:"link"},T),{children:R})):(0,l.tZ)(p(),(0,o._)((0,i._)({legacyBehavior:!0,passHref:!0},{as:w,href:Z,prefetch:x,replace:C,scroll:k,shallow:S}),{children:(0,l.tZ)(g,(0,o._)((0,i._)({className:_,role:"link"},T),{children:R}))}))}),b=m.forwardRef(function(e,t){var n=e.alt,r=e.tooltipDelay,o=e.tooltipBehavior,c=e.tooltipPlacement,u=e.tooltipContents,f=(0,a._)(e,["alt","tooltipDelay","tooltipBehavior","tooltipPlacement","tooltipContents"]);return(0,l.tZ)(d.u,{delay:r,isDisabled:"hidden"===o,tooltip:null!=u?u:n,placement:c,children:function(e,r){return(0,l.tZ)(y,(0,i._)({alt:n,ref:(0,s.l)(t,r),triggerProps:e},f))}})});b.displayName="IconButtonLink"},44134:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(3796);n(75271);var i=n(63163),o=n(14548);function a(e){var t=e.className,n=e.children;return(0,r.tZ)(o.Tg,{elevated:!0,tag:"span",css:[{display:"inline",lineHeight:1},i.l0.fontSize(i.TV.fontSizeSmall),i.l0.borderRadius(4),i.l0.px(4),i.l0.font.code,t],children:n})}},48088:function(e,t,n){var r=n(41733),i=n(30509),o=n(3796),a=n(62279),l=function(e){return{animationDuration:e?"2000ms":"800ms",animationIterationCount:"infinite",animationTimingFunction:"ease-in-out"}},c=(0,a.F4)("\n  0% { transform: translate(0px, 0px) }\n  25% { transform: translate(0px, 80px) }\n  50% { transform: translate(100px, 80px) }\n  75% { transform: translate(100px, 160px) }\n  100% { transform: translate(0px, 160px) }\n"),s=(0,a.F4)("\n  0% { transform: translate(0px, 0px) }\n  25% { transform: translate(0px, -80px) }\n  50% { transform: translate(-100px, -80px) }\n  100% { transform: translate(-100px, -80px) }\n"),u=(0,a.F4)("\n  0% { transform: translate(0px, 0px) }\n  50% { transform: translate(0px, 0px) }\n  75% { transform: translate(0px, -80px) }\n  100% { transform: translate(100px, -80px) }\n");t.Z=function(e){var t=e.height,n=void 0===t?24:t,a=e.color,d=e.slow,f=void 0!==d&&d,h={width:84,height:64,fill:void 0===a?"#F26207":a,rx:12};return(0,o.BX)("svg",{width:n/1.2,height:n,viewBox:"0 0 200 240",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":"loading-animation-title",children:[(0,o.tZ)("title",{id:"loading-animation-title",children:"loading animation"}),(0,o.tZ)("rect",(0,i._)((0,r._)({css:[l(f),{animationName:c}]},h),{x:8,y:8})),(0,o.tZ)("rect",(0,i._)((0,r._)({css:[l(f),{animationName:s}]},h),{x:108,y:88})),(0,o.tZ)("rect",(0,i._)((0,r._)({css:[l(f),{animationName:u}]},h),{x:8,y:168}))]})}},9164:function(e,t,n){n.d(t,{Z0:function(){return S},ZE:function(){return D},sN:function(){return R}});var r=n(41733),i=n(30509),o=n(98924),a=n(3796),l=n(99399),c=n(79904),s=n(86466),u=n(53286),d=n(41960),f=n(24766),h=n(93245),p=n(36809),m=n(29737),v=n(28065),g=n(63163),y=n(75271),b=n(48536),w=n(64888),Z=n(9305),x=n(29250),C=n(44794),k=(0,p.X)({menu:[g.l0.viewStyle,g.l0.maxHeight("inherit"),g.l0.overflowY("auto")],item:[g.l0.display.flex,g.l0.borderRadius(),g.l0.px(8),g.l0.py(6),g.l0.align.center,g.l0.rowWithGap(8),g.l0.color.foregroundDefault,g.l0.cursor.pointer,{transitionProperty:"background-color, box-shadow",backgroundColor:"transparent",borderWidth:1,borderStyle:"solid",borderColor:"transparent",outline:"2px solid ".concat(g.TV.accentPrimaryDefault),outlineOffset:"-2px",outlineColor:"transparent"},{"&[data-hovered],&[data-focused]":{backgroundColor:s.vb.interactiveBackground},"&[data-selected]":{backgroundColor:s.vb.interactiveBackgroundActive},"&[aria-disabled]":{color:g.TV.foregroundDimmest,cursor:"not-allowed"}}],itemInner:[g.l0.colWithGap(4)],popover:[g.l0.p(4),{minWidth:"var(--trigger-width)"}],separator:[g.l0.mx(4),g.l0.my(2),g.l0.height(1),g.l0.backgroundColor.backgroundHighest]}),S=y.forwardRef(function(e,t){return(0,a.tZ)(b.Z,(0,i._)((0,r._)({},e),{css:k.separator,ref:t}))}),_=y.forwardRef(function(e,t){var n=e.dataCy,i=(0,o._)(e,["dataCy"]);return(0,a.tZ)(w.v2,(0,r._)({ref:t,css:k.menu,"data-cy":n},i))}),E=y.forwardRef(function(e,t){var n=e.multiline,c=e.height,s=(0,o._)(e,["multiline","height"]),u=(0,Z.jn)(x.j,"label");return(0,a.tZ)(f.xv,(0,i._)((0,r._)({},(0,l.d)(u,{multiline:void 0!==n&&n,height:void 0===c?"singleLine":c},s)),{ref:t}))}),T=y.forwardRef(function(e,t){var n=e.multiline,c=e.height,s=e.variant,u=(0,o._)(e,["multiline","height","variant"]),d=(0,Z.jn)(x.j,"description");return(0,a.tZ)(f.xv,(0,i._)((0,r._)({},(0,l.d)(d,{multiline:void 0!==n&&n,height:void 0===c?"singleLine":c,variant:void 0===s?"small":s},u)),{ref:t}))}),R=y.forwardRef(function(e,t){var n=e.dataCy,l=e.label,c=e.description,s=e.icon,d=e.href,f=e.as,p=e.shallow,m=e.scroll,y=e.isDestructive,b=e.isDisabled,Z=(0,o._)(e,["dataCy","label","description","icon","href","as","shallow","scroll","isDestructive","isDisabled"]);return(0,a.tZ)(w.sN,(0,i._)((0,r._)((0,i._)((0,r._)({},Z),{css:k.item,ref:t,isDisabled:b,style:y?{color:g.TV.accentNegativeStronger}:void 0,"data-cy":n,textValue:l}),(0,u.N)({href:d,as:f,shallow:p,scroll:m})),{children:(0,a.BX)(a.HY,{children:[(0,a.tZ)(v.jS,{size:16,children:s}),(0,a.BX)(h.G,{css:k.itemInner,children:[(0,a.tZ)(E,{children:l}),c?(0,a.tZ)(T,{children:c}):null]})]})}))}),D=y.forwardRef(function(e,t){var n=e.children,l=e.label,s=e.trigger,u=e.defaultOpen,f=e.isOpen,h=e.onOpenChange,p=e.dataCy,v=e.elevated,g=e.background,y=e.placement,b=(0,o._)(e,["children","label","trigger","defaultOpen","isOpen","onOpenChange","dataCy","elevated","background","placement"]),Z=s||(0,a.tZ)(c.zx,{iconRight:(0,a.tZ)(m.Z,{}),text:null!=l?l:"",disabled:b.isDisabled});return(0,a.BX)(w.bF,(0,i._)((0,r._)({},{defaultOpen:u,isOpen:f,onOpenChange:h}),{children:[(0,a.tZ)(C.b.Provider,{value:{"data-cy":p},children:Z}),(0,a.tZ)(d.Bf,(0,i._)((0,r._)({},{elevated:void 0===v||v,background:g,placement:y}),{css:k.popover,noArrow:!0,children:(0,a.tZ)(_,(0,i._)((0,r._)({ref:t},b),{children:n}))}))]}))})},23271:function(e,t,n){n.d(t,{T:function(){return u}});var r=n(41733),i=n(30509),o=n(98924),a=n(3796);n(75271);var l=n(93245),c=n(379),s=l.K.button;function u(e){var t=e.iconLeft,n=e.iconRight,l=e.text,u=e.innerRef,d=e.colorway,f=(0,o._)(e,["iconLeft","iconRight","text","innerRef","colorway"]);return(0,a.BX)(s,(0,i._)((0,r._)({ref:u},f),{css:[(0,c.E)({colorway:d,clickable:!0,variant:"filled",iconLeft:!!t,iconRight:!!n}),{color:"inherit"}],children:[t,(0,a.tZ)("span",{children:l}),n]}))}},38799:function(e,t,n){n.d(t,{M:function(){return f}});var r=n(41733),i=n(30509),o=n(98924),a=n(3796),l=n(75271),c=n(24766),s=n(36809),u=n(63163),d=(0,s.X)({prose:[{"& ul, & ol":{marginLeft:16,paddingBlock:4},"& ul":{listStyle:"initial"},"& a":u.l0.linkStyle,"& h1, & h2, & h3":{display:"block",marginBottom:8},"& * + h1, & * + h2, & * + h3":{marginTop:8}}]}),f=function(e){var t=e.children,n=(0,o._)(e,["children"]);return(0,a.tZ)(c.xv,(0,i._)((0,r._)({multiline:!0,css:d.prose},n),{children:l.Children.map(t,function(e){return"string"==typeof e?(0,a.tZ)("span",{children:e}):e})}))}},76733:function(e,t,n){n.d(t,{O:function(){return p}});var r=n(3796),i=n(3488),o=n(33323),a=n(7935),l=n(44629),c=n(79904),s=n(68220),u=n(9602),d=n(24766),f=n(93245),h=n(63163);function p(e){var t=e.title,n=e.content,l=e.colorway,p=void 0===l?"primary":l,v=e.totalSteps,g=void 0===v?1:v,y=e.currentStepIndex,b=void 0===y?0:y,w=e.onDismiss,Z=e.onCurrentStepChange,x=e.cypressCloseData;return(0,r.BX)(f.G,{css:[h.l0.p(8),{paddingBottom:12,paddingRight:t?void 0:32,backgroundColor:s.Br[p].dimmest,border:"1px solid "+s.Br[p].dimmer,position:"relative"},h.l0.borderRadius(8),h.l0.shadow(2),h.l0.colWithGap(8)],children:[(0,r.tZ)(u.hU,{alt:"Close",colorway:p,css:{position:"absolute",top:h.TV.space8,right:h.TV.space8},onClick:w,dataCy:x,children:(0,r.tZ)(a.Z,{})}),t?(0,r.tZ)(d.xv,{variant:"subheadBig",multiline:!1,children:t}):null,"function"==typeof n?(0,r.tZ)(n,{}):(0,r.tZ)(d.xv,{children:n}),g>1&&Z?(0,r.BX)(f.G,{css:[h.l0.flex.row,h.l0.align.center,h.l0.justify.spaceBetween],children:[(0,r.tZ)(c.zx,{css:{visibility:b<=0?"hidden":void 0},colorway:p,text:"Back",iconLeft:(0,r.tZ)(i.Z,{}),onClick:function(){return Z(b-1)}}),(0,r.tZ)(m,{colorway:p,total:g,current:b}),(0,r.tZ)(c.zx,{"data-autofocus":!0,colorway:p,text:b>=g-1?"Done":"Next",iconLeft:(0,r.tZ)(o.Z,{}),onClick:function(){return b>=g-1?w():Z(b+1)}})]}):null]})}function m(e){var t=e.total,n=e.current,i=e.colorway;return(0,r.BX)(f.G,{children:[(0,r.tZ)(l.T,{children:(0,r.tZ)("progress",{value:n+1,max:t,"aria-label":"Step"})}),(0,r.tZ)(f.G,{"aria-hidden":!0,css:h.l0.rowWithGap(8),children:Array(t).fill(0).map(function(e,t){return(0,r.tZ)(f.G,{css:[h.l0.borderRadius("full"),{width:h.TV.space8,height:h.TV.space8,backgroundColor:t===n?s.Br[i].stronger:s.Br[i].dimmer}]},t)})})]})}},15179:function(e,t,n){n.d(t,{RY:function(){return m},dW:function(){return v},iz:function(){return g},lq:function(){return p}});var r=n(41733),i=n(30509),o=n(98924),a=n(3796);n(75271);var l=n(63163),c=n(93245),s=n(14548),u=n(31718),d=n(96214);n(82922);var f=c.K.label,h=function(e){var t=e.children,n=(0,o._)(e,["children"]);return(0,a.tZ)(f,(0,i._)((0,r._)({css:[l.l0.justify.spaceBetween,l.l0.align.center,l.l0.flex.row,{fontSize:l.TV.fontSizeDefault,lineHeight:l.TV.lineHeightDefault}]},n),{children:t}))},p=function(e){e.onChange;var t=(0,o._)(e,["onChange"]);return(0,a.tZ)(y,(0,i._)((0,r._)({label:"Date created"},t),{children:(0,a.tZ)(d.P,(0,r._)({},e))}))},m=function(e){e.onChange;var t=(0,o._)(e,["onChange"]);return(0,a.tZ)(y,(0,i._)((0,r._)({label:"Sort"},t),{children:(0,a.tZ)(d.P,(0,r._)({},e))}))},v=function(e){return(0,a.tZ)(s.Tg,{css:[l.l0.p(8)],children:(0,a.BX)(h,{htmlFor:e.id,children:["Exact match ",(0,a.tZ)(u.X,(0,r._)({},e))]})})},g=function(){return(0,a.tZ)("div",{css:[l.l0.p(0),l.l0.m(0),{borderBottom:"1px solid",borderBottomColor:l.TV.backgroundHighest}]})},y=function(e){var t=e.children,n=e.label,r=e.className,i=(0,o._)(e,["children","label","className"]);return(0,a.BX)(c.G,{className:r,css:[l.l0.colWithGap(8),l.l0.pb(8)],children:[(0,a.tZ)(s.Tg,{css:[l.l0.p(8),l.l0.mb(0),l.l0.position.relative],children:(0,a.tZ)(h,{htmlFor:i.id,children:n})}),(0,a.tZ)(c.G,{css:[l.l0.px(8)],children:t})]},n)}},4041:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(66626),i=n(75271),o={isConnecting:!0,channel:null,context:null};function a(e){var t=e.container,n=e.service,a=e.name,l=e.skip,c=void 0!==l&&l,s=(0,r._)((0,i.useState)(o),2),u=s[0],d=s[1];return(0,i.useEffect)(function(){d(o);var e=!1,r=t.openChannel({service:n,name:a,skip:function(){return c}},function(t){if(!e)return d({context:t.context,channel:t.channel,isConnecting:!1}),function(t){e||d({isConnecting:t.willReconnect,channel:null,context:null})}});return function(){e=!0,r()}},[t,n,a,c]),u}},65117:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(66626),i=n(75271);function o(e){var t=(0,r._)((0,i.useState)(e.getConnectionState()),2),n=t[0],o=t[1];return(0,i.useEffect)(function(){return e.onConnectionStateChanged(o)},[e]),n}},77391:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(62699),i=n(8445),o=n(75271);function a(e){var t=e.repl,n=e.currentUser,a=e.container,l=(0,i.S)(),c=(0,r.b)(t&&n?{repl:t,currentUser:n}:null);(0,o.useEffect)(function(){if(a&&c)return a.connect({context:c,getMinimumRetryDelayMs:l}),function(){a.close()}},[c,a,l])}},77537:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(66626),i=n(65117),o=n(75271),a=n(37782),l=n(11333),c=n(14118);function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{fallbackToReplCo:!0},n=(0,i.Z)(e),s=(0,r._)((0,o.useState)(null),2),u=s[0],d=s[1],f=(0,c.P5)({controlName:"flag-webview-fallback-url"});return(0,o.useEffect)(function(){if(e.getConnectionState()===a.em.CONNECTED){var n=e.getDotdevUrl();if(n){if(!f||!t.fallbackToReplCo||(0,l.A_)()){d(n);return}d(n.replace(/.replit.dev$/,".repl.co"))}}},[e,n,f,t]),u}},92943:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(66626),i=n(37782),o=n(23882),a=n(75271);function l(){var e,t,n=(0,o.Z)().container,l=(0,r._)((0,a.useState)(null!==(t=null===(e=n.getContext())||void 0===e?void 0:e.repl)&&void 0!==t?t:null),2),c=l[0],s=l[1];return(0,a.useEffect)(function(){return n.onConnectionStateChanged(function(e){var t,r;e===i.em.CONNECTED&&s(null!==(r=null===(t=n.getContext())||void 0===t?void 0:t.repl)&&void 0!==r?r:null)})},[s,n]),c}},22630:function(e,t,n){n.d(t,{J_:function(){return u},O2:function(){return c},hw:function(){return s}});var r=n(23666),i=n(79685),o=n(77537),a=n(12666),l=n(60357);function c(e){return 80===e||443===e}function s(e,t){var n=new URL(e);return!t||c(t)?n.port&&(n.port=""):n.port=t.toString(),n}function u(e){var t,n,c,u=e.replId,d=e.container,f=e.ports,h=(0,r.Z)(),p=!(n=(0,a.bg)(f)).length||n.some(function(e){return 80===e.configuration.externalPort})?80:null!==(t=n[0].configuration.externalPort)&&void 0!==t?t:80,m=(0,o.Z)(d),v=(0,l.I5)({variables:{id:u}}).data,g=(0,i.T)();if(!p&&!g||!((null==v?void 0:v.repl.__typename)==="Repl"?v.repl:null)||!m)return null;var y=s(m,p).toString(),b=s(m+"/__replco/devtools_wrapper.html",p).toString();return{iframeSrc:h?(c=new URL(y)).hostname.endsWith(".localhost")?y:(c.protocol="https:",c.toString()):b,presentationUrl:y}}},36e3:function(e,t,n){n.d(t,{H:function(){return eq}});var r,i,o,a,l,c,s,u,d,f,h,p,m,v,g,y,b,w=n(27387),Z=n(41733),x=n(30509),C=n(66626),k=n(96583),S=n(51305),_=n(96949),E=n(70145),T=n(75271),R=n(52589),D=n(95636),I=n(70993),B=n(36109),G=n(25722),P=n(96082),A=n(29043);function L(e){return N.apply(this,arguments)}function N(){return(N=(0,w._)(function(e){var t,n;return(0,k.Jh)(this,function(r){return t=e.container,n=e.service,[2,new Promise(function(e){var r=t.openChannel({service:n},function(t){return e([t.channel,r]),r})})]})})).apply(this,arguments)}(r=d||(d={})).OUTPUT="OUTPUT",r.ERROR="ERROR",r.STATE_CHANGED="STATE_CHANGED",r.CHANNEL_OPENED="CHANNEL_OPENED";var O=n(55905);(f||(f={})).MESSAGE_RECEIVED="MESSAGE_RECEIVED";var U=n(37782),X=n(25731),M=n(63257),F=n(25357),W=n(12285),V=n(10777),H=n(91620).lW,z=new TextEncoder,j=new TextDecoder,q=(i=/[a-z\d_-]+: [a-z\d_ :;.,/"'?!(){}[\]@<>=+*#$&`|~^%-]+/.source,RegExp("(".concat(i,"\\r\\n)*(").concat(i,")$"),"i")),J=function(){"use strict";function e(t){(0,W._)(this,e),this.onMessage=t,this.buffer=new Uint8Array,this.read=this.read.bind(this)}var t=e.prototype;return t.consumeHeaders=function(){var e=function(e){var t=e.findIndex(function(t,n){return 13===t&&10===e[n+1]&&13===e[n+2]&&10===e[n+3]});if(-1!==t){var n=j.decode(e.slice(0,t)),r=n.match(q);if(!r)throw V.kg.error("Failed to parse LSP header, no matches",{fragment:n}),Error("Unable to match header, text: ".concat(n));var i=Object.create(null),o=r[0].split("\r\n"),a=!0,l=!1,c=void 0;try{for(var s,u=o[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value,f=d.indexOf(":");if(-1===f)throw V.kg.error("Failed to parse LSP header, missing colon",{fragment:n}),Error('Message header must separate key and value using ":"');var h=d.substr(0,f),p=d.substr(f+1).trim();if("Content-Length"===h){var m=parseInt(p,10);if(isNaN(m))throw V.kg.error("Failed to parse LSP header, NaN content length",{fragment:n}),Error("Content-Length value must be a number.");i[h]=parseInt(p,10)}else i[h]=p}}catch(e){l=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}if(null==i["Content-Length"])throw V.kg.error("Failed to parse LSP header, no Content-Length",{fragment:n}),Error("Header must provide a Content-Length property.");return{headerLength:t,value:i}}}(this.buffer);if(e)return this.buffer=this.buffer.slice(e.headerLength+4),e},t.read=function(e){for(this.buffer=(t=this.buffer,n=z.encode(e),(r=new Uint8Array(t.length+n.length)).set(t),r.set(n,t.length),r);null!==(i=this.headers)&&void 0!==i?i:this.headers=this.consumeHeaders();){var t,n,r,i,o=this.headers.value["Content-Length"];if(this.buffer.length<o)return;var a=function(e,t,n){var r=j.decode(e.slice(0,t));try{return{json:JSON.parse(r),buffer:e.slice(t)}}catch(c){var i=H.from(e).toString();if(c instanceof SyntaxError&&"Unexpected end of JSON input"===c.message){V.kg.info("Failed to parse LSP message, falling back to json parsing",{buffer:i,length:t,rpcContent:r,attempt:"original-length",headers:JSON.stringify(n)});var o=function(e,t){for(var n=0,r=0,i=!1,o=t;o<e.length+1;o++){if(o!==t&&!n&&!r&&!i)return o;var a=e[o];switch(a){case 92:o++;continue;case 34:i=!i;continue}if(!i)switch(a){case 123:n++;break;case 125:n--;break;case 91:r++;break;case 93:r--}}return -1}(e,0);if(-1!==o){var a=e.slice(0,o),l=j.decode(a);try{return{json:JSON.parse(l),buffer:e.slice(o)}}catch(e){V.kg.error("Failed to parse LSP message",{givenError:e,buffer:i,length:t,rpcContent:r,attempt:"recomputed-length"})}}}else V.kg.error("Failed to parse LSP message",{givenError:c,buffer:i,length:t,rpcContent:r,attempt:"content-length"});return{json:void 0,buffer:e.slice(t)}}}(this.buffer,o,this.headers),l=a.json,c=a.buffer;if(this.headers=void 0,this.buffer=c,void 0!==l)try{this.onMessage(l)}catch(e){G.Tb(e)}}},e}(),Y=n(91620).lW,$=n(38163),K=n(26151),Q=n(11166),ee=n(19168),et=n(29339),en=n.n(et),er=n(11568),ei=n(3341),eo=n.n(ei),ea=n(21480),el=n(98924),ec=n(81202),es=n.n(ec),eu=n(35554),ed=n.n(eu),ef=n(66591),eh=n(89441),ep=n(80273),em=function(e){var t=e.configurationSupport;return{textDocument:{synchronization:{dynamicRegistration:!0,didSave:!0},signatureHelp:{dynamicRegistration:!0,signatureInformation:{documentationFormat:["markdown","plaintext"]}},publishDiagnostics:{relatedInformation:!0,tagSupport:{valueSet:[1,2]}},formatting:{dynamicRegistration:!0},documentSymbol:{dynamicRegistration:!0,hierarchicalDocumentSymbolSupport:!0,symbolKind:{valueSet:eh.Z}},semanticTokens:{dynamicRegistration:!0,requests:{range:!0,full:{delta:!0}},tokenTypes:ep.rN,tokenModifiers:ep.ho,formats:[ef.TokenFormat.Relative],overlappingTokenSupport:!0,multilineTokenSupport:!0,serverCancelSupport:!0,augmentsSyntaxTokens:!0},definition:{dynamicRegistration:!0,linkSupport:!0},typeDefinition:{dynamicRegistration:!0},implementation:{dynamicRegistration:!0},references:{dynamicRegistration:!0},rename:{dynamicRegistration:!0,prepareSupport:!0},completion:{dynamicRegistration:!0,contextSupport:!0,completionItem:{commitCharactersSupport:!0,documentationFormat:["markdown","plaintext"],labelDetailsSupport:!0,resolveSupport:{properties:["detail","documentation"]},snippetSupport:!0},completionList:{itemDefaults:["commitCharacters"]}},codeAction:{resolveSupport:{properties:["edit"]},dataSupport:!0,dynamicRegistration:!0,isPreferredSupport:!0,codeActionLiteralSupport:{codeActionKind:{valueSet:Object.values(ef.CodeActionKind)}}},hover:{dynamicRegistration:!0,contentFormat:["markdown","plaintext"]}},workspace:{applyEdit:!0,didChangeConfiguration:t.clientToServer||t.serverToClient?{dynamicRegistration:!0}:void 0,configuration:t.serverToClient,semanticTokens:{refreshSupport:!0},executeCommand:{dynamicRegistration:!0},workspaceEdit:{documentChanges:!0,resourceOperations:[ef.ResourceOperationKind.Create,ef.ResourceOperationKind.Delete,ef.ResourceOperationKind.Rename]}}}},ev=n(51638),eg=n(22961),ey=function(){"use strict";function e(){(0,W._)(this,e)}var t=e.prototype;return t.supports=function(e){return e.includes("css-language-server")},t.onResponse=function(e,t){return"textDocument/hover"===e?this.onHover(t):t},t.onHover=function(e){if("error"in e)return e;var t=e.result;return"cancelled"in e&&!1!==e.cancelled||!t?e:(Array.isArray(t.contents)&&(t.contents={kind:"markdown",value:["```html",t.contents[0],"```",t.contents[1],""].join("\n")}),(0,x._)((0,Z._)({},e),{result:t}))},e}(),eb=[new(function(){"use strict";function e(){(0,W._)(this,e)}var t=e.prototype;return t.supports=function(e){return e.includes("typescript-language-server")},t.onResponse=function(e,t){return"textDocument/completion"===e?this.onCompletion(t):t},t.onCompletion=function(e){if("error"in e||"cancelled"in e&&!1!==e.cancelled)return e;var t=e.result;if(!t)return e;Array.isArray(t)&&(t={isIncomplete:!1,items:t});for(var n=0;n<t.items.length;n++){var r=t.items[n];r.sortText&&r.sortText.startsWith("")&&(r.sortText=r.sortText.replace("",""))}return(0,x._)((0,Z._)({},e),{result:t})},e}()),new ey],ew=function(){"use strict";function e(){(0,W._)(this,e)}var t=e.prototype;return t.supports=function(){return!0},t.onResponse=function(e,t){return t},e}(),eZ=n(19607),ex=n(23572),eC=n(91620).lW;function ek(e,t){var n,r;return null!==(r=null===(n=eg.$R.from(e))||void 0===n?void 0:n.id)&&void 0!==r?r:t}function eS(){return Math.floor(2147483647*Math.random())}function e_(e){var t=JSON.stringify((0,x._)((0,Z._)({},e),{jsonrpc:"2.0"})),n=eC.byteLength(t,"utf8");return"Content-Length: ".concat(n,"\r\n\r\n").concat(t)}function eE(e,t){var n,r,i,o,a,l;return t&&t?!!(eo()(null==e?void 0:e.fileTypeAttrs,t.fileTypeAttrs)&&eo()(null==e?void 0:null===(n=e.config)||void 0===n?void 0:n.startCommand,null===(r=t.config)||void 0===r?void 0:r.startCommand)&&eo()(null==e?void 0:null===(i=e.config)||void 0===i?void 0:i.initializationOptionsJson,null===(o=t.config)||void 0===o?void 0:o.initializationOptionsJson)&&eo()(null==e?void 0:null===(a=e.config)||void 0===a?void 0:a.configurationJson,null===(l=t.config)||void 0===l?void 0:l.configurationJson)):!!t==!!t}function eT(e,t){return eR.apply(this,arguments)}function eR(){return(eR=(0,w._)(function(e,t){var n;return(0,k.Jh)(this,function(r){switch(r.label){case 0:return[4,e.exec("pwd")];case 1:if(null!==(n=r.sent()).error){if(!t())return[2,{error:Error("LSPNix: Could not get working directory "+n.error),workingDirectory:null}];return[2,eT(e,t)]}return[2,{error:null,workingDirectory:n.output.replace("\n","")}]}})})).apply(this,arguments)}(o=h||(h={})).INITIALIZED="INITIALIZED",o.READY="READY",o.DIAGNOSTICS="DIAGNOSTICS",o.SERVER_STATE_CHANGE="SERVER_STATE_CHANGE",o.SERVER_HEALTH_CHANGE="SERVER_HEALTH_CHANGE",o.SERVER_CAPABILITIES_CHANGE="SERVER_CAPABILITIES_CHANGE",o.REQUEST="REQUEST",o.RESPONSE="RESPONSE",o.CANCEL_REQUEST="CANCEL_REQUEST",o.SEND_NOTIFICATION="SEND_NOTIFICATION",o.RECEIVE_NOTIFICATION="RECEIVE_NOTIFICATION",o.SEMANTIC_TOKENS_REFRESH="SEMANTIC_TOKENS_REFRESH",(a=p||(p={})).OUTPUT="OUTPUT",a.ERROR="ERROR",a.STATE_CHANGED="STATE_CHANGED",a.CHANNEL_OPENED="CHANNEL_OPENED";var eD=n(35370),eI=n(32992);(l=m||(m={})).USER_JOIN="USER_JOIN",l.USER_LEAVE="USER_LEAVE",l.USERS_UPDATE="USERS_UPDATE",l.USER_OPENED_FILE="USER_OPENED_FILE",l.FOLLOWED_USER_CHANGED="FOLLOWED_USER_CHANGED",l.FOLLOWING_USERS_CHANGED="FOLLOWING_USERS_CHANGED";var eB=n(32902),eG=n(70593),eP=n(88397),eA=n(1053);function eL(e){var t,n,r;return(null===(t=e.runner.id)||void 0===t?void 0:t.startsWith(".replit/"))?0:(null===(n=e.runner.id)||void 0===n?void 0:n.startsWith("module:"))?1:(null===(r=e.runner.id)||void 0===r?void 0:r.startsWith("language:"))?2:3}var eN=n(41974),eO=n(92674),eU=n.n(eO);(v||(v={})).MESSAGE="MESSAGE";var eX=function(){"use strict";function e(t){(0,W._)(this,e),this.buffer=Array(t).fill(null),this.start=0,this.end=0,this.isFull=!1}var t=e.prototype;return t.write=function(e){this.buffer[this.end]=e,this.end=(this.end+1)%this.buffer.length,this.isFull&&(this.start=(this.start+1)%this.buffer.length),this.end===this.start&&(this.isFull=!0)},t.readAll=function(){return this.start!==this.end||this.isFull?this.start<this.end?this.buffer.slice(this.start,this.end).join(""):this.buffer.slice(this.start).concat(this.buffer.slice(0,this.end)).join(""):""},e}();function eM(e){var t=new eX(e.maxHistorySize),n=(0,P.ZP)();return{emitMessage:function(e){t.write(e),n.emit("MESSAGE",e)},onMessage:function(e){return n.on("MESSAGE",e),Promise.resolve().then(function(){return e(t.readAll())}),function(){return n.removeListener("MESSAGE",e)}}}}function eF(e){return 1e3*e.seconds+e.nanos/1e6}var eW=n(56738).F,eV=" \x1b[?25l";(c=g||(g={})).BEFORE_RUN="BEFORE_RUN",c.SERVER="SERVER",c.NONE="NONE",c.STOPPING="STOPPING";var eH=n(79578);(s=y||(y={})).DEEPLINK_CHANGED="DEEPLINK_CHANGED",s.SESSION_STATE_CHANGED="SESSION_STATE_CHANGED";var ez=n(42516),ej=n(45077);function eq(e){var t=(0,C._)((0,T.useState)(null),2),n=t[0],r=t[1];return(0,T.useEffect)(function(){var t,n,i,o,a,l,c,s,u,h,v,g,T,N,W,H,z,j,q,et,ei,eo,ec,eu,ef,eh,ep,ey,eC,eR,eO,eX,eq,eJ,eY,e$,eK,eQ,e0,e1,e2,e3,e4,e8,e6,e5,e7,e9,te,tt,tn,tr,ti,to,ta,tl=function(e){var t=S.D.active();if(e.openTelemetryTracing)return(0,D.eh)(t,"workspace.useCreateServices")}(e),tc=(eo=void 0===(ei=(t=(0,x._)((0,Z._)({},e),{ctx:null==tl?void 0:tl.childCtx})).runnerMode)?"outputs":ei,ec=t.onUnrecoverableError,eu=t.openFile,ef=t.openMultipleFiles,eh=t.openMultipleURLs,ep=t.onFirewallDenied,ey=t.enableUserEvents,eC=t.enableMultipleLSPClientsPerFile,eR=t.enableReplspaceSshTokenPassthrough,eO=t.onPresenceCommand,eX=t.getColorForUser,eq=t.openTelemetryTracing,eJ=t.ctx,eY=t.shouldAutoFlushRef,eK=function(e){var t=e.container,n=e.enabled,r=e.onEventSent,i=(0,P.ZP)();r&&i.on(b.EVENT_SENT,r);var o=null;function a(e,t){return l.apply(this,arguments)}function l(){return(l=(0,w._)(function(e,r){var o,a,l,s,u,d,f,h;return(0,k.Jh)(this,function(p){switch(p.label){case 0:if(!n)return[2];return[4,function(){return c.apply(this,arguments)}()];case 1:if(l=p.sent(),u=null==(s=t.getContext())?void 0:null===(o=s.currentUser)||void 0===o?void 0:o.id,d=null==s?void 0:null===(a=s.repl)||void 0===a?void 0:a.id,f=window.location.href,h={userEvent:{eventName:e,eventData:function e(t){if(!("object"==typeof t&&null!==t&&null!==Object.getPrototypeOf(t)))throw Error("encodeBareStruct must be called with a plain object");return{fields:Object.entries(t).reduce(function(t,n){var r=(0,C._)(n,2),i=r[0],o=r[1];return void 0===o||"object"==typeof o&&o&&0===Object.keys(o).length?t:(0,x._)((0,Z._)({},t),(0,ez._)({},i,function t(n){switch(void 0===n?"undefined":(0,ej._)(n)){case"string":return{kind:"stringValue",stringValue:n};case"number":return{kind:"numberValue",numberValue:n};case"boolean":return{kind:"boolValue",boolValue:n};case"object":if(null===n)return{kind:"nullValue",nullValue:null};if(Array.isArray(n))return{kind:"listValue",listValue:{values:n.map(t)}};return{kind:"structValue",structValue:e(n)};default:throw Error("Unexpected value: ".concat(n))}}(o)))},{})}}((0,Z._)({userId:u,replId:d,url:f},r))}},"open"!==l.status)return G.$e(function(e){e.setTag("service","user-events"),e.setExtra("command",h),e.setExtra("userId",u),e.setExtra("replId",d),e.setExtra("url",f),e.setExtra("channelId",l.id),G.Tb(Error("UserEvents channel is not open: ".concat(l.status)))}),[2];return i.emit(b.EVENT_SENT,e,r),l.send(h),[2]}})})).apply(this,arguments)}function c(){return(c=(0,w._)(function(){return(0,k.Jh)(this,function(e){return o?[2,o]:[2,new Promise(function(e){i.once(b.CHANNEL_OPENED,function(t){e(t)})})]})})).apply(this,arguments)}return a("meta:start",{}),t.openChannel({service:"null",skip:function(){return!n}},function(e){var t=e.channel;return a("meta:ready",{}),o=t,i.emit(b.CHANNEL_OPENED,t),function(){o=null}}),{emit:a}}({container:e$=(0,U.ZP)({onUnrecoverableError:ec,onFirewallDenied:ep,ctx:eJ}),enabled:!!(void 0!==ey&&ey)}),eQ=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,P.ZP)();t.setMaxListeners(1e3);var n=null,r={openFiles:[],activeTab:0};function i(e){es()(r,e)||(r=e,t.emit(y.SESSION_STATE_CHANGED,r))}return{onSessionStateChanged:function(e){return t.on(y.SESSION_STATE_CHANGED,e),function(){t.removeListener(y.SESSION_STATE_CHANGED,e)}},onDeeplinkUpdated:function(e){return t.on(y.DEEPLINK_CHANGED,e),n&&(e(n),n=null),function(){t.removeListener(y.DEEPLINK_CHANGED,e)}},openFile:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.openFile){e.openFile({path:t,newTab:n.newTab,newPane:n.newPane,newPaneEdge:n.newPaneEdge,col:n.col,line:n.line});return}var o=n.tabIndex,a=n.newTab;if(void 0!==o){!function(e,t){var n=t||r.openFiles.length;if(e<0||e>=n||!Number.isInteger(e))throw Error("Invalid index: ".concat(e,". Index must be an integer between 0 and ").concat(n))}(o,r.openFiles.length+1);var l=r.openFiles.slice(),c=r.openFiles.indexOf(t);if(-1===c){l.splice(o,1,t),i({openFiles:l,activeTab:l.indexOf(t)});return}if(c===o){i((0,x._)((0,Z._)({},r),{activeTab:l.indexOf(t)}));return}l.splice(c,1),l.splice(o,0,t);var s=l.indexOf(t);i({openFiles:l,activeTab:s});return}if(r.openFiles.includes(t)){i((0,x._)((0,Z._)({},r),{activeTab:r.openFiles.indexOf(t)}));return}var u=r.openFiles.slice();if(a){var d=0===u.length?0:r.activeTab+1;u.splice(d,0,t),i({openFiles:u,activeTab:d});return}var f=r.activeTab;u.splice(f,1,t),i({openFiles:u,activeTab:f})},updateDeeplink:function(e){t.emit(y.DEEPLINK_CHANGED,e),n=e},getActiveFile:function(){var e=r.openFiles,t=r.activeTab;if(0!==e.length)return e[t]},getState:function(){return r}}}({openFile:eu}),e0=(0,$.Z)({container:e$}),e1=function(e){var t=e.container,n=e.onCommand,r=e.getColorForUser,i=(0,P.ZP)();i.setMaxListeners(1/0);var o=[],a=null,l=[],c={},s=null;function u(){return d.apply(this,arguments)}function d(){return(d=(0,w._)(function(){return(0,k.Jh)(this,function(e){return s?[2,s]:[2,new Promise(function(e){i.once(m.USERS_UPDATE,function(){if(!s)throw Error("Expected presenceChannel to be set");e(s)})})]})})).apply(this,arguments)}function f(e){es()(a,e)||(a=e,i.emit(m.FOLLOWED_USER_CHANGED,e))}function h(){return(h=(0,w._)(function(e){var t,n;return(0,k.Jh)(this,function(r){switch(r.label){case 0:if((null==a?void 0:a.username)===e)throw Error("Already following user with username ".concat(e));if(!a)return[3,2];return[4,p()];case 1:r.sent(),r.label=2;case 2:return[4,u()];case 3:if(t=r.sent(),!(n=o.find(function(t){return t.username===e})))return[2];return f(n),n.sessions.forEach(function(e){t.send({followUser:{session:e.id}})}),[2]}})})).apply(this,arguments)}function p(){return v.apply(this,arguments)}function v(){return(v=(0,w._)(function(){var e,t;return(0,k.Jh)(this,function(n){switch(n.label){case 0:if(!a)throw Error("No user to unfollow");return e=a,f(null),[4,u()];case 1:return t=n.sent(),e.sessions.forEach(function(e){t.send({unfollowUser:{session:e.id}})}),[2]}})})).apply(this,arguments)}return t.openChannel({service:"presence",name:"presencer"},function(e){var t=e.channel;return t.onCommand(function(e){null==n||n(e);var t={cmd:e,emitter:i,activeUsers:o,userIdToFile:c,followedUser:a,setFollowedUser:f,followingUsers:l,getColorForUser:r};switch(e.body){case"roster":!function(e){var t=e.cmd,n=e.emitter,r=e.activeUsers,i=e.userIdToFile,o=e.followedUser,a=e.followingUsers,l=e.setFollowedUser,c=e.getColorForUser,s=t.roster;if(s){var u=s.user,d=s.files;if(u&&d){var f=new Set;if(r.splice(0,r.length),u.forEach(function(e){if(!(!e.id||!e.name||!e.roles||f.has(e.id))){var t=d.filter(function(t){return t.userId===e.id}).map(function(e){if(!e.session||!e.timestamp)throw Error("Expected session and associated with user");return{id:e.session,activeFile:e.file||null,timestamp:(0,eI.gs)(e.timestamp)}}),n=null==c?void 0:c({userId:e.id});r.push({id:e.id,username:e.name,roles:e.roles,color:null!=n?n:(0,eI.i7)(r),sessions:t}),f.add(e.id)}}),r.forEach(function(e){i[e.id]=(0,eI.f0)(e)}),n.emit(m.USERS_UPDATE,(0,M._)(r)),a.filter(function(e){return!r.some(function(t){return t.id===e.id})}).forEach(function(e){var t=a.indexOf(e);-1!==t&&(a.splice(t,1),n.emit(m.FOLLOWING_USERS_CHANGED,{followingUsers:(0,M._)(a),user:e,type:"unfollow"}))}),o){if(!r.some(function(e){return e.id===o.id})){l(null);return}var h=i[o.id];n.emit(m.USER_OPENED_FILE,{user:o,file:h})}}}}(t);break;case"join":!function(e){var t=e.cmd,n=e.emitter,r=e.activeUsers,i=e.userIdToFile,o=e.getColorForUser,a=t.join;if(a.id&&a.name&&a.roles&&a.session){var l=r.find(function(e){return e.id===a.id}),c=Math.floor(Date.now()/1e3),s=B.google.protobuf.Timestamp.create({seconds:c}),u=(0,eI.gs)(s);if(l)l.sessions.push({id:a.session,activeFile:null,timestamp:u});else{var d=null==o?void 0:o({userId:a.id}),f={id:a.id,username:a.name,roles:a.roles,color:null!=d?d:(0,eI.i7)(r),sessions:[{id:a.session,activeFile:null,timestamp:u}]};i[a.id]=null,r.push(f),n.emit(m.USER_JOIN,f),n.emit(m.USERS_UPDATE,(0,M._)(r))}}}(t);break;case"part":!function(e){var t=e.cmd,n=e.emitter,r=e.activeUsers,i=e.userIdToFile,o=e.followedUser,a=e.followingUsers,l=e.setFollowedUser;if(t.part&&t.part.id&&t.part.session){var c=t.part,s=c.id,u=c.session,d=r.findIndex(function(e){return e.id===s}),f=r[d];if(1===f.sessions.length){r.splice(d,1),delete i[f.id],n.emit(m.USER_LEAVE,f),n.emit(m.USERS_UPDATE,(0,M._)(r)),o&&l(null);var h=a.findIndex(function(e){return e.id===f.id});-1!==h&&(a.splice(h,1),n.emit(m.FOLLOWING_USERS_CHANGED,{followingUsers:(0,M._)(a),user:f,type:"unfollow"}))}else{f.sessions=f.sessions.filter(function(e){return e.id!==u});var p=(0,eI.f0)(f);i[f.id]!==p&&(i[f.id]=p,n.emit(m.USER_OPENED_FILE,{user:f,file:p}))}}}(t);break;case"fileOpened":!function(e){var t=e.emitter,n=e.cmd,r=e.activeUsers,i=e.userIdToFile;if(n.fileOpened){var o=n.fileOpened,a=o.userId,l=o.file,c=o.timestamp,s=o.session,u=l||null;if(!a||!c)throw Error("Expected userId and timestamp associated with file opened command");var d=r.find(function(e){return e.id===a});if(!d)throw Error("Expected user with ID ".concat(a));var f=d.sessions.find(function(e){return e.id===s});if(!f)throw Error("Expected session with ID ".concat(f));f.activeFile=u,f.timestamp=(0,eI.gs)(c),i[a]=u,t.emit(m.USER_OPENED_FILE,{user:d,file:u})}}(t);break;case"followUser":!function(e){var t=e.cmd,n=e.emitter,r=e.activeUsers,i=e.followingUsers,o=t.followUser;if(!o.session)throw Error("Expected session associated with follow user");var a=o.session,l=(0,eI.N5)(a,r);i.some(function(e){return e.id===l.id})||(i.push(l),n.emit(m.FOLLOWING_USERS_CHANGED,{followingUsers:(0,M._)(i),user:l,type:"follow"}))}(t);break;case"unfollowUser":!function(e){var t=e.cmd,n=e.emitter,r=e.activeUsers,i=e.followingUsers,o=t.unfollowUser;if(!o.session)throw Error("Expected session associated with follow user");var a=o.session,l=(0,eI.N5)(a,r),c=i.findIndex(function(e){return e.id===l.id});-1!==c&&(i.splice(c,1),n.emit(m.FOLLOWING_USERS_CHANGED,{followingUsers:(0,M._)(i),user:l,type:"unfollow"}))}(t);break;case"sessionTimestampUpdated":!function(e){var t=e.cmd,n=e.emitter,r=e.activeUsers,i=e.userIdToFile,o=t.sessionTimestampUpdated;if(!o.session||!o.timestamp)throw Error("Expected session and tiemstamp associated with update");var a=o.session,l=(0,eI.N5)(a,r),c=i[l.id],s=l.sessions.find(function(e){return e.id===a});if(!s)throw Error("Expected user ".concat(l.id," to have a session with ID ").concat(a));s.timestamp=(0,eI.gs)(o.timestamp);var u=s.activeFile;u!==c&&(i[l.id]=u,n.emit(m.USER_OPENED_FILE,{user:l,file:u}))}(t)}}),s=t,function(){s=null}}),{onUserLeave:function(e){return i.on(m.USER_LEAVE,e),function(){i.removeListener(m.USER_LEAVE,e)}},onUserJoin:function(e){return i.on(m.USER_JOIN,e),function(){i.removeListener(m.USER_LEAVE,e)}},onActiveUsersChange:function(e){return i.on(m.USERS_UPDATE,e),function(){i.removeListener(m.USERS_UPDATE,e)}},onUserOpenedFile:function(e){return i.on(m.USER_OPENED_FILE,e),function(){i.removeListener(m.USER_OPENED_FILE,e)}},onFollowedUserChanged:function(e){return i.on(m.FOLLOWED_USER_CHANGED,e),function(){i.removeListener(m.FOLLOWED_USER_CHANGED,e)}},onFollowingUsersChanged:function(e){return i.on(m.FOLLOWING_USERS_CHANGED,e),function(){i.removeListener(m.FOLLOWING_USERS_CHANGED,e)}},getActiveFileForUser:function(e){var t=c[e];if(void 0===t)throw Error("Expected file for user with ID ".concat(e," to be defined"));return t},updateOpenFile:function(e){return(0,w._)(function(){return(0,k.Jh)(this,function(t){switch(t.label){case 0:return[4,u()];case 1:return t.sent().send({openFile:{file:e}}),[2]}})})()},updateSessionTimestamp:function(){return(0,w._)(function(){return(0,k.Jh)(this,function(e){switch(e.label){case 0:return[4,u()];case 1:return e.sent().send({updateSessionTimestamp:{}}),[2]}})})()},followUser:function(e){return h.apply(this,arguments)},unfollowUser:p,getActiveUsers:function(){return o},getFollowedUser:function(){return a},getFollowingUsers:function(){return l},getUserIdToFile:function(){return c},getPathToUserIds:function(){var e=new Map;return o.forEach(function(t){var n=t.id,r=c[n];r&&function t(n,r){if(""!==n){e.has(n)||e.set(n,[]);var i,o=e.get(n);if(!o)throw Error("Expected user Ids");o.some(function(e){return e===r})||(null===(i=e.get(n))||void 0===i||i.push(r),t((0,eD.Il)(n),r))}}(r,n)}),e}}}({container:e$,onCommand:eO,getColorForUser:eX}),e2=(0,I.Z)({container:e$,fs:e0,ctx:eJ}),e3=function(e){var t,n,r,i=e.container,o=(0,P.ZP)(),a=null;function l(){return c.apply(this,arguments)}function c(){return(c=(0,w._)(function(){return(0,k.Jh)(this,function(e){return a&&"open"===a.status?[2,a]:[2,new Promise(function(e){o.once(p.CHANNEL_OPENED,function(t){e(t)})})]})})).apply(this,arguments)}function s(){return u.apply(this,arguments)}function u(){return(u=(0,w._)(function(){return(0,k.Jh)(this,function(e){return[2,L({container:i,service:"nix"})]})})).apply(this,arguments)}return i.openChannel({service:"nix"},function(e){var t=e.channel;return a=t,o.emit(p.CHANNEL_OPENED,t),function(){a=null}}),{searchPackages:(t=(0,w._)(function(e){var t,n,r,i,o,a=arguments;return(0,k.Jh)(this,function(l){switch(l.label){case 0:return t=a.length>1&&void 0!==a[1]?a[1]:{},[4,s()];case 1:return r=(n=C._.apply(void 0,[l.sent(),2]))[0],i=n[1],[4,r.request({nixPackageSearchRequest:(0,Z._)({query:e},t)})];case 2:if((o=l.sent()).channelClosed)return[2,{error:"Channel closed",packages:null}];if(i(),o.error)return[2,{error:o.error,packages:null}];if(!o.nixPackageSearchResponse)return[2,{error:"Response expected but none received",packages:null}];return[2,{packages:o.nixPackageSearchResponse.packages,error:null}]}})}),function(e){return t.apply(this,arguments)}),listPackages:(0,w._)(function(){var e,t,n,r;return(0,k.Jh)(this,function(i){switch(i.label){case 0:return[4,s()];case 1:return t=(e=C._.apply(void 0,[i.sent(),2]))[0],n=e[1],[4,t.request({nixPackageListRequest:{}})];case 2:if((r=i.sent()).channelClosed)return[2,{error:"Channel closed",packages:null}];if(n(),r.error)return[2,{error:r.error,packages:null}];if(!r.nixPackageListResponse)return[2,{error:"Response expected but none received",packages:null}];return[2,{packages:r.nixPackageListResponse.packages,error:null}]}})}),getChannels:(0,w._)(function(){var e,t,n,r;return(0,k.Jh)(this,function(i){switch(i.label){case 0:return[4,s()];case 1:return t=(e=C._.apply(void 0,[i.sent(),2]))[0],n=e[1],[4,t.request({nixChannelsRequest:{}})];case 2:if((r=i.sent()).channelClosed)return[2,{error:"Channel closed",channels:null}];if(n(),r.error)return[2,{error:r.error,channels:null}];if(!r.nixChannelsResponse)return[2,{error:"Response expected but none received",channels:null}];return[2,{channels:r.nixChannelsResponse.channels,error:null}]}})}),getLatestStableChannel:(0,w._)(function(){var e,t,n,r;return(0,k.Jh)(this,function(i){switch(i.label){case 0:return[4,s()];case 1:return t=(e=C._.apply(void 0,[i.sent(),2]))[0],n=e[1],[4,t.request({nixChannelLatestStableRequest:{}})];case 2:if((r=i.sent()).channelClosed)return[2,{error:"Channel closed",channel:null}];if(n(),r.error)return[2,{error:r.error,channel:null}];if(!r.nixChannelLatestStableResponse)return[2,{error:"Response expected but none received",channel:null}];return[2,{channel:r.nixChannelLatestStableResponse.channel,error:null}]}})}),addPackages:(n=(0,w._)(function(e){var t;return(0,k.Jh)(this,function(n){switch(n.label){case 0:return[4,l()];case 1:return[4,n.sent().request({nixPackageAddRequest:{packages:e}})];case 2:if((t=n.sent()).channelClosed)return[2,"channel closed"];if(t.error)return[2,t.error];if(!t.nixPackageAddResponse)return[2,"response expected but non received"];return[2,null]}})}),function(e){return n.apply(this,arguments)}),removePackages:(r=(0,w._)(function(e){var t;return(0,k.Jh)(this,function(n){switch(n.label){case 0:return[4,l()];case 1:return[4,n.sent().request({nixPackageRemoveRequest:{packages:e}})];case 2:if((t=n.sent()).channelClosed)return[2,"channel closed"];if(t.error)return[2,t.error];if(!t.nixPackageRemoveResponse)return[2,"response expected but non received"];return[2,null]}})}),function(e){return r.apply(this,arguments)}),packageInfo:function(e){return(0,w._)(function(){var t;return(0,k.Jh)(this,function(n){switch(n.label){case 0:return[4,l()];case 1:return[4,n.sent().request({nixPackageInfoRequest:{name:e}})];case 2:if((t=n.sent()).channelClosed)return[2,{package:null,error:"channel closed"}];if(t.error)return[2,{package:null,error:t.error}];if(!t.nixPackageInfoResponse)return[2,{package:null,error:"response expected but non received"}];if(!t.nixPackageInfoResponse.package)return[2,{package:null,error:"package not found"}];return[2,{package:t.nixPackageInfoResponse.package,error:null}]}})})()}}}({container:e$}),e4=(0,O.Z)({container:e$,dotReplit:e2}),e8=function(e){var t=e.container,n=e.forceTrace,r=e.track,i=(0,P.ZP)(),o=new Map;function a(e){var t=o.get(e);return t||(t={packagerChannel:null,didCallOpenChannel:!1,closeChannel:null},o.set(e,t)),t}function l(e){return c.apply(this,arguments)}function c(){return(c=(0,w._)(function(e){var n,r,i,o,a=arguments;return(0,k.Jh)(this,function(c){switch(c.label){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:0,[4,L({container:t,service:"packager3"})];case 1:if(i=(r=C._.apply(void 0,[c.sent(),2]))[0],o=r[1],!e)return[3,3];return[4,i.request({packageSetPackagerRequest:{packagerId:e}})];case 2:c.sent(),c.label=3;case 3:if("open"!==i.status){if(n>5)throw Error("Failed to getAnonymousPackagerChannel");return[2,l(e,n+1)]}return[2,[i,o]]}})})).apply(this,arguments)}function s(e){return u.apply(this,arguments)}function u(){return(u=(0,w._)(function(e){var n;return(0,k.Jh)(this,function(r){return((n=a(e)).didCallOpenChannel||function(e){var n=a(e);if(n.didCallOpenChannel)throw Error("Already called open channel");n.didCallOpenChannel=!0,n.closeChannel=t.openChannel({service:"packager3",name:e||"packager",action:B.api.OpenChannel.Action.ATTACH_OR_CREATE},function(t){var r=t.channel;return r.onCommand(function(t){if(null!=t.state){var n=t.state===B.api.State.Running;i.emit(d.STATE_CHANGED,n,e)}else null!=t.output?i.emit(d.OUTPUT,t.output,e):null!=t.error&&i.emit(d.ERROR,t.error,e)}),e?r.request({packageSetPackagerRequest:{packagerId:e}}).then(function(){n.packagerChannel=r,i.emit(d.CHANNEL_OPENED,r,e)}):(n.packagerChannel=r,i.emit(d.CHANNEL_OPENED,r,e)),function(){n.packagerChannel=null}})}(e),n.packagerChannel&&"open"===n.packagerChannel.status)?[2,n.packagerChannel]:[2,new Promise(function(t){i.once(d.CHANNEL_OPENED,function(n,r){r===e&&t(n)})})]})})).apply(this,arguments)}return{addPackages:function(e,t){return(0,w._)(function(){var n,i,o,a;return(0,k.Jh)(this,function(l){switch(l.label){case 0:return[4,s(t)];case 1:if("open"!==(i=l.sent()).status)return[2,!1];return o=e.map(function(e){return{name:e.name,spec:e.version}}),[4,i.request({packageAdd:{pkgs:o,useNewResponse:!0}})];case 2:if((a=l.sent()).channelClosed||a.error)return[2,!1];return(null===(n=a.packageAddResponse)||void 0===n?void 0:n.installedSystemDependencies)&&r&&r(R.U3.PACKAGER_INSTALLED_SYSTEM_DEPENDENCIES,{packagerId:t}),[2,!0]}})})()},removePackages:function(e,t){return(0,w._)(function(){var n,r,i;return(0,k.Jh)(this,function(o){switch(o.label){case 0:return[4,s(t)];case 1:if("open"!==(n=o.sent()).status)return[2,!1];return r=e.map(function(e){return{name:e}}),[4,n.request({packageRemove:{pkgs:r}})];case 2:if((i=o.sent()).channelClosed)return[2,!1];return[2,!!i.ok]}})})()},searchPackages:function(e,t){return(0,w._)(function(){var n,r,i,o;return(0,k.Jh)(this,function(a){switch(a.label){case 0:return[4,l(t)];case 1:return r=(n=C._.apply(void 0,[a.sent(),2]))[0],i=n[1],[4,r.request({packageSearch:{query:e}})];case 2:if((o=a.sent()).channelClosed)return[2,[]];if(i(),"packageSearchResp"===o.body&&o.packageSearchResp)return[2,o.packageSearchResp.results||[]];return G.Tb(Error("Unknown packager3 command ".concat(o.body,". ")+"Expected packageSearchResp. Received error: ".concat(o.error))),[2,[]]}})})()},fetchPackageInfo:function(e,t){return(0,w._)(function(){var n,r,i,o;return(0,k.Jh)(this,function(a){switch(a.label){case 0:return[4,l(t)];case 1:return r=(n=C._.apply(void 0,[a.sent(),2]))[0],i=n[1],[4,r.request({packageInfo:{pkg:{name:e}}})];case 2:if((o=a.sent()).channelClosed)return[2,void 0];if(i(),"packageInfoResp"===o.body&&o.packageInfoResp)return[2,o.packageInfoResp.pkg||void 0];return G.Tb(Error("Unknown packager3 command ".concat(o.body,". ")+"Expected packageInfoResp. Received error: ".concat(o.error))),[2,void 0]}})})()},installPackages:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,w._)(function(){return(0,k.Jh)(this,function(o){var a;return[2,(0,D.nO)(e,"packager.installPackages",(a=(0,w._)(function(e){var o,a,l;return(0,k.Jh)(this,function(c){switch(c.label){case 0:return[4,s(t)];case 1:if("open"!==(o=c.sent()).status)return[2,(0,A.UG)("ChannelClosed")];return[4,o.request({packageInstall:{useNewResponse:!0,disableGuess:i},traceInfo:(0,D.Rg)(e),forceTrace:n})];case 2:if((a=c.sent()).error)return[2,(0,A.UG)(a.error)];if(a.channelClosed)return[2,(0,A.UG)("ChannelClosed")];if(!(l=a.packageInstallResponse))return[2,(0,A.UG)("No package install response found")];return l.installedSystemDependencies&&r&&r(R.U3.PACKAGER_INSTALLED_SYSTEM_DEPENDENCIES,{packagerId:t}),[2,(0,A.Ok)(l)]}})}),function(e){return a.apply(this,arguments)}))]})})()},listSpecfile:function(e){return(0,w._)(function(){var t,n,r,i;return(0,k.Jh)(this,function(o){switch(o.label){case 0:return[4,s(e)];case 1:return[4,o.sent().request({packageListSpecfile:{}})];case 2:if((t=o.sent()).channelClosed)return[2,{packages:null,error:"channel closed"}];switch(t.body){case"error":return[2,{packages:null,error:"list specfile failed: ".concat(t.error)}];case"packageListSpecfileResp":if(!(r=null===(n=t.packageListSpecfileResp)||void 0===n?void 0:n.pkgs))return[2,{packages:null,error:"list specfile returned an empty response"}];return[2,{packages:r,error:null}];default:return i="Unknown packager3 listSpecFile command ".concat(t.body,". ")+"Expected error or packageListSpecfileResp",G.Tb(Error(i)),[2,{packages:null,error:i}]}return[2]}})})()},getPackagerIds:function(){return Array.from(o.keys())},clearPackager:function(e){var t=o.get(e);(null==t?void 0:t.closeChannel)&&t.closeChannel(),o.delete(e)},onOutput:function(e){return i.on(d.OUTPUT,e),function(){i.removeListener(d.OUTPUT,e)}},onError:function(e){return i.on(d.ERROR,e),function(){i.removeListener(d.ERROR,e)}},onStateChanged:function(e){return i.on(d.STATE_CHANGED,e),function(){i.removeListener(d.STATE_CHANGED,e)}}}}({container:e$,forceTrace:eq,track:_.j}),e6=(0,eP.ZP)({container:e$,fs:e0,openMultipleFiles:ef,openMultipleURLs:eh,enableReplspaceSshTokenPassthrough:eR}),e7=(o=(i={container:e$,beforeRun:e5=(n=(0,w._)(function(e,t){var n;return(0,k.Jh)(this,function(r){var i;return n=(null==t?void 0:t.ctx)||S.D.active(),[2,(0,D.nO)(n,"beforeRun",(i=(0,w._)(function(n){var r,i,o,a,l,c,s,u,d,f,h,p,m,v,g,y;return(0,k.Jh)(this,function(b){switch(b.label){case 0:return[4,(0,D.nO)(n,"toolchain.getConfigs",function(){return e4.getConfigs()})];case 1:if((r=b.sent()).disableInstallBeforeRun)return[2];return i=(0,Z._)({},t),delete i.ctx,eK.emit("user:run:prerun",(0,Z._)({runnerMode:eo},i)),[4,(0,D.nO)(n,"fs.flush",(0,w._)(function(){return(0,k.Jh)(this,function(e){switch(e.label){case 0:if(!(void 0===eY||eY.current))return[3,2];return[4,e0.flush()];case 1:e.sent(),e.label=2;case 2:return[2]}})}))];case 2:if(b.sent(),e&&e("prerun flush finished"),!(null==r?void 0:r.packagers))return[3,10];o=!0,a=!1,l=void 0,b.label=3;case 3:b.trys.push([3,8,9,10]),c=r.packagers[Symbol.iterator](),b.label=4;case 4:if(o=(s=c.next()).done)return[3,7];if(!(u=s.value).guessImports)return[3,6];return d=performance.now(),f=r.disableGuessImports,[4,e8.installPackages(n,u.id,f)];case 5:h=b.sent(),p=performance.now()-d,e&&(h.error?e("prerun packager install finished",{packagerId:u.id,language:u.language,errorMessage:h.error,success:!1}):(g=(v=(null==(m=h.value)?void 0:m.guessedPkgs)||[]).length,e("prerun packager install finished",{packagerId:u.id,language:u.language,guessedPkgs:v,guessedPkgsCount:g,guessedAnyPkgs:g>0,upmGuessDurationMs:null==m?void 0:m.upmGuessDurationMs,upmAddDurationMs:null==m?void 0:m.upmAddDurationMs,upmLockDurationMs:null==m?void 0:m.upmLockDurationMs,backendTotalDurationMs:null==m?void 0:m.totalDurationMs,frontendTotalDurationMs:p,success:!0}),g>0&&(0,_.j)(R.U3.PACKAGER_PACKAGES_GUESSED,{packages:v}))),b.label=6;case 6:return o=!0,[3,4];case 7:return[3,10];case 8:return y=b.sent(),a=!0,l=y,[3,10];case 9:try{o||null==c.return||c.return()}finally{if(a)throw l}return[7];case 10:return eK.emit("user:run:initiate",{}),[2]}})}),function(e){return i.apply(this,arguments)}))]})}),function(e,t){return n.apply(this,arguments)})}).container,a=i.beforeRun,{mainClient:l=(0,X.u)(null),connect:function(){return new Promise(function(e){l.current||o.openChannel({service:"debugger"},function(t){return l.current=function(e){var t,n=e.channel,r=e.beforeRun,i=(0,X.u)("terminated"),o=(0,X.u)([]),a=(0,X.u)([]),l=(0,X.u)(new Map),c=(0,X.u)(null),s=(0,P.ZP)(),u=function(e,t){var n=new Map,r=new Map,i=new Map;function o(){return(o=(0,w._)(function(t){var o,a,l,c,s,u,d;return(0,k.Jh)(this,function(f){switch(f.label){case 0:o=!0,a=!1,l=void 0,f.label=1;case 1:f.trys.push([1,6,7,8]),c=function(){var n,o,a,l,c,s,d,f,h,p,m,v,g,y,b,w,x,S,_,E,T,R,D,I,B,G,P,A,L,N,O,U,X,M,F;return(0,k.Jh)(this,function(W){switch(W.label){case 0:if(o=(n=(0,C._)(u.value,2))[0],a=n[1],void 0!==t&&t!==o)return[2,"continue"];return[4,e({command:"setBreakpoints",arguments:{source:{name:o,path:o},breakpoints:a.map(function(e){return{line:e.line,logMessage:e.logMessage||void 0}})}})];case 1:if(!(l=W.sent()).success)return[2,"continue"];c=!0,s=!1,d=void 0;try{for(f=r[Symbol.iterator]();!(c=(h=f.next()).done);c=!0){m=(p=(0,C._)(h.value,2))[0],v=p[1],(null===(g=v.source)||void 0===g?void 0:g.name)===o&&r.delete(m),y=!0,b=!1,w=void 0;try{for(x=i[Symbol.iterator]();!(y=(S=x.next()).done);y=!0)E=(_=(0,C._)(S.value,2))[0],_[1]===m&&i.delete(E)}catch(e){b=!0,w=e}finally{try{y||null==x.return||x.return()}finally{if(b)throw w}}}}catch(e){s=!0,d=e}finally{try{c||null==f.return||f.return()}finally{if(s)throw d}}T=l,R=!0,D=!1,I=void 0;try{for(B=T.body.breakpoints[Symbol.iterator]();!(R=(G=B.next()).done);R=!0)P=G.value,null!=P.id&&r.set(P.id,(0,Z._)({source:{name:o,path:o}},P))}catch(e){D=!0,I=e}finally{try{R||null==B.return||B.return()}finally{if(D)throw I}}A=!0,L=!1,N=void 0;try{for(O=(function(e,t){var n;return(0,k.Jh)(this,function(r){switch(r.label){case 0:if(e.length!==t.length)return[2];n=0,r.label=1;case 1:if(!(n<e.length))return[3,4];return[4,[e[n],t[n]]];case 2:r.sent(),r.label=3;case 3:return n++,[3,1];case 4:return[2]}})})(a,T.body.breakpoints)[Symbol.iterator]();!(A=(U=O.next()).done);A=!0)M=(X=(0,C._)(U.value,2))[0],F=X[1],M.breakpointId&&null!=F.id&&i.set(M.breakpointId,F.id)}catch(e){L=!0,N=e}finally{try{A||null==O.return||O.return()}finally{if(L)throw N}}return[2]}})},s=n.entries()[Symbol.iterator](),f.label=2;case 2:if(o=(u=s.next()).done)return[3,5];return[5,(0,k.XA)(c())];case 3:f.sent(),f.label=4;case 4:return o=!0,[3,2];case 5:return[3,8];case 6:return d=f.sent(),a=!0,l=d,[3,8];case 7:try{o||null==s.return||s.return()}finally{if(a)throw l}return[7];case 8:return[2]}})})).apply(this,arguments)}function a(){var e=new Map,t=new Set,o=!0,a=!1,l=void 0;try{for(var c,s=n.entries()[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=(0,C._)(c.value,2),d=u[0],f=u[1];if(0!==f.length){var h=[],p=!0,m=!1,v=void 0;try{for(var g,y=f[Symbol.iterator]();!(p=(g=y.next()).done);p=!0){var b=g.value;if(b.breakpointId&&b.line){var w=i.get(b.breakpointId),Z=void 0===w?void 0:r.get(w);Z&&t.add(w),h.push({dapId:w,pid1Id:b.breakpointId,line:Z&&Z.line||b.line,verified:!!(null==Z?void 0:Z.verified),logMessage:b.logMessage||void 0})}}}catch(e){m=!0,v=e}finally{try{p||null==y.return||y.return()}finally{if(m)throw v}}e.set(d,h)}}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}var x=!0,k=!1,S=void 0;try{for(var _,E=r.entries()[Symbol.iterator]();!(x=(_=E.next()).done);x=!0){var T=(0,C._)(_.value,2),R=T[0],D=T[1];if(!t.has(R)){var I=(0,F.IT)((null===(O=D.source)||void 0===O?void 0:O.path)||(null===(U=D.source)||void 0===U?void 0:U.name)||""),B=D.line;if(I&&B){var G=e.get(I);G||(G=[],e.set(I,G));var P=!1,A=!0,L=!1,N=void 0;try{for(var O,U,X,M=G[Symbol.iterator]();!(A=(X=M.next()).done);A=!0){var W=X.value;if(W.line===D.line){W.dapId=R,W.verified=D.verified,P=!0;break}}}catch(e){L=!0,N=e}finally{try{A||null==M.return||M.return()}finally{if(L)throw N}}P||G.push({dapId:R,line:B,verified:D.verified})}}}}catch(e){k=!0,S=e}finally{try{x||null==E.return||E.return()}finally{if(k)throw S}}return e}return{findPathByBreakpointId:function(e){var t=!0,r=!1,i=void 0;try{for(var o,a=n.entries()[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=(0,C._)(o.value,2),c=l[0];if(l[1].some(function(t){return t.breakpointId===e}))return c}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return null},getBreakpoints:a,flush:function(e){return o.apply(this,arguments)},handleDAPBreakpointEvent:function(e){var n=e.body,i=n.reason,o=n.breakpoint,l=o.id;if(null!=l){switch(i){case"changed":case"new":r.set(l,(0,Z._)({},r.get(l),o));break;case"removed":r.delete(l);break;default:return}t(a())}},handlePID1BreakpointEvent:function(e){var r=e.absolutePath?(0,F.IT)(e.absolutePath):null;r&&(n.set(r,e.breakpoints||[]),t(a()))},handleDebugSessionEnded:function(){r.clear(),i.clear();var e=!0,o=!1,l=void 0;try{for(var c,s=n.entries()[Symbol.iterator]();!(e=(c=s.next()).done);e=!0){var u=(0,C._)(c.value,2),d=u[0],f=u[1];0===f.length&&n.delete(d)}}catch(e){o=!0,l=e}finally{try{e||null==s.return||s.return()}finally{if(o)throw l}}t(a())}}}(y,function(e){l.current=e}),d=(0,X.u)(!1),f=[],h=new J(function(e){if(f.push({time:Date.now(),direction:"in",data:e}),"event"===e.type)switch(e.event){case"continued":i.current="running";break;case"stopped":var t;i.current="paused",c.current=null!==(t=e.body.threadId)&&void 0!==t?t:null,s.emit("paused",e.body.reason),function(){E.apply(this,arguments)}();break;case"breakpoint":u.handleDAPBreakpointEvent(e)}else if("response"===e.type){var n=p.get(e.request_seq);n&&(p.delete(e.request_seq),n(e))}}),p=new Map,m=100;function v(){i.current="terminated",o.current=[],a.current=[],c.current=null,u.handleDebugSessionEnded(),d.current=!1}var g=!1;function y(e){return b.apply(this,arguments)}function b(){return(b=(0,w._)(function(e){return(0,k.Jh)(this,function(t){return[2,new Promise(function(t){var r,i=m++;p.set(i,t);var o=(0,x._)((0,Z._)({},e),{type:"request",seq:i});f.push({time:Date.now(),direction:"out",data:o});var a={debugInput:{session:"main",adapterInput:(r=JSON.stringify(o),"Content-Length: ".concat(Y.byteLength(r),"\r\n\r\n").concat(r))}};f.push({time:Date.now(),direction:"out",data:a}),n.send(a)})]})})).apply(this,arguments)}function S(e){return _.apply(this,arguments)}function _(){return(_=(0,w._)(function(e){var t;return(0,k.Jh)(this,function(r){switch(r.label){case 0:return f.push({time:Date.now(),direction:"out",data:e}),[4,n.request(e)];case 1:if(t=r.sent(),f.push({time:Date.now(),direction:"in",data:t}),t.error)throw t.error;return[2,t]}})})).apply(this,arguments)}function E(){return(E=(0,w._)(function(){var e,t,n;return(0,k.Jh)(this,function(r){switch(r.label){case 0:return o.current=[],a.current=[],[4,y({command:"stackTrace",arguments:{threadId:c.current}})];case 1:if(!(e=r.sent()).success||(o.current=e.body.stackFrames,0===o.current.length))return[2];return[4,y({command:"scopes",arguments:{frameId:o.current[0].id}})];case 2:if(!(t=r.sent()).success)return[2];return[4,Promise.all(t.body.scopes.map(function(e){return y({command:"variables",arguments:{variablesReference:e.variablesReference}}).then(function(t){return{response:t,parentVariableReference:e.variablesReference}})}))];case 3:return n=r.sent(),a.current=n.filter(function(e){return e.response.success}).reduce(function(e,t){var n=t.response,r=t.parentVariableReference;return e.concat(n.body.variables.map(function(e){return(0,x._)((0,Z._)({},e),{parentVariableReference:r})}))},[]),[2]}})})).apply(this,arguments)}function T(e){return R.apply(this,arguments)}function R(){return(R=(0,w._)(function(e){var t,a,l,c,h,p,m;return(0,k.Jh)(this,function(v){switch(v.label){case 0:if("terminated"!==i.current)throw Error("Cant start while debugger is already running");return i.current="preinitializing",o.current=[],[4,r()];case 1:if(v.sent(),"stopping"===i.current)return i.current="terminated",[2];return g=!0,i.current="initializing",l={session:"main",readOnly:!1},e&&(l.debuggerId=e.debuggerOption.id,e.filePath&&(l.filePath=e.filePath)),c={debugMain:l},f.push({time:Date.now(),direction:"out",data:c}),[4,n.request(c)];case 2:if(h=v.sent(),f.push({time:Date.now(),direction:"in",data:h}),h.error)return s.emit("output",h.error),i.current="terminated",[2];return[4,y({command:"initialize",arguments:{clientID:"replit",clientName:"replit.com",adapterID:"cppdbg",pathFormat:"path",linesStartAt1:!0,columnsStartAt1:!0,supportsEvaluateForHovers:!0,supportsVariableType:!0,supportsVariablePaging:!0,supportsRunInTerminalRequest:!1,locale:"en-us",supportsProgressReporting:!0,supportsInvalidatedEvent:!0}})];case 3:if(!(p=v.sent()).success)return i.current="terminated",[2];return d.current=!!(null===(t=p.body)||void 0===t?void 0:t.supportsStepBack),m=!(null===(a=p.body)||void 0===a?void 0:a.supportsConfigurationDoneRequest),[4,u.flush()];case 4:if(v.sent(),m)return[3,6];return[4,y({command:"configurationDone"})];case 5:v.sent(),v.label=6;case 6:return"initializing"===i.current&&(i.current="running"),s.emit("started",m),[2]}})})).apply(this,arguments)}function D(e,t){return I.apply(this,arguments)}function I(){return(I=(0,w._)(function(e,t){var n,r,o,a;return(0,k.Jh)(this,function(l){switch(l.label){case 0:return n=t.line,r=t.otIndex,o=t.otVersion,a=t.logMessage,[4,S({debugAddBreakpointRequest:{path:(0,F.om)(e)||e,line:n,otIndex:r,otVersion:o,logMessage:a}})];case 1:if(l.sent(),!("terminated"!==i.current))return[3,3];return[4,u.flush(e)];case 2:l.sent(),l.label=3;case 3:return s.emit("breakpoint","added"),[2]}})})).apply(this,arguments)}function G(e){return A.apply(this,arguments)}function A(){return(A=(0,w._)(function(e){var t;return(0,k.Jh)(this,function(n){switch(n.label){case 0:return t=u.findPathByBreakpointId(e),[4,S({debugRemoveBreakpointRequest:{breakpointId:e}})];case 1:if(n.sent(),!("terminated"!==i.current&&t))return[3,3];return[4,u.flush(t)];case 2:n.sent(),n.label=3;case 3:return s.emit("breakpoint","removed"),[2]}})})).apply(this,arguments)}function L(){return(L=(0,w._)(function(e,t){var n;return(0,k.Jh)(this,function(r){switch(r.label){case 0:if(!(n=u.findPathByBreakpointId(e)))return[2];return[4,S({debugUpdateBreakpointRequest:{breakpointId:e,logMessage:t.logMessage}})];case 1:if(r.sent(),!("terminated"!==i.current))return[3,3];return[4,u.flush(n)];case 2:r.sent(),r.label=3;case 3:return s.emit("breakpoint","updated"),[2]}})})).apply(this,arguments)}function N(){return(N=(0,w._)(function(e,t){var n,r,i;return(0,k.Jh)(this,function(o){switch(o.label){case 0:if(!(i=null===(r=l.current.get(e))||void 0===r?void 0:null===(n=r.find(function(e){return e.line===t.line&&void 0!==e.pid1Id}))||void 0===n?void 0:n.pid1Id))return[3,2];return[4,G(i)];case 1:return o.sent(),[3,4];case 2:return[4,D(e,t)];case 3:o.sent(),o.label=4;case 4:return[2]}})})).apply(this,arguments)}function O(e){return s.on("started",e),function(){s.removeListener("started",e)}}return n.onCommand(function(e){f.push({time:Date.now(),direction:"in",data:e});var t,n,r=e.debugOutput,o=e.debugState,a=e.debugBreakpointEvent,l=e.debugSessions;if(r){if("main"!==r.session)return;r.adapterOutput&&h.read(r.adapterOutput),r.output&&s.emit("output",r.output)}if(a&&u.handlePID1BreakpointEvent(a),o&&o.state===B.api.State.Stopped&&v(),((null==l?void 0:null===(t=l.sessions)||void 0===t?void 0:t.main)===B.api.State.Running||(null==o?void 0:o.state)===B.api.State.Running)&&"terminated"===i.current&&T(),(null==l?void 0:null===(n=l.sessions)||void 0===n?void 0:n.main)===B.api.State.Stopped||(null==o?void 0:o.state)===B.api.State.Stopped){if(g){g=!1;return}v()}}),{state:i,stackFrames:o,variables:a,breakpoints:l,supportsStepBack:d,onOutput:function(e){return s.on("output",e),function(){s.removeListener("output",e)}},onStarted:O,onPaused:function(e){return s.on("paused",e),function(){s.removeListener("paused",e)}},onBreakpoint:function(e){return s.on("breakpoint",e),function(){s.removeListener("breakpoint",e)}},sendInput:function(e){return(0,w._)(function(){var t,r;return(0,k.Jh)(this,function(i){switch(i.label){case 0:return t={debugInput:{session:"main",input:e}},f.push({time:Date.now(),direction:"out",data:t}),[4,n.request(t)];case 1:if(r=i.sent(),f.push({time:Date.now(),direction:"in",data:r}),r.error)throw r.error;return[2]}})})()},fetchVariables:function(e){return(0,w._)(function(){var t;return(0,k.Jh)(this,function(n){switch(n.label){case 0:return[4,y({command:"variables",arguments:{variablesReference:e}})];case 1:if((t=n.sent()).success)return[2,t.body.variables.map(function(t){return(0,x._)((0,Z._)({},t),{parentVariableReference:e})})];throw Error(t.message)}})})()},evaluate:function(e){var n=e.frameId,r=void 0===n?null===(t=o.current[0])||void 0===t?void 0:t.id:n,i=e.expression,a=e.context;return(0,w._)(function(){return(0,k.Jh)(this,function(e){switch(e.label){case 0:return[4,y({command:"evaluate",arguments:{frameId:r,expression:i,context:a}})];case 1:return[2,e.sent()]}})})()},addBreakpoint:D,removeBreakpoint:G,updateBreakpoint:function(e,t){return L.apply(this,arguments)},toggleBreakpoint:function(e,t){return N.apply(this,arguments)},start:T,continue:function(){return(0,w._)(function(){return(0,k.Jh)(this,function(e){switch(e.label){case 0:return o.current=[],i.current="running",[4,y({command:"continue",arguments:{threadId:c.current}})];case 1:return e.sent(),[2]}})})()},reverseContinue:function(){return(0,w._)(function(){return(0,k.Jh)(this,function(e){switch(e.label){case 0:return o.current=[],i.current="running",[4,y({command:"reverseContinue",arguments:{threadId:c.current}})];case 1:return e.sent(),[2]}})})()},back:function(){return(0,w._)(function(){return(0,k.Jh)(this,function(e){switch(e.label){case 0:return i.current="running",[4,y({command:"stepBack",arguments:{threadId:c.current}})];case 1:return e.sent(),[2]}})})()},next:function(){return(0,w._)(function(){return(0,k.Jh)(this,function(e){switch(e.label){case 0:return i.current="running",[4,y({command:"stepIn",arguments:{threadId:c.current}})];case 1:return e.sent(),[2]}})})()},skip:function(){return(0,w._)(function(){return(0,k.Jh)(this,function(e){switch(e.label){case 0:return i.current="running",[4,y({command:"next",arguments:{threadId:c.current,granularity:"line"}})];case 1:return e.sent(),[2]}})})()},stepOut:function(){return(0,w._)(function(){return(0,k.Jh)(this,function(e){switch(e.label){case 0:return i.current="running",[4,y({command:"stepOut",arguments:{threadId:c.current}})];case 1:return e.sent(),[2]}})})()},stop:function(){return(0,w._)(function(){var e,t,r,o;return(0,k.Jh)(this,function(a){switch(a.label){case 0:if("terminated"===i.current)throw Error("Debugger already terminated");if(e=i.current,i.current="stopping","preinitializing"===e)return[2];if("initializing"!==e)return[3,2];return t=[],[4,Promise.race([new Promise(function(e){t.push(i.subscribe(function(){return e()}))}),new Promise(function(e){t.push(O(function(){return e()}))})])];case 1:if(a.sent(),t.forEach(function(e){return e()}),"terminated"===i.current)return[2];a.label=2;case 2:return r={debugStop:{session:"main"}},f.push({time:Date.now(),direction:"out",data:r}),[4,n.request(r)];case 3:if(o=a.sent(),f.push({time:Date.now(),direction:"in",data:o}),o.error)throw Error("Failed to stop debugger "+o.error);return[2]}})})()},getSource:function(e){return(0,w._)(function(){var t;return(0,k.Jh)(this,function(n){switch(n.label){case 0:return[4,y({command:"source",arguments:{source:{path:e}}})];case 1:if(!(t=n.sent()).success)throw Error(t.message);return[2,t.body.content]}})})()},getDebugLogs:function(){return Object.entries({state:i,stackFrames:o,variables:a,breakpoints:l,threadId:c}).map(function(e){var t=(0,C._)(e,2),n=t[0],r=t[1];return"".concat(n," = ").concat(JSON.stringify(r.current instanceof Map?(0,M._)(r.current):r.current,void 0,2))}).join("\n")+"\n\n"+f.map(function(e){return[new Date(e.time).toLocaleString(),"in"===e.direction?"->":"<-",JSON.stringify(e.data)].join(" ")}).join("\n")}}}({channel:t.channel,beforeRun:a}),e(null),function(){l.current=null}})})}}),e9=(0,E.TE)({container:e$,dotReplit:e2}),te=function(e){var t;if("outputs"===e.mode?t=function(e){var t,n,r,i,o,a,l,c,s,u,d,f,h,p,m,v,g,y=e.container,b=e.toolchain,x=e.beforeRun,C=e.packager,S=e.debuggest,E=(0,P.ZP)(),T=null,R={runId:eU()(),runState:eA.Ah.OFFLINE,runningStage:"NONE",outputBlocks:[]};function I(e){R=(0,eN.Uy)(R,e)}function G(e){var t=R.outputBlocks.find(function(t){return t.id===e});if(!t)throw Error("can't find block for id: ".concat(e));E.emit(eA.zW.BLOCK_CHANGED,t)}function A(){E.emit(eA.zW.ALL_BLOCKS_CHANGED,R.outputBlocks)}function L(e){R.runState!==e&&(I(function(t){t.runState=e}),E.emit(eA.zW.STATE_CHANGE,e))}function N(){if(!T){L(eA.Ah.OFFLINE);return}if("BEFORE_RUN"===R.runningStage){L(eA.Ah.BEFORE_RUN);return}if("STOPPING"===R.runningStage){L(eA.Ah.STOPPING);return}if("NONE"!==R.runningStage){L(eA.Ah.RUNNING);return}L(eA.Ah.IDLE)}function O(e,t){var n=(null!=t?t:R).outputBlocks.filter(function(t){return t.type===e}),r=n[n.length-1];if(r)return r}function U(e,t){var n;I(function(r){var i=O(e,r);i&&(n=i.id,t(i))}),n&&G(n)}function X(){return(X=(0,w._)(function(e){return(0,k.Jh)(this,function(t){var n;return[2,(0,D.GK)("outputs.run",(n=(0,w._)(function(t){var n,r,i,o,a,l,c,s,u,d;return(0,k.Jh)(this,function(f){switch(f.label){case 0:if(R.runState!==eA.Ah.IDLE&&R.runState!==eA.Ah.STOPPING)throw Error("Cannot run while state is not IDLE or STOPPING, got state: "+R.runState);return i=R.outputBlocks.length>1&&R.outputBlocks[R.outputBlocks.length-1],(0,_.j)(_.U3.WS_CONSOLE_OUTPUT_STARTED,{replId:null===(n=y.getContext())||void 0===n?void 0:n.repl.id,runId:R.runId,lastBlock:i?(0,Z._)({type:i.type,isDone:i.isDone,endTime:i.endTime,startTime:i.startTime},i.type===eA.kH.EXECUTION?{executionMode:i.data.executionMode,exitCode:i.data.exitCode,stderr:i.data.stderr}:{},i.type===eA.kH.DEBUGGER?{debugState:i.data.debugState}:{}):void 0,previousBlockNumber:R.outputBlocks.length,previousBlocksAvgTimeMs:R.outputBlocks.length>1?Math.floor(R.outputBlocks.reduce(function(e,t){return t.endTime&&t.startTime?e+(t.endTime-t.startTime):e},0)):void 0}),o=eU()(),I(function(e){e.runId=o,e.runningStage="BEFORE_RUN"}),E.emit(eA.zW.LOCAL_RUN),N(),!e&&(l=function(e,t,n,r){if(!(null==e?void 0:e.runs))return[];var i=[];if(t=t.slice(),n){var o=t.indexOf(n);-1!==o&&(t.splice(o,1),t.splice(0,0,n))}if(r){var a=t.indexOf(r);-1!==a&&t.splice(a,1),t.splice(0,0,r)}var l=!0,c=!1,s=void 0;try{for(var u,d=t[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value;if(f.match(/(\.[a-z0-9]+)$/)){var h=!0,p=!1,m=void 0;try{for(var v,g=e.runs[Symbol.iterator]();!(h=(v=g.next()).done);h=!0){var y=v.value;if(y.fileParam||y.optionalFileParam){var b=(0,eg.rF)(y.fileTypeAttrs);null===b&&y.language&&(b=eg.$R.from(y.language)),b&&(0,eg.JW)(f,b)&&i.push({runner:y,filePath:f})}}}catch(e){p=!0,m=e}finally{try{h||null==g.return||g.return()}finally{if(p)throw m}}}}}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}var w=!0,Z=!1,x=void 0;try{for(var C,k=e.runs[Symbol.iterator]();!(w=(C=k.next()).done);w=!0){var S=C.value;S.fileParam||i.push({runner:S})}}catch(e){Z=!0,x=e}finally{try{w||null==k.return||k.return()}finally{if(Z)throw x}}return function(e){e.sort(function(e,t){var n=eL(e),r=eL(t);return n!==r?n-r:e.runner.interpreter===t.runner.interpreter?0:e.runner.interpreter?-1:1})}(i),i}(b.configs.current,[],null,(null===(a=b.configs.current)||void 0===a?void 0:a.entrypoint)||null)).length>0&&(e=l[0]),[4,x(c=V.kg.timeStart({runnerId:null==e?void 0:e.runner.id,filePath:null==e?void 0:e.filePath,isInterpreter:null==e?void 0:e.runner.interpreter,replLanguage:null===(r=y.getContext())||void 0===r?void 0:r.repl.language}),{runId:o,channelId:null==T?void 0:T.id,type:"outputs",runConfig:e,ctx:t})];case 1:if(f.sent(),R.runId!==o||"NONE"===R.runningStage||"SERVER"===R.runningStage)return[2];if(!T)throw Error("State is RUNNING but outputs is null?");if("open"!==T.status)return[2];return(s=M()).isStopped||s.stop(),u={},e&&(u.runnerId=e.runner.id,u.filePath=e.filePath),d=T,[4,(0,D.nO)(t,"timeToRunning",(0,w._)(function(){var e,t;return(0,k.Jh)(this,function(n){switch(n.label){case 0:return e=performance.now(),d.send({runMain:u}),[4,new Promise(function(e){var t=d.onCommand(function(n){"state"===n.body&&(t(),e())})})];case 1:return n.sent(),t=performance.now()-e,c("run finished",{timeToRunningMs:t}),[2]}})}))];case 2:return f.sent(),[2]}})}),function(e){return n.apply(this,arguments)}))]})})).apply(this,arguments)}function M(){var e=S.mainClient.current,t=null==e?void 0:e.state.current;return{client:e,state:t,sendInput:function(t){return null==e?void 0:e.sendInput(t)},stop:function(){return null==e?void 0:e.stop()},isRunning:"running"===t,isStopped:null==t||"terminated"===t}}function F(){return(F=(0,w._)(function(e){var t,n;return(0,k.Jh)(this,function(r){if(R.runState===eA.Ah.OFFLINE)return[2];if(t=M(),n=R.outputBlocks[R.outputBlocks.length-1].type===eA.kH.DEBUGGER,t.isRunning&&n&&t.sendInput(e),R.runState!==eA.Ah.IDLE&&R.runState!==eA.Ah.RUNNING)throw Error("Can only send input when running or idle");if(!T)throw Error("State is not OFFLINE but outputs is null?");return"open"!==T.status||T.send({input:e}),[2]})})).apply(this,arguments)}return n=(t={packager:C,updateState:I,getRunningBlockOfType:O,updateRunningBlockOfType:U,emitBlockUpdate:G}).packager,r=t.updateState,i=t.getRunningBlockOfType,o=t.updateRunningBlockOfType,a=t.emitBlockUpdate,(l=[]).push(n.onOutput(function(e){var t=i(eA.kH.PACKAGER);null==t||t.data.emitMessage(e.replace(/\n/g,"\n\r"))})),l.push(n.onError(function(e){o(eA.kH.PACKAGER,function(t){t.error?t.error+="\n"+e:t.error=e})})),l.push(n.onStateChanged(function(e){if(e){var t=eU()();r(function(e){e.outputBlocks.push({id:t,localStartTime:Date.now(),isDone:!1,visualState:eA.MZ.EXPANDED,type:eA.kH.PACKAGER,data:(0,Z._)({},eM({maxHistorySize:eW}))}),e.outputBlocks.length>20&&e.outputBlocks.shift()}),a(t)}else o(eA.kH.PACKAGER,function(e){e.data.emitMessage(eV),e.localEndTime=Date.now(),e.isDone=!0})})),d=(c={debuggest:S,updateState:I,updateRunningBlockOfType:U,getRunningBlockOfType:O,emitRunState:L,emitBlockUpdate:G,stopCurrentRun:function(){I(function(e){e.runningStage="BEFORE_RUN"}),null==T||T.send({clear:{}})}}).debuggest,f=c.updateState,h=c.updateRunningBlockOfType,p=c.getRunningBlockOfType,m=c.emitBlockUpdate,v=c.emitRunState,g=c.stopCurrentRun,d.mainClient.subscribe(function(e){e&&(null==u||u(),null==s||s(),u=e.state.subscribe(function(e){if("initializing"===e){g();var t=eU()();f(function(e){e.outputBlocks.push({id:t,localStartTime:Date.now(),isDone:!1,type:eA.kH.DEBUGGER,visualState:eA.MZ.EXPANDED,data:(0,Z._)({debugState:"paused"},eM({maxHistorySize:eW}))})}),m(t),v(eA.Ah.RUNNING)}"paused"===e&&h(eA.kH.DEBUGGER,function(e){e.data.debugState="paused"}),"running"===e&&h(eA.kH.DEBUGGER,function(e){e.data.debugState="running"}),"stopping"===e&&v(eA.Ah.STOPPING),"terminated"===e&&(h(eA.kH.DEBUGGER,function(e){e.localEndTime=Date.now(),e.data.emitMessage(eV),e.isDone=!0}),v(eA.Ah.IDLE))}),s=e.onOutput(function(e){var t=p(eA.kH.DEBUGGER);null==t||t.data.emitMessage(e)}))}),y.openChannel({name:"output",service:"output"},function(e){var t=e.channel;return T=t,N(),t.onCommand(function(e){if(null!=e.state){var t=e.state===B.api.State.Stopped;"STOPPING"===R.runningStage&&t&&I(function(e){e.runningStage="NONE"}),t?"SERVER"===R.runningStage&&I(function(e){e.runningStage="NONE"}):I(function(e){e.runningStage="SERVER"}),N();return}if(null!=e.outputBlockStartEvent&&null!=e.outputBlockStartEvent.measureStartTime){if(void 0!==R.outputBlocks.find(function(e){return e.type===eA.kH.EXECUTION&&!e.isDone}))return;var n=e.outputBlockStartEvent,r=n.cgroup,i=n.executionMode,o=eF(n.measureStartTime),a=eU()();I(function(e){e.outputBlocks.push({id:a,localStartTime:Date.now(),startTime:o,isDone:!1,type:eA.kH.EXECUTION,visualState:eA.MZ.EXPANDED,data:(0,Z._)({cgroup:r,executionMode:i===B.api.OutputBlockStartEvent.ExecutionMode.Run?"run":"interpret"},eM({maxHistorySize:eW}))}),e.outputBlocks.length>20&&e.outputBlocks.shift()}),G(a)}if(null!=e.output){var l=O(eA.kH.EXECUTION);null==l||l.data.emitMessage(e.output)}if(null!=e.hint){var c=O(eA.kH.EXECUTION);null==c||c.data.emitMessage("\r\n\x1b[0m\x1b[33m".concat(e.hint.text,"\x1b[0m\r\n"))}if(null!=e.stderr&&U(eA.kH.EXECUTION,function(t){t.data.stderr=(t.data.stderr||"")+e.stderr}),null!=e.error){var s=e.error;U(eA.kH.EXECUTION,function(e){e.error?e.error+="\n"+s:e.error=s})}if(null!=e.outputBlockEndEvent&&null!=e.outputBlockEndEvent.measureEndTime){var u,d=e.outputBlockEndEvent.exitCode;(0,_.j)(_.U3.WS_CONSOLE_OUTPUT_RAN,{exitCode:d,replId:null===(u=y.getContext())||void 0===u?void 0:u.repl.id,runId:R.runId});var f=eF(e.outputBlockEndEvent.measureEndTime);U(eA.kH.EXECUTION,function(e){e.data.emitMessage(eV),e.data.exitCode=d,e.localEndTime=Date.now(),e.endTime=f,e.isDone=!0})}}),function(){T=null,I(function(e){e.runId=eU()(),e.runState=eA.Ah.OFFLINE,e.runningStage="NONE",e.outputBlocks.forEach(function(e){if(!e.isDone){e.data.emitMessage(eV),e.localEndTime=Date.now(),e.isDone=!0;var t="Connection was lost";e.error?e.error+="\n"+t:e.error=t}})}),N(),A()}}),{mode:"outputs",run:function(e){return X.apply(this,arguments)},stopRun:function(){if(R.runState===eA.Ah.RUNNING){var e=M();if(!e.isStopped){e.stop(),I(function(e){e.runningStage="STOPPING"}),N();return}if("BEFORE_RUN"===R.runningStage){I(function(e){e.runningStage="NONE"}),N();return}I(function(e){e.runningStage="STOPPING"}),N(),null==T||T.send({clear:{}})}},sendInput:function(e){return F.apply(this,arguments)},onLocalRun:function(e){return E.on(eA.zW.LOCAL_RUN,e),function(){E.removeListener(eA.zW.LOCAL_RUN,e)}},onStateChanged:function(e){return E.on(eA.zW.STATE_CHANGE,e),function(){return E.removeListener(eA.zW.STATE_CHANGE,e)}},getRunState:function(){return R.runState},getOutputBlocks:function(){return R.outputBlocks},clearBlockHistory:function(){I(function(e){e.outputBlocks=e.outputBlocks.filter(function(e){return!e.isDone})}),A()},onBlockChanged:function(e){return E.on(eA.zW.BLOCK_CHANGED,e),function(){return E.removeListener(eA.zW.BLOCK_CHANGED,e)}},onAllBlocksChanged:function(e){return E.on(eA.zW.ALL_BLOCKS_CHANGED,e),function(){return E.removeListener(eA.zW.ALL_BLOCKS_CHANGED,e)}},resizeTerminalForBlock:function(e,t){if(T&&"open"===T.status){var n=R.outputBlocks.find(function(t){return t.id===e});if(!n)throw Error("tried to resize terminal of non-existing block");n.isDone||T.send({resizeTerm:t})}},startBlock:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:eA.MZ.EXPANDED,n=eU()();return I(function(r){r.outputBlocks.push({id:n,localStartTime:Date.now(),isDone:!1,visualState:t,type:e,data:(0,Z._)({},eM({maxHistorySize:eW}))})}),G(n),{id:n}},endBlock:function(e){I(function(t){var n=t.outputBlocks.find(function(t){return t.id===e});if(!n)throw Error("couldn't find a block");n.data.emitMessage(eV),n.localEndTime=Date.now(),n.isDone=!0}),G(e)},writeOutputToBlock:function(e,t){var n=R.outputBlocks.find(function(t){return t.id===e});n&&n.data.emitMessage(t)},writeErrorToBlock:function(e,t){I(function(n){var r=n.outputBlocks.find(function(t){return t.id===e});if(!r)throw Error("couldn't find a block");r.error?r.error+="\n"+t:r.error=t}),G(e)},setBlockVisualState:function(e,t){I(function(n){var r=n.outputBlocks.find(function(t){return t.id===e});if(!r)throw Error("couldn't find a block");r.visualState=t}),G(e)}}}({container:e.container,toolchain:e.toolchain,beforeRun:e.beforeRun,packager:e.packager,debuggest:e.debuggest}):"html"===e.mode&&(t=function(e){var t=e.beforeRun,n=e.container,r=(0,P.ZP)(),i=eA.Ah.OFFLINE,o="none",a=Math.random();function l(){var e=function(e){i!==e&&(i=e,r.emit(eA.zW.STATE_CHANGE,i))};if("none"!==o){e(eA.Ah.RUNNING);return}e(eA.Ah.IDLE)}function c(){return(c=(0,w._)(function(){var e;return(0,k.Jh)(this,function(n){switch(n.label){case 0:if(i!==eA.Ah.IDLE&&i!==eA.Ah.STOPPING)throw Error("Cannot run while state is not IDLE or STOPPING, got state: "+i);return a=e=Math.random(),r.emit(eA.zW.LOCAL_RUN),o="before-run",l(),[4,t(V.kg.timeStart({replLanguage:"html"}),{runId:e.toString(),type:"html"})];case 1:if(n.sent(),a!==e||"none"===o)return[2];return o="running",l(),o="none",l(),[2]}})})).apply(this,arguments)}return n.onConnectionStateChanged(function(e){e===U.em.CONNECTED&&(o="none",l())}),{mode:"html",run:function(){return c.apply(this,arguments)},stopRun:function(){if(i!==eA.Ah.RUNNING)throw Error("stopRun must be called when running but got ".concat(i));o="none",l()},onStateChanged:function(e){return r.on(eA.zW.STATE_CHANGE,e),function(){r.removeListener(eA.zW.STATE_CHANGE,e)}},onLocalRun:function(e){return r.on(eA.zW.LOCAL_RUN,e),function(){r.removeListener(eA.zW.LOCAL_RUN,e)}},getRunState:function(){return i}}}({beforeRun:e.beforeRun,container:e.container})),!t)throw Error("mode not supported: "+e.mode);return t}({mode:eo,container:e$,toolchain:e4,beforeRun:e5,packager:e8,debuggest:e7}),tt=(s=(0,P.ZP)(),u=new Promise(function(e){return c=e}),h=null,v=new Map,e$.openChannel({service:"chat",name:"broadcaster"},function(e){var t=e.channel,n=e.context;return n.currentUser&&(h=n.currentUser.username),t.onCommand(function(e){if("chatMessage"===e.body){var t=e.chatMessage;if(!t||!t.username||!t.text)throw Error("unexpected broadcast without a message");s.emit(f.MESSAGE_RECEIVED,{text:t.text,username:t.username})}}),c(t),function(){u=new Promise(function(e){return c=e})}}),{broadcastMessage:function(e,t){var n=t.text;return(0,w._)(function(){var t,r,i,o,a,l,c,s,d,f;return(0,k.Jh)(this,function(p){switch(p.label){case 0:return[4,u];case 1:if(t=p.sent(),!h)throw Error("Cannot broadcast without as username. Is currentUser in context?");r={text:n,username:h},i=!0,o=!1,a=void 0;try{for(l=v[Symbol.iterator]();!(i=(c=l.next()).done);i=!0)d=(s=(0,C._)(c.value,2))[0],f=s[1],d!==e&&f(r)}catch(e){o=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}return t.send({chatMessage:r}),[2]}})})()},onBroadcastReceived:function(e,t){return v.set(e,t),s.on(f.MESSAGE_RECEIVED,t),function(){s.removeListener(f.MESSAGE_RECEIVED,t),v.delete(e)}}}),tn=function(e){var t=e.container,n=e.toolchain,r=e.fs,i=e.enableMultipleLSPClientsPerFile,o=void 0!==i&&i,a=new Map,l=new Map,c={},s=!0;function u(e){var t=c[e];if(!t)throw Error("LSPNix: removeLanguage called with lspId never configured");var n=t.client;if(n){t.client=null,n.destroy();var r=!0,i=!1,o=void 0;try{for(var s,u=a[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var d=(0,C._)(s.value,2),f=d[0],h=d[1],p=l.get(f);if(p){p.delete(n),l.set(f,p);var m=!0,v=!1,g=void 0;try{for(var y,b=h[Symbol.iterator]();!(m=(y=b.next()).done);m=!0)(0,y.value)(Array.from(p))}catch(e){v=!0,g=e}finally{try{m||null==b.return||b.return()}finally{if(v)throw g}}}}}catch(e){i=!0,o=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}}t.closeChannel(),delete c[e]}function d(e,t){if(c[e])throw Error("LSPNix: addLanguage called with lspId already configured");c[e]={client:null,option:t,closeChannel:function(){}},s&&m(e)}var f=new Map;function h(e){if(!s)return!1;var t=c[e];return!!t&&!t.client}function p(e,t,n){new Date().getTime()-n.getTime()<5e3?t<3?setTimeout(function(){h(e)&&m(e,t+1)},1e3*Math.pow(2,t)):V.kg.error("LSP server is crash-looping. Giving up.",{lspId:e,appService:"lspnix"}):setTimeout(function(){h(e)&&m(e)})}function m(e){return v.apply(this,arguments)}function v(){return(v=(0,w._)(function(e){var n,i,u,d,h,m,v,g,y=arguments;return(0,k.Jh)(this,function(b){switch(b.label){case 0:if(n=y.length>1&&void 0!==y[1]?y[1]:0,!s)throw Error("LSPNix: Called startClient while not enabled");if(!c[e])throw Error("LSPNix: No config found for lspId: ".concat(e));if(!f.get(e))return[3,2];return[4,f.get(e)];case 1:if(b.sent())return[2];b.label=2;case 2:if(u=(i=c[e]).client,i.closeChannel,d=i.option,u)throw Error("LSPNix: A previous client is already set for language: ".concat(e));return h=function(){},m=new Promise(function(e){h=e}),f.set(e,m),v=[],g=t.openChannel({service:"lsp2",skip:function(e){var t=e.repl.language,n=t.startsWith("nix")||t.startsWith("html");return n||(V.kg.error("Skipped opening lsp channel for non-nix repl",{language:t,appService:"lspnix"}),h(null)),!n}},function(i){var u=i.channel,m=null,y=!1,b=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!y){y=!0,t||(h(null),f.delete(e)),v.forEach(function(e){return e()}),null==m||m.destroy(),(null===(o=c[e])||void 0===o?void 0:o.client)===m&&(c[e].client=null),t&&s||g();var n=!0,r=!1,i=void 0;try{for(var o,u,d=a[Symbol.iterator]();!(n=(u=d.next()).done);n=!0){var p=(0,C._)(u.value,2),b=p[0],w=p[1],Z=l.get(b);if(Z&&m&&Z.has(m)){Z.delete(m),Z.size?l.set(b,Z):l.delete(b);var x=!0,k=!1,S=void 0;try{for(var _,E=w[Symbol.iterator]();!(x=(_=E.next()).done);x=!0)(0,_.value)(Array.from(Z))}catch(e){k=!0,S=e}finally{try{x||null==E.return||E.return()}finally{if(k)throw S}}}}}catch(e){r=!0,i=e}finally{try{n||null==d.return||d.return()}finally{if(r)throw i}}}};if("open"!==u.status){V.kg.error("LSPNix got a channel that wasn't open. This is expected to be impossible.",{lspId:e,appService:"lspnix"});return}var S=new Date;return u.request({startLSP:{languageServerId:e}}).then(function(i){if(!i.ok){V.kg.error("LSP server failed to start",{lspId:e,appService:"lspnix",serverError:i.error});return}if(s&&c[e]){v.push(u.onCommand(function(t){t.state===B.api.State.Stopped&&(V.kg.error("LSP server unexpectedly disconnected",{lspId:e,appService:"lspnix"}),b(),s&&p(e,n,S))}));var g=0;eT(t,function(){return g++<5&&s&&eE(c[e].option,d)&&"open"===u.status}).then(function(t){if(!c[e]){V.kg.info("LSPNix: lsp map changed while getting working directory",{lspId:e,appService:"lspnix"});return}if(!eE(c[e].option,d)){V.kg.info("LSPNix: configuration changed while getting working directory",{lspId:e,appService:"lspnix"});return}if("open"!==u.status){V.kg.error("LSPNix: channel wasn't open after getting working directory",{lspId:e,appService:"lspnix"});return}if(t.error){V.kg.error("LSPNix: failed to get working directory",{lspId:e,appService:"lspnix",originalError:null===(_=t.error)||void 0===_?void 0:_.message});return}if(m=function(e){var t,n=e.connection,r=e.isSupportedFile,i=e.clientId,o=e.clientName,a=e.getWorkspaceConfiguration,l=e.onWorkspaceConfigurationChange,c=e.applyWorkspaceEdit,s=(0,P.ZP)();s.setMaxListeners(1/0);var u=null,d=ev.a.OFFLINE,f=ev.N.NOT_READY,h=null,p=!1,m=new Map,v=new Map,g=null;function y(e){if(!u)throw Error("Expected rootUri");var t=e.slice(u.length+1);try{return decodeURIComponent(t)}catch(e){throw G.$e(function(n){n.setExtra("fragment_to_decode",t),G.Tb(e)}),e}}function b(e){if(!u)throw Error("Expected rootUri");if(e.startsWith("/"))throw Error("Path must be relative. Got: ".concat(e));return u+"/"+e}function C(e){d!==e&&(d!==ev.a.INITIALIZED&&S(ev.N.NOT_READY),d=e,s.emit("SERVER_STATE_CHANGE",d))}function S(e){f!==e&&(f=e,s.emit("SERVER_HEALTH_CHANGE",f))}function _(e){s.emit("SEND_NOTIFICATION",e),n.write(e_(e))}function E(e){return T.apply(this,arguments)}function T(){return(T=(0,w._)(function(e){var t,r,o,a,l,c,u,f;return(0,k.Jh)(this,function(h){if(a=void 0===(o=(r=void 0===(t=e.options)?{}:t).id)?eS():o,l=r.signal,c=r.tap,u=(0,el._)(e,["options"]),!Number.isInteger(a))throw Error("Request ID must be an integer");return n.didClose()?[2,Promise.resolve({result:null,cancelled:!0})]:(s.emit("REQUEST",{id:a,data:u}),null==l||l.addEventListener("abort",function(){D(a)},{once:!0}),n.write(e_((0,x._)((0,Z._)({},u),{id:a}))),null===g&&(g=setTimeout(function(){S(ev.N.STALLED)},3e4)),f=new Promise(function(e){v.set(a,e)}),c&&c(f),[2,f.then(function(e){return null!==g&&(clearTimeout(g),g=null),d!==ev.a.INITIALIZED||e.cancelled||S(ev.N.READY),(function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=eb[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;if(a.supports(e))return a}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return new ew})(i).onResponse(u.method,e)})])})})).apply(this,arguments)}function R(e,t){n.write(e_((0,x._)((0,Z._)({},t),{id:e})))}function D(e){var t=v.get(e);t&&(s.emit("CANCEL_REQUEST",e),t({result:null,cancelled:!0}),v.delete(e),_({method:"$/cancelRequest",params:{id:e}}))}var I=0,B=new J(function(e){var t=v.get(e.id);if(e.id&&t){v.delete(e.id);var n=e.result,r=e.error;if((void 0!==n||r)&&s.emit("RESPONSE",e),void 0!==n){I=0,t({result:n,cancelled:!1});return}if(r){I++;var o=r.code,l=r.message,u=r.data;V.kg.error("LSP request failed",{code:o,lspId:i,errorMessage:l,data:JSON.stringify(u)}),t({error:r}),I>20&&(V.kg.error("LSP experienced 20 consecutive errors. Setting server health to 'BROKEN",{lspId:i}),S(ev.N.BROKEN),I=0);return}throw V.kg.error("LSP response message contained neither error nor result"),new eZ.Z("Expected either message or error in LSP response").setExtra("message",JSON.stringify(e))}var d=e.method;if("client/registerCapability"===d){var f=e.params.registrations;if(!f||!Array.isArray(f))throw Error("Expected registrations array");f.forEach(function(e){var t=e.method;if(!t)throw Error("Expected registration method");if(!h)throw Error("Expected server capabilities");var n=e.registerOptions||!0;switch(t){case"textDocument/definition":h.definitionProvider=!0;break;case"textDocument/typeDefinition":h.typeDefinitionProvider=!0;break;case"textDocument/implementation":h.implementationProvider=!0;break;case"textDocument/references":h.referencesProvider=!0;break;case"textDocument/hover":h.hoverProvider=!0;break;case"textDocument/semanticTokens":h.semanticTokensProvider=n;break;case"textDocument/completion":h.completionProvider=n;break;case"textDocument/formatting":h.documentFormattingProvider=n;break;case"textDocument/rename":h.renameProvider=n;break;case"textDocument/codeAction":h.codeActionProvider=n;break;case"textDocument/signatureHelp":h.signatureHelpProvider=n;break;case"textDocument/didSave":if("number"==typeof h.textDocumentSync)break;h.textDocumentSync=(0,x._)((0,Z._)({},h.textDocumentSync||{}),{save:n});break;case"textDocument/willSaveWaitUntil":if("number"==typeof h.textDocumentSync)break;h.textDocumentSync=(0,x._)((0,Z._)({},h.textDocumentSync||{}),{willSave:!0});break;case"textDocument/didChange":if("number"==typeof h.textDocumentSync)break;h.textDocumentSync=(0,x._)((0,Z._)({},h.textDocumentSync||{}),{change:n});break;case"textDocument/didOpen":case"textDocument/didClose":if("number"==typeof h.textDocumentSync)break;h.textDocumentSync=(0,x._)((0,Z._)({},h.textDocumentSync||{}),{openClose:!0});break;case"workspace/executeCommand":h.executeCommandProvider=n;break;default:V.kg.info("Unexpected dynamically registered capability in LSP client",{method:t})}s.emit("SERVER_CAPABILITIES_CHANGE",h)}),R(e.id,{result:null,cancelled:!1});return}if("workspace/applyEdit"===d){c(e.params).then(function(t){R(e.id,{result:t,cancelled:!1})});return}if("textDocument/publishDiagnostics"===d){var p=y(e.params.uri),g=m.get(p);if(!g)return;var b=e.params.diagnostics;if(es()(g.diagnostics,b))return;g.diagnostics=b,s.emit("DIAGNOSTICS",{path:p,diagnostics:b});return}if("workspace/configuration"===d){var w,C=e.params,k=Array(C.items.length).fill(null),_=null!==(w=null==a?void 0:a())&&void 0!==w?w:null;_&&(k=C.items.map(function(e){return e.section?ed()(_,e.section):_})),R(e.id,{result:k,cancelled:!1})}("window/logMessage"===d||"telemetry/event"===d)&&s.emit("RECEIVE_NOTIFICATION",e),"workspace/semanticTokens/refresh"===d&&s.emit("SEMANTIC_TOKENS_REFRESH")});function A(e){if(!h)throw Error("Expected client to be initialized");if(!h[e])throw Error("LSP Server does not support ".concat(e.replace(/Provider$/,"")));return h[e]}function L(e){return u&&e?e.filter(function(e){return"uri"in e?e.uri.startsWith(u):e.targetUri.startsWith(u)}):e}n.read(B.read);var N=function(){};return{initialize:function(e){var n=e.pwd,r=e.initializationOptions;return(0,w._)(function(){var e,i;return(0,k.Jh)(this,function(o){switch(o.label){case 0:return C(ev.a.INITIALIZING),u="file://".concat(n),[4,E({method:"initialize",params:{initializationOptions:r,capabilities:em({configurationSupport:{serverToClient:!!a,clientToServer:!!l}}),processId:null,rootUri:u,workspaceFolders:[{name:u,uri:u}]}})];case 1:if("error"in(e=o.sent()))throw Error("Something went wrong initializing the LSP client: ".concat(e.error.message));if(e.cancelled)throw Error("Initialize request cancelled");if(!e.result)throw Error("Expected result in initialize request");return _({method:"initialized",params:{}}),h=e.result.capabilities,t=e.result.serverInfo,s.emit("SERVER_CAPABILITIES_CHANGE",h),C(ev.a.INITIALIZED),l&&(N=l(function(e){_({method:"workspace/didChangeConfiguration",params:{settings:e}})})),a&&(i=a())&&_({method:"workspace/didChangeConfiguration",params:{settings:i}}),[2]}})})()},generateId:eS,notify:{didOpen:function(e,t){if(!r(e))throw Error("Path not supported");var n,o=m.get(e);if(o&&0!==o.buffers){o.buffers++,m.set(e,o);return}var a=null!==(n=null==o?void 0:o.version)&&void 0!==n?n:0;m.set(e,{version:a,buffers:1,diagnostics:[]}),_({method:"textDocument/didOpen",params:{textDocument:{uri:b(e),languageId:ek(e,i),text:t,version:a}}})},didChange:function(e,t){var n=m.get(e);if(!n)throw Error('Document for "'.concat(e,'" is not open'));n.version++,_({method:"textDocument/didChange",params:{textDocument:{uri:b(e),version:n.version},contentChanges:t}})},didSave:function(e){if(!m.get(e))throw Error('Document for "'.concat(e,'" is not open'));A("textDocumentSync"),_({method:"textDocument/didSave",params:{textDocument:{uri:b(e)}}})},didClose:function(e){var t=m.get(e);if(!t)throw Error('Document for "'.concat(e,'" is not open'));t.buffers--,t.buffers>0||(_({method:"textDocument/didClose",params:{textDocument:{uri:b(e)}}}),m.delete(e))},cancelRequest:function(e){D(e)}},request:{completion:function(e,t,n,r){return A("completionProvider"),E({options:r,method:"textDocument/completion",params:{textDocument:{uri:b(e)},position:t,context:n}})},resolveCompletionItem:function(e){if(!A("completionProvider").resolveProvider)throw Error("LSP Server does not support resolving completion items");return E({method:"completionItem/resolve",params:e})},signatureHelp:function(e,t,n){return E({options:n,method:"textDocument/signatureHelp",params:{textDocument:{uri:b(e)},position:t}})},hover:function(e,t,n){return E({options:n,method:"textDocument/hover",params:{textDocument:{uri:b(e)},position:t}})},codeActions:function(e,t,n,r){var i=m.get(e);if(!i)throw Error("Document for path ".concat(e," is not open."));var o=i.diagnostics.filter(function(e){return(0,ex.dI)(e.range,t)});return E({method:"textDocument/codeAction",params:{textDocument:{uri:b(e)},range:t,context:(0,x._)((0,Z._)({},r),{diagnostics:o})},options:n})},resolveCodeAction:function(e){return E({method:"codeAction/resolve",params:e})},executeCommand:function(e,t){return E({method:"workspace/executeCommand",params:{command:e,arguments:t}})},format:function(e,t){return A("documentFormattingProvider"),E({method:"textDocument/formatting",params:{textDocument:{uri:b(e)},options:t}})},formatRange:function(e,t,n){return A("documentRangeFormattingProvider"),E({method:"textDocument/rangeFormatting",params:{textDocument:{uri:b(e)},range:t,options:n}})},findDefinitions:function(e,t,n){var r=!(arguments.length>3)||void 0===arguments[3]||arguments[3];return(0,w._)(function(){var i,o;return(0,k.Jh)(this,function(a){switch(a.label){case 0:return A("definitionProvider"),[4,E({options:n,method:"textDocument/definition",params:{textDocument:{uri:b(e)},position:t}})];case 1:if(!1!==(i=a.sent()).cancelled)return[2,i];return(o=i.result)&&r&&(o=L(Array.isArray(o)?o:[o])),[2,(0,x._)((0,Z._)({},i),{result:o})]}})})()},findTypeDefinitions:function(e,t,n){var r=!(arguments.length>3)||void 0===arguments[3]||arguments[3];return(0,w._)(function(){var i,o;return(0,k.Jh)(this,function(a){switch(a.label){case 0:return A("typeDefinitionProvider"),[4,E({options:n,method:"textDocument/typeDefinition",params:{textDocument:{uri:b(e)},position:t}})];case 1:if(!1!==(i=a.sent()).cancelled)return[2,i];return(o=i.result)&&r&&(o=L(Array.isArray(o)?o:[o])),[2,(0,x._)((0,Z._)({},i),{result:o})]}})})()},findImplementations:function(e,t,n){var r=!(arguments.length>3)||void 0===arguments[3]||arguments[3];return(0,w._)(function(){var i,o;return(0,k.Jh)(this,function(a){switch(a.label){case 0:return A("implementationProvider"),[4,E({options:n,method:"textDocument/implementation",params:{textDocument:{uri:b(e)},position:t}})];case 1:if(!1!==(i=a.sent()).cancelled)return[2,i];return(o=i.result)&&r&&(o=L(Array.isArray(o)?o:[o])),[2,(0,x._)((0,Z._)({},i),{result:o})]}})})()},findReferences:function(e,t,n){return A("referencesProvider"),E({method:"textDocument/references",params:{textDocument:{uri:b(e)},position:t,context:n}})},rename:function(e,t,n,r){return A("renameProvider"),E({options:r,method:"textDocument/rename",params:{textDocument:{uri:b(e)},position:t,newName:n}})},prepareRename:function(e,t){var n=A("renameProvider");if("boolean"==typeof n||!n.prepareProvider)throw Error("LSP server does not support prepare rename");return E({method:"textDocument/prepareRename",params:{textDocument:{uri:b(e)},position:t}})},documentHighlights:function(e,t,n){return(0,w._)(function(){return(0,k.Jh)(this,function(r){switch(r.label){case 0:return[4,E({options:n,method:"textDocument/documentHighlight",params:{position:t,textDocument:{uri:b(e)}}})];case 1:return[2,r.sent()]}})})()},documentSymbol:function(e,t){return(0,w._)(function(){var n;return(0,k.Jh)(this,function(r){switch(r.label){case 0:return[4,E({options:t,method:"textDocument/documentSymbol",params:{textDocument:{uri:b(e)}}})];case 1:if(!("result"in(n=r.sent())))return[2,n];if(n.result)return[2,{result:n.result,cancelled:!1}];return[2]}})})()}},semanticTokensFull:function(e,t){if(!A("semanticTokensProvider").full)throw Error("LSP server does not support full semantic tokens");return E({options:t,method:"textDocument/semanticTokens/full",params:{textDocument:{uri:b(e)}}})},semanticTokensDelta:function(e,t,n){var r=A("semanticTokensProvider");if(!(null==r?void 0:r.full)||"object"!=typeof r.full||!r.full.delta)throw Error("LSP server does not support delta semantic tokens");return E({options:n,method:"textDocument/semanticTokens/full/delta",params:{textDocument:{uri:b(e)},previousResultId:t}})},semanticTokensRange:function(e,t,n){if(!A("semanticTokensProvider").range)throw Error("LSP server does not support range semantic tokens");return E({options:n,method:"textDocument/semanticTokens/range",params:{textDocument:{uri:b(e)},range:t}})},onDiagnostics:(0,P.JV)(s,"DIAGNOSTICS"),onServerStateChange:(0,P.JV)(s,"SERVER_STATE_CHANGE"),onServerHealthChange:(0,P.JV)(s,"SERVER_HEALTH_CHANGE"),onServerCapabilitiesChange:(0,P.JV)(s,"SERVER_CAPABILITIES_CHANGE"),onRequest:(0,P.JV)(s,"REQUEST"),onResponse:(0,P.JV)(s,"RESPONSE"),onCancelRequest:(0,P.JV)(s,"CANCEL_REQUEST"),onSendNotification:(0,P.JV)(s,"SEND_NOTIFICATION"),onReceiveNotification:(0,P.JV)(s,"RECEIVE_NOTIFICATION"),onSemanticTokensRefresh:(0,P.JV)(s,"SEMANTIC_TOKENS_REFRESH"),shutdown:function(){for(var e in C(ev.a.EXITING),m.clear(),v)D(Number(e));N(),E({method:"shutdown"}).then(function(){_({method:"exit"}),C(ev.a.EXITED),s.removeAllListeners()})},isDestroyed:function(){return p},destroy:function(){for(var e in p=!0,m.clear(),v)D(Number(e));N(),C(ev.a.EXITED),s.removeAllListeners()},getServerState:function(){return d},getServerHealth:function(){return f},getServerCapabilities:function(){return h},getServerInfo:function(){return t},getDiagnostics:function(e){var t=m.get(e);if(!t)throw Error("File with path ".concat(e," is not open."));return t.diagnostics},isOpen:function(e){return m.has(e)},documentUriToPath:y,pathToDocumentURI:b,isSupportedFile:r,getLanguageId:function(e){return ek(e,i)},clientId:i,clientName:o}}({connection:{read:function(e){"open"===u.status&&u.onCommand(function(t){t.output&&e(t.output)})},write:function(e){if("open"!==u.status){(null==m?void 0:m.isDestroyed())&&V.kg.error("LSPNix: tried to write to channel but the lsp client is already destroyed");return}u.send({input:e})},didClose:function(){return"open"!==u.status}},clientId:e,clientName:c[e].option.name,isSupportedFile:function(e){return(0,er.F)(e,d)},applyWorkspaceEdit:(g=(0,w._)(function(e){var t;return(0,k.Jh)(this,function(n){return(t=e.edit,m)?[2,(0,ea.w)({edit:t,fs:r,client:m})]:[2,{applied:!1}]})}),function(e){return g.apply(this,arguments)}),getWorkspaceConfiguration:function(){if(!(null===(e=d.config)||void 0===e?void 0:e.configurationJson))return null;var e,t=null;try{t=JSON.parse(d.config.configurationJson)}catch(e){V.kg.error("Failed to parse LSP workspace configuration",{configurationJson:d.config.configurationJson})}return t}}),null===(y=d.config)||void 0===y?void 0:y.initializationOptionsJson)try{E=JSON.parse(d.config.initializationOptionsJson)}catch(e){V.kg.error("Failed to parse LSP initializationOptions",{initializationOptionsJson:d.config.initializationOptionsJson})}var i,g,y,_,E,T=m.initialize({pwd:t.workingDirectory,initializationOptions:E}).catch(function(t){if((null==t?void 0:t.message)!=="Initialize request cancelled")throw V.kg.error("LSPNix: failed to initialize client",{lspId:e,appService:"lspnix",originalError:null==t?void 0:t.message}),t});v.push(m.onServerHealthChange(function(t){if(t===ev.N.BROKEN&&(V.kg.info("LSP: Server health broken",{lspId:e}),b(),s)){V.kg.info("LSP: retrying after server health broken",{lspId:e}),p(e,n,S);return}}),m.onServerStateChange((i=(0,w._)(function(t){var n,r,i,s,p,v,g,y,w,Z,x,S,_,E,R;return(0,k.Jh)(this,function(k){switch(k.label){case 0:if("open"!==u.status)return V.kg.info("LSPNix: channel wasn't open on state change",{lspId:e,appService:"lspnix",state:t}),b(),[2];if(!m)return V.kg.info("LSPNix: client was null on state change. This should never happen",{lspId:e,appService:"lspnix",state:t}),b(),[2];if(!eE(c[e].option,d))return V.kg.info("LSPNix: configuration changed and received state change",{lspId:e,appService:"lspnix",state:t}),b(),[2];if(t===ev.a.EXITED)return V.kg.info("LSP server exited via 'exit' notification",{lspId:e,appService:"lspnix"}),b(),[2];if(t!==ev.a.INITIALIZED)return[2];return[4,T];case 1:if(k.sent(),"open"!==u.status)return V.kg.info("LSPNix: channel wasn't open after initialization",{lspId:e,appService:"lspnix"}),b(),[2];h(m),f.delete(e),c[e].client=m,n=!0,r=!1,i=void 0;try{for(s=a[Symbol.iterator]();!(n=(p=s.next()).done);n=!0)if(g=(v=(0,C._)(p.value,2))[0],y=v[1],(0,er.F)(g,d)&&(w=l.get(g),o||!w||!w.size)){Z=w?w.add(m):new Set([m]),l.set(g,Z),x=!0,S=!1,_=void 0;try{for(E=y[Symbol.iterator]();!(x=(R=E.next()).done);x=!0)(0,R.value)(Array.from(Z))}catch(e){S=!0,_=e}finally{try{x||null==E.return||E.return()}finally{if(S)throw _}}}}catch(e){r=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw i}}return[2]}})}),function(e){return i.apply(this,arguments)})))})}}),function(e){b(e.willReconnect)}}),c[e].closeChannel=g,[2]}})})).apply(this,arguments)}function g(e){var t=null==e?void 0:e.languageServers;if(!t||0===t.length){var n=!0,r=!1,i=void 0;try{for(var o,a=Object.keys(c)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;u(l)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return}var s={},f=!0,h=!1,p=void 0;try{for(var m,v=t[Symbol.iterator]();!(f=(m=v.next()).done);f=!0){var g=m.value;s[g.id]=g}}catch(e){h=!0,p=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw p}}var y=!0,b=!1,w=void 0;try{for(var Z,x=Object.keys(c)[Symbol.iterator]();!(y=(Z=x.next()).done);y=!0){var C=Z.value;s[C]||u(C)}}catch(e){b=!0,w=e}finally{try{y||null==x.return||x.return()}finally{if(b)throw w}}var k=!0,S=!1,_=void 0;try{for(var E,T=Object.keys(s)[Symbol.iterator]();!(k=(E=T.next()).done);k=!0){var R=E.value,D=c[R],I=s[R];if(!D){d(R,I);continue}eE(D.option,I)||(u(R),d(R,I))}}catch(e){S=!0,_=e}finally{try{k||null==T.return||T.return()}finally{if(S)throw _}}}function y(){return(y=(0,w._)(function(){var e;return(0,k.Jh)(this,function(t){try{e=n.configs.current,g(e),n.configs.subscribe(g)}catch(e){V.kg.error("LSP initialization failed: "+e.message)}return[2]})})).apply(this,arguments)}return function(){y.apply(this,arguments)}(),{disable:function(){if(s){s=!1;var e=!0,t=!1,n=void 0;try{for(var r,i=Object.values(c)[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;o.closeChannel(),null===(h=o.client)||void 0===h||h.destroy(),o.client=null;var u=!0,d=!1,f=void 0;try{for(var h,p,m=a[Symbol.iterator]();!(u=(p=m.next()).done);u=!0){var v=(0,C._)(p.value,2),g=v[0],y=v[1];if(l.has(g)){l.delete(g);var b=!0,w=!1,Z=void 0;try{for(var x,k=y[Symbol.iterator]();!(b=(x=k.next()).done);b=!0)(0,x.value)([])}catch(e){w=!0,Z=e}finally{try{b||null==k.return||k.return()}finally{if(w)throw Z}}}}}catch(e){d=!0,f=e}finally{try{u||null==m.return||m.return()}finally{if(d)throw f}}}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},enable:function(){if(!s){s=!0;var e=!0,t=!1,n=void 0;try{for(var r,i=Object.keys(c)[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;m(o)}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}}},onClient:function(e,t){a.has(e)||a.set(e,[]),null===(d=a.get(e))||void 0===d||d.push(t);var n=l.get(e);if(n&&n.size)t(Array.from(n));else{var r=[],i=!0,s=!1,u=void 0;try{for(var d,f,h=Object.values(c)[Symbol.iterator]();!(i=(f=h.next()).done);i=!0){var p=f.value;if((0,er.F)(e,p.option)&&p.client&&(r.push(p.client),!o))break}}catch(e){s=!0,u=e}finally{try{i||null==h.return||h.return()}finally{if(s)throw u}}r.length&&t(r)}return function(){var n,r=null!==(n=a.get(e))&&void 0!==n?n:[];a.set(e,r.filter(function(e){return e!==t}))}}}}({container:e$,toolchain:e4,fs:e0,enableMultipleLSPClientsPerFile:void 0!==eC&&eC}),tr=(T=(g={container:e$,beforeRun:e5}).container,N=g.beforeRun,W=(0,P.ZP)(),H=ee.Z.Idle,z=new Date(0),j=!1,W.on(ee.z.TEST_RESULT,function(e){j=j&&"passed"===e.body}),q=function(e){W.emit(ee.z.STATE_CHANGED,e),H=e},et=(0,w._)(function(e,t){var n,r,i,o,a,l,c,s,u,d,f;return(0,k.Jh)(this,function(h){switch(h.label){case 0:if(n=Q.api.Payload.fromObject(t),r=Q.api.Payload.verify(n))throw r;return i=new(en())(function(e){var t=Q.api.Response.fromObject(e),r=Q.api.Response.verify(t);if(r){G.Tb(TypeError("invalid payload received"),function(i){return i.setExtras({validationError:r,payload:n,message:e,response:t})});return}switch(t.body){case"error":return W.emit(ee.z.ERROR,t.error);case"instructionResult":return W.emit(ee.z.INSTRUCTION_RESULT,t.instructionResult);case"testResult":return W.emit(ee.z.TEST_RESULT,t.testResult);case"status":switch(t.status){case Q.api.Status.Ready:return q(ee.Z.Ready);case Q.api.Status.Building:return q(ee.Z.Building);case Q.api.Status.Running:return q(ee.Z.Running)}}}),o=e.onCommand(function(e){if(e.output)try{i.submit(e.output)}catch(t){G.Tb(SyntaxError("invalid response received from i/o testing binary"),function(r){return r.setExtras({err:t,payload:n,cmd:e})})}}),a=e.request({exec:{args:["io-tester"],splitStderr:!0,lifecycle:B.api.Exec.Lifecycle.STDIN,splitLogs:!0}}),[4,new Promise(function(e,t){var n,r=function(){n(),e()};W.once(ee.z.STATE_CHANGED,r);var i=setTimeout(function(){n(),t(Error("timeout while waiting for iotester to start"))},2e4);n=function(){clearTimeout(i),W.off(ee.z.STATE_CHANGED,r)}})];case 1:return h.sent(),[4,e.request({input:JSON.stringify(n)+"\n"})];case 2:if(!(l=h.sent()).ok)throw s=Error(null!==(c=l.error)&&void 0!==c?c:"unexpected error occurred while sending input to i/o testing binary"),G.Tb(s,function(e){return e.setExtra("status",l)}),s;return[4,a];case 3:return(u=h.sent()).ok||(f=Error(null!==(d=u.error)&&void 0!==d?d:"unexpected error occurred while executing i/o testing binary"),G.Tb(f,function(e){return e.setExtra("result",u)})),o(),[2]}})}),{run:function(e){if(H!==ee.Z.Idle)throw Error("iotester already running");return q(ee.Z.Starting),z=new Date,j=!0,N().then(function(){return new Promise(function(t){var n=T.openChannel({service:"exec"},function(r){var i="",o="",a=r.channel.onCommand(function(e){e.log?i+=e.log:e.stderr&&(o+=e.stderr)});return t((function(e,t){return et.apply(this,arguments)})(r.channel,e).finally(function(){a(),n(),(o||i)&&G.Tb(Error("logs received from IOTester"),function(t){return t.setExtras({logs:i,stderr:o,payload:e})})})),n})})}).catch(function(e){return j=!1,Promise.reject(e)}).finally(function(){return q(ee.Z.Idle)})},get lastRunAt(){return z},get state(){return H},get lastRunDidPass(){return j},onInstructionResult:function(e){return W.on(ee.z.INSTRUCTION_RESULT,e),function(){W.off(ee.z.INSTRUCTION_RESULT,e)}},onStateChanged:function(e){return W.on(ee.z.STATE_CHANGED,e),function(){W.off(ee.z.STATE_CHANGED,e)}},onTestResult:function(e){return W.on(ee.z.TEST_RESULT,e),function(){W.off(ee.z.TEST_RESULT,e)}},onError:function(e){return W.on(ee.z.ERROR,e),function(){W.off(ee.z.ERROR,e)}}}),ti=(0,K.Z)({container:e$,fs:e0}),to=function(e){var t,n,r=e.container,i=e.nixService;function o(e){return a.apply(this,arguments)}function a(){return(a=(0,w._)(function(e){return(0,k.Jh)(this,function(t){switch(t.label){case 0:if(e&&(n=void 0),!n){var r;n=new Promise((r=(0,w._)(function(e){var t,n;return(0,k.Jh)(this,function(r){switch(r.label){case 0:return[4,i.listPackages()];case 1:if(null==(n=r.sent())?void 0:null===(t=n.packages)||void 0===t?void 0:t.some(function(e){return"pkgs.postgresql"===e.name}))return[3,3];return[4,i.addPackages(["pkgs.postgresql"])];case 2:return r.sent(),e(),[3,4];case 3:e(),r.label=4;case 4:return[2]}})}),function(e){return r.apply(this,arguments)}))}return[4,n];case 1:return t.sent(),[2]}})})).apply(this,arguments)}return{ensureNixPsqlPackageInstalled:o,run:(t=(0,w._)(function(e){var t,n,i,a,l,c,s,u,d,f,h,p,m;return(0,k.Jh)(this,function(v){switch(v.label){case 0:return t=e.query,n=e.connectionString,[4,o()];case 1:v.sent(),i=(0,eG.Z)({container:r}),a=[],l=null,c=new eB.t(function(e){return a.push(e)}),s=null,u=!1,d=new Promise(function(e){var t=i.onStateChanged(function(n){var r=n.state,i=n.stderrBuffer;if(r===B.api.State.Running){u=!0;return}u&&(s=i,t(),e())})}),i.onOutput(function(e){try{c.process(e)}catch(t){l||(l=t,G.Tb(t,function(t){return t.setExtra("chunk",e)}))}}),v.label=2;case 2:return v.trys.push([2,,5,6]),[4,i.request({args:["psql",n,"--csv","--command",t],splitStderr:!0})];case 3:return f=v.sent(),[4,d];case 4:return v.sent(),f.error&&!s&&(s=f.error),c.flush(),[3,6];case 5:return i.dispose(),[7];case 6:if(s)return[2,{columns:c.headers(),rows:a,error:s}];if(l)return h=l.message,[2,{columns:null!==(p=c.headers())&&void 0!==p?p:[],rows:a,error:h}];return[2,{columns:null!==(m=c.headers())&&void 0!==m?m:[],rows:a,error:null}]}})}),function(e){return t.apply(this,arguments)})}}({container:e$,nixService:e3}),ta=(0,eH.Z)({container:e$}),{session:eQ,presence:e1,packager:e8,container:e$,fs:e0,runner:te,debuggest:e7,broadcast:tt,dotReplit:e2,nixService:e3,lspnix:tn,iotester:tr,git:ti,psql:to,userEvents:eK,replspaceApi:e6,toolchain:e4,ports:e9,secrets:ta});return null==tl||tl.span.end(),r(tc),function(){r(null),setTimeout(function(){tc.container.destroy()},500)}},[e]),n}(u=b||(b={})).CHANNEL_OPENED="CHANNEL_OPENED",u.EVENT_SENT="EVENT_SENT"},61891:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(66626),i=n(75271);function o(e,t){var n=(0,r._)((0,i.useState)(null),2),o=n[0],a=n[1];return(0,i.useEffect)(function(){var n=!1;return e.readFile(t).then(function(e){n||a(e)}),function(){n=!0}},[e,t]),o}},7599:function(e,t,n){n.d(t,{J:function(){return r},O:function(){return i}});var r="users.noreply.replit.com",i="users.noreply.github.com"},54108:function(e,t,n){n.d(t,{J:function(){return i},e:function(){return r}});var r=(0,n(25731).u)(null);function i(e,t,n){var i,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Date.now();Array.isArray(e)||(e=[e]);var a=null!==(i=t.output)&&void 0!==i?i:"",l=t.error,c=n?o:Date.now(),s="".concat(o,"-").concat(Math.random());r.set({input:e,output:a,error:l,start:o,end:c,cached:n,key:s})}},26151:function(e,t,n){n.d(t,{Z:function(){return A}});var r=n(27387),i=n(66626),o=n(63257),a=n(96583),l=n(86763),c=n.n(l),s=n(96082),u=n(42471),d=n(72106),f=n(73878),h=".git",p=n(37782),m=n(38242),v=n(7599),g=n(21262),y=n(71440);function b(){var e=(0,g._)(["\n  fragment GitServiceGitHubUser on CurrentUser {\n    image\n    username\n    email\n    firstName\n    lastName\n    gitHubInfo {\n      isAppCurrentlyInstalled\n      accessToken\n      userInfo {\n        name\n        username\n        email\n        avatarUrl\n      }\n    }\n  }\n"]);return b=function(){return e},e}function w(){var e=(0,g._)(["\n  query GitServiceCurrentUser {\n    currentUser {\n      id\n      ...GitServiceGitHubUser\n    }\n  }\n  ","\n"]);return w=function(){return e},e}var Z=(0,y.Ps)(b()),x=(0,y.Ps)(w(),Z);function C(e){return k.apply(this,arguments)}function k(){return(k=(0,r._)(function(e){var t,n,r,i,o,l,c,s,d,f,h,p,g,y,b,w,Z,C,k,S,_,E;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return t=e.defaultUsername,n=e.defaultUserId,r=e.onProfiles,l=new Map,[4,null===m.l||void 0===m.l?void 0:m.l.query({query:x,fetchPolicy:"network-only",context:{noBatch:!0}})];case 1:var T,R;return h=(f=null!==(d=null==(s=(null!==(c=a.sent())&&void 0!==c?c:{data:null}).data)?void 0:s.currentUser)&&void 0!==d?d:{username:t,id:n,firstName:null,lastName:null}).id,p=f.firstName,g=f.lastName,y=f.username,h&&y&&(w=y,p&&(w=p),g&&(w=g),p&&g&&(w=p+" "+g),C={provider:u.rG.REPLIT_DEFAULT,email:"".concat(h,"-").concat(y,"@").concat(v.J),name:w,username:y,avatar:null!==(Z=null==s?void 0:null===(b=s.currentUser)||void 0===b?void 0:b.image)&&void 0!==Z?Z:null},l.set(C.provider,C)),(k=null==s?void 0:null===(o=s.currentUser)||void 0===o?void 0:null===(i=o.gitHubInfo)||void 0===i?void 0:i.userInfo)&&k.email&&k.username&&(null==s?void 0:null===(R=s.currentUser)||void 0===R?void 0:null===(T=R.gitHubInfo)||void 0===T?void 0:T.isAppCurrentlyInstalled)&&(E={provider:u.rG.GITHUB,email:k.email,name:null!==(S=k.name)&&void 0!==S?S:k.username,username:k.username,avatar:null!==(_=k.avatarUrl)&&void 0!==_?_:null},l.set(E.provider,E)),r(l),[2]}})})).apply(this,arguments)}var S=n(12285),_=n(41733),E=n(25722),T=n(10777),R=function(){"use strict";function e(t,n){(0,S._)(this,e),this.cache=new Map,this.lastInvalidation=0,this.ttl=t,this.debounceTime=n}var t=e.prototype;return t.has=function(e){return this.cache.has(e)},t.get=function(e){var t=this.cache.get(e);if(!t)throw Error("No value found for key: ".concat(e));return t.result},t.set=function(e,t){var n=this,r=this.cache.get(e);r&&(clearTimeout(r.timeout),this.cache.delete(e));var i={result:t,timeout:setTimeout(function(){return n.cache.delete(e)},this.ttl),pending:!0};t.finally(function(){return i.pending=!1}),this.cache.set(e,i)},t.invalidate=function(){if(!(Date.now()-this.lastInvalidation<this.debounceTime)){var e=new Map,t=!0,n=!1,r=void 0;try{for(var o,a=this.cache[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=(0,i._)(o.value,2),c=l[0],s=l[1];s.pending?e.set(c,s):clearTimeout(s.timeout)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}this.cache=e,this.lastInvalidation=Date.now()}},t.clear=function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.cache.values()[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;clearTimeout(o.timeout)}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.cache.clear(),this.lastInvalidation=0},e}(),D=n(54108),I=n(61932),B=n(25731);function G(){return(G=(0,r._)(function(e,t,n,r){var i,o,l,c,s,d,f;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if("open"!==e.status)return[2,{output:"JS Error\nchannel closed before command was run",error:u.aq.CHANNEL_CLOSED}];a.label=1;case 1:return a.trys.push([1,3,,4]),i="",o=e.onCommand(function(e){null!==e.output&&void 0!==e.output&&(i+=e.output)}),l=void 0,(c=Promise.race([new Promise(function(e){return l=setTimeout(e,9e4)}),e.request({exec:{env:n,args:t,noUserEnv:!0}})])).finally(function(){o(),clearTimeout(l)}),[4,c];case 2:if(void 0===(s=a.sent()))return T.kg.error("Git request timed out.",(0,_._)({appService:"git",command:t,gitEnv:JSON.stringify(n),TIMEOUT:9e4},r)),[2,{output:i,error:u.aq.TIMEOUT}];if(!s.ok&&s.channelClosed)return[2,{output:"JS Error\nchannel closed during command execution",error:u.aq.CHANNEL_CLOSED}];if(s.error||!s.ok)return[2,{output:d="".concat(s.error,"\n").concat(i),error:(0,u.mB)(d)}];return[2,{output:i,error:null}];case 3:return f=a.sent(),E.$e(function(e){e.setTag("service","git"),e.setExtra("command",t),e.setExtra("env",n),r&&e.setExtra("options",r),E.Tb(f)}),[2,{output:"JS Error\n".concat(String(f)),error:u.aq.UNKNOWN_NOT_GIT}];case 4:return[2]}})})).apply(this,arguments)}var P=function(){"use strict";function e(t){var n=t.container,i=t.getEnv,o=t.awaitPromise,l=this;(0,S._)(this,e),this.cache=new R(3e4,2e3),this.running=(0,B.u)(!1),this.queue=[],n.openChannel({service:"exec"},function(e){var t,n,c=e.channel,s=(t=(0,r._)(function(e,t){var n,r;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(0===e.length)throw Error("Expected at least one command");if(!o)return[3,2];return[4,o];case 1:a.sent(),a.label=2;case 2:return n=Date.now(),[4,function(e,t,n,r){return G.apply(this,arguments)}(c,["bash","-c",Array.isArray(e)?e.join(" && "):e],i(),t)];case 3:if(r=a.sent(),(0,D.J)(e,r,!1,n),r.error)return[2,r];return[2,{output:(null==t?void 0:t.verbatim)?r.output:r.output.trim(),error:null}]}})}),function(e,n){return t.apply(this,arguments)}),u=function(e,t){if(0===e.length)throw Error("Expected at least one command");var n=Array.isArray(e)?e.join(" && "):e;if(l.cache.has(n)){var r=l.cache.get(n);return r.then(function(t){(0,D.J)(e,t,!0)}),r}var i=s(n,t);return l.cache.set(n,i),i},d=function(e,t){return l.cache.clear(),s(e,t)},f=(n=(0,r._)(function(){var e;return(0,a.Jh)(this,function(t){switch(t.label){case 0:if(!(l.queue.length>0)||"open"!==c.status)return[3,7];if(!(e=l.queue.shift()))return[3,6];if("read"!==e.type)return[3,2];return[4,e.fn(u)];case 1:case 3:return t.sent(),[3,6];case 2:if("write"!==e.type)return[3,4];return[4,e.fn(d)];case 4:return[4,e.fn(s)];case 5:t.sent(),t.label=6;case 6:return[3,0];case 7:return 0===l.queue.length&&l.running.set(!1),[2]}})}),function(){return n.apply(this,arguments)});return l.running.current&&f(),l.running.subscribe(function(e){e&&f()})})}var t=e.prototype;return t.add=function(e,t){var n,i=(0,I.Z)();return this.queue.push({type:t,fn:(n=(0,r._)(function(t){var n;return(0,a.Jh)(this,function(r){switch(r.label){case 0:return[4,e(t)];case 1:return n=r.sent(),i.resolve(n),[2]}})}),function(e){return n.apply(this,arguments)})}),this.running.current||this.running.set(!0),i.promise},t.wrap=function(e,t){var n=this;if("function"!=typeof e)throw Error("Expected a function");return function(){for(var r=arguments.length,i=Array(r),a=0;a<r;a++)i[a]=arguments[a];return n.add(function(t){return e.apply(void 0,[t].concat((0,o._)(i)))},t)}},e}();function A(e){var t,n=e.container,l=e.fs,m=e.provideProfiles,v=void 0===m?C:m,g=(0,s.ZP)();g.setMaxListeners(1/0);var y=(0,u.Ch)(),b=!1,w=new Map,Z=null,x=n.getContext(),k=(t=(0,r._)(function(e){var t,n;return(0,a.Jh)(this,function(r){switch(r.label){case 0:return[4,v({defaultUsername:null==x?void 0:null===(t=x.currentUser)||void 0===t?void 0:t.username,defaultUserId:null==x?void 0:null===(n=x.currentUser)||void 0===n?void 0:n.id,onProfiles:function(t){var n=!0,r=!1,o=void 0;try{for(var a,l=t[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=(0,i._)(a.value,2),s=c[0],d=c[1];w.set(s,d),g.emit(u.dq.NEW_PROFILE)}}catch(e){r=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}t.has(u.rG.GITHUB)||w.delete(u.rG.GITHUB);var f=w.get(u.rG.REPLIT_DEFAULT),h=w.get(u.rG.GITHUB);if(Z&&!e&&(e=Z.provider),e===u.rG.GITHUB&&h)Z=h;else{if(!f)return;Z=f}g.emit(u.dq.CHANGED_PROFILE)}})];case 1:return[2,r.sent()]}})}),function(e){return t.apply(this,arguments)}),S=new P({container:n,getEnv:function(){return y},awaitPromise:k(u.rG.GITHUB)});g.on(u.dq.FS_CHANGE,function(){return S.cache.invalidate()}),g.on(u.dq.FORCED_REFRESH,function(){return S.cache.invalidate()}),g.on(u.dq.NEW_PROFILE,function(){return S.cache.invalidate()}),g.on(u.dq.CHANGED_PROFILE,function(){return S.cache.invalidate()});var _=function(){var e,t=n.getContext(),r=null==t?void 0:null===(e=t.currentUser)||void 0===e?void 0:e.id;if(null!=r){var i="[init]\ndefaultBranch = main\n[user]\n";""!==y.GIT_AUTHOR_EMAIL&&(i+="email = ".concat(y.GIT_AUTHOR_EMAIL.replace(/'/g,"'\"'\"'"),"\n")),""!==y.GIT_AUTHOR_NAME&&(i+="name = ".concat(y.GIT_AUTHOR_NAME.replace(/'/g,"'\"'\"'"),"\n"));var o="/run/replit/user/".concat(r,"/.config/git");null!=r&&n.exec("bash","-c","tmpf=$(mktemp); mkdir -p ".concat(o," && echo '").concat(i,'\' > "$tmpf" && mv "$tmpf" ').concat("".concat(o,"/config")))}};return n.onConnectionStateChanged(function(e){e===p.em.CONNECTED&&_()}),g.on(u.dq.CHANGED_PROFILE,function(){null!=Z&&(y=(0,u.Ch)({author:{username:Z.name,email:Z.email}}),_())}),{getEnv:function(){return y},getProfiles:function(){return Array.from(w.values())},hasProfile:function(e){return w.has(e)},getProfile:function(e){var t=w.get(e);if(!t)throw Error("Fetched a profile that has not been setup!");return t},addProfile:function(e){w.set(e.provider,e),g.emit(u.dq.NEW_PROFILE)},getCurrentProfile:function(){return Z},setCurrentProfile:function(e){var t=w.get(e);if(!t)throw Error("Can't set a non-existent profile!");Z=t,y=(0,u.Ch)({author:{username:t.name,email:t.email}}),g.emit(u.dq.CHANGED_PROFILE)},onProfileAdded:function(e){var t=function(){e(Array.from(w.values()))};return g.on(u.dq.NEW_PROFILE,t),function(){g.off(u.dq.NEW_PROFILE,t)}},onCurrentProfileChanged:function(e){var t=function(){e(Z)};return g.on(u.dq.CHANGED_PROFILE,t),function(){g.off(u.dq.CHANGED_PROFILE,t)}},refreshProfiles:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).preferredProvider;return k(e)},onRefresh:function(e){b||(function(e,t,n){var i,l,s,p,m,v,g,y,b,w,Z=!1,x=!1,C=(i=function(){return n.emit(u.dq.FS_CHANGE)},p=(l={wait:1e3,cooldown:5e3,maxWait:5e3}).wait,m=l.cooldown,v=l.maxWait,g=null,y=!1,b=c()(function(e){return g=setTimeout(function(){return g=null},m),y=!1,s=i.apply(void 0,(0,o._)(e))},p,{maxWait:v}),(w=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return null!==g?s:(y||(y=!0),b(t))}).cancel=function(){null!==g?(clearTimeout(g),g=null):(b.cancel(),y=!1)},w.flush=function(){return null!==g?(clearTimeout(g),g=null,s):b.flush()},w.isPending=function(){return y},w.isInCooldown=function(){return null!==g},w);function k(){return(k=(0,r._)(function(){var n;return(0,a.Jh)(this,function(r){return n=!0,t.watchDir(d.Ql,{onChange:function(r){!Z&&r.find(function(e){return e.filename===h&&e.type===f.Tv.Directory})&&(function(){if(!Z){Z=!0;var n=!0;t.watchDir(h,{onChange:function(){n?n=!1:C()},onMoveOrDelete:function(){Z=!1,C()},onError:function(t,n){Z=!1,RegExp(".+permission denied","im").test(t.message)||e.unrecoverableError(t,n)}})}}(),n||C()),n&&(n=!1)},onError:function(t,n){return e.unrecoverableError(t,n)}}),[2]})})).apply(this,arguments)}(function(){k.apply(this,arguments)})(),t.onStatusChange(function(e){Z&&(e===f.kO.Syncing&&C.isInCooldown()?x=!0:e===f.kO.Clean&&(x||C(),x=!1))})}(n,l,g),b=!0);var t=function(){return e(u.dq.FS_CHANGE)},i=function(){return e(u.dq.FORCED_REFRESH)},s=function(){return e(u.dq.NEW_PROFILE)},p=function(){return e(u.dq.CHANGED_PROFILE)};return g.on(u.dq.FS_CHANGE,t),g.on(u.dq.FORCED_REFRESH,i),g.on(u.dq.NEW_PROFILE,s),g.on(u.dq.CHANGED_PROFILE,p),function(){g.off(u.dq.FS_CHANGE,t),g.off(u.dq.FORCED_REFRESH,i),g.off(u.dq.NEW_PROFILE,s),g.off(u.dq.CHANGED_PROFILE,p)}},forceRefresh:function(){g.emit(u.dq.FORCED_REFRESH)},isBusy:function(){return S.running.current},onBusyChange:function(e){var t=!1,n=c()(e,200);return S.running.subscribe(function(e){t&&!e?(n(!1),t=!1):!t&&e&&(n(!0),t=!0)})},init:S.wrap(u.It,"write"),isInitialized:S.wrap(u.xT,"read"),lsFiles:S.wrap(u.TF,"read"),status:S.wrap(u.JC,"read"),log:S.wrap(u.qu,"read"),findDefaultBranches:S.wrap(u.P,"read"),listBranches:S.wrap(u.jz,"read"),setBranchUpstream:S.wrap(u.c1,"write"),stageFiles:S.wrap(u.Ni,"write"),commit:S.wrap(u.kZ,"write"),switchBranch:S.wrap(u.wc,"write"),branchExists:S.wrap(u.eo,"read"),createBranch:S.wrap(u.ZR,"write"),getRemotes:S.wrap(u.rp,"read"),fetch:S.wrap(u.y1,"write"),canMergeBranches:S.wrap(u.QD,"read"),pull:S.wrap(u.Ly,"write"),push:S.wrap(u.nC,"write"),getRepositoryState:S.wrap(u.Vk,"read"),getFileContents:S.wrap(u.E,"read"),addRemote:S.wrap(u.JE,"write"),removeRemote:S.wrap(u.l6,"write"),setRemoteURL:S.wrap(u.AU,"write"),getBranch:S.wrap(u.Kt,"read"),restoreFiles:S.wrap(u.Vj,"write"),lastFetched:S.wrap(u.Tq,"read"),merge:S.wrap(u.nK,"write"),mergeContinue:S.wrap(u.VH,"write"),mergeAbort:S.wrap(u.Fj,"write"),getConflictingFiles:S.wrap(u.Qg,"read"),getMergingRefs:S.wrap(u.xD,"read"),getFilesForCommit:S.wrap(u.Mh,"read"),escapeHatchGitExecRead:S.wrap(function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,(0,o._)(n))},"read"),escapeHatchGitExecWrite:S.wrap(function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,(0,o._)(n))},"write")}}},64566:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(66626),i=n(63257),o=n(52657),a=n(83059),l=n(42471),c=n(23882),s=n(3341),u=n.n(s),d=n(75271);function f(e){var t,n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},h=(0,r._)((0,d.useState)(null),2),p=h[0],m=h[1],v=(0,o.Z)(p),g=null===(n=null!==(t=f.keepStaleResult)&&void 0!==t?t:f.refresh)||void 0===n||n,y=(0,d.useCallback)(function(e){u()(e,v.current)||m(e)},[v]),b=(0,a.Z)(function(){return e},(0,i._)(s)),w=(0,c.Z)().git,Z=(0,d.useRef)(null),x=(0,d.useCallback)(function(){Z.current?Z.current():g||y(null);var e=!1;b(w).then(function(t){e||(y(t),Z.current=null)}).catch(function(){e||(y({error:l.aq.UNKNOWN}),Z.current=null)}),Z.current=function(){e=!0,Z.current=null,g||y(null)}},[y,b,w,g]);return(0,d.useEffect)(function(){return x()},[x]),(0,d.useEffect)(function(){var e;if(null===(e=f.refresh)||void 0===e||e)return w.onRefresh(x)},[w,x,f.refresh]),p}},19168:function(e,t,n){var r,i,o,a;n.d(t,{Z:function(){return i},z:function(){return r}}),(o=r||(r={})).INSTRUCTION_RESULT="INSTRUCTION_RESULT",o.TEST_RESULT="TEST_RESULT",o.ERROR="ERROR",o.STATE_CHANGED="STATE_CHANGED",(a=i||(i={}))[a.Idle=0]="Idle",a[a.Starting=1]="Starting",a[a.Ready=2]="Ready",a[a.Building=3]="Building",a[a.Running=4]="Running"},80273:function(e,t,n){n.d(t,{ho:function(){return o},ib:function(){return l},rN:function(){return i},uH:function(){return a}});var r=n(7225),i=[r.SemanticTokenTypes.namespace,r.SemanticTokenTypes.type,r.SemanticTokenTypes.class,r.SemanticTokenTypes.enum,r.SemanticTokenTypes.interface,r.SemanticTokenTypes.struct,r.SemanticTokenTypes.typeParameter,r.SemanticTokenTypes.parameter,r.SemanticTokenTypes.variable,r.SemanticTokenTypes.property,r.SemanticTokenTypes.enumMember,r.SemanticTokenTypes.event,r.SemanticTokenTypes.function,r.SemanticTokenTypes.method,r.SemanticTokenTypes.macro,r.SemanticTokenTypes.keyword,r.SemanticTokenTypes.modifier,r.SemanticTokenTypes.comment,r.SemanticTokenTypes.string,r.SemanticTokenTypes.number,r.SemanticTokenTypes.regexp,r.SemanticTokenTypes.operator,r.SemanticTokenTypes.decorator,"angle","arithmetic","attribute","attributeBracket","bitwise","boolean","brace","bracket","builtinAttribute","builtinType","character","colon","comma","comparison","constParameter","derive","deriveHelper","dot","escapeSequence","invalidEscapeSequence","formatSpecifier","generic","label","lifetime","logical","macroBang","parenthesis","punctuation","selfKeyword","selfTypeKeyword","semicolon","typeAlias","toolModule","union","unresolvedReference","tomlArrayKey","tomlTableKey"],o=[r.SemanticTokenModifiers.declaration,r.SemanticTokenModifiers.definition,r.SemanticTokenModifiers.readonly,r.SemanticTokenModifiers.static,r.SemanticTokenModifiers.deprecated,r.SemanticTokenModifiers.abstract,r.SemanticTokenModifiers.async,r.SemanticTokenModifiers.modification,r.SemanticTokenModifiers.documentation,r.SemanticTokenModifiers.defaultLibrary,"attribute","callable","constant","consuming","controlFlow","crateRoot","injected","intraDocLink","library","macro","mutable","public","reference","trait","unsafe"];function a(e,t){var n=e.tokenTypes[t];return n&&i.includes(n)?n:null}function l(e,t){for(var n=[],r=0;r<e.tokenModifiers.length;r++)if(t&1<<r){var i=e.tokenModifiers[r];i&&o.includes(i)&&n.push(i)}return n}},89441:function(e,t,n){var r=n(7225);t.Z=[r.SymbolKind.Array,r.SymbolKind.Boolean,r.SymbolKind.Class,r.SymbolKind.Constant,r.SymbolKind.Constructor,r.SymbolKind.Enum,r.SymbolKind.EnumMember,r.SymbolKind.Event,r.SymbolKind.Field,r.SymbolKind.File,r.SymbolKind.Function,r.SymbolKind.Interface,r.SymbolKind.Key,r.SymbolKind.Method,r.SymbolKind.Module,r.SymbolKind.Namespace,r.SymbolKind.Object,r.SymbolKind.Operator,r.SymbolKind.Package,r.SymbolKind.Property,r.SymbolKind.String,r.SymbolKind.Struct,r.SymbolKind.TypeParameter,r.SymbolKind.Variable]},51638:function(e,t,n){var r,i,o,a;n.d(t,{N:function(){return r},a:function(){return i}}),(o=r||(r={})).NOT_READY="NOT_READY",o.READY="READY",o.STALLED="STALLED",o.BROKEN="BROKEN",(a=i||(i={})).OFFLINE="OFFLINE",a.INITIALIZING="INITIALIZING",a.INITIALIZED="INITIALIZED",a.EXITING="EXITING",a.EXITED="EXITED"},11208:function(e,t,n){n.d(t,{Z:function(){return g}});var r=n(66626),i=n(16155),o=n(23882),a=n(75271),l=n(41733),c=n(30509),s=n(10777),u=n(16783),d=n.n(u),f=n(76773),h=n(51638);function p(e){return Math.floor(performance.now()-e.startTime)}var m=new WeakSet,v=n(27030);function g(e){var t=(0,i.Z)(),n=(0,o.Z)().lspnix,u=(0,r._)((0,a.useState)([]),2),g=u[0],y=u[1],b=(0,v.k)();return(0,a.useEffect)(function(){if(e){var t=n.onClient(e,y);return function(){t(),y([])}}},[n,e]),(0,a.useEffect)(function(){return(0,f.uf)(g.map(function(n){return function(e){var t=e.client,n=e.replId,r=e.language,i=e.debug;if(!m.has(t)){m.add(t);var o=new Map,a=function(e){var i,o=t.getServerState(),a=null!==(i=t.getServerInfo())&&void 0!==i?i:{name:"unknown",version:"none"},l=o===h.a.INITIALIZED?"".concat(null==a?void 0:a.name,"@").concat(null==a?void 0:a.version):"not_ready: server is ".concat(o);return{method:e.method,replid:n,language:r,startTime:Math.floor(e.startTime),languageServerInfo:l,lspId:t.clientId}},u=d()(function(e,t){var n=p(t);n>1e4&&s.kg.time("LSP unresponsive request",n,a(t))}),v=setInterval(function(){o.forEach(function(e){u(e.id,e)})},2e3);return(0,f.uf)([t.onRequest(function(e){var t=e.id,n=e.data;(i||.01>Math.random())&&o.set(t,{id:t,method:n.method,startTime:performance.now()})}),t.onResponse(function(e){var t=e.id,n=e.error,r=o.get(t);null!=r&&(o.delete(t),s.kg.time("LSP request",p(r),(0,c._)((0,l._)({},a(r)),{result:null==n?"ok":"error"})))}),t.onCancelRequest(function(e){var t=o.get(e);null!=t&&(o.delete(e),s.kg.time("LSP request",p(t),(0,c._)((0,l._)({},a(t)),{result:"cancelled"})))}),function(){return clearInterval(v)},function(){return m.delete(t)}])}}({client:n,replId:t,language:n.getLanguageId(e),debug:b})}))},[g,t,e,b]),g}},2309:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(66626),i=n(75271),o=n(23469),a=n(76773);function l(e){var t=(0,r._)((0,i.useState)(null),2),n=t[0],l=t[1];return(0,i.useEffect)(function(){var t=function(){l((0,o.H)(e.map(function(e){return(0,o.Z)(e)})))};return t(),(0,a.uf)(e.map(function(e){return e.onServerCapabilitiesChange(function(){return t()})}))},[e]),n}},70145:function(e,t,n){n.d(t,{DL:function(){return i},OD:function(){return Z},TE:function(){return E},UK:function(){return b},VZ:function(){return x}});var r,i,o=n(27387),a=n(41733),l=n(30509),c=n(63257),s=n(96583),u=n(25722),d=n(41974),f=n(86763),h=n.n(f),p=n(66791),m=n(25731),v=n(57997),g=n(3341),y=n.n(g),b=new Set([3e3,3001,3002,3003,4200,5e3,5173,6e3,6800,80,8e3,8008,8080,8081,8099,9e3]);function w(e,t){return new Set(Array.from(e).filter(function(e){return!t.has(e)}))}function Z(e){var t=e.type;switch(t){case"FORWARDED":case"MISCONFIGURED":return e.externalPort;case"INTERNAL_ONLY":case"NO_MORE_EXTERNAL_PORTS_AVAILABLE":case"CONFIG_MISSING":return;default:(0,p.Z)(t)}}function x(e){var t;return null!==(t=e.isLocalhost)&&void 0!==t&&t}function C(e){return e===v.Y8}function k(e){return C(e.localPort)}function S(e){return e?w(b,new Set(e.map(function(e){return Z(e.configuration)}))):b}function _(e){var t=e.localPort,n=S(e.portsState.current);if(0!==n.size){var r=n.has(80),i=n.has(t);return r?80:i?t:Array.from(n).sort()[0]}}function E(e){var t=e.container,n=e.dotReplit,r=(0,m.u)(null),i=(0,m.u)(!1),f=(0,m.u)("only-global"),v=h()((0,o._)(function(){var e;return(0,s.Jh)(this,function(t){switch(t.label){case 0:if(!r.current)return[2];return e=r.current.filter(function(e){return!e.isTemporary}).map(function(e){var t=e.configuration.type;switch(t){case"FORWARDED":case"MISCONFIGURED":return(0,a._)({localPort:e.configuration.localPort,externalPort:e.configuration.externalPort},x(e.configuration)?{exposeLocalhost:!0}:void 0);case"INTERNAL_ONLY":return{localPort:e.configuration.localPort};case"NO_MORE_EXTERNAL_PORTS_AVAILABLE":case"CONFIG_MISSING":return!1;default:(0,p.Z)(t)}}).filter(Boolean).sort(function(e,t){return e.localPort-t.localPort}),[4,n.updateDotReplit([{op:"add",path:"ports",value:JSON.stringify(e)}])];case 1:return t.sent(),[2]}})}),1e3,{leading:!1,trailing:!0});function g(){i.set(!0),v()}return!function(e){var t=e.container,n=e.dotReplit,r=e.portsState,i=e.writeDotReplitPortsConfig,o=e.isThisServiceUpdatingDotReplit,s=e.forwardPortsAutomatically;function f(e){return e.sort(function(e,t){var n,r;return(null!==(n=e.configuration.localPort)&&void 0!==n?n:0)-(null!==(r=t.configuration.localPort)&&void 0!==r?r:0)})}var h=[];function p(e){try{var t=function(e){var t=e.portsState,n=e.portInfo,r=e.forwardPortsAutomatically;if(null===t.current)throw Error("processOpenedPort can only assign ports if dotReplit config was read");var i={pid:n.pid,cgroup:n.cgroup,address:n.address,cmdline:n.cmdline},o="127.0.0.1"===i.address,c=n.isVnc,s=t.current.find(function(e){return e.configuration.localPort===n.port});if(void 0!==s)return{isOpen:!0,isTemporary:!!c||s.isTemporary,processInfo:i,configuration:(0,l._)((0,a._)({},s.configuration),{isLocalhost:o})};if("none"===r.current||"only-global"===r.current&&o||c)return{isOpen:!0,isTemporary:!0,processInfo:i,configuration:{type:"INTERNAL_ONLY",localPort:n.port,isLocalhost:o,isVnc:c}};var u=_({localPort:n.port,portsState:t});return void 0===u?{isOpen:!0,isTemporary:!1,processInfo:i,configuration:{type:"NO_MORE_EXTERNAL_PORTS_AVAILABLE",localPort:n.port,isLocalhost:o,isVnc:c}}:{isOpen:!0,isTemporary:!1,processInfo:i,configuration:{type:"FORWARDED",localPort:n.port,externalPort:u,isLocalhost:o,isVnc:c}}}({portsState:r,portInfo:e,forwardPortsAutomatically:s}),n=!1;r.update(function(r){if(!r)throw Error("processOpenedPort can only execute if we red .replit first");return(0,d.Uy)(r,function(i){var o=i.findIndex(function(t){return t.configuration.localPort===e.port});return -1===o?(o=r.length,n=!0):y()(r[o].configuration,t.configuration)||(n=!0),i[o]=t,f(i)})}),n&&i()}catch(e){throw u.$e(function(t){t.setTag("service","ports"),u.Tb(e)}),e}}function m(e){try{var t=!1;r.update(function(n){if(!n)throw Error("onPortClosed can only execute if we red .replit first");return(0,d.Uy)(n,function(n){var r,i=n.findIndex(function(t){return t.configuration.localPort===e.port});if(-1!==i){var o=n[i];o.isTemporary||(r=o.configuration.localPort,32768<=r&&r<=60999)?(n.splice(i,1),t=!0):o.isOpen=!1}})}),t&&i()}catch(e){throw u.$e(function(t){t.setTag("service","ports"),u.Tb(e)}),e}}t.onPortOpened(function(e){null===r.current?h.push({type:"portOpen",portInfo:e}):p(e)}),t.onPortClosed(function(e){null===r.current?h.push({type:"portClose",portInfo:e}):m(e)}),n.watch(function(e){var t,n=e.config,i=null!==(t=null==n?void 0:n.ports)&&void 0!==t?t:[];if(!0===o.current){var s=r.current;if(!s||i.length!==s.length)return;i.every(function(e,t){var n,r=s[t];return e.localPort===r.configuration.localPort&&e.externalPort===(null!==(n=Z(r.configuration))&&void 0!==n?n:0)})&&o.set(!1);return}r.update(function(e){e||(e=[]);var t=new Set(i.map(function(e){return e.localPort}).filter(function(e){return null!=e})),n=new Set(e.map(function(e){return e.configuration.localPort})),r=new Set(e.filter(function(e){return e.isOpen}).map(function(e){return e.configuration.localPort})),o=w(t,n),s=(m=new Set((0,c._)(Array.from(t)).concat((0,c._)(Array.from(r)))),new Set(Array.from(n).filter(function(e){return m.has(e)}))),u=[],d=!0,h=!1,p=void 0;try{for(var m,v,g=s[Symbol.iterator]();!(d=(v=g.next()).done);d=!0)!function(){var t=v.value,n=e.find(function(e){return e.configuration.localPort===t}),r=i.find(function(e){return e.localPort===t});if(!n)throw Error("couldn't find match for local port: ".concat(t));if(!r)return u.push((0,l._)((0,a._)({},n),{configuration:{type:"CONFIG_MISSING",localPort:n.configuration.localPort,isLocalhost:x(n.configuration),isVnc:k(n.configuration)}}));var o=n.configuration;o=null!=r.externalPort&&0!==r.externalPort?{type:S(u).has(r.externalPort)?"FORWARDED":"MISCONFIGURED",localPort:n.configuration.localPort,externalPort:r.externalPort,isLocalhost:x(n.configuration),isVnc:k(n.configuration)}:{type:"INTERNAL_ONLY",localPort:n.configuration.localPort,isLocalhost:x(n.configuration),isVnc:k(n.configuration)},u.push((0,l._)((0,a._)({},n),{configuration:o}))}()}catch(e){h=!0,p=e}finally{try{d||null==g.return||g.return()}finally{if(h)throw p}}var y=!0,b=!1,Z=void 0;try{for(var _,E=o[Symbol.iterator]();!(y=(_=E.next()).done);y=!0)!function(){var e,t=_.value,n=i.find(function(e){return e.localPort===t});if(!n)throw Error("couldn't find match for local port: ".concat(t));var r=null!=n.externalPort&&0!==n.externalPort?n.externalPort:void 0;if(void 0!==r){var o,a=S(u).has(r);u.push({isOpen:!1,isTemporary:!1,configuration:{type:a?"FORWARDED":"MISCONFIGURED",localPort:t,externalPort:r,isLocalhost:null!==(o=n.exposeLocalhost)&&void 0!==o&&o,isVnc:C(t)}})}else u.push({isOpen:!1,isTemporary:!1,configuration:{type:"INTERNAL_ONLY",localPort:t,isLocalhost:null!==(e=n.exposeLocalhost)&&void 0!==e&&e,isVnc:C(t)}})}()}catch(e){b=!0,Z=e}finally{try{y||null==E.return||E.return()}finally{if(b)throw Z}}return f(u)}),h.length>0&&(h.forEach(function(e){var t=e.type,n=e.portInfo;"portOpen"===t?p(n):"portClose"===t&&m(n)}),h=[])})}({container:t,dotReplit:n,portsState:r,writeDotReplitPortsConfig:g,isThisServiceUpdatingDotReplit:i,forwardPortsAutomatically:f}),{tryExposingPortAutomatically:function(e){var t=_({localPort:e,portsState:r});void 0!==t&&(r.update((0,d.Uy)(function(n){if(n){var r=n.find(function(t){return t.configuration.localPort===e});r&&(r.isTemporary=!1,r.configuration={type:"FORWARDED",localPort:e,externalPort:t,isLocalhost:r.configuration.isLocalhost,isVnc:C(e)})}})),g())},updateDotReplitPortsMapping:function(e,t,n){r.update((0,d.Uy)(function(r){var i,o=null==r?void 0:r.find(function(t){return t.configuration.localPort===e}),a=n;void 0===a&&(a=null!==(i=null==o?void 0:o.configuration.isLocalhost)&&void 0!==i&&i);var l=void 0!==t?{type:"FORWARDED",localPort:e,externalPort:t,isLocalhost:a,isVnc:C(e)}:{type:"INTERNAL_ONLY",localPort:e,isLocalhost:a,isVnc:C(e)};o?(o.isTemporary=!1,o.configuration=l):(r||(r=[]),r.push({isOpen:!1,isTemporary:!1,configuration:l}))})),g()},removeDotReplitPortsMapping:function(e,t){r.update((0,d.Uy)(function(n){var r;void 0!==(r=void 0!==t?null==n?void 0:n.findIndex(function(n){return n.configuration.localPort===e&&("FORWARDED"===n.configuration.type||"MISCONFIGURED"===n.configuration.type)&&n.configuration.externalPort===t}):null==n?void 0:n.findIndex(function(t){return t.configuration.localPort===e}))&&(null==n||n.splice(r,1))})),g()},portsState:r,setForwardPortsAutomatically:function(e){f.set(e)}}}(r=i||(i={})).FORWARDED="FORWARDED",r.INTERNAL_ONLY="INTERNAL_ONLY",r.NO_MORE_EXTERNAL_PORTS_AVAILABLE="NO_MORE_EXTERNAL_PORTS_AVAILABLE",r.MISCONFIGURED="MISCONFIGURED",r.CONFIG_MISSING="CONFIG_MISSING"},12666:function(e,t,n){n.d(t,{bg:function(){return l},dF:function(){return s},r4:function(){return u},vU:function(){return c}});var r=n(54129),i=n(23882),o=n(75271),a=n(70145);function l(e){var t=(0,r.Z)(e.portsState);return(0,o.useMemo)(function(){return t?t.filter(function(e){return e.isOpen&&e.configuration.type===a.DL.FORWARDED}):[]},[t])}function c(e){var t=(0,i.Z)().ports,n=(0,r.Z)(t.portsState);return(0,o.useMemo)(function(){if(n)return n.find(function(t){return t.configuration.type===a.DL.FORWARDED&&t.configuration.externalPort===e})},[n,e])}function s(e){return u((0,i.Z)().ports,e)}function u(e,t){var n=(0,r.Z)(e.portsState);return(0,o.useMemo)(function(){return t&&n?n.filter(function(e){var n;return null!==(n=e.isOpen&&(null==t?void 0:t.endsWith(e.processInfo.cgroup)))&&void 0!==n&&n}):[]},[n,t])}},93696:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(66626),i=n(23882),o=n(75271);function a(){var e=(0,i.Z)().presence,t=(0,r._)((0,o.useState)(e.getFollowedUser()),2),n=t[0],a=t[1];return(0,o.useEffect)(function(){return a(e.getFollowedUser()),e.onFollowedUserChanged(a)},[e]),n}},88397:function(e,t,n){n.d(t,{ZP:function(){return w}});var r=n(27387),i=n(96583),o=n(10777),a=n(38242),l=n(96949),c=n(21262);function s(){var e=(0,c._)(["\n  query GitHubAuth {\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n      }\n    }\n  }\n"]);return s=function(){return e},e}var u=(0,n(71440).Ps)(s()),d=n(47892),f=n(29043),h=n(74044),p=h.Dy.Object({id:h.Dy.String(),user_id:h.Dy.Number(),ssh_hostname:h.Dy.String(),token:h.Dy.String()}),m=n(99149),v=["http:","https:","vscode:"];function g(){return(g=(0,r._)(function(e){var t,n;return(0,i.Jh)(this,function(r){switch(r.label){case 0:return t=e.replId,[4,(0,f.Zc)(function(){return(0,d.uz)("/data/repls/".concat(t,"/get_ssh_token"))})];case 1:if((n=r.sent()).error)return[2,{type:"error",message:n.error.toString()}];if(!m.B4.Check(p,n.value))return[2,{type:"error",message:"Invalid JSON"}];return[2,{type:"success",data:n.value}]}})})).apply(this,arguments)}function y(){return(y=(0,r._)(function(){var e;return(0,i.Jh)(this,function(t){switch(t.label){case 0:if(!a.l)throw Error("Expected apollo");return[4,a.l.query({query:u})];case 1:if(!(null==(e=t.sent().data)?void 0:e.currentUser))throw Error("Expected current user");return[2,e.currentUser]}})})).apply(this,arguments)}function b(){document.activeElement instanceof HTMLElement&&document.activeElement.blur()}function w(e){var t=e.container,n=e.fs,a=e.openMultipleFiles,c=e.openMultipleURLs,s=e.enableReplspaceSshTokenPassthrough,u=new Set,d=!1,f=null;return t.openChannel({service:"open",name:"open"},function(e){e.channel.onCommand(function(e){if("replspaceApiOpenMultipleFiles"===e.body){if(!e.replspaceApiOpenMultipleFiles)throw Error("Expected replspaceApiOpenMultipleFiles");var t=e.replspaceApiOpenMultipleFiles,n=t.files,r=t.urls.flatMap(function(e){var t;try{t=new URL(e)}catch(e){return[]}return v.includes(t.protocol)?[t]:[]});a&&n.length>0&&(b(),a({paths:n})),c&&r.length>0&&(b(),c({urls:r.map(function(e){return e.toString()})}))}})}),t.openChannel({service:"git",name:"git"},function(e){var t,l=e.channel;return l.onCommand((t=(0,r._)(function(e){var t,r,c,s,h,p,m,v,g,w,Z,x,C,k,S,_;return(0,i.Jh)(this,function(i){switch(i.label){case 0:switch(e.body){case"replspaceApiOpenFile":return[3,1];case"replspaceApiGetGitHubToken":return[3,7]}return[3,9];case 1:if(!e.replspaceApiOpenFile)throw Error("Expected replspaceApiOpenFile");if(r=(t=e.replspaceApiOpenFile).file,c=t.waitForClose,s=t.nonce,a)return[3,3];if(!r.endsWith(".git/COMMIT_EDITMSG"))return c&&l.send({replspaceApiCloseFile:{file:r,nonce:s}}),window.alert("tried to open ".concat(r," but failed")),[2];return h=window.prompt("Enter a commit message"),[4,n.writeFile(r,null!=h?h:"")];case 2:if(i.sent(),!c)return[2];return[3,5];case 3:if(b(),a({paths:[r]}),!c||!f)return[2];return[4,f(r)];case 4:i.sent(),i.label=5;case 5:return[4,n.flush()];case 6:if(i.sent(),"open"!==l.status)return[2];return l.send({replspaceApiCloseFile:{file:r,nonce:s}}),[2];case 7:if(!e.replspaceApiGetGitHubToken)throw Error("Expected replspaceApiGetGitHubToken");return p=function(){var t;"open"===l.status&&l.send({replspaceApiGitHubToken:{token:"",nonce:null===(t=e.replspaceApiGetGitHubToken)||void 0===t?void 0:t.nonce}})},[4,function(){return y.apply(this,arguments)}()];case 8:if(null==(m=i.sent()).gitHubInfo)return p(),[2];if(!u.size)return p(),o.kg.error("Got a replspaceApiGetGitHubToken command but no confirm listener is set up"),[2];if(v=function(){var t,n;"open"===l.status&&l.send({replspaceApiGitHubToken:{token:null===(t=m.gitHubInfo)||void 0===t?void 0:t.accessToken,nonce:null===(n=e.replspaceApiGetGitHubToken)||void 0===n?void 0:n.nonce}})},d)return v(),[2];g=!1,w=function(){var e=!0,t=!1,n=void 0;try{for(var r,i=u[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)(0,r.value)(null)}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}},Z=!0,x=!1,C=void 0;try{for(k=u[Symbol.iterator]();!(Z=(S=k.next()).done)&&(_=S.value,!g);Z=!0)_(function(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(!g){if(g=!0,!e){p(),w();return}t&&(d=e),v(),w()}})}catch(e){x=!0,C=e}finally{try{Z||null==k.return||k.return()}finally{if(x)throw C}}i.label=9;case 9:return[2]}})}),function(e){return t.apply(this,arguments)})),function(){}}),t.openChannel({service:"shelltracker",name:"shelltracker"},function(e){e.channel.onCommand(function(e){if(null!=e.replspaceApiShellTracker){var n,r;(0,l.j)(l.U3.SHELL_COMMAND_EVALED,{context:e.replspaceApiShellTracker.cmd,replId:null===(r=t.getContext())||void 0===r?void 0:null===(n=r.repl)||void 0===n?void 0:n.id,api:"replspace",pwd:e.replspaceApiShellTracker.pwd})}})}),void 0!==s&&s&&t.openChannel({service:"sshtoken",name:"sshtoken"},function(e){var t,n=e.channel;n.onCommand((t=(0,r._)(function(e){var t,r,a,l,c,s;return(0,i.Jh)(this,function(i){switch(i.label){case 0:if(!e.replspaceApiSSHTokenGetRequest)throw Error("Expected replspaceApiSSHTokenGetRequest");return r=(t=e.replspaceApiSSHTokenGetRequest).nonce,a=t.replid,l=function(e){"open"===n.status&&n.send({replspaceApiSSHTokenGetResponse:e})},c=function(){l({token:"",nonce:r})},[4,function(e){return g.apply(this,arguments)}({replId:a})];case 1:if(s=i.sent(),"open"!==n.status)return[2];if("error"===s.type)return c(),o.kg.error(s.message),[2];return l({token:s.data.token,nonce:r,sshHostname:s.data.ssh_hostname}),[2]}})}),function(e){return t.apply(this,arguments)}))}),{onConfirmSendToken:function(e){var t=function(t){return e(t)};return u.add(t),function(){u.delete(t)}},setWaitForFileClose:function(e){f=e}}}},11568:function(e,t,n){n.d(t,{F:function(){return i}});var r=n(22961);function i(e,t){var n=(0,r.rF)(t.fileTypeAttrs);return!n&&(null==t?void 0:t.language)&&(n=r.$R.from(t.language)),!!(n&&(0,r.JW)(e,n))}},27069:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(66626),i=n(62764),o=n(75271),a=n(23882);function l(){var e=(0,a.Z)().toolchain,t=(0,r._)((0,o.useState)(null),2),n=t[0],l=t[1];return(0,o.useEffect)(function(){var t=!1;return e.getRegistry().then(function(e){t||l(e)}).catch(function(e){i.kg.error("Toolchain: failed to get module registry: ".concat(e.message))}),function(){t=!0}},[e]),n}},73660:function(e,t,n){n.d(t,{K:function(){return l}});var r=n(41733),i=n(14118),o=n(75271),a=n(23882);function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,a.Z)().userEvents,n=(0,i.P5)({controlName:"flag-null-diagnostics",logFlagToAnalytics:!1});return(0,o.useCallback)(function(i,o){n&&t.emit(i,(0,r._)({},e,o))},[t,e,n])}},41520:function(e,t,n){n.d(t,{Z:function(){return v}});var r=n(3796),i=n(39031),o=n(27840),a=n(22893),l=n(14548),c=n(24766),s=n(93245),u=n(79904),d=n(46142),f=n(36809),h=n(63163),p=n(46867),m=(0,f.X)({connectHeader:[h.l0.colWithGap(4)],connectButtonRow:[h.l0.flex.rowReverse],sshConfigDialog:[h.l0.colWithGap(12)]});function v(e){var t=e.onConfirm,n=(0,p.Z)(),f="Host *.replit.dev\n  Port 22\n  IdentityFile ".concat(n,"/.ssh/replit");return(0,r.BX)(l.Tg,{css:m.sshConfigDialog,children:[(0,r.BX)(s.G,{css:m.connectHeader,children:[(0,r.tZ)(c.h4,{level:1,variant:"subheadBig",children:"Update your SSH configuration"}),(0,r.BX)(c.xv,{color:"dimmer",children:["Before connecting over SSH, you need to update your local SSH configuration file, which is usually located at ",n,"/.ssh/config"]})]}),(0,r.tZ)(d.Z,{code:f,header:".ssh/config",multiline:!0}),(0,r.tZ)(a.E,{text:"You can find this information later in the SSH docs",icon:(0,r.tZ)(i.Z,{})}),(0,r.tZ)(s.G,{css:m.connectButtonRow,children:(0,r.tZ)(u.zx,{text:"I updated my config",iconLeft:(0,r.tZ)(o.Z,{}),onClick:t,colorway:"primary",stretch:!1})})]})}},30582:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(66626),i=n(43540),o=n(75271),a=n(23882),l=n(56729);function c(){var e=(0,r._)((0,o.useState)(!1),2),t=e[0],n=e[1],c=function(){var e,t,n,i,c=(0,l.Z)(),s=(e=(0,a.Z)().container,n=(t=(0,r._)((0,o.useState)("/home/runner"),2))[0],i=t[1],(0,o.useEffect)(function(){e.exec("pwd").then(function(e){var t;e.output&&i((null===(t=e.output)||void 0===t?void 0:t.replace("\n",""))||"")})},[e]),n);if(!c)return"vscode://vscode-remote/ssh-remote";var u=c.sshUser,d=c.sshHostname,f=c.sshPort,h="vscode://vscode-remote/ssh-remote+".concat(u,"@").concat(d,":").concat(f).concat(s);try{return window.encodeURI(h)}catch(e){return h}}(),s=(0,i.Z)("ssh","workspace-ssh-connect-to-vscode-config-tour"),u=s.register;return(0,o.useEffect)(function(){u()},[u]),{openInVSCode:(0,o.useCallback)(function(){if(s.shouldDisplay){n(!0);return}window.location.href=c},[s.shouldDisplay,c]),onConfirmConfig:(0,o.useCallback)(function(){n(!1),s.dismiss(),window.location.href=c},[s,c]),isConfigModalOpen:t,closeConfigModal:(0,o.useCallback)(function(){n(!1)},[])}}},56729:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(16155),i=n(77537),o=n(23882);function a(){var e=(0,o.Z)().container,t=(0,r.Z)(),n=(0,i.Z)(e,{fallbackToReplCo:!1});if(!n)return null;var a=new URL(n).host,l=a.indexOf(":"),c="22";return -1!==l&&(a=a.substring(0,l),c="2022"),{sshUser:t,sshHostname:a,sshPort:c}}},54698:function(e,t,n){n.d(t,{g:function(){return o}});var r=n(3796),i=n(62279);function o(){return(0,r.tZ)(i.xB,{styles:[{body:{overflow:"hidden"}}]})}},1711:function(e,t,n){n.d(t,{w:function(){return h}});var r=n(41733),i=n(66626),o=n(3796),a=n(62279),l=n(37862),c=n(63163),s=n(30826),u=n.n(s),d=n(75271),f=n(30967);function h(e){var t=e.targetElement,n=e.transparent,s=(0,i._)((0,d.useState)(null),2),h=s[0],m=s[1],v=(0,l.Z)(function(){t&&m({rect:t.getBoundingClientRect(),docWidth:document.documentElement.clientWidth,docHeight:document.documentElement.clientHeight})},{type:"throttle",wait:100});if((0,d.useEffect)(function(){t&&v(t)},[t,v]),(0,d.useEffect)(function(){if(t){var e=u()(function(){m({rect:t.getBoundingClientRect(),docWidth:document.documentElement.clientWidth,docHeight:document.documentElement.clientHeight})},100);return window.addEventListener("resize",e),window.addEventListener("scroll",e),function(){window.removeEventListener("resize",e),window.removeEventListener("scroll",e)}}},[t]),!h||!t)return null;var g=(0,a.iv)({backgroundColor:n?"transparent":c.TV.backgroundOverlay,zIndex:c.n0+1,position:"fixed",transition:"all 0.5s ease-out"});return(0,f.createPortal)((0,o.BX)(o.HY,{children:[(0,o.tZ)("div",{id:"wat",css:[p((0,r._)({side:"left-top"},h)),g]}),(0,o.tZ)("div",{css:[p((0,r._)({side:"top-right"},h)),g]}),(0,o.tZ)("div",{css:[p((0,r._)({side:"right-bottom"},h)),g]}),(0,o.tZ)("div",{css:[p((0,r._)({side:"bottom-left"},h)),g]})]}),document.body)}function p(e){var t=e.side,n=e.rect,r=e.docWidth,i=e.docHeight;switch(t){case"left-top":return(0,a.iv)({top:0,left:0,width:Math.max(0,n.left),height:Math.max(0,n.bottom)});case"top-right":return(0,a.iv)({top:0,right:0,width:"calc(".concat(r,"px - ").concat(Math.max(0,n.left),"px)"),height:Math.max(0,n.top)});case"right-bottom":return(0,a.iv)({bottom:0,right:0,width:"calc(".concat(r,"px - ").concat(Math.max(0,n.right),"px)"),height:"calc(".concat(i,"px - ").concat(Math.max(0,n.top),"px)")});case"bottom-left":return(0,a.iv)({bottom:0,left:0,width:Math.max(0,n.right),height:"calc(".concat(i,"px - ").concat(Math.max(0,n.bottom),"px)")})}}},33718:function(e,t,n){n.d(t,{k:function(){return v}});var r=n(41733),i=n(30509),o=n(66626),a=n(3796),l=n(84238),c=n(37862),s=n(68220),u=n(22419),d=n(76733),f=n(63163),h=n(75271),p=n(30967),m=n(96751);function v(e){var t=e.targetElement,n=e.activeStep,v=e.goto,g=e.currentStepIndex,y=e.totalSteps,b=e.done,w=e.disableAnimation,Z=e.placement,x=e.cypressCloseData,C=e.onClickOutside,k=e.innerRef,S=e.width,_=(0,o._)((0,h.useState)(null),2),E=_[0],T=_[1],R=(0,o._)((0,h.useState)(null),2),D=R[0],I=R[1],B=(0,m.D)(t,E,{placement:void 0===Z?"right":Z,modifiers:[{name:"arrow",options:{element:D,padding:8}},{name:"offset",options:{offset:[0,16]}},{name:"preventOverflow",options:{padding:8}},{name:"flip",options:{fallbackPlacements:["top","bottom","left","right"]}},{name:"computeStyles",options:{adaptive:!1}}]}),G=(0,c.Z)(function(){var e;null===(e=B.update)||void 0===e||e.call(B)},{type:"throttle",wait:100});(0,h.useEffect)(function(){G(t)},[t,G]),(0,h.useImperativeHandle)(k,function(){return{updateTooltip:function(){var e;null===(e=B.update)||void 0===e||e.call(B)}}});var P=(0,l.Z)(function(){C&&C()},[C]);return(0,p.createPortal)((0,a.BX)("div",(0,i._)((0,r._)({ref:function(e){P.current=e,T(e)},style:B.styles.popper,css:{transition:w?"all":"all 0.5s ease-out",zIndex:f.n0+2,width:null!=S?S:320}},B.attributes.popper),{children:[(0,a.tZ)(d.O,{title:n.title,content:n.content,onDismiss:function(){b()},currentStepIndex:g,onCurrentStepChange:v,totalSteps:y,cypressCloseData:void 0===x?"tour-tooltip-close-button":x}),(0,a.tZ)("span",{style:B.styles.arrow,css:[u.wk,{"&::after":{backgroundColor:s.Br.primary.dimmest,border:"1px solid "+s.Br.primary.dimmer}}],ref:I})]})),document.body)}},49205:function(e,t,n){n.d(t,{Do:function(){return O},Sr:function(){return U},e$:function(){return L},rk:function(){return X}});var r=n(66626),i=n(3796),o=n(75271),a=n(49853),l=n(80786),c=n(99978),s=n(52657),u=n(1711),d=n(33718),f=n(58532),h=n(76733),p=n(49500),m=(0,o.createContext)(void 0),v=m.Provider,g=(0,a.cn)(null),y=function(e){var t=e.activeTourId,n=e.activeStepId;return"".concat(t,":").concat(n)},b=(0,a.cn)(new Map),w=(0,a.cn)(function(e){return!e(I)&&!e(R)}),Z=(0,a.cn)(function(e){var t,n,r=e(D);return r&&null!==(n=null===(t=e(g))||void 0===t?void 0:t.steps.find(function(e){return e.id===r}))&&void 0!==n?n:null}),x=(0,a.cn)(function(e){var t=e(Z);return(null==t?void 0:t.isModal)?t:null}),C=(0,a.cn)(function(e){var t,n=e(D);if(!n)return -1;var r=e(g);return null!==(t=null==r?void 0:r.steps.findIndex(function(e){return n===e.id}))&&void 0!==t?t:-1}),k=(0,a.cn)(function(e){var t,n=null===(t=e(g))||void 0===t?void 0:t.id,r=e(D);return r&&n?e(b).get(y({activeTourId:n,activeStepId:r})):null}),S=(0,a.cn)(function(e){var t=e(g),n=e(b);return null==t?void 0:t.steps.filter(function(e){return!e.autoSkipIfNoTarget||!!n.get(y({activeTourId:t.id,activeStepId:e.id}))})}),_=(0,a.cn)(function(e){var t,n=e(D);if(!n)return -1;var r=e(S);return null!==(t=null==r?void 0:r.findIndex(function(e){return n===e.id}))&&void 0!==t?t:-1}),E=(0,a.cn)(function(e){var t,n;return null!==(n=null===(t=e(S))||void 0===t?void 0:t.length)&&void 0!==n?n:0}),T=(0,a.cn)(null,function(e,t,n,r,i){t(b,function(e){var t=new Map(e);return i?t.set(y({activeTourId:n,activeStepId:r}),i):t.delete(y({activeTourId:n,activeStepId:r})),t})}),R=(0,a.cn)(!1),D=(0,a.cn)(null),I=(0,a.cn)(!1),B=(0,a.cn)(function(e){return e(g)&&!e(R)&&!e(I)}),G=(0,a.cn)(null,function(e,t,n){var r,i=e(g);if(!(!i||(r="number"==typeof n?n:i.steps.findIndex(function(e){return n===e.id}))<0||r>=i.steps.length)){for(var o=e(C),a=e(b),l=i.steps[r],c=r<o;!a.get(y({activeTourId:i.id,activeStepId:l.id}))&&l.autoSkipIfNoTarget;){if((r=c?r-1:r+1)<0||r>=i.steps.length)return;l=i.steps[r]}t(D,l.id)}}),P=(0,a.cn)(null,function(e,t){var n=e(g);if(n){var r=e(C),i=e(b),o=n.steps[r+1];if(o&&o.autoSkipIfNoTarget)for(var a=r+1;o&&o.autoSkipIfNoTarget&&!i.get(y({activeTourId:n.id,activeStepId:o.id}));)a++,o=n.steps[a];if(!o){t(I,!0);return}t(D,o.id)}}),A=(0,a.cn)(null,function(e,t){t(G,0),t(I,!1)});function L(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(0,o.useContext)(m),i=(0,o.useMemo)(function(){return(0,a.cn)(function(e){return!(e(R)||e(I))&&t===e(D)})},[t]),c=(0,l.b9)(P,{store:r}),u=(0,l.b9)(G,{store:r}),d=O(e,t),f=(0,l.Dv)(i,{store:r}),h=(0,o.useRef)(f),p=(0,s.Z)(n.onEnter),v=(0,s.Z)(n.onExit);return(0,o.useEffect)(function(){if(f){var e;null===(e=p.current)||void 0===e||e.call(p)}},[f,p]),(0,o.useEffect)(function(){if(h.current&&!f){var e;null===(e=v.current)||void 0===e||e.call(v)}h.current=f},[f,v]),{isActive:f,tourRef:d,next:c,goto:u}}var N=function(){};function O(e,t){var n=(0,o.useContext)(m),r=(0,l.b9)(T,{store:n}),i=(0,o.useCallback)(function(n){r(e,t,n)},[e,r,t]);return n?i:N}function U(){var e=(0,o.useContext)(m),t=(0,l.Dv)(B,{store:e});return e&&t}function X(e){var t,n=e.children,f=e.tour,h=e.onStep,m=e.onDone,y=(0,r._)((0,o.useState)(function(){var e;return(e=(0,a.MT)()).set(g,f),e.set(D,f.steps[0].id),e}),1)[0],b=(0,l.Dv)(Z,{store:y}),x=(0,l.Dv)(C,{store:y});if(-1===x)throw Error("Current tour step is not in tour steps");var S=(0,r._)((0,c.oe)({variables:{name:f.id},optimisticResponse:{__typename:"RootMutationType",markTourAsSeen2:{__typename:"TourSeen",id:f.id,seen:!0}}}),1)[0],T=(0,l.b9)(I,{store:y}),B=(0,o.useRef)();(0,o.useEffect)(function(){B.current=b},[b]);var P=(0,l.b9)(G,{store:y}),L=(0,l.Dv)(k,{store:y}),N=(0,l.Dv)(w,{store:y}),O=(0,l.b9)(A,{store:y});window.startTour=function(){p.log("starting tour:",f.id,"from",f.steps[0].id),O()};var U=(0,l.Dv)(_,{store:y}),X=(0,l.Dv)(E,{store:y}),F=(0,s.Z)(h),W=(0,s.Z)(m);(0,o.useEffect)(function(){return y.sub(D,function(){var e,t,n=y.get(D),r=y.get(I);n&&(r?null===(e=W.current)||void 0===e||e.call(W,n):null===(t=F.current)||void 0===t||t.call(F,n))})},[y,F,W]),(0,o.useEffect)(function(){return y.sub(I,function(){y.get(I)&&S()})},[y,S]);var V=(0,c.Pp)({variables:{tours:f.id},onCompleted:function(e){var t;y.set(I,!!(null==e?void 0:null===(t=e.currentUser)||void 0===t?void 0:t.toursSeen[0].seen))}}).loading,H=(0,l.b9)(R,{store:y});return((0,o.useEffect)(function(){H(V)},[H,V]),N&&b)?b.isModal?(0,i.BX)(v,{value:y,children:[(0,i.tZ)(M,{}),n]}):(0,i.BX)(v,{value:y,children:[L?(0,i.BX)(i.HY,{children:[(0,i.tZ)(u.w,{targetElement:L,transparent:b.hideOverlay}),!b.hideTooltip&&(0,i.tZ)(d.k,{targetElement:L,activeStep:b,currentStepIndex:U,done:function(){return T(!0)},goto:function(e){P(e+x-U)},totalSteps:X,disableAnimation:0===x||!!(null===(t=B.current)||void 0===t?void 0:t.isModal)})]}):null,n]}):(0,i.tZ)(v,{value:y,children:n})}function M(){var e=function(){var e=(0,o.useContext)(m);if(!e)throw Error("useTourModal must be used within a TourRoot");var t=(0,l.Dv)(x,{store:e}),n=(0,l.b9)(G,{store:e}),r=(0,l.Dv)(C,{store:e}),i=(0,l.Dv)(E,{store:e}),a=(0,l.b9)(I,{store:e});return{activeStep:t,totalSteps:i,goto:n,currentStepIndex:r,done:(0,o.useCallback)(function(){return a(!0)},[a])}}();if(!e.activeStep)return null;var t=e.activeStep,n=e.goto,r=e.totalSteps,a=e.currentStepIndex,c=e.done;return(0,i.tZ)(f.u,{preventClose:!0,isOpen:!0,onRequestClose:function(){},centered:!0,maxWidth:"fit-content",noPadding:!0,children:(0,i.tZ)(h.O,{title:t.title,content:t.content,onDismiss:function(){c()},currentStepIndex:a,onCurrentStepChange:n,totalSteps:r,cypressCloseData:"tour-tooltip-close-button"})})}},68307:function(e,t,n){var r,i;n.d(t,{z:function(){return r}}),(i=r||(r={})).FileNode="FILE_NODE",i.FileHeaderTab="FILE_HEADER_TAB",i.Code="CODE",i.Pane="PANE",i.NewPane="NEW_PANE"},55621:function(e,t,n){var r=n(42516),i=n(41733),o=n(30509),a=n(98924),l=n(3796),c=n(75333),s=n.n(c),u=n(97754),d=n.n(u),f=n(44594);n(75271),t.Z=function(e){var t,n=e.level,c=e.fontFamily,u=void 0===c?"sans-serif":c,h=e.fontWeight,p=void 0===h?"medium":h,m=e.foreground,v=void 0===m?1:m,g=e.align,y=void 0===g?"left":g,b=e.truncate,w=e.className,Z=void 0===w?"":w,x=e.children,C=(0,a._)(e,["level","fontFamily","fontWeight","foreground","align","truncate","className","children"]);return(0,l.BX)("h".concat(n),(0,o._)((0,i._)({},C),{className:s().dynamic([["e5be6eb40aa527b5",[f.Z.levels[n],f.Z.fontFamily[u],f.Z.fontWeight[p],f.Z.foreground[v],y]]])+" "+(d()("heading",(t={},(0,r._)(t,Z,!!Z),(0,r._)(t,"truncate",void 0!==b&&b),t))||""),children:[x,(0,l.tZ)(s(),{id:"e5be6eb40aa527b5",dynamic:[f.Z.levels[n],f.Z.fontFamily[u],f.Z.fontWeight[p],f.Z.foreground[v],y],children:".heading.__jsx-style-dynamic-selector{font-size:".concat(f.Z.levels[n],";font-family:").concat(f.Z.fontFamily[u],";font-weight:").concat(f.Z.fontWeight[p],";color:").concat(f.Z.foreground[v],";text-align:").concat(y,"}.truncate.__jsx-style-dynamic-selector{overflow:hidden;white-space:nowrap;-o-text-overflow:ellipsis;text-overflow:ellipsis;max-width:100%}")})]}))}},92234:function(e,t,n){var r=n(3796),i=n(75333),o=n.n(i),a=n(97754),l=n.n(a),c=n(31089);n(75271),t.Z=function(e){var t=e.name,n=void 0===t?"toggle":t,i=e.id,a=e.elevation,s=void 0===a?"higher":a,u=e.isOn,d=e.onIcon,f=e.offIcon,h=e.onChange,p=e.dataCy,m=(0,c.U)(),v=null!=i?i:m(n);return(0,r.BX)("label",{"data-cy":p,htmlFor:v,className:o().dynamic([["8d56ad7b5afff72c",[s]]])+" "+(l()("toggle-label",{isOn:u})||""),children:[(0,r.tZ)("input",{name:n,checked:u,onChange:h,id:v,type:"checkbox",className:o().dynamic([["8d56ad7b5afff72c",[s]]])+" toggle-checkbox"}),(0,r.tZ)("span",{className:o().dynamic([["8d56ad7b5afff72c",[s]]])+" toggle-button",children:u&&d?d:f||null}),(0,r.tZ)(o(),{id:"8d56ad7b5afff72c",dynamic:[s],children:".toggle-checkbox.__jsx-style-dynamic-selector{height:0;width:0;visibility:hidden}.toggle-label.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;cursor:pointer;width:38px;height:24px;background:var(--background-".concat(s,');border:.5px solid var(--outline-dimmest);-webkit-border-radius:100px;-moz-border-radius:100px;border-radius:100px;position:relative;-webkit-transition:background-color.2s;-moz-transition:background-color.2s;-o-transition:background-color.2s;transition:background-color.2s}.toggle-button.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;content:"";position:absolute;left:1px;width:20px;height:20px;-webkit-border-radius:45px;-moz-border-radius:45px;border-radius:45px;-webkit-transition:.2s;-moz-transition:.2s;-o-transition:.2s;transition:.2s;background:var(--white);-webkit-box-shadow:var(--shadow-1);-moz-box-shadow:var(--shadow-1);box-shadow:var(--shadow-1);color:var(--foreground-dimmer)}.toggle-label.isOn.__jsx-style-dynamic-selector{background-color:var(--accent-primary-default);border-color:var(--accent-primary-default)}.toggle-checkbox.__jsx-style-dynamic-selector:checked+.toggle-button.__jsx-style-dynamic-selector{-webkit-transform:translatex(-webkit-calc(100% - 6px));-moz-transform:translatex(-moz-calc(100% - 6px));-ms-transform:translatex(calc(100% - 6px));-o-transform:translatex(calc(100% - 6px));transform:translatex(-webkit-calc(100% - 6px));transform:translatex(-moz-calc(100% - 6px));transform:translatex(calc(100% - 6px));color:var(--accent-primary-default)}.toggle-label.__jsx-style-dynamic-selector:active .toggle-button.__jsx-style-dynamic-selector{-webkit-box-shadow:var(--shadow-2);-moz-box-shadow:var(--shadow-2);box-shadow:var(--shadow-2)}')})]})}},24810:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(42965),i=n(97687),o=n(11409),a=n(7391),l=n(75271),c=n(66791);function s(e){var t=e.sendInput,n=e.paste,s=(0,a.useRouter)(),u=(0,r.Gv)(s);(0,l.useEffect)(function(){if(u){var e=function(e,n){t(n)?(0,i.gU)(e):(0,i.pl)(e)},r=function(e){"unknown"===e||(0,c.Z)(e)},a=function(t){(0,i.gN)(t,function(t){var a=t.type;switch(a){case o.cF.SHELL_INSERT_INPUT:e(t.id,t.input);break;case o.cF.SHELL_COMMAND:r(t.command);break;case o.cF.SHELL_PASTE_TEXT:n(t.text)?(0,i.gU)(t.id):(0,i.pl)(t.id);break;default:(0,c.Z)(a)}})};return window.addEventListener("message",a),function(){window.removeEventListener("message",a)}}},[u,t,n])}},54152:function(e,t,n){n.d(t,{H$:function(){return c},Q1:function(){return l}});var r=n(97687),i=n(11409),o=n(85234),a=n.n(o);function l(e){var t=e.isDrawerOpen,n=e.isShowingAllPanes,r=e.isSaving,o=e.isOffline,a=e.runState,l=e.activePaneType,c=e.activePaneFilePath;return{messageType:i.cF.WORKSPACE_STATE,isDrawerOpen:t,isShowingAllPanes:n,isSaving:r,isOffline:o,runState:a,activePaneType:l,activePaneFilePath:c}}function c(e){var t=e.payload,n=a()();(0,r.bG)(t,n)}},96432:function(e,t,n){n.d(t,{Z:function(){return G}});var r=n(27387),i=n(66626),o=n(78950),a=n(63257),l=n(96583),c=n(3796),s=n(6065),u=n(58532),d=n(63163),f=n(7420),h=n(55621),p=n(42704),m=n(71711),v=n(75271),g=n(41733),y=n(21262),b=n(71440),w=n(9122);function Z(){var e=(0,y._)(["\n  query BSODComponent {\n    currentUser {\n      id\n      username\n      image\n      isStaff: hasRole(role: REPLIT_STAFF)\n      isAdmin: hasRole(role: ADMIN)\n    }\n  }\n"]);return Z=function(){return e},e}var x={},C=(0,b.Ps)(Z()),k=n(76881),S=n(62279),_=n(36809),E=(0,S.iv)({".sentry-error-embed-wrapper":{zIndex:"".concat(d.n0," !important")}}),T=(0,_.X)({errorStack:[d.l0.p(16),d.l0.width("100%"),d.l0.backgroundColor.backgroundHigher,d.l0.borderRadius(8),d.l0.overflowY("hidden"),{whiteSpace:"pre"}],errorStackContent:[d.l0.font.code,d.l0.fontSize(12)],error:[d.l0.font.code]}),R=/at (.+) \((https:\/\/.+\.js):(\d+):(\d+)\)/,D=/at (https:\/\/.+\.js):(\d+):(\d+)/;function I(){return(I=(0,r._)(function(e){var t,c,s,u,d,f,h,p;function m(){return(m=(0,r._)(function(e){var n,r,i;return(0,l.Jh)(this,function(o){switch(o.label){case 0:if(n=t.get(e))return[2,n];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(e).then(function(e){return e.json()})];case 2:return r=o.sent(),i=new c.SourceMapConsumer(r),t.set(e,i),[2,i];case 3:return o.sent(),[2,null];case 4:return[2]}})})).apply(this,arguments)}return(0,l.Jh)(this,function(v){switch(v.label){case 0:t=new Map,v.label=1;case 1:return v.trys.push([1,3,,4]),[4,n.e(4552).then(n.t.bind(n,94552,19))];case 2:return c=v.sent(),[3,4];case 3:throw v.sent(),Error("source-map not available");case 4:var g;if(!(s=e.stack))throw Error("expected error.stack to be defined");return u=s.split("\n").map(function(e){return e.trim()}).filter(function(e){return!!e}),f=(d=(0,o._)(u))[0],[4,Promise.all(d.slice(1).map((g=(0,r._)(function(e){var t,n,r,o,a,c,s,u,d,f;return(0,l.Jh)(this,function(l){switch(l.label){case 0:if(R.test(e)){if(!(a=R.exec(e)))throw Error("expected result");n=(c=(0,i._)(a.slice(2),3))[0],r=c[1],o=c[2]}else{if(!D.test(e))return[2,e];if(!(s=D.exec(e)))throw Error("expected result");n=(u=(0,i._)(s.slice(1),3))[0],r=u[1],o=u[2]}return[4,function(e){return m.apply(this,arguments)}("".concat(n,".map"))];case 1:if(!(d=l.sent()))return[2,"    ".concat(e)];if(f=d.originalPositionFor({line:Number(r),column:Number(o)}),t)return[2,"    at ".concat(f.name," (").concat(f.source,":").concat(f.line,":").concat(f.column,")")];return[2,"    at ".concat(f.source,":").concat(f.line,":").concat(f.column)]}})}),function(e){return g.apply(this,arguments)})))];case 5:return h=v.sent(),Object.assign(p=Error(),{name:e.name,stack:[f].concat((0,a._)(h)).join("\n"),message:e.message},e),[2,p]}})})).apply(this,arguments)}var B=function(e){var t=e.bsod,n=(0,i._)((0,v.useState)(null),2),o=n[0],a=n[1];(0,v.useEffect)(function(){(0,r._)(function(){return(0,l.Jh)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,function(e){return I.apply(this,arguments)}(t.error)];case 1:return a(e.sent()),[3,3];case 2:return e.sent(),[2];case 3:return[2]}})})()},[t.error]);var s=(0,v.useMemo)(function(){var e,n,r,i;return o?null!==(r=null===(n=o.stack)||void 0===n?void 0:n.split("\n"))&&void 0!==r?r:[]:null!==(i=null===(e=t.error.stack)||void 0===e?void 0:e.split("\n"))&&void 0!==i?i:[]},[o,t.error.stack]);return(0,c.tZ)("div",{css:T.errorStack,children:(0,c.tZ)(p.gC,{spacing:1,children:(0,c.BX)("div",{css:T.errorStackContent,children:[(0,c.BX)("div",{children:["Origin: ",t.origin]}),null==s?void 0:s.map(function(e,t){var n=e.replace("webpack-internal:///./",""),r=n.includes("node_modules");return(0,c.tZ)("div",{css:r&&d.l0.color.foregroundDimmest,children:n},t)})]})})})},G=function(){var e,t,n,r=(0,i._)((0,k.qg)(),1)[0],o=(e=(0,g._)({},x,{skip:!r}),w.a(C,e)),a=o.data,l=o.loading;if((0,k.ic)(),!r)return null;var v=(null==a?void 0:null===(t=a.currentUser)||void 0===t?void 0:t.isStaff)||(null==a?void 0:null===(n=a.currentUser)||void 0===n?void 0:n.isAdmin);return(0,c.BX)(u.u,{isOpen:!0,preventClose:!0,onRequestClose:function(){},maxWidth:872,children:[(0,c.BX)(p.gC,{spacing:2,align:"center",children:[(0,c.tZ)(h.Z,{level:2,children:" Your Repl is having a bit of trouble."}),(0,c.tZ)("div",{className:"spacer"}),(0,c.tZ)(m.Z,{size:"large",children:"The issue has been logged and the Replit team will look into it. Try reloading the page to get back to coding."}),(0,c.tZ)("div",{css:[d.l0.p(16),d.l0.width("100%"),d.l0.backgroundColor.backgroundHigher,d.l0.borderRadius(8)],children:(0,c.BX)(p.gC,{spacing:1,children:[!l&&(null==a?void 0:a.currentUser)?(0,c.BX)(p.Ug,{spacing:2,align:"center",children:[(0,c.tZ)(s.q,{src:a.currentUser.image,username:a.currentUser.username,size:48}),(0,c.tZ)(m.Z,{size:"medium",children:a.currentUser.username})]}):null,(0,c.BX)("div",{css:T.error,children:["Error: ",r.eventId]})]})}),v?(0,c.tZ)(B,{bsod:r}):null,(0,c.tZ)("div",{className:"spacer"}),(0,c.tZ)(f.Z,{onClick:function(){return window.location.reload()},color:"primary",filled:!0,fullWidth:!0,children:"reload"}),!1]}),(0,c.tZ)(S.xB,{styles:[E]})]})}},34525:function(e,t,n){n.d(t,{Z:function(){return v}});var r=n(12285),i=n(4955),o=n(41733),a=n(30509),l=n(9670),c=n(3796),s=n(25722),u=n(93245),d=n(63163),f=n(75271),h=n(76881),p=n(49500),m=function(e){"use strict";(0,i._)(n,e);var t=(0,l._)(n);function n(){var e;return(0,r._)(this,n),e=t.apply(this,arguments),e.state={hasErrored:!1,error:null,errorInfo:null},e}var o=n.prototype;return o.componentDidCatch=function(e,t){this.setState({hasErrored:!0,error:e,errorInfo:t}),this.props.handleError(e,t),p.error(e)},o.render=function(){if(this.state.hasErrored){var e,t,n;return(0,c.tZ)(u.G,{css:[d.l0.font.code,d.l0.p(16),{whiteSpace:"pre",overflow:"hidden",color:"white"},d.l0.backgroundColor.blurpleDefault,d.l0.height("100%")],children:(0,c.tZ)(u.G,{children:null!==(n=null===(t=this.state)||void 0===t?void 0:null===(e=t.error)||void 0===e?void 0:e.stack)&&void 0!==n?n:"An unknown error occurred."})})}return this.props.children},n}(f.Component);function v(e){var t=e.bsod,n=void 0!==t&&t,r=e.sentry,i=void 0===r||r,l=e.handleError,u=e.children,d=e.origin,f=void 0===d?"ErrorBoundary: (no origin provided)":d,p=e.tags,v=void 0===p?{}:p,g=e.extras,y=void 0===g?{}:g,b=(0,h.uV)();return(0,c.tZ)(m,{handleError:function(e,t){n?b({error:e,extras:(0,a._)((0,o._)({},y),{errorInfo:t}),tags:(0,a._)((0,o._)({},v),{errorBoundary:!0}),origin:f}):i&&s.$e(function(n){n.setTag("errorBoundary",!0),n.setTags(v),n.setExtra("errorInfo",t),n.setExtras(y),s.Tb(e)}),l&&l(e,t)},children:u})}},13556:function(e,t,n){n.d(t,{YX:function(){return w},ho:function(){return Z}});var r=n(12285),i=n(41733),o=n(30509),a=n(66626),l=n(3796),c=n(54129),s=n(24766),u=n(93245),d=n(27840),f=n(24543),h=n(10578),p=n(63163),m=n(69746),v=n(21885),g=n(75271),y=n(25731),b=n(70624),w=new(function(){"use strict";function e(){var t=this;(0,r._)(this,e),this.counter=0,this.enabled=!1,this.maxEntries=10,this.logs=(0,y.u)([]),this.clear=function(){t.logs.current=[]}}var t=e.prototype;return t.toggle=function(e){this.enabled=e},t.add=function(e){var t=this,n=this.counter++;if(!this.enabled)return{id:n};var r={id:n,request:e,requestTime:Date.now()};return this.logs.update(function(e){return[r].concat(e).slice(0,t.maxEntries)}),{id:n}},t.update=function(e,t){this.enabled&&this.logs.update(function(n){var r=n.findIndex(function(t){return t.id===e.id});if(-1===r)return n;var i=n.slice();return i[r]=t(i[r]),i})},t.complete=function(e,t){this.update(e,function(e){return(0,o._)((0,i._)({},e),{response:t,responseTime:Date.now()})})},t.abort=function(e){this.logs.update(function(t){return t.filter(function(t){return t.id!==e.id||null!=t.responseTime})})},e}()),Z=function(e){var t=e.isHidden,n=(0,c.Z)(w.logs);return t?null:(0,l.BX)(u.G,{css:[p.l0.flex.column],children:[(0,l.BX)(u.G,{css:[p.l0.flex.row,p.l0.align.center,p.l0.m(4),p.l0.position.sticky,p.l0.top(0),p.l0.backgroundColor.backgroundDefault,p.l0.zIndex(1)],children:[(0,l.tZ)(s.xv,{css:p.l0.flex.grow(1),multiline:!1,children:"Requests"}),(0,l.tZ)(v.Z,{onClick:w.clear})]}),(0,l.BX)(u.G,{css:[p.l0.flex.grow(1),p.l0.flex.column,p.l0.overflow("auto")],children:[n.map(function(e){var t;return(0,l.tZ)(x,{log:e},null!==(t=e.id)&&void 0!==t?t:e.requestTime.valueOf())}),!n.length&&(0,l.tZ)(u.G,{css:p.l0.m(4),children:"\uD83D\uDE14 No logs yet..."})]})]})},x=(0,g.memo)(function(e){var t,n=e.log,r=n.requestTime,i=n.responseTime,o=n.request,c=n.response,v=(0,a._)((0,m.Z)(!0),2),g=v[0],y=v[1],w=o.prefix.length>20?"...".concat(o.prefix.slice(-20)):o.prefix;return(0,l.BX)(u.G,{css:[p.l0.my(4),p.l0.mx(4)],children:[(0,l.BX)(u.G,{role:"button",onClick:y,onKeyDown:y,tabIndex:0,css:[p.l0.flex.row,p.l0.rowWithGap(4),{"&:hover":{cursor:"pointer",".lspLog-requestMethod":{textDecoration:"underline"}}}],children:[(0,l.BX)(u.G,{css:[p.l0.flex.grow(1),p.l0.rowWithGap(2)],children:[(0,l.tZ)(s.xv,{multiline:!1,children:(t=n.response)?"CompleteCodeResult"===t.__typename?(0,l.tZ)(d.Z,{}):(0,l.tZ)(f.Z,{}):(0,l.tZ)(h.Z,{})}),(0,l.tZ)(s.xv,{multiline:!1,children:(0,l.tZ)("code",{children:w})})]}),(0,l.tZ)(u.G,{css:{opacity:.5},children:null!=i&&(0,l.BX)(s.xv,{css:p.l0.fontSize(13),multiline:!1,children:[i.valueOf()-r.valueOf(),"ms"]})})]}),!g&&(0,l.BX)(l.HY,{children:[void 0!==o&&(0,l.tZ)(b.g,{name:"request",src:o}),void 0!==c&&("CompleteCodeResult"===c.__typename?(0,l.BX)("details",{children:[(0,l.tZ)("summary",{children:"Response"}),(0,l.tZ)("pre",{css:[p.l0.overflow("scroll"),p.l0.borderRadius(4),p.l0.p(4),{border:"1px solid ".concat(p.TV.outlineDimmest)}],children:c.code})]}):(0,l.tZ)(b.g,{name:"response",src:c}))]})]})})},59855:function(e,t,n){n.d(t,{$G:function(){return Z},Ay:function(){return g},Ys:function(){return w},_k:function(){return d},_t:function(){return h},cF:function(){return a},gd:function(){return s},mN:function(){return m},qc:function(){return b}});var r=n(49853),i=n(80786),o=n(75271),a=function(e,t){var n=e.dir,r=e.channel,i=e.stringifiedCmd,o=e.cmd;return(!t.direction||n===t.direction)&&(!t.channels.length||!!t.channels.includes(o.channel))&&(!!(!t.regexp||!t.regexp.test||r.name&&t.regexp.test(r.name)||r.service&&t.regexp.test(r.service))||t.regexp.test(i))},l=(0,r.cn)([]),c=(0,r.cn)([]);function s(){return(0,o.useDeferredValue)((0,i.Dv)(c))}var u=(0,r.cn)(null,function(e,t,n){a(n,e(p))&&t(c,function(e){return e.concat(n)}),t(l,function(e){return e.concat(n)})});function d(){return(0,i.b9)(u)}var f=(0,r.cn)(null,function(e,t){t(l,[]),t(c,[])});function h(){return(0,i.b9)(f)}var p=(0,r.cn)({regexp:null,direction:"",highlightOnly:!1,channels:[]});function m(){return(0,i.Dv)(p)}var v=(0,r.cn)(null,function(e,t,n){var r;t(p,n),t(c,(r=e(l),(n.regexp||n.direction||n.channels.length)&&!n.highlightOnly?r.filter(function(e){return a(e,n)}):r))});function g(){return(0,i.b9)(v)}var y=(0,r.cn)(!1);function b(){return(0,i.Dv)(y)}function w(){return(0,i.b9)((0,o.useMemo)(function(){return(0,r.cn)(null,function(e,t,n){return t(y,n)})},[]))}function Z(){return(0,i.b9)((0,o.useMemo)(function(){return(0,r.cn)(null,function(e,t){return t(y,function(e){return!e})})},[]))}},38337:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(23882),i=n(59855),o=n(7391),a=n(75271),l=n(92674),c=n.n(l);function s(){var e=(0,o.useRouter)(),t=(0,r.Z)().container,n=(0,i.qc)(),l=(0,i.Ys)(),s=(0,i._k)();(0,a.useEffect)(function(){e.query.debug&&"undefined"!==e.query.debug&&l(!0)},[l,e.query.debug]),(0,a.useEffect)(function(){if(n)return t.client().onDebugLog(function(e){if("log"===e.type){var n={name:e.log.channel.name,service:null};if("string"==typeof e.log.channel.service)n.service=e.log.channel.service;else if(e.log.channel.service){var r=t.getContext();r&&(n.service=e.log.channel.service(r))}s({id:c()(),channel:n,dir:e.log.direction,cmd:e.log.cmd,stringifiedCmd:JSON.stringify(e.log.cmd),timestamp:window.performance.now()})}})},[n,t,s])}},70624:function(e,t,n){n.d(t,{L:function(){return P},g:function(){return L}});var r=n(42516),i=n(41733),o=n(30509),a=n(66626),l=n(63257),c=n(3796),s=n(31089),u=n(75271),d=n(6069),f=n(31718),h=n(9602),p=n(44935),m=n(24766),v=n(93245),g=n(96601),y=n(27840),b=n(7935),w=n(98127),Z=n(16865),x=n(59261),C=n(71137),k=n(39031),S=n(10578),_=n(63163),E=n(11208),T=n(92234),R=n(69746),D=n(21885),I=n(42306),B=n(76773),G=n(59489),P=function(e){var t,n,d,g,y,b,w=e.isHidden,C=(n=(t=(0,a._)((0,u.useState)(null),2))[0],d=t[1],g=(0,I.R3)(),(0,u.useEffect)(function(){g!==n&&null!=g&&d(g)},[g,n]),n),k=(0,E.Z)(C||""),S=(0,a._)((0,u.useState)(null===(y=k[0])||void 0===y?void 0:y.clientId),2),P=S[0],L=S[1];P&&!k.find(function(e){return P===e.clientId})&&L(null===(b=k[0])||void 0===b?void 0:b.clientId),!P&&k.length&&L(k[0].clientId);var O=(0,s.U)(),U=(0,a._)((0,R.Z)(!0),2),X=U[0],M=U[1],F=(0,a._)((0,u.useState)(""),2),W=F[0],V=F[1],H=(0,a._)((0,u.useState)(function(){return{}}),2),z=H[0],j=H[1],q=(0,a._)((0,R.Z)(!0),2),J=q[0],Y=q[1],$=(0,a._)((0,R.Z)(!0),2),K=$[0],Q=$[1],ee=(0,u.useCallback)(function(e,t){j(function(n){var a;return(0,o._)((0,i._)({},n),(0,r._)({},e,[t].concat((0,l._)(null!==(a=n[e])&&void 0!==a?a:[])).slice(0,100)))})},[]),et=(0,u.useCallback)(function(e,t,n){j(function(r){if(r[e]){for(var o=0;o<r[e].length;o++)if(r[e][o].id===t){r[e][o]=n(r[e][o]);break}r[e]=r[e].slice(0,100)}return(0,i._)({},r)})},[]),en=(0,u.useCallback)(function(){P&&j(function(e){return(0,o._)((0,i._)({},e),(0,r._)({},P,[]))})},[P]),er=(0,u.useMemo)(function(){return k.find(function(e){return e.clientId===P})},[k,P]),ei=null==er?void 0:er.isOpen(C||""),eo=(0,u.useCallback)(function(){var e=null==er?void 0:er.clientId;e&&ee(e,{canceled:!1,notification:{method:"probe",params:{filePath:C,state:null==er?void 0:er.getServerState(),capabilities:null==er?void 0:er.getServerCapabilities(),diagnostics:ei?null==er?void 0:er.getDiagnostics(C||""):[],isOpen:ei,isSupportedFile:null==er?void 0:er.isSupportedFile(C||"")}},requestTime:new Date,type:"probe"})},[ee,C,er,ei]),ea=(0,u.useMemo)(function(){if(!P)return[];var e,t,n=W.split(",").map(function(e){return e.trim()}).filter(Boolean);if(!n.length)return null!==(e=z[P])&&void 0!==e?e:[];var r=null!==(t=z[P])&&void 0!==t?t:[];return J||(r=r.filter(function(e){return null==e.notification})),K||(r=r.filter(function(e){return null==e.request})),W&&(r=r.filter(function(e){return n.some(function(t){var n;return null===(n=e.request||e.notification)||void 0===n?void 0:n.method.toLowerCase().includes(t.toLowerCase())})})),r},[W,z,P,J,K]);return((0,u.useEffect)(function(){return(0,B.uf)(k.flatMap(function(e){return[e.onRequest(function(t){X&&ee(e.clientId,{id:t.id,canceled:!1,request:t.data,requestTime:new Date})}),e.onResponse(function(t){X&&et(e.clientId,t.id,function(e){return(0,i._)((0,o._)((0,i._)({},e),{responseTime:new Date}),void 0!==t.result?{response:t.result}:{error:t.error})})}),e.onCancelRequest(function(t){X&&et(e.clientId,t,function(e){return(0,o._)((0,i._)({},e),{canceled:!0})})}),e.onDiagnostics(function(t){var n=t.path,r=t.diagnostics;X&&ee(e.clientId,{canceled:!1,notification:{method:"textDocument/publishDiagnostics for "+n,params:r},requestTime:new Date,type:"diagnostics"})}),e.onServerStateChange(function(t){X&&ee(e.clientId,{canceled:!1,notification:{method:"state",params:{serverState:t}},requestTime:new Date,type:"state"})}),e.onServerCapabilitiesChange(function(t){X&&ee(e.clientId,{canceled:!1,notification:{method:"capabilities",params:{serverCapabilities:t}},requestTime:new Date,type:"capabilities"})}),e.onSendNotification(function(t){X&&ee(e.clientId,{canceled:!1,notification:t,requestTime:new Date})}),e.onReceiveNotification(function(t){X&&ee(e.clientId,{canceled:!1,notification:t,requestTime:new Date})})]}))},[ee,et,X,k]),w)?null:(0,c.BX)(v.G,{css:[_.l0.flex.column],children:[(0,c.BX)(v.G,{css:[_.l0.flex.row,_.l0.align.center,_.l0.m(4),_.l0.position.sticky,_.l0.top(0),_.l0.backgroundColor.backgroundDefault,_.l0.zIndex(1)],children:[(0,c.tZ)(m.xv,{multiline:!1,children:P?(0,c.BX)(c.HY,{children:[(0,c.tZ)(N,{})," logs for ",(0,c.tZ)("code",{children:C})]}):"No LSP client available"}),(0,c.tZ)(h.hU,{alt:"Probe LSP",onClick:eo,children:(0,c.tZ)(Z.Z,{})}),(0,c.tZ)(v.G,{css:_.l0.flex.grow(1)}),(0,c.tZ)(T.Z,{id:"toggleIsLogging",isOn:X,onChange:M})]}),(0,c.tZ)(v.G,{children:(0,c.tZ)(G.hE,{name:"Visible LSP Client",value:P,onChange:L,row:!0,children:k.map(function(e){return(0,c.tZ)(G.rK,{id:e.clientId,text:e.clientName,value:e.clientId},e.clientId)})})}),(0,c.BX)(v.G,{css:[_.l0.rowWithGap(8),_.l0.m(4),_.l0.mb(8)],children:[(0,c.BX)(v.G,{css:_.l0.rowWithGap(4),children:[(0,c.tZ)(x.Z,{}),(0,c.tZ)(m.xv,{multiline:!1,children:"Show"})]}),(0,c.BX)(v.G,{css:_.l0.rowWithGap(4),children:[(0,c.tZ)(f.X,{name:"showNotifications",id:O("showNotifications"),checked:J,onChange:Y}),(0,c.tZ)("label",{htmlFor:O("showNotifications"),children:" Notifications"})]}),(0,c.BX)(v.G,{css:_.l0.rowWithGap(4),children:[(0,c.tZ)(f.X,{name:"showRequests",id:O("showRequests"),checked:K,onChange:Q}),(0,c.tZ)("label",{htmlFor:O("showRequests"),children:" Requests"})]}),(0,c.tZ)(v.G,{css:_.l0.flex.growAndShrink(1)}),(0,c.tZ)(v.G,{css:_.l0.rowWithGap(4),children:(0,c.tZ)(D.Z,{onClick:en})})]}),(0,c.tZ)(v.G,{css:_.l0.rowWithGap(4),children:(0,c.tZ)(p.II,{id:O("filterLsp"),placeholder:"Filter by method (Separate by ,)",onChange:function(e){return V(e.target.value)},value:W})}),(0,c.BX)(v.G,{css:[_.l0.flex.grow(1),_.l0.flex.column,_.l0.overflow("auto")],children:[ea.map(function(e,t){var n;return(0,c.tZ)(A,{log:e},null!==(n=e.id)&&void 0!==n?n:e.requestTime.valueOf()+""+t)}),!ea.length&&(0,c.tZ)(v.G,{css:_.l0.m(4),children:"\uD83D\uDE14 No logs yet..."})]})]})},A=u.memo(function(e){var t,n,r,i,o,l=e.log,s=l.requestTime,u=l.responseTime,d=l.request,f=l.response,h=l.notification,p=l.id,x=(0,a._)((0,R.Z)(!0),2),E=x[0],T=x[1];return(0,c.BX)(v.G,{css:[_.l0.my(4),_.l0.mx(4)],children:[(0,c.BX)(v.G,{role:"button",onClick:T,onKeyDown:T,tabIndex:0,css:[_.l0.flex.row,_.l0.rowWithGap(4),{"&:hover":{cursor:"pointer",".lspLog-requestMethod":{textDecoration:"underline"}}}],children:[(0,c.BX)(v.G,{css:[_.l0.flex.grow(1),_.l0.rowWithGap(2)],children:[(0,c.tZ)(m.xv,{className:"lspLog-emoji",multiline:!1,children:(t=l.type,n=l.canceled,r=l.response,i=l.notification,"state"===t?(0,c.tZ)(w.Z,{}):"diagnostics"===t?(0,c.tZ)(g.Z,{}):"capabilities"===t?(0,c.tZ)(C.Z,{}):"probe"===t?(0,c.tZ)(Z.Z,{}):n?(0,c.tZ)(b.Z,{}):i?(0,c.tZ)(k.Z,{}):void 0!==r?(0,c.tZ)(y.Z,{}):(0,c.tZ)(S.Z,{}))}),(0,c.BX)(m.xv,{className:"lspLog-requestMethod",multiline:!1,children:[(0,c.tZ)("code",{children:null===(o=d||h)||void 0===o?void 0:o.method}),null!=p&&(0,c.BX)("code",{className:"lspLog-logId",css:{opacity:.5},children:["#",p]})]})]}),(0,c.tZ)(v.G,{css:{opacity:.5},children:null!=u&&(0,c.BX)(m.xv,{css:_.l0.fontSize(13),multiline:!1,children:[u.valueOf()-s.valueOf(),"ms"]})})]}),!E&&(0,c.BX)(c.HY,{children:[void 0!==d&&(0,c.tZ)(L,{name:"request.params",src:d.params}),void 0!==h&&(0,c.tZ)(L,{name:"notification.params",src:h.params}),void 0!==f&&(0,c.tZ)(L,{name:"response",src:f})]})]})}),L=(0,u.memo)(function(e){var t=e.name,n=e.src;return(0,c.tZ)(v.G,{css:{marginTop:5,".node-ellipsis":{letterSpacing:-2},".object-key span":{letterSpacing:0},".object-key-val":{paddingBottom:"0 !important"},'.object-key + span[style*="margin"], .array-key + span[style*="margin"]':{marginLeft:"0 !important"},".variable-row, .pushed-content .object-key-val":{paddingLeft:"10px !important",paddingBottom:"0 !important"}},children:(0,c.tZ)(d.Z,{json:(0,r._)({},t,n)})})}),N=function(){return(0,c.tZ)(m.xv,{multiline:!1,css:{display:"inline",fontStyle:"italic",fontWeight:600,textShadow:"".concat(_.TV.redDimmer," 2px 2px")},children:"LSP"})}},69746:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(66626),i=n(75271);function o(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(0,r._)((0,i.useState)(e),2),n=t[0],o=t[1];return[n,(0,i.useCallback)(function(){return o(function(e){return!e})},[])]}},34860:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(66626),i=n(3796),o=n(90169),a=n(93245),l=n(36809),c=n(63163),s=n(75271),u=n(16770),d=(0,l.X)({container:[c.l0.p(8)],innerContainer:[c.l0.py(16),c.l0.px(8),c.l0.colWithGap(12),c.l0.align.center,c.l0.justify.center,c.l0.border({color:c.TV.outlineDimmest}),c.l0.borderRadius(),c.l0.container()]});function f(e){var t=(0,r._)((0,s.useState)(!1),2),n=t[0];t[1];var l=(0,s.useCallback)(function(e){var t;if(e&&(null===(t=e.contents.contents)||void 0===t?void 0:t.$kind)==="agentPlanEventContents")return e.contents.contents.agentPlanEventContents},[]),c=(0,o.Ru)()||"",f=(0,o.Mi)(c,l);return(0,i.tZ)(a.G,{css:d.container,children:(0,i.tZ)(a.G,{css:d.innerContainer,children:(0,i.tZ)(u.Z,{data:f,editable:n})})})}},79484:function(e,t,n){n.d(t,{Z:function(){return G},y:function(){return L}});var r=n(27387),i=n(42516),o=n(66626),a=n(96583),l=n(3796),c=n(90169),s=n(29574),u=n(14118),d=n(99595),f=n(79904),h=n(9602),p=n(44935),m=n(86466),v=n(24766),g=n(93245),y=n(36809),b=n(7935),w=n(85551),Z=n(26996),x=n(98571),C=n(63163),k=n(23882),S=n(86283),_=n(62537),E=n(42306),T=n(75271),R=n(35370),D=function(e){return"color-mix(in srgb, ".concat(C.TV.blurpleDefault," ").concat(100*e,"%, transparent)")},I=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1;return e={},(0,i._)(e,m.dj.interactiveBackground,D(t)),(0,i._)(e,m.dj.interactiveBackgroundActive,D(t+.1)),e},B=(0,y.X)({root:[C.l0.rowWithGap(4),C.l0.align.start,C.l0.p(4),C.l0.m(4),C.l0.border({color:C.TV.blurpleDimmer,width:1}),C.l0.borderRadius(4),{backgroundColor:"color-mix(in srgb, ".concat(C.TV.blurpleDimmest," 25%, transparent)")}],icon:[C.l0.p(4)],centerContent:[C.l0.colWithGap(4),C.l0.flex.growAndShrink(1)],suggestedPromptButton:[m.gU.filled,I()],closeButton:[m.gU.filled,I(0)],promptInputContainer:[C.l0.position.relative],promptInput:[I()],sendButton:[C.l0.position.absolute,C.l0.right(4),C.l0.top(4)]});function G(e){var t,n,i,s=e.filePath,u=e.onDismiss,m=e.performPaneOperation,y=(0,d.Z)().showNotice,E=(0,k.Z)().fs,D=(0,_.Se)().getDescription({type:"ghostwriterChat"}),I=(0,o._)((0,T.useState)(""),2),G=I[0],P=I[1],L=(n=(t=(0,o._)((0,T.useState)(!0),2))[0],i=t[1],(0,T.useEffect)(function(){function e(){return(e=(0,r._)(function(){var e;return(0,a.Jh)(this,function(t){switch(t.label){case 0:return[4,E.readFile(s)];case 1:return(e=t.sent()).error||i(""===e.content.toString()),[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[s,E]),!n&&!(0,R.gK)(s)),N="Explain code in ".concat(s),O=(0,o._)((0,c.Ni)(),1)[0],U=(0,S.c)(),X=(0,c.bD)({getFileContext:U,onSession:function(e){m({operation:"open",secondary:!0,pane:{type:"ghostwriterChat",data:{sessionId:e}}})}}).sendMessage,M=(0,T.useCallback)(function(e,t){X({kind:"message",message:e,intent:t,model:"advanced"===O?c.BY.ADVANCED:c.BY.BASIC},{newSessionType:c.FF.CHAT})},[O,X]);return(0,l.BX)(g.G,{css:B.root,children:[(0,l.tZ)(w.Z,{size:24,css:B.icon}),(0,l.BX)(g.G,{css:B.centerContent,children:[(0,l.tZ)(v.xv,{multiline:!0,children:D}),L?(0,l.tZ)(f.zx,{css:B.suggestedPromptButton,iconLeft:(0,l.tZ)(Z.Z,{color:C.TV.blurpleDefault}),text:N,onClick:function(){M(N,c.$h.EXPLAIN),u()}}):null,(0,l.BX)(g.G,{css:B.promptInputContainer,children:[(0,l.tZ)(p.II,{css:B.promptInput,placeholder:"Type message to start AI chat",value:G,onChange:function(e){return P(e.target.value)}}),(0,l.tZ)(h.hU,{colorway:"purple",css:B.sendButton,disabled:""===G,alt:"Start AI Chat",onClick:function(){M(G,c.$h.NONE),u()},children:(0,l.tZ)(x.Z,{})})]})]}),(0,l.tZ)(h.hU,{css:B.closeButton,alt:"Dismiss",onClick:function(){u(),y((0,l.tZ)(A,{performPaneOperation:m}))},children:(0,l.tZ)(b.Z,{})})]})}var P=(0,y.X)({button:[C.l0.reset.button,C.l0.linkStyle]});function A(e){var t=e.performPaneOperation,n=(0,T.useCallback)(function(){t({operation:"open",secondary:!0,pane:{type:"preferences"}})},[t]);return(0,l.BX)(v.xv,{multiline:!0,children:["AI chat can always be found in the workspace tools list.",(0,l.tZ)("br",{}),"Visit"," ",(0,l.tZ)("button",{css:P.button,onClick:n,children:"User Preferences"})," ","to change how AI features are presented in new Repls."]})}function L(){var e=(0,u.P5)({controlName:"flag-default-layout-ai-in-the-editor",logFlagToAnalytics:!1}),t=(0,s.Gn)("highlightAiChatInDefaultLayout").preferences,n=(0,E.CL)(),r=(0,o._)((0,T.useState)(function(){return e&&n&&!1!==t.highlightAiChatInDefaultLayout}),2),i=r[0],a=r[1];return{isAiCalloutVisible:i,handleDismiss:(0,T.useCallback)(function(){a(!1)},[])}}},36608:function(e,t,n){n.d(t,{r:function(){return c}});var r=n(3796),i=n(11782),o=n(24766),a=n(93245),l=n(63163);function c(e){var t=e.textVariant;return(0,r.BX)(o.xv,{variant:t,children:["AI Chat is currently unavailable. For more information, visit"," ",(0,r.tZ)("a",{href:"https://status.replit.com",target:"_blank",children:"our status page."})]})}t.Z=function(e){var t=e.textVariant,n=e.showImage;return(0,r.BX)(a.G,{css:[l.l0.center,l.l0.textAlign.center,l.l0.px(16),l.l0.colWithGap(8),l.l0.flex.growAndShrink(1)],children:[(0,r.tZ)(c,{textVariant:t}),n?(0,r.tZ)(i.Z,{src:"/public/images/ghostwriter/orb.png",css:[{userSelect:"none",mixBlendMode:"screen",filter:"brightness(110%) saturate(1.2)",maskImage:"linear-gradient(".concat(l.TV.backgroundRoot,", transparent)")}],width:200,height:200,objectFit:"contain","aria-hidden":"true",alt:"",draggable:!1}):null]})}},13781:function(e,t,n){n.d(t,{AA:function(){return k},CH:function(){return y},Gg:function(){return v},Ne:function(){return _},pV:function(){return x},vk:function(){return w}});var r=n(41733),i=n(21262),o=n(71440),a=n(59520),l=n(9122),c=n(82303);function s(){var e=(0,i._)(["\n  fragment AutograderTest on ReplTemplateTest {\n    id\n    name\n    input\n    output\n    name\n    type\n  }\n"]);return s=function(){return e},e}function u(){var e=(0,i._)(["\n  query Autograder($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        authorizations {\n          writeTests {\n            isAuthorized\n          }\n        }\n        template {\n          id\n        }\n        ioTests {\n          id\n          ...AutograderTest\n        }\n        unitTests {\n          meta {\n            id\n            ...UnitTestsReplUnitTestMeta\n          }\n          tests {\n            id\n            ...UnitTestsReplUnitTest\n            lastRun(replId: $replId) {\n              ... on ReplUnitTestLastRun {\n                status\n              }\n              ... on UserError {\n                message\n              }\n            }\n          }\n        }\n        isProject\n        isProjectFork\n        owner {\n          ... on Team {\n            id\n            isAdmin\n          }\n          ... on User {\n            id\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,i._)(["\n  mutation SaveIOTestResults(\n    $teamId: Int!\n    $replId: String!\n    $results: [IOTestResultInput!]!\n  ) {\n    saveIOTestResults(teamId: $teamId, replId: $replId, results: $results) {\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return d=function(){return e},e}function f(){var e=(0,i._)(["\n  mutation CreateAutograderTest($input: CreateTemplateTestInput!) {\n    createTemplateTest(input: $input) {\n      ... on ReplTemplateTest {\n        id\n        ...AutograderTest\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,i._)(["\n  mutation UpdateAutograderTest($input: UpdateTemplateTestInput!) {\n    updateTemplateTest(input: $input) {\n      ... on ReplTemplateTest {\n        id\n        ...AutograderTest\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return h=function(){return e},e}function p(){var e=(0,i._)(["\n  mutation DeleteAutograderTest($testId: Int!) {\n    deleteTemplateTest(testId: $testId) {\n      ... on ReplTemplate {\n        id\n        tests {\n          id\n          ...AutograderTest\n        }\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return p=function(){return e},e}var m={},v=(0,o.Ps)(s()),g=(0,o.Ps)(u(),v,a.aA,a.Rb);function y(e){var t=(0,r._)({},m,e);return l.a(g,t)}var b=(0,o.Ps)(d());function w(e){var t=(0,r._)({},m,e);return c.D(b,t)}var Z=(0,o.Ps)(f(),v);function x(e){var t=(0,r._)({},m,e);return c.D(Z,t)}var C=(0,o.Ps)(h(),v);function k(e){var t=(0,r._)({},m,e);return c.D(C,t)}var S=(0,o.Ps)(p(),v);function _(e){var t=(0,r._)({},m,e);return c.D(S,t)}},83918:function(e,t,n){n.d(t,{$:function(){return e_},u:function(){return eB}});var r=n(41733),i=n(30509),o=n(98924),a=n(3796),l=n(69593),c=n(80403),s=n(65895),u=n(35139),d=n(23572),f=n(51442),h=n(66626),p=n(50575),m=n(36021),v=n(51271),g=n(22436),y=n(93949),b=n(93158),w=n(12009),Z=n(38866),x=n(51619),C=n(41639),k=n(20260),S=n(21460),_=n(98724),E=n(41464),T=n(82424),R=n(63163),D=n(89441),I=n(7225),B=function(e){var t=new Set(D.Z),n=new Map,r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=(0,h._)(a.value,3),s=c[0],u=c[1],d=c[2];if(!t.has(s))throw Error("Symbol not supported by LSP client. Please add to the supported symbol icons array");n.set(s,[u,null!=d?d:R.TV.foregroundDefault])}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n}([[I.SymbolKind.Array,k.Z],[I.SymbolKind.Boolean,T.Z],[I.SymbolKind.Class,m.Z,R.TV.yellowDefault],[I.SymbolKind.Constant,v.Z,R.TV.blueStronger],[I.SymbolKind.Constructor,w.Z,R.TV.blurpleDefault],[I.SymbolKind.Enum,y.Z,R.TV.orangeDefault],[I.SymbolKind.EnumMember,E.Z,R.TV.blueStronger],[I.SymbolKind.Event,p.Z],[I.SymbolKind.Field,_.Z],[I.SymbolKind.File,b.Z],[I.SymbolKind.Function,w.Z,R.TV.blurpleStronger],[I.SymbolKind.Interface,Z.Z,R.TV.blueStronger],[I.SymbolKind.Key,x.Z],[I.SymbolKind.Method,w.Z,R.TV.blurpleDefault],[I.SymbolKind.Module,S.Z,R.TV.purpleDefault],[I.SymbolKind.Namespace,g.Z],[I.SymbolKind.Object,T.Z,R.TV.blueDimmer],[I.SymbolKind.Operator,T.Z],[I.SymbolKind.Package,S.Z,R.TV.purpleDefault],[I.SymbolKind.Property,_.Z],[I.SymbolKind.String,C.Z],[I.SymbolKind.Struct,g.Z],[I.SymbolKind.TypeParameter,E.Z],[I.SymbolKind.Variable,E.Z,R.TV.blueStronger]]);function G(e){var t,n=e.kind,r=(0,h._)(null!==(t=B.get(n))&&void 0!==t?t:[T.Z,R.TV.foregroundDefault],2),i=r[0],o=r[1];return(0,a.tZ)(i,{color:o,size:16})}var P=n(96949),A=n(17601),L=n(33323),N=n(62279),O=n(86466),U=n(93245),X=n(75271),M=n(14275),F=n(44817),W=n(99399),V=(0,N.iv)([O.gU.nofill,{transitionProperty:"background-color, box-shadow, opacity",opacity:.8,":focus":{zIndex:1,opacity:1}}]),H={button:(0,N.iv)([R.l0.reset.button,R.l0.p(2),R.l0.rowWithGap(4),R.l0.align.center,V]),text:(0,N.iv)({fontSize:R.TV.fontSizeSmall})},z={opacity:1};function j(e){var t=e.icon,n=e.text,o=e.innerRef,l=e.ariaProps,c=e.active,s=(0,M.U)(l,o).buttonProps,u=(0,F.X)({}),d=u.hoverProps,f=u.isHovered;return(0,a.BX)(U.G,(0,i._)((0,r._)({tag:"button",css:H.button,style:f||c?z:void 0,innerRef:o},(0,W.d)(s,d)),{children:[t?(0,X.cloneElement)(t,{size:16}):null,(0,a.tZ)(U.G,{css:H.text,children:n})]}))}var q={root:(0,N.iv)([R.l0.p(4),R.l0.rowWithGap(4),R.l0.align.center]),text:(0,N.iv)([R.l0.truncate,R.l0.flex.growAndShrink(1),{fontSize:R.TV.fontSizeDefault}])};function J(e){return(0,a.BX)(U.G,{css:[q.root],children:[e.icon?(0,X.cloneElement)(e.icon,{size:16}):null,(0,a.tZ)(U.G,{css:q.text,children:e.text})]})}var Y=n(63257),$=n(95549),K=n(54971),Q=n(78584),ee=(0,N.iv)([R.l0.p(4)]);function et(e){var t=e.items,n=e.children,o=e.menuProps,l=e.selectedKeys,c=e.onAction,s=(0,$.D)({items:t,children:n,selectedKeys:l,selectionMode:"single"}),u=(0,X.useRef)(null),d=(0,K.H)((0,r._)({items:t,onAction:c},o),s,u);return(0,a.tZ)(U.G,(0,i._)((0,r._)({},d.menuProps),{innerRef:u,css:ee,children:(0,Y._)(s.collection).map(function(e){return(0,a.tZ)(ei,{item:e,state:s},e.key)})}))}var en={root:(0,N.iv)([R.l0.flex.row,R.l0.align.center,R.l0.position.relative,V]),selected:(0,N.iv)([{opacity:1,backgroundColor:O.vb.interactiveBackground}])},er={opacity:1};function ei(e){var t=e.item,n=e.state,o=(0,X.useRef)(null),l=(0,Q.i)({key:t.key},n,o),c=l.menuItemProps,s=l.isSelected,u=(0,F.X)({}),d=u.hoverProps,f=u.isHovered;return(0,a.tZ)(U.G,(0,i._)((0,r._)({innerRef:o,css:[en.root,s&&en.selected],style:f||s?er:void 0},(0,W.d)(c,d)),{children:t.rendered}))}var eo=n(66691),ea=n(14548),el=n(82892),ec=n(40299),es=n(83988),eu={underlay:(0,N.iv)([R.l0.coverContainer,R.l0.position.fixed]),surface:(0,N.iv)([R.l0.borderRadius(8),{boxShadow:R.TV.shadow2,border:"1px solid",borderColor:R.TV.backgroundHighest}])};function ed(e){var t=e.state,n=e.triggerRef,o=e.placement,l=e.children,c=(0,h._)((0,eo.Z)(),2),s=c[0],u=c[1],d=(0,el.S)({placement:o,triggerRef:n,popoverRef:s,offset:8},t),f=d.popoverProps,p=d.underlayProps;return(0,a.BX)(ec.aV,{children:[(0,a.tZ)(U.G,(0,i._)((0,r._)({},p),{css:eu.underlay})),(0,a.BX)(ea.Tg,(0,i._)((0,r._)({elevated:!0,css:eu.surface,innerRef:u},f),{children:[(0,a.tZ)(es.U,{onDismiss:t.close}),l,(0,a.tZ)(es.U,{onDismiss:t.close})]}))]})}var ef=n(95195);function eh(e){return CSS.escape(e.name)}function ep(e){var t=e.selectedSymbol,n=e.symbols,r=e.moveCursor,i=e.icon,o=e.text,l=(0,f.W)({onOpenChange:function(e){e&&(0,P.j)(P.U3.CODE_NAVIGATION_USED,{action:"opened"})}}),c=(0,X.useRef)(null),s=(0,ef.u)({},l,c),u=s.menuTriggerProps,d=s.menuProps,h=t?new Set([t.name]):void 0;return(0,a.BX)(a.HY,{children:[(0,a.tZ)(j,{text:o,icon:i,innerRef:c,ariaProps:u,active:l.isOpen}),l.isOpen?(0,a.tZ)(ed,{triggerRef:c,state:l,placement:"bottom left",children:(0,a.tZ)(et,{menuProps:d,items:n,selectedKeys:h,onAction:function(e){var t=n.find(function(t){return eh(t)===e});t&&(r(t.selectionRange.start),(0,P.j)(P.U3.CODE_NAVIGATION_USED,{action:"jumped"}))},children:function(e){return(0,a.tZ)(A.ck,{children:(0,a.tZ)(J,{icon:(0,a.tZ)(G,{kind:e.kind}),text:e.name})},eh(e))}})}):null]})}var em=X.memo(function(e){var t=e.symbols,n=e.symbolsPath,r=e.moveCursor,i=n.length?n[n.length-1]:null,o=i?i.children:t;return(0,a.BX)(a.HY,{children:[n.map(function(e,i){var o=0===i?t:n[i-1].children;return o?(0,a.BX)(X.Fragment,{children:[(0,a.tZ)(L.Z,{size:12}),(0,a.tZ)(ep,{symbols:o,icon:(0,a.tZ)(G,{kind:e.kind}),text:e.name,selectedSymbol:e,moveCursor:r})]},eh(e)):null}),(null==o?void 0:o.length)?(0,a.BX)(a.HY,{children:[(0,a.tZ)(L.Z,{size:12}),(0,a.tZ)(ep,{symbols:o,text:"...",moveCursor:r})]}):null]})}),ev=(0,X.memo)(function(e){var t,n=e.view,r=(0,X.useCallback)(function(e){null==n||n.dispatch({scrollIntoView:!0,selection:c.jT.cursor((0,d.RL)(n.state.doc,e))}),null==n||n.focus()},[n]),i=(0,X.useDeferredValue)({symbols:(0,u.IK)(n,s.AU),symbolsPath:(0,u.IK)(n,s.qU)});return(null===(t=i.symbols)||void 0===t?void 0:t.length)?(0,a.tZ)(em,{symbols:i.symbols,symbolsPath:i.symbolsPath||[],moveCursor:r}):null}),eg=n(36809),ey=n(16865),eb=n(62407),ew=n(28065),eZ=n(10578),ex=n(99319),eC=n(35370),ek=n(28365),eS=n(49424),e_=(0,X.memo)(function(e){var t=e.path,n=e.performPaneOperation,r=(0,ek.uN)(),i=(0,X.useCallback)(function(e){n({operation:"open",pane:(0,ex.$E)(e)})},[n]);return(0,a.BX)(ex.h4,{children:[(0,a.tZ)(ex.Qc,{children:(0,a.tZ)(eS.tr,{path:t,onFileClick:i,children:(0,a.tZ)(ev,{view:r})})}),(0,a.tZ)(ex.LI,{children:(0,a.tZ)(eT,{path:t,performPaneOperation:n})})]})}),eE=(0,eg.X)({button:[R.l0.reset.button,R.l0.p(2),R.l0.height(22),R.l0.rowWithGap(4),R.l0.align.center,O.gU.nofill,{transitionProperty:"background-color, box-shadow, opacity",opacity:.8,":focus":{zIndex:1,opacity:1}}],text:[{fontSize:R.TV.fontSizeSmall}]});function eT(e){return(0,a.BX)(a.HY,{children:[(0,a.tZ)(eR,(0,r._)({},e)),(0,a.tZ)(eD,(0,r._)({},e)),(0,a.tZ)(eI,(0,r._)({},e))]})}function eR(e){var t=e.path,n=(0,ek.uN)(),r=(0,u.IK)(n,l.Gz);return(0,u.IK)(n,l.SD)&&n?(0,a.tZ)(eB,{dataCy:"ws-format-btn",altText:"Format "+(0,eC.UO)(t),buttonText:"Format",disabled:null!=r?r:void 0,"aria-disabled":!!r||void 0,icon:r?(0,a.tZ)(eZ.Z,{}):(0,a.tZ)(eb.Z,{}),onClick:function(){r||(0,l.z1)(n)}}):null}function eD(e){var t=e.path,n=e.performPaneOperation;return(0,eC.gK)(t)?(0,a.tZ)(eB,{altText:"Preview "+(0,eC.UO)(t),buttonText:"Preview",icon:(0,a.tZ)(ey.Z,{}),onClick:function(){n({operation:"replace",pane:{type:"markdown",data:{path:t}}})}}):null}function eI(e){var t=e.path,n=e.performPaneOperation;return(0,eC.B4)(t)?(0,a.tZ)(eB,{altText:"Preview "+(0,eC.UO)(t),buttonText:"Preview",icon:(0,a.tZ)(ey.Z,{}),onClick:function(){n({operation:"replace",pane:{type:"media",data:{path:t}}})}}):null}function eB(e){var t=e.altText,n=e.buttonText,l=e.icon,c=(0,o._)(e,["altText","buttonText","icon"]);return(0,a.BX)(U.G,(0,i._)((0,r._)({},c),{alt:t,tag:"button",css:eE.button,children:[(0,a.tZ)(ew.Pd.Provider,{value:{size:12},children:l}),(0,a.tZ)(U.G,{css:eE.text,children:n})]}))}},90333:function(e,t,n){n.d(t,{pZ:function(){return eG},aT:function(){return eB},jg:function(){return eE},fD:function(){return eT},Ls:function(){return e_}});var r=n(27387),i=n(63257),o=n(96583),a=n(3796),l=n(80403),c=n(3030),s=n(26677),u=n(69593),d=n(31682),f=n(24169),h=n(13054);function p(e){var t=e.selection,n=e.doc,r=t.ranges.map(function(e){return e.extend(n.lineAt(e.from).from,n.lineAt(e.to).to)});return l.jT.create(r)}var m=n(54923),v=n(85188),g=n(60482),y=n(62502),b=n(92799),w=n(4960),Z=n(70125),x=n(42305),C=n(23572),k=n(14118),S=n(52657),_=n(54505),E=n(10777),T=n(96949),R=n(36809),D=n(11006),I=n(40765),B=n(96601),G=n(19453),P=n(27840),A=n(86201),L=n(72285),N=n(6674),O=n(84896),U=n(89313),X=n(27060),M=n(93158),F=n(62407),W=n(85551),V=n(26996),H=n(43447),z=n(23802),j=n(35870),q=n(77402),J=n(61984),Y=n(89774),$=n(59830),K=n(78121),Q=n(63163),ee=n(21480),et=n(11208),en=n(2309),er=n(23882),ei=n(50664),eo=n(37493),ea=n(78660),el=n(17546),ec=n(31252),es=n(70625),eu=n(77244),ed=n(75271),ef=n(35370),eh=n(6843),ep=n(42354),em=n(23469),ev=n(98841),eg=n(90169),ey=n(70793),eb=n(85234),ew=n.n(eb),eZ=n(13585);function ex(e,t,n){var r=e.selection.main,i=e.sliceDoc(r.from,r.to),o=(0,ef.r6)(t);return{code:i,filePath:t,fileVersion:n,fileContent:e.doc.toString(),range:{indexFrom:r.from,indexTo:r.to,lineFrom:e.doc.lineAt(r.from).number,lineTo:e.doc.lineAt(r.to).number},language:o,referenceType:eg.MD.INLINE}}var eC=(0,R.X)({ghostwriterIcon:[Q.l0.color.blurpleStronger]});function ek(e){var t=e.label,n=e.icon,r=e.run,i=e.keyboardShortcut,o=e.dataCy;return{match:eh.pl,data:{type:"action",label:t,icon:n,run:r,keyboardShortcut:i,dataCy:o}}}function eS(e){var t=e.view,n=e.mainSelection,r=e.codeReference;t.dispatch({selection:{anchor:n.to},effects:[f.Q.of({id:ew()(),codeReference:r,type:"ghostwriterKillswitch"}),c.tk.scrollIntoView(n.to,{y:"center"})]})}function e_(e){var t=e.path,n=(0,er.Z)().fs,r=(0,k.P5)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1});return(0,ed.useCallback)(function(e,i){var o=e.state,a=o.doc,s=o.selection,u=o.lineBreak,d=a.lineAt(s.main.head);d.length&&e.dispatch({changes:{from:d.to,insert:u},selection:l.jT.cursor(d.to+1)});var h=n.getOTVersion(t),p=ex(e.state,t,h);if((0,T.j)(T.U3.AI_INLINE_EVENT,{action:"inline_textbox_opened",intent_type:"generate",source:i}),r){eS({view:e,mainSelection:e.state.selection.main,codeReference:p});return}var m=e.state.selection.main.to;e.dispatch({selection:{anchor:m},effects:[f.Q.of({id:ew()(),codeReference:p,type:"generateCode",source:i}),c.tk.scrollIntoView(m,{y:"center"})]})},[t,n,r])}function eE(e){var t=e.path,n=(0,er.Z)().fs,r=(0,k.P5)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1});return(0,ed.useCallback)(function(e,i){e.dispatch({selection:p(e.state)});var o=n.getOTVersion(t),a=ex(e.state,t,o);if(r){eS({view:e,mainSelection:e.state.selection.main,codeReference:a});return}(0,T.j)(T.U3.AI_INLINE_EVENT,{action:"inline_textbox_opened",intent_type:"modify",source:i});var l=e.state.selection.main.to;e.dispatch({selection:{anchor:l},effects:[f.Q.of({id:ew()(),type:"transformCode",codeReference:a,source:i}),c.tk.scrollIntoView(l,{y:"center"})]})},[t,n,r])}function eT(e){var t=e.path,n=(0,er.Z)().fs,r=(0,k.P5)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1});return(0,ed.useCallback)(function(e,i){e.dispatch({selection:p(e.state)});var o,a,l,s,u=n.getOTVersion(t),d=ex(e.state,t,u);(0,T.j)(T.U3.AI_INLINE_EVENT,{action:"inline_textbox_opened",intent_type:"explain",source:i});var h=e.state.selection.main.to-e.state.selection.main.from>eg.hm;if(h){a=(o={view:e,mainSelection:e.state.selection.main,codeReference:d}).view,l=o.mainSelection,s=o.codeReference,a.dispatch({selection:{anchor:l.to},effects:[f.Q.of({id:ew()(),codeReference:s,type:"codeLengthExceeded"}),c.tk.scrollIntoView(l.to,{y:"center"})]});return}if(r||h){eS({view:e,mainSelection:e.state.selection.main,codeReference:d});return}var m=e.state.selection.main.to;e.dispatch({selection:{anchor:m},effects:[f.Q.of({id:ew()(),codeReference:d,type:"explainCode",source:i}),c.tk.scrollIntoView(m,{y:"center"})]})},[n,t,r])}var eR=new x.j(function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0)!function(){var e=a.value,r=e.data;if(("context"===r.type||"action"===r.type)&&r.keyboardShortcut){var i=Array.isArray(r.keyboardShortcut)?r.keyboardShortcut.join(" "):r.keyboardShortcut;n.push({run:function(n){if("action"===r.type)return r.run(null),!0;var i=n.state.selection.main.head;return"context"!==r.type||r.label!==eD||n.state.wordAt(i)?t(e):(0,w.J)(n,{message:"You cannot rename this element",offset:i}),!0},key:i,preventDefault:!0})}}()}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return c.$f.of(n)}),eD="Rename all occurrences",eI=function(){var e=(0,ec.gf)("editor.action.saveFile");return(0,ed.useCallback)(function(t){var n=[];return n.push(ek({label:"Save file",icon:(0,a.tZ)(K.Z,{}),keyboardShortcut:e,run:function(){(0,ey.Q)(t)}})),n},[e])};function eB(e){var t,n,l,c,f,p,w,x,T,R,K,Q,ef,ev,eg,ey,eb,ew,ex,eS=e.path,eB=e.view,eG=e.onCommand,eP=(t=e_({path:eS}),n=eE({path:eS}),l=eT({path:eS}),c=(0,ec.gf)(ep.x.id),(0,ed.useCallback)(function(e){var r=[],i=!e.state.selection.main.empty;return t&&!i&&r.push(ek({label:"Generate with AI",icon:(0,a.tZ)(H.Z,{css:eC.ghostwriterIcon}),keyboardShortcut:c,run:function(){t(e,"action_menu")},dataCy:"context-menu-GenerateCode"})),i&&(r.push(ek({label:"Explain with AI",icon:(0,a.tZ)(V.Z,{css:eC.ghostwriterIcon}),dataCy:"context-menu-ExplainCode",run:function(){l(e,"action_menu")}})),r.push(ek({label:"Modify with AI",icon:(0,a.tZ)(z.Z,{css:eC.ghostwriterIcon}),keyboardShortcut:c,dataCy:"context-menu-TransformCode",run:function(){n(e,"action_menu")}}))),r},[t,n,l,c])),eA=(f=(0,ec.gf)("editor.action.startThread"),(0,ed.useCallback)(function(e){var t=[];return t.push(ek({label:"Start thread",icon:(0,a.tZ)(G.Z,{}),keyboardShortcut:f,run:function(){(0,ei.h$)(e)}})),t},[f])),eL=(0,ed.useCallback)(function(e){var t=[ek({label:"Copy link to position",icon:(0,a.tZ)(q.Z,{}),run:function(){var t=(0,C.sg)(e.state.doc,e.state.selection.main.head),n=t.line,r=t.character,i=(0,eu.dr)({path:eS,line:n+1,col:r});(0,_.Z)(i)}}),ek({label:"Copy",icon:(0,a.tZ)(N.Z,{}),keyboardShortcut:(0,es.l2)({cmdOrCtrl:!0,key:"c"}),run:function(){var t=(0,h.I)(e.state).text;(0,_.Z)(t)}}),ek({label:"Cut",icon:(0,a.tZ)(O.Z,{}),keyboardShortcut:(0,es.l2)({cmdOrCtrl:!0,key:"x"}),run:function(){var t=(0,h.I)(e.state),n=t.text,r=t.ranges;(0,_.Z)(n),e.state.readOnly||e.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"})}})];return window.navigator.clipboard&&"readText"in window.navigator.clipboard&&t.push(ek({label:"Paste",icon:(0,a.tZ)(A.Z,{}),keyboardShortcut:(0,es.l2)({cmdOrCtrl:!0,key:"v"}),run:function(){return(0,r._)(function(){var t,n;return(0,o.Jh)(this,function(r){switch(r.label){case 0:t="",r.label=1;case 1:return r.trys.push([1,3,,4]),[4,window.navigator.clipboard.readText()];case 2:return t=r.sent(),[3,4];case 3:return n=r.sent(),E.kg.error("CodeMirror context menu paste failed",{message:n.message}),[2];case 4:return(0,Z.l)({filePath:eS,view:e,clipboardText:t}),[2]}})})()}})),t},[eS]),eN=(p=(0,et.Z)(eS),w=(0,en.Z)(p),x=(0,ed.useRef)(null),T=(0,er.Z)().fs,R=(0,k.P5)({controlName:"flag-clui-ctx-menu-rename-all",logFlagToAnalytics:!1}),K=(0,ec.gf)("editor.action.goToDefinition"),Q=(0,ec.gf)("editor.action.goToTypeDefinition"),ef=(0,ec.gf)("editor.action.goToImplementation"),ev=(0,ec.gf)("editor.action.goToReferences"),eg=(0,ec.gf)("editor.selection.allOccurrences"),ey=(0,ec.gf)("editor.action.sourceActions"),eb=(0,ec.gf)("editor.action.formatDocument"),ew=(0,ec.gf)("editor.action.codeActions"),(0,ed.useCallback)(function(e){var t=[],n=w&&p.length;n&&w.isFindDefinitionSupported&&t.push(ek({label:"Go to definition",icon:(0,a.tZ)(X.Z,{}),dataCy:"context-menu-JumpToDefinition",run:function(t){(0,g.wK)(e,t)},keyboardShortcut:K})),n&&w.isFindTypeDefinitionSupported&&t.push(ek({label:"Go to type definition",icon:(0,a.tZ)(D.Z,{}),run:function(){(0,g.OM)(e)},keyboardShortcut:Q})),n&&w.isFindImplementationSupported&&t.push(ek({label:"Go to implementation",icon:(0,a.tZ)($.Z,{}),run:function(){(0,g.Zc)(e)},keyboardShortcut:ef})),n&&(w.isFindDefinitionSupported||w.isFindReferencesSupported)&&t.push(ek({label:"Show references",icon:(0,a.tZ)(I.Z,{}),keyboardShortcut:ev,run:function(){(0,y.Z)(e)}})),t.push(ek({label:"Find in Repl",icon:(0,a.tZ)(Y.Z,{}),run:function(){var t=(0,h.I)(e.state).text;(0,eZ.ZM)(e.state,{pane:{type:"searchReplace",data:{initialQuery:t}}})}})),n&&w.isRenameSupported&&(R?t.push(ek({label:eD,icon:(0,a.tZ)(U.Z,{}),keyboardShortcut:"F2",run:function(){(0,b.Z)(e)}})):t.push({match:eh.pl,data:{type:"context",label:eD,icon:(0,a.tZ)(U.Z,{}),keyboardShortcut:"F2"},commands:function(t){var n=t.active,i=t.searchQuery;return n&&i?[{match:function(){return{score:1}},data:{type:"action",label:"Rename",icon:(0,a.tZ)(P.Z,{}),keyboardShortcut:"Enter",run:function(){return(0,r._)(function(){var t,n,r,a;return(0,o.Jh)(this,function(o){switch(o.label){case 0:if(!(t=p.find(function(e){return(0,em.Z)(e).isRenameSupported})))return[2,{type:"error",message:"Rename is not supported"}];if(n=e.state.selection.main.head,!e.state.wordAt(n))return[2,{type:"error",message:"You cannot rename this element"}];return x.current&&t.notify.cancelRequest(x.current),x.current=t.generateId(),[4,t.request.rename(eS,(0,C.sg)(e.state.doc,n),i,{id:x.current,tap:function(t){return(0,m.SC)(e,t)}})];case 1:if((r=o.sent()).cancelled)return[2];if("error"in r)return[2,{type:"error",message:"Something went wrong renaming ".concat(r.error.message)}];if(!(a=r.result))return[2];return(0,ee.w)({edit:a,fs:T,client:t}),[2]}})})()}}}]:[]}})),e.state.facet(u.SD)&&t.push(ek({label:"Format document",icon:(0,a.tZ)(F.Z,{}),keyboardShortcut:eb,run:function(){(0,u.z1)(e)}})),!e.state.selection.main.empty&&e.state.facet(d.R2)&&t.push(ek({label:"Format selection",icon:(0,a.tZ)(F.Z,{}),run:function(){(0,u.uy)(e)}})),t.push(ek({label:"Select all occurrences",icon:(0,a.tZ)(L.Z,{}),keyboardShortcut:eg,run:function(){(0,ei.SK)(e)}}));var i=void 0!==e.state.field(s.K0,!1);return n&&i&&t.push(ek({label:"Toggle breakpoint",icon:(0,a.tZ)(B.Z,{}),run:function(){(0,ei.QF)(e)}})),n&&w.isCodeActionsSupported&&(w.isSourceActionsSupported&&t.push(ek({label:"Source actions",icon:(0,a.tZ)(M.Z,{}),keyboardShortcut:ey,run:function(){(0,v.Z5)(e)}})),t.push(ek({label:"More actions",icon:(0,a.tZ)(j.Z,{}),keyboardShortcut:ew,run:function(){(0,v.b7)(e,{force:!0})}}))),t},[w,p,eg,ey,K,Q,ef,ev,R,eS,T,eb,ew])),eO=(ex=(0,ea.s6)(el.Y.EditorContextMenu),(0,ed.useCallback)(function(e){var t=[];return t.push({data:{type:"group",key:"extensions"},commands:(0,r._)(function(){var t;return(0,o.Jh)(this,function(n){switch(n.label){case 0:var i;return t=[{data:{filePath:e.filePath,selection:e.view.state.selection.toJSON()}}],[4,Promise.all(ex.map((i=(0,r._)(function(e){var n;return(0,o.Jh)(this,function(r){switch(r.label){case 0:return[4,e.create({path:t})];case 1:if(!(n=r.sent()))return[2,null];return[2,(0,eo.C)(n,{path:t})]}})}),function(e){return i.apply(this,arguments)})))];case 1:return[2,n.sent().filter(Boolean)]}})})}),t},[ex])),eU=eI(),eX=(0,k.P5)({controlName:"flag-draft-buffers"}),eM=(0,ed.useMemo)(function(){return eB?eN(eB):[]},[eB,eN]),eF=(0,S.Z)(eG),eW=(0,ed.useCallback)(function(e){eF.current(e)},[eF]),eV=eR.use(eM,eW);return[(0,ed.useCallback)(function(){var e=eB?[{data:{type:"context",label:"AI",icon:(0,a.tZ)(W.Z,{})},commands:function(){return eP(eB)}},{data:{type:"context",label:"Code actions",icon:(0,a.tZ)(j.Z,{})},commands:function(){return eN(eB)}}].concat((0,i._)(eX?[{data:{type:"context",label:"File actions",icon:(0,a.tZ)(M.Z,{})},commands:function(){return eU(eB)}}]:[]),[{data:{type:"context",label:"Social",icon:(0,a.tZ)(G.Z,{})},commands:function(){return eA(eB)}},{data:{type:"context",label:"Clipboard",icon:(0,a.tZ)(A.Z,{})},commands:function(){return eL(eB)}},{data:{type:"context",label:"Extensions",icon:(0,a.tZ)(J.Z,{})},commands:function(){return eO({view:eB,filePath:eS})}}]):[];return{data:{type:"context",label:"Search actions",icon:(0,a.tZ)(Y.Z,{})},commands:function(){return e}}},[eB,eP,eN,eA,eL,eU,eS,eO,eX]),eV]}var eG=new x.j(function(e,t,n){return e?null:[(0,ev.a)(t),c.tk.domEventHandlers({contextmenu:function(e,t){var r=e.clientX,i=e.clientY,o=t.state.selection.main,a=t.posAtCoords({x:r,y:i}),c=t.state.doc.length,s=null===a?c:a;if(s<o.from||s>o.to){var u=l.jT.cursor(s);t.dispatch({selection:u})}return n(e),!0}})]})},69967:function(e,t,n){n.d(t,{u:function(){return ex}});var r,i=n(66626),o=n(3796),a=n(12285),l=n(42516),c=n(80403),s=n(3030),u=n(61873),d=n(42305),f=n(36809),h=n(24766),p=n(63163),m=n(93245),v=n(31252),g=n(81202),y=n.n(g),b=n(84797),w=n(52927),Z=n(64988),x=n(69284),C=(0,f.X)({root:[p.l0.p(16),p.l0.align.center,p.l0.colWithGap(8),{marginTop:"10%",pointerEvents:"none","*":{pointerEvents:"all"}}],button:[p.l0.reset.button,p.l0.rowWithGap(6),p.l0.align.center,p.l0.color.foregroundDimmest,p.l0.cursor.pointer,{fontFamily:p.TV.fontFamilyDefault,"*":{borderColor:p.TV.foregroundDimmest,color:p.TV.foregroundDimmest},":hover *":{borderColor:p.TV.foregroundDefault,color:p.TV.foregroundDefault}}],iconText:[p.l0.rowWithGap(4)]}),k={layer:"cm-empty-state-layer",dom:"cm-empty-state-dom"},S=s.tk.theme((r={},(0,l._)(r,".".concat(k.layer),{width:"100%",height:"100%",pointerEvents:"none",zIndex:"201 !important"}),(0,l._)(r,".".concat(k.dom),{position:"absolute",width:"100%",pointerEvents:"none",display:"flex",justifyContent:"center"}),r)),_=function(){"use strict";function e(t){(0,a._)(this,e),this.options=t}var t=e.prototype;return t.draw=function(){var e=this.options,t=e.ctas,n=e.view,r=e.width,i=(0,w.V)((0,o.tZ)(m.G,{css:C.root,children:t.map(function(e){return(0,o.BX)(m.G,{css:C.button,onClick:function(){return e.onClick(n)},children:[(0,o.BX)(m.G,{css:C.iconText,children:[e.icon,(0,o.tZ)(h.xv,{variant:"small",children:e.text})]}),e.shortcut?(0,o.tZ)(v.bM,{keyCombo:e.shortcut,fontSize:12}):null]},e.text)})}));return i.className=k.dom,i.style.width=r+"px",i.style.visibility=r>240?"visibile":"hidden",i.style.left="0px",i},t.eq=function(e){return y()(e.options,this.options)},e}(),E=new d.j(function(e){var t=function(e){var t;return!(e.doc.length>0||e.field(b.$)||(null===(t=e.field(u.xg,!1))||void 0===t?void 0:t.size)||e.field(x.PQ,!1))},n=c.QQ.define({create:t,update:function(e,n){return t(n.state)}}),r=(0,s.EY)({above:!0,class:k.layer,update:function(e){return(0,Z.aU)(e,n)},markers:function(t){if(!t.state.field(n,!1))return[];var r=t.dom.getBoundingClientRect();return[new _({ctas:e,width:Math.round(t.contentDOM.getBoundingClientRect().right-r.left),view:t})]}});return[S,n,r]}),T=n(68453),R=n(37505),D=n(22961),I=n(42965),B=n(96949),G=n(58532),P=n(43447),A=n(21460),L=n(59830),N=n(62279),O=n(53250),U=n(86466),X=n(75710),M=n(10578),F=n(75271),W=n(41733),V=n(21262),H=n(71440),z=n(9122);function j(){var e=(0,V._)(["\n  query ReplCodeExamples($language: String!) {\n    languageExamples(language: $language) {\n      ... on LanguageExamples {\n        examples {\n          ... on LanguageExample {\n            mainFile\n            name\n            code\n          }\n        }\n      }\n    }\n  }\n"]);return j=function(){return e},e}var q={},J=(0,H.Ps)(j());function Y(e){var t=(0,W._)({},q,e);return z.a(J,t)}var $=m.K.button;function K(e){var t=e.name,n=e.children,r=e.onClick;return(0,o.BX)($,{onClick:function(){return r()},css:[U.gU.nofill,p.l0.p(8),p.l0.focusRing,p.l0.textAlign.left],children:[(0,o.tZ)(h.xv,{variant:"subheadDefault",css:p.l0.pb(16),multiline:!1,children:t}),(0,o.tZ)(m.G,{css:[p.l0.backgroundColor.backgroundDefault,p.l0.p(8),p.l0.borderRadius(8)],children:n})]})}var Q="@media (min-width: ".concat(X.j.tabletMax,"px)"),ee=(0,N.iv)([p.l0.colWithGap(16),(0,l._)({},Q,{width:"calc(50%  - 8px)",flex:"0 0 auto",gap:"16px"})]);function et(e){var t=e.children;return(0,o.tZ)(m.G,{css:[(0,l._)({},Q,[p.l0.rowWithGap(16)])],children:t})}function en(e){var t=e.mainFile,n=e.examples,r=e.onSelect;return(0,o.BX)(m.G,{css:[p.l0.colWithGap(24)],children:[(0,o.tZ)(h.h4,{level:1,variant:"headerDefault",children:"Code examples"}),(0,o.tZ)(h.xv,{children:"Get started with some program examples."}),(0,o.BX)(et,{css:[p.l0.colWithGap(16)],children:[(0,o.tZ)(m.G,{css:ee,children:n.slice(0,(n.length+1)/2).map(function(e){return(0,o.tZ)(K,{name:e.name,onClick:function(){return r(e)},children:(0,o.tZ)(O.Z,{code:e.code,filePath:t,fontSize:12,disableCursorStyling:!0})},e.name)})}),(0,o.tZ)(m.G,{css:ee,children:n.slice((n.length+1)/2).map(function(e){return(0,o.tZ)(K,{name:e.name,onClick:function(){return r(e)},children:(0,o.tZ)(O.Z,{code:e.code,filePath:t,fontSize:12,disableCursorStyling:!0})},e.name)})})]})]})}function er(e){var t=e.filePath,n=e.language,r=e.onSelect,i=Y({variables:{language:n}}),a=i.data,l=i.loading,c=i.error;if(l)return(0,o.tZ)(m.G,{css:[p.l0.colWithGap(0),p.l0.justify.center,p.l0.align.center,p.l0.pt(32),p.l0.pb(32)],children:(0,o.tZ)(M.Z,{})});if(c)return(0,o.tZ)(m.G,{css:[p.l0.colWithGap(0),p.l0.justify.center,p.l0.align.center,p.l0.pt(32),p.l0.pb(32)],children:c.message});var s=(null==a?void 0:a.languageExamples.__typename)==="LanguageExamples"?a.languageExamples.examples:null;return(null==s?void 0:s.length)?(null==s?void 0:s.length)?(0,o.tZ)(en,{mainFile:t,examples:s,onSelect:r}):(0,o.tZ)(m.G,{css:[p.l0.colWithGap(0),p.l0.justify.center,p.l0.align.center,p.l0.pt(32),p.l0.pb(32)],children:(0,o.BX)(h.xv,{children:["Sorry, this language doesnt have any examples. Want to add some? Contact us at ",(0,o.tZ)("a",{href:"mailto:support@replit.com",children:"support@replit.com"}),"!"]})}):null}var ei=n(42354),eo=n(12379),ea={python:'from replit.ai.modelfarm import ChatExample, ChatMessage, ChatModel, ChatSession\n\nmodel = ChatModel("chat-bison")\nresponse = model.chat([\n  ChatSession(\n    context="You are philosophy bot.",\n    examples=[\n      ChatExample(\n        input=ChatMessage(content="1 + 1"),\n        output=ChatMessage(content="2")\n      )\n    ],\n    messages=[\n      ChatMessage(author="USER", content="How much wood can a woodchuck chuck?"),\n    ],\n  )\n], temperature=0.2)\n\nprint(response.responses[0].candidates[0].message.content)',typescript:"import * as replitai from '@replit/ai-modelfarm';\n\nconst result = await replitai.chat({\n  model: 'chat-bison',\n  temperature: 0.5,\n  messages: [{ author: 'user', content: 'how are you?' }],\n});\n\nconsole.log(result);"},el=n(85983),ec=n(18068);function es(){var e=(0,V._)(["\n  query EditorEmptyStateCurrentUser {\n    currentUser {\n      id\n      userSubscriptionType\n    }\n  }\n"]);return es=function(){return e},e}var eu={},ed=(0,H.Ps)(es()),ef=n(73581),eh=n(49205),ep=n(35370),em=n(37701),ev=n(13585);function eg(e){var t=e.cta,n=e.version;(0,B.j)(B.U3.EDITOR_EMPTY_STATE_CLICKED,{cta:t,version:n})}var ey=c.Py.define(),eb=c.QQ.define({create:function(){return null},update:function(e,t){var n=e;return(0,R.j)(t,ey,function(e){n=e.value}),n}}),ew=T.t.from(eb,function(e){if(!e)return null;var t=e.language,n=e.filePath;return{key:"examplesModal",node:function(e){var r=function(){e.dispatch({effects:ey.of(null)})};return(0,o.tZ)(G.u,{maxWidth:872,isOpen:!0,onRequestClose:r,children:(0,o.tZ)(eC,{onRequestClose:r,language:t,filePath:n})})}}}),eZ=[eb,ew];function ex(e){var t,n,r,i,a,l,c,s,u,d,f,h,p,m,g,y,b=e.isMobile,w=e.filePath,Z=e.generateCode,x=(0,v.gf)(ei.x.id),C=null!==(g=null===(h=D.$R.from(w))||void 0===h?void 0:h.id)&&void 0!==g?g:null,k=(0,em.v)().isTeamWithAiDisabled,S=Y({variables:{language:C},skip:!C}).data,_=(a=(t={filePath:w,language:C}).filePath,l=t.language,c=(0,I.T3)(),u=((null==(s=(n=(0,W._)({},eu,void 0),z.a(ed,n)).data)?void 0:null===(r=s.currentUser)||void 0===r?void 0:r.userSubscriptionType)===el.HP.Hacker||(null==s?void 0:null===(i=s.currentUser)||void 0===i?void 0:i.userSubscriptionType)===el.HP.HackerPro)&&l&&["python","javascript","typescript","javascriptreact","typescriptreact"].includes(l),d=(0,eo.Z)(a),f=(0,F.useCallback)(function(e){if(l){var t="python"===l?"python":"typescript";(0,B.j)(B.U3.GHOSTWRITER_CHAT_MODELFARM_PLACEHOLDER_CLICKED,{language:t}),(0,ev.ZM)(e.state,{pane:{type:"docs",data:{url:(0,ec.u)(t)}}}),d&&d({code:ea[t],insertAt:0})}},[d,l]),c?null:u?f:null),T=(null!==(y=null==S?void 0:null===(m=S.languageExamples)||void 0===m?void 0:null===(p=m.examples)||void 0===p?void 0:p.length)&&void 0!==y?y:0)>=1,R=(0,F.useMemo)(function(){var e=[];return(0,ep.gK)(w)||k||e.push({icon:(0,o.tZ)(P.Z,{}),text:"Generate Code with AI",shortcut:b?void 0:x,onClick:function(e){eg({cta:"generate",version:"new"}),Z(e,"shortcut")}}),_&&e.push({icon:(0,o.tZ)(A.Z,{}),text:"Build an AI app for free with ModelFarm",onClick:function(e){eg({cta:"modelFarm",version:"new"}),_(e)}}),C&&T&&e.push({icon:(0,o.tZ)(L.Z,{}),text:"Start with a code example",onClick:function(e){eg({cta:"examples",version:"new"}),e.dispatch({effects:ey.of({language:C,filePath:w})})}}),e},[b,x,_,C,T,Z,w,k]);return[E.use(R),eZ]}function eC(e){var t=e.onRequestClose,n=e.language,r=e.filePath,a=(0,eh.e$)(ef.Q.id,ef.y.Examples),l=(0,eh.e$)(ef.Q.id,ef.y.Editor),c=(0,i._)((0,F.useState)(!1),2),s=c[0],u=c[1],d=(0,eo.Z)(r),f=(0,F.useRef)(null==a?void 0:a.isActive),h=(0,F.useRef)();h.current=null==a?void 0:a.isActive;var p=(0,F.useRef)(null==a?void 0:a.goto);return(p.current=null==a?void 0:a.goto,(0,F.useEffect)(function(){return function(){var e;h.current&&(null===(e=p.current)||void 0===e||e.call(p,ef.y.Editor))}},[]),(0,F.useEffect)(function(){if((null==l?void 0:l.isActive)&&!f.current){if(!s){u(!0);return}l.goto(ef.y.Examples)}},[l,t,s]),(0,F.useEffect)(function(){if(null==a?void 0:a.isActive){f.current=!0;return}f.current&&t(null)},[t,null==a?void 0:a.isActive]),d)?(0,o.tZ)("div",{ref:null==a?void 0:a.tourRef,children:(0,o.tZ)(er,{filePath:r,language:n,onSelect:function(e){d({code:e.code,insertAt:0}),t({exampleName:e.name})}})}):(0,o.tZ)("div",{children:"Please make sure you have a file open"})}},42354:function(e,t,n){n.d(t,{x:function(){return K},W:function(){return Q}});var r,i=n(3796),o=n(3030),a=n(12285),l=n(42516),c=n(41733),s=n(30509),u=n(80403),d=n(42305),f=n(22192),h=n(67790),p=n(86466),m=n(14548),v=n(24766),g=n(22419),y=n(93245),b=n(36809),w=n(31940),Z=n(63163),x=n(31252),C=n(66610),k=n(81202),S=n.n(k),_=n(75271),E=n(84797),T=n(52927),R=n(37505),D=n(64988),I=n(24281),B=(0,f.$)(["opacity","transform"]),G=B.cssVars,P=B.styleTokens,A=[Z.l0.display.flex,Z.l0.reset.button,Z.l0.cursor.pointer,Z.l0.center,p.gU.nofill,Z.l0.height("100%"),Z.l0.borderRadius(0)],L=[A,Z.l0.width(28),{"& svg":Z.l0.display.block}],N=(0,b.X)({root:[Z.l0.align.stretch,Z.l0.flex.row,Z.l0.borderRadius(6),Z.l0.border({color:Z.TV.outlineDefault}),Z.l0.position.relative,Z.l0.height(30),{opacity:P.opacity,transform:P.transform,transition:"opacity 120ms, transform 120ms","button:first-of-type":{borderTopLeftRadius:6,borderBottomLeftRadius:6},"button:last-of-type":{borderTopRightRadius:6,borderBottomRightRadius:6}}],moreButton:L,button:[A,Z.l0.rowWithGap(4),Z.l0.align.center,Z.l0.pl(4),Z.l0.pr(6),Z.l0.flex.growAndShrink(1),Z.l0.border({direction:"right",color:Z.TV.outlineDefault}),{fontFamily:Z.TV.fontFamilyDefault,"*":{color:Z.TV.foregroundDimmer},":hover *":{color:Z.TV.foregroundDefault},".shortcut":{color:Z.TV.foregroundDimmest},":hover .shortcut":{color:Z.TV.foregroundDimmer}}],iconButton:[L,Z.l0.border({direction:"right",color:Z.TV.outlineDefault})],tooltip:[Z.l0.rowWithGap(2),Z.l0.align.center]}),O=new T.J(function(e){var t,n=e.controls,r=e.verticalPlacement,o=e.onMoreClick,a=(0,_.useRef)(null),u=(0,I.NJ)(),d=(0,C.xx)();(0,_.useEffect)(function(){var e;d(),(0,h.A)(a,(e={},(0,l._)(e,G.opacity,"1"),(0,l._)(e,G.transform,"translateY(calc(".concat("top"===r?1:-1," * ").concat(Z.TV.space4,"))")),e))},[r,d]);var f=(0,_.useRef)((0,C.qm)());return(0,i.BX)(m.Tg,{innerRef:a,elevated:!0,css:N.root,style:(t={},(0,l._)(t,G.opacity,"0"),(0,l._)(t,G.transform,"translateY(calc(".concat("top"===r?1:-1," * ").concat(Z.TV.space16,"))")),t),children:[n.map(function(e){if(f.current){var t=(0,i.BX)(y.G,{css:N.tooltip,children:[(0,i.tZ)(v.xv,{variant:"small",multiline:!1,children:e.text}),e.shortcut?(0,i.tZ)(v.xv,{variant:"small",className:"shortcut",color:"dimmest",children:(0,x.Ih)(e.shortcut,u)}):null]});return(0,i.tZ)(g.u,{tooltip:t,children:function(t,n){return(0,i.tZ)(y.G,(0,s._)((0,c._)({},t),{innerRef:n,css:N.iconButton,onClick:e.onClick,tag:"button",children:e.icon}))}},e.text)}return(0,i.BX)(y.G,{css:N.button,onClick:e.onClick,tag:"button",children:[e.icon,(0,i.tZ)(v.xv,{variant:"small",multiline:!1,children:e.text}),e.shortcut?(0,i.BX)(v.xv,{variant:"small",className:"shortcut",children:["(",(0,x.Ih)(e.shortcut,u),")"]}):null]},e.text)}),o?(0,i.tZ)(y.G,{"aria-label":"More",css:N.moreButton,onClick:function(e){var t=(a.current||e.currentTarget).getBoundingClientRect();o({top:t.top,right:t.right})},tag:"button",children:(0,i.tZ)(w.Z,{size:16})}):null]})}),U={layer:"cm-selection-controls-layer",dom:"cm-selection-controls-dom"},X=o.tk.theme((r={},(0,l._)(r,".".concat(U.layer),{width:"100%"}),(0,l._)(r,".".concat(U.dom),{position:"absolute"}),r)),M=function(){"use strict";function e(t){(0,a._)(this,e),this.options=t}var t=e.prototype;return t.draw=function(){var e=this.options,t=e.controls,n=e.onMoreClick,r=e.top,i=e.align,o=e.verticalPlacement,a=O.create({controls:t,onMoreClick:n,verticalPlacement:o});return a.className=U.dom,a.style.top=r+"px","left"===i.side?(a.style.left=i.value+"px",a.style.right=""):(a.style.right=i.value+"px",a.style.left=""),a.style.pointerEvents="none",setTimeout(function(){a.style.pointerEvents="auto"},200),a},t.eq=function(e){return S()(e.options,this.options)},e}(),F=u.Py.define(),W=u.QQ.define({create:function(){return null},update:function(e,t){var n;return!t.state.selection||(null===(n=t.state.selection)||void 0===n?void 0:n.main.empty)?null:((0,R.j)(t,F,function(t){e=t.value}),e)}}),V=u.QQ.define({create:function(e){return!e.selection.main.empty},update:function(e,t){return!t.state.selection.main.empty}}),H=o.lg.define(function(e){var t=function(){var t=e.state.selection.main;e.dispatch({effects:F.of(t.empty?null:Date.now())})},n=function(e){"Shift"===e.key&&t()},r=function(){document.addEventListener("mouseup",t),document.addEventListener("keyup",n)},i=function(){document.removeEventListener("mouseup",t),document.removeEventListener("keyup",n)};return{update:function(e){(0,D.aU)(e,V)&&(e.state.field(V)?r():i())},destroy:i}}),z=new d.j(function(e){return[X,(0,o.EY)({above:!0,class:U.layer,update:function(e){return(0,D.aU)(e,E.$,W)},markers:function(t){if(!t.hasFocus)return[];var n=t.state.field(W)?t.state.selection.main:null;if(!n||t.state.field(E.$,!1))return[];var r=function(e,t){for(var n=Math.min(t.from,t.to),r=Math.max(t.from,t.to),i=null;n<=r;){var o=e.lineAt(n);n=o.to+1,null!==i&&o.length<i.length||(i=o)}return i}(t.state.doc,n);if(!r)return[];var i=t.coordsAtPos(r.to);if(!i)return[];var o=t.lineBlockAt(Math.min(n.anchor,n.head)),a=t.dom.getBoundingClientRect(),l=t.contentDOM.getBoundingClientRect(),c=o.top+t.documentPadding.top-30,s=l.right-i.left<200?{side:"right",value:a.right-l.right+16}:{side:"left",value:i.left-a.left},u="top";if(c<t.scrollDOM.scrollTop){var d=t.lineBlockAt(n.to);c=d.top+d.height,u="bottom"}return[new M({top:c,align:s,controls:e.controls(t),onMoreClick:e.onMoreClick,verticalPlacement:u})]}}),V,W,H]}),j=n(37701),q=n(26996),J=n(23802),Y=n(70625),$=n(97420),K={id:"editor.generateOrModifyWithAI",name:"AI",description:"Generate or modify selection with AI",default:(0,Y.l2)({cmdOrCtrl:!0,key:"i"})};function Q(e){var t=e.editCode,n=e.explainCode,r=e.generateCode,a=e.onMoreClick,l=(0,j.v)().isTeamWithAiDisabled,c=(0,x.gf)(K.id),s=(0,_.useMemo)(function(){if(!c)return[];var e=Array.isArray(c)?c.join(" "):c;return o.$f.of([{key:e,scope:"editor",run:function(e){return e.state.selection.main.empty?r(e,"shortcut"):t(e,"shortcut"),!0}}])},[c,r,t]),u=(0,_.useMemo)(function(){return{controls:function(e){return l?[]:[{text:"Modify with AI",icon:(0,i.tZ)(J.Z,{size:16,color:$.TV.blurpleStronger}),onClick:function(){return t(e,"highlight")},shortcut:c},{text:"Explain with AI",icon:(0,i.tZ)(q.Z,{size:16,color:$.TV.blurpleStronger}),onClick:function(){return n(e,"highlight")}}]},onMoreClick:a}},[t,n,a,c,l]),d=z.use(u);return(0,_.useMemo)(function(){return[d,s]},[d,s])}},25639:function(e,t,n){n.d(t,{r:function(){return f}});var r,i=n(27387),o=n(96583),a=n(49115),l=n(35370),c=n(72106),s=RegExp("_(?<num>\\d+)$");function u(){return(u=(0,i._)(function(e,t){var n,r,i,a;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return n=(0,l.Il)(t),[4,e.readDir(n||c.Ql)];case 1:if((r=o.sent()).error)return[2,t];return a=(i=function(e){if(r.children.find(function(t){return"FILE"===t.type&&t.filename===e})){var t,n=(0,l.eb)(e),o=(0,l.r6)(e),a=n.match(s);if(null==a?void 0:null===(t=a.groups)||void 0===t?void 0:t.num){var c=Number(a.groups.num);return i("".concat(n.replace(s,""),"_").concat(c+1,".").concat(o))}return i("".concat(n,"_2.").concat(o))}return e})((0,l.UO)(t)),[2,n?n+"/"+a:a]}})})).apply(this,arguments)}var d=n(43257),f=(r=(0,i._)(function(e,t,n){var r,i,c,s,f,h;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return r=encodeURI(e.name),[4,function(e,t){return u.apply(this,arguments)}(t,(i=(0,l.Il)(n))?i+"/"+r:r)];case 1:return c=o.sent(),[4,(0,a.pV)(e)];case 2:return s=o.sent(),[4,t.writeFile(c,d.Z.from(s))];case 3:return o.sent(),f=(0,l.eb)(e.name),h=(0,l.UO)(c),[2,"![".concat(f,"](").concat(h,")")]}})}),function(e,t,n){return r.apply(this,arguments)})},43561:function(e,t,n){n.d(t,{Mp:function(){return l},ac:function(){return a},ev:function(){return o}});var r=n(62279),i=n(63163),o=(0,r.iv)({position:"relative",overflowY:"auto",width:"100%",height:"100%",zIndex:3}),a=(0,r.iv)({position:"relative",overflowY:"auto",width:"100%",height:"100%",fontSize:"14px",backgroundColor:i.TV.backgroundDefault}),l=(0,r.iv)({display:"flex",alignItems:"stretch",width:"100%",height:"100%","& > .cm-editor":{flex:"1 1 auto",width:"100%"}})},80264:function(e,t,n){n.d(t,{i:function(){return x},w:function(){return b}});var r=n(27387),i=n(66626),o=n(63257),a=n(96583),l=n(3796),c=n(25722),s=n(87915),u=n(24766),d=n(93245),f=n(93158),h=n(54300),p=n(63163),m=n(6843),v=n(43257),g=n(47423),y=n(13213);function b(e){return w.apply(this,arguments)}function w(){return(w=(0,r._)(function(e){var t,n,r,i;return(0,a.Jh)(this,function(o){switch(o.label){case 0:if(t=e.searchQuery,n=e.paths,r=e.run,i=e.description,!t)return[2,n.map(function(e){return{data:{type:"action",label:e,icon:(0,l.tZ)(s.Z,{path:e}),description:i,run:function(){return r(e)}},match:function(){return{score:1,render:(0,g.xy)({path:e,description:i})}}}})];return[4,(0,g.Rz)(t,n)];case 1:return[2,o.sent().map(function(e){var t=e.path,n=e.score,o=e.ranges;return{data:{type:"action",label:t,icon:(0,l.tZ)(s.Z,{path:t}),run:function(){return r(t)}},match:function(){return{score:n,render:(0,g.xy)({path:t,ranges:o,description:i})}}}})]}})})).apply(this,arguments)}function Z(){return(0,l.BX)(d.G,{css:[p.l0.rowWithGap(8)],children:[(0,l.tZ)(h.Z,{}),(0,l.tZ)(u.xv,{color:"dimmest",multiline:!1,children:"Something went wrong searching your Repl's files. Please try again."})]})}function x(e){var t;return(0,m.fA)({type:"context",label:"Files",description:"Find a file",icon:(0,l.tZ)(f.Z,{}),keyboardShortcut:e.keyboardShortcut?e.keyboardShortcut:void 0},{match:(0,m.r0)({defaultScore:y.L.findOrCreateFile}),commands:(t=(0,r._)(function(t){var n,u,d,f,p,m,g,y,w,x,C,k,S,_,E,T,R,D,I,B;return(0,a.Jh)(this,function(G){switch(G.label){case 0:if(n=e.fs,u=e.shouldHideFile,!t.searchQuery&&(!t.active||e.lazyLoad))return[2,[]];return[4,Promise.resolve(e.getRecentFiles())];case 1:if(d=G.sent(),f=[],!(t.searchQuery||t.active))return[3,3];return[4,n.listFiles()];case 2:if((p=G.sent()).error)return c.Tb(Error("Find or create file returned an error"),{extra:{message:p.error}}),[2,[{data:{type:"error",label:p.error,icon:(0,l.tZ)(h.Z,{})},match:function(){return{score:1,render:{content:(0,l.tZ)(Z,{})}}}}]];if(!p.files)throw Error("Expected files");m=!0,g=!1,y=void 0;try{for(w=p.files[Symbol.iterator]();!(m=(x=w.next()).done);m=!0)C=x.value,u(C)||d.includes(C)||f.push(C)}catch(e){g=!0,y=e}finally{try{m||null==w.return||w.return()}finally{if(g)throw y}}G.label=3;case 3:return k=[],[4,Promise.all([b({searchQuery:t.searchQuery,paths:d,description:"Recently opened",run:function(t){e.openFile({path:t})}}),b({searchQuery:t.searchQuery,paths:f,run:function(t){e.openFile({path:t})}})])];case 4:if(_=(S=i._.apply(void 0,[G.sent(),2]))[0],E=S[1],!e.getCurrentlyOpenFilePanesCommands)return[3,6];return[4,e.getCurrentlyOpenFilePanesCommands({searchQuery:t.searchQuery})];case 5:R=G.sent(),(T=k).push.apply(T,(0,o._)(R)),G.label=6;case 6:return _.length&&(D=k).push.apply(D,(0,o._)(_)),E.length&&(I=k).push.apply(I,(0,o._)(E)),0===E.length&&0===_.length&&t.active&&(B=t.searchQuery,k.push({data:{label:B,description:"Create a new file",icon:(0,l.tZ)(s.Z,{path:B}),type:"action",run:(0,r._)(function(){return(0,a.Jh)(this,function(t){switch(t.label){case 0:return[4,n.writeFile(B,v.Z.from(""))];case 1:if(t.sent().error)return[2,{type:"error",message:'Could not create "'+B+'"'}];return e.openFile({path:B}),[2]}})})},match:function(){return{score:1}}})),[2,k]}})}),function(e){return t.apply(this,arguments)})})}},95184:function(e,t,n){n.d(t,{F:function(){return E},q:function(){return _}});var r=n(27387),i=n(66626),o=n(96583),a=n(3796),l=n(25722),c=n(33162),s=n(87915),u=n(24766),d=n(93245),f=n(36809),h=n(89774),p=n(54300),m=n(63163),v=n(6843),g=n(70625),y=n(5438),b=n(13213),w=n(80137),Z=(0,f.X)({root:[m.l0.colWithGap(4),m.l0.align.start,m.l0.flex.growAndShrink(1),m.l0.p(8)],header:[m.l0.rowWithGap(4),m.l0.align.center],singleLine:[{whiteSpace:"nowrap",fontFamily:m.TV.fontFamilyCode},m.l0.truncate,m.l0.color.foregroundDimmest]});function x(e){var t=e.path,n=e.line;return(0,a.BX)(d.G,{css:Z.root,children:[(0,a.BX)(d.G,{css:Z.header,children:[(0,a.tZ)(s.Z,{path:t,size:12}),(0,a.BX)(u.xv,{variant:"small",color:"dimmest",multiline:!1,children:[t.replace(/^\.\//,""),":",n.lineNumber]})]}),(0,a.tZ)(d.G,{css:Z.singleLine,children:(0,a.tZ)(c.xK,{source:n.content,matches:n.matches})})]})}function C(){return(0,a.BX)(d.G,{css:[m.l0.px(8),m.l0.rowWithGap(8),m.l0.align.center],children:[(0,a.tZ)(p.Z,{}),(0,a.tZ)(u.xv,{color:"dimmest",multiline:!1,children:"Something went wrong searching your Repl's contents. Please try again."})]})}function k(){return(0,a.BX)(d.G,{css:[m.l0.rowWithGap(8),m.l0.p(8),m.l0.align.center],children:[(0,a.tZ)(p.Z,{}),(0,a.tZ)(u.xv,{color:"dimmest",multiline:!1,children:"Displaying only part of the results, try being more specific with your search."})]})}function S(){return(0,a.tZ)(d.G,{css:[m.l0.rowWithGap(8),m.l0.p(8),m.l0.align.center],children:(0,a.tZ)(u.xv,{color:"dimmest",multiline:!1,children:"Nothing came up searching your Repl's content."})})}var _=(0,g.l2)({cmdOrCtrl:!0,shift:!0,key:"f"});function E(e){var t,n,c=(0,y.e)({container:e.container});return(0,v.fA)({type:"context",description:"Search through your files",label:"Search",icon:(0,a.tZ)(h.Z,{}),keyboardShortcut:e.keyboardShortcut?_:void 0},{match:(0,v.r0)({defaultScore:b.L.searchFileContents}),commands:(t=(0,r._)(function(t){var r,u,f,h,m,v,g,y,Z,_,E,T;return(0,o.Jh)(this,function(o){switch(o.label){case 0:if(!t.searchQuery||!t.active&&e.activeOnly)return[2,[]];return n=r=Math.random(),[4,c({query:t.searchQuery})];case 1:if(f=(u=o.sent()).results,h=u.error,m=u.isPartialResult,r!==n)return[2,[]];if(null!==h){if(!t.active)return[2,[]];return l.Tb(Error("Search file contents returned an error"),{extra:{message:h}}),[2,[{data:{type:"error",label:"error",icon:(0,a.tZ)(p.Z,{})},match:function(){return{score:1,render:{content:(0,a.tZ)(C,{})}}}}]]}v=[],g=!0,y=!1,Z=void 0;try{for(_=function(){var n=(0,i._)(T.value,2),r=n[0];n[1].forEach(function(n){var i=n.matches[0].column;v.push({match:function(){var e=(0,w.jy)(t.searchQuery,n.content,{filterLowMatchScores:!0});return{score:Math.floor(((null==e?void 0:e.score)||1)*b.r.fileContentsSearch),render:{height:60,content:(0,a.tZ)(x,{path:r,line:n})}}},data:{type:"action",label:r,icon:(0,a.tZ)(s.Z,{path:r}),key:[r,n.lineNumber,i].join(":"),run:function(){e.openFile({path:r,line:n.lineNumber,col:i})}}})})},E=Object.entries(f)[Symbol.iterator]();!(g=(T=E.next()).done);g=!0)_()}catch(e){y=!0,Z=e}finally{try{g||null==E.return||E.return()}finally{if(y)throw Z}}if(0===v.length&&t.active)return[2,[{data:{type:"output",label:"",icon:(0,a.tZ)(d.G,{})},match:function(){return{score:1,render:{content:(0,a.tZ)(S,{})}}}}]];if(t.active){if(0===v.length)return[2,[{data:{type:"output",label:"",icon:(0,a.tZ)(d.G,{})},match:function(){return{score:1,render:{content:(0,a.tZ)(S,{})}}}}]];m&&v.push({data:{type:"error",label:"error",icon:(0,a.tZ)(p.Z,{})},match:function(){return{score:1/0,render:{content:(0,a.tZ)(k,{})}}}})}return[2,v]}})}),function(e){return t.apply(this,arguments)})})}},8368:function(e,t,n){n.d(t,{e:function(){return Z}});var r=n(41733),i=n(3796),o=n(12e3),a=n(77558),l=n(4573),c=n(80137),s=n(86466),u=n(379),d=n(24766),f=n(93245),h=n(36809),p=n(63163),m=n(41895),v=n(62537),g=n(42306),y=[{padding:(0,a.fP)(8)}],b=(0,h.X)({root:[y,p.l0.align.center,p.l0.flex.row,{gap:(0,a.fP)(8),"&:hover .icon":{backgroundColor:"var(".concat(s.dj.interactiveBackground,")")}}],iconAndIndicator:[p.l0.position.relative,p.l0.pt(2),{alignSelf:"start"}],iconContainer:[p.l0.position.relative,(0,a.D$)(16),{width:(0,a.fP)(16),height:(0,a.fP)(16)}],textContent:[p.l0.colWithGap(2),p.l0.flex.growAndShrink(1)],titleRow:[p.l0.rowWithGap(4),p.l0.justify.spaceBetween],titleWithAlias:[p.l0.rowWithGap(8)],aliasContainer:[p.l0.rowWithGap(4),p.l0.color.foregroundDimmest,p.l0.align.center],descriptionText:[{fontSize:"0.9em"}]});function w(e){var t=e.pane,n=e.active,a=e.labelHighlights,c=(0,v.Se)(),s=c.Icon({pane:t}),h=c.getTitle(t),p=c.getDescription(t),y=c.getTitlePill(t),w=(0,g.b2)({paneType:t.type}),Z=(0,o.O$)();return(0,i.BX)(f.G,{css:b.root,children:[(0,i.BX)(f.G,{css:b.iconAndIndicator,children:[(0,i.tZ)(f.G,{css:b.iconContainer,style:{opacity:e.active?1:.7},children:s}),w?(0,i.tZ)(m.B,{color:w}):null]}),(0,i.BX)(f.G,{css:b.textContent,children:[(0,i.BX)(f.G,{css:b.titleRow,children:[e.alias?(0,i.BX)(f.G,{css:b.titleWithAlias,children:[(0,i.tZ)(d.xv,{children:h}),(0,i.BX)(f.G,{css:b.aliasContainer,children:["(",e.aliasPrefix?(0,i.BX)(d.xv,{color:"dimmest",children:[e.aliasPrefix," "]}):null,(0,i.tZ)(l.x,{dimmed:!0,text:e.alias,highlight:a}),")"]})]}):(0,i.tZ)(l.x,{dimmed:!n,text:h,highlight:a}),Z&&null!=y?(0,i.tZ)(u.D,(0,r._)({},y)):null]}),Z&&null!=p?(0,i.tZ)(l.x,{dimmed:!n,text:p,highlight:e.descriptionHighlights,multiline:!0,css:b.descriptionText}):null]})]})}function Z(e){var t=e.pane,n=e.aliases,r=void 0===n?[]:n;return function(e){var n=e.searchQuery,o=e.data,a=e.active;if("group"===o.type)return null;if(!n)return{score:1,render:{content:(0,i.tZ)(w,{pane:t})}};var l=(0,c.jy)(n,o.label,{filterLowMatchScores:!0}),s=null!=o.description?(0,c.jy)(n,o.description,{filterLowMatchScores:!0,fuzzy:!1}):null;if(null!=l||null!=s)return{score:null!==(p=null!==(h=null==l?void 0:l.score)&&void 0!==h?h:null==s?void 0:s.score)&&void 0!==p?p:0,render:{content:(0,i.tZ)(w,{pane:t,labelHighlights:null!==(m=null==l?void 0:l.ranges)&&void 0!==m?m:[],descriptionHighlights:null!==(v=null==s?void 0:s.ranges)&&void 0!==v?v:[],active:a})}};var u=!0,d=!1,f=void 0;try{for(var h,p,m,v,g,y=r[Symbol.iterator]();!(u=(g=y.next()).done);u=!0){var b=g.value,Z="string"==typeof b?{alias:b,prefix:void 0}:b,x=Z.alias,C=Z.prefix,k=(0,c.jy)(n,x,{filterLowMatchScores:!0});if(k)return{score:k.score,render:{content:(0,i.tZ)(w,{pane:t,active:a,alias:x,aliasPrefix:C,labelHighlights:k.ranges})}}}}catch(e){d=!0,f=e}finally{try{u||null==y.return||y.return()}finally{if(d)throw f}}return null}}},60273:function(e,t,n){n.d(t,{P:function(){return r}});var r=new Map([["envEditor",["Environment variables"]],["ghostwriterChat",["Chat",{alias:"Ghostwriter",prefix:"previously"}]],["shell",["Terminal"]],["objectStorage",["Blobject Storage","Blob Cloud"]],["dependencies",["Packages","System dependencies","Nix","Modules"]]])},47846:function(e,t,n){n.d(t,{Z:function(){return er}});var r,i,o=n(27387),a=n(98924),l=n(66626),c=n(96583),s=n(3796),u=n(75271),d=n(14548),f=n(93245),h=n(63163),p=n(39713),m=n(59735),v=n(41733),g=n(30509),y=n(62279),b=n(36809),w=(0,y.F4)({"0%":{opacity:.1},"50%":{opacity:1},"100%":{opacity:.1}}),Z=(0,b.X)({one:{opacity:.1,animation:"".concat(w," 1.5s ease-in-out infinite"),animationDelay:"0s"},two:{opacity:.1,animation:"".concat(w," 1.5s ease-in-out infinite"),animationDelay:"0.1s"},three:{opacity:"0.1",animation:"".concat(w," 1.5s ease-in-out infinite"),animationDelay:"0.2s"}}),x=function(e){var t=(0,p._)({},(0,m._)(e));return(0,s.BX)(s.HY,{children:[(0,s.tZ)("span",(0,g._)((0,v._)({},t),{css:Z.one,children:"."})),(0,s.tZ)("span",(0,g._)((0,v._)({},t),{css:Z.two,children:"."})),(0,s.tZ)("span",(0,g._)((0,v._)({},t),{css:Z.three,children:"."}))]})},C=n(16155),k=n(23882),S=n(35370);(r=i||(i={})).Unknown="UNKNOWN",r.Npm="NPM",r.Django="DJANGO",r.Flask="FLASK",r.FastAPI="FASTAPI",r.Pyramid="PYRAMID",r.Starlette="STARLETTE",r.Streamlit="STREAMLIT",r.Rails="RAILS",r.DotNet="DOTNET",r.Cargo="CARGO",r.Make="MAKE",r.RegularRun="REGULAR_RUN";var _="package.json",E="requirements.txt",T=RegExp("((index)|(main)|(app)|(run)|(start)|(server))\\..+","i"),R=RegExp("((node_modules)|(venv)|(bower_components)|(vendor)|(build)|(dist)|(target)|(\\.git)|(\\.vscode)|(\\.idea)).+$","i");function D(){return(D=(0,o._)(function(e,t){var n,r,i,o,a,l;return(0,c.Jh)(this,function(c){switch(c.label){case 0:if(n=e.initRunCommand,r=e.isCompiled,i=e.allFiles,!((o=new Set(i)).has("Makefile")||o.has("makefile")))return[3,1];return[2,"MAKE"];case 1:if(!o.has(_))return[3,2];return[2,"NPM"];case 2:if(!o.has("Cargo.toml"))return[3,3];return[2,"CARGO"];case 3:if(!r)return[3,4];return[2,"UNKNOWN"];case 4:if(!o.has("config/application.rb"))return[3,5];return[2,"RAILS"];case 5:if(!i.some(function(e){return"csproj"===(0,S.r6)(e)}))return[3,6];return[2,"DOTNET"];case 6:if(!o.has(E))return[3,8];return[4,t.readFile(E)];case 7:if(!(a=c.sent()).error){if((l=a.content.toString()).includes("django"))return[2,"DJANGO"];if(l.includes("flask"))return[2,"FLASK"];if(l.includes("fastapi"))return[2,"FASTAPI"];if(l.includes("pyramid"))return[2,"PYRAMID"];else if(l.includes("starlette"))return[2,"STARLETTE"];else if(l.includes("streamlit"))return[2,"STREAMLIT"]}return[3,9];case 8:if(T.test(n))return[2,"REGULAR_RUN"];c.label=9;case 9:return[2,"UNKNOWN"]}})})).apply(this,arguments)}function I(){return(I=(0,o._)(function(e){var t,n,r,i;return(0,c.Jh)(this,function(o){switch(o.label){case 0:return[4,e.readFile(_)];case 1:t=o.sent();try{if(!t.error&&(r=null==(n=JSON.parse(t.content.toString()))?void 0:n.scripts,i=["dev","serve","watch","start:dev","start"].find(function(e){return null==r?void 0:r[e]})))return[2,"npm run ".concat(i)]}catch(e){}return[2,"node index.js"]}})})).apply(this,arguments)}function B(){return(B=(0,o._)(function(e,t,n){var r,i,o,a;return(0,c.Jh)(this,function(l){switch(r=t.initRunCommand,o=(i=t.allFiles).find(function(e){return["main.py","app.py"].includes(e)}),e){case"NPM":return[2,function(e){return I.apply(this,arguments)}(n)];case"REGULAR_RUN":var c;if(null==(a=null!==(c=i.filter(function(e){return!R.test(e)}).find(function(e){return T.test(e)}))&&void 0!==c?c:null))return[2,null];return[2,r.replace(T,a)];case"DJANGO":return[2,"python3 manage.py runserver 0.0.0.0:3000"];case"FLASK":return[2,"python ".concat(o)];case"FASTAPI":case"STARLETTE":return[2,"uvicorn ".concat(null==o?void 0:o.replace(".py",""),":app --host 0.0.0.0 --port 3000")];case"PYRAMID":return[2,"pserve development.ini"];case"STREAMLIT":return[2,"streamlit run ".concat(o)];case"RAILS":return[2,"bundle exec rails server --binding=0.0.0.0"];case"DOTNET":return[2,"dotnet run"];case"CARGO":return[2,"cargo run"];default:return[2,null]}return[2]})})).apply(this,arguments)}function G(){return(G=(0,o._)(function(e,t,n,r){var i,o,a;return(0,c.Jh)(this,function(l){switch(l.label){case 0:if(0===n.length)return[2,{projType:"UNKNOWN",runCommand:null,compileCommand:null}];return[4,function(e,t){return D.apply(this,arguments)}(i={initRunCommand:e,isCompiled:t,allFiles:n},r)];case 1:return a={projType:o=l.sent()},[4,function(e,t,n){return B.apply(this,arguments)}(o,i,r)];case 2:return[2,(a.runCommand=l.sent(),a.compileCommand=function(e){switch(e){case"MAKE":return"make";case"CARGO":case"DOTNET":case"NPM":return"";default:return null}}(o),a)]}})})).apply(this,arguments)}var P=n(61781),A=n(96949),L=n(70882),N=n(83960);function O(e,t){var n=[];return n.push((0,N.xz)("interpreter")),n.push((0,N.xz)("entrypoint")),e&&(n.push((0,N.KQ)(e)),n.push((0,N.X6)(e))),t?(n.push((0,N.D3)(t)),n.push((0,N.pi)(t))):(n.push((0,N.xz)("compile")),n.push((0,N.xz)("deployment/build"))),n}var U=n(10777),X=n(40490);function M(e){var t=e.children;return(0,s.tZ)(d.Tg,{background:"default",css:[h.l0.borderRadius(8),{width:"100%",height:"calc(100% - var(--space-2))",backgroundColor:"var(--background-default)",overflowY:"auto",marginTop:"0px"}],children:(0,s.tZ)(f.G,{css:[h.l0.p(16),h.l0.justify.center,h.l0.align.center,{flex:"1 1 auto"}],children:t})})}function F(){return(0,s.tZ)(M,{children:(0,s.BX)(f.G,{children:[(0,s.tZ)(f.G,{children:"We couldn't read your .replit file"}),(0,s.tZ)("a",{css:[h.l0.pt(8),{fontSize:h.TV.fontSizeSmall}],target:"_blank",href:"https://docs.replit.com/replit-workspace/configuring-repl",children:"View docs"})]})})}function W(){return(0,s.tZ)(M,{children:(0,s.tZ)(f.G,{children:(0,s.BX)("p",{children:["Importing from GitHub",(0,s.tZ)(x,{style:{color:"var(--foreground-default)"}})]})})})}var V=n(53904),H=n(27069),z=n(84864),j=n(10578),q=n(74158),J=n(24766),Y=n(38799),$=n(5272),K=n(79904),Q=n(44935),ee=n(54300),et=f.K.a,en=(0,b.X)({root:[h.l0.maxWidth(420),h.l0.display.flex,h.l0.gap(12),h.l0.py(4),{margin:"0 auto"}],section:[h.l0.display.flex,h.l0.p(12),h.l0.gap(12)],sectionHeader:[h.l0.flex.row,h.l0.justify.spaceBetween],loading:[h.l0.center,h.l0.flex.growAndShrink(1)],multiParagraph:[h.l0.flex.column,h.l0.gap(8),{a:[h.l0.display.inline]}]}),er=function(e){var t,n,r,d,p,m,v,g,y,b,w,Z,x,S,_,E,T,R,D,I,B,N,M,er,ei,eo,ea,el,ec,es,eu,ed,ef,eh,ep,em,ev,eg=e.flow,ey=(0,a._)(e,["flow"]),eb=(t=ey.closeConfigPane,n=ey.openSidebar,r=ey.onNewPaneSelected,d=ey.openConsole,p=(0,X.Wd)("gitImport","boolean"),m=(0,C.Z)(),g=(v=(0,k.Z)()).fs,y=v.dotReplit,w=(b=(0,l._)((0,u.useState)(null),2))[0],Z=b[1],S=(x=(0,l._)((0,u.useState)(null),2))[0],_=x[1],E=(0,u.useCallback)(function(){r({type:"codeEditor",data:{path:".replit"}})},[r]),(0,u.useEffect)(function(){if(!w)return y.watch(function(e){Z(e.config),"NOT_FOUND"!==e.error&&_(e.error)})},[y,w]),R=(T=(0,l._)((0,u.useState)(!1),2))[0],D=T[1],B=(I=(0,l._)((0,u.useState)(""),2))[0],N=I[1],er=(M=(0,l._)((0,u.useState)(""),2))[0],ei=M[1],ea=(eo=(0,l._)((0,u.useState)(!1),2))[0],el=eo[1],es=(ec=(0,l._)((0,u.useState)(i.Unknown),2))[0],eu=ec[1],ef=(ed=(0,l._)((0,u.useState)(!1),2))[0],eh=ed[1],(0,u.useEffect)(function(){if(!ef)return g.watchDir(".git",{onChange:function(e){eh(e.length>0)},onMoveOrDelete:function(){eh(!0)},onError:function(){eh(!1)}})}),(0,u.useEffect)(function(){(ef||!p)&&function(){e.apply(this,arguments)}();function e(){return(e=(0,o._)(function(){var e,t,n,r,o,a,l,s,u,d,f,h,m,v,b,Z,x;return(0,c.Jh)(this,function(c){switch(c.label){case 0:if(!w)return[2];return t=(0,P.Cq)(null!==(e=w.run)&&void 0!==e?e:void 0),r=(0,P.Cq)(null!==(n=w.compile)&&void 0!==n?n:void 0),o=!!w.compile,[4,g.listFiles()];case 1:return a=c.sent(),[4,g.readDir(".git")];case 2:if(l=c.sent(),a.error||null==a.files||p&&l.error)return[2];return s=a.files,[4,function(e,t,n,r){return G.apply(this,arguments)}(t,o,s,g)];case 3:if(d=(u=c.sent()).projType,f=u.runCommand,h=u.compileCommand,m=s.includes("Procfile"),v=function(e,t){return e||t},b=m?v(t,f):v(f,t),Z=h||r,N(b||""),ei(Z),el(d!==i.Unknown&&d!==i.RegularRun),eu(d),!p)return[3,6];return b||U.kg.warn("Failed to autosuggest run command"),d===i.Unknown&&U.kg.warn("Failed to detect project type"),x=O(b||"",Z),[4,y.updateDotReplit(x)];case 4:return c.sent(),[4,g.flush()];case 5:c.sent(),g.persist({skipDebounce:!0}),c.label=6;case 6:return[2]}})})).apply(this,arguments)}},[y,w,g,ef,p]),em=(0,u.useCallback)((ep=(0,o._)(function(e){var t,n,r,i,o,a;return(0,c.Jh)(this,function(l){switch(l.label){case 0:return t=e.run,n=e.compile,r=e.runChanged,i=e.compileChanged,o=e.projType,(0,A.j)(A.U3.NIX_GH_IMPORT_USED,{action:L.D.ConfigDone,isCompiled:""!==n,runChanged:r,compileChanged:i,projType:o,replId:m}),a=O(t,n),[4,y.updateDotReplit(a)];case 1:return l.sent(),g.flush().then(function(){g.persist({skipDebounce:!0})}),[2]}})}),function(e){return ep.apply(this,arguments)}),[y,g,m]),{fs:g,applyConfig:em,closeConfigPane:t,dotReplitConfig:w,dotReplitError:S,isApplyingConfig:R,setIsApplyingConfig:D,initialBuild:er,initialRun:B,isFrameworkRecommended:ea,projType:es,openDotReplit:E,openSidebar:n,openConsole:d}),ew=(0,V._)(),eZ=ew.modules,ex=ew.configs,eC=(0,H.Z)(),ek=(0,l._)((0,u.useState)("Overview"),2),eS=ek[0],e_=ek[1],eE=(0,u.useMemo)(function(){return null==eZ?void 0:eZ.filter(function(e){return"replit"!==e.id})},[eZ]),eT=eb.dotReplitConfig,eR=eb.dotReplitError,eD=eb.initialRun,eI=eb.initialBuild,eB=void 0===eI?"":eI,eG=eb.openConsole,eP=eb.openDotReplit,eA=eb.applyConfig,eL=eb.isApplyingConfig,eN=eb.setIsApplyingConfig,eO=eb.closeConfigPane,eU=eb.openSidebar,eX=eb.projType,eM=!!eX&&eX===i.Rails,eF=(0,z.Y)(eD,function(e){if(!e)return{message:"Add a run command"}}),eW=(0,l._)((0,u.useState)(eB),2),eV=eW[0],eH=eW[1];if((0,u.useEffect)(function(){eF.setValue(eD)},[eD]),(0,u.useEffect)(function(){eH(null!=eB?eB:"")},[eB]),eR)return(0,s.tZ)(F,{});if(!eT&&"githubImport"===eg)return(0,s.tZ)(W,{});if(!eZ||!eE||!ex||!eC)return(0,s.tZ)(f.G,{css:en.loading,children:(0,s.tZ)(j.Z,{})});switch(eS){case"ModuleSearch":return(0,s.tZ)(q.z,{onBack:function(){return e_("Overview")},disableCategorySelection:!0,initialCategory:"Modules",openConsole:eG});case"Overview":return(0,s.BX)(f.G,{css:en.root,children:[(0,s.BX)(f.G,{css:en.section,children:[(0,s.tZ)(J.h4,{variant:"headerDefault",level:1,children:"Configure your Repl"}),(0,s.tZ)(Y.M,{color:"dimmer",css:en.multiParagraph,children:"githubImport"===eg?(0,s.BX)(s.HY,{children:[(0,s.BX)("p",{children:["Your code was successfully imported from GitHub. We've created a"," ",(0,s.tZ)("a",{href:"",onClick:function(e){e.preventDefault(),eP()},children:".replit file"}),", which configures your Repl's behavior."," ",(0,s.tZ)("a",{href:"https://docs.replit.com/replit-workspace/configuring-repl#replit-configuration-file",target:"_blank",rel:"noopener noreferrer",children:"Learn more about .replit files."})]}),(0,s.BX)("p",{children:["To get started, verify our recommended platform dependencies and commands. If you're still deciding, try"," ",(0,s.tZ)(et,{onClick:function(){return null==ey?void 0:ey.onNewPaneSelected({type:"chat"})},children:"asking AI"}),"."]})]}):(0,s.tZ)(s.HY,{children:(0,s.BX)("p",{children:["Before configuring your Run command, make sure you've installed any"," ",(0,s.tZ)(et,{onClick:function(){return null==ey?void 0:ey.onNewPaneSelected({type:"dependencies"})},children:"languages and packages"})," ","necessary for your project. If you're still deciding, try"," ",(0,s.tZ)(et,{onClick:function(){return null==ey?void 0:ey.onNewPaneSelected({type:"chat"})},children:"asking AI"}),"."]})})})]}),"githubImport"===eg?(0,s.BX)(f.G,{css:en.section,children:[(0,s.tZ)(J.h4,{variant:"subheadDefault",level:2,children:"Modules"}),(0,s.tZ)(J.xv,{color:"dimmer",children:"Modules combine support for programming languages, formatters, and packagers."}),(0,s.tZ)($.Z,{modules:eE}),(0,s.tZ)(K.zx,{stretch:!0,colorway:"primary",variant:"outlined",type:"submit",text:"Add more modules",onClick:function(){e_("ModuleSearch")}})]}):null,(0,s.BX)(f.G,{css:en.section,children:[(0,s.tZ)(f.G,{css:en.sectionHeader,children:(0,s.tZ)(J.h4,{variant:"subheadDefault",level:2,children:"Commands"})}),(0,s.tZ)("form",{onSubmit:(ev=(0,o._)(function(e){return(0,c.Jh)(this,function(t){switch(t.label){case 0:if(e.preventDefault(),eN(!0),!eF.value)return eF.validate(),[2];return[4,eA({run:eF.value,compile:null!=eV?eV:"",runChanged:eF.value!==eD,compileChanged:eV!==eB,projType:eX})];case 1:return t.sent(),"githubImport"===eg&&(eO(),null==eU||eU()),eN(!1),[2]}})}),function(e){return ev.apply(this,arguments)}),css:[{width:"100%"}],children:(0,s.tZ)(f.G,{css:[h.l0.colWithGap(8)],children:(0,s.BX)(f.G,{css:[h.l0.colWithGap(8)],children:[(0,s.BX)(f.G,{css:[h.l0.colWithGap(8)],children:[eB?(0,s.BX)(f.G,{css:[h.l0.colWithGap(4)],children:[(0,s.tZ)("label",{htmlFor:"compile-sel",children:"Compile command"}),(0,s.tZ)(J.xv,{variant:"small",color:"dimmest",children:"This is optional, and is executed before your run command."}),(0,s.tZ)(Q.II,{disabled:eL,id:"compile-sel",type:"text",value:eV,placeholder:"Enter a command to compile the program",onChange:function(e){eH(e.currentTarget.value)},css:{"&:disabled":{color:h.TV.foregroundDimmer}}})]}):null,(0,s.tZ)("label",{htmlFor:"run-sel",css:[h.l0.mt(4)],"data-cy":"import-config-run-command",children:"Run command"}),(0,s.tZ)(Q.II,{disabled:eL,id:"run-sel",dataCy:"import-config-run-command-input",type:"text",value:eF.value,placeholder:"Enter a command to run the program",onChange:function(e){eF.setValue(e.currentTarget.value)},css:[{"&:disabled":{color:h.TV.foregroundDimmer,cursor:"auto"},cursor:"text"}]}),eF.error||!eF.value?(0,s.BX)(f.G,{css:[h.l0.color.accentNegativeDefault,h.l0.rowWithGap(4),h.l0.align.center],children:[(0,s.tZ)(ee.Z,{size:12}),(0,s.tZ)(f.G,{children:eF.error?eF.error.message:"Add a run command"})]}):null]}),(0,s.BX)(J.xv,{color:"dimmer",variant:"small",children:["Use either a dev server or start command.",(0,s.tZ)(et,{css:h.l0.color.accentPrimaryStronger,target:"_blank",href:"https://docs.replit.com/replit-workspace/configuring-repl#run-command",rel:"noopener noreferrer",children:"Not sure what to use or running multiple apps?"})]}),eM?(0,s.tZ)(f.G,{children:(0,s.BX)(J.xv,{variant:"small",color:"dimmest",children:["We detected this is a Rails project. You will need",(0,s.BX)("a",{target:"_blank",rel:"noopener noreferrer",href:"https://docs.replit.com/additional-resources/rails-on-replit",children:[" ","additional changes"," "]}),"to your config files to use all of Replits features."]})}):null,(0,s.tZ)(f.G,{css:[h.l0.flex.column,h.l0.pt(16)],children:(0,s.tZ)(K.zx,{stretch:!0,colorway:"primary",type:"submit",text:eL?"Saving...":"githubImport"===eg?"Confirm and close":"Save",loading:eL,disabled:eL||!!eF.error||!eF.value,dataCy:"import-config-done"})})]})})})]})]})}}},26153:function(e,t,n){n.d(t,{Z:function(){return er}});var r=n(66626),i=n(63257),o=n(3796),a=n(93245),l=n(24766),c=n(36809),s=n(63163),u=n(14548),d=n(61989),f=n(9602),h=n(19602),p=n(91466),m=n(53904),v=n(75271),g=n(47874),y=n(22419),b=n(39031),w=n(36109),Z=n(22436),x=n(62407),C=n(21460),k=n(66598),S=n(8366),_=n(50719),E=n(91654),T=n(23467),R=n(27238),D=n(67502),I=n(68047),B=n(23776),G=n(84434),P=n(88035),A=n(85154),L=n(17778),N=n(2660),O=n(27843),U=n(19788),X=n(14608),M=n(39404),F=n(25253),W=n(43849),V=n(53997),H=n(653),z=n(23553),j=n(33745),q=n(86292),J=n(9344),Y=n(17923);function $(e){var t=e.module,n=t.name.toLowerCase(),r=n.split(" ");return n.includes("node")?(0,o.tZ)(U.Z,{}):n.includes("typescript")?(0,o.tZ)(J.Z,{}):n.includes("python")||n.includes("pyright")?(0,o.tZ)(W.Z,{}):n.includes("c++")||n.includes("cpp")||n.includes("clang")||n.includes("ccls")?(0,o.tZ)(T.Z,{}):n.includes("java")||n.includes("maven")?(0,o.tZ)(L.Z,{}):n.includes("rust")||n.includes("cargo")?(0,o.tZ)(z.Z,{}):r.includes("go")||n.includes("gopls")?(0,o.tZ)(G.Z,{}):n.includes("ruby")?(0,o.tZ)(H.Z,{}):n.includes("elixir")?(0,o.tZ)(B.Z,{}):n.includes("bash")?(0,o.tZ)(_.Z,{}):n.includes("clojure")?(0,o.tZ)(R.Z,{}):n.includes("php")?(0,o.tZ)(M.Z,{}):n.includes("swift")?(0,o.tZ)(q.Z,{}):n.includes("haskell")?(0,o.tZ)(P.Z,{}):n.includes("lua")?(0,o.tZ)(N.Z,{}):n.includes("dart")?(0,o.tZ)(I.Z,{}):n.includes("css")?(0,o.tZ)(D.Z,{}):n.includes("html")?(0,o.tZ)(A.Z,{}):r.includes("r")?(0,o.tZ)(V.Z,{}):n.includes("nix")?(0,o.tZ)(O.Z,{}):n.includes("npm")?(0,o.tZ)(X.Z,{}):"bun"===n?(0,o.tZ)(E.Z,{}):n.includes("prettier")?(0,o.tZ)(F.Z,{}):n.includes("vue")?(0,o.tZ)(Y.Z,{}):n.includes("svelte")?(0,o.tZ)(j.Z,{}):n.includes(".replit")?(0,o.tZ)(k.Z,{}):t instanceof w.api.PackagerOption?(0,o.tZ)(C.Z,{}):t instanceof w.api.LanguageServerOption?(0,o.tZ)(Z.Z,{}):t instanceof w.api.FormatterOption?(0,o.tZ)(x.Z,{}):t instanceof w.api.RunOption?(0,o.tZ)(S.Z,{}):(0,o.tZ)(C.Z,{})}var K=n(10578),Q=n(96949),ee=(0,c.X)({module:[s.l0.borderRadius(4),s.l0.width("100%"),s.l0.overflow("hidden")],submodule:[s.l0.flex.row,s.l0.align.center,s.l0.p(4)],submoduleName:[s.l0.truncate,s.l0.mx(8),s.l0.flex.growAndShrink(1)],moduleHeader:[s.l0.flex.row,s.l0.justify.spaceBetween,s.l0.flex.growAndShrink(1)],moduleActions:[s.l0.rowWithGap(4),s.l0.center],moduleHeaderMetadata:[s.l0.rowWithGap(12)],divider:[s.l0.backgroundColor.outlineDimmer]});function et(e){var t=e.isModifying,n=e.isInstalled,r=e.onInstallClick,i=e.onRemoveClick,a=e.module;if(t)return(0,o.tZ)(f.hU,{alt:"Updating module",tooltipBehavior:"hidden",children:(0,o.tZ)(K.Z,{})});if(n){var l="replit"===a.id;return(0,o.tZ)(f.hU,{alt:l?"The base module can't be removed":"Remove module",disabled:l,onClick:i,children:(0,o.tZ)(h.Z,{})})}return(0,o.tZ)(f.hU,{alt:"Add module",onClick:r,children:(0,o.tZ)(g.Z,{})})}function en(e){var t=e.module,n=e.isInstalled,i=(0,m._)(),c=i.addModule,s=i.removeModule,u=(0,r._)((0,v.useState)(!1),2),d=u[0],f=u[1];return(0,v.useEffect)(function(){f(!1)},[n]),(0,o.BX)(a.G,{css:ee.moduleHeader,children:[(0,o.BX)(a.G,{css:ee.moduleHeaderMetadata,children:[(0,o.tZ)(l.xv,{children:t.name}),t.displayVersion?(0,o.tZ)(l.xv,{color:"dimmer",children:t.displayVersion}):null]}),(0,o.BX)(a.G,{css:ee.moduleActions,children:[t.description?(0,o.tZ)(y.u,{tooltip:t.description,children:(0,o.tZ)(b.Z,{})}):null,(0,o.tZ)(et,{module:t,isInstalled:n,isModifying:d,onInstallClick:function(){f(!0),c(t.id),(0,Q.j)(Q.U3.NIX_MODULE_ADDED,{moduleId:t.id})},onRemoveClick:function(){f(!0),s(t.id),(0,Q.j)(Q.U3.NIX_MODULE_REMOVED,{moduleId:t.id})}})]})]})}function er(e){var t=e.module,n=e.defaultExpanded,r=e.isInstalled,c=(0,i._)(t.runners).concat((0,i._)(t.packagers),(0,i._)(t.formatters),(0,i._)(t.languageServers));return(0,o.tZ)(u.Tg,{elevated:!0,css:ee.module,children:(0,o.BX)(d.Q,{round:!1,defaultExpanded:n,headerContent:(0,o.tZ)(en,{module:t,isInstalled:r}),children:[c.length>0?(0,o.tZ)(p.R,{css:ee.divider}):null,c.map(function(e){return(0,o.BX)(a.G,{css:ee.submodule,children:[(0,o.tZ)($,{module:e}),(0,o.tZ)(l.xv,{css:ee.submoduleName,children:e.name}),e.displayVersion?(0,o.tZ)(l.xv,{color:"dimmer",children:e.displayVersion}):null]},e.id)})]})})}},5272:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(3796),i=n(93245),o=n(36809),a=n(63163),l=n(26153),c=n(75271),s=(0,o.X)({modules:[a.l0.colWithGap(8)]});function u(e){var t=e.modules,n=(0,c.useMemo)(function(){return t.filter(function(e){return"replit"!==e.id})},[t]);return(0,r.tZ)(i.G,{css:s.modules,children:n.map(function(e){return(0,r.tZ)(l.Z,{module:e,defaultExpanded:!0,isInstalled:!0},e.id)})})}},74158:function(e,t,n){n.d(t,{o:function(){return ed},z:function(){return eh}});var r=n(27387),i=n(41733),o=n(30509),a=n(98924),l=n(66626),c=n(96583),s=n(3796),u=n(85045),d=n(95088),f=n.n(d),h=n(54082),p=n.n(h),m=n(93245),v=n(45883),g=n(23882),y=n(75271),b=n(46261),w=n(88300),Z=n(9602),x=n(48155),C=n(82922),k=n(59978),S=n(33790),_=n(79904),E=n(35820),T=n(22893),R=n(14548),D=n(24766),I=n(36809),B=n(33323),G=n(71920),P=n(54300),A=n(63163),L=n(77049),N=/(.+)(?:\S+)?<([^>,]+)[>,]/,O=m.K.span;function U(e){var t=e.author,n=N.exec(t);if(n){var r=n[1],i=n[2];return(0,s.BX)(s.HY,{children:["By ",r,(0,s.BX)("a",{href:"mailto:".concat(i),children:["<",i,">"]})]})}return(0,s.BX)(O,{children:["By ",t]})}var X=n(99743),M=n(47874),F=n(10578),W=n(19602);function V(e){var t=e.isInstalled,n=e.isInQueue;return e.isCurrentAction?(0,s.tZ)(F.Z,{}):n?(0,s.tZ)(X.Z,{}):t?(0,s.tZ)(W.Z,{}):(0,s.tZ)(M.Z,{})}var H=n(34648),z=m.K.span,j=(0,I.X)({metadata:[A.l0.colWithGap(2)],metadataSkeleton:[A.l0.colWithGap(8),A.l0.pt(4)],metadataSkeletonVersion:[E.p.foregroundPulse(),A.l0.height(16),A.l0.maxWidth(64),A.l0.borderRadius(4)],metadataSkeletonDescription:[E.p.foregroundPulse(),A.l0.height(16),A.l0.borderRadius(4),A.l0.maxWidth(425)],root:[A.l0.borderRadius(8),A.l0.p(8)],header:[A.l0.flex.row,A.l0.justify.spaceBetween],headerTitle:[A.l0.display.flex,A.l0.rowWithGap(8),A.l0.flex.growAndShrink(1)],headerTitleText:[A.l0.display.inline,A.l0.flex.growAndShrink(1),A.l0.overflow("hidden"),A.l0.truncate],headerTitlePills:[A.l0.display.inlineFlex,A.l0.rowWithGap(4),A.l0.flex.shrink(0)],headerButton:[],content:[A.l0.colWithGap(4)],error:[A.l0.mt(4)],actions:[A.l0.rowWithGap(8),A.l0.mt(8)],consoleButton:[A.l0.width("calc(50% - ".concat(A.TV.space8,")"))],cancelButton:[A.l0.width("calc(50% - ".concat(A.TV.space8,")"))],actionButton:[A.l0.flex.grow(1),A.l0.flex.shrink(0)]});function q(e){var t=e.title,n=e.content,r=e.isExpanded;return(0,s.BX)(m.G,{css:j.metadata,children:[t?(0,s.tZ)(D.xv,{color:"dimmer",children:t}):null,n?(0,s.tZ)(D.xv,{maxLines:r?void 0:1,children:n}):null]})}function J(e){var t=e.title,n=e.content;return(0,s.BX)(m.G,{css:j.metadataSkeleton,children:[void 0===t||t?(0,s.tZ)(m.G,{css:j.metadataSkeletonVersion}):null,void 0===n||n?(0,s.tZ)(m.G,{css:j.metadataSkeletonDescription}):null]})}function Y(e){var t,n=e.name,r=e.pkg,i=e.isMetadataLoading,o=e.openConsole,a=e.pills,c=(0,w.ZR)(),u=(0,L.te)(null==c?void 0:c.id),d=(0,L.pN)(null==c?void 0:c.id),f=(0,L.B2)(),h=(0,L.cW)(),p=(0,L.wY)(),v=(0,H.Z)(r.license),g=(0,y.useMemo)(function(){return!!(null!==f&&f.pkgs.find(function(e){return e.name===r.name}))},[f]),b=(0,y.useMemo)(function(){return h.find(function(e){return e.pkgs.find(function(e){return e.name===r.name})})},[h]),x=h.length>1&&!!b,C=(0,y.useMemo)(function(){return!!u.find(function(e){var t,n;return(null===(t=e.name)||void 0===t?void 0:t.toLowerCase())===(null===(n=r.name)||void 0===n?void 0:n.toLowerCase())})},[u]),k=!!(r.homepageURL||r.license||r.author),S=(0,y.useMemo)(function(){return!!d.find(function(e){return e.name===r.name})},[d]),E=(0,l._)((0,y.useState)(!1),2),I=E[0],A=E[1],N=(0,L.jh)(),O=(0,L.Wx)(),X=(0,L.zi)();return(0,s.BX)(R.Tg,{css:j.root,elevated:!0,children:[(0,s.BX)(m.G,{css:j.header,children:[(0,s.BX)(D.h4,{css:j.headerTitle,level:2,variant:"subheadDefault",multiline:!1,children:[(0,s.BX)(z,{css:j.headerTitleText,children:[null!=n?n:r.name,r.version?(0,s.BX)(D.xv,{color:"dimmer",children:["@",r.version]}):null]}),a?(0,s.tZ)(m.G,{css:j.headerTitlePills,children:a}):null]}),k?(0,s.tZ)(Z.hU,{css:j.headerButton,alt:"Show more info",tooltipBehavior:"hidden",onClick:function(){return A(function(e){return!e})},children:(0,s.tZ)(B.Z,{rotate:I?90:0})}):null]}),(0,s.tZ)(m.G,{css:j.content,children:void 0!==i&&i?(0,s.tZ)(J,{title:!1}):(0,s.BX)(s.HY,{children:[(0,s.tZ)(q,{content:null!==(t=r.description)&&void 0!==t?t:"This package has no description.",isExpanded:!0}),r.homepageURL&&I?(0,s.tZ)(q,{content:(0,s.tZ)("a",{href:r.homepageURL,rel:"noreferrer noopener",target:"_blank",children:r.homepageURL}),isExpanded:I}):null,v&&I?(0,s.tZ)(q,{content:v,isExpanded:I}):null,r.author&&I?(0,s.tZ)(q,{content:(0,s.tZ)(U,{author:r.author}),isExpanded:I}):null]})}),S?(0,s.tZ)(T.E,{css:j.error,colorway:"negative",icon:(0,s.tZ)(P.Z,{}),text:"Couldn't ".concat(C?"uninstall":"install"," package. See Console for details, or try again.")}):null,(0,s.tZ)(m.G,{css:j.actions,children:S?(0,s.BX)(s.HY,{children:[(0,s.tZ)(_.zx,{css:j.consoleButton,text:"Console",onClick:function(){o()},disabled:g||x,colorway:"primary",iconLeft:(0,s.tZ)(G.Z,{})}),(0,s.tZ)(_.zx,{css:j.actionButton,text:"Try Again",onClick:function(){(null==c?void 0:c.id)&&(p(c.id,[r]),C?O({id:c.id,pkg:r}):N({id:c.id,pkg:r}))},loading:g||x,colorway:C?"red":void 0,variant:C?"outlined":void 0,iconLeft:(0,s.tZ)(V,{isInstalled:C,isInQueue:x,isCurrentAction:g})})]}):(0,s.BX)(s.HY,{children:[(0,s.tZ)(_.zx,{css:j.actionButton,text:g?(null==f?void 0:f.kind)===L.TH.Install?"Installing":"Removing":x?(null==b?void 0:b.kind)===L.TH.Install?"Waiting to install":"Waiting to remove":C?"Remove":"Install",onClick:function(){(null==c?void 0:c.id)&&(C?O({id:c.id,pkg:r}):N({id:c.id,pkg:r}))},loading:g||x,colorway:C?"red":void 0,variant:C?"outlined":void 0,iconLeft:(0,s.tZ)(V,{isInstalled:C,isInQueue:x,isCurrentAction:g})}),x?(0,s.tZ)(_.zx,{css:j.cancelButton,text:"Cancel",onClick:function(){r.name&&X(r.name)},disabled:g,loading:g}):null]})})]})}function $(e){var t=e.pkg,n=e.openConsole;return(0,s.tZ)(Y,{pkg:t,openConsole:n})}var K=n(65034),Q=n(47136),ee=n(26153),et=n(52589),en=n(23261),er=n(53904),ei=n(27069),eo=n(16832),ea=(0,I.X)({root:[A.l0.flex.column,A.l0.flex.growAndShrink(1)],headerRoot:[A.l0.border({color:A.TV.outlineDimmest,width:1,direction:"bottom"})],header:[A.l0.width("100%"),A.l0.maxWidth(eo.YO),A.l0.colWithGap(8),A.l0.p(8),{margin:"0 auto"},A.l0.rowWithGap(8),A.l0.p(8),A.l0.align.center],searchInput:[A.l0.flex.growAndShrink(1)],select:[A.l0.minWidth(160)],resultsRoot:[A.l0.flex.growAndShrink(1),A.l0.overflow("auto")],resultsScroller:[A.l0.width("100%"),A.l0.maxWidth(600),A.l0.flex.growAndShrink(1),A.l0.p(8),{margin:"0 auto"},A.l0.overflow("auto")],results:[A.l0.colWithGap(8)],result:[A.l0.flex.row,A.l0.align.center,A.l0.justify.spaceBetween],resultMetadata:[A.l0.rowWithGap(8)]});function el(e){var t,n,o=e.query,a=e.openConsole,u=(0,l._)((0,y.useState)([]),2),d=u[0],f=u[1],h=(0,y.useRef)(0),p=(0,l._)((0,y.useState)(!1),2),Z=p[0],x=p[1],C=(t=(0,g.Z)(),n=(0,w.Bm)(),(0,y.useCallback)(function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n();return(null==o?void 0:o.id)?(0,b.C)(o.id).search((0,i._)({id:o.id,query:e,services:t},r)):[]},[]));return((0,y.useEffect)(function(){if(""===o.trim()){f([]);return}x(!0)},[o]),(0,v.Z)(function(){var e,t=++h.current;(e=(0,r._)(function(){var e;return(0,c.Jh)(this,function(n){switch(n.label){case 0:return[4,C(o)];case 1:return e=n.sent(),t===h.current&&(f(e),x(!1)),[2]}})}),function(){return e.apply(this,arguments)})()},[o],500),Z)?(0,s.tZ)(eo.Gu,{}):0===d.length?(0,s.tZ)(eo.ub,{children:o?"No results were found.":"Start typing above to see results."}):(0,s.tZ)(m.G,{css:ea.results,children:d.map(function(e){return(0,s.tZ)($,{pkg:e,openConsole:a},e.name)})})}function ec(e){return e.length>0&&p()(e)}function es(e){var t,n,r,i,o,a=e.query,l=(0,ei.Z)(),c=(0,er._)().modules,d=(0,y.useMemo)(function(){return new Set(null==c?void 0:c.map(function(e){return e.id}))},[c]),h=(n=(t={modules:null!==(o=null==l?void 0:l.fullModules)&&void 0!==o?o:[],query:a}).modules,r=t.query,i=(0,y.useMemo)(function(){return new u.Av(n,{selector:function(e){return e.name},tiebreakers:[function(e,t){var n=2===e.item.displayVersion.split(".").length?"".concat(e.item.displayVersion,".0"):e.item.displayVersion,r=2===t.item.displayVersion.split(".").length?"".concat(t.item.displayVersion,".0"):t.item.displayVersion;return ec(n)||ec(r)?!ec(r)&&ec(n)?1:!ec(n)&&ec(r)||f()(n,r)?-1:f()(r,n)?1:0:0}]})},[n]),(0,y.useMemo)(function(){return r?i.find(r).map(function(e){return e.item}):n},[i,n,r]));return 0===h.length?(0,s.tZ)(eo.ub,{children:a?"No results were found.":"Start typing above to see results."}):(0,s.tZ)(m.G,{css:ea.results,children:h?h.map(function(e){var t="".concat(e.id,"-").concat(e.resolutionPath,"-").concat(e.version),n=d.has(e.id);return(0,s.tZ)(m.G,{css:ea.result,children:(0,s.tZ)(ee.Z,{module:e,isInstalled:n,defaultExpanded:!1})},t)}):null})}function eu(e){var t=e.onBack,n=e.initialQuery,r=e.setQuery,i=e.categories,o=e.category,a=e.setCategory,c=e.children,u=e.disableCategorySelection,d=e.searchPlaceholder,f=(0,l._)((0,y.useState)(null!=n?n:""),2),h=f[0],p=f[1],v=(0,y.useDeferredValue)(h);return(0,y.useEffect)(function(){r(v)},[v,r]),(0,s.BX)(m.G,{css:ea.root,children:[(0,s.tZ)(m.G,{css:ea.headerRoot,children:(0,s.BX)(m.G,{css:ea.header,children:[(0,s.tZ)(Z.hU,{alt:"Back",onClick:function(){return t()},children:(0,s.tZ)(x.Z,{})}),!u&&i&&i.length>0?(0,s.tZ)(K.P,{items:i,css:ea.select,"aria-label":"Change search context",selectedKey:o,onSelectionChange:function(e){var t=null==i?void 0:i.find(function(t){return t.value===e});if(!t)throw Error("Expected config");p(""),a(t.value)},children:function(e){return(0,s.tZ)(Q.m9,{id:e.value,label:e.label})}}):null,(0,s.tZ)(m.G,{css:ea.searchInput,children:(0,s.tZ)(C.E,{value:h,onChange:function(e){p(e.target.value)},onClear:function(){return p("")},placeholder:void 0===d?"Search packages...":d,autoFocus:!0})})]})}),(0,s.tZ)(m.G,{css:ea.resultsRoot,children:(0,s.tZ)(m.G,{css:ea.resultsScroller,children:c})})]})}function ed(e){var t=e.onBack,n=e.initialCategory,r=e.openConsole,c=(0,a._)(e,["onBack","initialCategory","openConsole"]),u=(0,k.I)().configs,d=(0,l._)((0,y.useState)(""),2),f=d[0],h=d[1],p=(0,y.useMemo)(function(){return u.filter(function(e){return"nix"!==e.id}).map(function(e){return{value:e.id,label:e.name.replace(/\s*packager\s*.*$/,"")}})},[u]),m=(0,l._)((0,y.useState)(null!=n?n:p[0].value),2),v=m[0],g=m[1],b=(0,y.useMemo)(function(){return u.find(function(e){return e.id===v})},[v,u]);return(0,s.tZ)(eu,(0,o._)((0,i._)({categories:p,initialQuery:f,setQuery:h,onBack:t,setCategory:function(e){h(""),g(e)},category:v},c),{children:(0,s.tZ)(S.Z,{config:b,children:(0,s.tZ)(el,{query:f,openConsole:r})})}))}var ef=[{value:"Modules",label:"Modules"},{value:"Packages",label:"Packages"}];function eh(e){var t=e.onBack,n=e.initialCategory,r=void 0===n?ef[0].value:n,c=e.openConsole,u=(0,a._)(e,["onBack","initialCategory","openConsole"]),d=(0,k.I)().configs,f=(0,y.useMemo)(function(){return d.find(function(e){return"nix"===e.id})},[d]),h=(0,l._)((0,y.useState)(""),2),p=h[0],m=h[1],v=(0,l._)((0,y.useState)(r),2),g=v[0],b=v[1];return((0,en.L)(et.U3.NIX_MODULE_SEARCH_VIEWED,{},function(){return"Modules"===g},[]),(0,en.L)(et.U3.NIX_MODULE_SEARCH_USED,{query:p},function(){return!!(p&&"Modules"===g)},[p]),f)?(0,s.tZ)(eu,(0,o._)((0,i._)({categories:ef,initialQuery:p,setQuery:m,onBack:t,setCategory:function(e){m(""),b(e)},category:g,searchPlaceholder:"Modules"===g?"Search modules...":void 0},u),{children:"Packages"===g?(0,s.tZ)(S.Z,{config:f,children:(0,s.tZ)(el,{query:p,openConsole:c})}):(0,s.tZ)(es,{query:p})})):null}},16832:function(e,t,n){n.d(t,{Gu:function(){return u},YO:function(){return c},_:function(){return f},ub:function(){return d}});var r=n(3796),i=n(93245),o=n(36809),a=n(10578),l=n(63163),c=600,s=(0,o.X)({overviewPane:[l.l0.p(12),l.l0.flex.column,l.l0.gap(24),l.l0.width("100%"),l.l0.maxWidth(c),{margin:"0 auto"}],loading:[l.l0.center,l.l0.flex.growAndShrink(1)],emptyState:[l.l0.center,l.l0.flex.growAndShrink(1)]}),u=function(){return(0,r.tZ)(i.G,{css:s.loading,children:(0,r.tZ)(a.Z,{})})},d=function(e){var t=e.children;return(0,r.tZ)(i.G,{css:s.emptyState,children:t})},f=function(e){var t=e.children;return(0,r.tZ)(i.G,{css:s.overviewPane,children:t})}},49295:function(e,t,n){n.d(t,{Z:function(){return h}});var r=n(3796),i=n(40490),o=n(58532),a=n(24766),l=n(93245),c=n(63163),s=n(9834),u=n.n(s),d=n(7391),f=n(68140);function h(){var e=(0,d.useRouter)(),t=(0,i.Wd)("didMigrateToNix","boolean");return(0,r.tZ)(o.u,{isOpen:t,onRequestClose:function(){(0,i.pg)({router:e,params:[{mode:"delete",key:"didMigrateToNix"}]})},centered:!0,children:(0,r.BX)(l.G,{css:[c.l0.colWithGap(16)],children:[(0,r.tZ)(a.h4,{level:1,variant:"headerDefault",children:"We've upgraded your Repl!"}),(0,r.BX)(a.xv,{children:["Your Repl is now using"," ",(0,r.tZ)(u(),{legacyBehavior:!0,href:"https://blog.replit.com/nix",children:"the latest infrastructure"})," ","which unlocks powerful new features."]}),(0,r.BX)(l.K.ul,{css:c.l0.colWithGap(4),children:[(0,r.tZ)(l.K.li,{children:(0,r.BX)(a.xv,{children:[""," ",(0,r.tZ)(u(),{legacyBehavior:!0,href:f.TT.DEPENDENCY_MANAGEMENT,children:"Use 80,000+ system dependencies"})," ","(linux packages) out of the box."]})}),(0,r.tZ)(l.K.li,{children:(0,r.BX)(a.xv,{children:[""," ",(0,r.tZ)(u(),{legacyBehavior:!0,href:"https://docs.replit.com/replit-workspace/configuring-repl",children:"Configure your Repl"})," ","with more capabilities."]})}),(0,r.tZ)(l.K.li,{children:(0,r.BX)(a.xv,{children:[""," ",(0,r.tZ)(u(),{legacyBehavior:!0,href:f.TT.DEPENDENCY_MANAGEMENT,children:"Check out this doc"})," ","for a deep dive."]})})]}),(0,r.BX)(a.xv,{variant:"small",css:{fontStyle:"italic"},children:["Any overwritten files have been backed up to the same file name with a .backup suffix. If you have any questions, please use"," ",(0,r.tZ)(u(),{legacyBehavior:!0,href:"https://ask.replit.com",children:"ask.replit.com"})," ","to get help."]}),(0,r.tZ)(a.xv,{multiline:!1,children:"Thank you for your patience"})]})})}},58655:function(e,t,n){n.d(t,{v:function(){return y}});var r=n(66626),i=n(3796),o=n(75271),a=n(79904),l=n(36809),c=n(58532),s=n(24766),u=n(63163),d=n(93245),f=n(65117),h=n(14495),p=n(28754),m=n(23882),v=(0,l.X)({container:[u.l0.colWithGap(8)],splitContainer:[u.l0.rowWithGap(8),u.l0.justify.spaceBetween,u.l0.mt(8)],group:[u.l0.rowWithGap(8)],text:[u.l0.mt(8)]}),g=function(){var e=(0,r._)((0,o.useState)(navigator.onLine),2),t=e[0],n=e[1];return(0,o.useEffect)(function(){var e=function(){n(navigator.onLine)};return window.addEventListener("online",e),window.addEventListener("offline",e),function(){window.removeEventListener("online",e),window.removeEventListener("offline",e)}},[]),t},y=function(){var e=(0,m.Z)().container,t=(0,r._)((0,o.useState)(!1),2),n=t[0],l=t[1],u=(0,o.useRef)(!1),y=(0,f.Z)(e),b=(0,o.useMemo)(function(){return y===p.em.CONNECTED},[y]),w=(0,h.d)(),Z=g(),x=(0,o.useCallback)(function(){l(!1)},[]),C=(0,o.useCallback)(function(){location.reload()},[]);return(0,o.useEffect)(function(){if(!u.current&&!b&&w&&Z){var e=setTimeout(function(){l(!0),u.current=!0},6e4);return function(){return clearTimeout(e)}}},[b,w,Z]),(0,i.tZ)(c.u,{isOpen:n,onRequestClose:x,maxWidth:360,centered:!0,children:(0,i.BX)(d.G,{css:v.container,children:[(0,i.tZ)(s.h4,{level:2,variant:"subheadBig",children:"You are disconnected"}),(0,i.tZ)(s.xv,{css:v.text,children:"Your connection to the server has been lost and reconnection attempts have failed. Please refresh the page to continue."}),(0,i.BX)(d.G,{css:v.splitContainer,children:[(0,i.tZ)(a.zx,{text:"Cancel",onClick:x}),(0,i.tZ)(d.G,{css:v.group,children:(0,i.tZ)(a.zx,{text:"Refresh",onClick:C,colorway:"blue"})})]})]})})}},64627:function(e,t,n){n.d(t,{Z:function(){return v},e:function(){return y}});var r=n(41733),i=n(98924),o=n(3796),a=n(79904),l=n(14548),c=n(24766),s=n(93245),u=n(36809),d=n(33323),f=n(63163),h=n(35370),p=n(23522),m=(0,u.X)({code:[f.l0.font.code,f.l0.flex.grow(1)],surface:[f.l0.borderRadius(8),f.l0.p(8),f.l0.flex.row,f.l0.rowWithGap(8),f.l0.align.center]});function v(e){var t=y(e.filePath,e.keyName);if(!t)return null;var n=t.import,i=t.access;return(0,o.BX)(s.G,{css:f.l0.colWithGap(8),children:[n?(0,o.tZ)(g,(0,r._)({code:n},e)):null,(0,o.tZ)(g,(0,r._)({code:i},e))]})}function g(e){var t=e.code,n=e.onInsert,r=(0,i._)(e,["code","onInsert"]);return(0,o.BX)(l.Tg,{elevated:r.elevated,css:m.surface,children:[(0,o.tZ)(p.m,{textToCopy:t}),(0,o.tZ)(c.xv,{variant:"small",css:m.code,multiline:!1,children:t}),n?(0,o.tZ)(a.zx,{variant:"outlined",size:"small",onClick:function(){return n(t)},text:"Insert",iconRight:(0,o.tZ)(d.Z,{})}):null]})}function y(e,t){if(!e)return null;switch((0,h.r6)(e)){case"js":case"ts":case"jsx":case"tsx":return{import:null,access:"const mySecret = process.env['".concat(t,"']")};case"py":return{import:"import os",access:"my_secret = os.environ['".concat(t,"']")};case"go":return{import:'import "os"',access:'mySecret := os.Getenv("'.concat(t,'")')};case"java":case"scala":return{import:null,access:'System.getenv("'.concat(t,'")')};case"rb":return{import:null,access:'ENV["'.concat(t,'"]')};case"c":case"cpp":return{import:"#include <stdlib.h>",access:'char* mySecret = getenv("'.concat(t,'")')};case"cs":return{import:"using System;",access:'string mySecret = System.Environment.GetEnvironmentVariable("'.concat(t,'");')};case"sh":return{import:null,access:'"$'.concat(t,'"')};default:return null}}},74492:function(e,t,n){n.d(t,{$M:function(){return eg},u_:function(){return eZ},BH:function(){return ex},ZP:function(){return eT}});var r=n(27387),i=n(41733),o=n(30509),a=n(66626),l=n(96583),c=n(3796),s=n(62279),u=n(25722),d=n(36200),f=n(99595),h=n(79685),p=n(83059),m=n(82973),v=n(96949),g=n(79904),y=n(39808),b=n(23522),w=n(91466),Z=n(9602),x=n(44935),C=n(58532),k=n(14548),S=n(24766),_=n(22419),E=n(93245),T=n(36809),R=n(11006),D=n(89313),I=n(16865),B=n(61010),G=n(39031),P=n(10578),A=n(30043),L=n(19602),N=n(63163),O=n(92943),U=n(1053),X=n(96214),M=n(12394),F=n(9834),W=n.n(F);function V(){return(0,c.tZ)(M.Z,{pane:{type:"envEditor"},bodyText:(0,c.BX)(c.HY,{children:[(0,c.tZ)("code",{children:"HTML/CSS/JS"})," Repls don't support secrets since they are statically hosted.",(0,c.tZ)("br",{}),(0,c.tZ)(W(),{href:"https://docs.replit.com/replit-workspace/workspace-features/secrets",target:"_blank",rel:"noopener",children:"Visit the secrets documentation to learn more."})]})})}function H(){return(0,c.tZ)(M.Z,{pane:{type:"envEditor"},bodyText:(0,c.tZ)(W(),{href:"https://docs.replit.com/replit-workspace/workspace-features/secrets#handling-secrets-in-a-collaborative-environment",target:"_blank",rel:"noopener",children:"Learn how Replit keeps your Secrets safe."})})}var z=n(64627),j=n(12379),q=n(42306),J=n(75271),Y=n(70989),$=n(92191),K=n(3030),Q=n(91166),ee=n(11515),et=n(22893),en=n(27840),er=n(22436),ei=n(64206),eo=n(70625),ea=v.U3.ENV_EDITOR_USED;function el(e){var t,n=e.secrets,i=e.update,o=(0,a._)((0,J.useState)(!1),2),s=o[0],d=o[1],f=(0,a._)((0,J.useState)(!1),2),h=f[0],p=f[1],m=(0,a._)((0,J.useState)(!1),2),y=m[0],b=m[1],w=(0,a._)((0,J.useState)(0),2),Z=w[0],x=w[1],_=0===Z,T=(0,J.useRef)();T.current||(T.current=(0,$.ir)(function(e){var t=ec(e.state.doc.toString());return x(t),0!==t?(0,v.j)(ea,{action:"rawEditorUpdatedError"}):(0,v.j)(ea,{action:"rawEditorUpdated"}),[]}));var R=(0,ee.Z)(),D=R.ref,I=R.view,B=function(){h||d(!1)},G=function(){b(!1),d(!0),(0,v.j)(ea,{action:"rawEditorOpened"})},P=function(){if(!I)return!1;var e=ec(I.state.doc.toString());return x(e),0===e},A=(t=(0,r._)(function(){var e;return(0,l.Jh)(this,function(t){switch(t.label){case 0:if(!I||!P())return[2];p(!0),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,i(JSON.parse(I.state.doc.toString()))];case 2:return t.sent(),p(!1),b(!0),setTimeout(function(){B(),setTimeout(function(){b(!1)},500)},500),[3,4];case 3:return e=t.sent(),u.Tb(e),(0,v.j)(ea,{action:"rawEditorUpdatedError"}),x(3),p(!1),[3,4];case 4:return[2]}})}),function(){return t.apply(this,arguments)});return(0,J.useEffect)(function(){if(I){var e=JSON.stringify(n,null,2);"{}"===e&&(e="{\n  \n}"),I.dispatch({changes:{from:0,to:I.state.doc.length,insert:e}}),I.dispatch({selection:{anchor:I.state.doc.length-2}}),I.focus()}},[I,n]),(0,c.BX)(c.HY,{children:[(0,c.tZ)(g.zx,{onClick:function(){return G()},text:"Edit as JSON",iconLeft:(0,c.tZ)(er.Z,{}),size:"small"}),(0,c.tZ)(C.u,{isOpen:s,onRequestClose:function(){return B()},children:(0,c.BX)(E.G,{css:[N.l0.colWithGap(24)],children:[(0,c.tZ)(S.h4,{level:1,variant:"headerDefault",children:"Raw Secrets Editor"}),(0,c.tZ)(S.xv,{children:"Secrets are specified in JSON. Values must be strings."}),(0,c.tZ)(k.Tg,{css:[N.l0.borderRadius(8),N.l0.transition.snappy,N.l0.p(4),{border:"1px solid var(--outline-dimmer)",":hover":{borderColor:"var(--outline-stronger)"}}],elevated:!0,children:(0,c.tZ)(Q.ZP,{ref:D,readOnly:h||y,extensions:[T.current,K.$f.of([{key:(0,eo.l2)({cmdOrCtrl:!0,key:"Enter"}),run:function(){return A(),!0},preventDefault:!0,stopPropagation:!0}])],language:"json",hideGutter:!0})}),(0,c.BX)(E.G,{css:[N.l0.rowWithGap(4),N.l0.justify.end],children:[!_&&(0,c.tZ)(et.E,{icon:(0,c.tZ)(ei.Z,{}),colorway:"negative",text:function(e){switch(e){case 1:return"Make sure the data is valid JSON.";case 2:return"Make sure that all values are strings.";case 3:return"There was an error saving the secrets.";default:return""}}(Z)}),(0,c.BX)(E.G,{css:[N.l0.rowWithGap(12)],children:[(0,c.tZ)(g.zx,{onClick:B,text:"Cancel"}),(0,c.tZ)(g.zx,{iconLeft:(0,c.tZ)(en.Z,{}),stretch:!0,colorway:y?"positive":"primary",text:y?"Saved!":"Save",disabled:!_||h||y,onClick:function(){return A()}})]})]})]})})]})}function ec(e){try{var t=JSON.parse(e);for(var n in t)if("string"!=typeof n||"string"!=typeof t[n])return 2;return 0}catch(e){return 1}}var es=n(89774),eu=[{title:"OpenAI",description:"Integrate with GPT-4, DALL-E, Whisper, and more.",pattern:/^OPENAI_.*/,defaultLink:"https://replit.com/guides/gpt-4o-quickstart-guide#set-up-your-openai-api-key",presetSecrets:[{key:"OPENAI_API_KEY"},{key:"OPENAI_ORG_ID"}]},{title:"Gemini",description:"Leverage Google's latest AI models.",pattern:/^(GEMINI_.*|GOOGLE_API_KEY)/,defaultLink:"https://replit.com/guides/gemini-flash-quickstart-guide#set-up-a-google-api-key"},{title:"Groq",description:"Try a variety of AI models with Groq.",pattern:/^GROQ_.*/,defaultLink:"https://replit.com/guides/groq-chatbot-quickstart#set-up-your-groq-api-key"},{title:"Anthropic",description:"Explore Anthropic's latest Claude AI models.",pattern:/^ANTHROPIC_.*/,defaultLink:"https://replit.com/guides/image2text-ai-app-with-anthropic#add-anthropic-api-key-to-secrets"},{title:"Slack",description:"Use Slack to build interactive apps and bots.",pattern:/^SLACK_.*/,defaultLink:"https://replit.com/guides/slackbot-quickstart#add-secrets",presetSecrets:[{key:"SLACK_SIGNING_SECRET"},{key:"SLACK_APP_TOKEN"},{key:"SLACK_BOT_TOKEN"}]},{title:"HubSpot",description:"Use HubSpot's API to pull customer data.",pattern:/^HUBSPOT_.*/,defaultLink:"https://replit.com/guides/hubspot-deal-data-api-python-flask#getting-started"}],ed=(0,s.iv)([N.l0.center,N.l0.coverContainer]),ef=(0,T.X)({root:[N.l0.flex.column,N.l0.flex.grow(1)],header:[N.l0.flex.row,N.l0.rowWithGap(8),N.l0.align.center,N.l0.p(8)],headerTitle:[N.l0.flex.growAndShrink(1)],addSecretContainer:[N.l0.flex.column,N.l0.colWithGap(8),N.l0.py(8)],secretItemEdit:[N.l0.colWithGap(8)],secretItemEditInputs:[N.l0.rowWithGap(8)],secretItem:[N.l0.flex.row,N.l0.rowWithGap(8),N.l0.align.center],accessSecrect:[N.l0.px(8),N.l0.py(16),N.l0.colWithGap(8)],accessSecrectHeader:[N.l0.rowWithGap(8),N.l0.align.center],titleContainer:[N.l0.colWithGap(4),N.l0.width("40%")],titleWithIcon:[N.l0.flex.row,N.l0.rowWithGap(4),N.l0.align.center],valueInput:[N.l0.flex.grow(0),{'&[data-sensitive="true"]':{fontFamily:"text-security-disc"}}]}),eh=["SLACK_API_KEY","GOOGLE_API_KEY","MONGO_API_KEY","FIREBASE_API_KEY"];function ep(e){var t=e.onClose,n=e.onAdd,r=e.otherKeys,l=(0,a._)((0,J.useState)(!0),2),s=l[0],u=l[1],d=(0,a._)((0,J.useState)({key:"",value:""}),2),f=d[0],h=d[1],p=(0,a._)((0,J.useState)(function(){var e=Math.floor(Math.random()*eh.length);return eh[e]}),1)[0],m=f.key.length>0&&!r.includes(f.key);return(0,c.tZ)(c.HY,{children:(0,c.BX)(E.G,{css:ef.addSecretContainer,children:[(0,c.BX)(E.G,{css:N.l0.rowWithGap(8),children:[(0,c.BX)(E.G,{css:ef.titleContainer,children:[(0,c.BX)(E.G,{css:ef.titleWithIcon,children:[(0,c.tZ)(S.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Key"}),(0,c.tZ)(_.u,{tooltip:"Use a descriptive, unique name for your secret key.",delay:"default",children:(0,c.tZ)(G.Z,{})})]}),(0,c.tZ)(x.II,{value:f.key,onChange:function(e){return h((0,o._)((0,i._)({},f),{key:e.target.value}))},autoFocus:!0,placeholder:p,autoComplete:"off"}),r.includes(f.key)?(0,c.BX)(S.xv,{multiline:!1,variant:"small",css:N.l0.color.accentNegativeDefault,children:['Secret "',f.key,'" already exists']}):null]}),(0,c.BX)(E.G,{css:[N.l0.colWithGap(4),N.l0.flex.growAndShrink(1)],children:[(0,c.BX)(E.G,{css:[N.l0.flex.row,N.l0.rowWithGap(4),N.l0.align.center],children:[(0,c.tZ)(S.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Value"}),(0,c.tZ)(Z.hU,{alt:"Toggle Visibility",tooltipBehavior:"hidden",onClick:function(){return u(!s)},size:18,children:s?(0,c.tZ)(I.Z,{}):(0,c.tZ)(B.Z,{})})]}),(0,c.tZ)(x.II,{value:f.value,onChange:function(e){return h((0,o._)((0,i._)({},f),{value:e.target.value}))},"data-sensitive":s,css:ef.valueInput,autoComplete:"off",placeholder:"Value"})]})]}),(0,c.BX)(E.G,{css:[N.l0.rowWithGap(8),N.l0.justify.end],children:[(0,c.tZ)(g.zx,{size:"small",text:"Cancel",onClick:function(){return t()}}),(0,c.tZ)(g.zx,{size:"small",text:"Add Secret",colorway:"primary",disabled:!m,onClick:function(){n({key:f.key.trim(),value:f.value}),h({key:"",value:""})}})]})]})})}var em=[N.l0.flex.row,N.l0.rowWithGap(8),N.l0.align.center],ev=(0,T.X)({root:[N.l0.height("100%"),N.l0.borderRadius(8),{'& [aria-haspopup="listbox"]':[N.l0.height(32)]}],item:em,itemDanger:[em,{color:N.TV.accentNegativeStronger}]});function eg(e){var t=e.onEdit,n=e.onDelete,r=e.onSearch;return(0,c.tZ)(k.Tg,{elevated:!0,css:ev.root,children:(0,c.tZ)(d.Z,{label:"Options",items:[{label:(0,c.BX)(E.G,{css:ev.item,children:[(0,c.tZ)(D.Z,{}),(0,c.tZ)(S.xv,{multiline:!1,children:"Edit"})]}),onClick:t},r&&{label:(0,c.BX)(E.G,{css:ev.item,children:[(0,c.tZ)(es.Z,{}),(0,c.tZ)(S.xv,{multiline:!1,children:"Find Usages"})]}),onClick:r},{label:(0,c.BX)(E.G,{css:ev.itemDanger,children:[(0,c.tZ)(L.Z,{}),(0,c.tZ)(S.xv,{multiline:!1,children:"Delete"})]}),isDescructive:!0,onClick:n}].filter(Boolean),onItemClick:function(e){var t;return null===(t=e.onClick)||void 0===t?void 0:t.call(e)}})})}var ey=[N.l0.p(4),N.l0.rowWithGap(4),N.l0.borderRadius(8)],eb=(0,T.X)({root:[ey,N.l0.width("40%"),N.l0.display.flex,N.l0.overflowX("hidden")],text:[N.l0.flex.growAndShrink(1)]}),ew=(0,T.X)({root:[ey,N.l0.flex.growAndShrink(1)],text:[N.l0.flex.growAndShrink(1),N.l0.truncate,{fontFamily:N.TV.fontFamilyCode}]});function eZ(e){var t=e.value;return(0,c.BX)(k.Tg,{elevated:!0,css:eb.root,children:[(0,c.tZ)(b.m,{tooltipText:"Copy secret",textToCopy:t}),(0,c.tZ)(_.u,{tooltip:(0,c.tZ)(S.xv,{children:t}),children:function(e,n){return(0,c.tZ)(S.xv,(0,o._)((0,i._)({ref:n},e),{multiline:!1,css:eb.text,children:t}))}})]})}function ex(e){var t=e.value,n=(0,a._)((0,J.useState)(!1),2),r=n[0],i=n[1];return(0,c.BX)(k.Tg,{elevated:!0,css:ew.root,children:[(0,c.tZ)(b.m,{tooltipText:"Copy secret",textToCopy:t}),(0,c.tZ)(S.xv,{multiline:!1,css:ew.text,children:r?t:"".repeat(t.length)}),(0,c.tZ)(Z.hU,{alt:"Toggle Secret",tooltipBehavior:"hidden",onClick:function(){return i(!r)},children:r?(0,c.tZ)(B.Z,{}):(0,c.tZ)(I.Z,{})})]})}function eC(e){var t=(0,a._)((0,J.useState)(""===e.secret.value?{key:e.secret.key,value:""}:null),2),n=t[0],r=t[1],l=(0,a._)((0,J.useState)(!1),2),s=l[0],u=l[1],d=(0,a._)((0,J.useState)(!0),2),f=d[0],h=d[1],p=e.secret,m=(0,J.useMemo)(function(){var e,t,r,i,o,a;return t=null!==(e=null==n?void 0:n.key)&&void 0!==e?e:p.key,null!==(i=null==(a=null==(o=eu.find(function(e){return e.pattern.test(t)}))?void 0:null===(r=o.presetSecrets)||void 0===r?void 0:r.find(function(e){return e.key===t}))?void 0:a.link)&&void 0!==i?i:null==o?void 0:o.defaultLink},[null==n?void 0:n.key,p.key]);if(n&&!e.readOnly){var v,y=e.onDeleteSecret,b=e.onUpdateSecret;return(0,c.BX)(c.HY,{children:[(0,c.BX)(E.G,{css:ef.secretItemEdit,children:[(0,c.BX)(E.G,{css:ef.secretItemEditInputs,children:[(0,c.BX)(E.G,{css:[N.l0.colWithGap(2),N.l0.width("40%")],children:[(0,c.tZ)(S.xv,{multiline:!1,css:[N.l0.pt(2),N.l0.pb(4)],variant:"small",color:"dimmer",children:"Key"}),(0,c.tZ)(E.G,{children:(0,c.tZ)(x.II,{value:null!==(v=null==n?void 0:n.key)&&void 0!==v?v:"",onChange:function(e){return r(function(t){return t?(0,o._)((0,i._)({},t),{key:e.target.value}):t})},placeholder:"SECRET_KEY",autoComplete:"off"})})]}),(0,c.BX)(E.G,{css:[N.l0.flex.growAndShrink(1),N.l0.colWithGap(2)],children:[(0,c.BX)(E.G,{css:[N.l0.flex.row,N.l0.rowWithGap(4),N.l0.align.center],children:[(0,c.tZ)(S.xv,{multiline:!1,css:[N.l0.pt(2),N.l0.pb(4)],variant:"small",color:"dimmer",children:"Value"}),(0,c.tZ)(Z.hU,{alt:"Toggle Visibility",tooltipBehavior:"hidden",onClick:function(){return h(!f)},children:f?(0,c.tZ)(I.Z,{}):(0,c.tZ)(B.Z,{})})]}),(0,c.BX)(E.G,{children:[(0,c.tZ)(x.II,{value:n.value,"data-sensitive":f,css:ef.valueInput,onChange:function(e){return r(function(t){return t?(0,o._)((0,i._)({},t),{value:e.target.value}):t})}}),m?(0,c.tZ)(S.xv,{variant:"small",children:(0,c.tZ)("a",{href:m,target:"_blank",children:"Where do I find this?"})}):null]})]})]}),(0,c.BX)(E.G,{css:[N.l0.flex.row,N.l0.rowWithGap(8)],children:[(0,c.tZ)(g.zx,{size:"small",text:"Delete",colorway:"negative",onClick:function(){return u(!0)}}),(0,c.tZ)(E.G,{css:N.l0.flex.grow(1)}),(0,c.tZ)(g.zx,{size:"small",text:"Cancel",onClick:function(){return r(null)}}),(0,c.tZ)(g.zx,{size:"small",colorway:"primary",text:""===e.secret.value?"Add Secret":"Update Secret",disabled:!(null==n?void 0:n.key.length),onClick:function(){n&&(b(p.key,{key:n.key.trim(),value:n.value}),r(null))}})]})]}),(0,c.tZ)(C.u,{isOpen:s,onRequestClose:function(){return u(!1)},children:(0,c.BX)(E.G,{children:[(0,c.BX)(S.xv,{variant:"subheadDefault",multiline:!1,children:["Delete ",p.key,"?"]}),(0,c.tZ)(S.xv,{color:"dimmer",multiline:!1,children:"Are you sure you would like to delete this secret? This cannot be undone."}),(0,c.BX)(E.G,{css:[N.l0.justify.end,N.l0.flex.row,N.l0.rowWithGap(8)],children:[(0,c.tZ)(g.zx,{text:"Cancel",onClick:function(){return u(!1)}}),(0,c.tZ)(g.zx,{text:"Delete",colorway:"negative",onClick:function(){return y(p.key)}})]})]})})]})}return(0,c.BX)(E.G,{css:ef.secretItem,children:[(0,c.tZ)(eZ,{value:p.key}),(0,c.tZ)(ex,{value:p.value}),e.readOnly?null:(0,c.BX)(c.HY,{children:[(0,c.tZ)(E.G,{children:(0,c.tZ)(eg,{onEdit:function(){return r(p)},onDelete:function(){return u(!0)},onSearch:function(){return e.onSearchSecret(p.key)}})}),(0,c.tZ)(C.u,{isOpen:s,onRequestClose:function(){return u(!1)},children:(0,c.BX)(E.G,{css:[N.l0.colWithGap(24)],children:[(0,c.BX)(S.xv,{multiline:!1,variant:"headerDefault",children:["Delete ",p.key,"?"]}),(0,c.tZ)(S.xv,{color:"dimmer",multiline:!1,children:"Are you sure you would like to delete this secret? This cannot be undone."}),(0,c.BX)(E.G,{css:[N.l0.justify.end,N.l0.flex.row,N.l0.rowWithGap(12)],children:[(0,c.tZ)(g.zx,{text:"Cancel",onClick:function(){return u(!1)}}),(0,c.tZ)(g.zx,{iconLeft:(0,c.tZ)(L.Z,{}),text:"Yes, delete secret",colorway:"negative",onClick:function(){return e.onDeleteSecret(p.key)}})]})]})})]})]})}var ek=(0,T.X)({container:[N.l0.colWithGap(8),N.l0.py(8)],blankSecretsContainer:[N.l0.colWithGap(8),N.l0.px(8)],nonBlankSecretsContainer:[N.l0.colWithGap(8),N.l0.px(8)],list:[N.l0.colWithGap(8)]});function eS(e){var t=e.secrets,n=e.onUpdateSecret,r=e.onDeleteSecret,i=e.onAddSecret,o=e.showAddSecret,l=e.onSearch,s=e.onClose,u=Object.entries(t).filter(function(e){var t=(0,a._)(e,2);return""===(t[0],t[1])}),d=Object.entries(t).filter(function(e){var t=(0,a._)(e,2);return""!==(t[0],t[1])});return(0,c.BX)(E.G,{css:ek.container,children:[0!==u.length&&(0,c.BX)(c.HY,{children:[(0,c.BX)(E.G,{css:ek.blankSecretsContainer,children:[(0,c.tZ)(S.xv,{variant:"subheadDefault",multiline:!1,children:"Configure missing Secret values"}),(0,c.tZ)(S.xv,{variant:"small",children:"This Repl contains Secrets that might be required. Add values to ensure the code runs as expected."}),(0,c.tZ)(E.G,{css:ek.list,children:u.map(function(e){var t=(0,a._)(e,2),i=t[0],o=t[1];return(0,c.tZ)(eC,{secret:{key:i,value:o},onUpdateSecret:n,onDeleteSecret:r,onSearchSecret:function(){}},i)})})]}),(0,c.tZ)(w.R,{})]}),(0,c.BX)(E.G,{css:ek.nonBlankSecretsContainer,children:[o?(0,c.tZ)(ep,{onClose:s,onAdd:i,otherKeys:Object.keys(t)}):null,d.map(function(e){var t=(0,a._)(e,2),i=t[0],o=t[1];return(0,c.tZ)(eC,{secret:{key:i,value:o},onUpdateSecret:n,onDeleteSecret:r,onSearchSecret:l},i)})]})]})}function e_(e){var t=e.secrets,n=e.activeFile,r=(0,a._)((0,J.useState)(Object.keys(t)[0]),2),i=r[0],o=r[1];return(0,j.Z)(n)&&(0,z.e)(n,i)&&0!==Object.keys(t).length?(0,c.BX)(E.G,{css:ef.accessSecrect,children:[(0,c.BX)(E.G,{css:ef.accessSecrectHeader,children:[(0,c.tZ)(S.xv,{multiline:!1,children:"Access secret"}),(0,c.tZ)(X.P,{css:N.l0.minWidth(48),items:Object.keys(t).map(function(e){return{title:e}}),selectedItem:{title:i},onChange:function(e){return o(e.title)}})]}),(0,c.tZ)(z.Z,{elevated:!0,keyName:i,filePath:n})]}):null}function eE(e,t){var n=(0,i._)({},e);return"add"===t.type?n[t.key]=t.value:"update"===t.type?(delete n[t.oldKey],n[t.key]=t.value):delete n[t.key],n}function eT(e){var t,n,o,s,d,b=e.watchEnv,Z=e.readRawEnv,x=e.writeRawEnv,C=e.getRunState,k=e.performPaneOperation,_=(0,h.T)(),T=(0,q.R3)(),D=(0,a._)((0,J.useState)(null),2),I=D[0],B=D[1],G=(0,a._)((0,J.useState)(!1),2),L=G[0],N=G[1],X=function(){N(!1)},M=(0,O.Z)();(0,J.useEffect)(function(){(0,v.Cn)(v.U3.ENV_EDITOR_USED,{action:"opened"}),m.Z.set("enveditortour",!0)},[]),(0,J.useEffect)(function(){var e=b(function(e){B(Object.fromEntries(e))});return function(){e()}},[Z,B,b]);var F=(0,J.useRef)(null),W=(0,J.useRef)([]),z=(t=(0,r._)(function(e){var t,n,r,i,o,a;return(0,l.Jh)(this,function(a){switch(a.label){case 0:if(!I)throw Error("trying to write secrets before loading");B(t=eE(I,e)),W.current.push(e),n=Math.random(),F.current=n,i=null,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,Z()];case 2:return i=a.sent(),[3,4];case 3:return o=a.sent(),u.Tb(Error("Error reading secrets: "+(null==o?void 0:o.message))),[3,4];case 4:if(F.current!==n)return[2];return i?(r=Object.fromEntries(Y.Z.parse(i)),W.current.forEach(function(e){r=eE(r,e)}),B(r)):r=t,W.current=[],[4,x(Y.Z.serialize(r))];case 5:return a.sent(),[2]}})}),function(e){return t.apply(this,arguments)}),j=(0,f.Z)().showConfirm,$=(n=(0,r._)(function(e){return(0,l.Jh)(this,function(t){return(0,v.j)(v.U3.ENV_EDITOR_USED,{action:"created",multiline:e.value.includes("\n")}),z((0,i._)({type:"add"},e)),C()===U.Ah.RUNNING&&j("Re-run your Repl to use this secret"),X(),[2]})}),function(e){return n.apply(this,arguments)}),K=(o=(0,r._)(function(e,t){return(0,l.Jh)(this,function(n){return(0,v.j)(v.U3.ENV_EDITOR_USED,{action:"updated",multiline:t.value.includes("\n")}),z((0,i._)({type:"update",oldKey:e},t)),[2]})}),function(e,t){return o.apply(this,arguments)}),Q=(s=(0,r._)(function(e){return(0,l.Jh)(this,function(t){return(0,v.j)(v.U3.ENV_EDITOR_USED,{action:"deleted"}),z({type:"delete",key:e}),[2]})}),function(e){return s.apply(this,arguments)}),ee=(0,p.Z)(function(){return I&&Object.keys(I).length>0},[I]);return _?(0,c.tZ)(V,{}):I&&M?(0,c.BX)(E.G,{css:ef.root,children:[(0,c.BX)(E.G,{css:ef.header,children:[(0,c.tZ)(S.xv,{css:ef.headerTitle,variant:"subheadDefault",multiline:!1,children:"Secrets"}),(0,c.tZ)(el,{secrets:I,update:(d=(0,r._)(function(e){return(0,l.Jh)(this,function(t){switch(t.label){case 0:return B(e),[4,x(Y.Z.serialize(e))];case 1:return t.sent(),[2]}})}),function(e){return d.apply(this,arguments)})}),(0,c.tZ)(y.Z,{iconLeft:(0,c.tZ)(R.Z,{}),href:"https://docs.replit.com/replit-workspace/workspace-features/secrets",size:"small",text:"Docs",target:"_blank"}),(0,c.tZ)(g.zx,{iconLeft:(0,c.tZ)(A.Z,{}),text:"New Secret",colorway:"primary",size:"small",onClick:function(){return N(!0)}})]}),(0,c.tZ)(w.R,{}),ee||!1!==L?null:(0,c.tZ)(H,{}),(0,c.tZ)(eS,{secrets:I,onUpdateSecret:K,onDeleteSecret:Q,onAddSecret:$,showAddSecret:L,onSearch:function(e){return k({operation:"open",pane:{type:"searchReplace",data:{initialQuery:e}}})},onClose:X}),T&&ee?(0,c.tZ)(e_,{secrets:I,activeFile:T}):null]}):(0,c.tZ)(E.G,{css:ed,children:(0,c.tZ)(P.Z,{size:24})})}},97933:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(27387),i=n(66626),o=n(96583),a=n(23882),l=n(75271);function c(){var e=(0,a.Z)().secrets,t=(0,i._)((0,l.useState)(!1),2),n=t[0],c=t[1];return(0,l.useEffect)(function(){var t=!1;function n(){return(n=(0,r._)(function(){var n,r,i,a,l,s,u;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return[4,e.read()];case 1:if(n=o.sent(),t)return[2];r=!0,i=!1,a=void 0;try{for(l=n.values()[Symbol.iterator]();!(r=(s=l.next()).done);r=!0)if(u=s.value,""===u){c(!0);break}}catch(e){i=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw a}}return[2]}})})).apply(this,arguments)}return function(){n.apply(this,arguments)}(),function(){t=!0}},[e]),n}},99319:function(e,t,n){n.d(t,{VY:function(){return U},HK:function(){return M},h4:function(){return B},Qc:function(){return P},LI:function(){return N},H4:function(){return F},$E:function(){return X},Mp:function(){return W}});var r=n(27387),i=n(96583),o=n(3796),a=n(62279),l=n(83059),c=n(54505),s=n(35370);function u(){return(u=(0,r._)(function(e,t){var n,r,o,a,l;return(0,i.Jh)(this,function(i){return n=(0,s.yC)(e),r=(0,s.UO)(e),o=new Blob([t.toBuffer()],{type:n}),(a=document.createElement("a")).download=r,l=window.URL.createObjectURL(o),a.href=l,a.style.display="none",document.body.appendChild(a),a.click(),setTimeout(function(){document.body.removeChild(a),URL.revokeObjectURL(l)},1e4),[2]})})).apply(this,arguments)}var d=n(1252),f=n(93245),h=n(78121),p=n(86201),m=n(6674),v=n(47874),g=n(77402),y=n(19602),b=n(63163),w=n(23882),Z=n(7391),x=n.n(Z),C=n(75271),k=n(77244),S=n(62537),_=n(42306),E=n(6843),T=n(49424),R=n(14118),D=n(73878),I=(0,a.iv)([b.l0.height(28),b.l0.flex.row,b.l0.align.center,{borderBottom:"1px solid ".concat(b.TV.backgroundHigher),opacity:.8,":hover":{opacity:1}}]);function B(e){return"/replEnvironmentDesktop"!==x().pathname?null:(0,o.tZ)(f.G,{css:I,children:e.children})}var G=(0,a.iv)([b.l0.flex.row,b.l0.align.center,b.l0.flex.growAndShrink(1),b.l0.overflowX("auto"),b.l0.height("100%"),{"&::-webkit-scrollbar":{height:0},scrollbarWidth:"none"}]);function P(e){return(0,o.tZ)(f.G,{css:G,children:e.children})}var A=(0,a.iv)([b.l0.flex.row,b.l0.align.center,b.l0.height("100%")]),L=(0,a.iv)([b.l0.flex.row,b.l0.align.center,b.l0.height("100%"),b.l0.px(2)]);function N(e){return(0,o.tZ)(f.G,{css:A,children:(0,o.tZ)(f.G,{css:L,children:e.children})})}var O=(0,a.iv)([b.l0.flex.growAndShrink(1),b.l0.position.relative,b.l0.overflow("hidden"),b.l0.borderRadius(0,0,8,8)]);function U(e){return(0,o.tZ)(f.G,{css:[O,e.children&&b.l0.center],children:e.children})}function X(e){return{type:(0,S.Dp)({path:e}),data:{path:e}}}function M(e){var t=e.path,n=e.performPaneOperation,r=e.children,i=(0,C.useCallback)(function(e){n({operation:"replace",pane:X(e)})},[n]);return(0,o.BX)(B,{children:[(0,o.tZ)(P,{children:(0,o.tZ)(T.tr,{path:t,onFileClick:i})}),r?(0,o.tZ)(N,{children:r}):null]})}function F(e,t){return{match:E.pl,data:{label:"Download",icon:(0,o.tZ)(v.Z,{}),type:"action",run:function(){return(0,r._)(function(){var n;return(0,i.Jh)(this,function(r){switch(r.label){case 0:return[4,t.readFile(e)];case 1:if((n=r.sent()).error)return[2,{type:"error",message:"Error downloading file"}];return[4,function(e,t){return u.apply(this,arguments)}(e,n.content)];case 2:return r.sent(),[2]}})})()}}}}function W(e){var t=e.path,n=e.performPaneOperation,a=(0,w.Z)(),s=(0,_._o)(),u=(0,R.P5)({controlName:"flag-draft-buffers"});return(0,l.Z)(function(){if(!t)return null;var e,l,f,v=[{match:E.pl,data:{label:"Copy file path",icon:(0,o.tZ)(p.Z,{}),type:"action",run:function(){(0,c.Z)(t)}}},{match:E.pl,data:{label:"Copy link",icon:(0,o.tZ)(g.Z,{}),type:"action",run:function(){var e=(0,k.dr)({path:t});(0,c.Z)(e)}}},(e=a.fs,l=function(e){n({operation:"replace",pane:{type:(0,S.Dp)({path:e}),data:{path:e}}})},{match:E.pl,data:{label:"Duplicate file",icon:(0,o.tZ)(m.Z,{}),type:"action",run:function(){return(0,r._)(function(){var n;return(0,i.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,(0,d.Z)(t,e)];case 1:return n=r.sent(),[3,3];case 2:return r.sent(),[2,{type:"error",message:"Error duplicating file"}];case 3:return l(n),[2]}})})()}}}),F(t,a.fs),{match:E.pl,data:{label:"Delete",icon:(0,o.tZ)(y.Z,{color:b.TV.redDefault}),type:"action",run:function(){s(t)}}}];return u&&v.unshift((f=a.fs,{match:E.pl,data:{label:"Save file",icon:(0,o.tZ)(h.Z,{}),type:"action",run:function(){return(0,r._)(function(){return(0,i.Jh)(this,function(e){switch(e.label){case 0:return[4,f.flush(new Set([t]),D.WL.MANUAL_SAVE)];case 1:return e.sent(),[2]}})})()}}})),v},[t,a.fs,n,s,u])}},8629:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(3796),i=n(62279),o=n(25688),a=n(10777),l=n(93245),c=n(63163),s=n(75271),u=n(72106),d=n(97420),f=(0,i.iv)([c.l0.justify.center,c.l0.pl(8),{overflow:"hidden",height:"100%",width:"100%","> svg":{opacity:.5,width:250,display:"flex"}}]);function h(e){var t=e.index,n=32*t+8;return(0,r.BX)(r.HY,{children:[(0,r.tZ)("rect",{x:0,y:n,rx:"3",ry:"3",width:16,height:16}),(0,r.tZ)("rect",{x:28,y:n,rx:"3",ry:"3",width:"".concat(100+(t%2!=0?-10*t:10*t)),height:16})]})}function p(e){var t=e.path,n=t===u.Ql,i=n?5:1;(0,s.useEffect)(function(){var e=a.kg.timeStart({isRootPath:n});return function(){e("time to load filetree folder")}},[n,t]);var c="fileTreeLoader-"+Math.random().toString();return(0,r.tZ)(l.G,{css:f,children:(0,r.tZ)(o.Z,{speed:2,backgroundColor:d.TV.backgroundHighest,foregroundColor:d.TV.backgroundHigher,height:32*i,width:250,viewBox:"0 0 250 ".concat(32*i),uniqueKey:c,children:Array(i).fill(null).map(function(e,t){return(0,r.tZ)(h,{index:t},t)})})})}},83191:function(e,t,n){n.d(t,{st:function(){return y}});var r,i,o=n(41733),a=n(30509),l=n(3796),c=n(28393),s=n(14118),u=n(86466),d=n(14548),f=n(24766),h=n(93245),p=n(31940),m=n(63163),v=n(43133),g=n(75271);(r=i||(i={})).AddFile="AddFile",r.AddFolder="AddFolder",r.UploadFile="UploadFile",r.UploadFolder="UploadFolder",r.DownloadZip="DownloadZip",r.Duplicate="Duplicate",r.ShowHiddenFiles="ShowHiddenFiles",r.HideHiddenFiles="HideHiddenFiles",r.OpenTab="OpenTab",r.OpenPane="OpenPane",r.CopyLink="CopyLink",r.CopyFilePath="CopyFilePath",r.CopyFolderPath="CopyFolderPath",r.OpenShellHere="OpenShellHere",r.Rename="Rename",r.Download="Download",r.Delete="Delete",r.OpenWith="OpenWith";var y={AddFile:{type:"AddFile",text:"Add file"},AddFolder:{type:"AddFolder",text:"Add folder"},UploadFile:{type:"UploadFile",text:"Upload file"},UploadFolder:{type:"UploadFolder",text:"Upload folder"},DownloadZip:{type:"DownloadZip",text:"Download as zip"},Duplicate:{type:"Duplicate",text:"Duplicate file"},ShowHiddenFiles:{type:"ShowHiddenFiles",text:"Show hidden files"},HideHiddenFiles:{type:"HideHiddenFiles",text:"Hide hidden files"},OpenTab:{type:"OpenTab",text:"Open tab"},OpenPane:{type:"OpenPane",text:"Open pane"},CopyFilePath:{type:"CopyFilePath",text:"Copy file path"},CopyFolderPath:{type:"CopyFolderPath",text:"Copy folder path"},CopyLink:{type:"CopyLink",text:"Copy link"},OpenShellHere:{type:"OpenShellHere",text:"Open shell here"},Rename:{type:"Rename",text:"Rename"},Download:{type:"Download",text:"Download"},Delete:{type:"Delete",text:"Delete"}},b={self:[m.l0.position.relative,m.l0.width(20),m.l0.height("100%"),m.l0.justify.center,{"& span":{height:"100%"}}],self2:[m.l0.position.relative,m.l0.width(16),m.l0.height("100%"),m.l0.justify.center,m.l0.pr(1)],button:[m.l0.display.flex,m.l0.align.center,m.l0.justify.center,m.l0.py(2),m.l0.top(0),m.l0.width("100%"),m.l0.border({width:0,color:"none"}),m.l0.cursor.pointer,m.l0.color.foregroundDimmest,m.l0.borderRadius(4),u.gU.filled,m.l0.position.relative,{top:-1,right:-1,height:"calc(100% + 2px)",backgroundColor:"transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0}],button2:[m.l0.display.flex,m.l0.align.center,m.l0.py(2),m.l0.width("100%"),m.l0.height("100%"),m.l0.cursor.pointer,m.l0.color.foregroundDimmest,m.l0.focusRing,m.l0.borderRadius(4),{backgroundColor:"transparent",":hover":{color:m.TV.foregroundDefault}}],list:[m.l0.flex.column,m.l0.justify.center,m.l0.borderRadius(8),m.l0.zIndex(1),m.l0.backgroundColor.backgroundDefault,{listStyle:"none"},{":focus":{outline:"none"}}],option:function(e,t){return[m.l0.color.foregroundDefault,m.l0.p(8),m.l0.fontWeight.normal,m.l0.cursor.pointer,{whiteSpace:"nowrap"},t&&[m.l0.backgroundColor.backgroundHigher],e&&[{":hover":{backgroundColor:m.TV.accentNegativeDefault},":hover .option-label":{color:m.TV.white}}]]},optionLabel:function(e){return e?[m.l0.color.accentNegativeStronger]:[]}};function w(e){var t=e.isNegative,n=e.isHighlighted,r=e.children;return(0,l.tZ)(h.G,{css:b.option(t,n),children:(0,l.tZ)(f.xv,{className:"option-label",css:b.optionLabel(t),multiline:!1,children:r})})}var Z=h.K.ul,x=h.K.li,C=h.K.button,k=h.K.div;g.forwardRef(function(e,t){var n=e.isActive,r=e.actions,i=e.onAction,u=e.onOpenChange,S=(0,g.useRef)(!1),_=(0,v.L7)({items:r,onSelectedItemChange:function(e){var t=e.selectedItem;t&&(S.current||i(t),G())}}),E=_.isOpen,T=_.getToggleButtonProps,R=_.getMenuProps,D=_.highlightedIndex,I=_.getItemProps,B=_.openMenu,G=_.reset;(0,g.useImperativeHandle)(t,function(){return{open:B}}),(0,g.useEffect)(function(){u&&u(E)},[E,u]);var P=T(),A=(0,s.P5)({controlName:"flag-ws-density-filetree",logFlagToAnalytics:!1});return(0,l.tZ)(h.G,{css:A?b.self2:b.self,children:(0,l.BX)(c.Z,{elevated:!0,showArrow:!0,isOpen:E,placement:"right-start",padding:0,onClickOutside:G,children:[(0,l.tZ)(d.Tg,{background:n?"default":"root",css:[m.l0.height("100%"),{background:n?m.TV.backgroundHigher:"transparent",borderTopRightRadius:8,borderBottomRightRadius:8}],children:(0,l.tZ)(C,(0,a._)((0,o._)({},P),{css:A?b.button2:b.button,size:20,onClick:function(e){e.stopPropagation(),P.onClick(e)},children:(0,l.tZ)(p.Z,{})}))}),(0,l.tZ)(k,(0,a._)((0,o._)({},R({},{suppressRefError:!0})),{children:E?(0,l.tZ)(Z,{css:b.list,children:r.map(function(e,t){return(0,l.tZ)(x,(0,a._)((0,o._)({"data-cy":"filetree-node-action-".concat(e.type)},I({item:e,index:t,onClick:function(t){S.current=!0,setTimeout(function(){S.current=!1}),i(e),t.stopPropagation()}})),{children:(0,l.tZ)(w,{isHighlighted:D===t,isNegative:e.type===y.Delete.type,children:(0,l.BX)(h.G,{css:[m.l0.rowWithGap(8),m.l0.align.center],children:[(0,l.tZ)(f.xv,{multiline:!1,children:e.text}),"icon"in e?e.icon:null]})})}),e.text)})}):null}))]})})}).displayName="NodeActionsMenu"},83576:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(3796),i=n(79904),o=n(24766),a=n(93245),l=n(53366),c=n(63163),s=n(35370);function u(e){var t,n=e.paths,u=e.onCancel,d=e.onConfirm;return(0,r.BX)(a.G,{css:[c.l0.colWithGap(24)],children:[(0,r.tZ)(o.h4,{level:1,variant:"headerDefault",children:n.length>1?"Overwrite files?":"Overwrite file?"}),(0,r.BX)(o.xv,{children:[(t=(t=n).map(s.UO)).length<2?t[0]:"".concat(t.slice(0,-1).join(", ")," and ").concat(t.slice(-1))," already"," ",n.length>1?"exist":"exists"," in the destination, are you sure you want to overwrite ",n.length>1?"them":"it","? This cannot be undone."]}),(0,r.BX)(a.G,{css:[c.l0.rowWithGap(12),c.l0.justify.end],children:[(0,r.tZ)(i.zx,{onClick:function(){return u()},text:"Cancel"}),(0,r.tZ)(i.zx,{colorway:"negative",onClick:function(){return d()},text:"Yes, overwrite ".concat(n.length>1?"these files":"this file"),iconLeft:(0,r.tZ)(l.Z,{})})]})]})}},41844:function(e,t,n){n.d(t,{CN:function(){return o},CT:function(){return i},bO:function(){return a}});var r=n(70625),i="git",o={gitCommit:{id:"git.commit",name:"Git: Commit",scope:i,default:(0,r.l2)({cmdOrCtrl:!0,key:"Enter"})}},a=Object.values(o)},96988:function(e,t,n){n.d(t,{J:function(){return a}});var r=n(41733),i=n(96949),o=n(52589);function a(e,t){(0,i.j)(o.U3.GIT_FEATURE_USED,(0,r._)({action:e,source:"git-pane"},t))}},52949:function(e,t,n){n.d(t,{$8:function(){return m},Lr:function(){return w},ST:function(){return p},Zr:function(){return g},kb:function(){return v},po:function(){return h},uJ:function(){return y},yx:function(){return Z}});var r=n(3796),i=n(38935),o=n(24766),a=n(22419),l=n(93245),c=n(36809),s=n(22527),u=n(63163),d=n(35370),f=(0,c.X)({revertText:[u.l0.color.orangeStronger,u.l0.fontWeight.medium],mergeText:[u.l0.color.purpleStronger,u.l0.fontWeight.medium],pullRequestId:[u.l0.fontWeight.medium],hash:[u.l0.fontWeight.medium],filePathPrefix:[u.l0.color.foregroundDimmest],commitBody:[u.l0.font.code,{whiteSpace:"pre-wrap"},{fontSize:u.TV.fontSizeSmall}],clickableName:[u.l0.cursor.pointer,{"&:hover":{textDecoration:"underline"}}],tooltip:[u.l0.display.inlineFlex,u.l0.rowWithGap(4),u.l0.align.center],path:[{fontSize:u.TV.fontSizeSmall},u.l0.font.code],currentBranchIndicator:[u.l0.height(16),u.l0.width(16),u.l0.align.center],currentBranchDot:[u.l0.height(6),u.l0.width(6),u.l0.backgroundColor.accentPrimaryStronger,u.l0.borderRadius("full")],branchNameWrapper:[u.l0.flex.row,u.l0.align.center],fixTooltipDisplay:{"& > span":{display:"inline-block"}},headingWrapper:[u.l0.display.inlineFlex,u.l0.rowWithGap(4),u.l0.align.center,u.l0.flex.shrink(1),u.l0.overflow("hidden")],headingRemote:[{verticalAlign:"text-bottom"},u.l0.mr(4)],headingCurrent:[u.l0.px(4)],current:[u.l0.position.relative,u.l0.top("-1px"),u.l0.display.inlineFlex,u.l0.pl(2),u.l0.pr(8)],icon:[{verticalAlign:"baseline !important"},u.l0.mr(4)],bodyContainer:[u.l0.border({color:u.TV.outlineDimmest,direction:"full"}),u.l0.borderRadius(8),u.l0.p(16)]});function h(e){var t=e.text,n=e.className;return(0,r.tZ)("span",{className:n,css:f.revertText,children:t})}function p(e){var t=e.text,n=e.className;return(0,r.tZ)("span",{className:n,css:f.mergeText,children:t})}function m(e){var t,n=e.id,i=e.hash,o=e.className;return t=void 0===i||i?"string"==typeof n&&n.startsWith("#")?n:"#".concat(n):"string"==typeof n&&n.startsWith("#")?n.slice(1):"".concat(n),(0,r.tZ)("span",{className:o,css:f.pullRequestId,children:t})}function v(e){var t=e.hash,n=e.length,i=e.className;return(0,r.tZ)("span",{className:i,css:f.hash,children:t.slice(0,(void 0===n?8:n)+1)})}function g(e){var t=e.subject,n=e.remoteName,o=e.quoted,a=void 0!==o&&o,l=e.className;return n?(0,r.tZ)(i.ZP,{className:l,background:!1,lineBreaks:!0,themed:!0,useRemarkGfm:!0,remarkGitHubOptions:{repository:n},children:a?'"'.concat(t,'"'):t}):(0,r.tZ)("span",{className:l,children:a?'"'.concat(t,'"'):t})}function y(e){var t=e.body,n=e.view,o=e.className;return"Source"===(void 0===n?"Source":n)?(0,r.tZ)(l.G,{css:f.bodyContainer,children:(0,r.tZ)("pre",{className:o,css:f.commitBody,children:t})}):(0,r.tZ)(l.G,{css:f.bodyContainer,children:(0,r.tZ)(i.ZP,{className:o,background:!1,mentionsLink:!0,lineBreaks:!0,themed:!0,useRemarkGfm:!0,children:t})})}function b(){return(0,r.tZ)("span",{css:f.fixTooltipDisplay,children:(0,r.tZ)(a.u,{tooltip:"This is your current branch",children:(0,r.tZ)(l.G,{css:f.currentBranchIndicator,children:(0,r.tZ)(l.G,{css:f.currentBranchDot})})})})}function w(e){var t=e.name,n=e.remote,i=e.current,a=void 0!==i&&i,l=e.heading,c=void 0!==l&&l,u=e.icon,d=void 0!==u&&u,h=e.onClick,p=e.className,m=null;return(!0===d?m=c?(0,r.tZ)(s.Z,{size:16}):(0,r.tZ)(s.Z,{css:f.icon,size:12}):d&&(m=d),c)?(0,r.BX)("div",{css:f.headingWrapper,children:[m,(0,r.BX)(o.xv,{variant:"subheadDefault",multiline:!1,children:[n?(0,r.BX)(r.HY,{children:[(0,r.tZ)("span",{css:f.headingRemote,children:n}),(0,r.tZ)("span",{css:f.headingRemote,children:"/"})]}):null,h?(0,r.tZ)(C,{label:"View branch",onClick:h,children:t}):(0,r.tZ)("span",{children:t})]}),a?(0,r.tZ)("span",{css:c?f.headingCurrent:f.current,children:(0,r.tZ)(b,{})}):null]}):(0,r.BX)("span",{className:p,css:f.branchNameWrapper,children:[m,n?(0,r.BX)("span",{children:[n,"/"]}):null,h?(0,r.tZ)(C,{label:"View branch",onClick:h,children:t}):(0,r.tZ)("span",{children:t}),a?(0,r.tZ)(b,{}):null]})}function Z(e){var t=e.path,n=e.prefix,i=e.onClick,o=e.className,l=(0,d.UO)(t),c=!i&&(l===t||null!==n&&n+l===t);return(0,r.tZ)("span",{css:f.fixTooltipDisplay,children:(0,r.tZ)(a.u,{maxWidth:"auto",tooltip:(0,r.tZ)(x,{path:t,openable:!!i}),isDisabled:c,children:i?(0,r.BX)(C,{label:"Open ".concat(l),onClick:i,className:o,children:[n?(0,r.tZ)("span",{css:f.filePathPrefix,children:n}):null,(0,r.tZ)("span",{children:l})]}):(0,r.BX)("span",{className:o,children:[n?(0,r.tZ)("span",{css:f.filePathPrefix,children:n}):null,(0,r.tZ)("span",{children:l})]})})})}function x(e){var t=e.path,n=e.openable;return(0,r.BX)("span",{css:f.tooltip,children:[void 0===n||n?(0,r.tZ)("span",{children:"Open"}):null,(0,r.tZ)("span",{css:f.path,children:t})]})}function C(e){var t=e.label,n=e.onClick,i=e.className,o=e.children;return(0,r.tZ)("span",{className:i,css:f.clickableName,role:"button",tabIndex:-1,"aria-label":t,onClick:n,onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&(null==n||n())},children:o})}},62740:function(e,t,n){n.d(t,{FH:function(){return u},PZ:function(){return d},fF:function(){return s}});var r=n(21262),i=n(71440),o=n(33479);function a(){var e=(0,r._)(["\n  fragment HandleReplRedirectionReplRedirect on ReplRedirect {\n    replUrl\n  }\n"]);return a=function(){return e},e}function l(){var e=(0,r._)(["\n  fragment HandleReplRedirectionSubscriptionExpired on ReplSubscriptionExpired {\n    isOwner\n    replId\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,r._)(["\n  fragment HandleReplRedirectionRepl on Repl {\n    id\n    language\n    ...ReplLinkRepl\n    authorizations {\n      editFileContents {\n        isAuthorized\n      }\n    }\n    org {\n      id\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var s=(0,i.Ps)(a()),u=(0,i.Ps)(l()),d=(0,i.Ps)(c(),o.Y)},62128:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(3796),i=n(97891),o=n(43769),a=n(40490),l=n(7391),c=n(75271),s=n(55771);function u(e,t){return!!e&&("ReplRedirect"===e.__typename||"ReplSubscriptionExpired"===e.__typename||!e.authorizations.editFileContents.isAuthorized||!(0,a.FJ)(t.query.skipNixMigration,"boolean")&&(0,s.O)(e))}function d(e){var t=e.replResponse,n=e.replUrl,a=e.children,s=(0,l.useRouter)();if((0,c.useEffect)(function(){if(u(t,s)){if("ReplSubscriptionExpired"===t.__typename){var e=t.replId,r=t.isOwner,i=n.split("/")[1].slice(1);s.replace({pathname:"/expiredPrivateRepl",query:{isOwner:r,ownerUsername:i,replId:e}},s.asPath);return}if("ReplRedirect"===t.__typename){window.location.href=t.replUrl;return}if(!t.authorizations.editFileContents.isAuthorized){var a=(0,o.j3)(t),l=a.href,c=a.as;s.replace(l,c);return}window.location.reload()}},[t,s,n]),u(t,s)){var d="";return"ReplRedirect"===t.__typename?d="Repl moved, redirecting":"ReplSubscriptionExpired"===t.__typename?d="Subscription expired, redirecting":t.authorizations.editFileContents.isAuthorized&&(d="Your Repl requires an upgrade, please wait"),(0,r.tZ)(i.Z,{reason:d})}return(0,r.tZ)(r.HY,{children:a})}},49719:function(e,t,n){n.d(t,{Ai:function(){return g},BI:function(){return u},Jp:function(){return d},_H:function(){return f},_Z:function(){return v},bA:function(){return m},ox:function(){return y}});var r=n(41733),i=n(30509),o=n(83059),a=n(80786),l=n(49853),c=n(75271),s=n(25731),u=(0,s.u)(function(){return null}),d=(0,s.u)(function(){return null});function f(e){var t=d.current();(0,c.useEffect)(function(){e!==t&&d.set(function(){return e})},[e,t])}var h=(0,l.cn)(null),p=(0,l.cn)(null,function(e,t,n){var o,a,l=e(h),c=l?(0,r._)({},l,n):(0,r._)({},n),s=null==c?void 0:c.changes,d=null==c?void 0:c.filePath;if(!d||!s)throw Error('"filePath", "changes", "users" required when initializing history state');var f=(a=(o=(0,i._)((0,r._)({},c),{changes:s,filePath:d})).changes.length,(0,r._)({users:{},count:a,version:Math.max(0,a-1),playing:!1,comparing:!1},o));u.set(function(){return f});var p=f.changes.length;if(0===p){t(h,f);return}(null==l?void 0:l.changes)&&f.changes!==l.changes&&(f.count=p,f.version=Math.min(f.version,p-1),f.playing=!1,f.comparing=!1),f.version===p-1&&(f.playing=!1),t(h,f)});function m(){return(0,a.Dv)(h,{store:b()})}function v(){return(0,a.b9)(p,{store:b()})}function g(){return(0,a.b9)((0,o.Z)(function(){return(0,l.cn)(null,function(e,t){t(h,null)})},[]),{store:b()})}var y=(0,c.createContext)(null);function b(){var e=(0,c.useContext)(y);if(!e)throw Error("Expected store in context");return e}},58110:function(e,t,n){var r=n(3796),i=n(79904),o=n(58532),a=n(24766),l=n(93245),c=n(36809),s=n(26496),u=n(63163),d=n(7391),f=(0,c.X)({root:[u.l0.colWithGap(32)],header:[u.l0.rowWithGap(16),u.l0.align.center],icon:[u.l0.color.orangeStrongest],body:[u.l0.pr(32),u.l0.colWithGap(16)],list:[u.l0.colWithGap(16),u.l0.pl(16)],buttons:[u.l0.rowWithGap(16),u.l0.justify.end]});t.Z=function(e){var t=e.isOpen,n=(0,d.useRouter)();return(0,r.tZ)(o.u,{preventClose:!0,isOpen:t,centered:!0,onRequestClose:function(){},maxWidth:600,children:(0,r.BX)(l.G,{css:f.root,children:[(0,r.BX)(l.G,{css:f.header,children:[(0,r.tZ)(s.Z,{size:24,css:f.icon}),(0,r.tZ)(a.h4,{css:[{width:"fit-content"}],level:2,variant:"headerDefault",children:"You cant join this Repl from Firewall Mode."})]}),(0,r.BX)(l.G,{css:f.body,children:[(0,r.tZ)(a.xv,{children:"This Repl was started by someone not in Firewall Mode. If you would like to join, please do one of the following:"}),(0,r.BX)(l.G,{css:f.list,children:[(0,r.tZ)(a.xv,{multiline:!1,children:" Exit Firewall Mode."}),(0,r.tZ)(a.xv,{multiline:!1,children:" Ask the creator to open this Repl in Firewall Mode."})]})]}),(0,r.BX)(l.G,{css:f.buttons,children:[(0,r.tZ)(i.zx,{text:"Exit Firewall Mode",onClick:function(){window.location.href="https://www.replit.com".concat(n.asPath)}}),(0,r.tZ)(i.zx,{text:"Leave",onClick:function(){n.push("/home","~/")}})]})]})})}},56421:function(e,t,n){n.d(t,{Z:function(){return k}});var r=n(3796),i=n(16155),o=n(79904),a=n(58532),l=n(24766),c=n(22419),s=n(93245),u=n(36809),d=n(25),f=n(63163),h=n(9834),p=n.n(h),m=n(7391),v=n(41733),g=n(21262),y=n(71440),b=n(9122);function w(){var e=(0,g._)(["\n  query NotAllowedModal {\n    currentUser {\n      id\n      isStaff: hasRole(role: REPLIT_STAFF)\n    }\n  }\n"]);return w=function(){return e},e}var Z={},x=(0,y.Ps)(w()),C=(0,u.X)({root:[f.l0.colWithGap(32)],header:[f.l0.rowWithGap(16),f.l0.align.center],body:[f.l0.colWithGap(16)],staffHelpers:[f.l0.colWithGap(8),f.l0.border({color:"var(--accent-negative-default)",width:1,style:"solid"}),f.l0.overflow("hidden")],buttons:[f.l0.rowWithGap(16),f.l0.justify.end]}),k=function(e){var t,n,u=e.isOpen,h=(0,m.useRouter)(),g=(t=(0,v._)({},Z,{skip:!u}),b.a(x,t)).data,y=(0,i.Z)(),w=null==g?void 0:null===(n=g.currentUser)||void 0===n?void 0:n.isStaff;return(0,r.tZ)(a.u,{preventClose:!0,isOpen:u,centered:!0,onRequestClose:function(){},maxWidth:600,children:(0,r.BX)(s.G,{css:C.root,children:[(0,r.tZ)(s.G,{css:C.header,children:(0,r.tZ)(l.h4,{css:{width:"fit-content"},level:2,variant:"headerDefault",children:"You cant run this Repl right now."})}),(0,r.BX)(s.G,{css:C.body,children:[(0,r.BX)(l.xv,{children:["It may be temporarily unavailable or it may have violated our"," ",(0,r.tZ)(p(),{legacyBehavior:!0,href:"/site/terms",children:"Terms of Service"}),"."]}),(0,r.tZ)(l.xv,{children:"If you are the owner of this Repl and believe you should be able to run it, you can try again later or contact support."}),w?(0,r.BX)(s.G,{css:C.staffHelpers,children:[(0,r.BX)(s.G,{css:f.l0.rowWithGap(8),children:[(0,r.tZ)(c.u,{tooltip:"You are seeing this functionality because you have special permissions.",children:(0,r.tZ)(d.Z,{})}),(0,r.tZ)(l.h4,{level:3,children:"Debug Info"})]}),(0,r.tZ)(s.G,{children:(0,r.BX)(l.xv,{children:["Repl ID ",y," is not allowed to run. This is most likely due to a policy takedown."]})}),(0,r.tZ)(s.G,{children:(0,r.BX)(l.xv,{multiline:!1,children:[(0,r.tZ)(p(),{legacyBehavior:!0,href:"https://app.datadoghq.com/logs?query=%40replid%3A".concat(y),children:"All datadog logs"})," ",""," ",(0,r.tZ)(p(),{legacyBehavior:!0,href:"https://app.datadoghq.com/logs?query=%40replid%3A".concat(y,"+taking+down"),children:"Takedown-specific logs"})]})})]}):null]}),(0,r.BX)(s.G,{css:C.buttons,children:[(0,r.tZ)(o.zx,{text:"Reload",onClick:function(){window.location.reload()}}),(0,r.tZ)(o.zx,{text:"Leave",onClick:function(){h.push("/home","~/")}})]})]})})}},13268:function(e,t,n){var r=n(3796),i=n(23666),o=n(42965),a=n(79904),l=n(58532),c=n(24766),s=n(93245),u=n(36809),d=n(15323),f=n(63163),h=n(7391),p=(0,u.X)({root:[f.l0.colWithGap(16)],header:[f.l0.rowWithGap(16),f.l0.align.center],body:[f.l0.pr(32),f.l0.colWithGap(16)],buttonRow:[f.l0.rowWithGap(16)],button:[f.l0.flex.growAndShrink(1)]});t.Z=function(e){var t=e.isOpen,n=(0,h.useRouter)(),u=(0,o.Gv)(n),f=(0,i.Z)();return(0,r.tZ)(l.u,{preventClose:!0,isOpen:t,centered:!0,onRequestClose:function(){},maxWidth:600,children:(0,r.BX)(s.G,{css:p.root,children:[(0,r.BX)(s.G,{css:p.header,children:[(0,r.tZ)(d.Z,{size:24}),(0,r.tZ)(c.h4,{css:{width:"fit-content"},level:2,variant:"headerDefault",children:"Please Refresh"})]}),(0,r.BX)(s.G,{css:p.body,children:[(0,r.tZ)(c.xv,{children:"Your connection to this Repl has been temporarily interrupted. Usually this is because of a network issue. Please refresh."}),u?(0,r.tZ)(c.xv,{children:"If the issue continues please logout and re-login."}):null]}),(0,r.BX)(s.G,{css:p.buttonRow,children:[u||f?null:(0,r.tZ)(a.zx,{css:p.button,text:"Leave",onClick:function(){n.push("/home","~/")}}),(0,r.tZ)(a.zx,{text:"Refresh",colorway:"primary",css:p.button,onClick:function(){window.location.reload()}})]})]})})}},47385:function(e,t,n){n.d(t,{h:function(){return _},w:function(){return k}});var r=n(41733),i=n(30509),o=n(3796),a=n(83059),l=n(1567),c=n(44935),s=n(75271),u=n(41974),d=n(49853),f=n(66626),h=n(80786);function p(){return(0,f._)((0,s.useState)(function(){return(0,d.MT)()}),1)[0]}var m=(0,s.createContext)(null),v=function(e){return(0,h.b9)(e,{store:function(){var e=(0,s.useContext)(m);if(!e)throw Error("Expected store in context");return e}()})},g=(0,d.cn)(-1),y=(0,d.cn)([]),b=(0,d.cn)(void 0),w=(0,d.cn)(null,function(e,t,n){var r=e(b);switch(r&&(clearTimeout(r.id),r.cb()),n){case"forward":t(g,function(t){return Math.min(e(y).length,t+1)});break;case"backward":t(g,function(e){return Math.max(0,e-1)})}var i=e(y),o=e(g);return o>=i.length?"":i[o]}),Z=(0,d.cn)(null,function(e,t,n){clearTimeout(null===(r=e(b))||void 0===r?void 0:r.id);var r,i=function(){if(n.length>0){var r=!1;t(y,function(t){return(0,u.Uy)(t,function(t){if(n!==t[e(g)])for(r=!0,t.push(n);t.length>20;)t.shift()})}),r&&t(g,e(y).length-1)}t(b,void 0)};t(b,{id:setTimeout(i,2e3),cb:i})});function x(e){var t,n=v(Z),o=(t=v(w),{forward:(0,a.Z)(function(){return function(){return t("forward")}},[t]),backward:(0,a.Z)(function(){return function(){return t("backward")}},[t])}),c=o.forward,u=o.backward,d=(0,s.useRef)(e.value);return(0,s.useEffect)(function(){e.value!==(null==d?void 0:d.current)&&(e.value&&n(e.value),d.current=e.value)},[n,e.value]),(0,i._)((0,r._)({},e),{onKeyDown:(0,a.Z)(function(){return function(t){if(t.shiftKey||(0,l.jh)(t)){null===(r=e.onKeyDown)||void 0===r||r.call(e,t);return}var n,r,i=t.currentTarget,o=!!i.value.match(/\n/);if("ArrowUp"===t.key){if(o&&i.selectionStart&&i.selectionStart>0)return;e.onChange(u()),t.preventDefault(),t.stopPropagation();return}if("ArrowDown"===t.key){if(o&&i.selectionEnd&&i.selectionEnd<i.value.length)return;e.onChange(c()),t.preventDefault(),t.stopPropagation();return}null===(n=e.onKeyDown)||void 0===n||n.call(e,t)}},[u,c,e]),onChange:(0,a.Z)(function(){return function(t){e.onChange(t.target.value)}},[e])})}var C=s.forwardRef(function(e,t){var n=x(e);return(0,o.tZ)(c.B,(0,r._)({ref:t},n))}),k=s.forwardRef(function(e,t){var n=p();return(0,o.tZ)(m.Provider,{value:n,children:(0,o.tZ)(C,(0,r._)({ref:t},e))})}),S=s.forwardRef(function(e,t){var n=x(e);return(0,o.tZ)(c.II,(0,r._)({ref:t},e,n))}),_=s.forwardRef(function(e,t){var n=p();return(0,o.tZ)(m.Provider,{value:n,children:(0,o.tZ)(S,(0,r._)({ref:t},e))})})},84232:function(e,t,n){n.d(t,{m:function(){return v}});var r=n(3796),i=n(62279),o=n(22419),a=n(93245),l=n(36809),c=n(39090),s=n(4733),u=n(94580),d=n(63163),f=n(53156),h=(0,i.F4)("0%,100%{opacity:1;}50%{opacity:0.25;}"),p=(0,l.X)({root:[d.l0.height(20),d.l0.width(20),d.l0.center]}),m=(0,l.X)({root:[p.root],pulseRoot:[p.root,{animation:"".concat(h," 2s infinite")}]});function v(){var e=(0,f.Z)(),t=e.isSaving;return e.isOffline?(0,r.tZ)(o.u,{tooltip:"Reconnecting, changes will be synced when youre online",placement:"right",children:(0,r.tZ)(a.G,{css:m.root,children:(0,r.tZ)(c.Z,{size:16,color:d.TV.redDefault})})}):t?(0,r.tZ)(o.u,{tooltip:"Saving",placement:"right",children:(0,r.tZ)(a.G,{css:m.pulseRoot,children:(0,r.tZ)(s.Z,{size:16,color:d.TV.foregroundDimmest})})}):(0,r.tZ)(o.u,{tooltip:"Saved",placement:"right",children:(0,r.tZ)(a.G,{css:m.root,children:(0,r.tZ)(u.Z,{size:16,color:d.TV.foregroundDimmest})})})}},39268:function(e,t,n){n.d(t,{X2:function(){return d},iA:function(){return h},sg:function(){return f}});var r=n(41733),i=n(30509),o=n(98924),a=n(3796),l=n(93245),c=n(36809),s=n(63163);n(75271);var u=(0,c.X)({table:{},tableRow:[s.l0.rowWithGap(12),s.l0.align.center,s.l0.border({direction:"bottom"}),{boxSizing:"border-box"}],wrapper:[s.l0.rowWithGap(0)],column:[s.l0.display.flex,s.l0.colWithGap(0),s.l0.justify.center,s.l0.border({direction:"right"}),{":last-child":{borderRight:0}}],cell:[s.l0.rowWithGap(0),s.l0.align.center,s.l0.color.foregroundDimmest,s.l0.justify.spaceBetween,s.l0.fontSize("small"),s.l0.mx(4),s.l0.py(2),{overflow:"hidden",whiteSpace:"nowrap"}],responsiveWrapper:[],responsiveColumn:[]}),d=function(e){var t=e.children,n=(0,o._)(e,["children"]);return(0,a.tZ)("tr",(0,i._)((0,r._)({css:u.tableRow},n),{children:(0,a.tZ)(l.G,{css:u.wrapper,children:t})}))},f=function(e){var t=e.header,n=e.width,r=e.last,i=e.children,o={};return(n&&(o.width=n),r&&(o.marginLeft="auto"),void 0!==t&&t)?(0,a.tZ)("th",{style:o,children:(0,a.tZ)(l.G,{css:u.cell,children:i})}):(0,a.tZ)("td",{css:u.column,style:o,children:(0,a.tZ)(l.G,{css:u.cell,children:i})})},h=function(e){var t=e.children;return(0,a.tZ)("table",{css:u.table,children:t})}},41895:function(e,t,n){n.d(t,{B:function(){return c}});var r=n(3796),i=n(62279),o=n(63163),a=n(93245),l=(0,i.iv)([o.l0.borderRadius("full"),o.l0.position.absolute,o.l0.top(-3),o.l0.right(-3)]);function c(e){var t=e.color,n=void 0===t?o.TV.redStronger:t,i=e.small,c=e.className,s=i?6:8;return(0,r.tZ)(a.G,{className:c,style:{backgroundColor:n,width:s,height:s,zIndex:2,boxShadow:"0 0 0 2px ".concat(o.TV.backgroundDefault)},css:l})}},34648:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(75271),i=n(41331),o=n.n(i);function a(e){return(0,r.useMemo)(function(){return!e||e.length>40?"Unknown License":o()(e,{upgrade:!1})||"Unknown License"},[e])}},59978:function(e,t,n){n.d(t,{I:function(){return u}});var r=n(41733),i=n(30509),o=n(14118),a=n(79685),l=n(97763),c=n(75271),s={nodejs:["package.json","package-lock.json","yarn.lock","node_modules/"],python2:["poetry.lock","pyproject.toml","requirements.txt",".venv/",".local"],python3:["poetry.lock","pyproject.toml","requirements.txt",".venv/",".local"],ruby:["Gemfile","Gemfile.lock"],java:["pom.xml","target"]};function u(){var e=(0,l.T)(),t=(0,a.T)(),n=(0,o.P5)({controlName:"flag-system-dependencies-search"});return{configs:(0,c.useMemo)(function(){var o=(null==e?void 0:e.packagers)||[],a=(null==o?void 0:o.map(function(e){var t,n;return(0,i._)((0,r._)({},e),{title:e.language,packagerFiles:(null===(t=e.packagerFiles)||void 0===t?void 0:t.length)?e.packagerFiles:null!==(n=s[e.language])&&void 0!==n?n:[]})}))||[];return t&&a.push({id:"html",title:"html",name:"HTML Packager",language:"html",packageSearch:!0,guessImports:!1,packagerFiles:[]}),a.push({id:"nix",title:"system",name:"System Dependencies",language:"nix",packageSearch:n,guessImports:!1,packagerFiles:["replit.nix"]}),a},[e,t,n]),loading:!e}}},46261:function(e,t,n){n.d(t,{C:function(){return h}});var r,i,o=n(27387),a=n(42516),l=n(96583),c="index.html",s=/^\s*<script src="https:\/\/cdnjs\.cloudflare\.com\/ajax\/libs\/([^/]+)\/([^/]+)\/.+.js"><\/script>$/,u=(r={name:"html",getInstalledPackages:function(e){var t=e.services.fs;return(0,o._)(function(){return(0,l.Jh)(this,function(e){switch(e.label){case 0:return[4,t.stat(c)];case 1:var n;if(!e.sent().exists)return[2,[]];return[2,new Promise((n=(0,o._)(function(e){var n;return(0,l.Jh)(this,function(r){return n=t.watchTextFile(c,{onReady:function(t){var r=t.initialContent,i=[],o=!0,a=!1,l=void 0;try{for(var c,u=r.split("\n")[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var d=c.value.match(s);d&&i.push({name:d[1],version:d[2]})}}catch(e){a=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}n(),e(i)},onError:function(){n(),e([])}}),[2]})}),function(e){return n.apply(this,arguments)}))]}})})()},getPackageInfo:function(e){var t=e.name;return(0,o._)(function(){var e,n;return(0,l.Jh)(this,function(r){switch(r.label){case 0:return[4,fetch("/data/cdnjs/info/".concat(encodeURIComponent(t)),{credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"}})];case 1:if(!(e=r.sent()).ok)return[2,void 0];r.label=2;case 2:return r.trys.push([2,4,,5]),[4,e.json()];case 3:if(n=r.sent())return[2,{name:n.name,version:n.version,description:n.description,homepageURL:n.link,sourceCodeURL:n.include}];return[3,5];case 4:return r.sent(),[2,void 0];case 5:return[2]}})})()},search:function(e){var t=e.query;return(0,o._)(function(){var e;return(0,l.Jh)(this,function(n){switch(n.label){case 0:return[4,fetch("/data/cdnjs/search/".concat(encodeURIComponent(t)),{credentials:"same-origin",headers:{"Content-Type":"application/json",Accept:"application/json"}})];case 1:if(!(e=n.sent()).ok)return[2,[]];return[4,e.json()];case 2:return[2,n.sent().map(function(e){return{name:e.name,version:e.version,description:e.description,homepageURL:e.link,sourceCodeURL:e.include}})]}})})()}},(0,a._)(r,"install",function(e){var t=e.pkgs,n=e.services.fs;return(0,o._)(function(){var e,r,i,a,s,u,d;return(0,l.Jh)(this,function(f){switch(f.label){case 0:return[4,n.stat(c)];case 1:if(!f.sent().exists)return[2];e=!0,r=!1,i=void 0,f.label=2;case 2:f.trys.push([2,7,8,9]),a=function(){var e;return(0,l.Jh)(this,function(t){switch(t.label){case 0:var r;return e=u.value,[4,new Promise((r=(0,o._)(function(t){var r;return(0,l.Jh)(this,function(i){return r=n.watchTextFile(c,{onReady:function(i){var a=i.initialContent,c=i.writeChange;return(0,o._)(function(){var i,o;return(0,l.Jh)(this,function(l){switch(l.label){case 0:i='<script src="'.concat(e.sourceCodeURL,'"></script>\n'),-1===(o=a.indexOf("<script"))&&(o=a.indexOf("</body>")),-1===o&&(o=a.length),c({from:o,insert:i}),l.label=1;case 1:return l.trys.push([1,3,4,5]),[4,n.flush()];case 2:case 3:return l.sent(),[3,5];case 4:return r(),t(),[7];case 5:return[2]}})})()},onError:function(){r(),t()}}),[2]})}),function(e){return r.apply(this,arguments)}))];case 1:return t.sent(),[2]}})},s=t[Symbol.iterator](),f.label=3;case 3:if(e=(u=s.next()).done)return[3,6];return[5,(0,l.XA)(a())];case 4:f.sent(),f.label=5;case 5:return e=!0,[3,3];case 6:return[3,9];case 7:return d=f.sent(),r=!0,i=d,[3,9];case 8:try{e||null==s.return||s.return()}finally{if(r)throw i}return[7];case 9:return[2]}})})()}),(0,a._)(r,"uninstall",function(e){var t=e.pkgs,n=e.services.fs;return(0,o._)(function(){var e,r,i,a,u,d,f;return(0,l.Jh)(this,function(h){switch(h.label){case 0:return[4,n.stat(c)];case 1:if(!h.sent().exists)return[2];e=!0,r=!1,i=void 0,h.label=2;case 2:h.trys.push([2,7,8,9]),a=function(){var e;return(0,l.Jh)(this,function(t){switch(t.label){case 0:var r;return e=d.value,[4,new Promise((r=(0,o._)(function(t){var r;return(0,l.Jh)(this,function(i){return r=n.watchTextFile(c,{onReady:function(i){var a=i.initialContent,c=i.writeChange;return(0,o._)(function(){var i,o,u,d,f,h,p,m,v;return(0,l.Jh)(this,function(l){switch(l.label){case 0:i=0,o=!0,u=!1,d=void 0;try{for(f=a.split("\n")[Symbol.iterator]();!(o=(h=f.next()).done);o=!0)(m=(p=h.value).match(s))&&(v=m[1],e.name===v&&c({from:i,to:i+p.length+1})),i+=p.length+1}catch(e){u=!0,d=e}finally{try{o||null==f.return||f.return()}finally{if(u)throw d}}l.label=1;case 1:return l.trys.push([1,3,4,5]),[4,n.flush()];case 2:case 3:return l.sent(),[3,5];case 4:return r(),t(),[7];case 5:return[2]}})})()},onError:function(){r(),t()}}),[2]})}),function(e){return r.apply(this,arguments)}))];case 1:return t.sent(),[2]}})},u=t[Symbol.iterator](),h.label=3;case 3:if(e=(d=u.next()).done)return[3,6];return[5,(0,l.XA)(a())];case 4:h.sent(),h.label=5;case 5:return e=!0,[3,3];case 6:return[3,9];case 7:return f=h.sent(),r=!0,i=f,[3,9];case 8:try{e||null==u.return||u.return()}finally{if(r)throw i}return[7];case 9:return[2]}})})()}),r),d=(i={name:"upm",getInstalledPackages:function(e){var t=e.id,n=e.services.packager;return(0,o._)(function(){var e;return(0,l.Jh)(this,function(r){switch(r.label){case 0:return[4,n.listSpecfile(t)];case 1:if((e=r.sent()).error||null===e.packages)return[2,[]];return[2,e.packages]}})})()}},(0,a._)(i,"getPackageInfo",function(e){var t=e.id,n=e.name,r=e.services.packager;return(0,o._)(function(){return(0,l.Jh)(this,function(e){return[2,r.fetchPackageInfo(n,t)]})})()}),(0,a._)(i,"search",function(e){var t=e.id,n=e.query,r=e.services.packager;return(0,o._)(function(){return(0,l.Jh)(this,function(e){return[2,r.searchPackages(n,t)]})})()}),(0,a._)(i,"install",function(e){var t=e.id,n=e.pkgs,r=e.services.packager;return(0,o._)(function(){return(0,l.Jh)(this,function(e){switch(e.label){case 0:return[4,r.addPackages(n,t)];case 1:if(!e.sent())throw Error("Package install failed");return[2]}})})()}),(0,a._)(i,"uninstall",function(e){var t=e.id,n=e.pkgs,r=e.services.packager;return(0,o._)(function(){var e;return(0,l.Jh)(this,function(i){switch(i.label){case 0:return e=n.filter(function(e){return e.name}).map(function(e){return e.name}),[4,r.removePackages(e,t)];case 1:if(!i.sent())throw Error("Package uninstall failed");return[2]}})})()}),i),f=n(70466);function h(e){switch(e){case"html":return u;case"nix":return f.Z;default:return d}}},70466:function(e,t,n){n.d(t,{C:function(){return l}});var r,i=n(27387),o=n(42516),a=n(96583);function l(e){return null==e?void 0:e.replace(/^pkgs\./,"")}var c=(r={name:"nix",getInstalledPackages:function(e){var t=e.services.nixService;return(0,i._)(function(){var e;return(0,a.Jh)(this,function(n){switch(n.label){case 0:return[4,t.listPackages()];case 1:if(null!==(e=n.sent()).error)return[2,[]];return[2,e.packages.filter(function(e){return!!e.name}).map(function(e){return{name:e.name,version:e.version}})]}})})()}},(0,o._)(r,"getPackageInfo",function(e){var t=e.name,n=e.services.nixService;return(0,i._)(function(){var e;return(0,a.Jh)(this,function(r){switch(r.label){case 0:return[4,n.packageInfo(t)];case 1:if(null!==(e=r.sent()).error)return[2,{}];return[2,e.package]}})})()}),(0,o._)(r,"search",function(e){var t=e.query,n=e.services.nixService,r=e.nixOpts;return(0,i._)(function(){var e;return(0,a.Jh)(this,function(i){switch(i.label){case 0:return[4,n.searchPackages(t,r)];case 1:if(null!==(e=i.sent()).error)throw Error("Could not search Nix packages");return[2,e.packages.map(function(e){var t,n;return{name:e.name,version:e.version,description:e.description,homepageURL:null!==(t=e.homepageURL[0])&&void 0!==t?t:null,license:null!==(n=e.licenses[0])&&void 0!==n?n:null}})]}})})()}),(0,o._)(r,"install",function(e){var t=e.pkgs,n=e.services.nixService;return(0,i._)(function(){var e;return(0,a.Jh)(this,function(r){switch(r.label){case 0:return e=t.filter(function(e){return null!=e.name}).map(function(e){return"pkgs.".concat(e.name)}),[4,n.addPackages(e)];case 1:return r.sent(),[2]}})})()}),(0,o._)(r,"uninstall",function(e){var t=e.pkgs,n=e.services.nixService;return(0,i._)(function(){var e;return(0,a.Jh)(this,function(r){switch(r.label){case 0:return e=t.filter(function(e){return null!=e.name}).map(function(e){return"pkgs.".concat(e.name)}),[4,n.removePackages(e)];case 1:return r.sent(),[2]}})})()}),r);t.Z=c},60166:function(e,t,n){n.d(t,{Z:function(){return v}});var r=n(27387),i=n(96583),o=n(3796),a=n(99595),l=n(96949),c=n(23882),s=n(86763),u=n.n(s),d=n(75271),f=n(59978),h=n(46261),p=n(77049);function m(){var e=(0,c.Z)(),t=(0,p.Hg)(p.NC),n=(0,p.Hg)(p.w$),o=(0,p.XD)(p.w$),s=(0,p.$X)(p.w$),m=(0,p.Hg)(p.vO),v=(0,p.Mi)(),g=(0,p.Zq)(),y=(0,p.OO)(),b=(0,p.np)(),w=(0,a.Z)(),Z=(0,f.I)().configs,x=(0,p.T9)();return(0,d.useEffect)(function(){if(0!==Z.length){var t=[],n=!1,r=!0,i=!1,a=void 0;try{for(var l,c=Z[Symbol.iterator]();!(r=(l=c.next()).done);r=!0)!function(){var r=l.value,i=Promise.resolve(),a=g(r.id),c=u()(function(){var t=g(r.id),a=o();if(t===p.C0.Idle||(null==a?void 0:a.id)!==r.id){var l=(0,h.C)(r.id);i=i.then(function(){if(!n)return l.getInstalledPackages({id:r.id,services:e}).then(function(e){n||(y(r.id,e),v(r.id,p.C0.Idle))})})}},500);if(r.packagerFiles.length>0){var s=!0,d=!1,f=void 0;try{for(var m,b=r.packagerFiles[Symbol.iterator]();!(s=(m=b.next()).done);s=!0)!function(){var n=m.value;if(!n.endsWith("/")){var r=null!==a&&a!==p.C0.Initializing&&a!==p.C0.Uninitialized,i=e.fs.watchFilePath(n,{onChange:function(){if(!r){r=!0;return}c()}});t.push(i)}}()}catch(e){d=!0,f=e}finally{try{s||null==b.return||b.return()}finally{if(d)throw f}}}}()}catch(e){i=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw a}}return function(){n=!0;var e=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(e=(o=a.next()).done);e=!0)(0,o.value)()}catch(e){r=!0,i=e}finally{try{e||null==a.return||a.return()}finally{if(r)throw i}}}}},[Z,e.fs]),(0,d.useEffect)(function(){var t,n=!1;return(t=(0,r._)(function(){var t,r,o,a,l,c;return(0,i.Jh)(this,function(i){t=!0,r=!1,o=void 0;try{for(a=function(){var t=c.value,r=g(t.id);if(r&&r!==p.C0.Uninitialized&&r!==p.C0.Initializing)return"continue";v(t.id,p.C0.Initializing),(0,h.C)(t.id).getInstalledPackages({id:t.id,services:e}).then(function(e){n||(y(t.id,e),v(t.id,p.C0.Idle))})},l=Z[Symbol.iterator]();!(t=(c=l.next()).done);t=!0)a()}catch(e){r=!0,o=e}finally{try{t||null==l.return||l.return()}finally{if(r)throw o}}return[2]})}),function(){return t.apply(this,arguments)})(),function(){n=!0}},[Z]),(0,d.useEffect)(function(){if(null===n&&0!==t.length){var e=t[0];g(e.id)===p.C0.Idle&&b(e)}},[m,n,t]),(0,d.useEffect)(function(){if(null!==n){var t,o=!1;return(t=(0,r._)(function(){var t,r,a,c,u,d,f,m,g,b,Z,C,k,S,_,E,T,R;return(0,i.Jh)(this,function(i){switch(i.label){case 0:switch(t=(0,h.C)(n.id),n.kind){case p.TH.Install:return[3,1];case p.TH.Uninstall:return[3,6]}return[3,11];case 1:v(n.id,p.C0.Installing),r=!0,a=!1,c=void 0;try{for(u=n.pkgs[Symbol.iterator]();!(r=(d=u.next()).done);r=!0)f=d.value,(0,l.j)(l.U3.PACKAGE_MANAGER_USED,{action:"installed",packageId:f.name})}catch(e){a=!0,c=e}finally{try{r||null==u.return||u.return()}finally{if(a)throw c}}i.label=2;case 2:return i.trys.push([2,4,,5]),[4,t.install({id:n.id,pkgs:n.pkgs,services:e})];case 3:return i.sent(),1===n.pkgs.length?w.showNotice("Installed ".concat(null!==(m=n.pkgs[0].name)&&void 0!==m?m:"package")):w.showNotice("Installed ".concat(n.pkgs.length," packages")),[3,5];case 4:return i.sent(),1===n.pkgs.length?w.showError("Failed to install ".concat(null!==(g=n.pkgs[0].name)&&void 0!==g?g:"package")):w.showError("Failed to install ".concat(n.pkgs.length," packages")),x(n.id,n.pkgs),[3,5];case 5:return[3,11];case 6:v(n.id,p.C0.Uninstalling),b=!0,Z=!1,C=void 0;try{for(k=n.pkgs[Symbol.iterator]();!(b=(S=k.next()).done);b=!0)_=S.value,(0,l.j)(l.U3.PACKAGE_MANAGER_USED,{action:"removed",packageId:_.name})}catch(e){Z=!0,C=e}finally{try{b||null==k.return||k.return()}finally{if(Z)throw C}}i.label=7;case 7:return i.trys.push([7,9,,10]),[4,t.uninstall({id:n.id,pkgs:n.pkgs,services:e})];case 8:return i.sent(),1===n.pkgs.length?w.showNotice("Removed ".concat(null!==(E=n.pkgs[0].name)&&void 0!==E?E:"package")):w.showNotice("Removed ".concat(n.pkgs.length," packages")),[3,10];case 9:return i.sent(),1===n.pkgs.length?w.showError("Failed to remove ".concat(null!==(T=n.pkgs[0].name)&&void 0!==T?T:"package")):w.showError("Failed to remove ".concat(n.pkgs.length," packages")),x(n.id,n.pkgs),[3,10];case 10:return[3,11];case 11:if(o)return[2];return[4,t.getInstalledPackages({id:n.id,services:e})];case 12:if(R=i.sent(),o)return[2];return y(n.id,R),v(n.id,p.C0.Idle),s(null),[2]}})}),function(){return t.apply(this,arguments)})(),function(){o=!0}}},[n]),null}function v(e){var t=e.children,n=(0,p.ns)();return(0,o.BX)(p.vN.Provider,{value:n,children:[(0,o.tZ)(m,{}),t]})}},33790:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(3796),i=n(88300);function o(e){var t=e.children,n=e.config,o=(0,i.$X)(i.Uk);return n.id&&o(n),(0,r.tZ)(r.HY,{children:t})}function a(e){var t=e.children,n=e.config,a=(0,i.ns)();return(0,r.tZ)(i.fj.Provider,{value:a,children:n?(0,r.tZ)(o,{config:n,children:t}):t})}},77049:function(e,t,n){n.d(t,{$X:function(){return Z},B2:function(){return B},C0:function(){return o},Hg:function(){return C},Mi:function(){return D},NC:function(){return G},OO:function(){return O},T9:function(){return _},TH:function(){return a},Wx:function(){return F},XD:function(){return x},Zq:function(){return R},cW:function(){return P},jh:function(){return X},np:function(){return V},ns:function(){return y},pN:function(){return S},te:function(){return L},vN:function(){return b},vO:function(){return T},w$:function(){return I},wY:function(){return E},z9:function(){return N},zi:function(){return z}});var r,i,o,a,l=n(42516),c=n(41733),s=n(30509),u=n(66626),d=n(78950),f=n(41974),h=n(49853),p=n(80786),m=n(21962),v=n(75271),g=n(70466);function y(){return(0,u._)((0,v.useState)(function(){return(0,h.MT)()}),1)[0]}(0,h.cn)({replId:"",packageManagers:{}}),(r=o||(o={})).Uninitialized="Uninitialized",r.Initializing="Initializing",r.Installing="Installing",r.Uninstalling="Uninstalling",r.Idle="Idle",(i=a||(a={})).Install="Install",i.Uninstall="Uninstall";var b=(0,v.createContext)(null);function w(){var e=(0,v.useContext)(b);if(!e)throw Error("Expected store in context");return e}var Z=function(e){return(0,p.b9)(e,{store:w()})};function x(e){return(0,m.lV)((0,v.useCallback)(function(t){return t(e)},[e]),{store:w()})}function C(e){return(0,p.Dv)(e,{store:w()})}(0,h.cn)(null),(0,h.cn)(null);var k=(0,h.cn)({});function S(e){var t,n=C(k);return e&&null!==(t=n[e])&&void 0!==t?t:[]}function _(){var e=Z(k);return function(t,n){e(function(e){return(0,f.Uy)(e,function(e){var r=e[t];if(!r||0===r.length){e[t]=n;return}var i=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0)!function(){var e=l.value;r.find(function(t){return t.name===e.name})||r.push(e)}()}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}})})}}function E(){var e=Z(k);return function(t,n){e(function(e){return(0,f.Uy)(e,function(e){var r=e[t];if(r&&0!==r.length){var i=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0)!function(){var e=l.value,t=r.findIndex(function(t){return t.name===e.name});-1!==t&&r.splice(t,1)}()}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}})})}}var T=(0,h.cn)({});function R(){var e=x(T);return function(t){var n;return null!==(n=e()[t])&&void 0!==n?n:null}}function D(){var e=Z(T);return function(t,n){e(function(e){return(0,s._)((0,c._)({},e),(0,l._)({},t,n))})}}var I=(0,h.cn)(null);function B(){return C(I)}var G=(0,h.cn)([]);function P(){return C(G)}var A=(0,h.cn)({});function L(e){var t,n=C(A);return e&&null!==(t=n[e])&&void 0!==t?t:[]}function N(){var e=x(A);return function(t){var n;return null!==(n=e()[t])&&void 0!==n?n:[]}}function O(){var e=Z(A);return function(t,n){e(function(e){return(0,s._)((0,c._)({},e),(0,l._)({},t,n.map(function(e){return"nix"===t?(0,s._)((0,c._)({},e),{name:(0,g.C)(e.name)}):e})))})}}var U=(0,h.cn)(null,function(e,t,n){var r=n.id,i=n.pkg;if(!i.name)throw Error("Package does not have a name.");t(G,function(e){return(0,f.Uy)(e,function(e){if(!e.find(function(e){return e.pkgs.find(function(t){return e.id===r&&t.name===i.name})})){var t=e.find(function(e){return"Install"===e.kind});t?t.pkgs.push(i):e.push({kind:"Install",id:r,pkgs:[i]})}})})});function X(){return Z(U)}var M=(0,h.cn)(null,function(e,t,n){var r=n.id,i=n.pkg;if(!i.name)throw Error("Package does not have a name.");t(G,function(e){return(0,f.Uy)(e,function(e){if(!e.find(function(e){return e.pkgs.find(function(t){return e.id===r&&t.name===i.name})})){var t=e.find(function(e){return"Uninstall"===e.kind});t?t.pkgs.push(i):e.push({kind:"Uninstall",id:r,pkgs:[i]})}})})});function F(){return Z(M)}(0,h.cn)(null);var W=(0,h.cn)(null,function(e,t,n){var r=(0,d._)(e(G)),i=r[0],o=r.slice(1);n===i&&(t(G,o),t(I,n))});function V(){return Z(W)}var H=(0,h.cn)(null,function(e,t,n){t(G,function(e){return(0,f.Uy)(e,function(e){var t=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value,c=l.pkgs.findIndex(function(e){return e.name===n});-1!==c&&l.pkgs.splice(c,1)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}})})});function z(){return Z(H)}},88300:function(e,t,n){n.d(t,{$X:function(){return m},Bm:function(){return y},Uk:function(){return v},ZR:function(){return g},fj:function(){return h},ns:function(){return f}});var r,i,o,a,l=n(66626),c=n(49853),s=n(80786),u=n(21962),d=n(75271);function f(){return(0,l._)((0,d.useState)(function(){return(0,c.MT)()}),1)[0]}(0,c.cn)({replId:"",packageManagers:{}}),(r=o||(o={})).Initializing="Initializing",r.Installing="Installing",r.Uninstalling="Uninstalling",r.Idle="Idle",(i=a||(a={})).Install="Install",i.Uninstall="Uninstall";var h=(0,d.createContext)(null);function p(){var e=(0,d.useContext)(h);if(!e)throw Error("Expected store in context");return e}var m=function(e){return(0,s.b9)(e,{store:p()})},v=(0,c.cn)(null);function g(){return(0,s.Dv)(v,{store:p()})}function y(){return(0,u.lV)((0,d.useCallback)(function(e){return e(v)},[v]),{store:p()})}(0,c.cn)(null)},21097:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(63257),i=n(3796),o=n(1373),a=n.n(o),l=n(65559);function c(e){var t=e.replTitle,n=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,r._)(t.filter(Boolean)).concat(["Replit"]).join(" - ")}((0,l.ex)(),t);return(0,i.tZ)(a(),{children:(0,i.tZ)("title",{children:n},"title")})}},12394:function(e,t,n){n.d(t,{Z:function(){return g}});var r=n(42516),i=n(3796),o=n(71357),a=n(22192),l=n(24766),c=n(93245),s=n(36809),u=n(63163),d=n(10578),f=n(62537),h=(0,a.$)(["maxWidth"]),p=h.cssVars,m=h.styleTokens,v=(0,s.X)({container:[u.l0.width("100%"),u.l0.minHeight("100%"),u.l0.center],centeredContent:[u.l0.width("100%"),u.l0.maxWidth(m.maxWidth),u.l0.colWithGap(16),u.l0.p(16),u.l0.center],imageWithHeader:[u.l0.colWithGap(16),u.l0.center,u.l0.flex.shrink(1),u.l0.textAlign.center],bodyText:[u.l0.textAlign.center]});function g(e){var t=e.pane,n=e.asciiArt,a=e.headerText,s=e.bodyText,u=e.body,h=e.action,m=e.icon,g=e.loading,y=e.maxWidth,b=(0,f.Se)(),w=b.getDescription(t),Z=(0,i.tZ)(b.Icon,{pane:t,size:48}),x=null!=u?u:w;void 0!==g&&g?x=(0,i.tZ)(c.G,{children:(0,i.BX)(l.xv,{css:v.bodyText,children:["Loading ",(0,i.tZ)(d.Z,{size:16})]})}):void 0!==s&&(x=(0,i.tZ)(c.G,{children:(0,i.tZ)(l.xv,{css:v.bodyText,multiline:!0,children:s})}));var C=Z;return void 0!==m?C=m:void 0!==n&&(C=(0,i.tZ)(o.Z,{art:n})),(0,i.tZ)(c.G,{css:v.container,style:(0,r._)({},p.maxWidth,"".concat(void 0===y?600:y,"px")),children:(0,i.BX)(c.G,{css:v.centeredContent,children:[(0,i.BX)(c.G,{css:v.imageWithHeader,children:[C,(0,i.tZ)(l.h4,{level:1,variant:"subheadDefault",multiline:!0,children:null!=a?a:w})]}),x,h]})})}},30446:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(3796),i=n(93245),o=n(36809),a=n(10578),l=n(63163),c=(0,o.X)({root:[l.l0.coverContainer,l.l0.center]});function s(){return(0,r.tZ)(i.G,{css:c.root,children:(0,r.tZ)(a.Z,{size:32})})}},45151:function(e,t,n){n.d(t,{g:function(){return f}});var r=n(3796),i=n(79904),o=n(86466),a=n(14548),l=n(93245),c=n(36809),s=n(63163),u=n(379);n(75271);var d=(0,c.X)({root:[{borderBottom:"1px solid ".concat(s.TV.outlineDimmest)}],inner:[s.l0.position.relative,{"::before":{content:'""',display:"block",position:"absolute",left:0,width:8,height:"100%",background:"linear-gradient(90deg, ".concat(s.TV.backgroundDefault," 0%, rgba(0,0,0,0) 100%);"),zIndex:1},"::after":{content:'""',display:"block",position:"absolute",right:0,width:8,height:"100%",background:"linear-gradient(270deg, ".concat(s.TV.backgroundDefault," 0%, rgba(0,0,0,0) 100%);"),zIndex:1}}],tabs:[s.l0.flex.row,s.l0.align.center,s.l0.overflowX("auto"),s.l0.pl(8)],tab:[o.gU.nofill,s.l0.borderRadius(0),s.l0.px(12),s.l0.position.relative,{transition:"none",height:38,marginRight:1,"::after":{content:'""',display:"block",position:"absolute",right:-2,width:1,height:16,backgroundColor:s.TV.outlineDimmest},"&:last-child":{marginRight:0,"::after":{display:"none"}}}],dot:[s.l0.position.absolute,s.l0.borderRadius(16),s.l0.width(8),s.l0.height(8),s.l0.backgroundColor.accentPrimaryStronger,{top:8,right:8}]}),f=function(e){var t=e.tabs,n=e.value,o=e.onClick;return(0,r.tZ)(a.Tg,{css:d.root,children:(0,r.tZ)(l.G,{css:d.inner,children:(0,r.tZ)(l.G,{css:d.tabs,children:t.map(function(e){return(0,r.BX)(l.G,{css:s.l0.position.relative,children:[(0,r.tZ)(i.zx,{style:{borderBottom:"1px solid "+(n===e.value?s.TV.foregroundDefault:"transparent")},css:d.tab,text:e.label,iconLeft:e.icon,iconRight:e.beta?(0,r.tZ)(u.D,{text:"Beta",colorway:"grey"}):void 0,onClick:function(){return o(e)}}),e.showDot?(0,r.tZ)(l.G,{css:d.dot}):null]},e.value)})})})})}},75982:function(e,t,n){n.d(t,{ms:function(){return D}});var r=n(66626),i=n(3796),o=n(71051),a=n(79904),l=n(9602),c=n(24766),s=n(93245),u=n(36809),d=n(7935),f=n(10055),h=n(63163),p=n(70145),m=n(19349),v=n(75271),g=n(66791),y=n(22630),b=n(68597),w=n(34030),Z=(0,u.X)({wrapper:[h.l0.py(6),h.l0.flex.row,h.l0.align.center,h.l0.backgroundColor.backgroundHigher],wrapperWarning:[h.l0.py(6),h.l0.flex.row,h.l0.align.center,h.l0.backgroundColor.orangeDimmest],body:[h.l0.flex.growAndShrink(1)],firstLine:[h.l0.px(6),h.l0.rowWithGap(2),h.l0.align.center,h.l0.flex.wrap,h.l0.maxWidth("100%"),h.l0.overflow("hidden")],secondLine:[h.l0.px(6),h.l0.rowWithGap(2),h.l0.align.center,h.l0.flex.wrap,h.l0.maxWidth("100%"),h.l0.overflow("hidden"),h.l0.color.foregroundDimmest],secondLineWarning:[h.l0.px(6),h.l0.rowWithGap(2),h.l0.align.center,h.l0.flex.wrap,h.l0.maxWidth("100%"),h.l0.overflow("hidden"),h.l0.color.orangeStrongest],buttons:[h.l0.flex.row,h.l0.pr(6)],verticalDivider:[h.l0.ml(6),h.l0.mr(6),h.l0.height("1em"),h.l0.width(1),h.l0.backgroundColor.foregroundDefault]});function x(e){var t=e.openNetworkingTool,n=e.onClose,r=e.onDontExposePort,o=e.onDoExposePort,a=e.firstLine,c=e.secondLine,u=e.renderSecondLine,h=e.renderDontExposeButton,p=e.renderDoExposeButton,m=e.isWarning,v=void 0!==m&&m;return(0,i.BX)(s.G,{css:v?Z.wrapperWarning:Z.wrapper,children:[(0,i.BX)(s.G,{css:Z.body,children:[(0,i.tZ)(s.G,{css:Z.firstLine,children:a}),u?(0,i.tZ)(s.G,{css:v?Z.secondLineWarning:Z.secondLine,children:c}):null]}),(0,i.BX)(s.G,{css:Z.buttons,children:[(0,i.tZ)(l.hU,{alt:"Networking tool",onClick:t,children:(0,i.tZ)(f.Z,{})}),void 0!==h&&h?(0,i.tZ)(l.hU,{alt:"Don't expose this port to the web",onClick:r,children:(0,i.tZ)(b.Z,{})}):null,void 0!==p&&p?(0,i.tZ)(l.hU,{alt:"Expose this port to the web",onClick:o,children:(0,i.tZ)(w.Z,{})}):null,(0,i.tZ)(l.hU,{alt:"Close",onClick:n,children:(0,i.tZ)(d.Z,{})})]})]})}function C(e){var t=e.configuration,n=e.openWebview,r=e.openNetworkingTool,o=e.onClose,l=e.onDontExposePort,s=e.renderSecondLine,u=(0,y.O2)(t.externalPort)?"{...}.replit.dev":"{...}.replit.dev:".concat(t.externalPort);return(0,i.tZ)(x,{openNetworkingTool:r,onClose:o,firstLine:(0,i.BX)(i.HY,{children:[(0,i.BX)(c.xv,{children:["Port :",t.localPort," opened on"]}),(0,i.tZ)(a.zx,{variant:"underlined",text:u,onClick:n})]}),secondLine:(0,i.BX)(i.HY,{children:[(0,i.tZ)(c.xv,{children:"You can manage this config in the"}),(0,i.tZ)(a.zx,{variant:"underlined",text:"Networking tool",onClick:r})]}),renderSecondLine:s,renderDontExposeButton:!0,onDontExposePort:l})}function k(e){var t=e.configuration,n=e.openNetworkingTool,r=e.onClose,o=e.renderSecondLine,l=e.onDoExposePort;return(0,i.tZ)(x,{openNetworkingTool:n,onClose:r,firstLine:"Port :".concat(t.localPort," opened, but not exposed to the web."),secondLine:(0,i.tZ)(a.zx,{variant:"underlined",text:"Expose this port?",onClick:n}),renderSecondLine:o,renderDoExposeButton:!0,onDoExposePort:l})}function S(e){var t=e.openNetworkingTool,n=e.configuration,r=e.onClose,o=e.renderSecondLine;return(0,i.tZ)(x,{isWarning:!0,openNetworkingTool:t,onClose:r,firstLine:"Port :".concat(n.localPort," opened, but all available external ports are reserved."),secondLine:(0,i.BX)(i.HY,{children:[(0,i.tZ)(c.xv,{children:"Remove an external port in"}),(0,i.tZ)(a.zx,{variant:"underlined",text:"port configuration",onClick:t}),(0,i.tZ)(c.xv,{children:"to open a new port."})]}),renderSecondLine:o})}function _(e){var t=e.openNetworkingTool,n=e.configuration,r=e.onClose,o=e.renderSecondLine;return(0,i.tZ)(x,{isWarning:!0,openNetworkingTool:t,onClose:r,firstLine:"Port :".concat(n.localPort," opened, but is not configured properly."),secondLine:(0,i.BX)(i.HY,{children:[(0,i.tZ)(c.xv,{children:"You can fix this in the"}),(0,i.tZ)(a.zx,{variant:"underlined",text:"Networking tool",onClick:t})]}),renderSecondLine:o})}function E(e){var t=e.openNetworkingTool,n=e.configuration,r=e.onClose,o=e.renderSecondLine;return(0,i.tZ)(x,{isWarning:!0,openNetworkingTool:t,onClose:r,firstLine:"Port :".concat(n.localPort," opened, but has missing configuration."),secondLine:(0,i.BX)(i.HY,{children:[(0,i.tZ)(c.xv,{children:"You can fix this in the"}),(0,i.tZ)(a.zx,{variant:"underlined",text:"Networking tool",onClick:t})]}),renderSecondLine:o})}function T(e){var t=e.configuration,n=e.openWebview,r=e.openNetworkingTool,o=e.onClose,a=e.onDontExposePort,l=e.onDoExposePort,c=e.renderSecondLine,s=t.type;switch(s){case p.DL.FORWARDED:return(0,i.tZ)(C,{configuration:t,openWebview:n,openNetworkingTool:r,onClose:o,renderSecondLine:c,onDontExposePort:a});case p.DL.INTERNAL_ONLY:return(0,i.tZ)(k,{configuration:t,openNetworkingTool:r,onClose:o,renderSecondLine:c,onDoExposePort:l});case p.DL.NO_MORE_EXTERNAL_PORTS_AVAILABLE:return(0,i.tZ)(S,{configuration:t,openNetworkingTool:r,onClose:o,renderSecondLine:c});case p.DL.MISCONFIGURED:return(0,i.tZ)(_,{configuration:t,openNetworkingTool:r,onClose:o,renderSecondLine:c});case p.DL.CONFIG_MISSING:return(0,i.tZ)(E,{configuration:t,openNetworkingTool:r,onClose:o,renderSecondLine:c});default:(0,g.Z)(s)}}function R(e){var t=e.configurations,n=e.openWebview,r=e.openNetworkingTool,l=e.onClose,u=e.renderSecondLine,d=t.filter(function(e){return e.type===p.DL.FORWARDED}),f=t.filter(function(e){return e.type!==p.DL.FORWARDED});return(0,i.tZ)(x,{isWarning:!1,openNetworkingTool:r,onClose:l,firstLine:(0,i.BX)(i.HY,{children:[d.length>0?(0,i.BX)(i.HY,{children:[(0,i.BX)(c.xv,{children:[d.length," ",(0,o.Z)("port",d.length)," ","opened on"]}),(0,i.tZ)(a.zx,{variant:"underlined",text:"{...}.replit.dev",onClick:n})]}):null,d.length>0&&f.length>0?(0,i.tZ)(s.G,{css:Z.verticalDivider}):null,f.length>0?(0,i.BX)(c.xv,{children:[f.length," ",(0,o.Z)("port",f.length)," ","did not open"]}):null]}),secondLine:(0,i.BX)(i.HY,{children:[(0,i.tZ)(c.xv,{children:"You can manage this config in the"}),(0,i.tZ)(a.zx,{variant:"underlined",text:"Networking tool",onClick:r})]}),renderSecondLine:u})}function D(e){var t=e.configurations,n=e.openWebview,o=e.openNetworkingTool,a=e.onClose,l=e.onDontExposePort,c=e.onDoExposePort,s=(0,m.e)("port-nudges"),u=(0,r._)((0,v.useState)(!1),2),d=u[0],f=u[1],h=!s.isDone,p=(0,r._)((0,v.useState)(!0),2),g=p[0],y=p[1];function b(){y(!1),null==a||a()}return((0,v.useEffect)(function(){0===t.length&&y(!0)},[t]),(0,v.useEffect)(function(){if(!s.isDone){if(t.length>0&&!d){f(!0);return}0===t.length&&d&&s.setAsDone()}},[t,s,d]),g&&0!==t.length)?1===t.length?(0,i.tZ)(T,{configuration:t[0],openNetworkingTool:o,openWebview:n,renderSecondLine:h,onClose:b,onDontExposePort:l,onDoExposePort:c}):(0,i.tZ)(R,{configurations:t,openNetworkingTool:o,openWebview:n,renderSecondLine:h,onClose:b}):null}},42935:function(e,t,n){n.d(t,{L:function(){return p}});var r=n(42516),i=n(3796),o=n(65034),a=n(49784),l=n(24766),c=n(69460),s=n(47136),u=n(36809),d=n(63163),f=n(93245),h=(0,u.X)({select:d.l0.minWidth(200),wrapper:[d.l0.rowWithGap(8),d.l0.align.center,{"@container (max-width: 400px)":[d.l0.flex.rowReverse]}],rightComponentWrapper:{"@container (max-width: 400px)":[d.l0.ml(8)]}});function p(e){var t,n=e.setting,u=e.currentValue,d=e.update,p=e.rightComponent,m=e.title,v=m;if(m||(v=n.description?(0,i.BX)(i.HY,{children:[(0,i.tZ)(l.xv,{multiline:!1,children:n.name}),(0,i.tZ)(l.xv,{variant:"small",color:"dimmest",children:n.description})]}):(0,i.tZ)(l.xv,{multiline:!1,children:n.name})),"select"===n.type)return(0,i.tZ)(c.$,{id:n.id,title:v,children:(0,i.BX)(f.G,{css:h.wrapper,children:[p?(0,i.tZ)(f.G,{css:h.rightComponentWrapper,children:p}):null,(0,i.tZ)(o.P,{"aria-label":n.name,style:{marginRight:0},items:n.options,defaultSelectedKey:null===(t=n.options.find(function(e){return u===e.editorPreferencesValue}))||void 0===t?void 0:t.id,onSelectionChange:function(e){var t;if("string"!=typeof n.editorPreferencesKey)throw Error("Setting does not have an editorPreferencesKey");d((0,r._)({},n.editorPreferencesKey,null===(t=n.options.find(function(t){return t.id===e}))||void 0===t?void 0:t.editorPreferencesValue))},css:h.select,dataCy:n.id,children:function(e){return(0,i.tZ)(s.m9,{id:e.id,label:e.title,dataCy:e.id,fixedHeight:32},e.id)}})]})});if("boolean"===n.type)return(0,i.tZ)(c.$,{id:n.id,title:v,children:(0,i.BX)(i.HY,{children:[p,(0,i.tZ)(a.r,{"aria-label":n.name,isSelected:u,onChange:function(e){if("string"!=typeof n.editorPreferencesKey)throw Error("Setting does not have an editorPreferencesKey");d((0,r._)({},n.editorPreferencesKey,e))},dataCy:n.id})]})});throw Error("Unsupported setting type")}},40652:function(e,t,n){n.d(t,{Ly:function(){return m},ZP:function(){return g},qm:function(){return b}});var r=n(66626),i=n(3796),o=n(29574),a=n(98433),l=n(91466),c=n(44935),s=n(24766),u=n(36809),d=n(63163),f=n(42935),h=n(69460),p=n(75271),m=[{value:"spaces",title:"spaces"},{value:"tabs",title:"tabs"}],v=(0,u.X)({sizeInput:[d.l0.py(6),d.l0.flex.growAndShrink(0),{border:"none"}]});function g(){var e=(0,o.Gn)("indentDetection","indentFormatPastes","indentIsSpaces","indentSize"),t=e.preferences,n=e.update;return(0,i.BX)(i.HY,{children:[(0,i.tZ)(f.L,{setting:a.z2.indentationDetection,currentValue:t.indentDetection,update:n}),(0,i.tZ)(l.R,{}),(0,i.tZ)(f.L,{setting:a.z2.indentFormatPastes,currentValue:t.indentFormatPastes,update:n}),(0,i.tZ)(l.R,{}),(0,i.tZ)(f.L,{setting:a.z2.indentIsSpaces,currentValue:t.indentIsSpaces,update:n}),(0,i.tZ)(l.R,{}),(0,i.tZ)(h.$,{id:"indentSize",title:(0,i.BX)(i.HY,{children:[(0,i.tZ)(s.xv,{multiline:!1,children:"Indentation Size"}),(0,i.tZ)(s.xv,{variant:"small",color:"dimmest",children:"The number of columns taken up by an indentation level."})]}),children:(0,i.tZ)(b,{css:v.sizeInput,size:t.indentSize,onChange:function(e){n({indentSize:e})}})})]})}function y(e){return null==e?2:("string"==typeof e&&(e=parseInt(e,10)),isNaN(e))?2:(Number.isInteger(e)||(e=Math.round(e)),e<1)?1:e>16?16:e}function b(e){var t=e.size,n=e.onChange,o=e.className,a=(0,r._)((0,p.useState)(null),2),l=a[0],s=a[1],u=null!==l?l:t.toString(),d=""===u?"6ch":u.length+5.5+"ch";return(0,i.tZ)(c.II,{type:"number",style:{width:d},className:o,min:1,max:16,value:u,onBlur:function(){return s(null)},onChange:function(e){var t=e.target.value.trim(),r=e.target.valueAsNumber;if(""===t||isNaN(r)){s(t);return}e.target.validity.valid?(s(null),n(y(r))):(s(t),""===t||isNaN(parseInt(t,10))||n(y(t)))}})}},69460:function(e,t,n){n.d(t,{$:function(){return d}});var r=n(3796),i=n(24766),o=n(93245),a=n(36809),l=n(63163),c=n(31089),s=n(75271),u=(0,a.X)({wrapper:[l.l0.rowWithGap(8),l.l0.justify.spaceBetween,l.l0.align.center,{"@container (max-width: 400px)":[l.l0.colWithGap(8),l.l0.align.start]}],inner:[l.l0.flex.growAndShrink(1)]});function d(e){var t=e.id,n=e.title,a=e.children,l=(0,c.U)()(t);return(0,r.BX)(o.G,{css:u.wrapper,children:[(0,r.tZ)(o.G,{css:u.inner,tag:"label",htmlFor:l,children:"string"==typeof n?(0,r.tZ)(i.xv,{multiline:!1,children:n}):n}),s.cloneElement(a,{id:l})]})}},1696:function(e,t,n){n.d(t,{Z:function(){return tk}});var r=n(3796),i=n(42965),o=n(94622),a=n(24766),l=n(93245),c=n(63163),s=n(36809),u=n(41733),d=n(30509),f=n(29574),h=n(14118),p=n(1567),m=n(96949),v=n(24281),g=n(91466),y=n(9602),b=n(22893),w=n(14548),Z=n(49784),x=n(10578),C=n(15323),k=n(98924),S=n(66626),_=n(99595),E=n(35820),T=n(81215),R=n(21262),D=n(71440),I=n(9122),B=n(76143);function G(){var e=(0,R._)(["\n  fragment ThemesSwitcherCustomTheme on CustomTheme {\n    id\n    title\n    isCurrentUserThemeAuthor\n    colorScheme\n  }\n"]);return G=function(){return e},e}function P(){var e=(0,R._)(["\n  query ThemesSwitcherCurrentUserAuthoredThemes(\n    $input: CurrentUserAuthoredThemesInput!\n  ) {\n    currentUser {\n      id\n      authoredThemes(input: $input) {\n        ... on CustomThemeConnection {\n          items {\n            id\n            ...ThemesSwitcherCustomTheme\n          }\n          pageInfo {\n            nextCursor\n            hasNextPage\n          }\n        }\n        ... on UnauthorizedError {\n          message\n        }\n        ... on UserError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return P=function(){return e},e}function A(){var e=(0,R._)(["\n  query ThemesSwitcherCurrentUserInstalledThemes(\n    $input: CurrentUserInstalledThemesInput!\n  ) {\n    currentUser {\n      id\n      installedThemes(input: $input) {\n        ... on InstalledThemeConnection {\n          items {\n            id\n            themeVersion {\n              id\n            }\n            customTheme {\n              id\n              ...ThemesSwitcherCustomTheme\n            }\n          }\n          pageInfo {\n            nextCursor\n            hasNextPage\n          }\n        }\n        ... on UnauthorizedError {\n          message\n        }\n        ... on UserError {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return A=function(){return e},e}var L={},N=(0,D.Ps)(G()),O=(0,D.Ps)(P(),N),U=(0,D.Ps)(A(),N),X=n(62477),M=n(75271),F=n(43544),W=function(e){var t=(0,S._)((0,M.useState)(0),2),n=t[0],r=t[1];return(0,F.Z)(function(){null!==e.current&&r(e.current.getBoundingClientRect().height)},[e]),n},V=n(52657),H=n(66177),z=n(86466),j=n(82549),q=n(1056),J=n(43133),Y=n(44629),$=n(30043),K=n(71145),Q=n(9834),ee=n.n(Q),et=(0,s.X)({self:[{border:"1px solid",borderColor:c.TV.outlineDimmest},c.l0.zIndex(5),c.l0.maxHeight(300),c.l0.position.absolute,c.l0.overflowY("auto"),c.l0.width("100%"),c.l0.left(0),c.l0.borderRadius(8),c.l0.flex.column],apron:[c.l0.flex.grow(1),{borderTop:"1px solid",borderTopColor:c.TV.outlineDimmest}],menuItems:[c.l0.flex.growAndShrink(1),c.l0.overflowY("auto"),{listStyle:"none"}],menuApronItem:[c.l0.p(8),c.l0.rowWithGap(12),c.l0.justify.start,c.l0.align.center,z.gU.listItem],menuApronWrapper:[c.l0.flex.column]}),en=(0,K.oM)(),er=function(e){var t=e.children,n=e.className,i=e.bottomOffset;return(0,r.BX)(w.Tg,{className:n,tag:"ul",elevated:!0,css:et.self,style:{bottom:"calc(".concat(i,"px + ").concat(c.TV.space8,")")},children:[(0,r.tZ)(l.G,{css:et.menuItems,children:t}),(0,r.tZ)(w.Tg,{css:et.apron,children:(0,r.BX)(l.G,{css:et.menuApronWrapper,children:[(0,r.tZ)(ee(),{legacyBehavior:!0,href:en.href,as:en.as,children:(0,r.BX)(l.G,{css:et.menuApronItem,children:[(0,r.tZ)(q.Z,{}),(0,r.tZ)(a.xv,{multiline:!1,children:"Explore Themes"})]})}),(0,r.tZ)(ee(),{legacyBehavior:!0,href:K.ZS.href,as:K.ZS.as,children:(0,r.BX)(l.G,{css:et.menuApronItem,children:[(0,r.tZ)($.Z,{}),(0,r.tZ)(a.xv,{multiline:!1,children:"Create a Theme"})]})})]})})]})},ei=(0,s.X)({trigger:[z.gU.filled,c.l0.p(8),c.l0.color.foregroundDefault,c.l0.border({width:0})],triggerContent:[c.l0.align.center,c.l0.rowWithGap(8)],chevron:[c.l0.transition.snappy],selectLabel:[c.l0.flex.growAndShrink(1),{textAlign:"left",lineHeight:c.TV.lineHeightHeaderBig}],menuWrapper:[c.l0.position.relative],sectionHeadings:[c.l0.p(8),c.l0.fontWeight.bold,c.l0.fontSize(12),{borderTop:"1px solid ".concat(c.TV.outlineDimmer),textTransform:"uppercase"}],officialHeading:[c.l0.p(8),c.l0.fontWeight.bold,c.l0.fontSize(12),{textTransform:"uppercase"}],showMoreWrapper:[c.l0.align.center],spinnerWrapper:[c.l0.p(8),c.l0.align.center]}),eo=l.K.li;function ea(e){var t=e.id,n=e.sections,i=e.initialSelectedItem,o=e.selectedItem,c=e.onChange,s=e.placeholder,f=e.dataCy,h=e.paginationOptions,p=(0,k._)(e,["id","sections","initialSelectedItem","selectedItem","onChange","placeholder","dataCy","paginationOptions"]),m=(0,M.useId)(),v=(0,V.Z)(c),g=(0,M.useRef)(null),b=W(g),w=Object.values(n).flat(),Z=(0,J.L7)((0,d._)((0,u._)({items:w,initialSelectedItem:i,onSelectedItemChange:function(e){var t=e.selectedItem;t&&v.current(t)},stateReducer:function(e,t){var n=t.type,r=t.changes;switch(n){case J.L7.stateChangeTypes.MenuKeyDownEnter:case J.L7.stateChangeTypes.MenuKeyDownSpaceButton:case J.L7.stateChangeTypes.ItemClick:return(0,d._)((0,u._)({},r),{isOpen:!0});default:return r}}},void 0!==o&&{selectedItem:o}),{id:m})),C=(0,H.Z)({onLoadMore:h.loadMore,rootMargin:"0px 0px 300px 0px"}).targetRef,S=function(e){var t,n=e.item,i=e.index;return(0,r.tZ)(eo,(0,d._)((0,u._)({},Z.getItemProps({item:n,index:i})),{"data-cy":n.dataCy,children:(0,r.tZ)(X.Z,{highlighted:i===Z.highlightedIndex,selected:n.id===(null===(t=Z.selectedItem)||void 0===t?void 0:t.id),title:n.title})}))};return(0,r.BX)(l.G,{id:t,dataCy:f,children:[(0,r.tZ)(Y.T,{children:(0,r.tZ)("label",(0,d._)((0,u._)({},Z.getLabelProps()),{children:"select a theme"}))}),(0,r.tZ)("button",(0,d._)((0,u._)({type:"button",css:ei.trigger},p,Z.getToggleButtonProps({ref:g})),{children:(0,r.BX)(l.G,{css:ei.triggerContent,children:[(0,r.tZ)(q.Z,{size:16}),Z.selectedItem?(0,r.tZ)(a.xv,{css:ei.selectLabel,multiline:!1,children:Z.selectedItem.title}):(0,r.tZ)(a.xv,{color:"dimmer",css:ei.selectLabel,multiline:!1,children:s}),(0,r.tZ)(j.Z,{rotate:Z.isOpen?180:0,css:ei.chevron})]})})),(0,r.tZ)("div",(0,d._)((0,u._)({},Z.getMenuProps()),{css:ei.menuWrapper,children:Z.isOpen&&w.length>0?(0,r.BX)(er,{bottomOffset:b,children:[(0,r.tZ)(a.xv,{color:"dimmer",css:ei.officialHeading,multiline:!1,children:"Official Themes"}),n.official.map(function(e,t){return(0,r.tZ)(S,{item:e,index:t},"".concat(e.id))}),n.authored.length?(0,r.BX)(r.HY,{children:[(0,r.tZ)(a.xv,{color:"dimmer",css:ei.sectionHeadings,multiline:!1,children:"Your Themes"}),n.authored.map(function(e,t){var i=n.official.length;return(0,r.tZ)(S,{item:e,index:i+t},"".concat(e.id))})]}):null,n.installed.length?(0,r.BX)(r.HY,{children:[(0,r.tZ)(a.xv,{color:"dimmer",css:ei.sectionHeadings,multiline:!1,children:"Community Themes"}),n.installed.map(function(e,t){var i=n.official.length+n.authored.length;return(0,r.tZ)(S,{item:e,index:i+t},"".concat(e.id))})]}):null,h.authoredHasNextPage||h.installedHasNextPage?(0,r.tZ)(l.G,{css:ei.showMoreWrapper,children:h.loading?(0,r.tZ)(l.G,{css:ei.spinnerWrapper,children:(0,r.tZ)(x.Z,{size:12})}):(0,r.tZ)(y.hU,{tooltipBehavior:"hidden",alt:"Show more",onClick:h.loadMore,ref:C,children:(0,r.tZ)(j.Z,{})})}):null]}):null}))]})}var el=n(14861),ec=n(97420),es=n(71658),eu=n(89107),ed=n(63257),ef=function(e,t){var n,r,i=t.fetchMoreResult;if((null===(n=e.currentUser)||void 0===n?void 0:n.authoredThemes.__typename)==="CustomThemeConnection"&&(null===(r=i.currentUser)||void 0===r?void 0:r.authoredThemes.__typename)==="CustomThemeConnection"){var o=e.currentUser.authoredThemes.items,a=i.currentUser.authoredThemes.items;return(0,d._)((0,u._)({},i),{currentUser:(0,d._)((0,u._)({},i.currentUser),{authoredThemes:(0,d._)((0,u._)({},i.currentUser.authoredThemes),{items:(0,ed._)(o).concat((0,ed._)(a))})})})}return i},eh=function(e,t){var n,r,i=t.fetchMoreResult;if((null===(n=e.currentUser)||void 0===n?void 0:n.installedThemes.__typename)==="InstalledThemeConnection"&&(null===(r=i.currentUser)||void 0===r?void 0:r.installedThemes.__typename)==="InstalledThemeConnection"){var o=e.currentUser.installedThemes.items,a=i.currentUser.installedThemes.items;return(0,d._)((0,u._)({},i),{currentUser:(0,d._)((0,u._)({},i.currentUser),{installedThemes:(0,d._)((0,u._)({},i.currentUser.installedThemes),{items:(0,ed._)(o).concat((0,ed._)(a))})})})}return i},ep=function(e){var t=e.authoredThemesData,n=e.installedThemesData,r=e.fetchMoreAuthored,i=e.fetchMoreInstalled;return(0,M.useCallback)(function(){var e,o;(null==t?void 0:null===(e=t.currentUser)||void 0===e?void 0:e.authoredThemes.__typename)==="CustomThemeConnection"&&t.currentUser.authoredThemes.pageInfo.hasNextPage?r({variables:{input:{after:t.currentUser.authoredThemes.pageInfo.nextCursor,count:100}},updateQuery:ef}):(null==n?void 0:null===(o=n.currentUser)||void 0===o?void 0:o.installedThemes.__typename)==="InstalledThemeConnection"&&n.currentUser.installedThemes.pageInfo.hasNextPage&&i({variables:{input:{after:n.currentUser.installedThemes.pageInfo.nextCursor,count:100}},updateQuery:eh})},[t,n,r,i])},em=function(e){var t,n,i,o,a,s,d,f,h=e.context,p=(0,k._)(e,["context"]),m=(0,M.useId)(),v=(0,_.Z)().showError,g=(t=(0,u._)({},L,{variables:{input:{count:100}},fetchPolicy:"network-only",ssr:!1,notifyOnNetworkStatusChange:!0,onError:function(e){return v(e.message)},onCompleted:function(e){var t,n=null===(t=e.currentUser)||void 0===t?void 0:t.authoredThemes;((null==n?void 0:n.__typename)==="UnauthorizedError"||(null==n?void 0:n.__typename)==="UserError")&&v(n.message)}}),I.a(O,t)),y=g.data,w=g.loading,Z=g.error,x=g.fetchMore,C=(0,S._)((n=(0,u._)({},L,{variables:{input:{count:100}},fetchPolicy:"network-only",ssr:!1,notifyOnNetworkStatusChange:!0,onError:function(e){return v(e.message)},onCompleted:function(e){var t,n=null===(t=e.currentUser)||void 0===t?void 0:t.installedThemes;((null==n?void 0:n.__typename)==="UnauthorizedError"||(null==n?void 0:n.__typename)==="UserError")&&v(n.message)}}),B.t(U,n)),2),R=C[0],D=C[1],G=D.data,P=D.loading,A=D.error,N=D.fetchMore,X=(0,el.F)(),F=X.setActiveTheme,W=X.isSaving,V=X.error,H=X.theme;(0,M.useEffect)(function(){var e,t=null==y?void 0:null===(e=y.currentUser)||void 0===e?void 0:e.authoredThemes;(null==t?void 0:t.__typename)!=="CustomThemeConnection"||t.pageInfo.hasNextPage||R()},[y,R]);var z=((null==G?void 0:null===(o=G.currentUser)||void 0===o?void 0:null===(i=o.installedThemes)||void 0===i?void 0:i.__typename)==="InstalledThemeConnection"?G.currentUser.installedThemes.items:[]).map(function(e){return e.customTheme}),j=(null==y?void 0:null===(s=y.currentUser)||void 0===s?void 0:null===(a=s.authoredThemes)||void 0===a?void 0:a.__typename)==="CustomThemeConnection"?y.currentUser.authoredThemes.items:[];(0,M.useEffect)(function(){V&&v(V.message)},[V,v]);var q=ep({authoredThemesData:y,installedThemesData:G,fetchMoreAuthored:x,fetchMoreInstalled:N}),J=(null==y?void 0:null===(d=y.currentUser)||void 0===d?void 0:d.authoredThemes.__typename)==="CustomThemeConnection"&&y.currentUser.authoredThemes.pageInfo.hasNextPage,Y=(null==G?void 0:null===(f=G.currentUser)||void 0===f?void 0:f.installedThemes.__typename)==="InstalledThemeConnection"&&G.currentUser.installedThemes.pageInfo.hasNextPage;if(Z||A)return(0,r.tZ)(l.G,{children:(0,r.tZ)(b.E,{colorway:"negative",text:"Something went wrong loading your themes"})});var $={official:es.T,authored:j,installed:z};return(0,r.tZ)(l.G,{children:(0,r.tZ)(ea,(0,u._)({css:[[W?E.p.backgroundPulse(ec.TV.accentPrimaryDefault,ec.TV.accentPrimaryDimmest):{}],c.l0.backgroundColor.backgroundDefault,{":not([disabled]):hover":{background:ec.TV.backgroundHigher}}],id:m,dataCy:"preferences-theme-dropdown",sections:$,disabled:W,paginationOptions:{loadMore:q,authoredHasNextPage:J,installedHasNextPage:Y,loading:w||P},selectedItem:(0,T.iG)(H)?H.customTheme:es.T.find(function(e){return e.id===H.id}),onChange:function(e){F(e.id),"number"==typeof e.id&&(0,eu.B4)({themeId:e.id,colorScheme:e.colorScheme,isAlreadyInstalled:!0,isAuthor:e.isCurrentUserThemeAuthor,context:h})}},p))})},ev=n(40652),eg=n(79904),ey=n(44935),eb=n(27840),ew=n(62835),eZ=n(69460);function ex(e){return e.slice().sort(function(e,t){return e-t})}var eC=(0,s.X)({ruler:[c.l0.py(4),c.l0.px(8),c.l0.rowWithGap(4),c.l0.align.center,c.l0.borderRadius(8)],remove:[c.l0.borderRadius(4)],title:[c.l0.pr(8),c.l0.overflow("visible"),c.l0.flex.shrink(0)],body:[c.l0.flex.row,c.l0.flex.wrapReverse,c.l0.align.start,c.l0.justify.end,c.l0.flex.growAndShrink(1),{gap:c.TV.space4}],list:[c.l0.flex.row,c.l0.flex.wrap,c.l0.flex.growAndShrink(1),c.l0.align.end,c.l0.justify.end,{gap:c.TV.space4}],add:[c.l0.rowWithGap(4),c.l0.align.center]});function ek(e){var t=e.pos,n=e.onRemove;return(0,r.BX)(w.Tg,{css:eC.ruler,elevated:!0,children:[(0,r.tZ)(a.xv,{multiline:!1,children:t}),(0,r.tZ)(y.hU,{css:eC.remove,alt:"Remove ruler",onClick:n,children:(0,r.tZ)(ew.Z,{})})]})}function eS(){var e=(0,S._)((0,M.useState)(!1),2),t=e[0],n=e[1],i=(0,S._)((0,M.useState)(80),2),o=i[0],c=i[1],s=(0,M.useRef)(null),u=(0,M.useRef)(null),d=-1===o,h=o>=0&&o<=1e3,p=(0,f.Gn)("rulers"),m=p.preferences,v=p.update,g=ex(m.rulers);return(0,r.tZ)(eZ.$,{id:"rulers",title:(0,r.tZ)(a.xv,{css:eC.title,multiline:!1,children:"Rulers"}),children:(0,r.BX)(l.G,{css:eC.body,children:[(0,r.tZ)(l.G,{css:eC.list,children:g.map(function(e,t){return(0,r.tZ)(ek,{pos:e,onRemove:function(){v({rulers:g.filter(function(e,n){return n!==t})})}},t)})}),t?(0,r.BX)(l.G,{css:eC.add,children:[(0,r.tZ)(ey.II,{ref:s,type:"number",style:{width:d?"6ch":o.toString().length+5.5+"ch"},value:o>=0?o.toString():"",onChange:function(e){if(""===e.target.value)c(-1);else{var t=parseInt(e.target.value,10);isNaN(t)||c(t)}},onKeyDown:function(e){"Escape"===e.key?(c(80),n(!1)):"Enter"===e.key&&h&&(v({rulers:ex((0,ed._)(g).concat([o]))}),n(!1),c(80))},onBlur:function(e){e.relatedTarget!==u.current&&(n(!1),c(80))},onFocus:function(e){e.target.select()},autoFocus:!0}),(0,r.tZ)(eg.zx,{ref:u,text:"Accept",colorway:"primary",iconLeft:(0,r.tZ)(eb.Z,{}),disabled:!h,onClick:function(){h&&(v({rulers:ex((0,ed._)(g).concat([o]))}),n(!1),c(80))},onBlur:function(e){e.relatedTarget!==s.current&&(n(!1),c(80))}})]}):(0,r.tZ)(r.HY,{children:g.length>=10?null:(0,r.tZ)(eg.zx,{text:"Add Ruler",iconLeft:(0,r.tZ)($.Z,{}),onClick:function(){return n(!0)}})})]})})}var e_=(0,s.X)({container:[c.l0.flex.row,c.l0.justify.spaceBetween,c.l0.align.start,{"@container (max-width: 400px)":[c.l0.colWithGap(8)]}],title:[c.l0.flex.growAndShrink(1)],body:[c.l0.colWithGap(12)],switchWrapper:[c.l0.rowWithGap(8),c.l0.align.center,c.l0.justify.end,{"@container (max-width: 400px)":[c.l0.flex.rowReverse]}],switchLabel:[{"@container (max-width: 400px)":[c.l0.ml(8)]}]});function eE(){var e=(0,f.Gn)("showLeadingWhitespace","showTrailingWhitespace","showEnclosedWhitespace","showSelectedWhitespace"),t=e.preferences,n=e.update;return(0,r.BX)(l.G,{css:e_.container,children:[(0,r.BX)(l.G,{css:e_.title,children:[(0,r.tZ)(a.xv,{children:"Show Whitespace"}),(0,r.tZ)(a.xv,{multiline:!0,variant:"small",color:"dimmest",children:"Make whitespace characters visible, such as tabs and spaces."})]}),(0,r.BX)(l.G,{css:e_.body,children:[(0,r.BX)(l.G,{css:e_.switchWrapper,tag:"label",children:[(0,r.tZ)(a.xv,{variant:"small",css:e_.switchLabel,children:"Leading"}),(0,r.tZ)(Z.r,{"aria-label":"Show leading whitespace",isSelected:t.showLeadingWhitespace,onChange:function(e){n({showLeadingWhitespace:e})}})]}),(0,r.BX)(l.G,{css:e_.switchWrapper,tag:"label",children:[(0,r.tZ)(a.xv,{variant:"small",css:e_.switchLabel,children:"Enclosed"}),(0,r.tZ)(Z.r,{"aria-label":"Show enclosed whitespace",isSelected:t.showEnclosedWhitespace,onChange:function(e){n({showEnclosedWhitespace:e})}})]}),(0,r.BX)(l.G,{css:e_.switchWrapper,tag:"label",children:[(0,r.tZ)(a.xv,{variant:"small",css:e_.switchLabel,children:"Trailing"}),(0,r.tZ)(Z.r,{"aria-label":"Show trailing whitespace",isSelected:t.showTrailingWhitespace,onChange:function(e){n({showTrailingWhitespace:e})}})]}),(0,r.BX)(l.G,{css:e_.switchWrapper,tag:"label",children:[(0,r.tZ)(a.xv,{variant:"small",css:e_.switchLabel,children:"Selected"}),(0,r.tZ)(Z.r,{"aria-label":"Show selected whitespace",isSelected:t.showSelectedWhitespace,onChange:function(e){n({showSelectedWhitespace:e})}})]})]})]})}var eT=n(93371),eR=n(7391),eD=n(98433);function eI(e){var t=e.preferences,n=e.update;return(0,r.tZ)(eZ.$,{id:"codeActionsOnSave",title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(a.xv,{multiline:!1,children:"Code Actions on Save"}),(0,r.tZ)(a.xv,{variant:"small",color:"dimmest",children:"Run 'Fix all' Code Actions for the current editor on save."})]}),children:(0,r.tZ)(Z.r,{"aria-label":"Code Actions on Save",isSelected:t.codeActionsOnSave,onChange:function(e){n({codeActionsOnSave:e})}})})}var eB=n(6466),eG=n(85995);function eP(e){var t=e.context,n=e.text,i=(0,S._)((0,M.useState)(!1),2),o=i[0],a=i[1];return(0,r.BX)(r.HY,{children:[(0,r.tZ)(eg.zx,{text:void 0===n?"Activate":n,colorway:"primary",onClick:function(){return a(!0)}}),(0,r.tZ)(eG.Z,{isOpen:o,onClose:function(){return a(!1)},type:"purchase",analyticsContext:{upgrade:{context:t}}})]})}var eA=n(37701),eL=n(22419),eN=n(25),eO=n(85983),eU=n(87387);function eX(){var e=(0,R._)(["\n  query CodeSuggestionPreferences {\n    currentUser {\n      id\n      userSubscriptionType\n    }\n  }\n"]);return eX=function(){return e},e}var eM={},eF=(0,D.Ps)(eX()),eW=n(42935),eV={titleContainer:[c.l0.rowWithGap(8),c.l0.align.center],upgradeRow:[c.l0.rowWithGap(8),c.l0.align.center,c.l0.justify.spaceBetween]};function eH(){var e,t,n=(0,h.P5)({controlName:"flag-code-suggestion-engine",logFlagToAnalytics:!1}),o=(e=(0,u._)({},eM,void 0),I.a(eF,e)).data,s=(null==o?void 0:null===(t=o.currentUser)||void 0===t?void 0:t.userSubscriptionType)===eO.HP.HackerPro,d=(0,i.Gv)((0,eR.useRouter)()),p=(0,eA.v)().isTeamWithAiDisabled,v=(0,f.Gn)("codeSuggestion","completeCodeEngine"),y=v.preferences,b=v.update,w=(0,eB.Z)().engine,Z=function(e){var t=b(e),n=!0,r=!1,i=void 0;try{for(var o,a=Object.entries(e)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=(0,S._)(o.value,2),c=l[0],s=l[1];(0,m.j)(m.U3.SETTINGS_TOGGLED,{settingChanged:c,updatedValue:s})}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t};return p?null:(0,r.BX)(l.G,{css:c.l0.colWithGap(12),children:[(0,r.tZ)(eW.L,{currentValue:y.codeSuggestion,update:Z,setting:eD.z2.codeSuggestion,title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(l.G,{css:eV.titleContainer,children:(0,r.tZ)(a.xv,{multiline:!1,children:"AI Code Completion"})}),(0,r.BX)(a.xv,{variant:"small",color:"dimmest",children:["Code completion provides inline ghost text suggestions while you code.",(0,r.tZ)("br",{}),"Press tab or swipe right on your mobile device to accept."]})]})}),s||d?null:(0,r.BX)(l.G,{css:eV.upgradeRow,children:[(0,r.tZ)(a.xv,{children:"Upgrade for full access to Replit AI"}),(0,r.tZ)(eP,{text:"Upgrade to Replit ".concat(eU.we),context:"workspace_settings_pane"})]}),n?(0,r.BX)(r.HY,{children:[(0,r.tZ)(g.R,{}),(0,r.tZ)(eW.L,{title:(0,r.BX)(r.HY,{children:[(0,r.BX)(l.G,{css:[c.l0.flex.row,c.l0.rowWithGap(8),c.l0.center,c.l0.justify.start],children:[(0,r.tZ)(a.xv,{multiline:!1,children:"AI Code Completion Engine"}),(0,r.tZ)(eL.u,{tooltip:"You are seeing this functionality because you have special permissions.",children:(0,r.tZ)(eN.Z,{})})]}),(0,r.BX)(a.xv,{variant:"small",color:"dimmest",children:["Current applied engine: ",w]})]}),currentValue:y.completeCodeEngine,update:Z,setting:eD.z2.completeCodeEngine})]}):null]})}function ez(e){var t=e.preferences,n=e.update;return(0,r.tZ)(eZ.$,{id:"formatOnSave",title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(a.xv,{multiline:!1,children:"Format on Save"}),(0,r.tZ)(a.xv,{variant:"small",color:"dimmest",children:"Controls whether files are automatically formatted when saved"})]}),children:(0,r.tZ)(Z.r,{"aria-label":"Format on Save",isSelected:t.formatOnSave,onChange:function(e){n({formatOnSave:e})}})})}var ej=n(90169),eq=n(96214);function eJ(){var e=(0,R._)(["\n  query GhostwriterChatCurrentUserQuery {\n    currentUser {\n      username\n      id\n      image\n      isStaff: hasRole(role: REPLIT_STAFF)\n      isVerified\n      userSubscriptionType\n    }\n  }\n"]);return eJ=function(){return e},e}var eY={},e$=(0,D.Ps)(eJ()),eK=n(76068),eQ=(0,ej.Zb)(),e0=ej.hx?[{title:"override",value:ej.hx}]:Array.from((0,ed._)(Object.entries(eK._)).concat([["custom",""]]),function(e){return{title:e[0],value:e[1]}}),e1=(0,ej.hN)()||ej.hx?e0[0]:e0[1];function e2(){var e,t,n,i=(0,h.P5)({controlName:"flag-ghostwriter-chat-engine-override",logFlagToAnalytics:!1}),o=(e=(0,u._)({},eY,void 0),I.a(e$,e)).data,s=(null==o?void 0:null===(t=o.currentUser)||void 0===t?void 0:t.isStaff)||!1,d=(0,f.Gn)("chatEngine","ghostwriterUseAdvancedModel"),p=d.preferences,v=d.update,b=(0,ej.vl)(),w=(0,S._)((0,M.useState)(!Object.values(e0).map(function(e){return e.value}).includes(eQ)),2),Z=w[0],x=w[1],k=(0,S._)((0,M.useState)(""),2),_=k[0],E=k[1],T=function(e){var t=v(e),n=!0,r=!1,i=void 0;try{for(var o,a=Object.entries(e)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=(0,S._)(o.value,2),c=l[0],s=l[1];(0,m.j)(m.U3.SETTINGS_TOGGLED,{settingChanged:c,updatedValue:s})}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t};return(0,r.BX)(r.HY,{children:[i?(0,r.BX)(r.HY,{children:[(0,r.tZ)(g.R,{}),(0,r.tZ)(eW.L,{setting:eD.z2.chatEngine,currentValue:p.chatEngine,update:T,title:(0,r.BX)(r.HY,{children:[(0,r.BX)(l.G,{css:[c.l0.flex.row,c.l0.rowWithGap(8),c.l0.center,c.l0.justify.start],children:[(0,r.tZ)(a.xv,{multiline:!1,children:"Advanced AI Chat Engine"}),(0,r.tZ)(eL.u,{tooltip:"You are seeing this functionality because you have special permissions. If set, this preference overrides the default advanced model.",children:(0,r.tZ)(eN.Z,{})})]}),(0,r.BX)(a.xv,{variant:"small",color:"dimmest",children:["Current applied engine: ",b]})]})})]}):null,(0,r.BX)(r.HY,{children:[(0,r.tZ)(g.R,{}),(0,r.tZ)(eW.L,{setting:eD.z2.ghostwriterUseAdvancedModel,currentValue:p.ghostwriterUseAdvancedModel,update:T})]}),s?(0,r.BX)(r.HY,{children:[(0,r.tZ)(g.R,{}),(0,r.tZ)(eZ.$,{id:"ghostwriterChatService",title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(l.G,{css:[c.l0.flex.row,c.l0.rowWithGap(8),c.l0.center,c.l0.justify.start],children:(0,r.tZ)(a.xv,{multiline:!1,children:"Ghostwriter Chat Service V2 "})}),(0,r.BX)(l.G,{css:[c.l0.colWithGap(8)],children:[(0,r.BX)(a.xv,{variant:"small",color:"dimmest",children:["Current endpoint: ",eQ]}),(0,r.tZ)(a.xv,{variant:"small",color:"dimmest",children:"Reloading window is required for change to take effect."})]})]}),children:(0,r.BX)(l.G,{css:c.l0.colWithGap(12),children:[(0,r.tZ)(eq.P,{css:[c.l0.minWidth(184)],initialSelectedItem:null!==(n=e0.find(function(e){return e.value===eQ}))&&void 0!==n?n:eQ?e0[e0.length-1]:e1,onChange:function(e){(null==e?void 0:e.title)!=="custom"?((0,ej.iX)(e.value),x(!1),window.location.reload()):x(!0)},items:e0}),Z?(0,r.BX)(l.G,{css:c.l0.rowWithGap(4),children:[(0,r.tZ)(ey.II,{value:_,onChange:function(e){E(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&(0,ej.iX)(_)}}),(0,r.tZ)(y.hU,{alt:"Update custom url",onClick:function(){(0,ej.iX)(_),window.location.reload()},children:eQ!==_?(0,r.tZ)(C.Z,{}):(0,r.tZ)(eb.Z,{})})]}):null]})})]}):null]})}function e3(e){var t=e.hideLayoutControl,n=e.className,o=e.resetLayout,s=(0,f.Gn)("isLayoutStacked","fontSize","minimapDisplay","wrapping","keyboardHandler","multiselectModifierKey","showFileTreeGitStatus","codeIntelligence","codeActionsOnSave","formatOnSave","semanticTokens","accessibleTerminal","shellBellAudio","webviewAutoOpenOnPortOpened","chatAudioNotification","forwardPortsAutomatically","acceptSuggestionOnCommitCharacter","enableCloseBracketMatching","highlightAiChatInDefaultLayout"),k=s.preferences,S=s.update,_=(0,i.Gv)((0,eR.useRouter)()),E=(0,i.T3)(),T=(0,eT.cR)(),R=(0,v.NJ)(),D=(0,h.P5)({controlName:"flag-draft-buffers",logFlagToAnalytics:!1}),I=(0,h.P5)({controlName:"flag-lsp-semantic-tokens",logFlagToAnalytics:!1}),B=(0,h.P5)({controlName:"flag-default-layout-ai-in-the-editor",logFlagToAnalytics:!1}),G=(0,h.P5)({controlName:"flag-default-layout-ai-pane",logFlagToAnalytics:!1}),P=function(e){Object.keys(e).forEach(function(t){var n=e[t];(0,m.j)(m.U3.SETTINGS_TOGGLED,{settingChanged:t,updatedValue:n})}),S(e)};if(!k)return null;var A=(0,d._)((0,u._)({},eD.z2.multiselectModifierKey),{options:eD.z2.multiselectModifierKey.options.map(function(e){return(0,d._)((0,u._)({},e),{title:(0,p.hp)("cmdOrCtrlKey"===e.id?p.LH.CMD_OR_CTRL_KEY:p.LH.ALT_KEY,R)})})});return(0,r.BX)(w.Tg,{className:n,background:"default",css:[c.l0.p(16),c.l0.colWithGap(12)],children:[t?null:(0,r.BX)(r.HY,{children:[(0,r.tZ)(eW.L,{setting:eD.z2.layout,update:P,currentValue:k.isLayoutStacked,rightComponent:o?(0,r.tZ)(y.hU,{alt:"Reset layout",onClick:function(){o.reset()},children:o.resetting?(0,r.tZ)(x.Z,{}):(0,r.tZ)(C.Z,{})}):null}),(0,r.tZ)(g.R,{})]}),(0,r.tZ)(eW.L,{setting:eD.z2.fontSize,update:P,currentValue:k.fontSize}),(0,r.tZ)(g.R,{}),(0,r.tZ)(eZ.$,{id:"acceptSuggestionOnCommitCharacter",title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(a.xv,{children:"Accept Suggestion on Commit Character"}),(0,r.BX)(a.xv,{variant:"small",color:"dimmest",children:["Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (",(0,r.tZ)("code",{children:";"}),") can be a commit character that accepts the suggestion and types the character."]})]}),children:(0,r.tZ)(Z.r,{"aria-label":"Accept suggestion on commit character",isSelected:k.acceptSuggestionOnCommitCharacter,onChange:function(e){P({acceptSuggestionOnCommitCharacter:e})}})}),(0,r.tZ)(g.R,{}),(0,r.tZ)(eZ.$,{id:"enableCloseBracketMatching",title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(a.xv,{children:"Auto close brackets"}),(0,r.tZ)(a.xv,{variant:"small",color:"dimmest",children:"Controls whether the editor should automatically close brackets after the user adds an opening bracket."})]}),children:(0,r.tZ)(Z.r,{"aria-label":"Auto close brackets",isSelected:k.enableCloseBracketMatching,onChange:function(e){P({enableCloseBracketMatching:e})}})}),(0,r.tZ)(g.R,{}),(0,r.tZ)(ev.ZP,{}),(0,r.tZ)(g.R,{}),D?(0,r.BX)(r.HY,{children:[(0,r.tZ)(eI,{preferences:k,update:P}),(0,r.tZ)(g.R,{}),(0,r.tZ)(ez,{preferences:k,update:P}),(0,r.tZ)(g.R,{})]}):null,(0,r.tZ)(eW.L,{setting:eD.z2.wrapping,update:P,currentValue:k.wrapping}),(0,r.tZ)(g.R,{}),E?null:(0,r.BX)(r.HY,{children:[(0,r.tZ)(eW.L,{setting:eD.z2.minimap,update:P,currentValue:k.minimapDisplay}),(0,r.tZ)(g.R,{})]}),(0,r.tZ)(eS,{}),(0,r.tZ)(g.R,{}),(0,r.tZ)(eW.L,{setting:eD.z2.keyboardHandler,update:P,currentValue:k.keyboardHandler}),(0,r.tZ)(g.R,{}),(0,r.tZ)(eW.L,{setting:A,update:P,currentValue:k.multiselectModifierKey}),(0,r.tZ)(g.R,{}),(0,r.tZ)(eW.L,{setting:eD.z2.showFileTreeGitStatus,update:P,currentValue:k.showFileTreeGitStatus}),(0,r.tZ)(g.R,{}),(0,r.tZ)(eH,{}),(0,r.tZ)(e2,{}),(0,r.tZ)(g.R,{}),(0,r.tZ)(eW.L,{setting:eD.z2.codeIntelligence,update:P,currentValue:k.codeIntelligence}),(0,r.tZ)(g.R,{}),I&&k.codeIntelligence?(0,r.BX)(r.HY,{children:[(0,r.tZ)(eW.L,{setting:eD.z2.semanticTokens,update:P,currentValue:k.semanticTokens}),(0,r.tZ)(g.R,{})]}):null,(0,r.tZ)(eE,{}),(0,r.tZ)(g.R,{}),(0,r.tZ)(eW.L,{setting:eD.z2.accessibleTerminal,update:P,currentValue:k.accessibleTerminal}),(0,r.tZ)(g.R,{}),(0,r.tZ)(eW.L,{setting:eD.z2.shellBellAudio,update:P,currentValue:k.shellBellAudio}),(0,r.tZ)(g.R,{}),(0,r.tZ)(eZ.$,{id:"webviewAutoOpenOnPortOpened",title:(0,r.BX)(r.HY,{children:[(0,r.tZ)(a.xv,{children:T?"Automatic Webview (unavailable in this Repl)":"Automatic Webview"}),(0,r.tZ)(a.xv,{variant:"small",color:"dimmest",children:"Open a webview automatically when a port is open"}),T?(0,r.tZ)(l.G,{css:[c.l0.pt(8),c.l0.maxWidth("calc(100% - 12px)")],children:(0,r.tZ)(b.E,{colorway:"orange",text:'This preference is unavailable in Extension Repls. To view custom tools in dev mode, click the "Preview" button in Extension Devtools instead.'})}):null]}),children:(0,r.tZ)(Z.r,{"aria-label":"Automatic Webview",isSelected:k.webviewAutoOpenOnPortOpened,isDisabled:T,onChange:function(e){P({webviewAutoOpenOnPortOpened:e})}})}),(0,r.tZ)(g.R,{}),(0,r.tZ)(eW.L,{setting:eD.z2.forwardPortsAutomatically,update:P,currentValue:k.forwardPortsAutomatically}),_?null:(0,r.BX)(r.HY,{children:[(0,r.tZ)(g.R,{}),(0,r.tZ)(eZ.$,{id:"theme",title:"Theme",children:(0,r.tZ)(em,{css:[c.l0.minWidth(184),c.l0.backgroundColor.backgroundHigher],context:eu.HY.WorkspacePreferencesPane})})]}),B||G?(0,r.BX)(r.HY,{children:[(0,r.tZ)(g.R,{}),(0,r.tZ)(eW.L,{setting:eD.z2.highlightAiChatInDefaultLayout,update:P,currentValue:k.highlightAiChatInDefaultLayout})]}):null,(0,r.tZ)(g.R,{}),(0,r.tZ)(eW.L,{setting:eD.z2.chatAudioNotification,update:P,currentValue:k.chatAudioNotification})]})}var e4=n(31089),e8=n(62279),e6=n(4573),e5=n(84238),e7=n(83059),e9=n(38975),te=n(39819),tt=n(19602),tn=n(89313),tr=n(91372),ti=n(54300),to=n(11195),ta=n(47767),tl=n(70625),tc=n(10126);function ts(e){var t=(0,M.useRef)(null),n=(0,M.useRef)([]);function r(){t.current&&clearTimeout(t.current),n.current=[]}function i(t){e({type:"success",shortcut:t.length>1?[t[0],t[1]]:t[0]}),r()}return{onKeyDown:function(r){var o=t.current,a=n.current;r.preventDefault(),r.stopPropagation(),o&&clearTimeout(o);var l=(0,tl.lc)(r);if(l){if((0,tl.ZG)(l)){e({type:"update",recorded:a.length?[a[0],l]:[l]});return}if(a.length>0&&"Enter"===l){i(a);return}a.push(l),e({type:"update",recorded:a});var c=2===a.length?0:600;t.current=setTimeout(function(){return i(a)},c)}},startRecording:function(){r(),e({type:"start"})},stopRecording:function(){r(),e({type:"stop"})}}}var tu=(0,s.X)({root:[c.l0.colWithGap(8)],row:[c.l0.rowWithGap(8),c.l0.align.center,c.l0.minHeight(28)],left:[c.l0.colWithGap(2),c.l0.flex.grow(0),c.l0.flex.shrink(1)],right:[c.l0.rowWithGap(16),c.l0.align.center,c.l0.justify.end,c.l0.position.relative,c.l0.flex.grow(1),c.l0.flex.shrink(0)],recordingRow:[c.l0.flex.column,c.l0.align.center,c.l0.justify.end],recordingRowInner:[c.l0.rowWithGap(8),c.l0.align.center],recordingRowKeys:[c.l0.position.relative],recordingRowHint:[c.l0.position.absolute,c.l0.top(20),c.l0.right(0),{fontStyle:"italic"}],recordingRowPlaceholder:[c.l0.display.flex,c.l0.align.baseline,c.l0.rowWithGap(4),{fontStyle:"italic"}],keys:[c.l0.display.inlineFlex,c.l0.rowWithGap(12)],secondaryText:[c.l0.display.flex,c.l0.flex.row,c.l0.align.center,c.l0.rowWithGap(4)],secondaryTextId:[c.l0.flex.grow(1),c.l0.flex.shrink(0)],secondaryTextDescription:[c.l0.flex.grow(0),c.l0.flex.shrink(1),c.l0.color.foregroundDimmest],buttons:[c.l0.rowWithGap(4)]}),td=(0,s.X)({root:[c.l0.rowWithGap(8),c.l0.align.center],recordingRow:[c.l0.rowWithGap(4),c.l0.align.center],input:[{opacity:0,width:1}],searchingText:[{fontStyle:"italic"}]});function tf(e){var t,n,i,o,s=e.command,u=e.filter,d=e.shortcutsToCommands,f=e.onViewShortcutConflicts,h=(0,tc.r3)(),p=(0,tc.wU)(),m=(0,tc.V_)(s.id),v=(0,S._)((0,M.useState)(null),2),g=v[0],w=v[1],Z=ts(function(e){switch(e.type){case"start":w({recorded:[]});return;case"stop":w(null);return;case"update":w({recorded:e.recorded});return;case"success":var t=(0,tl.SG)(e.shortcut);if(!t||h(s.id,t)){w(null);return}w(null);return;case"error":w(function(t){var n;return{error:e.message,recorded:null!==(n=null==t?void 0:t.recorded)&&void 0!==n?n:[]}});return}}),x=Z.stopRecording,k=Z.startRecording,_=Z.onKeyDown,E=(0,e5.Z)(function(){return x()},[]),T=!!g;ty(T);var R=null!==(o=null==g?void 0:g.recorded)&&void 0!==o?o:[],D=null==g?void 0:g.error,I=u.length>0,B=null===(t=e9.Z.match(u,s.name))||void 0===t?void 0:t.ranges,G=null===(n=e9.Z.match(u,s.id))||void 0===n?void 0:n.ranges,P=(null==s?void 0:s.description)?null===(i=e9.Z.match(u,s.description))||void 0===i?void 0:i.ranges:void 0,A=(0,e7.Z)(function(){return u.replaceAll('"',"").split("-").map(function(e){return e.toLowerCase()})},[u]);return(0,r.BX)(l.G,{css:tu.root,"data-testid":s.id,children:[(0,r.BX)(l.G,{css:tu.row,children:[(0,r.BX)(l.G,{css:tu.left,children:[(0,r.tZ)(e6.x,{text:s.name,highlight:B,dimmed:I}),(0,r.BX)(a.xv,{variant:"small",css:tu.secondaryText,multiline:!1,children:[I?(0,r.tZ)(e6.x,{css:tu.secondaryTextId,text:s.id,highlight:G,dimmed:I}):null,s.description?(0,r.BX)(r.HY,{children:[I?(0,r.tZ)(a.xv,{color:"dimmest",multiline:!1,children:""}):null,(0,r.tZ)(e6.x,{css:tu.secondaryTextDescription,text:s.description,highlight:P,dimmed:I})]}):null]})]}),(0,r.BX)(l.G,{innerRef:T?E:void 0,css:tu.right,children:[T?(0,r.tZ)(to.MT,{autoFocus:!0,restoreFocus:!0,children:(0,r.tZ)("input",{onKeyDown:_,css:td.input})}):null,s.shortcut&&!T&&d.length>1?(0,r.tZ)(y.hU,{"data-testid":"View conflicts",alt:"View conflicts",onClick:function(){M.startTransition(function(){s.shortcut&&f(th([s.shortcut]))})},children:(0,r.tZ)(ti.Z,{color:c.TV.foregroundDimmer})}):null,s.shortcut&&!T?(0,r.tZ)(ta.bM,{small:!0,keyCombo:s.shortcut,match:A}):null,s.shortcut||T?null:(0,r.BX)(r.HY,{children:[(0,r.tZ)(eg.zx,{size:"small",variant:"outlined",iconLeft:(0,r.tZ)($.Z,{}),text:"Add shortcut",onClick:function(){return k()}}),m?(0,r.tZ)(y.hU,{alt:"Reset",onClick:function(){return h(s.id,m)},children:(0,r.tZ)(C.Z,{})}):null]}),T?(0,r.tZ)(l.G,{css:tu.recordingRow,children:(0,r.BX)(l.G,{css:tu.recordingRowInner,children:[(0,r.tZ)(l.G,{css:tu.recordingRowKeys,children:R.length>0?(0,r.tZ)(l.G,{css:tu.keys,children:R.map(function(e,t){return(0,r.tZ)(ta.bM,{small:!0,keyCombo:e},"".concat(e,"-").concat(t))})}):(0,r.tZ)(a.xv,{multiline:!1,color:"dimmest",css:tu.recordingRowPlaceholder,children:"Recording"})}),(0,r.tZ)(y.hU,{alt:"Stop",onClick:function(){return x()},children:(0,r.tZ)(tZ,{})})]})}):null,s.shortcut&&!T?(0,r.BX)(l.G,{css:tu.buttons,children:[m&&m!==s.shortcut?(0,r.tZ)(y.hU,{alt:"Reset",onClick:function(){return h(s.id,m)},children:(0,r.tZ)(C.Z,{})}):null,(0,r.tZ)(y.hU,{alt:"Change",onClick:function(){return k()},children:(0,r.tZ)(tn.Z,{})}),(0,r.tZ)(y.hU,{alt:"Remove",onClick:function(){return p(s.id)},children:(0,r.tZ)(tt.Z,{})})]}):null]})]}),D?(0,r.tZ)(b.E,{icon:(0,r.tZ)(ti.Z,{}),colorway:"warning",text:D,closable:!0,closeAction:function(){return w(function(e){var t;return{recorded:null!==(t=null==e?void 0:e.recorded)&&void 0!==t?t:[]}})}}):null]})}function th(e){var t=e.flat();return t.length>1?t.map(function(e){return th([e])}).join(" "):(0,tl.QR)(t[0]).map(function(e){return'"'.concat(e,'"')}).join("-").replaceAll(" ","space")}var tp=(0,s.X)({root:[c.l0.colWithGap(8),c.l0.p(0)],surface:[c.l0.pt(8),c.l0.borderRadius(8),c.l0.colWithGap(12)]});function tm(e){var t=e.search,n=e.setSearch,i=(0,M.useRef)(null),o=(0,S._)((0,M.useState)(!1),2),c=o[0],s=o[1];ty(c);var u=ts(function(e){var t,r,o;switch(e.type){case"start":s(!0),n(""),null==i||null===(t=i.current)||void 0===t||t.focus();return;case"stop":case"error":s(!1),null==i||null===(r=i.current)||void 0===r||r.focus(),null==i||null===(o=i.current)||void 0===o||o.select();return;case"success":n(th([e.shortcut]));return;case"update":n(th(e.recorded));return}}),d=u.stopRecording,f=u.startRecording,h=u.onKeyDown;return(0,r.BX)(l.G,{css:td.root,children:[(0,r.tZ)(to.MT,{children:(0,r.tZ)(ey.II,{ref:i,placeholder:c?"Searching with pressed keys. Press Escape to exit":"Type to search keyboard shortcuts",onBlur:c?d:void 0,onChange:function(e){n(e.currentTarget.value)},onKeyDown:c?function(e){"Escape"===e.key?d():h(e)}:void 0,value:t})}),(0,r.tZ)(l.G,{css:td.recordingRow,children:c?(0,r.BX)(r.HY,{children:[(0,r.tZ)(a.xv,{color:"dimmest",css:td.searchingText,multiline:!1,children:"Searching"}),(0,r.tZ)(y.hU,{alt:"Stop Recording",onClick:d,children:(0,r.tZ)(tZ,{})})]}):(0,r.tZ)(y.hU,{alt:"Record Keys",onClick:f,children:(0,r.tZ)(tr.Z,{})})}),(0,r.tZ)(y.hU,{alt:"Clear Input",disabled:0===t.length,onClick:function(){var e;n(""),null==i||null===(e=i.current)||void 0===e||e.focus()},children:(0,r.tZ)(ew.Z,{})})]})}function tv(){var e=(0,S._)((0,M.useState)(""),2),t=e[0],n=e[1],i=(0,M.useDeferredValue)(t);return(0,r.BX)(l.G,{css:tp.root,children:[(0,r.tZ)(tm,{search:t,setSearch:n}),(0,r.tZ)(tg,{search:i,setSearch:n})]})}var tg=M.memo(function(e){var t=e.search,n=e.setSearch,i=(0,tc.xF)(),o=(0,e7.Z)(function(){return(0,ed._)(i.values())},[i]),a=(0,M.useMemo)(function(){return e9.Z.filter(t,o,{extract:function(e){var t="".concat(e.name," ").concat(e.id);return e.description&&(t+=" ".concat(e.description)),e.shortcut&&(t+=" ".concat(th([e.shortcut]))),t}})},[t,o]),l=(0,M.useMemo)(function(){return a.reduce(function(e,t){var n=t.original,r=n.shortcut;if(!r)return e;var i=e.get(r);return i?i.push(n):i=[n],e.set(r,i),e},new Map)},[a]);return a.length>0?(0,r.tZ)(w.Tg,{css:tp.surface,children:a.map(function(e,i){var o;return(0,r.BX)(M.Fragment,{children:[i>0?(0,r.tZ)(w.Tg,{elevated:!0,style:{height:1}}):null,(0,r.tZ)(tf,{command:e.original,filter:t,shortcutsToCommands:null!==(o=l.get(e.original.shortcut))&&void 0!==o?o:[],onViewShortcutConflicts:n})]},e.original.id)})}):null});function ty(e){var t="You have unsaved changes";(0,M.useEffect)(function(){var n=function(e){return e.preventDefault(),e.returnValue=t,t};if(e)return window.addEventListener("beforeunload",n),function(){window.removeEventListener("beforeunload",n)}},[e])}var tb=(0,e8.F4)("0%{transform:scale(1);}40%{transform:scale(1.3);}100%{transform:scale(1);}"),tw=(0,s.X)({background:[{animationName:tb,animation:"".concat(tb," 2s cubic-bezier(0.4, 0, 0.6, 1) infinite"),boxShadow:"0 0 10px ".concat(c.TV.redStronger)},c.l0.height(11),c.l0.width(11),c.l0.borderRadius("full"),c.l0.position.absolute],container:[c.l0.position.relative,c.l0.align.center,c.l0.justify.center],icon:[{zIndex:1}]});function tZ(){return(0,r.BX)(l.G,{css:tw.container,children:[(0,r.tZ)(te.Z,{css:tw.icon,color:c.TV.redStronger}),(0,r.tZ)(l.G,{css:tw.background})]})}function tx(){var e=(0,e4.U)()("keyboard_shortcuts");return(0,r.BX)(w.Tg,{background:"default",css:[c.l0.px(16),c.l0.pb(16),c.l0.colWithGap(12)],children:[(0,r.tZ)(l.G,{tag:"label",htmlFor:e}),(0,r.tZ)(tv,{})]})}var tC=(0,s.X)({headerContainer:[c.l0.flex.column,c.l0.justify.center,c.l0.px(16),c.l0.py(8)],subheading:[{fontStyle:"italic"},c.l0.color.foregroundDimmer,c.l0.mt(8),c.l0.mb(8)],tabs:[{width:"100%"}],tabList:[{"[aria-selected=true]":[c.l0.fontWeight.medium]}],tab:[c.l0.py(8),c.l0.px(16)]});function tk(e){var t=e.hideLayoutControl,n=e.resetLayout,c=(0,i.T3)();return(0,r.BX)(r.HY,{children:[(0,r.BX)(l.G,{css:tC.headerContainer,children:[(0,r.tZ)(a.h4,{variant:"subheadBig",level:3,children:"User Settings"}),(0,r.tZ)(a.xv,{variant:"small",css:tC.subheading,children:"The following settings apply to your account and will be used across all your Repls."})]}),c?(0,r.tZ)(e3,{hideLayoutControl:t,resetLayout:n}):(0,r.tZ)(l.G,{children:(0,r.BX)(o.mQ,{css:tC.tabs,children:[(0,r.BX)(o.td,{withDividers:!1,css:tC.tabList,children:[(0,r.tZ)(o.OK,{css:tC.tab,children:"Editor preferences"}),(0,r.tZ)(o.OK,{css:tC.tab,children:"Keyboard shortcuts"})]}),(0,r.BX)(o.nP,{children:[(0,r.tZ)(o.x4,{children:(0,r.tZ)(e3,{resetLayout:n})}),(0,r.tZ)(o.x4,{children:(0,r.tZ)(tx,{})})]})]})})]})}},71323:function(e,t,n){n.d(t,{An:function(){return u},r:function(){return f}});var r=n(41733),i=n(21262),o=n(71440),a=n(82303);function l(){var e=(0,i._)(["\n  fragment CreateProjectBeforeForkReplContext on Repl {\n    id\n    title\n    description\n    publishedAs\n    user {\n      id\n      username\n    }\n    deployment {\n      activeRelease {\n        id\n      }\n    }\n    org {\n      id\n    }\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i._)(["\n  mutation CreateProjectBeforeFork($input: CreateProjectInput!) {\n    createProject(input: $input) {\n      __typename\n      ... on Error {\n        message\n      }\n      ... on Project {\n        id\n        mainRepl {\n          id\n          project {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return c=function(){return e},e}var s={},u=(0,o.Ps)(l()),d=(0,o.Ps)(c());function f(e){var t=(0,r._)({},s,e);return a.D(d,t)}},69615:function(e,t,n){n.d(t,{G:function(){return s}});var r=n(3796),i=n(93245),o=n(36809),a=n(63163),l=n(97420),c=(0,o.X)({container:[{maskImage:"linear-gradient(to right, white 80%, transparent)"}],svg:[a.l0.width("auto"),a.l0.height("auto")]}),s=function(e){var t=e.className;return(0,r.tZ)(i.G,{className:t,css:c.container,children:(0,r.BX)("svg",{viewBox:"0 0 448 59",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.tZ)("path",{d:"M28 14.5C56 14.5 56 44.5 84 44.5",stroke:l.TV.accentPositiveDimmest}),(0,r.tZ)("path",{d:"M196 14.5C224 14.5 224 44.5 252 44.5",stroke:l.TV.accentPositiveDimmest}),(0,r.tZ)("path",{d:"M280 14.5C308 14.5 308 44.5 336 44.5",stroke:l.TV.accentPositiveDimmest}),(0,r.tZ)("path",{d:"M364 14.5C392 14.5 392 44.5 420 44.5",stroke:l.TV.accentPositiveDimmest}),(0,r.tZ)("path",{d:"M168 14.5C140 14.5 140 44.5 112 44.5",stroke:l.TV.accentPositiveDimmest}),(0,r.tZ)("path",{d:"M112 14.5C140 14.5 140 44.5 168 44.5",stroke:l.TV.accentPositiveDimmest}),(0,r.tZ)("path",{d:"M336 14.5C308 14.5 308 44.5 280 44.5",stroke:l.TV.accentPositiveDimmest}),(0,r.tZ)("path",{d:"M420 14.5C392 14.5 392 44.5 364 44.5",stroke:l.TV.accentPositiveDimmest}),(0,r.tZ)("path",{d:"M252 14.5C224 14.5 224 44.5 196 44.5",stroke:l.TV.accentPositiveDimmest}),(0,r.tZ)("rect",{width:"28",height:"28",rx:"4",fill:l.TV.accentPositiveDimmest}),(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.6868 9.64645C11.8821 9.84171 11.8821 10.1583 11.6868 10.3536L8.04036 14L11.6868 17.6464C11.8821 17.8417 11.8821 18.1583 11.6868 18.3536C11.4915 18.5488 11.175 18.5488 10.9797 18.3536L6.9797 14.3536C6.78444 14.1583 6.78444 13.8417 6.9797 13.6464L10.9797 9.64645C11.175 9.45118 11.4915 9.45118 11.6868 9.64645ZM16.313 9.64645C16.5083 9.45118 16.8249 9.45118 17.0201 9.64645L21.0201 13.6464C21.2154 13.8417 21.2154 14.1583 21.0201 14.3536L17.0201 18.3536C16.8249 18.5488 16.5083 18.5488 16.313 18.3536C16.1178 18.1583 16.1178 17.8417 16.313 17.6464L19.9595 14L16.313 10.3536C16.1178 10.1583 16.1178 9.84171 16.313 9.64645Z",fill:l.TV.accentPositiveStrongest}),(0,r.tZ)("rect",{x:"84",y:"31",width:"28",height:"28",rx:"4",fill:l.TV.accentPositiveDimmest}),(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M95.6868 40.6464C95.8821 40.8417 95.8821 41.1583 95.6868 41.3536L92.0404 45L95.6868 48.6464C95.8821 48.8417 95.8821 49.1583 95.6868 49.3536C95.4915 49.5488 95.175 49.5488 94.9797 49.3536L90.9797 45.3536C90.7844 45.1583 90.7844 44.8417 90.9797 44.6464L94.9797 40.6464C95.175 40.4512 95.4915 40.4512 95.6868 40.6464ZM100.313 40.6464C100.508 40.4512 100.825 40.4512 101.02 40.6464L105.02 44.6464C105.215 44.8417 105.215 45.1583 105.02 45.3536L101.02 49.3536C100.825 49.5488 100.508 49.5488 100.313 49.3536C100.118 49.1583 100.118 48.8417 100.313 48.6464L103.959 45L100.313 41.3536C100.118 41.1583 100.118 40.8417 100.313 40.6464Z",fill:l.TV.accentPositiveStronger}),(0,r.tZ)("rect",{x:"168",y:"31",width:"28",height:"28",rx:"4",fill:l.TV.accentPositiveDimmest}),(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M179.687 40.6464C179.882 40.8417 179.882 41.1583 179.687 41.3536L176.04 45L179.687 48.6464C179.882 48.8417 179.882 49.1583 179.687 49.3536C179.492 49.5488 179.175 49.5488 178.98 49.3536L174.98 45.3536C174.784 45.1583 174.784 44.8417 174.98 44.6464L178.98 40.6464C179.175 40.4512 179.492 40.4512 179.687 40.6464ZM184.313 40.6464C184.508 40.4512 184.825 40.4512 185.02 40.6464L189.02 44.6464C189.215 44.8417 189.215 45.1583 189.02 45.3536L185.02 49.3536C184.825 49.5488 184.508 49.5488 184.313 49.3536C184.118 49.1583 184.118 48.8417 184.313 48.6464L187.959 45L184.313 41.3536C184.118 41.1583 184.118 40.8417 184.313 40.6464Z",fill:l.TV.accentPositiveStronger}),(0,r.tZ)("rect",{x:"252",y:"31",width:"28",height:"28",rx:"4",fill:l.TV.accentPositiveDimmest}),(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M263.687 40.6464C263.882 40.8417 263.882 41.1583 263.687 41.3536L260.04 45L263.687 48.6464C263.882 48.8417 263.882 49.1583 263.687 49.3536C263.492 49.5488 263.175 49.5488 262.98 49.3536L258.98 45.3536C258.784 45.1583 258.784 44.8417 258.98 44.6464L262.98 40.6464C263.175 40.4512 263.492 40.4512 263.687 40.6464ZM268.313 40.6464C268.508 40.4512 268.825 40.4512 269.02 40.6464L273.02 44.6464C273.215 44.8417 273.215 45.1583 273.02 45.3536L269.02 49.3536C268.825 49.5488 268.508 49.5488 268.313 49.3536C268.118 49.1583 268.118 48.8417 268.313 48.6464L271.959 45L268.313 41.3536C268.118 41.1583 268.118 40.8417 268.313 40.6464Z",fill:l.TV.accentPositiveStronger}),(0,r.tZ)("rect",{x:"336",y:"31",width:"28",height:"28",rx:"4",fill:l.TV.accentPositiveDimmest}),(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M347.687 40.6464C347.882 40.8417 347.882 41.1583 347.687 41.3536L344.04 45L347.687 48.6464C347.882 48.8417 347.882 49.1583 347.687 49.3536C347.492 49.5488 347.175 49.5488 346.98 49.3536L342.98 45.3536C342.784 45.1583 342.784 44.8417 342.98 44.6464L346.98 40.6464C347.175 40.4512 347.492 40.4512 347.687 40.6464ZM352.313 40.6464C352.508 40.4512 352.825 40.4512 353.02 40.6464L357.02 44.6464C357.215 44.8417 357.215 45.1583 357.02 45.3536L353.02 49.3536C352.825 49.5488 352.508 49.5488 352.313 49.3536C352.118 49.1583 352.118 48.8417 352.313 48.6464L355.959 45L352.313 41.3536C352.118 41.1583 352.118 40.8417 352.313 40.6464Z",fill:l.TV.accentPositiveStronger}),(0,r.tZ)("rect",{x:"420",y:"31",width:"28",height:"28",rx:"4",fill:l.TV.accentPositiveDimmest}),(0,r.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M431.687 40.6464C431.882 40.8417 431.882 41.1583 431.687 41.3536L428.04 45L431.687 48.6464C431.882 48.8417 431.882 49.1583 431.687 49.3536C431.492 49.5488 431.175 49.5488 430.98 49.3536L426.98 45.3536C426.784 45.1583 426.784 44.8417 426.98 44.6464L430.98 40.6464C431.175 40.4512 431.492 40.4512 431.687 40.6464ZM436.313 40.6464C436.508 40.4512 436.825 40.4512 437.02 40.6464L441.02 44.6464C441.215 44.8417 441.215 45.1583 441.02 45.3536L437.02 49.3536C436.825 49.5488 436.508 49.5488 436.313 49.3536C436.118 49.1583 436.118 48.8417 436.313 48.6464L439.959 45L436.313 41.3536C436.118 41.1583 436.118 40.8417 436.313 40.6464Z",fill:l.TV.accentPositiveStronger}),(0,r.tZ)("line",{x1:"28",y1:"14",x2:"444",y2:"14",stroke:l.TV.accentPositiveDimmest,strokeWidth:"2"})]})})}},42564:function(e,t,n){n.d(t,{J:function(){return m}});var r=n(41733),i=n(30509),o=n(69792),a=n(16155),l=n(21262),c=n(71440),s=n(9122);function u(){var e=(0,l._)(["\n  query CheckForProjectByRepl($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        org {\n          id\n          type\n          name\n          authorizations {\n            createPublicRepl: createRepl(private: false) {\n              isAuthorized\n              message\n            }\n            createPrivateRepl: createRepl(private: true) {\n              isAuthorized\n              message\n            }\n            createProject {\n              isAuthorized\n              message\n            }\n          }\n        }\n        project {\n          id\n        }\n      }\n    }\n  }\n"]);return u=function(){return e},e}var d={},f=(0,c.Ps)(u()),h=n(85983),p=n(43627);function m(){var e,t,n,l,c,u,m=(0,o.e)({controlName:p.r}),v=(e={variables:{id:(0,a.Z)()},skip:!m},t=(0,r._)({},d,e),s.a(f,t)),g=(null===(l=v.data)||void 0===l?void 0:null===(n=l.repl)||void 0===n?void 0:n.__typename)==="Repl"?v.data.repl.org:void 0,y=!!g&&g.type===h.a4.Team&&(g.authorizations.createPrivateRepl.isAuthorized||g.authorizations.createPublicRepl.isAuthorized)&&g.authorizations.createProject.isAuthorized;return(0,i._)((0,r._)({},v),{hasProject:(null===(c=v.data)||void 0===c?void 0:c.repl.__typename)==="Repl"&&!!(null===(u=v.data.repl.project)||void 0===u?void 0:u.id),isEligibleForProject:y})}},9929:function(e,t,n){n.d(t,{B:function(){return u},e:function(){return s}});var r=n(27387),i=n(66626),o=n(96583),a=n(42471),l=n(23882),c=n(75271),s=function(e){return e.escapeHatchGitExecWrite("git config --local core.sshCommand replit-git-ssh")};function u(){var e=(0,l.Z)(),t=e.container,n=e.fs,u=e.git,d=(0,i._)((0,c.useState)({state:"loading"}),2),f=d[0],h=d[1];return(0,c.useEffect)(function(){function e(){return(e=(0,r._)(function(){var e;return(0,o.Jh)(this,function(t){switch(t.label){case 0:return h({state:"loading"}),[4,u.getRepositoryState()];case 1:if((e=t.sent()).error&&h({state:"error",error:"Could not get repository status"}),e.error||e.state===a.yG.NOT_INITIALIZED)return h({state:"error",error:"Could not get repository status"}),[2];return[4,s(u)];case 2:if(t.sent().error)return h({state:"error",error:"Could not configure SSH"}),[2];return h({state:"finished",hasInstalled:!0}),[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[t,n,u]),f}},60242:function(e,t,n){n.d(t,{HX:function(){return C},ap:function(){return I},BZ:function(){return S},gF:function(){return E},vi:function(){return R}});var r=n(41733),i=n(21262),o=n(71440),a=n(71519);function l(){var e=(0,i._)(["\n  fragment ForkContextRepl on Repl {\n    id\n    title\n    description\n    org {\n      id\n    }\n  }\n"]);return l=function(){return e},e}var c=(0,o.Ps)(l()),s=n(56250),u=n(60357),d=n(89549),f=n(89885),h=n(71323),p=n(62169),m=n(9122),v=n(82303);function g(){var e=(0,i._)(["\n  fragment WorkspaceHeaderReplInfoRepl on Repl {\n    id\n    title\n    rawTemplateLabel: templateLabel(disableFallbackToTitle: true)\n    description\n    isPrivate\n    isRenamed\n    url\n    slug\n    workspaceCta\n    lastPublishedAt\n    publishedAs\n    owner {\n      ... on Team {\n        id\n      }\n      ... on User {\n        id\n      }\n    }\n    authorizations {\n      editMetadata {\n        isAuthorized\n      }\n      editResources {\n        isAuthorized\n      }\n      editTemplateMetadata {\n        isAuthorized\n      }\n      editVisibility {\n        isAuthorized\n        code\n        message\n      }\n      fork {\n        isAuthorized\n      }\n      deleteRepl {\n        isAuthorized\n      }\n      publish {\n        isAuthorized\n      }\n    }\n    hostingDeployment {\n      ... on HostingDeployment {\n        id\n        currentBuild {\n          id\n        }\n      }\n    }\n    authorizations {\n      viewDeploymentConfig {\n        isAuthorized\n      }\n    }\n    user {\n      id\n      image\n      ...UserLinkUser\n    }\n    ...ForkContextRepl\n    ...WorkspaceHeaderReplMetadataRepl\n    ...ReplEnvironmentWebviewRepl\n    ...PublishReleaseFormRepl\n    ...BulkDeleteConfirmationModalRepl\n    ...CreateProjectBeforeForkReplContext\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return g=function(){return e},e}function y(){var e=(0,i._)(["\n  query WorkspaceHeaderReplInfo($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...WorkspaceHeaderReplInfoRepl\n      }\n    }\n  }\n  ","\n"]);return y=function(){return e},e}function b(){var e=(0,i._)(["\n  mutation WorkspaceHeaderReplInfoUnpublishTemplate(\n    $input: DeleteReplDeploymentInput!\n  ) {\n    deleteReplDeployment(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n    }\n  }\n  ","\n"]);return b=function(){return e},e}function w(){var e=(0,i._)(["\n  mutation WorkspaceHeaderReplInfoUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...WorkspaceHeaderReplInfoRepl\n      }\n    }\n  }\n  ","\n"]);return w=function(){return e},e}function Z(){var e=(0,i._)(["\n  mutation WorkspaceHeaderReplInfoDeleteRepl($id: String!) {\n    deleteRepl(id: $id) {\n      id\n    }\n  }\n"]);return Z=function(){return e},e}var x={},C=(0,o.Ps)(g(),a._,c,s.s,u.sY,d.wd,f.d,h.An),k=(0,o.Ps)(y(),C);function S(e){var t=(0,r._)({},x,e);return m.a(k,t)}var _=(0,o.Ps)(b(),p.FW);function E(e){var t=(0,r._)({},x,e);return v.D(_,t)}var T=(0,o.Ps)(w(),C);function R(e){var t=(0,r._)({},x,e);return v.D(T,t)}var D=(0,o.Ps)(Z());function I(e){var t=(0,r._)({},x,e);return v.D(D,t)}},15858:function(e,t,n){n.d(t,{Z:function(){return rW}});var r,i,o,a,l,c,s,u,d=n(41733),f=n(30509),h=n(66626),p=n(3796),m=n(25722),v=n(75271),g=n(45685),y=n(34925),b=n(23830),w=n(23666),Z=n(52657),x=n(99595),C=n(16155),k=n(43038),S=n(11881),_=n(96949),E=n(59941),T=n(42516),R=n(24766),D=n(93245),I=n(75710),B=n(10578),G=n(63163),P=n(62169),A=n(27387),L=n(96583),N=n(14118),O=n(97432),U=n(12285),X=n(4955),M=n(14105),F=n(9670),W=n(84864);(r=l||(l={}))[r.Default=0]="Default",r[r.Saved=1]="Saved",r[r.Current=2]="Current";var V=n(25703),H=n(3341),z=n.n(H),j=n(85983),q=n(21262),J=n(71440),Y=n(89549),$=n(82303);function K(){var e=(0,q._)(["\n  mutation CreateTemplateReleaseCreateDeployment(\n    $input: CreateReplDeployemntInput!\n  ) {\n    createReplDeployment(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n        ...PublishReleaseFormRepl\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return K=function(){return e},e}function Q(){var e=(0,q._)(["\n  mutation CreateTemplateReleaseCreateRelease($input: CreateReplReleaseInput!) {\n    createReplRelease(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n        ...PublishReleaseFormRepl\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n  ","\n"]);return Q=function(){return e},e}var ee={},et=(0,J.Ps)(K(),P.FW,Y.wd),en=(0,J.Ps)(Q(),P.FW,Y.wd),er="Something went wrong publishing your Template";function ei(e){if(e.error)return e.error.message||er;if(e.data){if("createReplDeployment"in e.data){if("NotFoundError"===e.data.createReplDeployment.__typename||"UnauthorizedError"===e.data.createReplDeployment.__typename||"UserError"===e.data.createReplDeployment.__typename)return e.data.createReplDeployment.message;if("Repl"!==e.data.createReplDeployment.__typename)return er}if("createReplRelease"in e.data){if("NotFoundError"===e.data.createReplRelease.__typename||"UnauthorizedError"===e.data.createReplRelease.__typename||"UserError"===e.data.createReplRelease.__typename)return e.data.createReplRelease.message;if("Repl"!==e.data.createReplRelease.__typename)return er}}}function eo(){var e,t,n,r,i=(0,h._)((e=(0,d._)({},ee,void 0),$.D(et,e)),2),o=i[0],a=i[1],l=(0,h._)((t=(0,d._)({},ee,void 0),$.D(en,t)),2),c=l[0],s=l[1];return{createRelease:(n=(0,A._)(function(e){var t,n;return(0,L.Jh)(this,function(r){switch(r.label){case 0:if(t=e.input,a.loading||s.loading)return[2,{data:null,error:null}];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,c({refetchQueries:["ReplEnvironmentHeader"],variables:{input:t}})];case 2:return[2,{data:(n=r.sent()).data,error:ei(n)}];case 3:return r.sent(),[2,{data:null,error:er}];case 4:return[2]}})}),function(e){return n.apply(this,arguments)}),createDeployment:(r=(0,A._)(function(e){var t,n;return(0,L.Jh)(this,function(r){switch(r.label){case 0:if(t=e.input,a.loading||s.loading)return[2,{data:null,error:null}];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,o({variables:{input:t}})];case 2:return[2,{data:(n=r.sent()).data,error:ei(n)}];case 3:return r.sent(),[2,{data:null,error:er}];case 4:return[2]}})}),function(e){return r.apply(this,arguments)}),data:a.data||s.data,loading:a.loading||s.loading,error:ei(a||s)}}var ea=n(9122);function el(){var e=(0,q._)(["\n  query ReplPublishInputRepl($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n    }\n  }\n  ","\n"]);return el=function(){return e},e}var ec={},es=(0,J.Ps)(el(),P.FW);function eu(){var e=(0,q._)(["\n  mutation UseSetReplTagsSetTags($input: SetReplTagsInput!) {\n    setReplTags(input: $input) {\n      ... on Repl {\n        id\n        ...PublishReplData\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return eu=function(){return e},e}var ed={},ef=(0,J.Ps)(eu(),P.FW);function eh(e){var t,n,r,i,o,a,l;return e.error?e.error.message||"Something went wrong saving your Repl Tags":(null===(n=e.data)||void 0===n?void 0:null===(t=n.setReplTags)||void 0===t?void 0:t.__typename)==="NotFoundError"||(null===(i=e.data)||void 0===i?void 0:null===(r=i.setReplTags)||void 0===r?void 0:r.__typename)==="UnauthorizedError"||(null===(a=e.data)||void 0===a?void 0:null===(o=a.setReplTags)||void 0===o?void 0:o.__typename)==="UserError"?e.data.setReplTags.message:(null===(l=e.data)||void 0===l?void 0:l.setReplTags)&&"Repl"!==e.data.setReplTags.__typename?"Something went wrong posting your Repl":void 0}function ep(){var e=(0,q._)(["\n  mutation SetReplViewSettingsSetSettings($input: SetReplViewSettingsInput!) {\n    setReplViewSettings(input: $input) {\n      ... on ReplViewSettings {\n        id\n        repl {\n          id\n          ...PublishReplData\n        }\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return ep=function(){return e},e}var em={},ev=(0,J.Ps)(ep(),P.FW);function eg(e){var t,n,r,i,o,a,l;return e.error?e.error.message||"Something went wrong saving your Cover page":(null===(n=e.data)||void 0===n?void 0:null===(t=n.setReplViewSettings)||void 0===t?void 0:t.__typename)==="NotFoundError"||(null===(i=e.data)||void 0===i?void 0:null===(r=i.setReplViewSettings)||void 0===r?void 0:r.__typename)==="UnauthorizedError"||(null===(a=e.data)||void 0===a?void 0:null===(o=a.setReplViewSettings)||void 0===o?void 0:o.__typename)==="UserError"?e.data.setReplViewSettings.message:(null===(l=e.data)||void 0===l?void 0:l.setReplViewSettings)&&"ReplViewSettings"!==e.data.setReplViewSettings.__typename?"Something went wrong saving your Cover page":void 0}function ey(){var e=(0,q._)(["\n  mutation UpdateReplUpdate($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...PublishReplData\n      }\n    }\n  }\n  ","\n"]);return ey=function(){return e},e}var eb={},ew=(0,J.Ps)(ey(),P.FW);function eZ(e){return e.message||"Something went wrong saving updates to your Repl"}function ex(e){return"repl_file"===e||"repl_image"===e}(i=c||(c={})).ReplFile="repl_file",i.ReplImage="repl_image";var eC=function(e){"use strict";(0,X._)(n,e);var t=(0,F._)(n);function n(){return(0,U._)(this,n),t.apply(this,arguments)}return n}((0,M._)(Error)),ek=function(e){"use strict";(0,X._)(n,e);var t=(0,F._)(n);function n(){return(0,U._)(this,n),t.apply(this,arguments)}return n}((0,M._)(Error)),eS=function(e){"use strict";(0,X._)(n,e);var t=(0,F._)(n);function n(){return(0,U._)(this,n),t.apply(this,arguments)}return n}((0,M._)(Error));function e_(e){return e?e.length>60?{message:"Title should not be more than ".concat(60," characters")}:void 0:{message:"Give your Repl a title"}}function eE(e){return e?e.length>1e3?{message:"Description should not be more than ".concat(1e3," characters")}:void 0:{message:"What does this Repl do?"}}var eT=(0,v.createContext)(null),eR=function(e){var t=(0,v.useContext)(eT);if(!t)throw Error("usePublishField must be used within a PublishInputContext");return t["".concat(e,"Field")]},eD=function(){var e=(0,v.useContext)(eT);if(!e)throw Error("usePublishForm must be used within a PublishInputContext");return e},eI=n(98924),eB=n(36809),eG=n(41026),eP=n(62537),eA=(0,eB.X)({container:[G.l0.p(4),G.l0.flex.row,G.l0.maxWidth(100),G.l0.backgroundColor.backgroundDefault,G.l0.borderRadius(4),{aspectRatio:"1 / 1"}],root:[G.l0.flex.grow(1),G.l0.flex.row],stacked:[G.l0.flex.grow(1),G.l0.colWithGap(2),G.l0.justify.spaceEvenly],sideBySide:[G.l0.flex.grow(1),G.l0.rowWithGap(2)],paneGroup:[G.l0.p(2),G.l0.flex.grow(1),G.l0.backgroundColor.backgroundHigher,G.l0.center]});function eL(e){var t=e.layoutState,n=(0,eI._)(e,["layoutState"]);return(0,p.tZ)(D.G,(0,f._)((0,d._)({css:eA.container},n),{children:(0,p.tZ)(eN,{root:t.layout,paneData:t.data})}))}function eN(e){var t,n=e.root,r=e.paneData;return null==n.tiling?null:(0,p.tZ)(D.G,{css:eA.root,children:(null===(t=n.tiling)||void 0===t?void 0:t.type)==="split"?(0,p.tZ)(eO,{split:n.tiling,paneData:r,depth:1}):(0,p.tZ)(eU,{group:n.tiling,paneData:r,depth:1})})}function eO(e){var t=e.split,n=e.paneData,r=e.depth;return r>2?(0,p.tZ)(eX,{}):(0,p.tZ)(D.G,{css:t.stacked?eA.stacked:eA.sideBySide,children:t.children.map(function(e){return"split"===e.type?(0,p.tZ)(eO,{split:e,paneData:n,depth:r+1}):(0,p.tZ)(eU,{group:e,paneData:n,depth:r+1})})})}function eU(e){var t=e.group,n=e.paneData,r=e.depth,i=n[t.panes[t.activeIndex]],o=(0,eP.Se)(),a=o.Icon({pane:i,size:r>1?12:16}),l=o.getTitle(i);return(0,p.tZ)(D.G,{css:eA.paneGroup,title:l,children:a})}function eX(){return(0,p.tZ)(D.G,{css:eA.paneGroup,children:(0,p.tZ)(eG.Z,{})})}var eM=n(63257),eF=n(14548),eW=n(91451),eV=n.n(eW),eH=(0,eB.X)({container:[G.l0.colWithGap(8)],layoutButton:[G.l0.borderRadius(4),G.l0.p(8),G.l0.border({width:1,color:G.TV.greyDimmer}),G.l0.backgroundColor.backgroundHigher,G.l0.cursor.pointer,{"&:hover":[G.l0.backgroundColor.backgroundHighest],'&[data-selected="true"]':[G.l0.backgroundColor.accentPrimaryDimmest,G.l0.border({color:G.TV.blueDimmer})],'&[data-selected="true"]:hover':[G.l0.backgroundColor.accentPrimaryDimmer],'&[data-disabled="true"]':[G.l0.backgroundColor.backgroundDefault,G.l0.border({color:G.TV.greyDimmest}),G.l0.color.foregroundDimmer,{"&:hover":{cursor:"not-allowed"}}]}],layoutButtonRow:[G.l0.rowWithGap(8),G.l0.justify.spaceBetween,G.l0.width("100%")],layoutButtonText:[G.l0.flex.growAndShrink(1),G.l0.flex.column,G.l0.justify.center],layoutButtonHeader:[G.l0.mb(4)],layoutPreview:[G.l0.width(80),G.l0.height(80),{alignSelf:"center"}]});function ez(e){var t,n=e.getCurrentLayoutState(),r=z()(eV()(n,"sidebarPercent"),eV()(e.savedLayoutState,"sidebarPercent")),i=(t=(0,eP.Se)(),(0,v.useCallback)(function(e){if((null==e?void 0:e.layout.tiling)==null)return"No tiled panes in layout";for(var n=[],r=[e.layout.tiling];r.length>0;){var i=r.pop();(null==i?void 0:i.type)==="paneGroup"?n.push.apply(n,(0,eM._)(i.panes)):(null==i?void 0:i.children)&&r.push.apply(r,(0,eM._)(i.children))}return n.reverse().map(function(n){return t.getTitle(e.data[n])}).join(", ")},[t])),o=(0,v.useMemo)(function(){return i(e.savedLayoutState)},[i,e.savedLayoutState]),a=(0,v.useMemo)(function(){return i(n)},[n,i]);return(0,p.BX)(D.G,{css:eH.container,children:[(0,p.tZ)(R.xv,{variant:"small",children:"Choose an initial workspace layout for new Repls using this template."}),(0,p.tZ)(eF.Tg,{css:eH.layoutButton,"data-selected":e.templateLayout.value===l.Default,onClick:function(){return e.templateLayout.setValue(l.Default)},children:(0,p.tZ)(D.G,{css:eH.layoutButtonRow,children:(0,p.BX)(D.G,{css:eH.layoutButtonText,children:[(0,p.tZ)(R.h4,{level:3,variant:"text",css:eH.layoutButtonHeader,children:"Default layout"}),(0,p.tZ)(R.xv,{multiline:!0,variant:"small",children:"User's default layout (either side-by-side or stacked)."})]})})}),e.savedLayoutState?(0,p.tZ)(eF.Tg,{css:eH.layoutButton,"data-selected":e.templateLayout.value===l.Saved,onClick:function(){return e.templateLayout.setValue(l.Saved)},children:(0,p.BX)(D.G,{css:eH.layoutButtonRow,children:[(0,p.BX)(D.G,{css:eH.layoutButtonText,children:[(0,p.tZ)(R.h4,{level:3,variant:"text",css:eH.layoutButtonHeader,children:"Saved layout"}),(0,p.tZ)(R.xv,{variant:"small",children:o})]}),(0,p.tZ)(eL,{css:eH.layoutPreview,layoutState:e.savedLayoutState})]})}):null,(0,p.tZ)(eF.Tg,{css:eH.layoutButton,"data-selected":e.templateLayout.value===l.Current,"data-disabled":r,onClick:r?void 0:function(){return e.templateLayout.setValue(l.Current)},children:(0,p.BX)(D.G,{css:eH.layoutButtonRow,children:[(0,p.BX)(D.G,{css:eH.layoutButtonText,children:[(0,p.tZ)(R.h4,{level:3,variant:"text",css:eH.layoutButtonHeader,children:"Current layout"}),(0,p.tZ)(R.xv,{variant:"small",children:r?"Same as saved layout":a})]}),(0,p.tZ)(eL,{css:eH.layoutPreview,layoutState:n})]})})]})}function ej(e){var t=e.getCurrentLayoutState,n=eR("layout");return(0,p.tZ)(D.G,{css:eH.container,children:null==t?(0,p.tZ)(R.xv,{children:"Initial layouts may only be customized in the desktop environment."}):(0,p.tZ)(ez,{templateLayout:n,getCurrentLayoutState:t})})}var eq=n(79904),eJ=n(22893),eY=n(22419),e$=n(48155),eK=n(30231),eQ=n(16409),e0=n(54300),e1=n(62695),e2=n(96432),e3=n(73878),e4=n(86466),e8=n(27840),e6=D.K.button,e5=function(){return(0,p.tZ)(D.G,{css:[G.l0.flex.row,G.l0.flex.grow(1),{borderTop:"1px solid ".concat(G.TV.outlineDimmest)}]})},e7=function(e){var t=e.isActive,n=e.isComplete,r=e.children,i=e.onClick,o=e.disabled;return(0,p.BX)(e6,{type:"button",css:[G.l0.reset.button,G.l0.position.relative,e4.gU.nofill,t&&G.l0.backgroundColor.backgroundHigher,G.l0.p(4),G.l0.borderRadius(4)],onClick:i,disabled:o,children:[(0,p.tZ)(R.xv,{variant:"small",multiline:!1,children:r}),n?(0,p.tZ)(e8.Z,{size:6,strokeWidth:6,color:G.TV.foregroundDimmer,css:[G.l0.position.absolute,{top:2,right:-2}]}):null]})},e9=n(33470),te=n(43769),tt=n(42876),tn=n(39808),tr=n(41749),ti=n(9834),to=n.n(ti),ta=n(23522),tl=function(e){var t=e.repl,n=(0,te.j3)(t),r=t.url?(0,te.QB)(t):"",i=(0,tt.Z)({text:"Check out what I just made on Replit: ".concat(t.title),url:r});return(0,p.BX)(eF.Tg,{background:"default",css:[G.l0.borderRadius(8),G.l0.overflow("hidden"),G.l0.colWithGap(16),G.l0.width(510),G.l0.p(16),G.l0.flex.growAndShrink(1),(0,T._)({},"@media (max-width: ".concat(I.j.tabletMin,"px)"),[{width:"100%"}])],dataCy:"published-repl-share-info-container",children:[(0,p.BX)(D.G,{css:[G.l0.colWithGap(16)],children:[(0,p.tZ)(R.xv,{variant:"subheadBig",multiline:!1,children:"Share your Repl"})," ",(0,p.BX)(D.G,{css:[G.l0.colWithGap(4)],children:[(0,p.tZ)(R.xv,{variant:"small",css:[G.l0.color.foregroundDimmer],multiline:!1,children:"Cover page link"}),(0,p.BX)(D.G,{css:[G.l0.rowWithGap(4),G.l0.align.center],children:[(0,p.tZ)(to(),(0,f._)((0,d._)({legacyBehavior:!0},n),{css:[G.l0.flex.growAndShrink(1)],children:(0,p.tZ)("a",{css:[{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}],children:r})})),(0,p.tZ)(ta.m,{tooltipDelay:"none",tooltipText:"Copy link",textToCopy:r})]})]})]}),(0,p.tZ)(D.G,{css:[G.l0.rowWithGap(12),G.l0.justify.end,(0,T._)({alignItems:"flex-end"},G.BC.max("mobileMax"),[G.l0.colWithGap(8),{width:"100%",">*":{width:"100%"}}])],children:(0,p.tZ)(tn.Z,{prefetch:!1,href:i,iconLeft:(0,p.tZ)(tr.Z,{}),text:"Share to Twitter",target:"_blank",css:[(0,T._)({},G.BC.max("mobileMax"),[G.l0.mr(0)])]})})]})};function tc(e){var t=e.error,n=e.dataCy;return t?(0,p.BX)(D.G,{css:[G.l0.rowWithGap(4),G.l0.align.center],children:[(0,p.tZ)(e0.Z,{css:[G.l0.color.accentNegativeStronger]}),(0,p.tZ)(R.xv,{css:[G.l0.flex.growAndShrink(1),G.l0.color.accentNegativeStronger],dataCy:n,children:t.message})]}):null}var ts=n(36335),tu=n(19078),td=n(62477),tf=n(46954),th=n(57785),tp=n(35574),tm=n(15023),tv=n(44935),tg=n(89774);function ty(){var e=(0,q._)(["\n  fragment PublishableReplSelectorRepl on Repl {\n    id\n    title\n    timeUpdated\n    url\n    slug\n    owner {\n      ... on User {\n        id\n        username\n        image\n      }\n      ... on Team {\n        id\n        username\n        image\n      }\n    }\n    iconUrl\n  }\n"]);return ty=function(){return e},e}function tb(){var e=(0,q._)(["\n  query PublishableReplSelector($search: String!) {\n    currentUser {\n      id\n      publishableReplSearch(search: $search) {\n        id\n        ...PublishableReplSelectorRepl\n      }\n    }\n  }\n  ","\n"]);return tb=function(){return e},e}var tw={},tZ=(0,J.Ps)(ty()),tx=(0,J.Ps)(tb(),tZ),tC=D.K.div,tk=D.K.li,tS={searchValue:"",loading:!1,repls:[]};function t_(e,t){switch(t.type){case"data":var n,r=(null===(n=t.data.currentUser)||void 0===n?void 0:n.publishableReplSearch)||[];return(0,f._)((0,d._)({},e),{loading:!1,repls:(0,th.Z)(r,{existing:e.repls,getKey:function(e){return e.id}})});case"loading":return(0,f._)((0,d._)({},e),{loading:!0});case"searchValue":return(0,f._)((0,d._)({},e),{searchValue:t.searchValue})}}function tE(e){var t;return e?"".concat(null===(t=e.owner)||void 0===t?void 0:t.username,"/").concat(e.title):""}function tT(e){var t,n=(0,v.useRef)(null);(0,ts.r)(function(){var t;e.selectedRepl&&(null===(t=n.current)||void 0===t||t.blur())},[e.selectedRepl]);var r=(null===(t=e.selectedRepl)||void 0===t?void 0:t.iconUrl)&&e.inputValue&&tE(e.selectedRepl)===e.inputValue?(0,p.tZ)(D.G,{css:[G.l0.px(8),G.l0.center,{position:"absolute",top:0,left:0,height:"100%"}],children:(0,p.tZ)(tm.ZP,{alt:e.selectedRepl.title,iconUrl:e.selectedRepl.iconUrl,size:16})}):null;return(0,p.BX)(D.G,{css:[{position:"relative"}],children:[(0,p.BX)(tC,(0,f._)((0,d._)({},e.getComboboxProps()),{css:{position:"relative"},children:[r,(0,p.tZ)(tv.II,(0,d._)({css:[G.l0.pr(32),r&&G.l0.pl(32)]},e.getInputProps({placeholder:"Search for a Repl",onFocus:e.onFocus,ref:n}))),(0,p.tZ)(D.G,{css:[G.l0.center,G.l0.px(8),{position:"absolute",top:0,right:0,height:"100%"}],children:e.loading&&e.isOpen?(0,p.tZ)(B.Z,{}):(0,p.tZ)(tg.Z,{})})]})),(0,p.tZ)(tC,(0,f._)((0,d._)({},e.getMenuProps()),{css:{position:"relative"},children:e.isOpen?(0,p.BX)(tu.Z,{children:[e.loading&&0===e.repls.length?(0,p.tZ)(tk,{css:[G.l0.center,G.l0.py(32)],children:(0,p.tZ)(B.Z,{})}):null,e.loading||0!==e.repls.length?null:(0,p.tZ)(tk,{css:[G.l0.center,G.l0.py(32)],children:(0,p.tZ)(R.xv,{color:"dimmer",variant:"small",multiline:!1,children:"No Repls found"})}),e.repls.map(function(t,n){return(0,p.tZ)(tk,(0,f._)((0,d._)({},e.getItemProps({item:t,index:n})),{children:(0,p.tZ)(td.Z,{taller:!0,filter:"",title:tE(t),subtitle:(0,tp.F)(t.timeUpdated),selected:e.selectedRepl===t,highlighted:e.highlightedIndex===n,icon:t.iconUrl?(0,p.tZ)(tm.ZP,{iconUrl:t.iconUrl,alt:t.title,size:16}):void 0})}),t.id)})]}):null}))]})}var tR=n(31089),tD=n(43133),tI=D.K.label,tB=(0,v.forwardRef)(function(e,t){return(0,p.tZ)(tI,(0,f._)((0,d._)({},e),{ref:t,css:G.l0.color.foregroundDimmer}))}),tG=function(){var e,t,n,r,i,o,a,l=(0,tR.U)()("repl"),c=eR("replId"),s=eR("iconUrl"),u=(t=(e=(0,h._)((0,v.useReducer)(t_,tS),2))[0],n=e[1],o=(r={variables:{search:(0,tf.Z)(t.searchValue,200)},notifyOnNetworkStatusChange:!0,onCompleted:function(e){n({type:"data",data:e})}},i=(0,d._)({},tw,r),ea.a(tx,i)).loading,(0,v.useEffect)(function(){o&&n({type:"loading"})},[o]),a=(0,v.useCallback)(function(e){return n({type:"searchValue",searchValue:e||""})},[]),{repls:t.repls,loading:t.loading,searchValue:t.searchValue,setSearchValue:a}),m=(0,tD.Kb)({id:l,items:u.repls,initialHighlightedIndex:-1,onInputValueChange:function(e){var t=e.inputValue;u.setSearchValue(t)},onSelectedItemChange:function(e){(null==e?void 0:e.selectedItem)&&(c.setValue(e.selectedItem.id),m.closeMenu())},itemToString:tE});return(0,p.BX)(D.G,{css:[G.l0.colWithGap(4)],children:[(0,p.tZ)(tB,{css:G.l0.color.foregroundDimmer,htmlFor:l,children:"Repl"}),(0,p.tZ)(tT,{getComboboxProps:m.getComboboxProps,getInputProps:m.getInputProps,getItemProps:m.getItemProps,getMenuProps:m.getMenuProps,isOpen:m.isOpen,highlightedIndex:m.highlightedIndex,inputValue:m.inputValue,selectedRepl:m.selectedItem?(0,f._)((0,d._)({},m.selectedItem),{iconUrl:s.value||m.selectedItem.iconUrl}):void 0,repls:u.repls,loading:u.loading,onFocus:function(e){m.selectedItem&&(e.preventDefault(),e.currentTarget.select(),u.setSearchValue("")),m.openMenu()}})]})},tP=function(){var e=(0,tR.U)(),t=e("replName"),n=e("replDescription"),r=eD(),i=r.replIdField,o=r.replTitleField,a=r.replDescriptionField,l=r.isSaving;return(0,p.BX)(D.G,{css:[G.l0.colWithGap(16),G.l0.flex.growAndShrink(1)],children:[!i.value||i.touched?(0,p.tZ)(tG,{}):null,(0,p.BX)(D.G,{css:[G.l0.colWithGap(4)],children:[(0,p.tZ)(D.G,{css:[G.l0.flex.row,G.l0.align.baseline,G.l0.justify.spaceBetween],children:(0,p.tZ)(tB,{css:[G.l0.color.foregroundDimmer,{lineHeight:G.TV.lineHeightSmall}],htmlFor:t,children:"Repl name"})}),o.value]}),(0,p.BX)(D.G,{css:[G.l0.colWithGap(4)],children:[(0,p.BX)(D.G,{css:[G.l0.flex.row,G.l0.align.baseline,G.l0.justify.spaceBetween],children:[(0,p.tZ)(tB,{css:[G.l0.color.foregroundDimmer,{lineHeight:G.TV.lineHeightSmall}],htmlFor:n,children:"Repl description"}),(0,p.BX)(R.xv,{multiline:!1,css:{color:a.value.length>1e3?G.TV.accentNegativeStronger:G.TV.foregroundDimmest},children:[a.value.length,"/",1e3]})]}),(0,p.tZ)(tv.B,{id:n,value:a.value,disabled:!i.value||l,onChange:function(e){a.setValue(e.currentTarget.value)},placeholder:"What does this Repl do?",css:[G.l0.minHeight(128),G.l0.maxHeight(256),{resize:"vertical"}],dataCy:"publish-form-repl-description-input"}),a.touched?(0,p.tZ)(tc,{error:a.error,dataCy:"publish-form-repl-description-error"}):null]})]})},tA=function(e){var t=e.showPlayButton,n=e.children,r=e.active;return(0,p.BX)("div",{css:{position:"relative",aspectRatio:"".concat(268,"/").concat(164),overflow:"hidden"},children:[(0,p.tZ)("div",{css:{position:"absolute",top:"calc(".concat(18," / ").concat(164," * 100%)"),bottom:"calc(".concat(1," / ").concat(164," * 100%)"),left:"calc(".concat(1," / ").concat(268," * 100%)"),right:"calc(".concat(1," / ").concat(268," * 100%)"),borderBottomLeftRadius:4,borderBottomRightRadius:4,overflow:"hidden",backgroundColor:r?G.TV.accentPrimaryDimmest:void 0},children:n}),(0,p.BX)("svg",{viewBox:"0 0 268 164",fill:"none",xmlns:"http://www.w3.org/2000/svg",css:{position:"relative"},children:[(0,p.tZ)("rect",{width:"268",height:"17",fill:G.TV.backgroundDefault}),(0,p.tZ)("rect",{x:"241.5",y:"4.5",width:"22",height:"10",rx:"2",fill:G.TV.accentPositiveDimmer}),(0,p.tZ)("rect",{x:"228.5",y:"4.5",width:"10",height:"10",rx:"2",fill:G.TV.backgroundHighest}),(0,p.tZ)("rect",{x:"4.5",y:"4.5",width:"32",height:"10",rx:"2",fill:G.TV.backgroundHighest}),(0,p.tZ)("rect",{x:"1",y:"18",width:"266",height:"1",fill:r?G.TV.accentPrimaryDefault:G.TV.outlineDimmer}),t?(0,p.tZ)("path",{d:"M142.225 90.5642C142.565 90.7554 142.565 91.2446 142.225 91.4358L127.745 99.5809C127.412 99.7683 127 99.5275 127 99.1451L127 82.8549C127 82.4725 127.412 82.2317 127.745 82.4191L142.225 90.5642Z",fill:G.TV.white}):null,(0,p.tZ)("rect",{x:"1",y:"1",width:"266",height:"162",rx:"4",stroke:r?G.TV.accentPrimaryDefault:G.TV.outlineDimmer,strokeWidth:"1"})]})]})},tL=n(62279),tN=n(82922),tO=n(35370),tU=D.K.ol,tX=D.K.li,tM=(0,tL.iv)([G.l0.py(4),G.l0.borderRadius(8),{border:"1px solid ".concat(G.TV.outlineDimmest),borderRadius:G.TV.borderRadius8,backgroundColor:e4.vb.interactiveBackground,zIndex:G.n0,maxHeight:300,position:"absolute",overflowY:"auto",width:"100%",left:0,top:G.TV.space8,listStyle:"none"}]),tF={backgroundColor:e4.vb.interactiveBackgroundActive},tW={backgroundColor:G.TV.accentPrimaryDimmer},tV=(0,tL.iv)([G.l0.p(8),{":not([disabled])":{cursor:"pointer",":hover":(0,d._)({},tF),":active":(0,d._)({},tW)}}]);function tH(e){var t,n,r,i,o,a,l,c,s,u,m,g,y,b,w,x,C=e.fs,k=e.initiallySelectedFile,S=e.onFileSelect,_=e.onClear,E=(0,v.useRef)(null),T=(n=(t=(0,h._)((0,v.useState)({isLoading:!0,error:null,files:[]}),2))[0],r=t[1],(0,v.useEffect)(function(){function e(){return(e=(0,A._)(function(){var e,t;return(0,L.Jh)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,C.listFiles()];case 1:if((e=n.sent()).error)throw Error(e.error);return r({isLoading:!1,error:null,files:(null!==(t=e.files)&&void 0!==t?t:[]).slice().sort(function(e,t){return e.localeCompare(t)}).map(function(e){return{file:e,pathDepth:(0,tO.U$)(e)}}).sort(function(e,t){return e.pathDepth-t.pathDepth}).map(function(e){return e.file})}),[3,3];case 2:return n.sent(),r({isLoading:!1,error:"Could not load files",files:[]}),[3,3];case 3:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[C]),(0,d._)({},n)),I=T.isLoading,B=T.files,P=T.error,N=(o=(i={files:B,inputRef:E,initiallySelectedFile:k}).files,a=i.inputRef,l=i.initiallySelectedFile,s=(c=(0,h._)((0,v.useState)(!1),2))[0],u=c[1],g=(m=(0,h._)((0,v.useState)(o),2))[0],y=m[1],b=(0,v.useCallback)(function(e){return o.filter(function(t){return t.toLowerCase().includes(e.toLowerCase())})},[o]),w=(0,tD.Kb)({items:g,isOpen:s,initialInputValue:l,initialSelectedItem:g.find(function(e){return e===l}),onIsOpenChange:function(e){u(!!e.isOpen)},onInputValueChange:function(e){var t;y(b(null!==(t=e.inputValue)&&void 0!==t?t:""))}}),x=(0,v.useCallback)(function(){var e;u(!1),null===(e=a.current)||void 0===e||e.blur()},[a]),(0,v.useEffect)(function(){var e;y(b(null!==(e=w.inputValue)&&void 0!==e?e:""))},[o,b,w.inputValue]),(0,v.useEffect)(function(){w.selectedItem&&x()},[w.selectedItem,x]),(0,f._)((0,d._)({},w),{closeMenu:x,items:g})),O=(0,Z.Z)(S);return(0,v.useEffect)(function(){N.selectedItem&&O.current(N.selectedItem)},[N.selectedItem,O]),(0,p.BX)(D.G,{children:[(0,p.tZ)(D.G,(0,f._)((0,d._)({},N.getComboboxProps({refKey:"innerRef"})),{css:[G.l0.position.relative],children:(0,p.tZ)(tN.E,(0,f._)((0,d._)({},N.getInputProps({onFocus:N.openMenu,ref:E,refKey:"inputRef",disabled:I,placeholder:"Search your files"})),{onClear:function(){var e;N.reset(),null===(e=E.current)||void 0===e||e.focus(),_()},loading:I}))})),(0,p.BX)(D.G,(0,f._)((0,d._)({},N.getMenuProps({refKey:"innerRef"})),{css:[G.l0.position.relative],children:[P?(0,p.tZ)(D.G,{css:[G.l0.p(8)],children:(0,p.tZ)(R.xv,{multiline:!1,children:"Something went wrong loading your files. Please try again."})}):null,!P&&N.isOpen?(0,p.tZ)(tU,{css:[tM],children:N.items.length>0?N.items.map(function(e,t){return(0,p.tZ)(tX,(0,f._)((0,d._)({css:[tV,N.highlightedIndex===t&&tF,e===N.selectedItem&&tW]},N.getItemProps({item:e,index:t,onClick:function(){N.closeMenu()}})),{children:(0,p.tZ)(R.xv,{multiline:!1,children:e})}),e)}):(0,p.tZ)(tX,{css:[G.l0.p(8)],children:(0,p.BX)(R.xv,{multiline:!1,children:['No files found for "',N.inputValue,'"']})})}):null]}))]})}var tz=n(98587),tj=function(e){var t=(0,v.useRef)(null);return{inputProps:{onChange:function(t){var n=t.target,r=n.validity,i=n.files;if(r.valid){var o=i?i[0]:null;o&&e(o)}},"aria-hidden":"true",ref:t,accept:tz.W9.join(","),type:"file"},buttonProps:{onClick:function(){var e;return null===(e=t.current)||void 0===e?void 0:e.click()}},inputRef:t}},tq=function(e){var t=tj(e.onFile),n=t.inputProps,r=t.buttonProps;return(0,p.BX)(p.HY,{children:[(0,p.tZ)("input",(0,f._)((0,d._)({},n),{css:{display:"none"}})),e.children(r)]})},tJ=n(11782),tY=n(62372),t$=n(9602),tK=n(58532),tQ=n(89882);n(81253);var t0=n(19602),t1=n(78421),t2=n(99609);n(35328);var t3=(0,tL.iv)({position:"absolute",top:0,left:0,width:"100%",height:"100%"});function t4(e){var t=e.src,n=e.alt;return(0,p.BX)(D.G,{css:[t3,{borderBottomLeftRadius:8,borderBottomRightRadius:8,overflow:"hidden"}],children:[(0,p.tZ)(tJ.Z,{objectFit:"cover",layout:"fill",src:t,alt:n}),(0,p.tZ)(D.G,{css:[t3,{background:"radial-gradient(rgba(0, 0, 0, 0.3), rgba(0, 0, 0, 0.6))",backgroundRepeat:"no-repeat"}]})]})}var t8=n(3615),t6=[{value:c.ReplImage,text:"Photo"},{value:c.ReplFile,text:"File"}],t5=function(e){var t,n,r,i,o,a,l=e.fs,s=(0,tR.U)(),u=s("coverPage"),m=eD(),g=m.selectedRepl,y=m.coverFileField,b=m.coverUrlField,w=m.coverDefaultViewField,Z=(0,h._)((t=(0,A._)(function(e){var t;return(0,L.Jh)(this,function(n){switch(n.label){case 0:if(!(null==e?void 0:e.length)||!(t=e[0]).type.startsWith("image/"))return[2];return[4,k.uploadImage(t,t2.N.ReplCoverImage)];case 1:return n.sent(),[2]}})}),n=function(e){return t.apply(this,arguments)},i=(r=(0,h._)((0,v.useState)(!1),2))[0],o=r[1],a=(0,v.useRef)(0),[i,(0,v.useMemo)(function(){return{onDragEnter:function(e){e.preventDefault(),a.current++,o(!0)},onDragLeave:function(e){e.preventDefault(),a.current--,0===a.current&&o(!1)},onDrop:function(e){e.preventDefault(),a.current=0,o(!1),e.persist();var t,r,i=Array.from(null!==(r=null==e?void 0:null===(t=e.dataTransfer)||void 0===t?void 0:t.files)&&void 0!==r?r:[]);if(0===i.length){n(null);return}n(i)},onDragOver:function(e){e.preventDefault()}}},[n])]),2),x=Z[0],C=Z[1],k=(0,V.W)(b.setValue);return(0,p.BX)(D.G,(0,f._)((0,d._)({css:[G.l0.colWithGap(16)]},C),{children:[(0,p.BX)(D.G,{css:G.l0.colWithGap(12),children:[(0,p.tZ)(D.G,{css:[G.l0.rowWithGap(8)],children:(0,p.tZ)(t8.E,{tag:"fieldset",css:[G.l0.rowWithGap(24)],name:u,value:w.value,onChange:function(e){ex(e.target.value)&&w.setValue(e.target.value)},children:t6.map(function(e){return(0,p.BX)(D.G,{css:[G.l0.rowWithGap(8)],children:[(0,p.tZ)(t8.Y,{id:s(e.value),value:e.value}),(0,p.tZ)("label",{htmlFor:s(e.value),children:e.text})]},e.value)})})}),w.value===c.ReplImage&&(0,p.BX)(D.G,{css:[G.l0.colWithGap(4),G.l0.align.center],children:[(0,p.tZ)(tq,{onFile:function(e){return k.uploadImage(e,t2.N.ReplCoverImage)},children:function(e){var t=e.onClick;return(0,p.tZ)(eq.zx,{onClick:t,colorway:x?"primary":void 0,text:"Upload a cover photo",iconLeft:k.isLoading?(0,p.tZ)(B.Z,{}):(0,p.tZ)(tQ.Z,{}),stretch:!0})}}),k.error?(0,p.tZ)(eJ.E,{colorway:"negative",icon:(0,p.tZ)(e0.Z,{}),text:k.error}):null,(0,p.tZ)(R.xv,{variant:"small",color:"dimmer",children:"or drag and drop a photo here"})]}),w.value===c.ReplFile&&(0,p.BX)(D.G,{css:[G.l0.colWithGap(8)],children:[(0,p.tZ)(tH,{fs:l,initiallySelectedFile:y.value,onFileSelect:y.setValue,onClear:function(){return y.setValue("")}},null==g?void 0:g.id),(0,p.tZ)(tc,{error:y.error})]})]}),w.value===c.ReplImage&&(0,p.BX)(tA,{active:x,showPlayButton:w.value===c.ReplImage&&!!b.value&&!k.isLoading,children:[w.value===c.ReplImage&&b.value?(0,p.tZ)(t4,{src:b.value,alt:"cover"}):null,k.isLoading?(0,p.tZ)(D.G,{css:[{position:"absolute",inset:0},G.l0.align.center,G.l0.justify.center],children:(0,p.tZ)(B.Z,{color:G.TV.white,size:24})}):null]})]}))},t7=n(7935),t9=function(){eR("iconUrl");var e=eD(),t=e.replIconInput,n=e.replIconUrl;return(0,p.BX)(D.G,{css:[G.l0.colWithGap(16),G.l0.align.center],children:[(0,p.BX)(D.G,{css:[G.l0.colWithGap(8)],children:[(0,p.BX)(D.G,{css:[G.l0.rowWithGap(8)],children:[(0,p.tZ)(tq,{onFile:function(e){return t.uploadImage(e,t2.N.ReplIcon)},css:G.l0.backgroundColor.accentNegativeDefault,children:function(e){var t=e.onClick;return(0,p.tZ)(eq.zx,{onClick:t,text:"Upload image",iconLeft:(0,p.tZ)(tQ.Z,{}),css:[G.l0.backgroundColor.backgroundHigher],type:"button",stretch:!0})}}),null]}),t.error?(0,p.tZ)(D.G,{children:(0,p.tZ)(eJ.E,{icon:(0,p.tZ)(e0.Z,{}),colorway:"negative",text:t.error,closable:!0,closeAction:t.clearError})}):null]}),(0,p.tZ)(tm.LN,{alt:"icon",size:84,iconUrl:n,isLoading:!!t.previewUrl,css:[G.l0.backgroundColor.backgroundHigher]})]})},ne=function(){return(0,p.tZ)(D.G,{css:[G.l0.colWithGap(8)],children:(0,p.tZ)(D.G,{children:(0,p.BX)(R.xv,{children:["See the"," ",(0,p.tZ)("a",{href:"https://docs.replit.com/replit-workspace/templates",target:"_blank",children:"template docs"})," ","for a guide on what makes a good template. Please make sure your Repl abides by the"," ",(0,p.tZ)("a",{href:"https://blog.replit.com/community-standards",target:"_blank",children:"Replit community rules and guidelines"})," ","before publishing."]})})})},nt=n(29626),nn=n(76547),nr=D.K.ul,ni=D.K.li;function no(e){var t=e.children;return(0,p.tZ)(D.G,{css:[G.l0.px(8),G.l0.pt(8)],children:(0,p.tZ)(R.xv,{multiline:!1,css:[{textTransform:"uppercase"}],variant:"small",color:"dimmer",children:t})})}function na(e){var t=e.highlighted,n=e.tag;return(0,p.tZ)(D.G,{css:[G.l0.rowWithGap(8),G.l0.p(8),t&&{backgroundColor:e4.gU.listItem["@media (hover: hover)"][":not([disabled], [aria-disabled])"][":not(textarea):active"].backgroundColor},{cursor:"pointer"}],children:(0,p.BX)(D.G,{css:[G.l0.flex.growAndShrink(1),G.l0.rowWithGap(4),G.l0.align.center],children:[(0,p.tZ)(R.xv,{multiline:!1,children:n.id}),n.isOfficial?(0,p.tZ)(nn.Z,{}):null]})})}var nl=v.memo(function(e){var t=e.getItemProps,n=e.highlightedIndex,r=e.data;return(0,p.tZ)(tu.Z,{css:[G.l0.minWidth(200)],children:r.sections.reduce(function(e,r){return e.sections.push((0,p.BX)(ni,{children:[(0,p.tZ)(no,{children:r.title}),(0,p.tZ)(nr,{css:[G.l0.pt(4),G.l0.pb(8)],children:r.tags.map(function(r){var i=e.itemIndex++;return(0,p.tZ)(ni,(0,f._)((0,d._)({},t({item:r,index:i})),{children:(0,p.tZ)(na,{tag:r,highlighted:n===i})}),r.id)})})]},r.title)),e},{sections:[],itemIndex:0}).sections})});nl.displayName="TagsMenu";var nc=n(16152);function ns(){var e=(0,q._)(["\n  fragment TagsComboboxTag on Tag {\n    id\n    isOfficial\n  }\n"]);return ns=function(){return e},e}function nu(){var e=(0,q._)(["\n  query TagsCombobox($limit: Int, $search: String) {\n    tagGroups {\n      official(limit: $limit, search: $search) {\n        id\n        ...TagsComboboxTag\n      }\n      community(limit: $limit, search: $search) {\n        id\n        ...TagsComboboxTag\n      }\n    }\n  }\n  ","\n"]);return nu=function(){return e},e}var nd={},nf=(0,J.Ps)(ns()),nh=(0,J.Ps)(nu(),nf),np=/^[0-9a-zA-Z]+$/,nm=function(e){return e.id},nv=n(30043),ng=D.K.div,ny=D.K.input,nb=(0,tL.iv)([G.l0.fontSize(12),G.l0.pl(24),G.l0.pr(8),G.l0.py(4)]);function nw(){return(0,p.tZ)(R.xv,{multiline:!1,css:[G.l0.px(4),G.l0.flex.row,G.l0.align.center,G.l0.position.absolute,G.l0.height("100%"),G.l0.color.foregroundDefault,{top:0,left:4,pointerEvents:"none"}],children:(0,p.tZ)(nv.Z,{size:12})})}function nZ(e){var t=e.text,n=e.children;return(0,p.BX)(eF.Tg,{elevated:!0,css:[G.l0.position.relative,G.l0.minWidth(30),G.l0.borderRadius(16),{border:"1px solid transparent","&:focus-within":{borderColor:G.TV.outlineDimmer,backgroundColor:"transparent"}}],children:[(0,p.tZ)(nw,{}),(0,p.tZ)(R.xv,{css:[{visibility:"hidden"},nb],multiline:!1,children:t}),n]})}function nx(e){var t,n,r,i,o,a,l,c,s,u,m,g,y,b,w,x,C,k,S,_,E=(t=e.onRemove,n=e.onSelect,r=e.filter,i=e.inputValue,o=e.setInputValue,a=(0,tf.Z)(i,100),l=(0,Z.Z)(n),k=(s=(c={search:a,filter:void 0===r?function(){return!0}:r}).search,u=c.filter,g=(m=(0,d._)({},nd,{variables:{limit:s?10:3,search:s}}),ea.a(nh,m)).data,b=(y=(0,h._)((0,v.useState)({official:[],community:[],newTag:[]}),2))[0],w=y[1],x=(0,v.useMemo)(function(){if(g){var e=[],t=[],n=new Set,r=!0,i=!1,o=void 0;try{for(var a,l=g.tagGroups.official[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;n.add(c.id.toLowerCase()),u(c)&&e.push(c)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}var d=!0,f=!1,h=void 0;try{for(var p,m=g.tagGroups.community[Symbol.iterator]();!(d=(p=m.next()).done);d=!0){var v=p.value;n.add(v.id.toLowerCase()),u(v)&&t.push(v)}}catch(e){f=!0,h=e}finally{try{d||null==m.return||m.return()}finally{if(f)throw h}}var y=t.find(function(e){return e.id===s}),b=!s||y||n.has(s.toLowerCase())?void 0:{id:s,isOfficial:!1};return{official:e,community:t,newTag:b&&u(b)?[b]:[]}}},[g,u,s]),(0,v.useEffect)(function(){if(x){var e=x.official,t=x.community,n=x.newTag;w(function(r){return{official:(0,th.Z)(e,{existing:r.official,getKey:nm}),community:(0,th.Z)(t,{existing:r.community,getKey:nm}),newTag:n}})}},[x]),C={tagGroups:b,reset:function(){w({official:[],community:[],newTag:[]})}}).tagGroups,S=C.reset,_=(0,tD.Kb)({inputValue:i,items:(0,eM._)(k.official).concat((0,eM._)(k.community),(0,eM._)(k.newTag)),defaultHighlightedIndex:0,itemToString:function(e){return e?e.id:""},onSelectedItemChange:function(e){e.selectedItem&&(S(),o(""),_.reset(),_.openMenu())}}),(0,nc.Z)(function(){_.selectedItem&&l.current(_.selectedItem)},[_.selectedItem]),{tagGroups:k,combobox:_,onChange:function(e){var t=e.currentTarget.value;(!t||np.test(t))&&!(t.length>30)&&o(t)},onKeyDown:function(e){""===i&&"Backspace"===e.key&&(e.preventDefault(),t())}}),T=E.combobox,R=E.tagGroups,I=E.onChange,B=E.onKeyDown,P=(0,v.useMemo)(function(){var e;return e=[],(R.official.length&&e.push({title:"Official Tags",tags:R.official}),R.community.length&&e.push({title:"Community Tags",tags:R.community}),R.newTag.length&&e.push({title:"Create new tag",tags:R.newTag}),0===e.length)?null:{type:"sections",sections:e}},[R]),A="Add tag";return(0,p.BX)(D.G,{children:[(0,p.tZ)(ng,(0,f._)((0,d._)({},T.getComboboxProps()),{css:[G.l0.flex.row],children:(0,p.tZ)(nZ,{text:T.inputValue||A,children:(0,p.tZ)(ny,(0,d._)({css:[G.l0.coverContainer,nb,G.l0.color.foregroundDefault,{backgroundColor:"transparent","&::placeholder":G.l0.color.foregroundDefault,"&:focus::placeholder":G.l0.color.foregroundDimmest}]},T.getInputProps({placeholder:A,onChange:I,onKeyDown:B,onFocus:function(){T.openMenu()}})))})})),(0,p.tZ)(ng,(0,f._)((0,d._)({},T.getMenuProps()),{css:[G.l0.position.relative],children:P&&T.isOpen?(0,p.tZ)(nl,{getItemProps:T.getItemProps,highlightedIndex:T.highlightedIndex,data:P}):null}))]})}function nC(e){var t=e.tags,n=e.max,r=e.onAdd,i=e.onRemove,o=t.map(function(e){return e.id}),a=(0,h._)((0,v.useState)(""),2),l=a[0],c=a[1];return(0,p.BX)(D.G,{css:[G.l0.flex.row,G.l0.flex.wrap,{margin:"calc(-1 * ".concat(G.TV.space4,")")}],children:[t.map(function(e,t){return(0,p.tZ)(D.G,{css:[G.l0.m(4)],children:(0,p.tZ)(nt.g,{small:!0,tag:e,onClick:function(){return i(t)}})},e.id)}),t.length<(void 0===n?5:n)?(0,p.tZ)(D.G,{css:[G.l0.m(4)],children:(0,p.tZ)(nx,{onSelect:r,filter:function(e){return!o.includes(e.id.toLowerCase())},inputValue:l,setInputValue:c,onRemove:function(){var e=t.length-1;e>=0&&(c(t[e].id),i(e))}})}):null]})}var nk=function(){var e=eR("tags");return(0,p.BX)(D.G,{css:[G.l0.colWithGap(8)],children:[(0,p.tZ)(D.G,{css:[G.l0.colWithGap(4)],children:(0,p.tZ)(nC,{max:5,tags:e.value,onAdd:function(t){return e.setValue((0,eM._)(e.value).concat([t]))},onRemove:function(t){return e.setValue((0,eM._)(e.value.slice(0,t)).concat((0,eM._)(e.value.slice(t+1))))}})}),(0,p.BX)(D.G,{css:G.l0.rowWithGap(4),children:[(0,p.tZ)(R.xv,{color:"dimmer",variant:"small",multiline:!1,children:"Adding tags helps others find your Repl."}),(0,p.BX)(R.xv,{color:"dimmest",variant:"small",multiline:!1,children:[e.value.length,"/",5]})]})]})},nS=n(37782),n_=n(62699),nE=n(8445),nT=n(38163),nR=n(57865),nD=n(76881),nI=n(70993),nB=(0,eB.X)({rootContainer:[(0,T._)({},(0,e1.et)("tabletMin"),{display:"flex"}),G.l0.flex.growAndShrink(1),G.l0.p(16),G.l0.colWithGap(12),G.l0.align.center,G.l0.display.none],heading:[G.l0.width("100%"),{fontWeight:G.TV.fontWeightMedium}],contentContainer:[G.l0.width("100%"),G.l0.maxWidth(432),G.l0.position.relative],topShadow:{position:"absolute",zIndex:2,inset:0,boxShadow:"inset 0 48px 24px -24px "+G.TV.backgroundRoot+", inset 0 -48px 24px -24px "+G.TV.backgroundRoot},feed:[G.l0.height(416),G.l0.colWithGap(24),G.l0.justify.center,G.l0.overflow("hidden"),G.l0.backgroundColor.backgroundRoot],loadingContainer:[G.l0.flex.grow(1),G.l0.align.center,G.l0.justify.center]}),nG=D.K.form,nP=function(e){var t=e.user,n=eD(),r=n.selectedRepl,i=n.replTitleField,o=n.replDescriptionField,a=n.replIconUrl,l=n.tagsField;return(0,p.BX)(eF.Tg,{background:"root",css:nB.rootContainer,children:[(0,p.tZ)(R.xv,{multiline:!1,variant:"small",color:"dimmer",css:nB.heading,children:"Preview"}),(0,p.BX)(D.G,{css:nB.contentContainer,children:[(0,p.tZ)(D.G,{css:nB.topShadow}),(0,p.BX)(D.G,{css:nB.feed,children:[(0,p.tZ)(e9.O,{}),r&&a?(0,p.tZ)(e9.Z,{post:{user:t,repl:(0,f._)((0,d._)({},r),{title:i.value,iconUrl:a,tags:l.value,description:o.value,isTemplate:!0})}}):(0,p.tZ)(D.G,{css:nB.loadingContainer,children:(0,p.tZ)(B.Z,{})}),(0,p.tZ)(e9.O,{})]})]})]})},nA=["Basics","Tags","Icon","Cover page","Layout","Publishing"],nL=(0,eB.X)({rootContainer:[G.l0.borderRadius(8),G.l0.flex.row,G.l0.overflow("hidden"),(0,T._)({},(0,e1.et)("tabletMax"),{minWidth:850})],formContainer:[G.l0.colWithGap(12),G.l0.p(16),G.l0.minWidth(320),G.l0.flex.growAndShrink(1),(0,T._)({},(0,e1.et)("tabletMin"),{maxWidth:370})],form:[G.l0.colWithGap(16),G.l0.flex.growAndShrink(1)],formSections:[G.l0.rowWithGap(4),G.l0.align.center],formSectionsNavigation:[G.l0.flex.growAndShrink(1)],loadingContainer:[G.l0.rowWithGap(4),G.l0.color.foregroundDimmer],submitButton:[{boxShadow:"0px 0px 16px 0px ".concat(G.TV.accentPrimaryDimmer," !important")}]});function nN(e){var t,n,r,i,o,a,s,u,f,m,g,y,b,w,x,C,k,S,E,T,I,P,U,X=e.replId,M=e.currentUser,F=e.source,H=e.getDesktopLayoutState,q=(t=(0,A._)(function(e){var t;return(0,L.Jh)(this,function(n){switch(n.label){case 0:if(!eX)return[2,{message:"Could not get file"}];if(!e)return[2,{message:"File path cannot be blank"}];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,eX.stat(e)];case 2:if(!(t=n.sent()).exists||t.type!==e3.Tv.File)return[2,{message:"File does not exist"}];return[3,4];case 3:return n.sent(),[2,{message:"Could not get file"}];case 4:return[2]}})}),function(e){return t.apply(this,arguments)}),J=(0,O.d)({tablet:!0}),Y=(0,N.P5)({type:"boolean",controlName:"flag-template-layout-author"}),K=!J&&Y&&null!=H,Q=function(e){var t,n,r,i,o,a,c,s,u=(0,W.Y)(e.replId||null,function(e){return e?null:{message:"Select a Repl to share"}}),f=(t={variables:{id:u.value||""},skip:!u.value},n=(0,d._)({},ec,t),ea.a(es,n)),p=(null===(r=f.data)||void 0===r?void 0:r.repl.__typename)==="Repl"?f.data.repl:null,m=!!(null==p?void 0:p.publishedAs),g=(0,W.Y)("",e_),y=(0,W.Y)("",eE),b=(0,W.Y)(null,function(){return null}),w=(0,W.Y)("repl_image",function(){return null}),x=(0,W.Y)(null,function(){return null}),C=(0,W.Y)("",e.fileValidator),k=(0,W.Y)([],function(){return null}),S=(0,W.Y)(l.Default,function(){}),E=function(){var e,t=(0,h._)((e=(0,d._)({},em,void 0),$.D(ev,e)),2),n=t[0],r=t[1];function i(){return(i=(0,A._)(function(e){var t;return(0,L.Jh)(this,function(i){switch(i.label){case 0:if(r.loading)return[2,{data:null,error:null}];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,n({variables:{input:e}})];case 2:return[2,{data:(t=i.sent()).data,error:eg(t)}];case 3:return i.sent(),[2,{data:null,error:"Something went wrong saving your Cover page"}];case 4:return[2]}})})).apply(this,arguments)}return{data:r.data,loading:r.loading,error:eg(r),setReplViewSettings:function(e){return i.apply(this,arguments)}}}(),T=function(){var e,t=(0,h._)((e=(0,d._)({},ed,void 0),$.D(ef,e)),2),n=t[0],r=t[1];function i(){return(i=(0,A._)(function(e){var t;return(0,L.Jh)(this,function(i){switch(i.label){case 0:if(r.loading)return[2,{data:null,error:null}];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,n({variables:{input:e}})];case 2:return[2,{data:(t=i.sent()).data,error:eh(t)}];case 3:return i.sent(),[2,{data:null,error:"Something went wrong saving your Repl Tags"}];case 4:return[2]}})})).apply(this,arguments)}return{data:r.data,loading:r.loading,error:eh(r),setReplTags:function(e){return i.apply(this,arguments)}}}(),R=function(){var e,t=(0,h._)((e=(0,d._)({},eb,void 0),$.D(ew,e)),2),n=t[0],r=t[1];function i(){return(i=(0,A._)(function(e){return(0,L.Jh)(this,function(t){switch(t.label){case 0:if(r.loading)return[2,{data:null,error:null}];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,n({variables:{input:e}})];case 2:return[2,{data:t.sent().data,error:null}];case 3:return[2,{data:null,error:eZ(t.sent())}];case 4:return[2]}})})).apply(this,arguments)}return{data:r.data,loading:r.loading,error:r.error&&eZ(r.error),updateRepl:function(e){return i.apply(this,arguments)}}}(),D=eo(),I=(null==p?void 0:null===(i=p.replViewSettings)||void 0===i?void 0:i.defaultView)&&ex(p.replViewSettings.defaultView)?p.replViewSettings.defaultView:"repl_image",B=(0,Z.Z)(g.setValue),G=(0,Z.Z)(y.setValue),P=(0,Z.Z)(k.setValue),N=(0,Z.Z)(b.setValue),O=(0,Z.Z)(x.setValue),U=(0,Z.Z)(w.setValue),X=(0,Z.Z)(C.setValue);(0,v.useEffect)(function(){var e,t,n,r;p&&(U.current(I),X.current(null!==(t=null===(e=p.replViewSettings)||void 0===e?void 0:e.replFile)&&void 0!==t?t:""),B.current(p.isRenamed?p.title:"",{preventTouch:!0}),G.current(null!==(n=p.description)&&void 0!==n?n:"",{preventTouch:!0}),P.current(p.tags),N.current(p.iconUrl.endsWith(".svg")?null:p.iconUrl),O.current(null!==(r=p.imageUrl)&&void 0!==r?r:null))},[p,O,N,P,B,G,I,U,X]);var M=(0,V.W)(b.setValue),F=M.previewUrl||b.value||(null==p?void 0:p.iconUrl)||(null==p?void 0:p.templateInfo.iconUrl),H=null!==(s=null===(c=[u,g,y,b,w,x,k,C,S].filter(function(e){return(e!==C||"repl_file"===w.value)&&e.error}))||void 0===c?void 0:null===(a=c[0])||void 0===a?void 0:null===(o=a.error)||void 0===o?void 0:o.message)&&void 0!==s?s:null;function q(){return(q=(0,A._)(function(){var e,t,n,r,i,o,a,l,c,s,u;return(0,L.Jh)(this,function(d){switch(d.label){case 0:if(!p)throw new eC("Missing repl");if(t=p.title!==g.value,n=p.description!==y.value,r=p.iconUrl!==b.value,i="repl_image"===w.value&&p.imageUrl!==x.value,o=C.value&&"repl_file"===w.value&&(null===(e=p.replViewSettings)||void 0===e?void 0:e.replFile)!==C.value,a=w.value&&I!==w.value,l=!z()(p.tags,k.value),!(t||n||r))return[3,2];if(g.error||y.error||b.error)throw new eC;return[4,R.updateRepl({id:p.id,title:t?g.value:void 0,description:n?y.value:void 0,iconUrl:r?b.value:void 0})];case 1:if((c=d.sent()).error)throw new ek(c.error);d.label=2;case 2:if(!(a||i||o))return[3,4];if("repl_image"===w.value&&x.error||"repl_file"===w.value&&C.error)throw new eC;return[4,E.setReplViewSettings({replId:p.id,defaultView:"repl_image"===w.value?j.bV.ReplImage:j.bV.ReplFile,replImage:i?x.value:void 0,replFile:o?C.value:void 0})];case 3:if((s=d.sent()).error)throw new ek(s.error);d.label=4;case 4:if(!l)return[3,6];if(k.error)throw new eC;return[4,T.setReplTags({replId:p.id,tags:k.value.map(function(e){return e.id})})];case 5:if((u=d.sent()).error)throw new ek(u.error);d.label=6;case 6:return[2]}})})).apply(this,arguments)}function J(){return(J=(0,A._)(function(){var t,n,r;return(0,L.Jh)(this,function(i){switch(i.label){case 0:if(!p)throw new eC("Missing repl");if(H)throw new eC(null!=H?H:"Something went wrong");return t=null,e.canAuthorTemplateLayout&&S.value===l.Current&&(t=null===(n=e.getDesktopLayoutState)||void 0===n?void 0:n.call(e)),[4,D.createDeployment({input:{replId:p.id,description:y.value,iconUrl:F||p.iconUrl,initialLayoutState:t}})];case 1:if((r=i.sent()).error)throw new eS(r.error);return(0,_.j)(_.U3.POST_MADE,{source:e.source,replType:"template_repl",title:g.value,description:y.value,tags:k.value.map(function(e){return e.id}),defaultView:w.value}),[2]}})})).apply(this,arguments)}var Y=R.loading||E.loading||T.loading,K=R.error||E.error||T.error,Q=D.loading,ee=D.error;return{selectedRepl:p,isReplLoading:f.loading,replLoadingError:f.error,replIdField:u,replTitleField:g,replDescriptionField:y,iconUrlField:b,coverDefaultViewField:w,coverUrlField:x,coverFileField:C,layoutField:S,tagsField:k,replIconInput:M,replIconUrl:F,inputError:H,save:function(){return q.apply(this,arguments)},isSaving:Y,savingError:K,publishInitialRelease:function(){return J.apply(this,arguments)},isPublishing:Q,publishingError:ee,isPublished:m}}({replId:X,fileValidator:q,source:F,canAuthorTemplateLayout:K,getDesktopLayoutState:H}),ee=Q.selectedRepl,et=Q.isReplLoading,en=Q.replLoadingError,er=Q.replIdField,ei=Q.replTitleField,el=Q.replDescriptionField,eu=Q.iconUrlField,ep=Q.tagsField,ey=Q.coverDefaultViewField,eR=Q.coverUrlField,eD=Q.coverFileField,eI=Q.layoutField,eB=Q.save,eG=Q.isSaving,eP=Q.savingError,eA=Q.publishInitialRelease,eL=Q.isPublishing,eN=Q.publishingError,eO=Q.isPublished,eU=(r=(n={repl:ee,currentUser:M}).repl,i=n.currentUser,a=(o=(0,h._)((0,nD.qg)(),2))[0],s=o[1],u=(0,nD.ic)(),m=(f=(0,h._)((0,v.useState)(function(){var e,t,n;return e=(0,nS.ZP)({onUnrecoverableError:(0,nR.Z)({throwBsod:s,origin:"Publish: services/onUnrecoverableError"})}),t=(0,nT.Z)({container:e}),n=(0,nI.Z)({container:e,fs:t}),{container:e,fs:t,dotReplit:n}}),1)[0]).container,g=f.fs,y=f.dotReplit,w=(b=(0,h._)((0,v.useState)(function(){return m.getConnectionState()===nS.em.CONNECTED}),2))[0],x=b[1],C=(0,n_.b)(r?{repl:r,currentUser:i}:null),k=(0,nE.S)(),(0,v.useEffect)(function(){if(r&&C&&m.getConnectionState()===nS.em.DISCONNECTED)return m.connect({context:C,getMinimumRetryDelayMs:k}),function(){return m.close()}},[r,m,C]),(0,v.useEffect)(function(){return m.onConnectionStateChanged(function(e){x(e===nS.em.CONNECTED)})},[m]),{isConnected:w,container:m,fs:g,dotReplit:y,bsodId:null==a?void 0:a.eventId,devClearBsod:function(){return u()}}),eX=eU.fs,eM=eU.dotReplit,eW=eU.bsodId,eV=K&&!eO?[]:["Layout"],eH=(0,h._)((0,v.useState)(0),2),ez=eH[0],e1=eH[1],e4=nA[ez],e8=ez===nA.length-1,e6=(0,h._)((0,v.useState)({show:!1,isUpdate:!1}),2),e9=e6[0],te=e6[1],tt=(0,h._)((0,v.useState)(function(){return Array(nA.length).fill(!1)}),2),tn=tt[0],tr=tt[1],ti=(0,v.useCallback)(function(e,t){tn[e]=t,tr(tn)},[tn]);(0,v.useEffect)(function(){Q.replTitleField.value&&Q.replDescriptionField.value?ti(0,!0):ti(0,!1),Q.tagsField.value.length>0?ti(1,!0):ti(1,!1),Q.iconUrlField.value?ti(2,!0):ti(2,!1),Q.coverDefaultViewField.value===c.ReplImage&&Q.coverUrlField.value||Q.coverDefaultViewField.value===c.ReplFile&&Q.coverFileField.value?ti(3,!0):ti(3,!1)},[tn,Q,ti]);var to=(E=(S=(0,h._)((0,v.useState)({isLoading:!0,error:null,entryPoint:null}),2))[0],T=S[1],(0,v.useEffect)(function(){function e(){return(e=(0,A._)(function(){var e,t,n;return(0,L.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,eM.getConfig()];case 1:if((t=r.sent()).error)throw Error(t.errorMessage);return T({isLoading:!1,error:null,entryPoint:null!==(n=null==t?void 0:null===(e=t.config)||void 0===e?void 0:e.entrypoint)&&void 0!==n?n:null}),[3,3];case 2:return r.sent(),T({isLoading:!1,error:"Could not load .replit config",entryPoint:null}),[3,3];case 3:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[eM]),(0,d._)({},E));(0,v.useEffect)(function(){to.isLoading||!to.entryPoint||eD.value||eD.setValue(to.entryPoint)},[to.isLoading,to.entryPoint,eD]);var ta=(0,h._)((0,v.useState)(!1),2),tc=ta[0],ts=ta[1];(0,v.useEffect)(function(){tc||X&&(et||eO)||(ts(!0),(0,_.j)(_.U3.PUBLISH_SELECTED,{source:F}))},[tc,F,X,et,eO]);var tu=(0,Z.Z)(!!((null==ee?void 0:ee.publishedAs)||(null==ee?void 0:ee.lastPublishedAt))),td=(0,Z.Z)(e4);if((0,v.useEffect)(function(){return function(){tu.current||(0,_.j)(_.U3.PUBLISH_FLOW_EXITED,{source:F,lastSectionVisited:td.current})}},[F,tu,td]),eW)return(0,p.tZ)(e2.Z,{});if(e9.show&&ee)return(0,p.tZ)(tl,{repl:ee});var tf={Basics:{hasError:!!(er.error||ei.error||el.error),isValid:(0,A._)(function(){return(0,L.Jh)(this,function(e){switch(e.label){case 0:return[4,Promise.all([er.validate(),ei.validate(),el.validate()])];case 1:return[2,e.sent().every(function(e){return!e})]}})})},Tags:{hasError:!!ep.error,isValid:(0,A._)(function(){return(0,L.Jh)(this,function(e){switch(e.label){case 0:return[4,ep.validate()];case 1:return[2,!e.sent()]}})})},Icon:{hasError:!!eu.error,isValid:(0,A._)(function(){return(0,L.Jh)(this,function(e){switch(e.label){case 0:return[4,eu.validate()];case 1:return[2,!e.sent()]}})})},"Cover page":{hasError:!!(ey.value===c.ReplImage?eR.error:eD.error),isValid:(0,A._)(function(){var e;return(0,L.Jh)(this,function(t){switch(t.label){case 0:if(ey.value!==c.ReplImage)return[3,2];return[4,eR.validate()];case 1:return e=!t.sent(),[3,4];case 2:return[4,eD.validate()];case 3:e=!t.sent(),t.label=4;case 4:return[2,e]}})})},Layout:{hasError:!!eI.error,isValid:(0,A._)(function(){return(0,L.Jh)(this,function(e){switch(e.label){case 0:return[4,eI.validate()];case 1:return[2,!e.sent()]}})})},Publishing:{hasError:!1,isValid:(0,A._)(function(){return(0,L.Jh)(this,function(e){return[2,!0]})})}},th=tf[e4].hasError,tp=tf[e4].isValid,tm=null!==(U=nA.find(function(e){return tf[e].hasError}))&&void 0!==U?U:null,tv=null;ee?en||eP||eN?tv="Something went wrong - please try again":th&&(tv="Please fill out the the form"):tv="Please select a Repl";var tg=!!(!ee||th||en||et||eG||eL),ty=(I=(0,A._)(function(e){var t;return(0,L.Jh)(this,function(n){switch(n.label){case 0:if(t=tg)return[3,2];return[4,tp()];case 1:t=!n.sent(),n.label=2;case 2:if(t)return[2];if(!eV.includes(nA[e]))return[3,4];return[4,ty(e+1)];case 3:case 6:return n.sent(),[2];case 4:return n.trys.push([4,6,,7]),e1(e),[4,eB()];case 5:return n.sent(),[3,7];case 7:return[2]}})}),function(e){return I.apply(this,arguments)}),tb=ez>0;return(0,p.tZ)(eT.Provider,{value:Q,children:(0,p.BX)(eF.Tg,{css:nL.rootContainer,background:"default",dataCy:"publish-form-container",children:[(0,p.BX)(D.G,{css:nL.formContainer,children:[(0,p.tZ)(R.xv,{variant:"subheadBig",multiline:!1,children:eO?"Edit publish settings":"Publish template"}),(0,p.BX)(nG,{onSubmit:(P=(0,A._)(function(e){var t,n,r,i,o,a;return(0,L.Jh)(this,function(l){switch(l.label){case 0:if(e.preventDefault(),!e8)return[3,13];t=!0,n=!1,r=void 0,l.label=1;case 1:l.trys.push([1,6,7,8]),i=nA[Symbol.iterator](),l.label=2;case 2:if(t=(o=i.next()).done)return[3,5];return[4,tf[o.value].isValid()];case 3:if(!l.sent())return[2];l.label=4;case 4:return t=!0,[3,2];case 5:return[3,8];case 6:return a=l.sent(),n=!0,r=a,[3,8];case 7:try{t||null==i.return||i.return()}finally{if(n)throw r}return[7];case 8:if(eO)return[3,10];return[4,eA()];case 9:return l.sent(),te({show:!0,isUpdate:!1}),[3,12];case 10:return[4,eB()];case 11:l.sent(),te({show:!0,isUpdate:!0}),l.label=12;case 12:return[3,14];case 13:ty(ez+1),l.label=14;case 14:return[2]}})}),function(e){return P.apply(this,arguments)}),css:nL.form,children:[(0,p.tZ)(D.G,{css:nL.formSections,children:nA.map(function(e,t){return eV.includes(e)?null:(0,p.BX)(v.Fragment,{children:[0!==t&&(0,p.tZ)(e5,{}),(0,p.tZ)(e7,{isActive:ez===t,isComplete:tn[t],onClick:function(){return ty(t)},disabled:tg,children:e})]},e)})}),(0,p.BX)(D.G,{css:nL.formSectionsNavigation,children:["Basics"===e4&&(0,p.tZ)(tP,{}),"Tags"===e4&&(0,p.tZ)(nk,{}),"Icon"===e4&&(0,p.tZ)(t9,{}),"Cover page"===e4&&(0,p.tZ)(t5,{fs:eX}),"Layout"===e4&&(0,p.tZ)(ej,{getCurrentLayoutState:H}),"Publishing"===e4&&(0,p.tZ)(ne,{})]}),(0,p.BX)(D.G,{children:[e8&&tm&&tm!==e4?(0,p.tZ)(eJ.E,{colorway:"negative",icon:(0,p.tZ)(e0.Z,{}),text:"Please fix error in ".concat(tm," section")}):null,eP?(0,p.tZ)(eJ.E,{colorway:"negative",icon:(0,p.tZ)(e0.Z,{}),text:eP}):null,eN?(0,p.tZ)(eJ.E,{colorway:"negative",icon:(0,p.tZ)(e0.Z,{}),text:eN}):null]}),(0,p.BX)(D.G,{css:[G.l0.rowWithGap(8),G.l0.align.center,tb?G.l0.justify.spaceBetween:G.l0.justify.end],children:[tb?(0,p.tZ)(eq.zx,{type:"button",iconLeft:(0,p.tZ)(e$.Z,{}),disabled:tg,onClick:function(){return ty(ez-1)},text:"Back"}):null,eG?(0,p.tZ)(D.G,{css:nL.loadingContainer,children:(0,p.tZ)(B.Z,{})}):null,(0,p.BX)(eY.u,{tooltip:tv,placement:"bottom",isDisabled:!tv,children:[!e8&&(0,p.tZ)(eq.zx,{type:"submit",colorway:"primary",iconLeft:(0,p.tZ)(eK.Z,{}),disabled:tg,text:"Next",dataCy:"publish-form-next-button"}),e8&&!eO?(0,p.tZ)(eq.zx,{type:"submit",colorway:"primary",css:nL.submitButton,iconLeft:eL?(0,p.tZ)(B.Z,{}):(0,p.tZ)(eQ.Z,{}),disabled:!!(tg||tm),text:"Submit",dataCy:"publish-form-publish-button"}):null,e8&&eO?(0,p.tZ)(eq.zx,{type:"submit",colorway:"primary",iconLeft:eL?(0,p.tZ)(B.Z,{}):(0,p.tZ)(eQ.Z,{}),disabled:!!(tg||tm),text:"Save"}):null]})]})]})]}),(0,p.tZ)(nP,{user:M})]})})}var nO=(0,eB.X)({loadingContainer:[G.l0.center,G.l0.p(32),G.l0.width(512),(0,T._)({},"@media (max-width: ".concat(I.j.tabletMin,"px)"),[{width:"100%"}])],errorContainer:[G.l0.center,G.l0.p(32)]});function nU(e){var t,n,r=e.replId,i=e.source,o=e.getDesktopLayoutState,a=(0,P.NH)(),l=(null===(n=a.data)||void 0===n?void 0:null===(t=n.currentUser)||void 0===t?void 0:t.__typename)==="CurrentUser"?a.data.currentUser:null;return a.loading?(0,p.tZ)(D.G,{css:nO.loadingContainer,children:(0,p.tZ)(B.Z,{})}):a.error||!l?(0,p.tZ)(D.G,{css:nO.errorContainer,children:(0,p.tZ)(R.xv,{multiline:!1,children:"Something went wrong, please try again."})}):(0,p.tZ)(nN,{source:i,replId:r,currentUser:l,getDesktopLayoutState:o})}function nX(){var e=(0,q._)(["\n  query PendingChanges($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        deployment {\n          id\n          activeRelease {\n            id\n            pendingChanges {\n              fileName\n              changeType\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return nX=function(){return e},e}var nM={},nF=(0,J.Ps)(nX()),nW=n(31718),nV=n(87915),nH=n(72748),nz=n(68140);function nj(){var e=(0,q._)(["\n  mutation RevertTemplateRelease($input: RevertReplReleaseInput!) {\n    revertReplRelease(input: $input) {\n      ... on Repl {\n        id\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return nj=function(){return e},e}var nq={},nJ=(0,J.Ps)(nj()),nY=D.K.form;function n$(e){if(0===e.length)return{message:"You cannot leave this empty."}}function nK(e){var t,n,r=e.changeType;return r===j.J5.NewFile?(t=G.TV.accentPositiveStronger,n="Added"):r===j.J5.DeletedFile?(t=G.TV.accentNegativeStronger,n="Deleted"):(t=G.TV.foregroundDefault,n="Changed"),(0,p.tZ)(R.xv,{variant:"small",css:[{color:t}],multiline:!1,children:n})}var nQ=(0,eB.X)({loadingContainer:[G.l0.center],container:[{display:"grid",gridTemplateColumns:"1fr 1fr",gap:G.TV.space8}],item:[G.l0.rowWithGap(4),G.l0.align.center]});function n0(e){var t=e.pendingChangesState,n=e.isReplitTemplate;if(t.loading)return(0,p.tZ)(D.G,{css:nQ.loadingContainer,children:(0,p.tZ)(B.Z,{})});if(t.error)return(0,p.tZ)(eJ.E,{icon:(0,p.tZ)(e0.Z,{}),text:t.error.message||"Could not load modified files - please try again.",colorway:"negative"});if(!t.pendingChanges||0===t.pendingChanges.length)return n?null:(0,p.tZ)(R.xv,{children:"No file changes to publish."});var r=t.pendingChanges,i=r.slice(0,15);return(0,p.BX)(D.G,{css:nQ.container,children:[i.map(function(e){return(0,p.BX)(v.Fragment,{children:[(0,p.BX)(D.G,{css:nQ.item,children:[(0,p.tZ)(nV.Z,{size:12,path:e.fileName}),(0,p.tZ)(R.xv,{multiline:!1,children:e.fileName})]},e.fileName),(0,p.tZ)(nK,{changeType:e.changeType})]},e.fileName)}),r.length>i.length&&(0,p.BX)(R.xv,{multiline:!1,children:["And ",r.length-i.length," other files..."]})]})}var n1=(0,eB.X)({header:[G.l0.mb(16)],grid:[{display:"grid",gridTemplateColumns:"2fr 3fr 1fr",gap:G.TV.space8}],activeLabel:[G.l0.p(4),{display:"flex"}]});function n2(e){var t,n=e.repl,r=function(){var e,t=(0,h._)((e=(0,d._)({},nq,{refetchQueries:["ReplEnvironmentHeader"]}),$.D(nJ,e)),2),n=t[0];function r(){return(r=(0,A._)(function(e){var t;return(0,L.Jh)(this,function(r){switch(r.label){case 0:return[4,n({variables:{input:e.input}})];case 1:return[2,{data:(t=r.sent()).data,error:function(e){if(!e.data)return null;var t=e.data;if("revertReplRelease"in t){if("NotFoundError"===t.revertReplRelease.__typename||"UnauthorizedError"===t.revertReplRelease.__typename||"UserError"===t.revertReplRelease.__typename)return t.revertReplRelease.message;if("Repl"!==t.revertReplRelease.__typename)return"Something went wrong reverting your Template"}}(t)}]}})})).apply(this,arguments)}return{revertTemplateRelease:function(e){return r.apply(this,arguments)},state:t[1]}}(),i=(t=(0,A._)(function(e){return(0,L.Jh)(this,function(t){switch(t.label){case 0:return[4,r.revertTemplateRelease({input:{replId:n.id,releaseId:e}})];case 1:return t.sent(),[2]}})}),function(e){return t.apply(this,arguments)});return(0,p.BX)(D.G,{children:[(0,p.tZ)(R.h4,{level:1,variant:"subheadBig",css:n1.header,children:"Existing Releases"}),(0,p.tZ)(D.G,{css:n1.grid,children:n.releases.items.map(function(e){var t,r;return(0,p.BX)(v.Fragment,{children:[(0,p.tZ)("span",{children:(0,nH.Z)(new Date(e.timeCreated),"do MMM, hh:mm a")}),(0,p.tZ)("span",{children:e.description}),(0,p.tZ)("span",{style:{justifySelf:"end"},children:e.id===(null===(r=n.deployment)||void 0===r?void 0:null===(t=r.activeRelease)||void 0===t?void 0:t.id)?(0,p.tZ)("span",{css:n1.activeLabel,children:"(active)"}):(0,p.tZ)(eq.zx,{text:"revert",colorway:"primary",size:"small",onClick:function(){i(e.id)}})})]},e.id)})})]})}var n3=(0,eB.X)({container:[G.l0.colWithGap(24),G.l0.p(16)],modifiedContainer:[G.l0.colWithGap(8)],layoutContainer:[G.l0.colWithGap(8)],descriptionContainer:[G.l0.colWithGap(4)],descriptionLabel:[G.l0.color.foregroundDimmer,{fontSize:G.TV.fontSizeSmall,lineHeight:G.TV.lineHeightSmall}],descriptionInput:[G.l0.width("100%"),G.l0.minHeight(64),G.l0.maxHeight(128),{resize:"vertical"}],footerContainer:[G.l0.rowWithGap(12),G.l0.justify.end],existingReleasesContainer:[G.l0.p(16),G.l0.colWithGap(16)]});function n4(e){var t,n,r,i,o,a,c,s,u,m,g,y,b=e.repl,w=e.getDesktopLayoutState,Z=(0,tR.U)(),x=(0,h._)((0,v.useState)(!1),2),C=x[0],k=x[1],S=(0,h._)((0,v.useState)(!1),2),_=S[0],E=S[1],I=(i=function(e){var t,n,r,i,o=(r={variables:{replId:e.replId},fetchPolicy:"cache-and-network",ssr:!1},i=(0,d._)({},nM,r),ea.a(nF,i)),a=o.data,l=o.loading,c=o.error;if(l)return{loading:l,pendingChanges:null,error:null};if(c)return{loading:!1,pendingChanges:null,error:c};var s=(null==a?void 0:a.repl.__typename)==="Repl"?a.repl:null;return s?{loading:!1,pendingChanges:(null===(n=s.deployment)||void 0===n?void 0:null===(t=n.activeRelease)||void 0===t?void 0:t.pendingChanges)||[],error:c}:{loading:!1,pendingChanges:null,error:Error("Repl not found")}}({replId:{replId:b.id}.replId}),o=(0,v.useMemo)(function(){return i.pendingChanges?i.pendingChanges.slice().sort(function(e,t){return e.fileName.localeCompare(t.fileName)}).map(function(e){return{file:e,pathDepth:(0,tO.U$)(e.fileName)}}).sort(function(e,t){return e.pathDepth-t.pathDepth}).map(function(e){return e.file}):[]},[i.pendingChanges]),(0,f._)((0,d._)({},i),{pendingChanges:o})),B=eo(),G=(0,W.Y)("",n$),P=(null===(c=I.pendingChanges)||void 0===c?void 0:c.length)!==0,U=(null===(s=b.user)||void 0===s?void 0:s.username)===nz.IU||(null===(u=b.user)||void 0===u?void 0:u.username)==="templates",X=(0,h._)((0,v.useState)({ran:!1,tested:!1}),2),M=X[0],F=X[1],V=(0,O.d)({tablet:!0}),H=(0,N.P5)({type:"boolean",controlName:"flag-template-layout-author"}),z=!V&&H&&null!=w,j=(0,h._)((n=(t=(0,h._)((0,v.useState)(b.releases.items[0]),2))[0],r=t[1],(0,v.useEffect)(function(){b.releases.items.length>0&&r(b.releases.items.slice().sort()[0])},[b.releases.items]),[n,r]),2),q=j[0],J=j[1],Y=(null==q?void 0:q.initialLayoutState)!=null,$=(0,W.Y)(Y?l.Saved:l.Default,function(){}),K=Y?$.value!==l.Saved:$.value!==l.Default,Q=P||K;(0,v.useEffect)(function(){F({ran:!1,tested:!1})},[F]);var ee=!!(G.error||B.loading||!U&&!Q||U&&(!M.ran||!M.tested)),et=U&&(null===(g=b.releases)||void 0===g?void 0:null===(m=g.items)||void 0===m?void 0:m.length)>1,en="";return(G.error?en="Please fill out the form":U||Q||(en="No file or layout changes to publish in this release"),C)?(0,p.tZ)(tl,{repl:b}):_?(0,p.tZ)(D.G,{css:n3.existingReleasesContainer,children:(0,p.tZ)(n2,{repl:b})}):(0,p.BX)(nY,{onSubmit:(a=(0,A._)(function(e){var t,n,r,i;return(0,L.Jh)(this,function(o){switch(o.label){case 0:if(e.preventDefault(),ee||G.validate())return[2];return n=null,z&&($.value===l.Current?n=w():$.value===l.Saved&&Y&&(n=null==q?void 0:q.initialLayoutState)),[4,B.createRelease({input:{replId:b.id,description:G.value,initialLayoutState:n}})];case 1:if((r=o.sent()).error)return[2];return k(!0),(null===(t=r.data)||void 0===t?void 0:t.createReplRelease.__typename)==="Repl"&&(J(i=r.data.createReplRelease.releases.items.slice().sort()[0]),$.setValue((null==i?void 0:i.initialLayoutState)!=null?l.Saved:l.Default)),[2]}})}),function(e){return a.apply(this,arguments)}),css:n3.container,children:[(0,p.tZ)(R.h4,{level:1,variant:"headerDefault",children:"Publish template changes"}),(0,p.BX)(D.G,{css:n3.modifiedContainer,children:[(0,p.tZ)(R.h4,{level:2,variant:"subheadDefault",children:"Modified files"}),(0,p.tZ)(n0,{pendingChangesState:I,isReplitTemplate:U})]}),z?(0,p.BX)(D.G,{css:n3.layoutContainer,children:[(0,p.tZ)(R.h4,{level:2,variant:"subheadDefault",children:"Workspace layout"}),(0,p.tZ)(ez,{getCurrentLayoutState:w,savedLayoutState:null==q?void 0:q.initialLayoutState,templateLayout:$})]}):null,U||Q?(0,p.BX)(D.G,{css:n3.descriptionContainer,children:[(0,p.tZ)("label",{htmlFor:Z("description"),css:n3.descriptionLabel,children:"Description"}),(0,p.tZ)(tv.B,{id:Z("description"),"aria-label":"Description",onChange:function(e){return G.setValue(e.target.value)},css:n3.descriptionInput,placeholder:"Explain what has changed about your template"}),G.error?(0,p.tZ)(eJ.E,{icon:(0,p.tZ)(e0.Z,{}),text:null===(y=G.error)||void 0===y?void 0:y.message,colorway:"negative"}):null]}):null,U?(0,p.tZ)(n6,{repl:b,state:M,onChange:function(e,t){return F(function(n){return(0,f._)((0,d._)({},n),(0,T._)({},e,t))})}}):null,(0,p.tZ)(D.G,{children:B.error?(0,p.tZ)(eJ.E,{icon:(0,p.tZ)(e0.Z,{}),text:B.error,colorway:"negative"}):null}),(0,p.BX)(D.G,{css:n3.footerContainer,children:[et?(0,p.tZ)(eq.zx,{text:"Revert to older",colorway:"negative",onClick:function(){return E(!0)}}):null,(0,p.tZ)(eY.u,{tooltip:en,placement:"bottom",isDisabled:!en,children:(0,p.tZ)(eq.zx,{text:"Publish release",type:"submit",colorway:"primary",iconLeft:(0,p.tZ)(eQ.Z,{}),disabled:ee})})]})]})}var n8=(0,eB.X)({container:[G.l0.colWithGap(12)],row:[G.l0.rowWithGap(8),G.l0.py(2)]});function n6(e){var t,n,r,i=e.repl,o=e.state,a=e.onChange,l=(0,tR.U)(),c=(0,Y.e9)(),s=c.data,u=c.loading,d=null==s?void 0:null===(t=s.currentUser)||void 0===t?void 0:t.username;return(0,p.BX)(D.G,{css:n8.container,children:[(0,p.tZ)(R.h4,{level:2,children:"Official Replit Template publishing checklist"}),(0,p.BX)(D.G,{children:[(0,p.BX)(n5,{children:[(0,p.tZ)(nW.X,{id:l("ran"),checked:o.ran,onChange:function(e){return a("ran",e)}}),(0,p.tZ)("label",{htmlFor:l("ran"),children:"Ran Repl:"}),(0,p.BX)("span",{children:["I ran the Repl to generate and cache package guesser result into"," ",(0,p.tZ)("code",{children:".upm"}),"."]})]}),(0,p.BX)(n5,{children:[(0,p.tZ)(nW.X,{id:l("tested"),checked:o.tested,onChange:function(e){return a("tested",e)}}),(0,p.tZ)("label",{htmlFor:l("tested"),children:"Ran tests:"}),(0,p.BX)("span",{children:['I ran "Test working copy" for @',null===(n=i.user)||void 0===n?void 0:n.username,"/",i.slug," in"," ",(0,p.tZ)("a",{href:"https://template-tester.replit.app/",target:"_blank",children:"template tester"}),". ",(0,p.tZ)("br",{}),"If there are no tests, consider adding one."]})]})]}),u||(null===(r=i.user)||void 0===r?void 0:r.username)!==d?null:(0,p.tZ)(eJ.E,{text:"You can't publish an update while impersonating. Add yourself as a member of the 'replit' team using CLUI tool 'add-remove-team-member', then open this Repl from your account.",colorway:"negative"})]})}function n5(e){var t=e.children;return(0,p.tZ)(D.G,{css:n8.row,children:t})}var n7=n(29193),n9=n(76304),re=n(24562),rt=n(59489),rn=n(42427),rr=n(34030),ri=n(2446),ro=n(85995),ra=n(7391),rl=n(60242),rc=n(63752),rs=n(89313),ru=n(42704),rd=(0,tL.F4)({from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}}),rf=(0,tL.iv)([G.l0.position.relative,G.l0.cursor.pointer,G.l0.backgroundColor.backgroundHigher,G.l0.borderRadius(4),G.l0.p(2),{input:[G.l0.position.absolute,G.l0.top(0),G.l0.left(0),G.l0.width("100%"),G.l0.height("100%"),G.l0.zIndex(-1),{opacity:0}]}]),rh=(0,tL.iv)([G.l0.color.accentPrimaryDefault,G.l0.position.absolute,G.l0.top(0),G.l0.left(0),G.l0.width("100%"),G.l0.height("100%"),G.l0.borderRadius(4),G.l0.backgroundColor.backgroundRoot,G.l0.overflow("hidden"),G.l0.display.flex,G.l0.align.center,G.l0.justify.center]),rp=(0,eB.X)({addIcon:[rf,G.l0.display.flex,G.l0.align.center,G.l0.justify.center,G.l0.border({width:1,color:G.TV.foregroundDimmest}),G.l0.backgroundColor.backgroundRoot,{"&:hover":[G.l0.color.accentPrimaryDefault,{borderColor:G.TV.accentPrimaryDefault}]}],updateIcon:[rf,{"&:hover .hover-state":{opacity:.8}}],hoverState:[rh,{opacity:0}],loadingState:[rh,{opacity:.8}],loadingIcon:[G.l0.display.flex,G.l0.align.center,G.l0.justify.center,{animation:"".concat(rd," 1s linear infinite")}],error:[{fontSize:G.TV.fontSizeDefault,color:G.TV.accentNegativeDefault}]});function rm(e){var t=(0,v.useRef)(null),n=(0,h._)((0,v.useState)(e.value),2),r=n[0],i=n[1],o=(0,h._)((0,v.useState)(null),2),a=o[0],l=o[1],c=(0,tY.Z)({onUpload:function(t){var n=t.url;e.onChange(n)},onUploadPreview:function(e){i(e.dataUrl)},onError:function(e){l(e.message)}});(0,v.useEffect)(function(){i(e.value)},[e.value]);var s=null==r?void 0:r.startsWith("data:");return(0,p.BX)(ru.gC,{spacing:4,children:[(0,p.BX)("div",{onClick:function(){var e;null===(e=t.current)||void 0===e||e.click()},css:r?rp.updateIcon:rp.addIcon,"aria-label":r?"Change icon":"Upload an icon","data-microtip-position":"right",role:"tooltip",children:[r?(0,p.BX)(p.HY,{children:[(0,p.tZ)(rc.Z,{iconUrl:r,size:32,alt:"icon"}),s?(0,p.tZ)("div",{css:rp.loadingState,children:(0,p.tZ)("div",{css:rp.loadingIcon,children:(0,p.tZ)(B.Z,{})})}):(0,p.tZ)("div",{css:rp.hoverState,className:"hover-state",children:(0,p.tZ)(rs.Z,{})})]}):(0,p.tZ)(t1.Z,{size:32}),(0,p.tZ)("input",{ref:t,accept:tz.W9.join(","),type:"file",onChange:function(e){var t=e.target,n=t.validity,r=t.files;n.valid&&(null==r?void 0:r.length)&&(l(null),c.uploadImage(r[0],t2.N.TemplateIcon))}})]}),a?(0,p.tZ)("div",{css:rp.error,children:a}):null]})}var rv=n(6065),rg=n(38865),ry=n(16865),rb=n(61010),rw=n(4135),rZ=n(32622),rx=n(9164),rC=n(77402),rk=n(31940),rS=n(80863),r_=n(22510),rE=n(38799),rT=n(42471),rR=n(23882),rD=n(71323),rI=n(69615),rB=n(9929),rG=(0,eB.X)({dialog:[G.l0.py(2),G.l0.colWithGap(16)],actions:[G.l0.rowWithGap(8),G.l0.justify.end],setupItem:[G.l0.rowWithGap(8),G.l0.align.center],learnMoreLink:[G.l0.p(0)],description:[G.l0.colWithGap(8)],reachOut:[G.l0.pt(16),G.l0.px(16),G.l0.border({direction:"top",color:G.TV.outlineDimmest}),{marginInline:-16}]}),rP=function(e){var t,n,r,i,o,a,l,c,s,u,d,f,m=e.repl,g=e.org,y=e.onRequestClose,b=e.onForkSeparately,w=(0,x.Z)().showError,k=g.id,S=(0,h._)((0,rS.Z)({navigateAfterFork:!0,replLinkOptions:{projectPane:!0},onFork:function(){y()},onError:function(){w("Error creating fork - please try again")}}),2),_=S[0],E=S[1].loading,T=(0,h._)((n=(t=(0,rR.Z)()).git,r=t.fs,o=(i=(0,h._)((0,v.useState)({loading:!1,error:null,success:!1}),2))[0],a=i[1],l=(0,C.Z)(),c=(0,h._)((0,rD.r)({}),1)[0],s=(0,Z.Z)(function(){var e,t,n;_({originId:m.id,teamId:null,title:null,description:null,isPrivate:!0,forkToPersonal:null,replReleaseId:null!==(n=null===(t=m.deployment)||void 0===t?void 0:null===(e=t.activeRelease)||void 0===e?void 0:e.id)&&void 0!==n?n:void 0,orgId:k,trackingData:{forkSource:"projectDialog",isOnboarding:!1,isApp:m.publishedAs===j.O2.App,isTemplate:m.publishedAs===j.O2.Template}})}),u=(0,x.Z)().showError,[(0,v.useCallback)((d=(0,A._)(function(e){var t,i,o,d;return(0,L.Jh)(this,function(f){switch(f.label){case 0:return a({loading:!0,error:null,success:!1}),[4,n.init({includeAllInitialFiles:!0,initialCommit:!0})];case 1:if(!(t=f.sent()).error)return[3,5];if(t.error!==rT.aq.ALREADY_INITIALIZED)return[3,4];return[4,n.stageFiles({all:!0})];case 2:return f.sent(),[4,n.commit({message:"Initial project commit",allowEmpty:!1})];case 3:return f.sent().error&&u("Could not generate initial commit"),[3,5];case 4:return a({loading:!1,error:"Could not initialize a repository",success:!1}),[2];case 5:return[4,(0,rB.e)(n)];case 6:return f.sent().error&&u("Could not configure SSH"),[4,r.flush()];case 7:return f.sent(),[4,r.persist({skipDebounce:!0})];case 8:if((i=f.sent()).error||!i.success)return a({loading:!1,error:"Could not initialize a repository",success:!1}),[2];return[4,new Promise(function(e){if(r.getStatus()===e3.kO.Clean){e();return}r.onStatusChange(function(t){if(t===e3.kO.Clean){e();return}})})];case 9:f.sent(),f.label=10;case 10:return f.trys.push([10,12,,13]),[4,c({variables:{input:{mainReplId:l,orgId:e}}})];case 11:if((d=f.sent()).errors||!(null===(o=d.data)||void 0===o?void 0:o.createProject))throw Error("Could not create project");if("Project"!==d.data.createProject.__typename)throw Error(d.data.createProject.message);return[3,13];case 12:return a({loading:!1,error:f.sent().message,success:!1}),[2];case 13:return a({loading:!1,error:null,success:!0}),s.current(),[2]}})}),function(e){return d.apply(this,arguments)}),[n,r,l,c,s,u]),o]),2),I=T[0],B=T[1],G=(f=(0,A._)(function(){return(0,L.Jh)(this,function(e){return B.loading||I(k),[2]})}),function(){return f.apply(this,arguments)});return(0,p.BX)(r_.l0,{css:rG.dialog,onSubmit:function(e){e.preventDefault(),G()},children:[(0,p.tZ)(R.h4,{level:1,variant:"subheadDefault",children:"Planning to merge your changes back into this Repl?"}),(0,p.tZ)(rI.G,{}),(0,p.BX)(D.G,{css:rG.description,children:[(0,p.tZ)(R.xv,{children:"Consider starting a Project  a set of connected, forkable Repls for better collaborative development and versioning. Within a Project, you can:"}),(0,p.tZ)(rE.M,{children:(0,p.BX)("ul",{children:[(0,p.tZ)("li",{children:"Fork a Repl to work on a feature in isolation, and merge back when ready"}),(0,p.tZ)("li",{children:"View all ongoing development in one place"}),(0,p.BX)("li",{children:["Share secrets and configuration between forks"," ",(0,p.tZ)(R.xv,{color:"dimmest",children:"(coming soon)"})]})]})})]}),B.error?(0,p.tZ)(eJ.E,{colorway:"negative",icon:(0,p.tZ)(e0.Z,{}),text:B.error}):null,(0,p.BX)(D.G,{css:rG.actions,children:[(0,p.tZ)(eq.zx,{loading:B.loading||E,text:"Fork separately",onClick:function(){y(),b()}}),(0,p.tZ)(eq.zx,{loading:B.loading||E,text:"Fork & start a Project",colorway:"primary",type:"submit"})]}),(0,p.tZ)(D.G,{css:rG.reachOut,children:(0,p.BX)(R.xv,{color:"dimmest",children:["If you have questions or feedback, reach out to"," ",(0,p.tZ)("a",{href:"mailto:teams@replit.com",children:"teams@replit.com"})]})})]})},rA=n(42564),rL=n(34366);(o=s||(s={})).DeleteRepl="DeleteRepl",o.PowerUp="PowerUp",o.BuyCycles="BuyCycles",o.Unpublish="Unpublish",o.UnpublishTemplate="UnpublishTemplate",o.EditPublishSettings="EditPublishSettings",o.Publish="Publish",o.UpdatePublishedTemplate="UpdatePublishedTemplate",o.Share="Share",(a=u||(u={})).Fork="Fork",a.Delete="Delete",a.Unpublish="Unpublish",a.UnpublishTemplate="UnpublishTemplate",a.EditPublishSettings="EditPublishSettings";var rN=n(3569),rO=n(59830),rU=n(77876);function rX(e){var t=e.repl,n=(0,w.Z)(),r=(0,v.useMemo)(function(){if(t.org){var e;return{text:t.org.name,css:[{"&, & span":G.l0.flex.shrink(1)}],iconLeft:(0,p.tZ)(rv.q,{src:null!==(e=t.org.image)&&void 0!==e?e:null,username:t.org.name,fullName:t.org.name,size:24})}}return t.user?{text:t.user.username,css:[{"&, & span":G.l0.flex.shrink(1)}],iconLeft:(0,p.tZ)(rv.q,{src:t.user.image,username:t.user.username,size:24})}:{text:""}},[t]);if(!t.user||!t.org&&!t.user)return null;var i=t.org?(0,rN._Q)(t.org).repls:(0,rg.Ru)(t.user),o=t.org?(0,rN._Q)(t.org).repls.href.toString():(0,rg.Ru)(t.user).as;return n?(0,p.tZ)(eq.zx,(0,f._)((0,d._)({},r),{onClick:function(){rZ.X.openExternalUrl(o)}})):(0,p.tZ)(tn.Z,(0,f._)((0,d._)({},r,i),{prefetch:!1}))}function rM(e){var t,n,r=e.setActiveDialog,i=e.repl,o=e.isTemplate,a=e.updateIconUrl,l=e.showCloseButton,c=e.setIsEditing,u=e.updateReplInfo,m=(0,rL.Z)(),g=!!i.publishedAs,b=(0,h._)((0,v.useState)(!1),2),Z=b[0],C=b[1],k=(0,w.Z)(),S=!!i.org&&i.org.type===j.a4.Team,_=(0,y.g)().fork,E=(0,rA.J)(),I=(0,x.Z)(),P=I.showConfirm,A=I.showError,L=(0,h._)((0,rU.F)({onFork:function(){P("Repl forked, redirecting...")},onError:function(){A("Error creating fork - please try again")}}),2),N=L[0],O=L[1].loading,U=(0,v.useCallback)(function(){var e;if(!(null===(e=i.org)||void 0===e?void 0:e.id)||E.loading){_();return}if(E.isEligibleForProject&&!E.hasProject){C(!0);return}if(E.hasProject){N({orgId:i.org.id,repl:i,forkSource:"replInfoHeader"});return}_()},[i,_,E,N]),X=[];i.authorizations.fork.isAuthorized&&X.push({value:"Fork",label:"Fork",icon:O?(0,p.tZ)(B.Z,{}):(0,p.tZ)(rw.Z,{}),isDisabled:O});var M=i.authorizations.publish.isAuthorized;if(!k&&!m&&!S){var F=i.isPrivate||!i.isRenamed||!M,W="";i.isPrivate?W="Make Repl public to publish":i.isRenamed||(W="Rename Repl to publish"),null==i.publishedAs&&X.push({value:s.Publish,label:"Publish as Template",icon:(0,p.tZ)(rO.Z,{}),isDisabled:F,description:W,dataCy:"repl-info-header-settings-publish"}),i.publishedAs!==j.O2.RegularRepl||F||X.push({value:s.Unpublish,label:"Unpublish",icon:(0,p.tZ)(rb.Z,{})}),o&&!F&&X.push({value:s.UnpublishTemplate,label:"Unpublish template",icon:(0,p.tZ)(rb.Z,{})}),g&&!F&&X.push({value:s.EditPublishSettings,label:"Edit template publish settings",icon:(0,p.tZ)(rs.Z,{})})}return i.authorizations.deleteRepl.isAuthorized&&X.push({isDestructive:!0,value:s.DeleteRepl,label:"Delete",icon:(0,p.tZ)(t0.Z,{})}),(0,p.BX)(D.G,{css:[G.l0.colWithGap(8),G.l0.p(8)],children:[(0,p.BX)(D.G,{css:[G.l0.rowWithGap(8),G.l0.align.center,G.l0.justify.spaceBetween,(0,T._)({},G.BC.max("mobileMax"),[G.l0.flex.columnReverse,G.l0.align.start,{gap:G.TV.space8}])],children:[(0,p.BX)(D.G,{css:[G.l0.rowWithGap(8),G.l0.center,G.l0.flex.shrink(1)],children:[(0,p.tZ)(rX,{repl:i}),i.authorizations.editMetadata.isAuthorized&&o?(0,p.tZ)(rm,{value:i.iconUrl,onChange:a}):null]}),(0,p.BX)(D.G,{css:[G.l0.align.center,G.l0.rowWithGap(8),(0,T._)({},G.BC.max("mobileMax"),{width:"100%",">*:not(div)":{flex:1}})],children:[k?null:(0,p.tZ)(tn.Z,(0,f._)((0,d._)({prefetch:!1},(0,te.j3)(i)),{iconLeft:(0,p.tZ)(ry.Z,{}),colorway:"primary",text:"Cover page",target:"_blank",style:{pointerEvents:"auto"}})),o||k||m||S?null:(0,p.tZ)(eY.u,{tooltip:"Make Repl public to share",isDisabled:!i.isPrivate,children:(0,p.tZ)(eq.zx,{type:"button",iconLeft:(0,p.tZ)(t1.Z,{}),onClick:function(){r(s.Share)},text:"Share",disabled:i.isPrivate})}),o&&!k?(0,p.tZ)(eq.zx,{type:"button",iconLeft:(0,p.tZ)(t1.Z,{}),onClick:function(){return r(s.UpdatePublishedTemplate)},text:"Publish changes"}):null,k?(0,p.tZ)(ta.q,{textToCopy:window.location.href,tooltipText:"Copy Repl URL",tooltipSuccessText:"Copied!",iconLeft:(0,p.tZ)(rC.Z,{}),text:""}):null,X.length>0&&(0,p.tZ)(rx.ZE,{dataCy:"repl-info-header-settings",trigger:(0,p.tZ)(t$.hU,{alt:"Repl settings",size:32,children:(0,p.tZ)(rk.Z,{size:16})}),"aria-label":"Repl settings",onAction:function(e){switch(e){case"Fork":U();return;case s.Unpublish:r(s.Unpublish);return;case s.UnpublishTemplate:r(s.UnpublishTemplate);return;case s.DeleteRepl:r(s.DeleteRepl);return;case s.EditPublishSettings:r(s.EditPublishSettings);return;case s.Publish:r(s.Publish);return}},children:X.map(function(e){return(0,p.tZ)(rx.sN,{id:e.value,label:e.label,icon:e.icon,isDestructive:e.isDestructive,isDisabled:e.isDisabled,description:e.description,dataCy:e.dataCy},e.value)})}),l?(0,p.tZ)(t$.hU,{alt:"Close",tooltipBehavior:"hidden",onClick:function(){u(),c(!1)},children:(0,p.tZ)(t7.Z,{})}):null]})]}),(null===(t=i.org)||void 0===t?void 0:t.type)===j.a4.Team&&(null===(n=i.user)||void 0===n?void 0:n.__typename)==="User"?(0,p.BX)(R.xv,{variant:"small",color:"dimmest",children:["Created by @",i.user.username]}):null,i.lastPublishedAt&&M?(0,p.BX)(R.xv,{variant:"small",color:"dimmest",multiline:!1,children:["Last published on"," ",new Date(i.lastPublishedAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})]}):null,Z&&i.org?(0,p.tZ)(tK.u,{isOpen:!0,onRequestClose:function(){return C(!1)},children:(0,p.tZ)(rP,{repl:i,org:i.org,onRequestClose:function(){return C(!1)},onForkSeparately:_})}):null]})}var rF=(0,eB.X)({loadingRoot:[G.l0.center,G.l0.p(16)],root:{overflow:"auto",maxHeight:"80vh",".icon-container":[G.l0.display.flex,G.l0.align.center,G.l0.px(4)],form:G.l0.p(8)}});function rW(e){var t=e.getDesktopLayoutState,n=e.setIsEditing,r=e.showCloseButton,i=e.onDeployClick,o=(0,C.Z)(),a=(0,rl.BZ)({variables:{replId:o}}).data,l=(null==a?void 0:a.repl.__typename)==="Repl"?a.repl:null;return l?(0,p.tZ)(rV,{getDesktopLayoutState:t,setIsEditing:n,showCloseButton:r,repl:l,onDeployClick:i}):(0,p.tZ)(D.G,{css:rF.loadingRoot,children:(0,p.tZ)(B.Z,{})})}function rV(e){var t,n,r,i,o=e.repl,a=e.getDesktopLayoutState,l=e.showCloseButton,c=e.setIsEditing,u=e.onDeployClick,C=(0,ra.useRouter)(),T=(0,w.Z)(),I=(0,h._)((0,v.useState)(null),2),B=I[0],P=I[1],A=(0,h._)((0,v.useState)(o.isRenamed?o.title:""),2),L=A[0],N=A[1],O=(0,h._)((0,v.useState)(o.description||""),2),U=O[0],X=O[1],M=(0,h._)((0,v.useState)(o.rawTemplateLabel),2),F=M[0],W=M[1],V=(0,x.Z)().showError,H=o.publishedAs===j.O2.Template,z=(null===(t=o.org)||void 0===t?void 0:t.type)!=="team"&&(o.authorizations.editVisibility.isAuthorized||o.authorizations.editVisibility.code===j.RO.RequiresActiveSubscription);(0,v.useEffect)(function(){X(o.description||"")},[o.description]);var q=(0,E.Z)(),J=(0,v.useRef)(o),Y=(0,h._)((0,rl.ap)({variables:{id:o.id},onCompleted:function(){if(T){C.push("/desktopApp/home");return}C.push("/home","/~")},update:function(e,t){var n;(null===(n=t.data)||void 0===n?void 0:n.deleteRepl)&&(e.evict({id:e.identify(t.data.deleteRepl)}),e.gc())},onError:function(e){return V((0,k.Z)(e.message))}}),2),$=Y[0],K=Y[1].loading,Q=(0,h._)((0,rl.vi)({onError:function(e){return V((0,k.Z)(e.message))},onCompleted:function(e){var t=e.updateRepl.repl,n=J.current,r={};n.description!==t.description&&(r.description=t.description),n.title!==t.title&&(r.title=t.title),n.url!==t.url&&(r.url=t.url,C.push({pathname:q,query:{replUrl:t.url}},t.url+window.location.search+window.location.hash)),n.isRenamed!==t.isRenamed&&(r.isRenamed=!!t.isRenamed),J.current=o,Object.keys(r).length>0&&c(!1)}}),2),ee=Q[0],et=Q[1].loading,en=(0,h._)((0,rl.gF)({variables:{input:{replId:o.id}},onError:function(e){m.Tb(e),V((0,k.Z)(e.message))}}),2),er=en[0],ei=en[1],eo=(0,v.useMemo)(function(){return!!L&&L!==o.title||F!==o.rawTemplateLabel||(""!==U||!!o.description)&&U!==o.description},[o,L,U,F]),ea=(0,Z.Z)(eo),el=(0,v.useCallback)(function(){eo&&ee({variables:{input:{id:o.id,title:L.trim()||o.title,description:U,templateLabel:o.authorizations.editTemplateMetadata.isAuthorized?F:void 0}}})},[eo,ee,o,L,U,F]),ec=(0,Z.Z)(el);(0,v.useLayoutEffect)(function(){return function(){ea.current&&ec.current()}},[ec,ea]);var es=function(){ee({variables:{input:{id:o.id,isPrivate:!o.isPrivate}},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:(0,f._)((0,d._)({},o),{isPrivate:!o.isPrivate})}}}),(0,_.j)(_.U3.PRIVATE_TOGGLED,{enabled:!o.isPrivate,source:"workspace_info_modal"})},eu=o.isRenamed?"Name your Repl":"Default name: ".concat(o.title),ed=[j.Sy.Submit,j.Sy.PublishTemplate,j.Sy.EditTemplate].includes(o.workspaceCta),ef=(0,tR.U)(),eh=(null===(n=o.owner)||void 0===n?void 0:n.__typename)==="Team",ep=o.authorizations.viewDeploymentConfig.isAuthorized&&"function"==typeof u,em="/replEnvironmentDesktop"===q&&ep,ev=(null===(r=o.hostingDeployment)||void 0===r?void 0:r.__typename)==="HostingDeployment"&&o.hostingDeployment.currentBuild;return(0,p.BX)("div",{css:rF.root,"data-can-change-description":o.authorizations.editMetadata.isAuthorized,children:[(0,p.tZ)(y.b,{forkParams:{trackingData:{forkSource:"editReplPopoverMenuItem"}},repl:o,teamContext:null===(i=o.user)||void 0===i?void 0:i.username,children:(0,p.tZ)(rM,{repl:o,isTemplate:H,showCloseButton:l,setActiveDialog:P,setIsEditing:c,updateIconUrl:function(e){return ee({variables:{input:{id:o.id,iconUrl:e}},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:(0,f._)((0,d._)({},o),{iconUrl:e})}}})},updateReplInfo:el})}),(0,p.tZ)("form",{onSubmit:function(e){e.preventDefault(),el()},children:(0,p.BX)(D.G,{css:[G.l0.align.stretch,G.l0.colWithGap(16)],children:[(0,p.BX)(eF.Tg,{background:"default",css:[G.l0.colWithGap(16)],children:[(0,p.tZ)(D.G,{css:[G.l0.flex.column],children:(0,p.BX)(D.G,{css:[G.l0.colWithGap(4)],children:[(0,p.BX)(D.G,{css:[G.l0.flex.row,G.l0.justify.spaceBetween,G.l0.align.end],children:[(0,p.tZ)("label",{htmlFor:ef("name"),children:(0,p.tZ)(R.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Name"})}),(0,p.tZ)(b.Z,{maxLength:60,value:L,hideLabel:!0})]}),(0,p.tZ)(tv.II,{style:{cursor:o.authorizations.editMetadata.isAuthorized?"auto":"not-allowed"},disabled:!o.authorizations.editMetadata.isAuthorized,maxLength:60,placeholder:eu,value:L,onChange:function(e){return N(e.target.value)},spellCheck:!1,id:ef("name"),dataCy:"ws-repl-info-title-input"})]})}),(0,p.tZ)(D.G,{css:[G.l0.flex.column],children:(0,p.BX)(D.G,{css:[G.l0.colWithGap(4)],children:[(0,p.BX)(D.G,{css:[G.l0.flex.row,G.l0.justify.spaceBetween,G.l0.align.end],children:[(0,p.tZ)("label",{htmlFor:ef("description"),children:(0,p.tZ)(R.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Description"})}),(0,p.tZ)(b.Z,{maxLength:n9.p,value:U,hideLabel:!0})]}),(0,p.tZ)(tv.B,{onKeyDown:function(e){13===e.keyCode&&(e.ctrlKey||e.metaKey)},disabled:!o.authorizations.editMetadata.isAuthorized,maxLength:n9.p,value:U,onChange:function(e){return X(e.target.value)},placeholder:"What does this Repl do?",css:[G.l0.minHeight(96),G.l0.maxHeight(256),{resize:"vertical"}],id:ef("description")})]})})]}),H&&o.authorizations.editTemplateMetadata.isAuthorized?(0,p.tZ)(eF.Tg,{background:"default",css:[G.l0.colWithGap(4)],children:(0,p.BX)(D.G,{css:[G.l0.colWithGap(4)],children:[(0,p.tZ)("label",{htmlFor:ef("template"),children:(0,p.tZ)(R.xv,{color:"dimmer",variant:"small",multiline:!1,children:"Template label"})}),(0,p.tZ)(tv.II,{value:F,maxLength:60,placeholder:"Template label",spellCheck:!1,onChange:function(e){return W(e.target.value)},id:ef("template")})]})}):null]})}),ed?null:(0,p.BX)(D.G,{css:[G.l0.colWithGap(24),G.l0.p(8),G.l0.pt(0)],children:[z?(0,p.BX)(D.G,{css:[G.l0.colWithGap(8)],children:[(0,p.BX)(rt.hE,{tag:"fieldset",name:ef("privacy"),value:o.isPrivate.toString(),onChange:function(){if(!et){(0,_.j)(_.U3.POWER_UP_TOGGLE_REQUESTED,{powerUp:"private",setting:!o.isPrivate,source:"workspace_info_modal"});var e,t=!o.isPrivate;if(o.authorizations.editVisibility.isAuthorized||!1===t){es();return}o.authorizations.editVisibility.code===j.RO.RequiresActiveSubscription&&(null===(e=o.org)||void 0===e?void 0:e.__typename)!=="Org"?P(s.PowerUp):V(o.authorizations.editVisibility.message)}},row:!0,primary:!0,stretch:!0,children:[(0,p.tZ)(rt.rK,{id:ef("false"),value:"false",text:"Public",icon:(0,p.tZ)(rr.Z,{})}),(0,p.tZ)(rt.rK,{id:ef("true"),value:"true",text:"Private",icon:(0,p.tZ)(ri.Z,{})})]}),(0,p.tZ)(R.xv,{variant:"small",color:"dimmest",children:(0,S.Z)(o.isPrivate,eh)})]}):null,em?(0,p.tZ)(D.G,{css:G.l0.colWithGap(8),children:(0,p.tZ)(eq.zx,{text:ev?"Redeploy your Repl":"Deploy your Repl",iconLeft:(0,p.tZ)(rn.Z,{}),colorway:ev?void 0:"primary",onClick:function(){u(),ev||(0,_.j)(_.U3.DEPLOY_PROJECT_SELECTED,{source:"workspace_info_modal"})}})}):null]}),(0,p.tZ)(re.Z,{isOpen:B===s.DeleteRepl,onClose:function(){return P(null)},selectedRepls:[o],onDelete:function(){$()},deleting:K}),(0,p.tZ)(ro.Z,{isOpen:B===s.PowerUp,onClose:function(){return P(null)},type:"purchase",analyticsContext:{upgrade:{context:"workspace_info_modal"}}}),(0,p.tZ)(tK.u,{isOpen:B===s.Unpublish,onRequestClose:function(){return P(null)},children:(0,p.tZ)(n7.Z,{repl:o,source:"replEnvironment",onDone:function(){P(null)}})}),(0,p.tZ)(tK.u,{isOpen:B===s.UnpublishTemplate,onRequestClose:function(){return P(null)},children:(0,p.tZ)(g.Z,{confirmLabel:"Yes, unpublish this Template",isDestructive:!0,title:"Unpublish Template",onCancel:function(){return P(null)},onConfirm:function(){ei.loading||(er(),P(null))},children:"Your Repl will no longer be discoverable on Templates. You can republish again at any time, and all of your comments or reactions will stick around."})}),(0,p.tZ)(tK.u,{isOpen:B===s.EditPublishSettings,onRequestClose:function(){return P(null)},noPadding:!0,maxWidth:872,fitContent:!0,children:(0,p.tZ)(nU,{source:"replEnvironment",replId:o.id,getDesktopLayoutState:a})}),(0,p.tZ)(tK.u,{isOpen:B===s.Publish,onRequestClose:function(){return P(null)},noPadding:!0,maxWidth:872,fitContent:!0,children:(0,p.tZ)(nU,{source:"replEnvironment",replId:o.id,getDesktopLayoutState:a})}),(0,p.tZ)(tK.u,{isOpen:B===s.UpdatePublishedTemplate,onRequestClose:function(){return P(null)},noPadding:!0,children:(0,p.tZ)(n4,{repl:o,getDesktopLayoutState:a})}),(0,p.tZ)(tK.u,{isOpen:B===s.Share,onRequestClose:function(){return P(null)},noPadding:!0,children:(0,p.tZ)(tl,{repl:o})})]})}},56250:function(e,t,n){n.d(t,{s:function(){return l}});var r=n(21262),i=n(71440),o=n(71519);function a(){var e=(0,r._)(["\n  fragment WorkspaceHeaderReplMetadataRepl on Repl {\n    id\n    title\n    iconUrl\n    user {\n      id\n      ...UserLinkUser\n    }\n    org {\n      id\n      name\n      image\n      slug\n      type\n    }\n    project {\n      id\n      title\n    }\n  }\n  ","\n"]);return a=function(){return e},e}var l=(0,i.Ps)(a(),o._)},5128:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(42516),i=n(3796),o=n(15023),a=n(24766),l=n(93245),c=n(36809),s=n(63163),u=n(47523),d=n(61826),f=n(22419),h=(0,c.X)({metadata:[s.l0.rowWithGap(6),s.l0.align.center,s.l0.flex.growAndShrink(1)],iconWrapper:[s.l0.position.relative,s.l0.display.none,(0,r._)({},s.BC.min("tabletMax"),[s.l0.display.flex])],dimIcon:[{opacity:.2}],diconnectedIcon:[s.l0.position.absolute,{left:0,right:0,top:0,bottom:0,margin:"auto"}],title:[s.l0.flex.shrink(1),s.l0.truncate]});function p(e){var t=e.repl,n=(0,u.Z)().didDisconnect;return(0,i.BX)(l.G,{css:h.metadata,children:[(0,i.BX)(l.G,{css:h.iconWrapper,children:[(0,i.tZ)(l.G,{css:n&&h.dimIcon,children:(0,i.tZ)(o.ZP,{iconUrl:t.iconUrl,size:20,alt:""})}),n?(0,i.tZ)(f.u,{tooltip:"Reconnecting",children:(0,i.tZ)(d.Z,{size:16,css:h.diconnectedIcon})}):null]}),(0,i.tZ)(a.xv,{multiline:!1,css:h.title,"data-cy":"header-repl-title",color:n?"dimmer":"default",children:t.title})]})}},74457:function(e,t,n){n.d(t,{ZP:function(){return ee},L7:function(){return Q}});var r,i,o,a=n(27387),l=n(42516),c=n(41733),s=n(30509),u=n(66626),d=n(96583),f=n(3796),h=n(62279),p=n(25722),m=n(29574),v=n(47126),g=n(80786),y=n(80951),b=n(21262),w=n(71440),Z=n(9122);function x(){var e=(0,b._)(["\n  query CelebrateReplRunCurrentUser {\n    currentUser {\n      id\n      timeCreated\n    }\n  }\n"]);return x=function(){return e},e}var C={},k=(0,w.Ps)(x()),S=new Date("2022-07-08"),_=(0,y.O4)("useCelebrateFirstReplPlay",!1),E=n(99595),T=n(16155),R=n(10777),D=n(14074),I=n(96949),B=n(24766),G=n(22419),P=n(75710),A=n(10578),L=n(81253),N=n(45252),O=n(63163),U=n(1053),X=n(62695),M=n(31252),F=n(75271);function W(){var e=(0,b._)(["\n  query WorkspaceRunButton($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        title\n        rootOriginReplUrl\n        source {\n          release {\n            id\n            repl {\n              id\n              title\n              owner {\n                ... on User {\n                  id\n                  username\n                }\n                ... on Team {\n                  id\n                  username\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n    currentUser {\n      id\n    }\n  }\n"]);return W=function(){return e},e}var V={},H=(0,w.Ps)(W()),z=n(76848),j=n(21781);function q(e){var t=e.runState,n=e.size,r=void 0===n?16:n;switch(t){case U.Ah.IDLE:return(0,f.tZ)(L.Z,{size:r});case U.Ah.RUNNING:return(0,f.tZ)(N.Z,{size:r});default:return(0,f.tZ)(A.Z,{size:r})}}var J=(r={},(0,l._)(r,U.Ah.IDLE,"Run"),(0,l._)(r,U.Ah.RUNNING,"Stop"),(0,l._)(r,U.Ah.STOPPING,"Stopping"),(0,l._)(r,U.Ah.OFFLINE,"Working"),(0,l._)(r,U.Ah.BEFORE_RUN,"Working"),r),Y=(i={small:48,large:85},(0,l._)(i,U.Ah.IDLE,68),(0,l._)(i,U.Ah.RUNNING,72),(0,l._)(i,U.Ah.STOPPING,92),(0,l._)(i,U.Ah.OFFLINE,86),(0,l._)(i,U.Ah.BEFORE_RUN,86),i),$=(0,h.iv)([O.l0.py(12),O.l0.width(Y.small),O.l0.flex.row,O.l0.center,O.l0.borderRadius(),O.l0.backgroundColor.accentPositiveDimmest,O.l0.color.accentPositiveStrongest,O.l0.cursor.pointer,O.l0.focusRing,(o={transition:"color 0.2s ease 0s, background-color 0.2s ease 0s",border:"1px solid",borderColor:"transparent",lineHeight:1,outline:"0 none","&:hover":[{color:"white"},O.l0.backgroundColor.accentPositiveDefault],"&:active":[{borderColor:O.TV.accentPositiveStrongest}]},(0,l._)(o,(0,X.et)("tabletMax"),[O.l0.width(Y.large)]),(0,l._)(o,":focus-visible",{outlineColor:"".concat(O.TV.accentPositiveStrongest)}),o)]),K=(0,h.iv)([O.l0.color.foregroundDimmer,O.l0.backgroundColor.backgroundHigher,{borderColor:"transparent","&:hover":[{color:"white"},O.l0.backgroundColor.backgroundHighest],"&:active":[{borderColor:O.TV.accentPrimaryDefault}]}]);function Q(e){var t=(0,u._)((0,F.useState)(e.getRunState()),2),n=t[0],r=t[1];return(0,F.useEffect)(function(){return r(e.getRunState()),e.onStateChanged(function(e){r(e)})},[e]),n}var ee=F.forwardRef(function(e,t){var n,r,i,o,h,y,b,w,x,A,L,N,W,ee=e.runner,et=e.onRunInitiated,en=e.style,er=e.disableTooltip,ei=e.shortcut,eo=(0,z.s2)(),ea=(0,T.Z)(),el=Q(ee),ec=(0,F.useMemo)(function(){if(!eo||el===U.Ah.OFFLINE)return el;switch(eo.step){case j.KX.RUNNING:return U.Ah.RUNNING;case j.KX.FAILED:case j.KX.FINISHED:default:return U.Ah.IDLE}},[el,eo]),es=(n=(0,c._)({},V,{variables:{id:ea}}),Z.a(H,n)).data,eu=(null==es?void 0:es.repl.__typename)==="Repl"?es.repl:null,ed=(r=(0,c._)({},C,void 0),h=Z.a(k,r),y=(0,m.Gn)("extraDelight").preferences.extraDelight,b=(0,v.$0)().fireCircularBurstFrom,x=(w=(0,u._)((0,g.KO)(_),2))[0],A=w[1],L=null!==(o=null===(i=h.data)||void 0===i?void 0:i.currentUser)&&void 0!==o?o:null,N=!x&&L&&new Date(L.timeCreated)>=S,{hasCelebrated:x,celebrate:function(e){if(!e){p.Tb(Error("Cannot find element for celebrate Repl run confetti"));return}(y||N)&&b({element:e}),N&&A(!0)}}).celebrate,ef=ec!==U.Ah.IDLE&&ec!==U.Ah.RUNNING,eh=(0,E.Z)().showError,ep=(0,F.useRef)(null),em=(W=(0,a._)(function(){var e,t,n,r,i,o,a,l;return(0,d.Jh)(this,function(c){switch(c.label){case 0:if(c.trys.push([0,5,,6]),ec!==U.Ah.IDLE)return[3,4];if(et&&et(),ep.current&&ed(ep.current),!(null==eo?void 0:eo.run))return[3,1];return eo.run(),[3,3];case 1:return[4,ee.run()];case 2:c.sent(),c.label=3;case 3:return eu&&(0,I.j)(I.U3.PROJECT_RAN,{placement:"primary_btn",replId:eu.id,replTitle:eu.title,rootOriginReplUrl:eu.rootOriginReplUrl,templateTitle:null===(n=eu.source)||void 0===n?void 0:null===(t=n.release)||void 0===t?void 0:null===(e=t.repl)||void 0===e?void 0:e.title,templateOwner:null===(a=eu.source)||void 0===a?void 0:null===(o=a.release)||void 0===o?void 0:null===(i=o.repl)||void 0===i?void 0:null===(r=i.owner)||void 0===r?void 0:r.username}),[2];case 4:if(ec===U.Ah.RUNNING){if(null==eo?void 0:eo.stop)return[2,eo.stop()];return[2,ee.stopRun()]}return[3,6];case 5:if(eh((l=c.sent()).toString()),R.kg.error("run button error",{errorMessage:l.message}),ec===U.Ah.RUNNING){if(null==eo?void 0:eo.stop)return[2,eo.stop()];return[2,ee.stopRun()]}return[3,6];case 6:return[2]}})}),function(){return W.apply(this,arguments)}),ev=ec===U.Ah.IDLE;return"inline-small"===(void 0===en?"default":en)?(0,f.BX)("button",{"data-cy":"ws-run-btn",onClick:em,ref:ep,disabled:ef,css:[O.l0.p(12),O.l0.flex.row,O.l0.center,O.l0.borderRadius(8),ev?O.l0.backgroundColor.accentPositiveDimmest:O.l0.backgroundColor.backgroundHigher,ev?O.l0.color.accentPositiveStronger:O.l0.color.foregroundDimmer,{border:"1px solid",borderColor:ev?O.TV.accentPositiveDimmest:O.TV.backgroundHigher},O.l0.width("100%"),O.l0.height("100%")],children:[(0,f.tZ)(q,{runState:ec}),(0,f.tZ)(B.xv,{variant:"subheadDefault",css:[O.l0.pl(8)],multiline:!1,children:J[ec]})]}):(0,f.tZ)(G.u,{placement:"bottom",isDisabled:er||!ei,tooltip:ei?(0,f.tZ)(M.bM,{keyCombo:ei,fontSize:12}):null,children:function(e,n){return(0,f.BX)("button",(0,s._)((0,c._)({},e),{onClick:em,ref:(0,D.l)(ep,n,t),css:[$,!ev&&K,O.l0.height(32),(0,l._)({transition:"width 80ms ease-out"},(0,X.et)("tabletMax"),O.l0.width(Y[ec]))],children:[(0,f.tZ)(q,{runState:ec,size:12}),(0,f.tZ)(B.xv,{multiline:!1,css:[O.l0.pl(6),O.l0.display.none,O.l0.fontWeight.medium,(0,l._)({lineHeight:1,overflow:"visible"},"@media (min-width: ".concat(P.j.tabletMax,"px)"),[O.l0.display.block])],children:J[ec]})]}))}})})},29460:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(41733),i=n(30509),o=n(98924),a=n(3796),l=n(9602),c=n(36809),s=n(63163),u=(0,c.X)({checked:[s.l0.backgroundColor.backgroundHigher],unchecked:[s.l0.color.foregroundDimmest]});function d(e){var t=e.alt,n=e.icon,c=e.checked,s=e.onClick,d=(0,o._)(e,["alt","icon","checked","onClick"]);return(0,a.tZ)(l.hU,(0,i._)((0,r._)({},d),{css:c?u.checked:u.unchecked,alt:"".concat(c?"Disable":"Enable"," ").concat(t),onClick:s,children:n}))}},21885:function(e,t,n){n.d(t,{Z:function(){return d}});var r,i=n(42516),o=n(3796),a=n(62279),l=n(22419),c=n(19602),s=n(63163),u=(0,a.iv)([s.l0.focusRing,s.l0.display.flex,s.l0.center,s.l0.borderRadius(4),s.l0.backgroundColor.backgroundRoot,s.l0.color.foregroundDefault,s.l0.cursor.pointer,s.l0.p(4),(r={transition:"background-color 0.2s",border:"none"},(0,i._)(r,s.wl.hover,[s.l0.backgroundColor.backgroundHigher]),(0,i._)(r,":focus",{outline:"none"}),r)]),d=function(e){var t=e.onClick;return(0,o.tZ)(l.u,{tooltip:"Clear",placement:"bottom-start",children:(0,o.tZ)("button",{"aria-label":"Clear",onClick:t,css:u,children:(0,o.tZ)(c.Z,{size:16})})})}},10406:function(e,t,n){n.d(t,{f:function(){return R}});var r,i=n(3796),o=n(14118),a=n(69792),l=n(27387),c=n(42516),s=n(66626),u=n(96583),d=n(25722),f=n(46954),h=n(16155),p=n(42471),m=n(64566),v=n(75271),g=n(41733),y=n(21262),b=n(71440),w=n(82303);function Z(){var e=(0,y._)(["\n  mutation SyncReplGitState($input: UpdateReplGitStateInput!) {\n    updateReplGitState(input: $input) {\n      ... on Repl {\n        id\n      }\n    }\n  }\n"]);return Z=function(){return e},e}var x={},C=(0,b.Ps)(Z()),k=n(83059),S=(r={},(0,c._)(r,p.yG.CLEAN,"CLEAN"),(0,c._)(r,p.yG.DIRTY_INDEX,"DIRTY_INDEX"),(0,c._)(r,p.yG.DIRTY_WORKTREE,"DIRTY_WORKTREE"),r),_=function(e){var t;return null!==(t=S[e])&&void 0!==t?t:null},E=n(43627);function T(){var e,t,n,r,i,o,a,c,y,b,Z,S,E;return e=(0,h.Z)(),n=(0,m.Z)((t=(0,l._)(function(e){var t,n,r,i;return(0,u.Jh)(this,function(o){switch(o.label){case 0:return[4,e.getRepositoryState()];case 1:if((t=o.sent()).error)return[2,t];if(n=t.type,r=null,n!==p.y5.NORMAL)return[2,{error:null,notNormal:!0}];return[4,e.status()];case 2:if((i=o.sent()).error)return[2,i];return[2,{branchName:null==(r=i)?void 0:r.branch,state:_(t.state),type:"NORMAL",error:null}]}})}),function(e){return t.apply(this,arguments)})),r=(0,k.Z)(function(){return n&&!n.error&&!n.notNormal&&n.branchName&&n.state?{lastBranch:n.branchName,state:n.state,type:n.type}:null},[n]),o=(null==(i=(0,f.Z)(r,1e3))?void 0:i.type)==="NORMAL",b=null!==(c=null==(y=(0,m.Z)((a=(0,l._)(function(e){var t;return(0,u.Jh)(this,function(n){switch(n.label){case 0:if(!o)return[2,{error:null,firstSha:null}];return[4,e.escapeHatchGitExecRead("git rev-list --max-parents=0 HEAD")];case 1:if((t=n.sent()).error)return[2,{error:t.error}];if(!t.output)return[2,{error:null,firstSha:null}];if(!/^[0-9a-f]{40}$/.test(t.output.trim()))return d.Tb(Error("useFirstCommitSha expected a 40 character sha, got: ".concat(t.output.trim()))),[2,{error:p.aq.UNKNOWN}];return[2,{error:null,firstSha:t.output.trim()}]}})}),function(e){return a.apply(this,arguments)}),[o]))?void 0:y.firstSha)&&void 0!==c?c:null,S=(0,s._)((Z=(0,g._)({},x,void 0),w.D(C,Z)),1)[0],E=(0,v.useCallback)(function(t){return S({variables:{input:{replId:e,gitInfo:t}}})},[S,e]),(0,v.useEffect)(function(){(null==i?void 0:i.state)&&b&&E({version:1,lastBranch:i.lastBranch,state:i.state,type:i.type,firstCommitSha:b,aiSummary:null})},[null==i?void 0:i.lastBranch,null==i?void 0:i.state,null==i?void 0:i.type,b,E]),null}function R(){var e=(0,o.P5)({controlName:"flag-legacy-team-repo-features"}),t=(0,a.e)({controlName:E.r});return e||t?(0,i.tZ)(T,{}):null}},66975:function(e,t,n){n.d(t,{Z:function(){return W}});var r=n(66626),i=n(3796),o=n(379),a=n(22893),l=n(24766),c=n(22419),s=n(10539),u=n(93245),d=n(63163),f=n(75271),h=n(36200),p=n(20622),m=n(14118),v=n(99595),g=n(11006),y=n(27840),b=n(19602),w=n(9834),Z=n.n(w),x=n(41733),C=n(21262),k=n(71440),S=n(87903),_=n(82303);function E(){var e=(0,C._)(["\n  mutation DeleteThreadMessage($id: String!) {\n    deleteThreadMessage(messageId: $id) {\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return E=function(){return e},e}var T={},R=(0,k.Ps)(E(),S.j7),D=n(38935),I=n(29574),B=n(12623),G=n(97242),P=n(26555),A=n(42173),L=n(71253),N=n(66164),O=n(25462),U=n(62279),X=["a","pre","code","em","strong","p","ul","ol","li","img","del","h1","h2","h3","h4","h5","h6","sup","sub","br","hr","blockquote","span","div"],M=(0,f.memo)(function(e){var t=e.content,n=(0,I.Gn)("fontSize").preferences.fontSize,r=(0,f.useCallback)(function(e){return(0,i.tZ)(B.Z,(0,x._)({},e))},[]);return(0,i.tZ)("div",{css:[{"& ol":{paddingInlineStart:"20px"},"& ul":{paddingInlineStart:"20px",listStyle:"initial"}}],children:(0,i.tZ)(P.D,{css:(0,U.iv)({wordBreak:"break-word",boxSizing:"border-box",whiteSpace:"normal",lineHeight:1.5,color:d.TV.foregroundDefault,fontFamily:"".concat(d.TV.fontFamilyDefault," !important"),fontSize:n,textSizeAdjust:"100%","h1, h2, h3, h4, h5, h6":{color:d.TV.foregroundDefault,fontWeight:d.TV.fontWeightMedium,marginBottom:d.TV.space16,lineHeight:1.25,wordWrap:"break-word"},"h1, h2":{paddingBottom:d.TV.space8,borderBottom:"1px solid ".concat(d.TV.backgroundHigher),marginTop:d.TV.space32},h1:{fontSize:"2em"},h2:{fontSize:"1.5em"},h3:{fontSize:"1.25em",marginTop:d.TV.space24},h4:{fontSize:"1em",marginTop:d.TV.space16},h5:{fontSize:"0.875em"},h6:{color:d.TV.foregroundDimmer,fontSize:"0.85em"},".anchor":{float:"left",lineHeight:1,marginLeft:"calc(-1 * ".concat(d.TV.space16,")"),paddingRight:d.TV.space4},".anchor:focus":{outline:"none"},p:{marginBottom:d.TV.space16,fontSize:n,fontFamily:"".concat(d.TV.fontFamilyDefault," !important")},"p:last-child":{marginBottom:0},table:{borderSpacing:0,borderCollapse:"collapse",display:"block",width:"100%",overflow:"auto",marginBottom:d.TV.space16,wordBreak:"normal",th:{fontWeight:d.TV.fontWeightMedium},"td, th":{padding:"".concat(d.TV.space8," ").concat(d.TV.space12),border:"1px solid ".concat(d.TV.backgroundHighest),minWidth:"16ch"},tr:{backgroundColor:d.TV.backgroundDefault,borderTop:"1px solid ".concat(d.TV.backgroundHighest)},"tr:nth-of-type(2n)":{backgroundColor:d.TV.backgroundRoot}},"hr:after":{clear:"both"},"li > p":{marginBottom:0},li:{marginTop:d.TV.space4},dd:{marginLeft:0},"ol, ul":{paddingLeft:d.TV.space16,marginTop:0,marginBottom:0},ul:{listStyle:"initial",listStyleType:"disc",marginBottom:d.TV.space16},ol:{listStyle:"decimal",marginBottom:d.TV.space16},"ol ol, ol ul, ul ol, ul ul":{paddingLeft:d.TV.space16,marginTop:0,marginBottom:0,paddingBottom:0},"ul ul":{listStyleType:"circle"},"ul ul ul":{listStyleType:"square"},"ol ol, ul ol":{listStyleType:"lower-roman"},"ol ol ol, ol ul ol, ul ol ol, ul ul ol":{listStyleType:"lower-alpha"},pre:{fontFamily:"".concat(d.TV.fontFamilyCode," !important"),margin:"".concat(d.TV.space16," 0"),borderRadius:4,wordBreak:"break-all",wordWrap:"break-word",whiteSpace:"pre-wrap",color:d.TV.foregroundDefault},"pre:last-child":{marginBottom:"0 !important"},blockquote:{padding:"0 1em",marginBottom:d.TV.space16,borderLeft:"".concat(d.TV.space2," solid ").concat(d.TV.backgroundHighest),paddingLeft:d.TV.space16},"blockquote > *":{color:"".concat(d.TV.foregroundDimmer," !important")},"blockquote > :last-child":{marginBottom:"0 !important",borderBottom:"none !important"},"blockquote > :first-child":{marginTop:"0 !important"},kbd:{display:"inline-block",padding:"3px 5px",font:"11px ".concat(d.TV.fontFamilyCode),color:d.TV.foregroundDimmer,verticalAlign:"middle",backgroundColor:d.TV.backgroundHigher,border:"none",borderRadius:3,boxShadow:"inset 0 -1px 0 ".concat(d.TV.backgroundHighest)},a:{color:d.TV.accentPrimaryStronger,backgroundColor:"initial"},"> :first-child":{marginTop:"0 !important",paddingTop:"0 !important"},"> :last-child":{borderBottom:"none !important",marginBottom:"0 !important",paddingBottom:"0 !important"},'[type="checkbox"]':{boxSizing:"border-box",marginRight:d.TV.space8,padding:0},details:{marginBottom:d.TV.space16,display:"block",background:d.TV.backgroundHigher,borderRadius:d.TV.borderRadius4,padding:d.TV.space16},summary:{display:"list-item",userSelect:"none",cursor:"pointer",fontWeight:d.TV.fontWeightBold},"details[open] > summary":{borderBottom:"1px solid ".concat(d.TV.backgroundHighest),marginBottom:d.TV.space16,paddingBottom:d.TV.space16},hr:{height:1,backgroundColor:d.TV.backgroundHigher,margin:"".concat(d.TV.space24," 0"),border:0}}),allowedElements:X,remarkPlugins:[D.Ic,N.Z,O.Z,L.Z],linkTarget:"_blank",rehypePlugins:[A.Z],components:{code:r,img:G.Z},children:t})})}),F=n(48180),W=(0,f.memo)(function(e){var t,n=e.thread,w=e.message,C=(0,p.d)(),k=(0,v.Z)().showError,S=(0,r._)((t=(0,x._)({},T,{onError:function(e){k(e.message)},onCompleted:function(e){var t;(null===(t=e.deleteThreadMessage)||void 0===t?void 0:t.__typename)==="UserError"&&k(e.deleteThreadMessage.message)}}),_.D(R,t)),2),E=S[0],D=S[1].loading,I=(0,m.P5)({controlName:"flag-threads-dropdown-menu",default:!1,type:"boolean",logFlagToAnalytics:!1}),B=!!(n&&n.indexStart===n.indexEnd),G={statusBanner:{resolved:"Thread resolved. Re-open it any time in the inbox.",unresolved:"Thread re-opened"},outdated:"Outdated",outdatedTooltip:"The code has changed since the comment was left"},P=(0,f.useMemo)(function(){return{diff:(0,F.Y)(w.timeCreated),full:(0,F.u)(w.timeCreated)}},[w]);if(!w.user)return null;var A=C===w.user.id?[{label:"Delete",icon:(0,i.tZ)(b.Z,{}),isDestructive:!0}]:[];return(0,i.BX)(u.G,{children:[(0,i.BX)(u.G,{css:[d.l0.flex.row,d.l0.justify.spaceBetween,d.l0.pb(4)],children:[(0,i.BX)(u.G,{css:[d.l0.flex.row,d.l0.align.center,d.l0.rowWithGap(8)],children:[(0,i.tZ)(Z(),{legacyBehavior:!0,passHref:!0,href:"/@".concat(w.user.username),children:(0,i.tZ)("a",{children:(0,i.tZ)(s.n,{small:!0,src:w.user.image,username:w.user.username})})}),(0,i.tZ)("p",{children:(0,i.tZ)(c.u,{tooltip:P.full,placement:"top",children:(0,i.tZ)(l.xv,{variant:"small",color:"dimmer",multiline:!1,children:P.diff})})}),A.length>0&&I?(0,i.tZ)(h.Z,{items:A,onItemClick:function(e){"Delete"!==e.label||D||E({variables:{id:w.id}})},label:"More"}):null]}),B?(0,i.tZ)(c.u,{tooltip:G.outdatedTooltip,children:(0,i.tZ)(o.D,{colorway:"negative",text:G.outdated})}):null]}),"StatusMessageContentType"===w.content.__typename&&"resolved"===w.content.status?(0,i.tZ)(a.E,{colorway:"positive",icon:(0,i.tZ)(y.Z,{}),text:G.statusBanner.resolved}):null,"StatusMessageContentType"===w.content.__typename&&"unresolved"===w.content.status?(0,i.tZ)(a.E,{colorway:"primary",icon:(0,i.tZ)(g.Z,{}),text:G.statusBanner.unresolved}):null,"TextMessageContentType"===w.content.__typename&&(0,i.tZ)(M,{content:w.content.text})]})})},48180:function(e,t,n){n.d(t,{Y:function(){return o},u:function(){return a}});var r=n(35574),i=n(20597),o=function(e){var t=new Date(e),n=new Date;return 60>(0,i.Z)(n,t)?"just now":(0,r.F)(t,!0)+" ago"},a=function(e){return new Date(e).toLocaleString()}},79393:function(e,t,n){n.d(t,{AL:function(){return Z},GD:function(){return m},VO:function(){return p},Y:function(){return b},tT:function(){return g}});var r=n(41733),i=n(21262),o=n(71440),a=n(87903),l=n(9122),c=n(82303);function s(){var e=(0,i._)(["\n  query CodemirrorThread($id: String!) {\n    thread: annotationAnchor(id: $id) {\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n    currentUser {\n      id\n      username\n      fullName\n      image\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function u(){var e=(0,i._)(["\n  mutation CreateThread(\n    $thread: AnnotationAnchorInput!\n    $message: AnnotationMessageInput\n    $highlight: AnnotationHighlightInput\n  ) {\n    createThread: createAnnotationAnchor(\n      annotationAnchor: $thread\n      annotationMessage: $message\n      highlight: $highlight\n    ) {\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,i._)(["\n  mutation UpdateThread($id: String!, $changes: AnnotationAnchorChangesInput!) {\n    updateThread: updateAnnotationAnchor(id: $id, changes: $changes) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i._)(["\n  mutation CreateThreadMessage(\n    $replId: String!\n    $threadId: String!\n    $threadMessage: AnnotationMessageInput!\n    $highlight: AnnotationHighlightInput\n  ) {\n    createThreadMessage: createAnnotationMessage(\n      replId: $replId\n      anchorId: $threadId\n      annotationMessage: $threadMessage\n      highlight: $highlight\n    ) {\n      ... on UserError {\n        message\n      }\n      ... on AnnotationAnchor {\n        id\n        ...AnnotationsUIAnchor\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}var h={},p=(0,o.Ps)(s(),a.j7);function m(e){var t=(0,r._)({},h,e);return l.a(p,t)}var v=(0,o.Ps)(u(),a.j7);function g(e){var t=(0,r._)({},h,e);return c.D(v,t)}var y=(0,o.Ps)(d(),a.j7);function b(e){var t=(0,r._)({},h,e);return c.D(y,t)}var w=(0,o.Ps)(f(),a.j7);function Z(e){var t=(0,r._)({},h,e);return c.D(w,t)}},49638:function(e,t,n){n.d(t,{Z:function(){return x}});var r=n(41733),i=n(30509),o=n(66626),a=n(63257),l=n(87903),c=n(65894),s=n(79393),u=n(1193),d=n(99595),f=n(16155),h=n(83059),p=n(23882),m=n(98713),v=n(30826),g=n.n(v),y=n(75271),b=n(69284);function w(e,t){if(!e)return null;var n,r=e.state.field(b.OQ),i=e.state.field(b.ZS);return(null!==(n=r[t])&&void 0!==n?n:(null==i?void 0:i.id)===t?i:null)||null}function Z(e,t){if(!e)return null;var n=w(e,t);if(!n)return null;var r=Math.min(n.indexStart,n.indexEnd),i=Math.max(n.indexStart,n.indexEnd),o=e.state.doc.lineAt(r),a=e.state.doc.lineAt(i),l=e.state.doc.sliceString(e.state.doc.line(Math.max(o.number-2,1)).from,r),c=e.state.doc.sliceString(i,e.state.doc.line(Math.min(a.number+2,e.state.doc.lines)).to);return{precode:l,code:e.state.doc.sliceString(r,i),postcode:c}}function x(e,t,n){var v=(0,d.Z)().showError,x=(0,f.Z)(),C=(0,c.Z)().map(function(e){return e.username}),k=(0,p.Z)().fs,S=(0,s.GD)({variables:{id:e}}),_=S.data,E=S.error,T=S.loading,R=S.client,D=function(){if(T||!_){var n;return!!t&&(null===(n=t.state.field(b.ZS))||void 0===n?void 0:n.id)===e}return"AnnotationAnchor"!==_.thread.__typename}(),I=(0,y.useMemo)(function(){return T||!_?null:"UserError"===_.thread.__typename?{id:e,__typename:"AnnotationAnchor",messages:[],isGeneral:!1,isResolved:!1}:"AnnotationAnchor"===_.thread.__typename?_.thread:null},[_,e,T]),B=(0,o._)((0,s.tT)({onError:function(e){return v(e.message)},update:function(e,t){var n,r;if(t.errors){t.errors.forEach(function(e){return v(e.message)});return}if((null===(r=t.data)||void 0===r?void 0:null===(n=r.createThread)||void 0===n?void 0:n.__typename)==="UserError"){v(t.data.createThread.message);return}}}),1)[0],G=(0,o._)((0,s.AL)({onError:function(e){return v(e.message)},update:function(e,t){if(t.errors){t.errors.forEach(function(e){return v(e.message)});return}var n,r=null===(n=t.data)||void 0===n?void 0:n.createThreadMessage;r&&"UserError"===r.__typename&&v(r.message)}}),1)[0],P=(0,o._)((0,s.Y)({onError:function(e){return v(e.message)},update:function(e,t){if(t.errors){t.errors.forEach(function(e){return v(e.message)});return}var n,r=null===(n=t.data)||void 0===n?void 0:n.updateThread;r&&"UserError"===r.__typename&&v(r.message)}}),1)[0],A=(0,o._)((0,l.Hj)(),1)[0],L=(0,h.Z)(function(){return g()(A,1e3,{trailing:!1})},[A]),N=function(){var e=null==_?void 0:_.currentUser;return e?{user:{__typename:"User",id:e.id,username:e.username,fullName:e.fullName,image:e.image}}:{}};return{thread:I,isPlaceholder:D,error:E,loading:T,getHighlight:Z,getLatestAnchor:function(){return w(t,e)},updateThread:function(e){var t,n=e.changes,o=(null==_?void 0:null===(t=_.thread)||void 0===t?void 0:t.__typename)==="AnnotationAnchor"?_.thread:null;if(!o)throw Error("expected thread");P({variables:{id:o.id,changes:n},optimisticResponse:{__typename:"RootMutationType",updateThread:(0,i._)((0,r._)({},o,n),{isResolved:"boolean"==typeof n.isResolved?n.isResolved:o.isResolved})}})},finalizeThreadMessage:function(o){var l=o.message,c=o.messageId,d=(0,m.kW)(l,{users:(0,a._)(C).concat(["everyone"])}),f={id:c,text:l,mentions:d.mentions};if(D&&t&&n){var h=t.state.field(b.ZS),p={id:e,replId:x,indexStart:null==h?void 0:h.indexStart,indexEnd:null==h?void 0:h.indexEnd,otVersion:k.getOTVersion(n),path:n};B({variables:{thread:p,message:f,highlight:Z(t,e)},optimisticResponse:{__typename:"RootMutationType",createThread:(0,i._)((0,r._)({__typename:"AnnotationAnchor"},p,N()),{messages:[(0,i._)((0,r._)({id:c,timeCreated:new Date().toISOString(),currentUserIsAuthor:!0},N()),{content:{text:l,__typename:"TextMessageContentType"},anchor:{id:p.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",seen:!0})],isResolved:!1,isGeneral:!1})}}),R.writeQuery({query:s.VO,variables:{id:e},data:{__typename:"RootQueryType",thread:(0,i._)((0,r._)((0,i._)((0,r._)({},p),{isResolved:!1,isGeneral:!1}),N()),{messages:[(0,i._)((0,r._)({id:c,timeCreated:new Date().toISOString(),currentUserIsAuthor:!0},N()),{content:{text:l,__typename:"TextMessageContentType"},anchor:{id:p.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",seen:!0})],__typename:"AnnotationAnchor"}),currentUser:null==_?void 0:_.currentUser}});var v=R.readQuery({query:u.Jq,variables:{replId:x,path:n}});if(v){var g,y,w=(null===(y=v.threadsByFile)||void 0===y?void 0:y.__typename)==="ThreadsByFileResult"?v.threadsByFile.threads:[],S=N().user;R.writeQuery({query:u.Jq,variables:{replId:x,path:n},data:{__typename:"RootQueryType",threadsByFile:{__typename:"ThreadsByFileResult",threads:(0,a._)(w).concat([(0,r._)({messageCount:1,unreadCount:0,__typename:"AnnotationAnchor",isGeneral:!1,user:S,isResolved:!1,participants:[S]},p)])}}})}return}var E=(null==_?void 0:null===(g=_.thread)||void 0===g?void 0:g.__typename)==="AnnotationAnchor"?_.thread:null;if(!E)throw Error("expected thread");G({variables:{replId:x,threadId:E.id,threadMessage:f,highlight:Z(t,E.id)},optimisticResponse:{__typename:"RootMutationType",createThreadMessage:(0,i._)((0,r._)({},E),{messages:(0,a._)(E.messages.filter(function(e){return!e.id.startsWith("chat-")})).concat([(0,i._)((0,r._)({},N(),f),{content:{text:f.text,__typename:"TextMessageContentType"},anchor:{id:E.id,__typename:"AnnotationAnchor"},__typename:"AnnotationMessage",timeCreated:new Date().toISOString(),currentUserIsAuthor:!0,seen:!0})])})}})},changeThreadMessage:function(t){L({variables:{threadId:e,messageId:t.messageId,message:null}})}}}},1193:function(e,t,n){n.d(t,{Jq:function(){return s},eR:function(){return u}});var r=n(41733),i=n(21262),o=n(71440),a=n(9122);function l(){var e=(0,i._)(["\n  query ThreadsByFileHook($replId: String!, $path: String!) {\n    threadsByFile(replId: $replId, path: $path) {\n      ... on ThreadsByFileResult {\n        threads {\n          id\n          path\n          otVersion\n          indexStart\n          indexEnd\n          messageCount\n          unreadCount\n          user {\n            id\n            image\n            username\n          }\n          participants {\n            id\n            image\n            username\n          }\n          isGeneral\n          isResolved\n        }\n      }\n    }\n  }\n"]);return l=function(){return e},e}var c={},s=(0,o.Ps)(l());function u(e){var t=(0,r._)({},c,e);return a.a(s,t)}},73950:function(e,t,n){n.d(t,{Z:function(){return eT}});var r=n(66626),i=n(3796),o=n(16155),a=n(9602),l=n(24766),c=n(93245),s=n(10578),u=n(30043),d=n(63163),f=n(55621),h=n(75271),p=n(13781),m=n(41733),v=n(30509),g=n(62279),y=n(15323),b=n(7420),w=(0,g.iv)(d.l0.width("100%"),d.l0.display.flex,d.l0.justify.center),Z=function(e){var t=e.onClick,n=e.hasTests;return(0,i.tZ)("div",(0,v._)((0,m._)({},n?{"aria-label":"Delete all tests to switch test type","data-microtip-position":"bottom","data-microtip-size":"medium",role:"tooltip"}:{}),{css:w,children:(0,i.tZ)(b.Z,{filled:!1,border:!1,size:"small",Icon:y.Z,onClick:t,disabled:n,children:"Switch test type"})}))},x=n(99595),C=n(96949),k=n(79904),S=n(39808),_=n(58532),E=n(11006),T=n(27840),R=n(82549),D=n(10055),I=n(80403),B=n(3030),G=n(91166),P=n(11515),A=(0,g.iv)({editor:[d.l0.position.absolute,d.l0.width("100%"),d.l0.height("100%"),{overflow:"auto",".loader":[d.l0.height("100%"),d.l0.width("100%"),d.l0.zIndex(5)]}]}),L=I.q6.define();function N(e){var t=e.editorRef,n=e.onChange,r=e.placeholder,o=e.skeleton,a=e.language,l=e.skeletonClosingBracket,c=e.indentSize,s=(0,P.Z)(),u=s.ref,d=s.view,f=(0,h.useRef)(o?"".concat(o,"\n"):""),p=l?"\n".concat(l):"",m=" ".repeat(void 0===c?2:c);return(0,h.useEffect)(function(){if(d&&d.state.doc.length){var e=f.current;f.current=o?"".concat(o,"\n"):"",d.dispatch({changes:{from:0,to:e.length-1,insert:o},annotations:[I.YW.addToHistory.of(!1),L.of(!0)]})}},[d,o]),(0,h.useEffect)(function(){if(d){var e=I.yy.changeFilter.of(function(e){return!!e.annotation(L)||[-1,f.current.length,e.startState.doc.length-p.length,e.startState.doc.length+1]}),i=B.tk.updateListener.of(function(e){var t=e.state.doc.slice(f.current.length,e.state.doc.toString().length-p.length).toString();if(t!=="".concat(m).concat(r,"\n").concat(m)?n(t):n(""),e.docChanged&&e.state.doc.length===f.current.length+p.length){var i="\n"+m;d.dispatch({changes:{from:f.current.length-1,insert:"\n"+m},selection:{anchor:f.current.length+i.length-1},annotations:[L.of(!0)]})}}),o="".concat(f.current).concat(m).concat(r,"\n").concat(p);d.dispatch({changes:{from:0,to:d.state.doc.length,insert:o},effects:I.Py.appendConfig.of([e,i]),selection:{anchor:o.length},annotations:I.YW.addToHistory.of(!1)}),t({setValue:function(e){if(e){var t=d.state.doc.toString().length;d.dispatch({changes:{from:f.current.length,to:t-p.length,insert:e},annotations:I.YW.addToHistory.of(!1)})}},focus:function(){return d.focus()}})}},[n,a,d,p,t,r,m]),(0,i.tZ)("div",{css:A,children:(0,i.tZ)(G.ZP,{ref:u,language:a,indentSize:2,fontSize:14,indentIsSpaces:!0})})}var O=n(84531),U=n(59520);function X(e){var t,n,a,s,u=e.isOpen,f=e.meta,p=e.language,g=e.hasMetadata,y=e.onClose,b=(0,o.Z)(),w=(0,x.Z)().showConfirm,Z=(0,r._)((0,h.useState)(null),2),S=Z[0],E=Z[1],D=(0,r._)((0,h.useState)(!0),2),I=D[0],B=D[1],G=(0,r._)((0,h.useState)((null==f?void 0:f.initialization)||""),2),P=G[0],A=G[1],L=(0,r._)((0,h.useState)((null==f?void 0:f.imports)||""),2),N=L[0],X=L[1],H=(0,r._)((0,h.useState)((null==f?void 0:f.setup)||""),2),z=H[0],j=H[1],q=(0,r._)((0,h.useState)((null==f?void 0:f.tearDown)||""),2),J=q[0],Y=q[1],$=(0,r._)((0,U.rU)({onError:function(e){return E(e.message)},update:function(e,t){var n,r=null===(n=t.data)||void 0===n?void 0:n.createReplUnitTestMeta;r&&("UserError"===r.__typename?E(r.message):"ReplUnitTestMeta"===r.__typename&&(e.modify({id:e.identify({__typename:"Repl",id:b}),fields:{unitTests:function(t){var n=e.writeFragment({data:r,fragment:U.aA});return t?(0,v._)((0,m._)({},t),{meta:(0,m._)({},n)}):{__typename:"ReplUnitTestsWithMeta",meta:n,tests:[]}}}}),w("Setup saved!"),y()))}}),2),K=$[0],Q=$[1],ee=(0,r._)((0,U.AF)({onError:function(e){return E(e.message)},onCompleted:function(e){var t=e.updateReplUnitTestMeta;t&&("UserError"===t.__typename?E(t.message):"ReplUnitTestMeta"===t.__typename&&(w("Imports updated!"),y()))}}),2),et=ee[0],en=ee[1],er=(0,O.x)(p),ei=N!==(null==f?void 0:f.imports)||P!==(null==f?void 0:f.initialization)||z!==(null==f?void 0:f.setup)||J!==(null==f?void 0:f.tearDown),eo=Q.loading||en.loading;return(0,i.tZ)(_.u,{isOpen:u,onRequestClose:y,maxWidth:872,children:(0,i.BX)(c.G,{css:[d.l0.colWithGap(24)],children:[(0,i.tZ)(l.h4,{level:1,variant:"headerDefault",children:"Setup"}),(0,i.tZ)(M,{unitTestsLib:er,onChange:X,language:p,initialValue:null!==(t=null==f?void 0:f.imports)&&void 0!==t?t:""}),(0,i.tZ)(c.G,{onClick:function(){return B(!I)},css:{cursor:"pointer"},children:(0,i.BX)(c.G,{css:[d.l0.rowWithGap(8),d.l0.align.center],children:[(0,i.tZ)(l.h4,{level:2,variant:"headerDefault",children:"Advanced"}),(0,i.tZ)(R.Z,{color:"var(--foreground-default)",size:20,rotate:I?270:0})]})}),I?null:(0,i.BX)(c.G,{css:[d.l0.colWithGap(8)],children:[(0,i.tZ)(F,{unitTestsLib:er,onChange:A,language:p,initialValue:null!==(n=null==f?void 0:f.initialization)&&void 0!==n?n:""}),(0,i.tZ)(W,{unitTestsLib:er,onChange:j,language:p,initialValue:null!==(a=null==f?void 0:f.setup)&&void 0!==a?a:""}),(0,i.tZ)(V,{unitTestsLib:er,onChange:Y,language:p,initialValue:null!==(s=null==f?void 0:f.tearDown)&&void 0!==s?s:""})]}),(0,i.BX)(c.G,{css:[d.l0.flex.row,d.l0.justify.spaceBetween],children:[(0,i.tZ)(l.xv,{css:[d.l0.color.accentNegativeStronger],children:S}),(0,i.BX)(c.G,{css:[d.l0.rowWithGap(12)],children:[(0,i.tZ)(k.zx,{disabled:eo,onClick:y,text:"Cancel"}),(0,i.tZ)(k.zx,{colorway:"primary",disabled:!ei||eo,onClick:function(){(0,C.j)(C.U3.REPL_UNIT_TEST_USED,{action:"modifiedSetup"}),g?et({variables:{input:{initialization:P,imports:N,setup:z,tearDown:J,replId:b}}}):K({variables:{input:{initialization:P,imports:N,setup:z,tearDown:J,replId:b}}})},iconLeft:(0,i.tZ)(T.Z,{}),text:"".concat(eo?"Saving...":"Save")})]})]})]})})}function M(e){var t=e.unitTestsLib,n=e.onChange,o=e.language,a=e.initialValue,s=(0,r._)((0,h.useState)(null),2),u=s[0],f=s[1];(0,h.useEffect)(function(){u&&(u.setValue(a),u.focus())},[u,a]);var p=t.defaultImports().trim();return(0,i.BX)(c.G,{css:[d.l0.colWithGap(8)],children:[(0,i.BX)(c.G,{css:[d.l0.flex.row,d.l0.justify.spaceBetween,d.l0.align.center],children:[(0,i.tZ)(l.h4,{level:2,variant:"subheadDefault",children:"Imports"}),(0,i.tZ)(S.Z,{iconLeft:(0,i.tZ)(E.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",variant:"outlined"})]}),(0,i.tZ)(c.G,{css:[d.l0.backgroundColor.backgroundDefault,d.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(c.G,{css:[d.l0.borderRadius(8),d.l0.height(200),d.l0.position.relative],children:(0,i.tZ)(N,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add imports here"),editorRef:f,language:o,skeleton:p,skeletonClosingBracket:"",indentSize:0})})})]})}function F(e){var t=e.unitTestsLib,n=e.onChange,o=e.language,a=e.initialValue,s=(0,r._)((0,h.useState)(null),2),u=s[0],f=s[1];(0,h.useEffect)(function(){u&&u.setValue(a)},[u,a]);var p=t.classConstructorName();return(0,i.BX)(c.G,{css:[d.l0.colWithGap(8)],children:[(0,i.BX)(c.G,{css:[d.l0.flex.row,d.l0.justify.spaceBetween,d.l0.align.center],children:[(0,i.tZ)(l.h4,{level:2,variant:"subheadDefault",children:"Initialization"}),(0,i.tZ)(S.Z,{iconLeft:(0,i.tZ)(E.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",variant:"outlined"})]}),p?(0,i.BX)(l.xv,{children:["Hint: constructor name is ",(0,i.tZ)("code",{children:p}),"."]}):null,(0,i.tZ)(c.G,{css:[d.l0.backgroundColor.backgroundDefault,d.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(c.G,{css:[d.l0.borderRadius(8),d.l0.height(200),d.l0.position.relative],children:(0,i.tZ)(N,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add initialization code here"),editorRef:f,language:o,skeleton:"",skeletonClosingBracket:"",indentSize:0})})})]})}function W(e){var t=e.unitTestsLib,n=e.onChange,o=e.language,a=e.initialValue,s=(0,r._)((0,h.useState)(null),2),u=s[0],f=s[1];(0,h.useEffect)(function(){u&&u.setValue(a)},[u,a]);var p=t.setupIntro().trim();return(0,i.BX)(c.G,{css:[d.l0.colWithGap(8)],children:[(0,i.BX)(c.G,{css:[d.l0.flex.row,d.l0.justify.spaceBetween,d.l0.align.center],children:[(0,i.tZ)(l.h4,{level:2,variant:"subheadDefault",children:"Setup"}),(0,i.tZ)(S.Z,{iconLeft:(0,i.tZ)(E.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",variant:"outlined"})]}),(0,i.tZ)(c.G,{css:[d.l0.backgroundColor.backgroundDefault,d.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(c.G,{css:[d.l0.borderRadius(8),d.l0.height(200),d.l0.position.relative],children:(0,i.tZ)(N,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add setup code here"),editorRef:f,language:o,skeleton:p,skeletonClosingBracket:t.hasClosingBrackets()?t.getClosingBrackets():""})})})]})}function V(e){var t=e.unitTestsLib,n=e.onChange,o=e.language,a=e.initialValue,s=(0,r._)((0,h.useState)(null),2),u=s[0],f=s[1];(0,h.useEffect)(function(){u&&u.setValue(a)},[u,a]);var p=t.tearDownIntro().trim();return(0,i.BX)(c.G,{css:[d.l0.colWithGap(8)],children:[(0,i.BX)(c.G,{css:[d.l0.flex.row,d.l0.justify.spaceBetween,d.l0.align.center],children:[(0,i.tZ)(l.h4,{level:2,variant:"subheadDefault",children:"Teardown"}),(0,i.tZ)(S.Z,{iconLeft:(0,i.tZ)(E.Z,{}),text:"Docs",href:"https://docs.replit.com/teams-edu/unit-testing",target:"_blank",variant:"outlined"})]}),(0,i.tZ)(c.G,{css:[d.l0.backgroundColor.backgroundDefault,d.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(c.G,{css:[d.l0.borderRadius(8),d.l0.height(200),d.l0.position.relative],children:(0,i.tZ)(N,{onChange:n,placeholder:"".concat(t.getCommentChar()," Add teardown code here"),editorRef:f,language:o,skeleton:p,skeletonClosingBracket:t.hasClosingBrackets()?t.getClosingBrackets():""})})})]})}var H=function(e){var t=e.language,n=e.meta,o=(0,r._)((0,h.useState)(!1),2),a=o[0],l=o[1];return(0,i.BX)(i.HY,{children:[(0,i.tZ)(k.zx,{iconLeft:(0,i.tZ)(D.Z,{}),onClick:function(){return l(!0)},text:"Setup"}),(0,i.tZ)(X,{language:t,isOpen:a,onClose:function(){return l(!1)},hasMetadata:!!(null==n?void 0:n.id),meta:n})]})},z=n(63257),j=n(28393),q=n(84864),J=n(44935),Y=n(13850),$=n(7935),K=n(90632),Q=n(89313),ee=n(19602),et=n(98924),en=n(64206),er=n(54300),ei=n(31089),eo={success:(0,g.iv)({":not([disabled])":{borderColor:d.TV.accentPositiveStrongest}}),error:(0,g.iv)({":not([disabled])":{borderColor:d.TV.accentNegativeStrongest}}),warning:(0,g.iv)({":not([disabled])":{borderColor:d.TV.yellowStrongest}}),default:void 0,loading:void 0},ea={success:(0,g.iv)([{color:d.TV.accentPositiveStrongest}]),error:(0,g.iv)([{color:d.TV.accentNegativeStrongest}]),warning:(0,g.iv)([{color:d.TV.yellowStrongest}]),default:void 0,loading:void 0},el={success:(0,i.tZ)(T.Z,{}),error:(0,i.tZ)(en.Z,{}),warning:(0,i.tZ)(er.Z,{}),default:void 0,loading:(0,i.tZ)(s.Z,{})},ec=function(e){var t=el[e.state];return(0,i.BX)(c.G,{css:[ea[e.state],d.l0.rowWithGap(4)],children:[h.isValidElement(t)?h.cloneElement(t,{size:12}):null,(0,i.tZ)(l.xv,{variant:"small",multiline:!1,children:e.message})]})},es=(0,g.iv)("display:grid;grid-gap:",d.TV.space8,";grid-template-areas:'label . status'\n    'input input input'\n    'validation validation validation'\n    'details details details';> .label{grid-area:label;}> .status{grid-area:status;}> .input{grid-area:input;}> .details{grid-area:details;}> .validation{grid-area:validation;}"),eu=function(e){var t,n=e.id,r=e.label,o=e.status,a=e.description,c=e["aria-describedby"],s=e.error,u=e.isValid,f=e.touched,h=e.value,p=e.warning,g=e.successText,y=(0,et._)(e,["id","label","status","description","aria-describedby","error","isValid","touched","value","warning","successText"]),b=(0,ei.U)(),w=n||b("input"),Z=o&&b("status"),x=a?b("description"):void 0,C=[Z,x,c].filter(Boolean).join(" "),k=!(t={description:a,error:s,isValid:u,touched:f,value:h,warning:p,successText:g}).touched&&t.description?{state:"default",message:t.description}:t.error?{message:t.error.message,state:"error"}:t.warning?{message:t.warning.message,state:"warning"}:t.isValid?{message:t.successText||"",state:"success"}:t.touched?{message:"",state:"loading"}:void 0;return(0,i.BX)("div",{css:es,children:[(0,i.tZ)("label",{htmlFor:w,className:"label",children:(0,i.tZ)(l.xv,{variant:"small",color:"dimmer",multiline:!1,children:r})}),o?(0,i.tZ)(l.xv,{multiline:!1,variant:"small",color:"dimmer",css:[d.l0.textAlign.right],className:"status",children:o}):null,(0,i.tZ)(J.II,(0,v._)((0,m._)({id:w,className:"input",value:h,css:[eo[(null==k?void 0:k.state)||"default"]]},y),{"aria-describedby":C,"aria-invalid":(null==k?void 0:k.state)==="error"})),(0,i.tZ)("div",{id:x,className:"validation",css:[ea[(null==k?void 0:k.state)||"default"]],"aria-live":(null==k?void 0:k.state)!=="default"?"polite":void 0,children:k?(0,i.tZ)(ec,(0,m._)({},k)):null})]})},ed=n(27387),ef=n(96583),eh=n(25722),ep=n(78272),em=n(1053),ev=n(23882),eg=n(76330),ey="\x1b[0;31m",eb="\x1b[0m",ew=["","","","","","","","","","","","","","","",""];function eZ(e){var t=e.name,n=e.failureMessage,r=e.stack;return"	".concat(ey).concat(t).concat(eb,"\r").concat(n?"\nMessage: ".concat(n,"\r"):"","\nStack Trace:\r\n").concat(r.replace(/\n/g,"\r\n"),"\n\r\n\r\n")}var ex=function(e){var t,n,o=e.language,a=e.unitTests,l=e.onResult,s=e.trackingContext,u=e.getRunnerOutput,d=(0,r._)((0,h.useState)(!1),2),f=d[0],p=d[1],v=(0,ev.Z)(),g=v.container,y=v.packager,b=v.fs,w=null,Z=u(),x=Z&&void 0!==Z.startBlock&&void 0!==Z.endBlock&&void 0!==Z.writeOutputToBlock&&void 0!==Z.writeErrorToBlock,S=function(){p(!1),(0,eg.WT)(b),w&&(w.stopLogSpinner(),w.finish(),w=null)},_=(t=(0,ed._)(function(){var e,t,n,r,i,c,u,d,h,v,k,_,E,T,R,D,I,B,G,P,A,L,N,U;return(0,ef.Jh)(this,function(X){switch(X.label){case 0:if(f)return[2];if(t=null,w={startLogSpinner:function(e){if(t)throw Error("A spinner is already active! call stopSpinner first or use the update callback to update the active spinner's message.");var n=e,r=0;return t=setInterval(function(){var e=ew[++r%ew.length];if(!w)throw Error("Expected logger");w.clearLine(),w.logMessage(e+" "+n)},100),function(e){n=e}},stopLogSpinner:function(){t&&clearInterval(t),t=null},finish:function(){if(x&&e){var t;null==Z||null===(t=Z.endBlock)||void 0===t||t.call(Z,e)}},logMessage:function(t){var n,r;if(x&&e){null==Z||null===(r=Z.writeOutputToBlock)||void 0===r||r.call(Z,e,t);return}null==Z||null===(n=Z.write)||void 0===n||n.call(Z,t)},logError:function(t){if(x&&e){var n;null==Z||null===(n=Z.writeErrorToBlock)||void 0===n||n.call(Z,e,t)}},clearLogs:function(){var e;x||(null==Z||null===(e=Z.clear)||void 0===e||e.call(Z),null==w||w.logMessage("\r\n"))},clearLine:function(){if(!w)throw Error("Expected logger");w.logMessage("\x1b[1K\r")}},!a)throw Error("Run button should not be active if there are no tests");return p(!0),(0,C.j)(C.U3.REPL_UNIT_TEST_USED,{trackingData:{context:s},action:"ranTests"}),w.clearLogs(),x&&(e=null==Z?void 0:null===(n=Z.startBlock)||void 0===n?void 0:n.call(Z,em.kH.UNIT_TEST).id),[4,(r=(0,O.x)(o)).buildAndRunTests((0,m._)({container:g,fs:b,packager:y,logger:w},a))];case 1:if(i=X.sent(),w.stopLogSpinner(),w.clearLine(),w.clearLogs(),null!==i.error)return w.logMessage("".concat(ey).concat(i.error).concat(eb,"\r\n")),S(),a.tests.map(function(e){return{testId:e.id,didPass:!1}}),[2];if(c=i.result.passed?[]:i.result.failures.map(function(e){return r.parseTestResultName(e.name)}),u=[],d=a.tests.map(function(e){return r.getProperTestName(e.name)}),(h=c.filter(function(e){return!d.includes(e)})).length)k=h[0],_=i.result.failures[0].stack,w.logMessage(eZ({name:k,failureMessage:"The following error occurred but was not related to a single unit test",stack:_})),w.logError("Testing failed"),(v=u).push.apply(v,(0,z._)(a.tests.map(function(e){return{testId:e.id,didPass:!1}})));else{E=!0,T=!1,R=void 0;try{for(D=a.tests[Symbol.iterator]();!(E=(I=D.next()).done);E=!0){if(B=I.value,G=r.getProperTestName(B.name),P=c.indexOf(G),A=-1===P,u.push({testId:B.id,didPass:A}),A){w.logMessage("	".concat("\x1b[0;32m").concat(G).concat(eb,"\r\n\r\n"));continue}L=i.result.failures[P].stack,w.logMessage(eZ({name:G,failureMessage:B.failureMessage,stack:L})),w.logError('Test "'.concat(G,'" failed'))}}catch(e){T=!0,R=e}finally{try{E||null==D.return||D.return()}finally{if(T)throw R}}}if(l(u),N=a.tests.length,i.result.passed)return w.logMessage("".concat("\x1b[48;5;22m","  All tests have passed ").concat(N,"/").concat(N,"  ").concat(eb,"\r\n")),S(),[2];return U=N-i.result.failures.length,w.logMessage("".concat("\x1b[48;5;88m","  ").concat(U,"/").concat(N," passed, see errors above  ").concat(eb)),S(),[2]}})}),function(){return t.apply(this,arguments)}),E=(n=(0,ed._)(function(){return(0,ef.Jh)(this,function(e){try{_()}catch(e){eh.$e(function(t){t.setTag("unittestsrun","true"),eh.Tb(e)}),w&&(w.logMessage("\r\n".concat(ey," Sorry, we have failed to run your tests. Please try again or contact support. ").concat(eb,"\r\n")),w.logError("Running tests failed")),S()}return[2]})}),function(){return n.apply(this,arguments)});return a&&a.tests.length>0?(0,i.tZ)(c.G,{children:(0,i.tZ)(k.zx,{disabled:f,colorway:"primary",iconLeft:(0,i.tZ)(ep.Z,{}),onClick:E,text:f?"Running tests...":"Run tests"})}):null},eC=(0,n(36809).X)({root:d.l0.colWithGap(16),list:[d.l0.colWithGap(8),d.l0.align.center],test:[d.l0.width("100%"),d.l0.p(8),d.l0.border({width:1,color:d.TV.outlineDimmest}),d.l0.borderRadius(4),{'&[data-status="passed"]':[{borderColor:d.TV.accentPositiveDefault},d.l0.backgroundColor.accentPositiveDimmer],'&[data-status="failed"]':[{borderColor:d.TV.accentNegativeDefault},d.l0.backgroundColor.accentNegativeDimmer]}]});function ek(e){var t=e.isOpen,n=e.test,a=e.language,s=e.onClose,f=e.trackingContext,p=(0,o.Z)(),g=(0,x.Z)().showConfirm,y=(0,r._)((0,h.useState)(null),2),b=y[0],w=y[1],Z=(0,r._)((0,h.useState)(""),2),E=Z[0],R=Z[1],D=(0,r._)((0,h.useState)(""),2),I=D[0],B=D[1],G=(0,r._)((0,h.useState)(""),2),P=G[0],A=G[1],L=(0,r._)((0,U.Hd)({onError:function(e){return A(e.message)},update:function(e,t){var n,r=null===(n=t.data)||void 0===n?void 0:n.createReplUnitTest;r&&("UserError"===r.__typename?A(r.message):"ReplUnitTest"===r.__typename&&(e.modify({id:e.identify({__typename:"Repl",id:p}),fields:{unitTests:function(t){var n=e.writeFragment({data:r,fragment:U.Rb});return t?(0,v._)((0,m._)({},t),{tests:(0,z._)(t.tests).concat([n])}):{__typename:"ReplUnitTestsWithMeta",meta:null,tests:[n]}}}}),g("Test created!"),s()))}}),2),X=L[0],M=L[1],F=(0,r._)((0,U.kO)({onError:function(e){return A(e.message)},onCompleted:function(e){var t=e.updateReplUnitTest;t&&("UserError"===t.__typename?A(t.message):"ReplUnitTest"===t.__typename&&(g("Test updated!"),s()))}}),2),W=F[0],V=F[1],H=(0,q.Y)("",function(e){return e.length<=0?{message:"Must include test name"}:e.trim().split(" ").length>1?{message:"Test name must only be one word"}:void 0});(0,h.useEffect)(function(){H.setValue((null==n?void 0:n.name)||"",{preventTouch:!0}),B((null==n?void 0:n.failureMessage)||""),R((null==n?void 0:n.code)||""),b&&b.setValue((null==n?void 0:n.code)||"")},[n,b]),(0,h.useEffect)(function(){A("")},[E,A]);var Q=(0,O.x)(a),ee="".concat(Q.getCommentChar()," Enter code here"),et=!n||n.name!==H.value||n.code!==E||n.failureMessage!==I,en=M.loading||V.loading,er=Q.testIntro(H.value||""),ei=Q.hasClosingBrackets()?Q.getClosingBrackets():"",eo=(0,r._)((0,h.useState)(!1),2),ea=eo[0],el=eo[1],ec=function(){b&&(b.setValue("  "+Q.exampleTest.code),b.focus()),R(Q.exampleTest.code)};return(0,i.tZ)(_.u,{isOpen:t,onRequestClose:s,maxWidth:872,children:(0,i.BX)(c.G,{css:[d.l0.colWithGap(24)],children:[(0,i.tZ)(l.h4,{level:1,variant:"headerDefault",children:"New unit test"}),(0,i.BX)(c.G,{css:[d.l0.colWithGap(8)],children:[(0,i.tZ)("label",{htmlFor:"name",children:(0,i.tZ)(l.h4,{level:2,variant:"subheadDefault",children:"Name"})}),(0,i.tZ)(eu,{id:"name",label:"Test name",status:null,autoFocus:!0,required:!0,value:H.value,isValid:H.isValid,error:H.error,warning:H.warning,touched:H.touched,onChange:function(e){H.setValue(e.target.value)},placeholder:"Enter test name here"})]}),(0,i.BX)(c.G,{css:[d.l0.colWithGap(8)],children:[(0,i.BX)(c.G,{css:[d.l0.flex.row,d.l0.align.center,d.l0.justify.spaceBetween],children:[(0,i.tZ)(l.h4,{level:2,variant:"subheadDefault",children:"Code"}),(0,i.BX)(c.G,{css:[d.l0.rowWithGap(4)],children:[(0,i.BX)(j.Z,{isOpen:ea,onClickOutside:function(){return el(!1)},placement:"bottom-end",children:[(0,i.tZ)(k.zx,{iconLeft:(0,i.tZ)(K.Z,{}),size:"small",variant:"outlined",text:"View an example",onClick:function(){if([ee,Q.exampleTest.code].includes(E.trim())){ec();return}el(!0)}}),(0,i.BX)(c.G,{children:["This will overwrite your current test. Are you sure?",(0,i.BX)(c.G,{css:[d.l0.rowWithGap(4),d.l0.pt(8)],children:[" ",(0,i.tZ)(k.zx,{text:"No, go back",size:"small",iconLeft:(0,i.tZ)($.Z,{}),onClick:function(){el(!1)}}),(0,i.tZ)(k.zx,{text:"Yes, delete test",colorway:"negative",size:"small",iconLeft:(0,i.tZ)(T.Z,{}),onClick:function(){ec(),el(!1)}})]})]})]}),(0,i.tZ)(S.Z,{iconLeft:(0,i.tZ)(Y.Z,{}),size:"small",variant:"outlined",text:"View docs",target:"_blank",href:"https://docs.replit.com/teams-edu/unit-testing"})]})]}),(0,i.tZ)(c.G,{css:[d.l0.backgroundColor.backgroundDefault,d.l0.borderRadius(8),{border:"1px solid var(--background-highest)"}],children:(0,i.tZ)(c.G,{css:[d.l0.borderRadius(8),d.l0.height(200),d.l0.position.relative],children:(0,i.tZ)(N,{skeleton:er,skeletonClosingBracket:ei,language:a,editorRef:w,onChange:R,placeholder:ee})})})]}),(0,i.BX)(c.G,{css:[d.l0.colWithGap(8)],children:[(0,i.tZ)(l.h4,{level:2,variant:"subheadDefault",children:"Failure message"}),(0,i.tZ)(J.II,{value:I,onChange:function(e){return B(e.target.value)},placeholder:"This will be displayed on test failure"})]}),(0,i.BX)(c.G,{css:[d.l0.flex.row,d.l0.align.center,d.l0.justify.spaceBetween],children:[(0,i.tZ)(l.xv,{css:[d.l0.color.accentNegativeStronger],multiline:!1,children:P}),(0,i.BX)(c.G,{css:[d.l0.rowWithGap(12)],children:[(0,i.tZ)(k.zx,{text:"Cancel",onClick:s}),(0,i.tZ)(k.zx,{text:"".concat(en?"Creating test...":"Create test"),iconLeft:(0,i.tZ)(u.Z,{}),colorway:"primary",disabled:!et||en,onClick:function(){if(!H.validate()){if(E.length<=0){A("Test cannot be empty");return}n?(W({variables:{input:{name:H.value,code:E,failureMessage:I,testId:n.id}}}),(0,C.j)(C.U3.REPL_UNIT_TEST_USED,{trackingData:{context:f},action:"modifiedTest"})):(X({variables:{input:{name:H.value,code:E,failureMessage:I,replId:p}}}),(0,C.j)(C.U3.REPL_UNIT_TEST_USED,{trackingData:{context:f},action:"addedTest"}))}}})]})]})]})})}function eS(e){var t=e.testId,n=e.onClose,a=(0,x.Z)().showConfirm,s=(0,o.Z)(),u=(0,r._)((0,U.IV)({onError:function(e){return b(e.message)},update:function(e,r){var i,o=null===(i=r.data)||void 0===i?void 0:i.deleteReplUnitTest;o&&("UserError"===o.__typename?b(o.message):"ReplUnitTest"===o.__typename&&t&&(e.modify({id:e.identify({__typename:"Repl",id:s}),fields:{unitTests:function(e,n){var r=n.readField,i=e.tests.filter(function(e){return r("id",e)!==t});return(0,v._)((0,m._)({},e),{tests:(0,z._)(i)})}}}),(0,C.j)(C.U3.REPL_UNIT_TEST_USED,{action:"removedTest"}),a("Test deleted!"),n()))}}),2),f=u[0],p=u[1],g=(0,r._)((0,h.useState)(""),2),y=g[0],b=g[1];return(0,i.tZ)(_.u,{isOpen:!!t,onRequestClose:n,children:(0,i.BX)(c.G,{css:[d.l0.colWithGap(24)],children:[(0,i.tZ)(l.h4,{level:1,variant:"headerDefault",children:"Delete test?"}),(0,i.tZ)(l.xv,{children:"Are you sure you want to delete this test? This cannot be undone."}),(0,i.BX)(c.G,{css:[d.l0.flex.row,d.l0.justify.spaceBetween,d.l0.align.center],children:[(0,i.tZ)(l.xv,{css:[d.l0.color.accentNegativeStronger],children:y}),(0,i.BX)(c.G,{css:[d.l0.rowWithGap(12),d.l0.justify.end],children:[(0,i.tZ)(k.zx,{text:"Cancel",disabled:p.loading,onClick:n}),(0,i.tZ)(k.zx,{text:"Yes, delete this test",colorway:"negative",iconLeft:(0,i.tZ)(ee.Z,{}),disabled:p.loading,onClick:function(){if(!t)throw Error("Expected a testId");f({variables:{testId:t}})}})]})]})]})})}var e_=function(e){var t=e.unitTests,n=e.isAddingTest,s=e.onClose,f=e.language,p=e.canWrite,m=e.trackingContext,v=void 0===m?"default":m,g=e.getRunnerOutput,y=(0,r._)((0,h.useState)(n),2),b=y[0],w=y[1],Z=(0,r._)((0,h.useState)(null),2),x=Z[0],C=Z[1],S=(0,r._)((0,h.useState)(null),2),_=S[0],E=S[1],T=(0,o.Z)(),R=(0,r._)((0,U.lQ)(),1)[0],D=(null==t?void 0:t.tests)||[];return(0,i.BX)(c.G,{css:eC.root,children:[(0,i.tZ)(ex,{language:f,unitTests:t,onResult:function(e){R({variables:{input:{replId:T,results:e},replId:T}})},getRunnerOutput:g,trackingContext:v}),D.length>0?(0,i.tZ)(c.G,{css:eC.list,children:D.map(function(e){var t,n,r;return(null===(t=e.lastRun)||void 0===t?void 0:t.__typename)==="ReplUnitTestLastRun"&&(n=null===(r=e.lastRun.status)||void 0===r?void 0:r.toLowerCase()),(0,i.tZ)(c.G,{css:eC.test,"data-status":n,children:(0,i.BX)(c.G,{css:[d.l0.flex.row,d.l0.justify.spaceBetween,d.l0.align.center,d.l0.p(8),d.l0.borderRadius(8),{border:"1px solid var(--background-highest);"}],children:[(0,i.tZ)(l.xv,{multiline:!1,children:e.name}),p?(0,i.BX)(c.G,{css:[d.l0.rowWithGap(8)],children:[(0,i.tZ)(a.hU,{onClick:function(){C(e)},alt:"Edit",children:(0,i.tZ)(Q.Z,{})}),(0,i.tZ)(a.hU,{onClick:function(){E(e.id)},alt:"Delete",children:(0,i.tZ)(ee.Z,{})})]}):null]})},e.id)})}):(0,i.BX)(c.G,{css:[d.l0.colWithGap(8),d.l0.align.center],children:[(0,i.tZ)(l.xv,{css:[d.l0.textAlign.center],children:"Looks like you dont have any tests yet!"}),p?(0,i.tZ)(k.zx,{text:"Add test",onClick:function(){return w(!0)},iconLeft:(0,i.tZ)(u.Z,{})}):null]}),(0,i.tZ)(ek,{isOpen:b||!!x||n,test:x,language:f,onClose:function(){C(null),w(!1),s&&s()},trackingContext:v}),(0,i.tZ)(eS,{testId:_,onClose:function(){return E(null)}})]})},eE=n(48424),eT=function(e){var t,n,m,v,g,y=e.onBack,b=e.getRunnerOutput,w=(0,o.Z)(),x=(0,r._)((0,h.useState)(!1),2),C=x[0],k=x[1],S=(0,eE.Z)(),_=S.language,E=S.isLoading,T=(0,p.CH)({variables:{replId:w}}),R=null===(t=T.data)||void 0===t?void 0:t.repl;if(T.loading||E)return(0,i.tZ)(c.G,{css:[d.l0.backgroundColor.backgroundDefault,d.l0.flex.row,d.l0.align.center,d.l0.justify.center,d.l0.p(16)],children:(0,i.tZ)(s.Z,{})});if(!R||"Repl"!==R.__typename)return(0,i.tZ)(c.G,{css:[d.l0.p(16)],children:(0,i.tZ)(l.xv,{css:{textAlign:"center"},children:"Unable to fetch tests, please try again."})});if(!_)return(0,i.tZ)(c.G,{css:[d.l0.p(16)],children:(0,i.tZ)(l.xv,{css:{textAlign:"center"},children:"Unit tests are currently only supported in Java, Python, and Node.js Repls."})});var D="default";(null==R?void 0:R.isProject)?D="project_repl":(null==R?void 0:R.isProjectFork)&&(D="submission_repl");var I=!!((null===(n=R.unitTests)||void 0===n?void 0:n.tests)&&R.unitTests.tests.length>0);return(null==R?void 0:null===(v=R.authorizations)||void 0===v?void 0:null===(m=v.writeTests)||void 0===m?void 0:m.isAuthorized)?(0,i.BX)(c.G,{css:[d.l0.colWithGap(16),d.l0.align.center],children:[(0,i.BX)(c.G,{css:[d.l0.flex.row,d.l0.justify.spaceBetween,d.l0.align.center,{width:"100%"}],children:[(0,i.tZ)(f.Z,{truncate:!0,level:4,children:"Unit tests"}),(0,i.tZ)(a.hU,{alt:"Add test",size:32,onClick:function(){return k(!0)},children:(0,i.tZ)(u.Z,{})})]}),(0,i.BX)(c.G,{css:[d.l0.colWithGap(8),d.l0.maxWidth(256),{width:"80%"}],children:[(0,i.tZ)(H,{language:_,meta:(null===(g=R.unitTests)||void 0===g?void 0:g.meta)||null}),(0,i.tZ)(e_,{isAddingTest:C,unitTests:(null==R?void 0:R.unitTests)||null,onClose:function(){return k(!1)},language:_,canWrite:!0,trackingContext:D,getRunnerOutput:b}),y?(0,i.tZ)(Z,{hasTests:I,onClick:y}):null]})]}):(0,i.BX)(c.G,{css:[d.l0.colWithGap(16)],children:[(0,i.tZ)(l.h4,{level:1,variant:"headerDefault",children:"Unit tests"}),(0,i.tZ)(c.G,{css:{width:"100%",overflowY:"auto"},children:(0,i.tZ)(e_,{unitTests:(null==R?void 0:R.unitTests)||null,language:_,isAddingTest:!1,canWrite:!1,trackingContext:D,getRunnerOutput:b})})]})}},84531:function(e,t,n){n.d(t,{x:function(){return T},y:function(){return E}});var r=n(27387),i=n(63257),o=n(96583),a=n(51305),l=n(25722),c=n(96949),s=n(12285),u=function(){"use strict";function e(t){(0,s._)(this,e),this.code="",this.currentIndent=0,this.lib=t}var t=e.prototype;return t.indent=function(){this.currentIndent+=1},t.dedent=function(){if(0===this.currentIndent)throw Error("indent at zero");this.currentIndent-=1},t.addIndents=function(){for(var e=0;e<this.currentIndent;e++)this.code+="  "},t.push=function(e){var t=e.split("\n"),n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;this.addIndents(),this.code+=l,this.newLine()}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}},t.newLine=function(){this.code+="\n"},t.closeCurly=function(){this.addIndents(),this.code+=this.lib.getClosingBrackets()},t.toString=function(){return this.code},e}(),d=n(76330),f={testRunnerName:function(){return"TestRunner"},testSuiteName:function(){return"TestSuite"},defaultImports:function(){return"import org.junit.Before;\nimport org.junit.After;\nimport org.junit.Test;\nimport static org.junit.Assert.*;"},classIntro:function(){return"public class ".concat((0,d.Og)(f.testSuiteName())," {")},classConstructorName:function(){return(0,d.Og)(f.testSuiteName())},setupIntro:function(){return"@Before\npublic void setUp() {"},tearDownIntro:function(){return"@After\npublic void tearDown() {"},testIntro:function(e){return"".concat(f.testIntroPreName()).concat(e).concat(f.testIntroPostName())},testIntroPreName:function(){return"@Test\npublic void "},testIntroPostName:function(){return"() {"},getProperTestName:function(e){return e},parseTestResultName:function(e){return e.replace("(".concat((0,d.Og)(f.testSuiteName()),")"),"")},buildSuite:function(e){var t=e.tests,n=e.meta,r=new u(f);r.push(f.defaultImports()),n&&n.imports&&r.push(n.imports),r.newLine(),r.push(f.classIntro()),r.newLine(),r.indent(),n&&(n.initialization&&(r.push(n.initialization),r.newLine()),n.setup&&(r.push(f.setupIntro()),r.indent(),r.push(n.setup),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()),n.tearDown&&(r.push(f.tearDownIntro()),r.indent(),r.push(n.tearDown),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()));var i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;s.code&&(r.push(f.testIntro(s.name)),r.indent(),r.push(s.code),r.dedent(),r.closeCurly(),r.newLine(),r.newLine())}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return r.dedent(),r.closeCurly(),r.toString()},runSuite:function(e){return v.apply(this,arguments)},buildAndRunTests:function(e){var t=e.container,n=e.fs,r=e.packager,i=e.logger,o=e.tests,a=e.meta,l=f.buildSuite({tests:o,meta:a});return f.runSuite({container:t,fs:n,packager:r,logger:i,suiteCode:l})},hasClosingBrackets:function(){return!0},getClosingBrackets:function(){return"}"},hasSemicolon:function(){return!0},getCommentChar:function(){return"//"},getHelpText:function(){return"no react in this bitch either"},captureSetupError:function(e){var t=e.tag,n=e.raw;l.$e(function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",n),e.setExtra("language","java10"),l.Tb(t)})},exampleTest:{id:-1,failureMessage:"An Adder class should have an add method that adds two ints and returns the result",name:"add",code:"Adder adder = new Adder();\nint result = adder.add(1, 2);\nassertEquals(3, result);\n"}},h="__UNIT_TEST_RESULT_START__",p="__UNIT_TEST_RESULT_END__",m="import org.json.simple.JSONArray;\nimport org.json.simple.JSONObject;\nimport org.junit.runner.JUnitCore;\nimport org.junit.runner.Result;\nimport org.junit.runner.notification.Failure;\n\npublic class ".concat((0,d.Og)(f.testRunnerName())," {\n    public static void main(String[] args) {\n      Result result = JUnitCore.runClasses(").concat((0,d.Og)(f.testSuiteName()),'.class);\n      JSONArray failures = new JSONArray();\n\n        for (Failure failure : result.getFailures()) {\n            JSONObject obj = new JSONObject();\n            obj.put("name", failure.getTestHeader());\n            obj.put("stack", failure.getTrace());\n            failures.add(obj);\n        }\n        JSONObject out = new JSONObject();\n        out.put("passed", result.wasSuccessful());\n        out.put("failures", failures);\n        System.out.println();\n        System.out.println("').concat(h,'");\n        System.out.println(out);\n        System.out.println("').concat(p,'");\n    }\n}');function v(){return(v=(0,r._)(function(e){var t,n,r,l,s,u,v,g,y,b,w,Z,x,C,k,S,_,E,T,R,D;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return t=e.container,n=e.fs,r=e.packager,l=e.logger,s=e.suiteCode,v=l.startLogSpinner("Setting up the environment"),[4,(0,d.WT)(n)];case 1:return o.sent(),v("Creating your test files 1/2"),[4,(0,d.e3)({fs:n,code:s,filename:"".concat(f.testSuiteName(),".java")})];case 2:if(g=o.sent().error)return f.captureSetupError({tag:"Failed to create suite code file",raw:g}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}];return v("Creating your test files 2/2"),[4,(0,d.e3)({fs:n,code:m,filename:"".concat(f.testRunnerName(),".java")})];case 3:if(y=o.sent().error)return f.captureSetupError({tag:"Failed to create test runner file",raw:y}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}];return l.stopLogSpinner(),l.clearLine(),l.logMessage("Installing imported packages\r\n"),[4,r.addPackages([{name:"junit:junit",version:"4.12"},{name:"com.googlecode.json-simple:json-simple",version:"1.1.1"},{name:"org.hamcrest:hamcrest-core",version:"1.3"}])];case 4:return o.sent(),[4,r.installPackages(a.D.active())];case 5:if(o.sent().error)return[2,{error:"Failed to install packages\r\n"}];return l.clearLogs(),v=l.startLogSpinner("Compiling your files"),[4,t.exec("find",".","-type","f","-name","*.java","-print0")];case 6:if(w=(b=o.sent()).output,Z=b.error)return x="Failed to fetch working directory java files",f.captureSetupError({tag:x,raw:Z}),[2,{error:"".concat(x,"\r\n\r\n")+(null==w?void 0:w.replace(/\n/g,"\n\r"))+"\r\n\r\n"+Z}];if("string"!=typeof w)throw Error("expected working directory files to be a string");return C=w.slice(0,-1).split("\x00"),k=".:./target/dependency/*",[4,(u=t).exec.apply(u,["javac","-classpath",k,"-d","."].concat((0,i._)(C)))];case 7:if(_=(S=o.sent()).output,E=S.error)return[2,{error:"".concat("Failed to compile test runner file","\r\n\r\n")+(null==_?void 0:_.replace(/\n/g,"\n\r"))+"\r\n\r\n"+E}];return v("Running your tests"),[4,t.exec("java","-classpath",k,(0,d.Og)(f.testRunnerName()))];case 8:if(R=(T=o.sent()).output,D=T.error)return(0,c.j)(c.U3.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),[2,{error:"Running tests failed\r\n\r\n"+(null==R?void 0:R.replace(/\n/g,"\n\r"))+"\r\n\r\n"+D}];if("string"!=typeof R)throw Error("expected runOutput to be a string");return[2,{result:JSON.parse(R.slice(R.indexOf(h)+h.length,R.lastIndexOf(p))),error:null}]}})})).apply(this,arguments)}var g=function(e){return!!e&&e.trim().length>0&&e.split("\n").some(function(e){return!(e.trim().startsWith("#")||""===e.trim())})},y={testRunnerName:function(){return"test_runner"},testSuiteName:function(){return"test_suite"},defaultImports:function(){return"import unittest\nfrom main import *\n"},classIntro:function(){return"class UnitTests(unittest.TestCase):"},classConstructorName:function(){return"__init__"},setupIntro:function(){return"def setUp(self):"},tearDownIntro:function(){return"def tearDown(self):"},testIntro:function(e){return y.testIntroPreName()+e+y.testIntroPostName()},testIntroPreName:function(){return"def test_"},testIntroPostName:function(){return"(self):"},getProperTestName:function(e){return"test_".concat(e)},parseTestResultName:function(e){return e},buildSuite:function(e){var t=e.tests,n=e.meta,r=new u(y);r.push(y.defaultImports()),n&&n.imports&&r.push(n.imports),r.newLine(),r.push(y.classIntro()),r.newLine(),r.indent(),n&&(n.initialization&&(r.push(n.initialization),r.newLine()),g(n.setup)&&(r.push(y.setupIntro()),r.indent(),r.push(n.setup),r.dedent(),r.newLine()),g(n.tearDown)&&(r.push(y.tearDownIntro()),r.indent(),r.push(n.tearDown),r.dedent(),r.newLine()));var i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;r.push(y.testIntro(s.name)),r.indent(),r.push(s.code||"pass"),r.dedent(),r.newLine()}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return r.toString()},runSuite:function(e){return x.apply(this,arguments)},buildAndRunTests:function(e){var t=e.container,n=e.fs,r=e.packager,i=e.logger,o=e.tests,a=e.meta,l=y.buildSuite({tests:o,meta:a});return y.runSuite({container:t,fs:n,packager:r,logger:i,suiteCode:l})},hasClosingBrackets:function(){return!1},getClosingBrackets:function(){throw Error("This language does not have closing brackets, check `hasClosingBrackets` first")},hasSemicolon:function(){return!1},getCommentChar:function(){return"#"},getHelpText:function(){return"no react in this bitch"},captureSetupError:function(e){var t=e.tag,n=e.raw;l.$e(function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",n),e.setExtra("language","python3"),l.Tb(t)})},exampleTest:{id:-1,failureMessage:"In main.py you should have an add functions that adds two numbers and returns the result",name:"add",code:"self.assertEquals(add(1, 2), 3)"}},b="__UNIT_TEST_RESULT_START__",w="__UNIT_TEST_RESULT_END__",Z="import unittest\nimport ".concat((0,d.Og)(y.testSuiteName()),"\nimport os\nimport json\nfrom time import sleep\n\nsuite = unittest.TestLoader().loadTestsFromTestCase(\n  ").concat((0,d.Og)(y.testSuiteName()),'.UnitTests)\nf = open(os.devnull,"w")\ntest_res = unittest.TextTestRunner(stream=f).run(suite)\n\n# Merge errors and failures and normalize to {name, stack}\nfailures = [\n    {\n        "name": r[0]._testMethodName,\n        "stack": r[1],\n    } for r in test_res.errors + test_res.failures\n]\nprint()\nprint(\'').concat(b,'\')\nsleep(1)\nprint(json.dumps({\n    "passed": test_res.wasSuccessful(),\n    "failures": failures,\n}))\nprint()\nprint(\'').concat(w,"');");function x(){return(x=(0,r._)(function(e){var t,n,r,i,l,s,u,f,h,p,m;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return t=e.container,n=e.fs,r=e.packager,i=e.logger,l=e.suiteCode,s=i.startLogSpinner("Setting up the environment"),[4,(0,d.WT)(n)];case 1:return o.sent(),s("Creating your test files 1/2"),[4,(0,d.e3)({fs:n,code:l,filename:"".concat(y.testSuiteName(),".py")})];case 2:if(u=o.sent().error)return y.captureSetupError({tag:"Failed to create suite code file",raw:u}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}];return s("Creating your test files 2/2"),[4,(0,d.e3)({fs:n,code:Z,filename:"".concat(y.testRunnerName(),".py")})];case 3:if(f=o.sent().error)return y.captureSetupError({tag:"Failed to create test runner file",raw:f}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}];return i.stopLogSpinner(),i.clearLine(),i.logMessage("Installing imported packages\r\n"),[4,r.installPackages(a.D.active())];case 4:if(o.sent().error)return[2,{error:"Failed to install packages\r\n"}];return i.clearLogs(),i.startLogSpinner("Running your tests"),[4,t.exec("python","-B",(0,d.Og)("".concat(y.testRunnerName(),".py")))];case 5:if(p=(h=o.sent()).output,m=h.error)return(0,c.j)(c.U3.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),[2,{error:"Running tests failed\r\n\r\n"+(null==p?void 0:p.replace(/\n/g,"\n\r"))+"\r\n"+m}];if("string"!=typeof p)throw Error("expected runoutput to be a string");return[2,{result:JSON.parse(p.slice(p.indexOf(b)+b.length,p.lastIndexOf(w))),error:null}]}})})).apply(this,arguments)}var C={testRunnerName:function(){throw Error("Node test runner uses jest directly")},testSuiteName:function(){return"test_suite"},defaultImports:function(){return"const index = require('./index.js');"},classIntro:function(){return'describe("UnitTests", function() {'},classConstructorName:function(){return null},setupIntro:function(){return"beforeAll(async function() {"},tearDownIntro:function(){return"afterAll(async function() {"},testIntro:function(e){return C.testIntroPreName()+e+C.testIntroPostName()},testIntroPreName:function(){return'test("'},testIntroPostName:function(){return'", async function() {'},getProperTestName:function(e){return e},parseTestResultName:function(e){return e},buildSuite:function(e){var t=e.tests,n=e.meta,r=new u(C);r.push(C.defaultImports()),n&&n.imports&&r.push(n.imports),r.newLine(),r.push(C.classIntro()),r.newLine(),r.indent(),n&&(n.initialization&&(r.push(n.initialization),r.newLine()),n.setup&&(r.push(C.setupIntro()),r.indent(),r.push(n.setup),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()),n.tearDown&&(r.push(C.tearDownIntro()),r.indent(),r.push(n.tearDown),r.dedent(),r.closeCurly(),r.newLine(),r.newLine()));var i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;s.code&&(r.push(C.testIntro(s.name)),r.indent(),r.push(s.code),r.dedent(),r.closeCurly(),r.newLine(),r.newLine())}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return r.dedent(),r.closeCurly(),r.toString()},runSuite:function(e){return S.apply(this,arguments)},buildAndRunTests:function(e){var t=e.container,n=e.fs,r=e.packager,i=e.logger,o=e.tests,a=e.meta,l=C.buildSuite({tests:o,meta:a});return C.runSuite({container:t,fs:n,packager:r,logger:i,suiteCode:l})},hasClosingBrackets:function(){return!0},getClosingBrackets:function(){return"});"},hasSemicolon:function(){return!0},getCommentChar:function(){return"//"},getHelpText:function(){return"no react yet"},captureSetupError:function(e){var t=e.tag,n=e.raw;l.$e(function(e){e.setTag("unitTestLib","true"),e.setExtra("raw",n),e.setExtra("language","nodejs"),l.Tb(t)})},exampleTest:{id:-1,failureMessage:"",name:"add",code:"expect(index.add(1, 2)).toBe(3);"}};function k(){return(k=(0,r._)(function(e){var t;return(0,o.Jh)(this,function(n){switch(n.label){case 0:return[4,e.exec("sh","-c","which jest &> /dev/null && echo 1 || echo 0")];case 1:if("1"===((t=n.sent()).output?t.output.trim():null))return[2];return[4,e.exec("npm","install","-g","jest@24.x.x")];case 2:return n.sent(),[2]}})})).apply(this,arguments)}function S(){return(S=(0,r._)(function(e){var t,n,r,i,l,s,u,f,h,p,m,v,g,y,b,w,Z,x,S;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return t=e.container,n=e.fs,r=e.packager,i=e.logger,l=e.suiteCode,s=i.startLogSpinner("Setting up the environment"),[4,(0,d.WT)(n)];case 1:return o.sent(),s("Creating your test files 1/2"),[4,(0,d.e3)({fs:n,code:l,filename:"".concat(C.testSuiteName(),".js")})];case 2:if(u=o.sent().error)return C.captureSetupError({tag:"Failed to create suite code file",raw:u}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}];return s("Creating your test files 2/2"),f=69,h="jest.config.json",p={testRegex:(0,d.Og)("".concat(C.testSuiteName(),".js")),testEnvironment:"node",testFailureExitCode:f},[4,(0,d.e3)({fs:n,code:JSON.stringify(p),filename:h})];case 3:if(m=o.sent().error)return C.captureSetupError({tag:"Failed to create config file",raw:m}),[2,{error:"There was an error creating a test file, if this happens again, please contact support."}];return i.stopLogSpinner(),i.clearLine(),i.logMessage("Installing imported packages\r\n"),[4,function(e){return k.apply(this,arguments)}(t)];case 4:return o.sent(),[4,r.installPackages(a.D.active())];case 5:if(o.sent().error)return[2,{error:"Failed to install packages\r\n"}];return i.clearLogs(),s=i.startLogSpinner("Running your tests"),v=(0,d.Og)("output.json"),[4,t.exec("jest","--json","--outputFile",v,"--config",(0,d.Og)(h),"--forceExit","--passWithNoTests")];case 6:if(y=(g=o.sent()).output,(b=g.error)&&!b.endsWith(f.toString()))return(0,c.j)(c.U3.REPL_UNIT_TEST_CONSTRUCTION_ERROR_INTERNAL),[2,{error:"Running tests failed\r\n\r\n"+(null==y?void 0:y.replace(/\n/g,"\n\r"))+"\r\n"+b}];return s("Parsing your test results"),[4,n.readFile(v)];case 7:if((w=o.sent()).error)return C.captureSetupError({tag:"Error reading test results",raw:w.error}),[2,{error:"There was an error getting test results, if this happens please contact support."}];if((Z=JSON.parse(w.content.toString())).success)return[2,{error:null,result:{passed:!0,failures:[]}}];if(!(S=(x=Z.testResults[0]).assertionResults.filter(function(e){return"passed"!==e.status}).map(function(e){return{name:e.title,stack:e.failureMessages[0]}})).length)return[2,{error:x.message.replace(/\n/g,"\r\n")}];return[2,{error:null,result:{passed:!1,failures:S}}]}})})).apply(this,arguments)}var _={java10:f,java10_beta:f,java:f,python3:y,python3_beta:y,python:y,nodejs:C,javascript:C,nodejs_beta:C};function E(e){return e in _}function T(e){if(!E(e))throw Error("".concat(e," is not a supported unit testing language, it has to be one of ").concat(Object.keys(_)));return _[e]}},76330:function(e,t,n){n.d(t,{Og:function(){return u},WT:function(){return h},e3:function(){return d}});var r=n(27387),i=n(96583),o=n(25722),a=n(43257),l=n(72106),c=n(73878),s="_test_runner";function u(e){return s+e}function d(e){return f.apply(this,arguments)}function f(){return(f=(0,r._)(function(e){var t,n,r,o;return(0,i.Jh)(this,function(i){return t=e.fs,n=e.code,r=s+e.filename,o=a.Z.from(n,"utf8"),[2,t.writeFile(r,o)]})})).apply(this,arguments)}function h(e){return p.apply(this,arguments)}function p(){return(p=(0,r._)(function(e){var t,n;return(0,i.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,3,,4]),[4,e.readDir(l.Ql)];case 1:if((t=r.sent()).error)return[2];return[4,Promise.all(t.children.map(function(t){return t.filename.startsWith(s)?t.type===c.Tv.File?e.deleteFile(t.filename):e.deleteDir(t.filename):Promise.resolve(null)}))];case 2:return r.sent(),[3,4];case 3:return n=r.sent(),o.$e(function(e){e.setTag("unitTestLib","true"),o.Tb(n)}),[3,4];case 4:return[2]}})})).apply(this,arguments)}},59520:function(e,t,n){n.d(t,{AF:function(){return Z},Hd:function(){return C},IV:function(){return E},Rb:function(){return g},aA:function(){return v},kO:function(){return S},lQ:function(){return R},rU:function(){return b}});var r=n(41733),i=n(21262),o=n(71440),a=n(82303);function l(){var e=(0,i._)(["\n  fragment UnitTestsReplUnitTestMeta on ReplUnitTestMeta {\n    id\n    imports\n    initialization\n    setup\n    tearDown\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i._)(["\n  fragment UnitTestsReplUnitTest on ReplUnitTest {\n    id\n    name\n    code\n    failureMessage\n  }\n"]);return c=function(){return e},e}function s(){var e=(0,i._)(["\n  mutation createUnitTestMeta($input: CreateReplUnitTestMetaInput!) {\n    createReplUnitTestMeta(input: $input) {\n      ... on ReplUnitTestMeta {\n        id\n        ...UnitTestsReplUnitTestMeta\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return s=function(){return e},e}function u(){var e=(0,i._)(["\n  mutation updateUnitTestMeta($input: UpdateReplUnitTestMetaInput!) {\n    updateReplUnitTestMeta(input: $input) {\n      ... on ReplUnitTestMeta {\n        id\n        ...UnitTestsReplUnitTestMeta\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return u=function(){return e},e}function d(){var e=(0,i._)(["\n  mutation createUnitTest($input: CreateReplUnitTestInput!) {\n    createReplUnitTest(input: $input) {\n      ... on ReplUnitTest {\n        id\n        ...UnitTestsReplUnitTest\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return d=function(){return e},e}function f(){var e=(0,i._)(["\n  mutation updateUnitTest($input: UpdateReplUnitTestInput!) {\n    updateReplUnitTest(input: $input) {\n      ... on ReplUnitTest {\n        id\n        ...UnitTestsReplUnitTest\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return f=function(){return e},e}function h(){var e=(0,i._)(["\n  mutation deleteUnitTest($testId: Int!) {\n    deleteReplUnitTest(testId: $testId) {\n      ... on ReplUnitTest {\n        id\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return h=function(){return e},e}function p(){var e=(0,i._)(["\n  mutation updateReplUnitTestLastRun(\n    $input: UpdateReplUnitTestLastRunInput!\n    $replId: String!\n  ) {\n    updateReplUnitTestLastRun(input: $input) {\n      ... on UpdateReplUnitTestLastRunUpdatedTests {\n        __typename\n        updatedTests {\n          ... on ReplUnitTest {\n            id\n            __typename\n            lastRun(replId: $replId) {\n              ... on ReplUnitTestLastRun {\n                __typename\n                status\n              }\n              ... on UserError {\n                __typename\n                message\n              }\n            }\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n      ... on UserError {\n        __typename\n        message\n      }\n    }\n  }\n"]);return p=function(){return e},e}var m={},v=(0,o.Ps)(l()),g=(0,o.Ps)(c()),y=(0,o.Ps)(s(),v);function b(e){var t=(0,r._)({},m,e);return a.D(y,t)}var w=(0,o.Ps)(u(),v);function Z(e){var t=(0,r._)({},m,e);return a.D(w,t)}var x=(0,o.Ps)(d(),g);function C(e){var t=(0,r._)({},m,e);return a.D(x,t)}var k=(0,o.Ps)(f(),g);function S(e){var t=(0,r._)({},m,e);return a.D(k,t)}var _=(0,o.Ps)(h());function E(e){var t=(0,r._)({},m,e);return a.D(_,t)}var T=(0,o.Ps)(p());function R(e){var t=(0,r._)({},m,e);return a.D(T,t)}},48424:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(66626),i=n(23882),o=n(75271),a=n(58997),l=n(84531);function c(){var e=(0,i.Z)().dotReplit,t=(0,r._)((0,o.useState)(null),2),n=t[0],c=t[1],s=(0,r._)((0,o.useState)(!0),2),u=s[0],d=s[1];return(0,o.useEffect)(function(){var t=!1,n=e.watch(function(e){if(t||(t=!0,d(!1)),e.error){e.error===a.Yt.NotFound&&c(null);return}var n,r,i=null===(r=e.config.unitTest)||void 0===r?void 0:null===(n=r.language)||void 0===n?void 0:n.toLowerCase();i&&(0,l.y)(i)?c(i):c(null)});return function(){n()}},[e]),{language:n,isLoading:u}}},36670:function(e,t,n){n.d(t,{Q:function(){return o}});var r=n(3796),i=n(75271);function o(e){var t=e.uploadFiles,n=e.fileUploadInputRef,o=e.dirUploadInputRef,a=(0,i.useRef)(Math.random().toString(36));return(0,r.BX)(r.HY,{children:[(0,r.tZ)("input",{style:{display:"none"},ref:n,id:"file-upload-input-".concat(a.current),type:"file",onChange:function(e){var n=e.target.files;n&&t({files:Array.from(n)})},onClick:function(e){e.currentTarget.value=""},multiple:!0,accept:"*"}),(0,r.tZ)("input",{style:{display:"none"},ref:o,id:"dir-upload-input-".concat(a.current),type:"file",onChange:function(e){var n=e.target.files;n&&t({files:Array.from(n)})},onClick:function(e){e.currentTarget.value=""},webkitdirectory:"true",mozdirectory:"true",msdirectory:"true",odirectory:"true",directory:"true",accept:"*"})]})}},87061:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(3796),i=n(79904),o=n(36809),a=n(78719),l=n(63163),c=n(12394),s=(0,o.X)({button:[l.l0.display.inlineBlock]});function u(e){var t=e.openNetworkingTool;return(0,r.tZ)(c.Z,{pane:{type:"webview"},bodyText:(0,r.BX)(r.HY,{children:["No web server is currently running with ports available to view. Try running your Repl, and check the"," ",(0,r.tZ)(i.zx,{css:s.button,text:"Networking tool",iconLeft:(0,r.tZ)(a.Z,{}),size:"small",onClick:t})," ","to ensure ports are being forwarded correctly."]})})}},60357:function(e,t,n){n.d(t,{I5:function(){return p},sY:function(){return f}});var r=n(41733),i=n(21262),o=n(71440),a=n(9122);function l(){var e=(0,i._)(["\n  fragment ReplEnvironmentWebviewDeployBanner on Repl {\n    hostingDeployment {\n      ... on HostingDeployment {\n        id\n        currentBuild {\n          id\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n    authorizations {\n      viewDeploymentConfig {\n        isAuthorized\n      }\n    }\n    config {\n      isVnc\n    }\n  }\n"]);return l=function(){return e},e}function c(){var e=(0,i._)(["\n  fragment ReplEnvironmentWebviewRepl on Repl {\n    id\n    prodUrl: hostedUrl(dotty: true)\n    devUrl: hostedUrl(dev: true)\n    authorizations {\n      addCustomDomain {\n        isAuthorized\n      }\n    }\n  }\n"]);return c=function(){return e},e}function s(){var e=(0,i._)(["\n  query ReplEnvironmentWebview($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        ...ReplEnvironmentWebviewRepl\n        ...ReplEnvironmentWebviewDeployBanner\n      }\n    }\n  }\n  ","\n  ","\n"]);return s=function(){return e},e}var u={},d=(0,o.Ps)(l()),f=(0,o.Ps)(c()),h=(0,o.Ps)(s(),f,d);function p(e){var t=(0,r._)({},u,e);return a.a(h,t)}},73452:function(e,t,n){n.d(t,{oB:function(){return ez},U8:function(){return eJ},Cl:function(){return ej}});var r,i,o=n(41733),a=n(66626),l=n(3796),c=n(23666),s=n(16155),u=n(79685),d=n(18757),f=n(93245),h=n(36809),p=n(63163),m=n(22630),v=n(12666),g=n(79904),y=n(9602),b=n(24766),w=n(22419),Z=n(27840),x=n(7935),C=n(42427),k=n(39031),S=function(e){var t=e.onClick,n=e.onDismiss,r=e.rounded,i=[p.l0.colWithGap(4),p.l0.align.start,p.l0.p(4),p.l0.pl(8),p.l0.flex.growAndShrink(1),r&&p.l0.borderRadius(8),{borderWidth:1,borderStyle:"solid",background:p.TV.accentPrimaryDimmest,borderColor:p.TV.accentPrimaryDimmer,color:p.TV.accentPrimaryStrongest}],o="function"==typeof n;return(0,l.tZ)(f.G,{css:i,children:(0,l.BX)(f.G,{css:[p.l0.rowWithGap(6),p.l0.align.center,p.l0.justify.spaceBetween,p.l0.width("100%")],children:[(0,l.BX)(f.G,{css:[p.l0.rowWithGap(4),p.l0.align.center],children:[(0,l.tZ)(w.u,{tooltip:(0,l.tZ)(f.G,{css:[p.l0.colWithGap(4),p.l0.justify.start,p.l0.align.start],children:["Deploy to any URL","Configurable machine","Always on"].map(function(e,t){return(0,l.BX)(f.G,{css:[p.l0.rowWithGap(8),p.l0.align.center,p.l0.justify.center],children:[(0,l.tZ)(Z.Z,{size:12}),(0,l.tZ)(b.xv,{variant:"small",multiline:!1,children:e})]},t)})}),delay:"none",children:(0,l.tZ)(k.Z,{})}),(0,l.tZ)(b.xv,{css:p.l0.flex.growAndShrink(1),variant:"small",children:"Ready to share with the world?"})]}),(0,l.tZ)(g.zx,{colorway:"primary",iconLeft:(0,l.tZ)(C.Z,{}),text:"Deploy your app",onClick:t}),o?(0,l.tZ)(f.G,{css:{marginLeft:"auto"},children:(0,l.tZ)(y.hU,{alt:"dismiss",onClick:n,children:(0,l.tZ)(x.Z,{})})}):null]})})},_=n(96949),E=n(43540),T=n(75271);function R(e){var t,n=e.repl,r=e.onClick,i=(0,E.Z)("workspace","workspace-deployments-webview-banner"),o=i.shouldDisplay,a=i.register,c=i.dismiss;(0,T.useEffect)(function(){a()},[a]);var s=n.authorizations.viewDeploymentConfig.isAuthorized,u=(null===(t=n.hostingDeployment)||void 0===t?void 0:t.__typename)==="HostingDeployment"&&n.hostingDeployment.currentBuild;return s&&!u&&o?(0,l.tZ)(f.G,{children:(0,l.tZ)(S,{onClick:function(){(0,_.j)(_.U3.DEPLOY_PROJECT_SELECTED,{source:"workspace_webview_deploy_banner"}),c(),r()},onDismiss:c,rounded:!1})}):null}var D=n(98924);function I(e){var t=e.actionType,n=(0,D._)(e,["actionType"]);(0,_.j)(_.U3.WS_WEBVIEW_USED,(0,o._)({type:t},n))}var B=n(30509),G=n(25722),P=n(12285),A=n(52657),L=n(83059),N=function e(t){"use strict";var n=t.initialRelativeUrl,r=t.initialPort,i=t.onChange,o=t.navigateTo,a=this;(0,P._)(this,e),this.history=[],this.historyIndex=-1,this.init=function(e,t){a.history.push({relativeUrl:e,port:t}),a.historyIndex=a.history.length-1,a.notifyChanges()},this.notifyChanges=function(){a.onChange(a.canGoBack(),a.canGoForward(),a.getCurrentRelativeUrl(),a.getCurrentPort())},this.canGoBack=function(){return a.historyIndex>0},this.canGoForward=function(){return a.historyIndex<a.history.length-1},this.getCurrentRelativeUrl=function(){return a.history[a.historyIndex].relativeUrl},this.getCurrentPort=function(){return a.history[a.historyIndex].port},this.push=function(e,t){"blank"!==e&&"srcdoc"!==e&&((e!==a.getCurrentRelativeUrl()||t!==a.getCurrentPort())&&(a.history=a.history.slice(0,a.historyIndex+1),a.history.push({relativeUrl:e,port:t}),a.historyIndex=a.history.length-1),a.notifyChanges())},this.relativeUrlUpdate=function(e){if(a.pendingNavigations>0){a.pendingNavigations-=1;return}a.push(e,a.getCurrentPort())},this.back=function(){I({actionType:"history_back"}),a.canGoBack()&&(a.historyIndex-=1,a.navigate(a.getCurrentRelativeUrl(),a.getCurrentPort()))},this.forward=function(){I({actionType:"history_forward"}),a.canGoForward()&&(a.historyIndex+=1,a.navigate(a.getCurrentRelativeUrl(),a.getCurrentPort()))},this.navigate=function(e,t){var n=null!=t?t:a.getCurrentPort();a.navigateTo.current(e,n),a.push(e,n),a.pendingNavigations+=1},this.refresh=function(){var e,t;I({actionType:"refresh"}),a.navigateTo.current(null!==(e=a.getCurrentRelativeUrl())&&void 0!==e?e:"/",null!==(t=a.getCurrentPort())&&void 0!==t?t:80)},this.setPort=function(e){var t=a.getCurrentRelativeUrl();a.navigate(t,e)},this.onChange=i,this.pendingNavigations=0,this.navigateTo=o,this.init(n,r)},O=n(42516),U=n(62279),X=n(71051),M=n(39808),F=n(44935),W=n(58532),V=n(3615),H=n(14548),z=n(48155),j=n(30231),q=n(89313),J=n(27060),Y=n(10578),$=n(94970),K=n(10055),Q=n(98724),ee=n(54300),et=n(31089),en=n(31252),er=n(9834),ei=n.n(er),eo=n(21262),ea=n(71440),el=n(9122),ec=n(82303);function es(){var e=(0,eo._)(["\n  fragment EditDomainRepl on Repl {\n    id\n    hostedUrl\n    apexProxy\n    domains {\n      hosting_deployment_id\n      domain\n      state\n    }\n  }\n"]);return es=function(){return e},e}function eu(){var e=(0,eo._)(["\n  query EditDomain($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...EditDomainRepl\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n      ... on SubscriptionExpiredError {\n        replId\n      }\n    }\n  }\n  ","\n"]);return eu=function(){return e},e}function ed(){var e=(0,eo._)(["\n  query EditDomainCheckDomain2($replId: String!, $domain: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        checkDomain2(domain: $domain) {\n          ... on DomainStatus2 {\n            verified\n            retry\n            status\n            records {\n              A\n              TXT\n              CNAME\n            }\n          }\n          ... on NotFoundError {\n            message\n          }\n          ... on ServiceUnavailable {\n            message\n          }\n        }\n      }\n    }\n  }\n"]);return ed=function(){return e},e}function ef(){var e=(0,eo._)(["\n  mutation EditDomainLinkReplDomain2(\n    $replId: String!\n    $domain: String!\n    $deploymentId: String\n  ) {\n    linkReplDomain2(\n      replId: $replId\n      domain: $domain\n      deploymentId: $deploymentId\n    ) {\n      __typename\n      ... on Repl {\n        id\n        ...EditDomainRepl\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n    }\n  }\n  ","\n"]);return ef=function(){return e},e}function eh(){var e=(0,eo._)(["\n  mutation EditDomainUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        ...EditDomainRepl\n      }\n    }\n  }\n  ","\n"]);return eh=function(){return e},e}var ep={},em=(0,ea.Ps)(es()),ev=(0,ea.Ps)(eu(),em),eg=(0,ea.Ps)(ed()),ey=(0,ea.Ps)(ef(),em),eb=(0,ea.Ps)(eh(),em),ew=n(54505),eZ=n(77402),ex=n(30043),eC=n(19602),ek=n(32508),eS=n.n(ek);function e_(e){switch(e.status){case"verified":return(0,l.tZ)(Z.Z,{color:p.TV.accentPositiveDefault});case"failed":return(0,l.tZ)(x.Z,{color:p.TV.accentNegativeDefault});case"verifying":return(0,l.tZ)(Y.Z,{color:p.TV.accentPrimaryDefault});default:return null}}function eE(e){var t,n=e.replId,r=e.hostedUrl,i=e.desiredARecord,c=e.existingDomain,s=e.onLink,u=e.onGoBack,d=e.onLinkStarted,h=e.onStateChanged,m=(0,a._)((0,T.useState)(c?"loading":null),2),v=m[0],y=m[1],w=(0,a._)((0,T.useState)(!1),2),Z=w[0],x=w[1],C=(0,a._)((0,T.useState)(null),2),k=C[0],S=C[1],_=(0,a._)((0,T.useState)(!1),2),E=_[0],R=_[1],D=(0,a._)((t=(0,o._)({},ep,void 0),ec.D(ey,t)),2),I=D[0],B=D[1],P=(0,T.useRef)(null),A=(0,T.useRef)(null),L=(0,T.useRef)(null),N=function(e){(null==e?void 0:e.current)&&e.current.select()},O=function(e){(0,ew.Z)(e).catch(function(e){G.$e(function(t){t.setTag("domain-link",!0),t.setExtra("type","copy"),G.Tb(e)})})},U=(0,a._)((0,T.useState)(c||""),2),X=U[0],M=U[1];(0,T.useEffect)(function(){B.data&&"Repl"===B.data.linkReplDomain2.__typename&&s()},[B.data,s]);var W=function(){try{var e=new URL("/",X);M(e.hostname)}catch(e){}},V=function(e){y(e),h()},H=eS()(X,{require_valid_protocol:!1})&&X.split(".").length>=2,z=H&&2===X.split(".").length,j=r.replace(/^https:\/\//,""),q="replit-verify=".concat(n),J=(0,et.U)();return(0,l.BX)(f.G,{css:[p.l0.colWithGap(16)],children:[(0,l.BX)(f.G,{css:[p.l0.colWithGap(8)],children:[(0,l.tZ)(b.h4,{level:2,variant:"subheadDefault",children:"New Domain Link"}),(0,l.BX)(b.xv,{children:["Learn more"," ",(0,l.tZ)("a",{href:"https://docs.replit.com/additional-resources/hosting-web-pages",target:"_blank",children:"here"}),"."]})]}),(0,l.BX)(f.G,{css:[p.l0.colWithGap(4)],children:[(0,l.tZ)("label",{htmlFor:J("domain"),children:(0,l.tZ)(b.xv,{color:"dimmer",variant:"small",multiline:!1,children:"Step 1: Enter your domain"})}),(0,l.tZ)(F.II,{className:"cname-url",readOnly:"loading"===v,value:X,onChange:function(e){M(e.target.value)},onBlur:function(){W()},placeholder:"example.com",id:J("domain")})]}),z&&!E?(0,l.BX)(f.G,{css:[p.l0.colWithGap(8)],children:[(0,l.BX)(f.G,{css:[p.l0.colWithGap(4)],children:[(0,l.tZ)("label",{htmlFor:J("record"),children:(0,l.BX)(b.xv,{color:"dimmer",variant:"small",multiline:!1,children:["Step 2: Add an ",(0,l.tZ)("code",{children:"A"})," Record"]})}),(0,l.BX)(f.G,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:[(0,l.tZ)(b.xv,{multiline:!1,css:{fontFamily:p.TV.fontFamilyCode,maxWidth:"40%"},children:X}),(0,l.tZ)(b.xv,{multiline:!1,css:{fontFamily:p.TV.fontFamilyCode},children:"A"}),(0,l.tZ)(F.II,{readOnly:!0,ref:P,onChange:function(){return null},value:i,onFocus:function(){return N(P)},id:J("record")}),(0,l.tZ)(g.zx,{onClick:function(){return O(i)},text:"Copy"})]})]}),(0,l.tZ)(f.G,{css:[p.l0.flex.row,p.l0.align.stretch],children:(0,l.tZ)(g.zx,{variant:"outlined",onClick:function(){return R(!0)},text:"Use CNAME record instead."})})]}):null,H&&(E||!z)?(0,l.BX)(f.G,{css:[p.l0.colWithGap(4)],children:[(0,l.tZ)("label",{htmlFor:J("CNAMERecord"),children:(0,l.BX)(b.xv,{color:"dimmer",variant:"small",multiline:!1,children:["Step 2: Add a ",(0,l.tZ)("code",{children:"CNAME"})," Record"]})}),(0,l.BX)(f.G,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:[(0,l.tZ)(b.xv,{multiline:!1,css:{fontFamily:p.TV.fontFamilyCode,maxWidth:"40%"},children:X}),(0,l.tZ)(b.xv,{multiline:!1,css:{fontFamily:p.TV.fontFamilyCode},children:"CNAME"}),(0,l.tZ)(F.II,{readOnly:!0,ref:L,onChange:function(){return null},value:j,onFocus:function(){return N(L)},id:J("CNAMERecord")}),(0,l.tZ)(g.zx,{onClick:function(){return O(j)},text:"Copy"})]}),z?(0,l.BX)(f.G,{css:[p.l0.colWithGap(8)],children:[(0,l.tZ)(b.xv,{variant:"small",children:'Note: this CNAME record requires that your DNS provider supports CNAMEs for apex domains - for example Cloudflare with "CNAME Flattening".'}),(0,l.tZ)(f.G,{css:[p.l0.flex.row,p.l0.align.stretch],children:(0,l.tZ)(g.zx,{onClick:function(){return R(!1)},text:"Use A record instead",variant:"outlined"})})]}):null]}):null,H?(0,l.BX)(f.G,{css:[p.l0.colWithGap(4)],children:[z?(0,l.tZ)("label",{htmlFor:J("txtRecord"),children:(0,l.BX)(b.xv,{color:"dimmer",variant:"small",multiline:!1,children:["This domain also requires a ",(0,l.tZ)("code",{children:"TXT"})," Record"]})}):(0,l.BX)("label",{children:['If you are using a service like Cloudflare (with "orange cloud") that rewrites domain records, you can add a ',(0,l.tZ)("code",{children:"TXT"})," ","Record for verification purposes."]}),(0,l.BX)(f.G,{css:[p.l0.rowWithGap(8),p.l0.align.center],children:[(0,l.tZ)(b.xv,{multiline:!1,css:{fontFamily:p.TV.fontFamilyCode,maxWidth:"40%"},children:X}),(0,l.tZ)(b.xv,{multiline:!1,css:{fontFamily:p.TV.fontFamilyCode},children:"TXT"}),(0,l.tZ)(F.II,{readOnly:!0,ref:A,onChange:function(){return null},value:q,onClick:function(){return N(A)},id:J("txtRecord")}),(0,l.tZ)(g.zx,{onClick:function(){return O(q)},text:"Copy"})]})]}):null,"loading"===v?(0,l.tZ)(f.G,{css:[p.l0.colWithGap(12),p.l0.pt(16)],children:(0,l.tZ)(eD,{replId:n,domain:X,onVerified:function(){return V("verified")},onError:function(){return V("error")}})}):null,"verified"===v?(0,l.tZ)(f.G,{css:[p.l0.colWithGap(12),p.l0.pt(16)],children:(0,l.tZ)(b.xv,{multiline:!1,children:"Your domain has been verified."})}):null,"error"===v||k?(0,l.tZ)(f.G,{css:[p.l0.colWithGap(12),p.l0.pt(16)],children:(0,l.BX)(b.xv,{multiline:!1,children:["Creating the domain link failed",k?": "+k:"","."]})}):null,(0,l.BX)(f.G,{css:[p.l0.rowWithGap(12),p.l0.justify.end],children:[(0,l.tZ)(g.zx,{onClick:u,text:"Close"}),H&&null===v?(0,l.tZ)(g.zx,{disabled:Z,onClick:function(){x(!0),S(null),I({variables:{replId:n,domain:X}}).then(function(e){var t,n=(null===(t=e.data)||void 0===t?void 0:t.linkReplDomain2)||null;(null==n?void 0:n.__typename)==="Repl"?(S(null),V("loading")):(((null==n?void 0:n.__typename)==="ServiceUnavailable"||(null==n?void 0:n.__typename)==="NotFoundError"||(null==n?void 0:n.__typename)==="UnauthorizedError")&&S(null==n?void 0:n.message),V("error")),x(!1),d()}).catch(function(e){x(!1),S(e.message)})},text:"".concat(Z?"Linking domain...":"Link domain"),iconLeft:(0,l.tZ)(eZ.Z,{}),colorway:"primary"}):null]})]})}(r=i||(i={})).Verified="verified",r.Verifying="verifying",r.Failed="failed";var eT=(0,U.F4)({from:{transform:"rotate(0deg)"},to:{transform:"rotate(360deg)"}}),eR=(0,h.X)({loadingIndicator:[p.l0.width("20px"),p.l0.height("20px"),p.l0.border({color:p.TV.accentPrimaryDimmer,direction:"top",width:3}),{aspectRatio:"1 / 1",borderRadius:"100%",transform:"rotate(0deg)",animation:"linear ".concat(eT," 1s infinite")}]});function eD(e){var t=e.domain,n=e.replId,r=e.onVerified,i=e.onError,c=(d=(0,o._)({},ep,{variables:{replId:n,domain:t},pollInterval:1e3}),el.a(eg,d)),s=c.data,u=c.stopPolling;if((0,T.useEffect)(function(){if(s&&"Repl"===s.repl.__typename){var e,t,n=s.repl;if((null===(e=n.checkDomain2)||void 0===e?void 0:e.__typename)==="NotFoundError"){i();return}if((null===(t=n.checkDomain2)||void 0===t?void 0:t.__typename)==="DomainStatus2"){var o=n.checkDomain2,a=o.retry,l=o.verified;if(!l&&!a){i();return}(l||!a)&&u(),l&&r()}}},[s,u,r,i]),(null==s?void 0:s.repl.__typename)==="Repl"&&s.repl.checkDomain2){var d,h,m,v,g,y,w="DomainStatus2"===s.repl.checkDomain2.__typename?s.repl.checkDomain2:null,Z=null;if(null==w?void 0:w.records){var x=w.records;x.__typename,Z=(0,D._)(x,["__typename"])}var C=null;return(null==w?void 0:w.status)||((null===(y=s.repl.checkDomain2)||void 0===y?void 0:y.__typename)==="ServiceUnavailable"&&(C=s.repl.checkDomain2.message),C||(C="DNS updates can take up to 48 hours to fully synchronize. Feel free to check back later.")),(0,l.BX)(f.G,{css:[p.l0.colWithGap(16),p.l0.justify.spaceBetween],children:[(0,l.BX)(f.G,{css:[p.l0.rowWithGap(16),p.l0.align.center],children:[(0,l.tZ)("div",{css:eR.loadingIndicator}),(0,l.tZ)("div",{children:C})]}),Z||(null===(m=s.repl.checkDomain2)||void 0===m?void 0:m.__typename)==="DomainStatus2"&&(null===(v=s.repl.checkDomain2)||void 0===v?void 0:v.retry)||(null===(g=s.repl.checkDomain2)||void 0===g?void 0:g.__typename)==="ServiceUnavailable"?(0,l.BX)(f.G,{children:[(0,l.tZ)("br",{}),Z?(0,l.BX)(f.G,{children:["Currently, your domains records show:",(0,l.tZ)("pre",{css:[p.l0.overflow("scroll")],children:Object.entries(Z).map(function(e){var n=(0,a._)(e,2),r=n[0],i=n[1];return null==i?void 0:i.map(function(e){return(0,l.BX)("div",{children:[t," ",r," ",e]},"{domain}-{dnsType}")})})})]}):(0,l.tZ)(b.xv,{children:"Currently, your domain is either not returning any records, or something is getting in the way of our verification process."})]}):null]})}return(null==s?void 0:s.repl.__typename)==="Repl"&&(null===(h=s.repl.checkDomain2)||void 0===h?void 0:h.__typename)==="NotFoundError"?(0,l.tZ)(l.HY,{children:"We ran into an internal error while checking the domain. Please try again later."}):null}function eI(e){var t,n=e.replId,r=e.domain,i=e.onUnlink,c=e.onGoBack,s=(0,a._)((t=(0,o._)({},ep,{variables:{input:{id:n,removeDomain:r}}}),ec.D(eb,t)),2),u=s[0],d=s[1];return(0,T.useEffect)(function(){d.data&&d.data.updateRepl.repl&&i()},[d.data,i]),(0,l.BX)(f.G,{css:[p.l0.colWithGap(16)],children:[(0,l.BX)(f.G,{css:[p.l0.colWithGap(8)],children:[(0,l.tZ)(b.h4,{level:3,variant:"subheadDefault",children:"Domain Unlinking"}),(0,l.BX)(b.xv,{children:["Are you sure you want to unlink"," ",(0,l.tZ)("a",{target:"_blank",rel:"noopener",href:"https://"+r,children:r}),"?"]})]}),(0,l.BX)(f.G,{css:[p.l0.rowWithGap(12),p.l0.justify.end],children:[(0,l.tZ)(g.zx,{onClick:c,text:"Cancel"}),(0,l.tZ)(g.zx,{onClick:function(){d.loading||u()},text:d.loading?"Unlinking domain...":"Yes, unlink this domain",colorway:"negative",iconLeft:(0,l.tZ)(eC.Z,{}),disabled:d.loading})]})]})}function eB(e){var t=e.replId,n=e.hostedUrl,r=e.apexProxy,i=e.onUnlink,o=e.onLink,c=e.domains,s=e.refetch,u=(0,a._)((0,T.useState)("listing"),2),d=u[0],h=u[1],m=(0,a._)((0,T.useState)(null),2),v=m[0],y=m[1],Z=null;return"listing"===d?Z=(0,l.BX)(f.G,{css:[p.l0.colWithGap(16)],children:[(0,l.BX)(f.G,{children:[(0,l.tZ)(b.h4,{level:3,variant:"subheadDefault",children:"Currently Linked Domains"}),(0,l.tZ)(f.G,{css:[p.l0.colWithGap(16)],children:c.map(function(e){return e?(0,l.tZ)(f.G,{children:(0,l.BX)(f.G,{css:[p.l0.colWithGap(4),p.l0.justify.spaceBetween,p.l0.align.center],children:[(0,l.BX)(f.G,{css:[p.l0.rowWithGap(8),p.l0.align.center,p.l0.justify.spaceBetween,p.l0.width("100%")],children:[(0,l.tZ)(f.G,{css:[p.l0.flex.shrink(1)],children:(0,l.tZ)(w.u,{tooltip:e.domain,children:(0,l.tZ)(b.xv,{multiline:!1,children:e.domain})})}),(0,l.tZ)(f.G,{children:(0,l.tZ)(w.u,{tooltip:(0,l.tZ)(b.xv,{css:{textTransform:"capitalize"},multiline:!1,children:e.state}),children:(0,l.tZ)(e_,{status:e.state})})})]}),(0,l.BX)(f.G,{css:[p.l0.rowWithGap(12),p.l0.justify.end,p.l0.align.center,p.l0.width("100%"),"verified"!==e.state&&p.l0.pl(12)],children:[(0,l.tZ)(g.zx,{text:"Unlink",css:p.l0.width("verified"!==e.state?"50%":"100%"),onClick:function(){y(e.domain),h("unlinking")}}),"verified"!==e.state?(0,l.tZ)(g.zx,{text:"Check status",css:p.l0.width("50%"),onClick:function(){y(e.domain),h("linking")}}):null]})]})},e.domain):null})})]}),(0,l.tZ)(g.zx,{text:"Create domain link",onClick:function(){return h("linking")},iconLeft:(0,l.tZ)(ex.Z,{})})]}):"linking"===d?Z=(0,l.tZ)(eE,{replId:t,desiredARecord:r,hostedUrl:n,existingDomain:v,onLink:o,onGoBack:function(){h("listing"),y(null)},onLinkStarted:s,onStateChanged:s}):"unlinking"===d&&null!==v&&(Z=(0,l.tZ)(eI,{replId:t,domain:v,onUnlink:function(){s(),h("listing"),i()},onGoBack:function(){h("listing"),y(null)}})),(0,l.BX)(f.G,{css:[p.l0.colWithGap(16)],children:[(0,l.tZ)(b.h4,{level:1,variant:"subheadDefault",children:"Domain Linking"}),(0,l.BX)(b.xv,{css:{fontStyle:"italic"},children:["Domain linking to the development preview is deprecated, please consider switching to"," ",(0,l.tZ)("a",{href:"https://docs.replit.com/cloud-services/deployments/about-deployments",target:"_blank",children:"deployments"})," ","as a more scalable solution."]}),Z]})}var eG=n(24281),eP=n(23522),eA=n(41960),eL=(0,U.iv)([p.l0.borderRadius(6),p.l0.color.foregroundDimmer,p.l0.height(24)]),eN=[p.l0.reset.button,F.u3,p.l0.rowWithGap(0),p.l0.flex.grow(0),p.l0.color.accentPositiveStronger,p.l0.fontSize("small"),p.l0.focusRing,{"&:hover":[p.l0.cursor.pointer,p.l0.color.accentPositiveStrongest]},{borderTopRightRadius:0,borderBottomRightRadius:0,borderRight:0},p.l0.align.center,p.l0.py(0),p.l0.px(4)],eO=(0,h.X)({root:[p.l0.flex.row,p.l0.align.center,p.l0.justify.spaceBetween,p.l0.border({color:p.TV.outlineDimmest,direction:"bottom"}),p.l0.p(2),p.l0.container("root"),p.l0.zIndex(1),p.l0.p(4),p.l0.gap(4)],devControls:[p.l0.flex.row,p.l0.gap(4)],navControls:[p.l0.align.center,p.l0.rowWithGap(4),p.l0.flex.growAndShrink(1)],urlWrapper:[p.l0.position.relative,p.l0.flex.row,p.l0.flex.growAndShrink(1)],urlOptionsRoot:[p.l0.rowWithGap(0),p.l0.flex.growAndShrink(1),p.l0.overflow("hidden")],urlOptions:[p.l0.p(8),p.l0.colWithGap(6),p.l0.borderRadius(4)],urlOptionsSection:[p.l0.colWithGap(4),p.l0.pb(8),p.l0.border({direction:"bottom"}),{":last-child":{borderBottom:0}}],urlOptionsTitle:[p.l0.rowWithGap(0),p.l0.justify.spaceBetween,p.l0.flex.grow(1)],portRadioGroup:[p.l0.colWithGap(8)],portOption:[p.l0.rowWithGap(8),p.l0.color.foregroundDimmer],portOptionSelected:[p.l0.rowWithGap(8),p.l0.color.foregroundDefault],portOptionLabel:[{"&:hover":[p.l0.cursor.pointer,p.l0.color.foregroundDefault]}],temporaryDevLinkWrapper:[p.l0.rowWithGap(4)],temporaryDevLinkText:{flex:"0 1 auto"},temporaryDevLink:[p.l0.display.block,p.l0.color.accentPositiveStronger,p.l0.fontSize("small"),p.l0.focusRing,{wordBreak:"break-all","&:hover":[p.l0.cursor.pointer,p.l0.color.accentPositiveStrongest]}],url:eN,urlSelected:[eN,p.l0.backgroundColor.backgroundHighest,{borderBottomLeftRadius:0}],urlPath:[p.l0.py(0),p.l0.fontSize(12),p.l0.flex.grow(1)],urlPath2:[p.l0.py(0),p.l0.fontSize(12),p.l0.flex.grow(1),{borderTopLeftRadius:0,borderBottomLeftRadius:0}],urlDots:[p.l0.backgroundColor.greenDimmer,p.l0.borderRadius(4),p.l0.p(2),{lineHeight:1,"&:hover":[p.l0.cursor.pointer,p.l0.backgroundColor.greenDefault]}],goButton:[p.l0.position.absolute,p.l0.right(4),p.l0.top("50%"),{transform:"translateY(-50%)"}],text:[p.l0.ml(8),p.l0.mr(4),p.l0.color.foregroundDimmest],buttons:[p.l0.flex.row,p.l0.align.center,(0,O._)({},p.nC.max(500,"root"),{"svg + span":{display:"none"},svg:{marginRight:0}})],navButton:[p.l0.p(6),p.l0.borderRadius(4),p.l0.flex.shrink(0),{border:"none"}],fakeUrl:[p.l0.fontSize(12),p.l0.border(),{boxSizing:"content-box"},p.l0.borderRadius(6),p.l0.px(8),p.l0.py(2),p.l0.flex.grow(1),p.l0.rowWithGap(4),p.l0.align.center],devtoolsErrorsBadge:[p.l0.position.absolute,p.l0.center,p.l0.textAlign.center,p.l0.backgroundColor.accentNegativeStronger,p.l0.color.accentNegativeDimmest,p.l0.right(0),p.l0.top(-2),p.l0.p(2),p.l0.minWidth(14),p.l0.height(14),p.l0.borderRadius(16),p.l0.fontSize(10)]});function eU(e){var t=e.children;return(0,l.tZ)(w.u,{tooltip:"Dev URLs are only active when someone is in the workspace. The dev URL is also subject to change. For production hosting, use Deployments.",children:t})}function eX(e){var t=e.replId,n=e.url,r=e.webviewEventMonitorState,i=e.navigationState,s=e.forwardedPorts,u=e.canEditDomain,d=e.devtoolsErrorCount,h=e.iframeLoading,m=e.onToggleDevtools,v=e.onOpenPortSettings,y=(0,c.Z)(),w=function(e){var t,n,r,i=(t=(0,o._)({},ep,{variables:{replId:e}}),el.a(ev,t)),l=i.data,c=i.refetch,s=(0,a._)((0,T.useState)(!1),2),u=s[0],d=s[1],f=(0,T.useRef)(!1);if(!l||"Repl"!==l.repl.__typename)return{showEditReplcoDomainButton:!1};var h=null!==(r=null===(n=l.repl.domains)||void 0===n?void 0:n.filter(Boolean).filter(function(e){return!(null==e?void 0:e.hosting_deployment_id)}).map(function(e){return{domain:e.domain,state:e.state}}))&&void 0!==r?r:[];return h.length||f.current?(f.current=!0,{showEditReplcoDomainButton:!0,setIsEditingDomain:d,isEditingDomain:u,editDomainProps:{domains:h,refetch:c,replId:e,apexProxy:l.repl.apexProxy,hostedUrl:l.repl.hostedUrl,onUnlink:function(){c(),d(!1)},onLink:function(){c(),d(!1)}}}):{showEditReplcoDomainButton:!1}}(t),Z=(0,l.tZ)(eV,{});return"external-page"===r.state?Z=(0,l.tZ)(eW,{backToLocal:function(){return i.refresh()}}):"active"===r.state&&(Z=(0,l.tZ)(eF,{url:n,navigationState:i,forwardedPorts:s,iframeLoading:h,onOpenPortSettings:v})),(0,l.BX)(H.Tg,{css:eO.root,children:[Z,(0,l.tZ)(f.G,{css:p.l0.flex.row,children:(0,l.BX)(f.G,{css:eO.buttons,children:[u&&w.showEditReplcoDomainButton?(0,l.BX)(l.HY,{children:[(0,l.tZ)(g.zx,{variant:"outlined",size:"small",text:"Edit custom domain",onClick:function(){return w.setIsEditingDomain(!w.isEditingDomain)},iconLeft:(0,l.tZ)(q.Z,{size:16})}),(0,l.tZ)(W.u,{isOpen:w.isEditingDomain,onRequestClose:function(){return w.setIsEditingDomain(!1)},children:(0,l.tZ)(eB,(0,o._)({},w.editDomainProps))})]}):null,(0,l.BX)(f.G,{css:eO.devControls,children:["active"===r.state?(0,l.BX)(f.G,{css:p.l0.position.relative,children:[(0,l.tZ)(g.zx,{size:"small",variant:"outlined",onClick:m,css:eL,text:"Devtools",iconLeft:(0,l.tZ)(Q.Z,{})}),d>0?(0,l.tZ)(f.G,{css:eO.devtoolsErrorsBadge,children:(0,l.tZ)(b.xv,{variant:"small",multiline:!1,children:d>99?"99+":d.toString()})}):null]}):null,(0,l.tZ)(eU,{children:(0,l.tZ)(M.Z,{size:"small",variant:"outlined",css:eL,href:i.getExternalUrl(),target:"_blank",iconLeft:(0,l.tZ)(J.Z,{}),text:y?"Open in the browser":"New tab",onClick:function(){I({actionType:"open_new_window"})}})})]})]})})]})}function eM(e){var t=e.url,n=e.navigationState,r=e.forwardedPorts,i=e.onOpenPortSettings,o=n.canNavigateToInputRelativeUrl,c=n.navigateToInputRelativeUrl,s=n.inputRelativeUrl,u=n.setInputRelativeUrl,d=n.selectedPort,h=n.setPort,p=(0,a._)((0,T.useState)(!1),2),v=p[0],g=p[1],w=(0,et.U)(),Z=w("radioGroup");return(0,l.BX)(f.G,{css:eO.urlOptionsRoot,children:[(0,l.BX)(eA.xo,{isOpen:v,onOpenChange:g,label:"Show URL Options",background:"higher",children:[(0,l.BX)("button",{css:v?eO.urlSelected:eO.url,children:[(0,l.tZ)(eU,{children:(0,l.tZ)(f.G,{css:eO.urlDots,children:"{...}"})}),".".concat(t.includes("replit.dev")?"replit.dev":"repl.co").concat((0,m.O2)(d)?"":":"+d)]}),(0,l.BX)(H.Tg,{css:eO.urlOptions,children:[(0,l.BX)(f.G,{css:eO.urlOptionsSection,children:[(0,l.BX)(f.G,{css:eO.urlOptionsTitle,children:[(0,l.BX)(b.xv,{children:["Listening on ",(0,X.Z)("port",r.length),":"]}),(0,l.tZ)(y.hU,{alt:"Networking tool",onClick:i,children:(0,l.tZ)(K.Z,{})})]}),(0,l.tZ)(V.E,{tag:"fieldset",css:eO.portRadioGroup,name:Z,value:d.toString(),onChange:function(e){h(parseInt(e.target.value,10)),g(!1)},children:r.map(function(e,t){return(0,l.BX)(f.G,{css:d===e.configuration.externalPort?eO.portOptionSelected:eO.portOption,children:[(0,l.tZ)(V.Y,{id:w(e.configuration.externalPort),value:e.configuration.externalPort.toString()}),(0,l.tZ)("label",{htmlFor:w(e.configuration.externalPort),css:eO.portOptionLabel,children:":".concat(e.configuration.localPort,"  :").concat(e.configuration.externalPort)})]},"".concat(t,"-").concat(e.configuration.externalPort,":").concat(e.configuration.localPort))})})]}),(0,l.BX)(f.G,{css:eO.urlOptionsSection,children:[(0,l.tZ)(b.xv,{children:"Dev URL:"}),(0,l.BX)(f.G,{css:eO.temporaryDevLinkWrapper,children:[(0,l.tZ)(b.xv,{css:eO.temporaryDevLinkText,maxLines:1,children:(0,l.tZ)(ei(),{legacyBehavior:!0,href:t,passHref:!0,children:(0,l.tZ)("a",{css:eO.temporaryDevLink,target:"_blank",children:t})})}),(0,l.tZ)(eP.m,{textToCopy:t,tooltipText:"Copy link",tooltipDelay:"none",size:18})]}),(0,l.tZ)(b.xv,{color:"dimmer",variant:"small",children:"Dev URLs are temporary and will sleep after you leave the workspace."})]})]})]}),(0,l.tZ)(F.II,{css:eO.urlPath2,style:v?{borderBottomRightRadius:0}:{},value:s,onKeyDown:function(e){"Enter"===e.key&&o&&c()},onChange:function(e){if(""===e.currentTarget.value){u("/");return}u(e.target.value)}})]})}function eF(e){var t=e.url,n=e.navigationState,r=e.forwardedPorts,i=e.iframeLoading,o=e.onOpenPortSettings,a=n.canNavigateBack,c=n.navigateBack,s=n.canNavigateForward,u=n.navigateForward,d=n.canNavigateToInputRelativeUrl,h=n.navigateToInputRelativeUrl,p=n.refresh,m=(0,eG.NJ)(),v=(0,en.gf)("webviewpane.reload");return(0,l.BX)(f.G,{css:eO.navControls,children:[(0,l.tZ)(y.hU,{alt:"Back",tooltipDelay:"long",onClick:c,disabled:!a,css:eO.navButton,children:(0,l.tZ)(z.Z,{})}),(0,l.tZ)(y.hU,{alt:"Forward",tooltipDelay:"long",onClick:u,disabled:!s,css:eO.navButton,children:(0,l.tZ)(j.Z,{})}),(0,l.tZ)(y.hU,{alt:"Refresh".concat(v?" (".concat((0,en.Ih)(v,m),")"):""),tooltipDelay:"long",onClick:p,css:eO.navButton,children:i?(0,l.tZ)(Y.Z,{}):(0,l.tZ)($.Z,{})}),(0,l.BX)(f.G,{css:eO.urlWrapper,children:[(0,l.tZ)(eM,{url:t,navigationState:n,forwardedPorts:r,onOpenPortSettings:o}),(0,l.tZ)(H.Tg,{elevated:!0,css:eO.goButton,children:(0,l.tZ)(y.hU,{alt:"Go to URL",disabled:!d,onClick:h,size:18,tooltipContents:(0,l.tZ)(en.bM,{keyCombo:"Enter"}),children:(0,l.tZ)(j.Z,{})})})]})]})}function eW(e){var t=e.backToLocal,n=(0,a._)((0,T.useState)(!1),2),r=n[0],i=n[1];return(0,l.BX)(f.G,{css:eO.navControls,children:[(0,l.tZ)(g.zx,{size:"small",variant:"outlined",onClick:function(){t(),i(!0)},loading:r,css:eL,text:"Back to my page",iconLeft:r?(0,l.tZ)(Y.Z,{}):(0,l.tZ)(z.Z,{})}),(0,l.BX)(H.Tg,{elevated:!0,css:eO.fakeUrl,children:[(0,l.tZ)(w.u,{tooltip:"The URL bar is not supported when navigating to external pages. You can open in a new tab to use your browser instead.",delay:"none",placement:"auto",children:(0,l.tZ)(ee.Z,{})}),(0,l.tZ)(b.xv,{variant:"small",color:"dimmer",children:"External page"})]})]})}function eV(){return(0,l.tZ)(f.G,{css:eO.navControls,children:(0,l.BX)(H.Tg,{elevated:!0,css:eO.fakeUrl,children:[(0,l.tZ)(w.u,{tooltip:"Page is loading, please wait.",delay:"none",placement:"auto",children:(0,l.tZ)(Y.Z,{})}),(0,l.tZ)(b.xv,{variant:"small",color:"dimmer",children:"Loading your page"})]})})}var eH=n(60357),ez=80;function ej(e,t){var n=function(e,t){var n=void 0;if((null==e?void 0:e.portType)==="external")n=null==e?void 0:e.port;else if((null==e?void 0:e.portType)==="local"){var r=t.find(function(t){return t.configuration.localPort===e.port});n=null==r?void 0:r.configuration.externalPort}return n}(e,t);return n||(t.length>0?t.find(function(e){return 80===e.configuration.externalPort})?80:t[0].configuration.externalPort:void 0)}var eq=(0,h.X)({desktopAppWebview:[p.l0.flex.growAndShrink(1),{border:"none",backgroundColor:p.TV.white}],iframe:[p.l0.flex.growAndShrink(1),{border:"none",display:"block",backgroundColor:p.TV.white}],self:[p.l0.backgroundColor.backgroundDefault,p.l0.height("100%"),p.l0.borderRadius(4),{overflow:"hidden"}]});function eJ(e){var t,n,r,i,h,p,g,y,b,w,Z,x,C,k,S,E,D,P,O,U,X,M,F,W,V,H,z,j,q,J,Y,$,K,Q,ee,et=e.initialPort,en=e.initialPath,er=void 0===en?"/":en,ei=e.openPane,eo=e.containerRef,ea=e.openNetworkingTool,el=e.setRefreshCb,ec=e.ports,es=e.container,eu=(0,T.useId)(),ed=(0,s.Z)(),ef=(0,c.Z)(),eh=(0,eH.I5)({variables:{id:ed}}).data,ep=(null==eh?void 0:eh.repl.__typename)==="Repl"?eh.repl:null,em=(0,T.useRef)(null),ev=(0,T.useRef)(!1),eg=(0,a._)((0,T.useState)(!0),2),ey=eg[0],eb=eg[1],ew=(0,a._)((0,T.useState)(0),2),eZ=ew[0],ex=ew[1],eC=(0,m.J_)({replId:ed,ports:ec,container:es}),ek=(0,v.bg)(ec),eS=(n=(t={replId:ed,webviewId:eu,isHTML:(0,u.T)(),iframeOrWebviewRef:em,iframeSrc:null==eC?void 0:eC.iframeSrc,onLoaded:function(){return eb(!1)},onDevtoolsErrorCountChange:ex}).replId,r=t.webviewId,i=t.isHTML,h=t.iframeOrWebviewRef,p=t.iframeSrc,g=t.onLoaded,y=t.onDevtoolsErrorCountChange,w=(b=(0,a._)((0,T.useState)({state:"loading",relativeUrl:null}),2))[0],Z=b[1],x=(0,c.Z)(),(0,T.useEffect)(function(){if(x&&p){if(!h.current)throw Error("Expected iframe to be defined when iframerc exists");var e=h.current,t=new URL(p);return e.addEventListener("did-navigate",n),e.addEventListener("did-navigate-in-page",n),function(){e.removeEventListener("did-navigate",n),e.removeEventListener("did-navigate-in-page",n)}}function n(e){var n=new URL(e.url),r=n.pathname+n.search+n.hash;if("did-navigate-in-page"===e.type&&g(),n.hostname!==t.hostname){Z(function(e){return"external-page"===e.state?e:{state:"external-page",relativeUrl:null}});return}Z(function(e){return"active"===e.state&&e.relativeUrl===r?e:{state:"active",relativeUrl:r}})}},[x,p,h,g]),(0,T.useEffect)(function(){if(!x&&p){var e=new URL(p);return window.addEventListener("message",t),function(){window.removeEventListener("message",t)}}function t(t){if(t.origin&&"null"!==t.origin&&new URL(t.origin).hostname===e.hostname&&"object"==typeof t.data&&(null===(a=t.data)||void 0===a?void 0:a.type)){var a,l,c=h.current,s=t.data;if(null==s||!s.id||s.id===r)switch(s.type){case"ready":g(),t.data.wasShown&&(null==c||null===(l=c.contentWindow)||void 0===l||l.postMessage({type:"toggleDevtools",source:"automatic"},"*"));break;case"event":var u=t.data,d=u.event,f=u.payload;"error"===d?G.Tb(f):(0,_.j)(d,(0,B._)((0,o._)({},f),{replId:n,isHTML:i}));break;case"show-badge":y(t.data.count);break;case"page-navigation":if(s.payload.isExternal){Z(function(e){return"external-page"===e.state?e:{state:"external-page",relativeUrl:null}});return}var p=s.payload.path;Z(function(e){return"active"===e.state&&e.relativeUrl===p?e:{state:"active",relativeUrl:p}})}}}},[n,r,x,i,p,h,g,y]),{webviewEventMonitorState:w}).webviewEventMonitorState,e_=null!=eC;(0,T.useEffect)(function(){ef&&e_&&em.current.addEventListener("dom-ready",function(){ev.current=!0})},[ef,e_]);var eE=(0,T.useCallback)(function(e,t){if(ex(0),eC&&em.current&&(null==eC?void 0:eC.iframeSrc)){if(ef){if(!ev.current)return;var n,r=em.current,i=new URL(e,eC.iframeSrc);t&&(i=(0,m.hw)(i.toString(),t)),r.loadURL(i.toString()),eb(!0);return}if(null===(n=em.current)||void 0===n?void 0:n.contentWindow){var o=(0,m.hw)(null==eC?void 0:eC.iframeSrc,t);o.searchParams.set("initialPath",e),o.searchParams.set("id",eu),em.current.src=o.href,eb(!0)}}},[eC,eu,ef]),eT=(k=(C={initialPort:et,initialPath:er,presentationalUrl:null==eC?void 0:eC.presentationUrl,webviewEventMonitorState:eS,navigateTo:function(e,t){return eE(e,t)}}).initialPort,S=C.initialPath,E=C.presentationalUrl,D=C.webviewEventMonitorState,P=C.navigateTo,U=(O=(0,a._)((0,T.useState)(!1),2))[0],X=O[1],F=(M=(0,a._)((0,T.useState)(!1),2))[0],W=M[1],H=(V=(0,a._)((0,T.useState)("Loading..."),2))[0],z=V[1],q=(j=(0,a._)((0,T.useState)(80),2))[0],J=j[1],Y=(0,T.useCallback)(function(e,t,n,r){X(e),W(t),z(n),J(r)},[]),$=(0,A.Z)(P),K=(0,A.Z)(k),Q=(0,A.Z)(S),ee=(0,L.Z)(function(){return new N({initialRelativeUrl:Q.current,initialPort:K.current,onChange:Y,navigateTo:$})},[Q,K,Y,$]),(0,T.useEffect)(function(){"loading"===D.state&&K.current!==q&&ee.setPort(K.current)},[k,K,ee,q,D]),(0,T.useEffect)(function(){"active"===D.state&&ee.relativeUrlUpdate(D.relativeUrl)},[D.state,D.relativeUrl,ee]),{canNavigateBack:U,canNavigateForward:F,navigateBack:ee.back,navigateForward:ee.forward,canNavigateToInputRelativeUrl:H!==D.relativeUrl,navigateToInputRelativeUrl:function(){I({actionType:"navigated_to",path:H}),ee.navigate(H)},inputRelativeUrl:H,setInputRelativeUrl:z,refresh:ee.refresh,setPort:ee.setPort,selectedPort:q,getExternalUrl:function(){return(0,m.hw)(E||"",q)+H}}),eR=(0,v.vU)(eT.selectedPort);return((0,T.useEffect)(function(){eR&&eR.configuration.isLocalhost&&"loading"===eS.state&&eT.refresh()},[eT,eR,eS.state]),(0,T.useEffect)(function(){el(function(){return eT.refresh})},[eT.refresh,el]),ep&&eC)?(0,l.BX)(f.G,{css:eq.self,innerRef:eo,children:[(0,l.tZ)(eX,{replId:ed,url:eC.presentationUrl,webviewEventMonitorState:eS,navigationState:eT,forwardedPorts:ek,canEditDomain:ep.authorizations.addCustomDomain.isAuthorized,devtoolsErrorCount:eZ,iframeLoading:ey,onToggleDevtools:function(){if(I({actionType:"devtools_opened"}),ex(0),!ef){var e,t;null===(t=em.current)||void 0===t||null===(e=t.contentWindow)||void 0===e||e.postMessage({type:"toggleDevtools",source:"manual"},"*");return}var n=em.current;n&&ev&&(n.isDevToolsOpened()?n.closeDevTools():n.openDevTools())},onOpenPortSettings:ea}),(0,l.tZ)(R,{repl:ep,onClick:function(){return ei({type:"deployments"})}}),ef?(0,l.tZ)("webview",(0,o._)({"data-cy":"ws-webview",ref:em,src:eY({url:eC.iframeSrc,port:et,path:er,id:eu}).toString(),css:eq.desktopAppWebview},d.Z)):(0,l.tZ)("iframe",(0,o._)({title:"webview","data-cy":"ws-webview",ref:em,src:eY({url:eC.iframeSrc,port:et,path:er,id:eu}).toString(),css:eq.iframe},d.Z))]}):null}function eY(e){var t=e.url,n=e.port,r=e.path,i=e.id,o=new URL(t);return(0,m.O2)(n)?o.port="":o.port=n.toString(),o.searchParams.set("initialPath",r),o.searchParams.set("id",i),o}},38822:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(1053),i=n(75271);function o(e){var t=e.container,n=e.runner,o=e.refreshWebView;(0,i.useEffect)(function(){var e,i=[];return"outputs"===n.mode&&i.push(n.onBlockChanged(function(t){t.type===r.kH.EXECUTION&&1===t.data.exitCode&&(e=Date.now())})),i.push(t.onPortOpened(function(t){var n=t.isVnc;if(t.isForwarded&&!n){var r=Date.now();void 0!==e&&r-e<1e3||o()}})),function(){return i.forEach(function(e){return e()})}},[t,o,n])}},75834:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(1053),i=n(75271);function o(e){var t=e.runner,n=e.refreshWebView;(0,i.useEffect)(function(){if("html"===t.mode)return t.onStateChanged(function(e){e===r.Ah.RUNNING&&n()})},[t,n])}},24126:function(e,t,n){n.d(t,{A:function(){return ee},Z:function(){return eo}});var r=n(66626),i=n(3796),o=n(24766),a=n(93245),l=n(36809),c=n(63163),s=n(67827),u=n(9602),d=n(76848),f=n(75271),h=n(86466),p=n(44935),m=n(21781),v=n(48155),g=n(79904),y=n(99149),b=n(14548),w=n(65034),Z=n(19602),x=n(47136),C=new Map(m.zY.anyOf.map(function(e){return[e.properties.task.const,e]})),k=new Set(C.keys());function S(e){var t=(0,d.Vg)(e),n=(0,d.Fq)(),r=(0,d.lP)(),a=(0,d.uL)();return t?(0,i.tZ)(E,{inititalConfig:t,onArgsBlur:a,onChange:function(t,n){null!==t&&r(e,t,{persist:"task"===n})},onRemove:function(){return n(e)}}):(0,i.tZ)(o.xv,{children:"Task not found"})}var _=(0,l.X)({root:[c.l0.borderRadius(4),c.l0.p(6),c.l0.colWithGap(4)],taskRow:[c.l0.rowWithGap(4),c.l0.align.center,c.l0.justify.spaceBetween],args:[c.l0.colWithGap(2)]});function E(e){var t,n=(0,r._)((0,f.useState)((null===(t=e.inititalConfig)||void 0===t?void 0:t.task)||null),2),l=n[0],c=n[1],s=(0,r._)((0,f.useState)(e.inititalConfig&&"args"in e.inititalConfig?e.inititalConfig.args:null),2),d=s[0],h=s[1],m=Array.from(C.keys()).map(function(e){return{id:e}}),v=l?function(e){var t,n=C.get(e);if(!n||!("args"in n.properties))return null;var r=null===(t=n.required)||void 0===t?void 0:t.includes("args");return{type:n.properties.args.type,required:r}}(l):null;function g(t){var n="task"===t.type?{task:"task"===t.type?t.task:l,args:l!==t.task?null:d}:{task:l,args:t.args};c(n.task),h(n.args);var r=n.task?C.get(n.task):null;if(!r)return null;try{e.onChange(y.B4.Decode(r,n),t.type)}catch(n){e.onChange(null,t.type)}}return(0,i.BX)(b.Tg,{elevated:!0,css:_.root,children:[(0,i.BX)(a.G,{css:_.taskRow,children:[(0,i.tZ)(w.P,{"aria-label":"Select a task",selectedKey:l,onSelectionChange:function(e){!function(e){if(!k.has(e))throw Error("Invalid task name: ".concat(e," (expected one of ").concat(Array.from(k),")"))}(e),g({type:"task",task:e})},items:m,children:function(e){return(0,i.tZ)(x.m9,{label:e.id},e.id)}}),(0,i.tZ)(u.hU,{alt:"Remove task",onClick:e.onRemove,children:(0,i.tZ)(Z.Z,{})})]}),v?(0,i.BX)(a.G,{css:_.args,children:[(0,i.BX)(o.xv,{variant:"small",color:"dimmest",children:["Args (",v.type,")"]}),(0,i.tZ)(p.II,{onBlur:e.onArgsBlur,onChange:function(e){var t=e.currentTarget.value;g({type:"args",args:"number"===v.type?Number(t):t})},required:v.required,value:d?d.toString():"",type:v.type})]}):null]})}var T=n(78272),R=n(20957),D=n(59489),I=n(65697),B=n(58532),G=n(30043),P=n(91466);function A(e){var t=e.mode,n=void 0===t?"sequential":t,r=e.onChange;return(0,i.BX)(D.hE,{name:"mode",onChange:r,row:!0,value:null!=n?n:"sequential",children:[(0,i.tZ)(D.rK,{id:"sequential",text:"Sequential",value:"sequential"}),(0,i.tZ)(D.rK,{id:"parallel",text:"Parallel",value:"parallel"})]})}function L(e){return(0,i.tZ)(a.G,{css:N.nav,children:(0,i.tZ)(g.zx,{size:"small",variant:"nofill",onClick:e.onBack,iconLeft:(0,i.tZ)(v.Z,{}),text:"Workflows"})})}var N=(0,l.X)({root:[c.l0.colWithGap(16)],nav:[c.l0.flex.row],content:[c.l0.colWithGap(8)],inputRow:[c.l0.colWithGap(2)],tasks:[c.l0.colWithGap(8)]});function O(e){var t=e.index,n=e.onDelete,l=(0,d.uL)(),c=(0,d.DW)(t),u=(0,d.xI)(),h=(0,d.G8)(),v=(0,d.IV)(t),y=(0,r._)((0,f.useState)(!1),2),b=y[0],w=y[1],x=(0,s.U)(function(e){return function(t){var n=t.workflowId;return e.workflows.runWorkflow.rpc({workflowId:n})}},[]);if(!c)return(0,i.tZ)(o.xv,{children:"Workflow not found"});var C=(null==v?void 0:v.step)===m.KX.RUNNING;return(0,i.BX)(i.HY,{children:[(0,i.BX)(a.G,{css:N.root,children:[(0,i.tZ)(g.zx,{size:"small",onClick:function(){return null==x?void 0:x({workflowId:c.name})},loading:C,iconLeft:C?(0,i.tZ)(R.Z,{}):(0,i.tZ)(T.Z,{}),text:"Run Workflow"}),(0,i.tZ)(P.R,{}),(0,i.BX)(a.G,{css:N.content,children:[(0,i.BX)(a.G,{css:N.inputRow,children:[(0,i.tZ)(o.xv,{variant:"small",color:"dimmest",children:"Name"}),(0,i.tZ)(p.II,{onBlur:l,value:c.name,onChange:function(e){u(t,function(t){t.name=e.currentTarget.value})}})]}),(0,i.BX)(a.G,{css:N.inputRow,children:[(0,i.tZ)(o.xv,{variant:"small",color:"dimmest",children:"Mode"}),(0,i.tZ)(A,{mode:c.mode,onChange:function(e){u(t,function(t){t.mode=e}),l()}})]}),(0,i.BX)(a.G,{css:N.inputRow,children:[(0,i.tZ)(o.xv,{variant:"small",color:"dimmest",children:"Tasks"}),(0,i.BX)(a.G,{css:N.tasks,children:[c.tasks.map(function(e,n){return(0,i.tZ)(S,{workflowIndex:t,taskIndex:n},n.toString())}),(0,i.tZ)(g.zx,{iconLeft:(0,i.tZ)(G.Z,{}),text:"Add task",onClick:function(){return h(t)}})]})]})]}),(0,i.tZ)(P.R,{}),(0,i.tZ)(g.zx,{iconLeft:(0,i.tZ)(Z.Z,{}),text:"Delete Workflow",colorway:"red",variant:"outlined",onClick:function(){return w(!0)}})]}),(0,i.tZ)(B.u,{isOpen:b,onRequestClose:function(){return w(!1)},children:(0,i.tZ)(I.Z,{name:"Workflow",hideModal:function(){return w(!1)},delete:n})})]})}var U=n(81253),X=n(45252),M=n(22510),F=n(41974),W=n(29043),V=(0,l.X)({root:[c.l0.colWithGap(12)],inputs:[c.l0.colWithGap(8)],tasks:[c.l0.colWithGap(8)],inputRow:[c.l0.colWithGap(2)]});function H(e){var t=(0,r._)((0,f.useState)(""),2),n=t[0],l=t[1],c=(0,r._)((0,f.useState)([null]),2),s=c[0],u=c[1],d=(0,r._)((0,f.useState)(void 0),2),h=d[0],m=d[1],v=(0,f.useMemo)(function(){if(!n||!s.length)return(0,W.UG)("invalid");var e=[],t=!0,r=!1,i=void 0;try{for(var o,a=s[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value;if(null===l)return(0,W.UG)("invalid");e.push(l)}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}return(0,W.Ok)({name:n,mode:h,tasks:e})},[n,h,s]);return(0,i.BX)(M.l0,{css:V.root,onSubmit:function(t){t.preventDefault(),v.ok&&e.onCreate(v.value)},children:[(0,i.BX)(a.G,{css:V.inputs,children:[(0,i.BX)(a.G,{css:V.inputRow,children:[(0,i.tZ)(o.xv,{variant:"small",color:"dimmest",children:"Name"}),(0,i.tZ)(p.II,{required:!0,placeholder:"Workflow name",value:n,onChange:function(e){return l(e.currentTarget.value)}})]}),(0,i.BX)(a.G,{css:V.inputRow,children:[(0,i.tZ)(o.xv,{variant:"small",color:"dimmest",children:"Mode"}),(0,i.tZ)(A,{mode:h,onChange:m})]}),(0,i.BX)(a.G,{css:V.inputRow,children:[(0,i.tZ)(o.xv,{variant:"small",color:"dimmest",children:"Tasks"}),(0,i.BX)(a.G,{css:V.tasks,children:[s.map(function(e,t){return(0,i.tZ)(E,{onChange:function(e){u(function(n){return(0,F.Uy)(n,function(n){n[t]=e})})},onRemove:function(){u(function(e){return(0,F.Uy)(e,function(e){e.splice(t,1)})})}},"newTask"+t)}),(0,i.tZ)(g.zx,{size:"small",text:"Add task",type:"button",onClick:function(){u(function(e){return(0,F.Uy)(e,function(e){e.push(null)})})},iconLeft:(0,i.tZ)(G.Z,{})})]})]})]}),(0,i.tZ)(g.zx,{colorway:"primary",disabled:!v.ok,text:"Create Workflow",type:"submit"})]})}var z=n(10578),j=n(54129),q=n(7935),J=n(89313),Y=(0,l.X)({root:[c.l0.colWithGap(6)],item:[c.l0.rowWithGap(4),c.l0.align.center,c.l0.justify.spaceBetween]});function $(e){var t=e.index,n=(0,r._)((0,f.useState)(!1),2),l=n[0],c=n[1],s=(0,d.DW)(t),h=en(t),p=(0,j.Z)(null==h?void 0:h.isRunningObservable);return s&&h?l?(0,i.BX)(a.G,{css:K.root,children:[(0,i.BX)(a.G,{css:K.header,children:[(0,i.tZ)(o.xv,{children:"Edit Workflow"}),(0,i.tZ)(u.hU,{alt:"Close",onClick:function(){return c(!1)},children:(0,i.tZ)(q.Z,{})})]}),(0,i.tZ)(O,{index:t,onDelete:function(){return c(!1)}})]}):(0,i.BX)(a.G,{css:Y.item,children:[(0,i.tZ)(g.zx,{size:"small",iconLeft:p?(0,i.tZ)(X.Z,{}):(0,i.tZ)(U.Z,{}),text:s.name,onClick:function(){p?h.stop():h.run()}}),(0,i.tZ)(g.zx,{variant:"outlined",size:"small",iconLeft:(0,i.tZ)(J.Z,{}),text:"Edit",onClick:function(){return c(!0)}})]}):null}var K=(0,l.X)({root:[c.l0.colWithGap(6),c.l0.borderRadius(4),c.l0.border(),c.l0.p(8)],header:[c.l0.rowWithGap(6),c.l0.align.center,c.l0.justify.spaceBetween]});function Q(){var e=(0,r._)((0,f.useState)(!1),2),t=e[0],n=e[1],l=(0,d.mj)();return t?(0,i.BX)(a.G,{css:K.root,children:[(0,i.BX)(a.G,{css:K.header,children:[(0,i.tZ)(o.xv,{children:"New Workflow"}),(0,i.tZ)(u.hU,{alt:"Close",onClick:function(){return n(!1)},children:(0,i.tZ)(q.Z,{})})]}),(0,i.tZ)(H,{onCreate:function(e){n(!1),l(e)}})]}):(0,i.tZ)(a.G,{css:Y.item,children:(0,i.tZ)(g.zx,{onClick:function(){return n(!0)},iconLeft:(0,i.tZ)(G.Z,{}),size:"small",text:"New Workflow",variant:"outlined"})})}function ee(){var e=(0,d.e8)();return(0,i.BX)(a.G,{css:Y.root,children:[e.map(function(e){return(0,i.tZ)($,{index:e},e)}),(0,i.tZ)(Q,{})]})}var et=(0,l.X)({wrapper:[c.l0.rowWithGap(8),c.l0.align.center,c.l0.justify.spaceBetween,c.l0.borderRadius(4),c.l0.px(6),c.l0.height(32),h.gU.filled],left:[c.l0.align.center,c.l0.flex.row,c.l0.flex.growAndShrink(1)]});function en(e){var t=(0,d.gG)(),n=(0,s.U)(function(n){return function(){var r,i=null===(r=t())||void 0===r?void 0:r[e];return!!i&&n.workflows.runWorkflow.rpc({workflowId:i.name})}},[t,e]),r=(0,d.iM)(e),i=(0,s.U)(function(e){return function(){var t,n=null===(t=r())||void 0===t?void 0:t.runId;return!!n&&e.workflows.stopRun.rpc({runId:n})}},[r]),o=(0,d.IP)(e);return(0,f.useMemo)(function(){return n&&i?{run:n,stop:i,isRunningObservable:o}:null},[n,i,o])}function er(e){var t=e.index,n=e.onClick,r=(0,d.DW)(t),l=en(t),c=(0,j.Z)(null==l?void 0:l.isRunningObservable);return r?(0,i.BX)(a.G,{css:et.wrapper,children:[(0,i.tZ)(a.G,{css:et.left,onClick:n,children:(0,i.tZ)(o.xv,{children:r.name})}),l?(0,i.tZ)(u.hU,{alt:c?"Stop workflow":"Run workflow",onClick:function(){c?l.stop():l.run()},children:c?(0,i.tZ)(X.Z,{}):(0,i.tZ)(U.Z,{})}):null]}):null}var ei=(0,l.X)({wrapper:[c.l0.p(8),c.l0.colWithGap(8)],list:[c.l0.colWithGap(4)],loading:[c.l0.center,c.l0.p(16)]});function eo(e){(0,d.sA)(e.isActive);var t=(0,r._)((0,f.useState)({type:"list"}),2),n=t[0],o=t[1],l=(0,d.e8)(),c=(0,d.mj)(),s=(0,d.am)();if((0,d.nR)())return(0,i.tZ)(a.G,{css:ei.loading,children:(0,i.tZ)(z.Z,{})});switch(n.type){case"newWorkflow":return(0,i.BX)(a.G,{css:ei.wrapper,children:[(0,i.tZ)(L,{onBack:function(){return o({type:"list"})}}),(0,i.tZ)(H,{onCreate:function(e){o({type:"workflow",index:c(e)})}})]});case"workflow":return(0,i.BX)(a.G,{css:ei.wrapper,children:[(0,i.tZ)(L,{onBack:function(){return o({type:"list"})}}),(0,i.tZ)(O,{index:n.index,onDelete:function(){s(n.index),o({type:"list"})}})]});case"list":return(0,i.BX)(a.G,{css:ei.wrapper,children:[l.length?(0,i.tZ)(a.G,{css:ei.list,children:l.map(function(e){return(0,i.tZ)(er,{index:e,onClick:function(){return o({type:"workflow",index:e})}},e)})}):null,(0,i.tZ)(g.zx,{iconLeft:(0,i.tZ)(G.Z,{}),text:"New Workflow",onClick:function(){o({type:"newWorkflow"})}})]})}}},37493:function(e,t,n){n.d(t,{C:function(){return function e(t,n){if(!["context","action"].includes(t.data.type))throw Error("Command type not supported: "+t.data.type);if("action"===t.data.type)return{match:u.pl,data:{label:t.data.label,description:t.data.description,icon:t.data.iconPath?(0,a.tZ)(s.Z,{src:(0,f.Vh)(t.extension.baseUrl,t.data.iconPath),layout:"fill",alt:""}):(0,a.tZ)(a.HY,{children:" "}),type:"action",run:(0,r._)(function(){var e;return(0,o.Jh)(this,function(n){switch(n.label){case 0:if(!(e=t.run))throw Error("Action command must have run");return[4,e()];case 1:return[2,n.sent()]}})})}};var l,c=t.commands;if(!c)throw Error("Context command must have commands");return{match:u.pl,data:{label:t.data.label,description:t.data.description,icon:t.data.iconPath?(0,a.tZ)(s.Z,{src:(0,f.Vh)(t.extension.baseUrl,t.data.iconPath),layout:"fill",alt:""}):(0,a.tZ)(a.HY,{}),type:t.data.type},commands:(l=(0,r._)(function(r){var a;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return[4,c({active:r.active,searchQuery:r.searchQuery,path:a=(0,i._)(n.path).concat([{data:t.data}])})];case 1:return[2,o.sent().map(function(t){return e(t,{path:a})})]}})}),function(e){return l.apply(this,arguments)})}}},V:function(){return p}});var r=n(27387),i=n(63257),o=n(96583),a=n(3796),l=n(74044),c=n(99149),s=n(11782),u=n(6843),d=n(17546),f=n(80075),h=l.Dy.Object({id:l.Dy.Optional(l.Dy.String()),icon:l.Dy.Optional(l.Dy.String()),type:l.Dy.Union([l.Dy.Literal("action"),l.Dy.Literal("context")]),label:l.Dy.String(),description:l.Dy.String(),contributions:l.Dy.Optional(l.Dy.Array(l.Dy.Enum(d.Y)))});function p(e,t){return m.apply(this,arguments)}function m(){return(m=(0,r._)(function(e,t){var n,i,a;return(0,o.Jh)(this,function(l){switch(l.label){case 0:return[4,e.data];case 1:if(n=l.sent(),!c.B4.Check(h,n))throw Error("Invalid command");if(i=null,"string"==typeof n.icon){if(""===n.icon)throw Error("Command icon cannot be empty. Omit it if you do not want an icon.");i=n.icon}if(a={data:{label:n.label,description:n.description,type:n.type,iconPath:i,id:n.id?n.id:void 0},extension:t.extension},n.contributions&&(a.data.contributions=n.contributions,t.logger.warn("Command ".concat(n.label," uses deprecated contributions field"))),"context"===n.type){var s;a.commands=(s=(0,r._)(function(n){var r,i,a,l,c,s,u,d,f;return(0,o.Jh)(this,function(o){switch(o.label){case 0:r=n.active,i=n.searchQuery,a=n.path,l=null,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,e.commands({active:r,searchQuery:i,path:a})];case 2:return l=o.sent(),[3,4];case 3:return c=o.sent(),t.logger.error(c.message,{commandError:c,api:"command"}),[2,[]];case 4:return[4,l.length];case 5:s=o.sent(),u=[],d=0,o.label=6;case 6:if(!(d<s))return[3,9];return f=u.push,[4,p(l[d],t)];case 7:f.apply(u,[o.sent()]),o.label=8;case 8:return d++,[3,6];case 9:return[2,u]}})}),function(e){return s.apply(this,arguments)})}else a.run=(0,r._)(function(){var n;return(0,o.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,e.run()];case 1:return r.sent(),[2,void 0];case 2:return n=r.sent(),t.logger.error(n.message,{runError:n,api:"command"}),[2,{type:"error",message:n.message}];case 3:return[2]}})});return[2,a]}})})).apply(this,arguments)}},93371:function(e,t,n){n.d(t,{cR:function(){return b},nP:function(){return w},gI:function(){return Z},Sp:function(){return x}});var r=n(66626),i=n(16155),o=n(23882),a=n(50013),l=n(41733),c=n(21262),s=n(71440),u=n(9122),d=n(82303);function f(){var e=(0,c._)(["\n  query ReplConfigIsExtension($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        config {\n          isExtension\n        }\n      }\n    }\n  }\n"]);return f=function(){return e},e}function h(){var e=(0,c._)(["\n  mutation UpdateReplConfigIsExtension(\n    $replId: String!\n    $isExtension: Boolean!\n  ) {\n    updateRepl(input: { id: $replId, isExtension: $isExtension }) {\n      repl {\n        id\n        config {\n          isExtension\n        }\n      }\n    }\n  }\n"]);return h=function(){return e},e}var p={},m=(0,s.Ps)(f()),v=(0,s.Ps)(h()),g=n(75271),y=n(22402);function b(){var e,t=(0,g.useContext)(a.Z),n=(0,r._)((0,g.useState)(null!==(e=null==t?void 0:t.replConfigIsExtension)&&void 0!==e&&e),2),i=n[0],l=n[1],c=(0,o.Z)().dotReplit;return(0,g.useEffect)(function(){return c.watch(function(e){var t,n,r;l(null!==(r=null===(n=e.config)||void 0===n?void 0:null===(t=n.extension)||void 0===t?void 0:t.isExtension)&&void 0!==r&&r)})},[c]),i}function w(){var e=(0,r._)((0,g.useState)(null),2),t=e[0],n=e[1],i=(0,o.Z)().dotReplit;return(0,g.useEffect)(function(){return i.watch(function(e){var t,r,i=null===(r=e.config)||void 0===r?void 0:null===(t=r.extension)||void 0===t?void 0:t.extensionID;i?n((0,y.T8)(i)):n(null)})},[i]),t}var Z=function(){var e=(0,o.Z)().dotReplit,t=(0,r._)((0,g.useState)(null),2),n=t[0],i=t[1];return(0,g.useEffect)(function(){return e.watch(function(e){var t,n,r=null===(n=e.config)||void 0===n?void 0:null===(t=n.extension)||void 0===t?void 0:t.staticDirectory;r?i({path:r,relativePath:r.replace(/^\.\//,"")}):i(null)})},[e]),n};function x(){var e,t,n,a,c=(0,i.Z)(),s=(e=(0,l._)({},p,{variables:{replId:c}}),u.a(m,e)),f=s.data,h=s.loading,y=s.error,b=(0,r._)((t=(0,l._)({},p,void 0),d.D(v,t)),1)[0],w=!h&&!y&&!!(null==f?void 0:f.repl)&&"Repl"===f.repl.__typename&&null!==(a=null===(n=f.repl.config)||void 0===n?void 0:n.isExtension)&&void 0!==a&&a,Z=(0,r._)((0,g.useState)(!1),2),x=Z[0],C=Z[1],k=(0,o.Z)().dotReplit;(0,g.useEffect)(function(){return k.watch(function(e){var t,n,r;C(null!==(r=null===(n=e.config)||void 0===n?void 0:null===(t=n.extension)||void 0===t?void 0:t.isExtension)&&void 0!==r&&r)})},[k]),(0,g.useEffect)(function(){h||y||x===w||b({variables:{replId:c,isExtension:x},optimisticResponse:{__typename:"RootMutationType",updateRepl:{__typename:"UpdateReplPayload",repl:{id:c,__typename:"Repl",config:{__typename:"ReplConfig",isExtension:x}}}}})},[h,y,c,w,x,b])}},82098:function(e,t,n){n.d(t,{LM:function(){return r.LM},Mu:function(){return i.Mu},WF:function(){return r.WF},WG:function(){return i.WG},jx:function(){return i.jx},ot:function(){return r.ot},r9:function(){return i.r9}});var r=n(40536),i=n(78660)},40536:function(e,t,n){n.d(t,{EO:function(){return R},I1:function(){return B},Kf:function(){return I},LM:function(){return T},WF:function(){return E},bN:function(){return S},dI:function(){return D},ot:function(){return _},zm:function(){return G}});var r=n(27387),i=n(41733),o=n(30509),a=n(66626),l=n(96583),c=n(96949),s=n(77537),u=n(23882),d=n(68309),f=n(49853),h=n(19334),p=n.n(h),m=n(75271),v=n(80075),g=n(42825),y=n(22402),b=n(42121),w=n(85234),Z=n.n(w),x=n(60891),C=n(78660),k=n(78918);function S(){var e,t=(0,k.E4)(C.We);return(0,m.useCallback)((e=(0,r._)(function(e){return(0,l.Jh)(this,function(n){return t({installationId:e}),[2]})}),function(t){return e.apply(this,arguments)}),[t])}function _(){var e,t=L(),n=t.throwSystemError,a=t.throwExtensionError,c=(0,k.E4)(C.nk),s=(0,k.ZC)(C.Ol),u=(0,k.Ld)();return(0,m.useCallback)((e=(0,r._)(function(e){var t,r,d,f,h,m,w,Z,k,S,_,E,T,R,D,I,B,G,P,A;return(0,l.Jh)(this,function(l){switch(l.label){case 0:return t=e.installationId,d=void 0===(r=e.forceRefetch)||r,[4,(0,x.Al)()];case 1:if(!(f=l.sent())||f.error)return n({friendlyMessage:"Failed to load user context",error:f.error}),[2];if(h=f.result.userHasInternalApiEnabled,!(m=u.get(C.Lq).find(function(e){return e.installationId===t})))return[3,3];return[4,(0,x.V9)(m.baseUrl)];case 2:if(w=l.sent(),Z=s.createLogger({extensionId:m.extensionId,installationId:m.installationId,local:!0}),w.error)return k=(0,o._)((0,i._)({},m),{manifest:(0,v.fF)(),enableExperimentalApi:!1,enableInternalApi:!1,logger:Z.createLogger({extensionName:"Unnamed Extension"}),isLocal:!0}),s.info("Adding extension: ".concat(k.manifest.name),{extensionArgs:p()(k,["extensionId","installationId","baseUrl","manifest","enableExperimentalApi","enableInternalApi","isLocal"]),local:k.isLocal,error:!0}),c(k),S="Failed to load extension manifest",w.error instanceof b.Jg&&(S=w.error.message),a({extensionId:m.extensionId,installationId:m.installationId,extensionError:{error:w.error,friendlyMessage:S}}),[2];return _=(0,g.MU)(w.result,"experimental-api"),E=(0,o._)((0,i._)({},m),{manifest:w.result,enableExperimentalApi:_,enableInternalApi:h,logger:Z.createLogger({extensionName:w.result.name}),isLocal:!0}),s.info("Adding extension: ".concat(E.manifest.name),{extensionArgs:p()(E,["extensionId","installationId","baseUrl","manifest","enableExperimentalApi","enableInternalApi","isLocal"]),local:!0}),c(E),[3,5];case 3:return[4,(0,x.mr)(t,d)];case 4:if((T=l.sent()).error)return n({friendlyMessage:"Something went wrong while downloading an extension",error:T.error}),[2];if(!(R=T.result))return n({friendlyMessage:"Extension failed to install",error:Error("Expected installation to be defined")}),[2];if(!(D=R.extension))return n({friendlyMessage:"Extension failed to install",error:Error("Expected extension to be defined")}),[2];if(!D.manifest)return a({extensionId:(0,y.T8)(D.id),installationId:(0,y.Ad)(R.id),extensionError:{friendlyMessage:"Extension failed to install",error:Error("Expected extension manifest to be defined")}}),[2];if("ExtensionManifestError"===D.manifest.__typename)return a({extensionId:(0,y.T8)(D.id),installationId:(0,y.Ad)(R.id),extensionError:{friendlyMessage:"An error occurred while loading the extension manifest: ".concat(D.manifest.message),error:Error(D.manifest.message)}}),[2];if(!D.manifest||"ExtensionManifest"!==D.manifest.__typename)return a({extensionId:(0,y.T8)(D.id),installationId:(0,y.Ad)(R.id),extensionError:{friendlyMessage:"An error occurred while loading the extension manifest",error:Error("Expected extension manifest to be defined")}}),[2];return I=(0,v.tr)(D.manifest),B=(0,g.MU)(I,"experimental-api"),G=(0,y.T8)(D.id),P=D.enableInternalApi,A={extensionId:G,installationId:t,manifest:I,baseUrl:(0,v.BY)(D.url),enableExperimentalApi:B,enableInternalApi:h||P,logger:s.createLogger({extensionId:G,installationId:t,extensionName:I.name,local:!1}),isLocal:!1},s.info("Adding extension: ".concat(A.manifest.name),{extensionArgs:p()(A,["extensionId","installationId","baseUrl","manifest","enableExperimentalApi","enableInternalApi","isLocal"]),local:!1}),c(A),[2,R];case 5:return[2]}})}),function(t){return e.apply(this,arguments)}),[c,a,n,u,s])}function E(){var e,t=_(),n=L().throwSystemError;return(0,m.useCallback)((e=(0,r._)(function(e){var r,i,o,a,s;return(0,l.Jh)(this,function(l){switch(l.label){case 0:return r=e.extensionId,i=e.replId,[4,(0,x.Wc)({extensionId:r,replId:i})];case 1:if((s=l.sent()).error)return n({error:s.error,friendlyMessage:"Something went wrong while installing an extension"}),[2];return(0,c.j)(c.U3.EXTENSION_INSTALLED,{name:null===(a=s.result)||void 0===a?void 0:null===(o=a.extension)||void 0===o?void 0:o.name,extensionId:r}),[4,t({installationId:(0,y.Ad)(s.result.id)})];case 2:return l.sent(),[2,s.result]}})}),function(t){return e.apply(this,arguments)}),[t,n])}function T(){var e,t=S(),n=(0,k.Ld)(),i=L().throwSystemError;return(0,m.useCallback)((e=(0,r._)(function(e){var r,o,a;return(0,l.Jh)(this,function(l){switch(l.label){case 0:if(r=e.installationId,o=e.replId,!(a=n.get(C._t).find(function(e){return e.installationId===r})))return i({friendlyMessage:"Extension appears to be already uninstalled",error:Error("Expected extension to be defined")}),[2];if(!a.installationId||!a.extensionId)return i({friendlyMessage:"Failed to uninstall extension",error:Error("Expected installationId to be defined")}),[2];return(0,c.j)(c.U3.EXTENSION_UNINSTALLED,{name:a.manifest.name,extensionId:a.extensionId}),[4,(0,x.Y4)({installationId:a.installationId,replId:o})];case 1:return l.sent(),[4,t(a.installationId)];case 2:return l.sent(),[2]}})}),function(t){return e.apply(this,arguments)}),[t,n,i])}function R(){var e,t=S(),n=_();return(0,m.useCallback)((e=(0,r._)(function(e){return(0,l.Jh)(this,function(r){switch(r.label){case 0:return[4,t(e)];case 1:return r.sent(),[4,n({installationId:e,forceRefetch:!0})];case 2:return r.sent(),[2]}})}),function(t){return e.apply(this,arguments)}),[t,n])}function D(){var e,t,n,i,o=(e=_(),t=(0,k.ZC)(C.Ol),n=L().throwSystemError,(0,m.useCallback)((i=(0,r._)(function(r){var i,o,a,c,s,u,d,f,h,p;return(0,l.Jh)(this,function(l){switch(l.label){case 0:return[4,(0,x.Zw)(r)];case 1:if((i=l.sent()).error)return n({friendlyMessage:"Failed to load installed extensions",error:i.error}),[2];o=!0,a=!1,c=void 0,l.label=2;case 2:l.trys.push([2,9,10,11]),s=i.result[Symbol.iterator](),l.label=3;case 3:if(o=(u=s.next()).done)return[3,8];if(null===(f=(d=u.value).extension)||void 0===f?void 0:f.isDisabled)return t.info("Skipping disabled extension: ".concat(d.extension.name),{extension:!0,extensionId:d.extension.id,installationId:d.id}),[3,7];l.label=4;case 4:return l.trys.push([4,6,,7]),[4,e({installationId:(0,y.Ad)(d.id),forceRefetch:!0})];case 5:return l.sent(),[3,7];case 6:return h=l.sent(),t.error("Extension Loading error: ".concat(h.message),{extension:!0,errors:h.message}),[3,7];case 7:return o=!0,[3,3];case 8:return[3,11];case 9:return p=l.sent(),a=!0,c=p,[3,11];case 10:try{o||null==s.return||s.return()}finally{if(a)throw c}return[7];case 11:return[2]}})}),function(e){return i.apply(this,arguments)}),[e,n,t])),c=(0,k.E4)(C.Ol),s=(0,k.E4)(C.zk),u=(0,a._)((0,m.useState)(!1),2),f=u[0],h=u[1],p=(0,a._)((0,m.useState)(null),2),v=p[0],g=p[1],b=(0,a._)((0,m.useState)(null),2),w=b[0],Z=b[1];return(0,m.useEffect)(function(){if(v&&w&&!f){var e=v.replId;h(!0),o(e)}},[v,w,o,f]),(0,m.useCallback)(function(e){var t=e.replId,n=e.userId;if(!f){g({replId:t,userId:n});var r=(0,d.Z)({extension:!0,isInitialized:!0,replId:t,userId:n},{onLog:function(e){s(e)}});Z(r),c(r)}},[c,f,s])}function I(){var e,t=_(),n=(0,C.qr)(),i=(0,C.Mu)(),o=(0,k.E4)(C.ot);return(0,m.useCallback)((e=(0,r._)(function(e){var r,a;return(0,l.Jh)(this,function(l){return r=(0,v.BY)(e),(a=n.find(function(e){return e.baseUrl===r}))||o(a={extensionId:(0,y.T8)(Z()()),installationId:(0,y.Ad)(Z()()),baseUrl:r}),i.find(function(e){return e.extensionId===(null==a?void 0:a.extensionId)})||t({installationId:a.installationId}),[2]})}),function(t){return e.apply(this,arguments)}),[n,i,o,t])}function B(){var e=(0,u.Z)().container,t=(0,s.Z)(e),n=(0,k.E4)(C.M1),i=(0,k.Ld)(),o=_();return(0,m.useCallback)((0,r._)(function(){var e;return(0,l.Jh)(this,function(r){switch(r.label){case 0:if(!t)return[2];return[4,o({installationId:(e=n(t)).installationId,forceRefetch:!0})];case 1:return r.sent(),[2,i.get(C._t).find(function(t){return t.installationId===e.installationId})]}})}),[t,n,o,i])}function G(){var e=(0,u.Z)().container,t=(0,s.Z)(e),n=(0,k.E4)(C.M1),r=(0,C.Mu)();return(0,m.useMemo)(function(){if(t){var e=n(t);return r.find(function(t){return e.installationId===t.installationId})}},[t,r,n])}var P=(0,f.cn)(null,function(e,t,n){var r=e(C.Ol);t(C.wQ,n),r.error("Extension System Error: ".concat(n.error.message),{extensionSystem:!0,originalError:n.error.message,friendlyMessage:n.friendlyMessage})}),A=(0,f.cn)(null,function(e,t,n){var r=e(C._t),i=e(C.Ol),o=r.find(function(e){return e.extensionId===n.extensionId});if(i.error("Extension Error: ".concat(n.extensionError.friendlyMessage),{extension:!0,extensionId:n.extensionId,originalError:n.extensionError.error.message,friendlyMessage:n.extensionError.friendlyMessage}),!o){t(C.nk,{extensionId:n.extensionId,installationId:n.installationId,manifest:(0,v.fF)({name:n.extensionId}),baseUrl:"",enableExperimentalApi:!1,enableInternalApi:!1,logger:i.createLogger({extensionId:n.extensionId,extensionName:n.extensionId,installationId:n.installationId,local:void 0}),isLocal:null}),t(C.f4,{extensionId:n.extensionId,extensionError:n.extensionError});return}t(C.f4,{extensionId:n.extensionId,extensionError:n.extensionError})});function L(){return{throwSystemError:(0,k.E4)(P),throwExtensionError:(0,k.E4)(A)}}},60891:function(e,t,n){n.d(t,{Al:function(){return b},V9:function(){return g},Wc:function(){return s},Y4:function(){return d},Zw:function(){return m},mr:function(){return h}});var r=n(27387),i=n(96583),o=n(38242),a=n(68216),l=n(80075),c=n(44510);function s(e){return u.apply(this,arguments)}function u(){return(u=(0,r._)(function(e){var t,n,r,a,l;return(0,i.Jh)(this,function(i){switch(i.label){case 0:if(t=e.extensionId,n=e.replId,!o.l)return[2,{error:Error("expected apolloClient to be initialized"),result:null}];return[4,o.l.mutate({mutation:c.aq,variables:{extensionId:t,replId:n}})];case 1:if((a=i.sent()).errors&&a.errors.length>0)return[2,{error:Error("Error when installing extension: "+a.errors.map(function(e){return e.message}).join(", ")),result:null}];if(!(l=null===(r=a.data)||void 0===r?void 0:r.installExtension))return[2,{error:Error("Error when installing extension: expected result"),result:null}];if((null==l?void 0:l.__typename)==="UnauthorizedError"||(null==l?void 0:l.__typename)==="UserError")return[2,{error:Error("Error when installing extension: "+l.message),result:null}];if(!l.extension)return[2,{error:Error("Error when installing extension: expected extension to be set"),result:null}];if(!l.extension.url)return[2,{error:Error("Error when installing extension: Extension does not have a URL and cannot be installed"),result:null}];return[2,{result:l,error:null}]}})})).apply(this,arguments)}function d(e){return f.apply(this,arguments)}function f(){return(f=(0,r._)(function(e){var t,n,r,a,l;return(0,i.Jh)(this,function(i){switch(i.label){case 0:if(t=e.installationId,n=e.replId,!o.l)return[2,{error:Error("expected apolloClient to be initialized"),result:null}];return[4,o.l.mutate({mutation:c.jF,variables:{installationId:t,replId:n}})];case 1:if((a=i.sent()).errors&&a.errors.length>0)return[2,{error:Error("Error when uninstalling extension: "+a.errors.map(function(e){return e.message}).join(", ")),result:null}];if(!(l=null===(r=a.data)||void 0===r?void 0:r.uninstallExtension))return[2,{error:Error("Error when uninstalling extension: expected result"),result:null}];if((null==l?void 0:l.__typename)==="NotFoundError"||(null==l?void 0:l.__typename)==="UserError")return[2,{error:Error("Error when uninstalling extension: "+l.message),result:null}];return[2,{result:l,error:null}]}})})).apply(this,arguments)}function h(e){return p.apply(this,arguments)}function p(){return(p=(0,r._)(function(e){var t,n,r=arguments;return(0,i.Jh)(this,function(i){switch(i.label){case 0:if(t=r.length>1&&void 0!==r[1]&&r[1],!o.l)return[2,{error:Error("expected apolloClient to be initialized"),result:null}];return[4,o.l.query({query:c.AR,variables:{installationId:e},fetchPolicy:t?"network-only":"cache-first"})];case 1:if("ExtensionInstallation"!==(n=i.sent().data.extensionInstallationById).__typename)return[2,{error:Error("Expected to find extension installation"),result:null}];if(!n.extension)return[2,{error:Error("Expected installation.extension"),result:null}];return[2,{result:n,error:null}]}})})).apply(this,arguments)}function m(e){return v.apply(this,arguments)}function v(){return(v=(0,r._)(function(e){var t;return(0,i.Jh)(this,function(n){switch(n.label){case 0:if(!o.l)return[2,{error:Error("expected apolloClient to be initialized"),result:null}];return[4,o.l.query({query:c.Ve,variables:{replId:e}})];case 1:if("ExtensionInstallationList"!==(t=n.sent().data.extensionInstallations).__typename)return[2,{error:Error("Expected to find ExtensionInstallationList"),result:null}];return[2,{result:t.installations,error:null}]}})})).apply(this,arguments)}function g(e){return y.apply(this,arguments)}function y(){return(y=(0,r._)(function(e){var t,n,r,o,c;return(0,i.Jh)(this,function(i){switch(i.label){case 0:t=(0,l.BP)(e),i.label=1;case 1:return i.trys.push([1,4,,5]),[4,fetch(t)];case 2:return[4,i.sent().text()];case 3:if(n=i.sent(),r=a.ku(n),(o=(0,l.U4)(r)).error)return[2,{error:o.error,result:null}];return[2,{result:o.manifest,error:null}];case 4:if("SyntaxError"===(c=i.sent()).name)return[2,{error:Error("Error when fetching manifest: invalid JSON"),result:null}];return[2,{error:Error("Error when fetching manifest: "+c.message),result:null}];case 5:return[2]}})})).apply(this,arguments)}function b(){return w.apply(this,arguments)}function w(){return(w=(0,r._)(function(){var e;return(0,i.Jh)(this,function(t){switch(t.label){case 0:if(!o.l)return[2,{error:Error("expected apolloClient to be initialized"),result:null}];return[4,o.l.query({query:c.LF,fetchPolicy:"cache-first"})];case 1:if(!(e=t.sent().data.currentUser)||"CurrentUser"!==e.__typename)return[2,{error:Error("Expected to find CurrentUser"),result:null}];return[2,{result:{userHasInternalApiEnabled:e.isAdmin||e.isStaff},error:null}]}})})).apply(this,arguments)}},78660:function(e,t,n){n.d(t,{Lq:function(){return C},M1:function(){return G},Mu:function(){return X},Ol:function(){return S},UB:function(){return T},UT:function(){return R},WG:function(){return V},We:function(){return P},_K:function(){return L},_t:function(){return x},c_:function(){return W},ep:function(){return D},f4:function(){return A},jx:function(){return M},nk:function(){return I},ot:function(){return B},qr:function(){return z},r9:function(){return F},s6:function(){return H},wQ:function(){return k},zk:function(){return E}});var r,i,o,a=n(27387),l=n(41733),c=n(30509),s=n(66626),u=n(63257),d=n(96583),f=n(83059),h=n(68309),p=n(41974),m=n(49853),v=n(35554),g=n.n(v),y=n(22402),b=n(85234),w=n.n(b),Z=n(78918),x=(0,m.cn)([]),C=(0,m.cn)([]),k=(0,m.cn)(null),S=(0,m.cn)((0,h.Z)({extension:!0,isInitialized:!1},{onLog:function(){throw Error("Logged before extension system was initialized.")}})),_=(0,m.cn)([]),E=(0,m.cn)(null,function(e,t,n){var r=e(_);t(_,(0,p.Uy)(r,function(e){e.push((0,p.Uy)(n,function(t){t.index=e.length})),e.length>1e3&&e.splice(0,e.length-1e3)}))}),T=(0,m.cn)(null,function(e,t){t(_,[])}),R=(0,m.cn)("local:true"),D=(0,m.cn)(function(e){var t=e(_),n=e(R);if(!n)return t;var r=n.split(" ").map(function(e){var t=(0,s._)(e.split(":"),2),n=t[0],r=t[1];return n&&void 0===r?function(e){return e.message.toLowerCase().includes(n.toLowerCase())}:n&&""===r?function(e){return void 0!==g()(e,n)}:n&&r?function(e){try{return String(g()(e,n))===r}catch(e){return!1}}:null}).filter(function(e){return null!==e});return t.filter(function(e){return r.every(function(t){return t(e)})})}),I=(0,m.cn)(null,(r=(0,a._)(function(e,t,n){return(0,d.Jh)(this,function(r){if(e(x).find(function(e){return e.extensionId===n.extensionId}))throw Error("Extension already loaded");return t(x,function(e){return(0,p.Uy)(e,function(e){var t,r,i,o,a,l,c,s,u=(r=n.baseUrl,i=n.extensionId,o=n.installationId,a=n.manifest,l=n.enableExperimentalApi,c=n.enableInternalApi,s=n.logger,{baseUrl:r,extensionId:i,installationId:o,manifest:a,isLocal:n.isLocal,stateAtom:(0,m.cn)({error:null,panes:[],scopes:new Set(null===(t=a.scopes)||void 0===t?void 0:t.map(function(e){return e.name})),enableExperimentalApi:l,enableInternalApi:c,commands:new Map}),logger:s});e.push(u)})}),[2]})}),function(e,t,n){return r.apply(this,arguments)})),B=(0,m.cn)(null,(i=(0,a._)(function(e,t,n){return(0,d.Jh)(this,function(r){if(e(C).find(function(e){return e.extensionId===n.extensionId||e.installationId===n.installationId||e.baseUrl===n.baseUrl}))throw Error("Extension already loaded");return t(C,function(e){return(0,p.Uy)(e,function(e){e.push(n)})}),[2]})}),function(e,t,n){return i.apply(this,arguments)})),G=(0,m.cn)(null,function(e,t,n){var r=e(C).find(function(e){return e.baseUrl===n});if(r)return r;var i={baseUrl:n,extensionId:(0,y.T8)(w()()),installationId:(0,y.Ad)(w()())};return t(C,function(e){return(0,p.Uy)(e,function(e){e.push(i)})}),i}),P=(0,m.cn)(null,(o=(0,a._)(function(e,t,n){return(0,d.Jh)(this,function(e){return t(x,function(e){return(0,p.Uy)(e,function(e){var t=e.findIndex(function(e){return"extensionId"in n?e.extensionId===n.extensionId:e.installationId===n.installationId});-1!==t&&e.splice(t,1)})}),[2]})}),function(e,t,n){return o.apply(this,arguments)})),A=(0,m.cn)(null,function(e,t,n){var r=e(x).find(function(e){return e.extensionId===n.extensionId});if(!r)throw Error("Extension not found");t(r.stateAtom,function(e){return(0,p.Uy)(e,function(e){e.error=n.extensionError})})}),L=(0,m.cn)(null,function(e,t,n){var r=n.createCommand.id;if(!n.createCommand.id)throw Error("Expected createCommand to have id");if(!n.createCommand.contributions)throw Error("Expected createCommand to have contributions");t(n.extensionStateAtom,function(e){return(0,p.Uy)(e,function(e){e.commands.set(r,n.createCommand)})})}),N=(0,m.cn)(function(e){return e(x).flatMap(function(t){return(0,u._)(e(t.stateAtom).commands.values())})}),O=(0,m.cn)(function(e){return e(x).map(function(e){var t;return null===(t=e.manifest.fileHandlers)||void 0===t?void 0:t.map(function(t){return(0,c._)((0,l._)({},t),{extension:e})})}).flat().filter(function(e){return!!e})}),U=(0,m.cn)(function(e){return e(x).map(function(e){var t;return null===(t=e.manifest.tools)||void 0===t?void 0:t.map(function(t){return(0,c._)((0,l._)({},t),{extension:e})})}).flat().filter(function(e){return!!e})});function X(){return(0,Z.ZC)(x)}function M(e){return X().find(function(t){return t.installationId===e})}function F(e){var t=M(e);return t&&e?t.stateAtom:null}function W(){return(0,Z.ZC)(O)}function V(){return(0,Z.ZC)(U)}function H(e){var t=(0,Z.ZC)(N);return(0,f.Z)(function(){return t.filter(function(t){return t.contributions.includes(e)})},[t,e])}function z(){return(0,Z.ZC)(C)}},78918:function(e,t,n){n.d(t,{E4:function(){return f},Ld:function(){return s},OA:function(){return u},Wv:function(){return h},ZC:function(){return d}});var r=n(66626),i=n(3796),o=n(49853),a=n(80786),l=n(75271),c=(0,l.createContext)(null);function s(){return function(){var e=(0,l.useContext)(c);if(!e)throw Error("Expected extensions context");return e}().store}var u=function(e){var t=s();return(0,a.KO)(e,{store:t})};function d(e){var t=s();return(0,a.Dv)(e,{store:t})}var f=function(e){var t=s();return(0,a.b9)(e,{store:t})};function h(e){var t=e.children,n=(0,r._)((0,l.useState)(function(){return(0,o.MT)()}),1)[0];return(0,i.tZ)(c.Provider,{value:{store:n},children:t})}},17546:function(e,t,n){var r,i;n.d(t,{Y:function(){return r}}),(i=r||(r={})).CommandBar="commandbar",i.FiletreeContextMenu="filetree-context-menu",i.SidebarSearch="sidebar-search",i.EditorContextMenu="editor-context-menu"},68309:function(e,t,n){n.d(t,{Z:function(){return function e(t,n){var r=function(e){var r,i,l,s,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{logLevel:"debug"},h=null!==(r=(i={},(0,o._)(i,"debug",c.kg.debug),(0,o._)(i,"warn",c.kg.warn),(0,o._)(i,"info",c.kg.info),(0,o._)(i,"error",c.kg.error),i)[f.logLevel])&&void 0!==r?r:c.kg.debug;(null!==(l=(s={},(0,o._)(s,"debug",d.debug),(0,o._)(s,"warn",d.warn),(0,o._)(s,"info",d.info),(0,o._)(s,"error",d.error),s)[f.logLevel])&&void 0!==l?l:d.debug)(e,f),h(e,u()((0,a._)({},f,t),["replId","logLevel"])),n.onLog((0,a._)({message:e},f,t))};return{context:t,info:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(e,(0,l._)((0,a._)({},t),{logLevel:"info"}))},warn:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(e,(0,l._)((0,a._)({},t),{logLevel:"warn"}))},error:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r(e,(0,l._)((0,a._)({},t),{logLevel:"error"}))},createLogger:function(r){return e((0,a._)({},t,r),n)}}}},i:function(){return i}});var r,i,o=n(42516),a=n(41733),l=n(30509),c=n(10777),s=n(59245),u=n.n(s),d=n(49500);(r=i||(i={})).debug="debug",r.info="info",r.warn="warn",r.error="error"},36827:function(e,t,n){n.d(t,{L:function(){return u}});var r=n(31417),i=n(27387),o=n(66626),a=n(96583),l=n(40703),c=n(14118),s=n(1053);function u(e){var t,n=(0,c.P5)({controlName:"flag-porygon-button",logFlagToAnalytics:!1});(0,l.C)((t=(0,i._)(function(t,i){var l,c,u,d,f,h,p,m,v,g,y,b;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(l=i.addCleanup,!n)return[2];return[4,t.agentToolRun.workspace.stream({})];case 1:u=(c=o._.apply(void 0,[a.sent(),3]))[0],d=c[1],f=c[2],l(f),h=!1,p=!1,a.label=2;case 2:a.trys.push([2,8,9,14]),v=(0,r._)(d),a.label=3;case 3:return[4,v.next()];case 4:if(!(h=!(g=a.sent()).done))return[3,7];if(!(y=g.value).ok||"run"!==y.payload.$kind)return[3,6];return e.getRunState()===s.Ah.RUNNING&&e.stopRun(),[4,e.run()];case 5:a.sent(),u.push({$kind:"ok"}),a.label=6;case 6:return h=!1,[3,3];case 7:return[3,14];case 8:return b=a.sent(),p=!0,m=b,[3,14];case 9:if(a.trys.push([9,,12,13]),!(h&&null!=v.return))return[3,11];return[4,v.return()];case 10:a.sent(),a.label=11;case 11:return[3,13];case 12:if(p)throw m;return[7];case 13:return[7];case 14:return[2]}})}),function(e,n){return t.apply(this,arguments)}),[n,e])}},28365:function(e,t,n){n.d(t,{Cl:function(){return a},VD:function(){return d},uN:function(){return u}});var r=n(49853),i=n(80786),o=n(75271),a=(0,o.createContext)(null),l=(0,r.cn)(null),c=(0,r.cn)(null,function(e,t,n){t(l,n)});function s(){var e=(0,o.useContext)(a);if(!e)throw Error("Expected store in context");return e}function u(){return(0,i.Dv)(l,{store:s()})}function d(e){var t=(0,i.Dv)(l,{store:s()}),n=(0,i.b9)(c,{store:s()});(0,o.useEffect)(function(){t!==e&&n(e)},[e,t,n])}},12379:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(23882),i=n(75271),o=n(35370),a=n(14118),l=n(58988);function c(e){var t=(0,r.Z)().fs,n=(0,a.P5)({controlName:"flag-draft-buffers"}),c=(0,l.Qk)(),s=(0,i.useCallback)(function(r,i){var a=r.code,l=r.insertAt,s=r.newLine,u=void 0===s||s;if(!e||(0,o.T3)(e)||(0,o.sL)(e)||(0,o.IQ)(e)||(0,o.hj)(e))throw Error("Invalid file, this should never happen");if(0!==a.length)var d=t.watchTextFile(e,{onReady:function(r){var o=r.initialContent,s=r.writeChange,f=o.toString(),h="end"===l?f.length:l,p=a;u&&(0!==h&&h!==f.length&&-1===(h=f.indexOf("\n",h))&&(h=f.length),0!==h&&"\n"!==f[h-1]&&(p="\n"+p),"\n"!==f[h]&&(p+="\n")),s({from:h,insert:p},i),!n||c?t.flush(new Set([e])).finally(function(){d()}):d()}})},[e,t,n,c]);return!e||(0,o.T3)(e)||(0,o.sL)(e)||(0,o.IQ)(e)||(0,o.hj)(e)?null:s}},31321:function(e,t,n){n.d(t,{Z:function(){return b}});var r=n(27387),i=n(66626),o=n(63257),a=n(96583),l=n(46074),c=n(96949),s=n(23882),u=n(73660),d=n(65559),f=n(75271),h=n(35370),p=n(73878),m=n(76881),v=n(27030),g=n(14118),y=n(58988);function b(e){var t,n,b,w=e.moveOrDeleteFile,Z=(0,s.Z)().fs,x=(0,u.K)(),C=(0,f.useRef)(new Map),k=(0,d.ex)(),S=(0,i._)((0,f.useState)(!1),2),_=S[0],E=S[1],T=(0,i._)((0,f.useState)(!1),2),R=T[0],D=T[1],I=(0,i._)((0,f.useState)([]),2),B=I[0],G=I[1],P=(0,v.k)(),A=(0,m.uV)(),L=(0,g.P5)({controlName:"flag-draft-buffers"}),N=(0,y.Qk)(),O=B.map(function(e){return e.path}).map(function(e){return{title:e,path:e}}),U=(0,i._)((0,f.useState)(),2),X=U[0],M=U[1],F=(0,d.ZB)();(0,f.useEffect)(function(){if(!(!k||C.current.has(k))){var e=function(e){var t=e.node.path;F(e.eventType===p.kS.Move?{path:t,type:"move",to:e.to}:{path:t,type:"delete"}),w&&w(e),C.current.delete(k),G(function(e){return e.filter(function(e){return e.path!==k})})};(0,h.Mb)(k)?Z.watchTextFile(k,{onMoveOrDelete:e,onError:function(e,t){e.code||((!L||N)&&Z.flush(),Z.persist({skipDebounce:!0}),A({error:e,extras:t,tags:{ot:!0},origin:"useContentsDiverged: fs.watchTextFile"}))},onReconnectFail:function(e,t){G(function(n){return(0,o._)(n.filter(function(e){return e.path!==k})||[]).concat([{path:k,prompt:t,cb:e}])}),x("user:ot:diverged",{path:k,divergence:t}),E(!0),X||M(k)}}):Z.watchFile(k,{onChange:function(){},onMoveOrDelete:e}),C.current.set(k,!0)}},[k,Z,A,w,X,x,F,N,L]);var W=(t=(0,r._)(function(e){return(0,a.Jh)(this,function(t){switch(t.label){case 0:return(0,c.j)(c.U3.FILE_RECONNECT_FALLBACK_CHOSEN,{choice:e}),(0,c.j)(c.U3.CONTENTS_DIVERGED_ACTION,{action:"local"===e?"client":"server"}),D(!0),[4,Promise.all(B.map(function(t){return G(function(e){var n=e.filter(function(e){return e.path!==t.path});return 0===n.length?E(!1):M(n[0].path),n}),t.cb(e)}))];case 1:return t.sent(),D(!1),[2]}})}),function(e){return t.apply(this,arguments)}),V=X?B.find(function(e){return e.path===X}):null,H=null==V?void 0:V.prompt,z=(0,l.J)({left:{code:null!==(n=null==H?void 0:H.localContent)&&void 0!==n?n:"",filePath:X},right:{code:null!==(b=null==H?void 0:H.remoteContent)&&void 0!==b?b:"",filePath:X}});return{isConverging:R,didContentsDiverge:_,showMoreDetail:P,failedFiles:B,failedFilesOptions:O,selectedFile:X,setSelectedFile:M,reviewingPrompt:H,onChoice:W,local:z.left,remote:z.right}}},47523:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(66626),i=n(37782),o=n(65117),a=n(23882),l=n(75271);function c(){var e=(0,a.Z)().container,t=(0,o.Z)(e),n=(0,r._)((0,l.useState)(!1),2),c=n[0],s=n[1];return((0,l.useEffect)(function(){t===i.em.CONNECTED&&s(!0)},[t]),c)?{didConnectOnce:c,didDisconnect:t!==i.em.CONNECTED}:{didConnectOnce:!1,didDisconnect:!1}}},14423:function(e,t,n){n.d(t,{$q:function(){return eu},FL:function(){return em}});var r,i,o,a=n(31417),l=n(27387),c=n(42516),s=n(66626),u=n(63257),d=n(96583),f=n(25722),h=n(99595),p=n(16155),m=n(10777),v=n(52657),g=n(4041),y=n(75271),b=n(23882),w=n(9583),Z=n(41733),x=n(33859),C=n.n(x),k=n(21262),S=n(71440),_=n(76143);function E(){var e=(0,k._)(["\n  query WorkspacePatchDotReplitRepl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        rootOriginReplUrl\n      }\n    }\n  }\n"]);return E=function(){return e},e}var T={},R=(0,S.Ps)(E()),D=function(e,t){return{op:"add",path:e,value:JSON.stringify(t)}},I=new Map([["hintsList","hints"]]);function B(){return(B=(0,l._)(function(e){var t,n,r,i,o,a,c,u,f,h,p,m,v,g,y;function b(){return w.apply(this,arguments)}function w(){return(w=(0,l._)(function(){var e,n,o;return(0,d.Jh)(this,function(a){switch(a.label){case 0:if(!(e="object"==typeof r.env?r.env:null)||0===Object.keys(e).length)return[2];return o=(n="object"==typeof i.env?i.env:null)?(0,Z._)({},e,n):e,[4,t.updateDotReplit([D("env",o)])];case 1:return a.sent(),[2]}})})).apply(this,arguments)}function x(){return C.apply(this,arguments)}function C(){return(C=(0,l._)(function(){var e,o,a,l;return(0,d.Jh)(this,function(c){switch(c.label){case 0:if(null===(e=i.nix)||void 0===e?void 0:e.channel)return[2];if(null==r?void 0:null===(o=r.nix)||void 0===o?void 0:o.channel)return[3,2];return[4,n.getLatestStableChannel()];case 1:if(!(l=c.sent()).channel)return[2];return a=l.channel,[3,3];case 2:a=r.nix.channel,c.label=3;case 3:return[4,t.updateDotReplit([D("nix/channel",a)])];case 4:return c.sent(),[2]}})})).apply(this,arguments)}function k(){return(k=(0,l._)(function(e){var n,o,a,l,c;return(0,d.Jh)(this,function(s){switch(s.label){case 0:if(o=!!(n=i[e]),Array.isArray(n)?o=n.length>0:n&&"object"==typeof n&&(o=Object.keys(n).length>0),l=null!==(a=I.get(e))&&void 0!==a?a:e,o||!r[l])return[2];return c=D(l,r[l]),[4,t.updateDotReplit([c])];case 1:return s.sent(),[2]}})})).apply(this,arguments)}return(0,d.Jh)(this,function(l){switch(l.label){case 0:t=e.dotReplit,n=e.nixService,r=e.templateConfig,i=e.config,o=[],a={entrypoint:"entrypoint config",hidden:"hidden files config",audio:"audio config",run:"run command",refreshWebViewOnFileChange:"webview refresh config",language:"language config",onBoot:"onBoot command",languages:"languages config",compile:"compile command",debugger:"debugger config",packager:"packager config",interpreter:"interpreter config",unitTest:"unit test config",nix:x,env:b,hosting:"hosting config",gitHubImport:"GitHub import config",auth:"Repl Auth config",hintsList:"Hints config",ports:"Ports config",deployment:"deployment config",orderedEnv:null,modules:"nix modules config",extension:"extension config",rules:"rules config",suggestions:"suggestions config",objectStorage:"object storage config",autoSave:"autosave config"},c=[],u=!0,f=!1,h=void 0;try{for(p=Object.entries(a)[Symbol.iterator]();!(u=(m=p.next()).done);u=!0)g=(v=(0,s._)(m.value,2))[0],y=v[1],null!==y&&("function"==typeof y?c.push(y()):c.push(function(e){return k.apply(this,arguments)}(g)))}catch(e){f=!0,h=e}finally{try{u||null==p.return||p.return()}finally{if(f)throw h}}return[4,Promise.all(c)];case 1:return l.sent(),[2,o]}})})).apply(this,arguments)}var G=n(70694),P=n(70993),A=n(72106),L=n(73878),N=n(9122),O=n(82303);function U(){var e=(0,k._)(["\n  query WorkspaceDoGitHubImportFlow($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        config {\n          gitRemoteUrl\n          doClone\n        }\n        slug\n      }\n    }\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n      }\n      username\n    }\n  }\n"]);return U=function(){return e},e}function X(){var e=(0,k._)(["\n  mutation WorkspaceDoGitHubImportFlowFinishClone($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        config {\n          doClone\n        }\n      }\n    }\n  }\n"]);return X=function(){return e},e}function M(){var e=(0,k._)(["\n  query GitHubImportRootOriginReplUrl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        rootOriginReplUrl\n      }\n    }\n  }\n"]);return M=function(){return e},e}function F(){var e=(0,k._)(["\n  query GitHubImportGetTopLanguages($input: GitHubRepoInfoInput!) {\n    githubRepoInfo(input: $input) {\n      ... on GitHubRepoInfoOutput {\n        topLanguages\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n"]);return F=function(){return e},e}var W={},V=(0,S.Ps)(U()),H=(0,S.Ps)(X());M();var z=(0,S.Ps)(F()),j=n(7391),q=n(40490),J=n(35370),Y=n(96949),$=n(70882),K=n(14118),Q=n(27069),ee=n(56091),et=n(95088),en=n.n(et),er=n(91823),ei=n.n(er),eo={14:"nodejs-14",16:"nodejs-16",18:"nodejs-18",19:"nodejs-19",20:"nodejs-20"},ea={bash:"bash",basic:"qbasic",nix:"nix",clojure:"clojure-1.11","c++":"cpp-clang14",c:"c-clang14","c#":"dotnet-7.0",dart:"dart-3.3",deno:"deno-1",elixir:"elixir-1_15","f#":"dotnet-7.0",go:"go-1.21",haskell:"haskell-ghc9.4",html:"web",css:"web",shell:"bash",java:"java-graalvm22.3",lua:"lua-5.2",nodejs:"nodejs-20",php:"php-8.2",python:{"3.8":"python-3.8","3.10":"python-3.10","3.11":"python-3.11","3.12":"python-3.12"},r:"r-4.3",rust:"rust-stable",ruby:"ruby-3.2",swift:"swift-5.8",typescript:eo,javascript:eo,vue:{18:"vue-node-18",20:"vue-node-20"}};function el(e,t){if(void 0===e)return!1;if(void 0===t)return!0;var n=ei()(e);if(null===n)return!1;var r=ei()(t);return null===r||en()(n,r)}var ec=n(67827),es=n(37475);(r=i||(i={})).PreparingRepl="preparingRepl",r.GitInit="gitInit",r.GitRemoteAdd="gitRemoteAdd",r.CheckoutBranch="checkoutBranch",r.TidyingFiles="tidyingFiles",r.Done="done";var eu=(o={},(0,c._)(o,"preparingRepl","Preparing Repl"),(0,c._)(o,"gitInit","Initializing Git"),(0,c._)(o,"gitRemoteAdd","Adding Remote"),(0,c._)(o,"checkoutBranch","Checking Out Branch"),(0,c._)(o,"tidyingFiles","Tidying Files"),(0,c._)(o,"done","Finalizing"),o);function ed(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return["bash","-c",t.join("&&")]}function ef(e){return e.replace(/'/g,"'\"'\"'")}var eh=function(e){var t,n,r,i,o,a,c,f,h,p,w,Z,x,C=e.checkoutBranch,k=(0,j.useRouter)(),S=(0,b.Z)(),_=S.container,E=S.dotReplit,T=S.runner,R=S.git,D=S.fs,I=(t=(0,g.Z)({container:_,service:"exec"}).channel,n=(0,y.useRef)(!1),r=(0,y.useRef)([]),i=(0,v.Z)((0,l._)(function(){var e,o,a,l,c,u,f,h,p,m;return(0,d.Jh)(this,function(d){switch(d.label){case 0:if(n.current||!r.current.length||(null==t?void 0:t.status)!=="open")return[2];if(!(e=r.current.pop()))throw Error("Expected request");return l=(a=(o=(0,s._)(e,2))[0]).args,c=a.env,u=o[1],f="",h=t.onCommand(function(e){e.output&&(f+=e.output)}),n.current=!0,[4,t.request({exec:{args:l,env:c,noUserEnv:!0}})];case 1:return p=d.sent(),n.current=!1,h(),m=p.channelClosed?"Channel closed":p.error,u(m?{error:m,output:f||null}:{output:f,error:null}),i.current(),[2]}})})),o=null==t?void 0:t.status,(0,y.useEffect)(function(){"open"===o&&i.current()},[o,i]),(0,y.useCallback)(function(e){var t=e.args,n=e.env;return new Promise(function(e){r.current.push([{args:t,env:n},e]),i.current()})},[i])),B=(a=(0,l._)(function(){return(0,d.Jh)(this,function(e){switch(e.label){case 0:return[4,R.init({initialCommit:!1,includeAllInitialFiles:!1})];case 1:return e.sent(),[2]}})}),function(){return a.apply(this,arguments)}),P=(c=(0,l._)(function(e){return(0,d.Jh)(this,function(t){switch(t.label){case 0:return[4,R.addRemote({name:"origin",url:e})];case 1:return t.sent(),[2]}})}),function(e){return c.apply(this,arguments)}),N=(f=(0,l._)(function(){var e,t;return(0,d.Jh)(this,function(n){switch(n.label){case 0:return[4,I({args:ed("git remote show origin | grep 'HEAD branch'")})];case 1:if(!(e=n.sent()).output)return[2,"main"];return(t=(0,s._)(e.output.split(": "),2))[0],[2,t[1].trim()]}})}),function(){return f.apply(this,arguments)}),O=(h=(0,l._)(function(e){var t;return(0,d.Jh)(this,function(n){switch(n.label){case 0:return[4,I({args:ed("git checkout -f -b '".concat(ef(e),"' 'origin/").concat(ef(e),"'"))})];case 1:if((t=n.sent()).error)throw Error("Failed to checkout branch: ".concat(t.error));return[2]}})}),function(e){return h.apply(this,arguments)}),U=(p=(0,l._)(function(e){var t,n,r,i;return(0,d.Jh)(this,function(o){switch(o.label){case 0:if(n=void 0!==(t=e.deepen)&&t,r=e.remote,i=e.branch,!r.startsWith("https://api.glitch.com"))return[3,2];return[4,I({args:ed("git fetch '".concat(ef(r),"' +refs/heads/*:refs/remotes/origin/*"))})];case 1:return o.sent(),[2];case 2:if(!(i&&n))return[3,4];return[4,I({args:ed("git fetch origin '".concat(ef(i),"' --progress --deepen=10"))})];case 3:case 5:case 7:return[2,o.sent()];case 4:if(!i)return[3,6];return[4,I({args:ed("git fetch origin '".concat(ef(i),"' --progress --depth=10"))})];case 6:return[4,I({args:ed("git fetch origin +refs/heads/*:refs/remotes/origin/* --progress --depth=10")})]}})}),function(e){return p.apply(this,arguments)}),X=(w=(0,l._)(function(){var e,t,n,r,i,o;return(0,d.Jh)(this,function(a){switch(a.label){case 0:return[4,D.readDir(A.Ql)];case 1:if((r=a.sent()).error)return[2];return[4,E.getConfig()];case 2:if(!(null===(t=(i=a.sent()).config)||void 0===t?void 0:null===(e=t.gitHubImport)||void 0===e?void 0:e.requiredFiles))return[3,4];return o=i.config.gitHubImport.requiredFiles.concat(".cache").map(function(e){return new RegExp(e)}),[4,Promise.all(r.children.filter(function(e){var t;return t=e.filename,!o.some(function(e){return null!=t.match(e)})}).map(function(e){return e.type===L.Tv.Directory?D.deleteDir(e.filename):D.deleteFile(e.filename)}))];case 3:return a.sent(),[3,6];case 4:if(!(null===(n=i.config)||void 0===n?void 0:n.entrypoint))return[3,6];return[4,D.deleteFile(i.config.entrypoint)];case 5:a.sent(),a.label=6;case 6:return[2]}})}),function(){return w.apply(this,arguments)}),M={"requirements.txt":["pyproject.toml","poetry.lock"],"pnpm-lock.yaml":["package-lock.json"],"yarn.lock":["package-lock.json"],"bun.lockb":["package-lock.json"]},F=(Z=(0,l._)(function(){var e,t,n,r;return(0,d.Jh)(this,function(i){switch(i.label){case 0:for(t in e=[],M)e.push(t);n=0,i.label=1;case 1:if(!(n<e.length))return[3,5];return r=e[n],[4,D.stat(r)];case 2:if(!i.sent().exists)return[3,4];return[4,I({args:["git","clean","-fdx"].concat((0,u._)(M[r]))})];case 3:i.sent(),i.label=4;case 4:return n++,[3,1];case 5:return[2]}})}),function(){return Z.apply(this,arguments)});return x=(0,l._)(function(e){var t,n,r,i,o;return(0,d.Jh)(this,function(a){switch(a.label){case 0:return t=e.remote,n=e.accessToken,[4,X()];case 1:return a.sent(),m.kg.info("GitHub Import: Removed template boilerplate"),[4,B()];case 2:return a.sent(),[4,P(t)];case 3:return a.sent(),[4,N()];case 4:return r=a.sent(),[4,Promise.all([U({deepen:!1,remote:t,remoteToken:n,branch:r}),C?U({deepen:!1,remote:t,remoteToken:n,branch:C}):null])];case 5:var c;if(a.sent(),c=(0,l._)(function(){var e;return(0,d.Jh)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,O(r)];case 1:return n.sent(),[3,3];case 2:return e=n.sent(),m.kg.error("GitHub Import: checkout default branch failed",{originalError:String(e),query:JSON.stringify(k.query),checkoutBranch:C,githubRepo:t}),[3,3];case 3:return[2]}})}),i=function(){return c.apply(this,arguments)},!C)return[3,11];a.label=6;case 6:return a.trys.push([6,8,,10]),[4,O(C)];case 7:case 9:return a.sent(),[3,10];case 8:return o=a.sent(),m.kg.error("GitHub Import: checkout branch from query parameter failed",{originalError:String(o),query:JSON.stringify(k.query),checkoutBranch:C,githubRepo:t}),[4,i()];case 10:return[3,13];case 11:return[4,i()];case 12:a.sent(),a.label=13;case 13:if("html"!==T.mode)return[3,16];return[4,(0,G.r)(_,A.Ql)];case 14:return a.sent(),[4,T.run()];case 15:a.sent(),a.label=16;case 16:return[4,F()];case 17:return a.sent(),m.kg.info("GitHub Import: Tidied up required files"),[2]}})}),function(e){return x.apply(this,arguments)}},ep=function(e){var t=e.checkoutBranch,n=e.onUpdateState,r=e.showError;return(0,ec.U)(function(e){var i;return i=(0,l._)(function(i){var o,l,c,u,f,h,p,m,v,g,y,b,w,Z;return(0,d.Jh)(this,function(d){switch(d.label){case 0:o=i.remote,l=i.accessToken,c=i.homeDir,f=function(){},d.label=1;case 1:return d.trys.push([1,,15,16]),h={homeDir:c,remoteUrl:o,accessToken:null!=l?l:void 0,clearHomeDir:!0},t&&(h.checkoutBranch=t),[4,e.gitImport.fromGithub.subscribe(h)];case 2:u=(p=s._.apply(void 0,[d.sent(),2]))[0],f=p[1],m=!1,v=!1,d.label=3;case 3:d.trys.push([3,8,9,14]),y=(0,a._)(u),d.label=4;case 4:return[4,y.next()];case 5:if(!(m=!(b=d.sent()).done))return[3,7];(w=b.value).ok?n(w.payload.state):r(w.payload.code+": "+w.payload.message),d.label=6;case 6:return m=!1,[3,4];case 7:return[3,14];case 8:return Z=d.sent(),v=!0,g=Z,[3,14];case 9:if(d.trys.push([9,,12,13]),!(m&&null!=y.return))return[3,11];return[4,y.return()];case 10:d.sent(),d.label=11;case 11:return[3,13];case 12:if(v)throw g;return[7];case 13:return[7];case 14:return[3,16];case 15:return f(),[7];case 16:return[2]}})}),function(e){return i.apply(this,arguments)}},[t,n,r])};function em(e){var t,n,r,i,o,a,c,u,v,g,x,k,S,E,D,I,G,A,L,U,X,M,F,et,en,er=e.insertConfigPlugin,eo=e.setConfigScreenLockIsOpen,ec=e.openFile,eu=e.onUpdateState,ed=(0,es.iM)(),ef=(0,K.P5)({controlName:"flag-pid2-github-import"})&&ed,em=(0,j.useRouter)(),ev=(0,p.Z)(),eg=(0,s._)((t=(0,Z._)({},W,void 0),O.D(H,t)),2),ey=eg[0],eb=eg[1],ew=(0,s._)((0,y.useState)(null),2),eZ=ew[0],ex=ew[1],eC=(0,b.Z)(),ek=eC.fs,eS=eC.runner,e_=eC.dotReplit,eE=(0,h.Z)(),eT=eE.showError,eR=eE.showConfirm,eD=(r=(n=(0,b.Z)()).dotReplit,i=n.nixService,o=(0,p.Z)(),c=(0,s._)((a=(0,Z._)({},T,void 0),_.t(R,a)),1)[0],v=(u=(0,h.Z)()).showWarning,g=u.showError,(0,y.useCallback)((x=(0,l._)(function(e){var t,n,a,l,s,u,f,h,p,y,b,w;return(0,d.Jh)(this,function(d){switch(d.label){case 0:return[4,r.getConfig()];case 1:if(!(n=d.sent().config)||(null===(t=n.modules)||void 0===t?void 0:t.length))return[2];return[4,c({variables:{replId:o}})];case 2:if(!(null==(l=(null==(a=d.sent().data)?void 0:a.repl.__typename)==="Repl"?a.repl:null)?void 0:l.rootOriginReplUrl))return[2];try{s=C().parse(e.toString())}catch(e){return g("Failed to parse template .replit file"),m.kg.error("GitHub Import: Failed to parse template .replit file"),[2]}if(!s)return[2];return[4,function(e){return B.apply(this,arguments)}({nixService:i,dotReplit:r,config:n,templateConfig:s})];case 3:u=d.sent(),f=!0,h=!1,p=void 0;try{for(y=u[Symbol.iterator]();!(f=(b=y.next()).done);f=!0)w=b.value,v(w,1e3)}catch(e){h=!0,p=e}finally{try{f||null==y.return||y.return()}finally{if(h)throw p}}return[2]}})}),function(e){return x.apply(this,arguments)}),[o,v,g,r,i,c])),eI=(k=(0,q.Wd)("importBranch","string"))?decodeURIComponent(k):null,eB=(0,Q.Z)();(0,y.useEffect)(function(){eb.error&&eT("Failed to finish cloning Repl - "+eb.error)},[eb.error,eT]),(0,y.useEffect)(function(){eZ&&eT("Failed to finish cloning Repl - "+eZ)},[eZ,eT]),(0,y.useEffect)(function(){eb.data&&eR("Finished cloning Repl")},[eb.data,eR]);var eG=(S=(0,Z._)({},W,{variables:{replId:ev},fetchPolicy:"no-cache"}),N.a(V,S)).data,eP=(E=(0,Q.Z)(),I=(D=(0,b.Z)()).fs,G=D.dotReplit,M=(null==(X=(L={skip:!((A=(null==eG?void 0:eG.repl.__typename)==="Repl"?eG.repl.config.gitRemoteUrl:void 0)&&E),variables:A?{input:{githubRepoUrl:A}}:void 0},U=(0,Z._)({},W,L),N.a(z,U)).data)?void 0:X.githubRepoInfo.__typename)==="GitHubRepoInfoOutput"?X.githubRepoInfo.topLanguages:void 0,{addRecommendedModules:(0,y.useCallback)((0,l._)(function(){var e,t,n,r,i,o;return(0,d.Jh)(this,function(a){switch(a.label){case 0:if(!(M&&E))return[3,4];return e=M.map(function(e){return{language:e}}),[4,I.readFile("package.json")];case 1:return"content"in(t=a.sent())&&(n=function(e){var t,n,r=null;try{n=JSON.parse(e)}catch(e){return null}if(null===(t=n.engines)||void 0===t?void 0:t.node){var i=ei()(n.engines.node);i&&(r="".concat(i.major))}return r}(t.content.toString()))&&(e.push({language:"javascript",version:n}),M.includes("Vue")&&e.push({language:"vue",version:n})),[4,I.readFile("pyproject.toml")];case 2:return"content"in(t=a.sent())&&(r=function(e){var t,n,r,i,o,a=null;try{o=C().parse(e)}catch(e){return null}var l=(null===(r=o.tool)||void 0===r?void 0:null===(n=r.poetry)||void 0===n?void 0:null===(t=n.dependencies)||void 0===t?void 0:t.python)||(null===(i=o.project)||void 0===i?void 0:i["requires-python"]);if(l){var c=ei()(l);c&&(a="".concat(c.major,".").concat(c.minor))}return a}(t.content.toString()))&&e.push({language:"python",version:r}),i=function(e,t){var n=new Map,r=!0,i=!1,o=void 0;try{for(var a,l,c=e[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=l.value,d=ea[u.language.toLowerCase()];if(d){var f=n.get(d);(!f||el(u.version,f.version))&&n.set(d,u)}}}catch(e){i=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw o}}var h=new Map;null===(a=t.fullModules)||void 0===a||a.forEach(function(e){(null==e?void 0:e.id)&&h.set(e.id,e)});var p=new Set,m=!0,v=!1,g=void 0;try{for(var y,b=n.entries()[Symbol.iterator]();!(m=(y=b.next()).done);m=!0){var w=(0,s._)(y.value,2),Z=w[0],x=w[1];if("string"==typeof Z){var C=h.get(Z);C&&p.add(C)}else{var k=x.version;if(!k||!Z[k]){var S=Object.keys(Z);S.sort(function(e,t){return el(e,t)?-1:1}),k=S[0]}var _=Z[k],E=h.get(_);E&&p.add(E)}}}catch(e){v=!0,g=e}finally{try{m||null==b.return||b.return()}finally{if(v)throw g}}return Array.from(p)}(e,E),o=[{op:"add",path:"nix/channel",value:'"stable-24_05"'}],i.length>0?(m.kg.info("GitHub Import: recommended modules:",Object.fromEntries(i.map(function(e){return[e.id,e.name]}))),o.push({op:"add",path:"modules",value:JSON.stringify(i.map(function(e){return e.id}))})):m.kg.warn("GitHub Import: no recommended modules found"),[4,G.updateDotReplit(o)];case 3:a.sent(),a.label=4;case 4:return[2]}})}),[G,I,E,M]),topLanguages:M}),eA=eP.addRecommendedModules,eL=eP.topLanguages,eN=(F=(0,l._)(function(){var e,t,n,r,i,o,a;return(0,d.Jh)(this,function(l){switch(l.label){case 0:if(!eG||(t=eG.repl,n=eG.currentUser,"Repl"!==t.__typename||!n||"CurrentUser"!==n.__typename)||(i=null!==(r=null===(e=n.gitHubInfo)||void 0===e?void 0:e.accessToken)&&void 0!==r?r:null,!(o=t.config.gitRemoteUrl)||!t.config.doClone||!eL))return[2];l.label=1;case 1:return l.trys.push([1,3,4,5]),eo(!0),[4,eH({remote:o,accessToken:i})];case 2:return l.sent(),(0,Y.j)(Y.U3.NIX_GH_IMPORT_USED,{action:$.D.ImportEnded,replId:t.id,orgContext:(0,ee.sI)()}),[3,5];case 3:return a=l.sent(),m.kg.error("GitHub Import: Failed to do GitHub import flow",{originalError:String(a),query:JSON.stringify(em.query),githubRepo:o,hasAccessToken:!!i}),f.Tb(a,{extra:{query:JSON.stringify(em.query),githubRepo:o,hasAccessToken:!!i}}),ex(String(a)),[3,5];case 4:return eo(!1),[7];case 5:return[2]}})}),function(){return F.apply(this,arguments)}),eO=(0,s._)((0,y.useState)(!1),2),eU=eO[0],eX=eO[1];(0,y.useEffect)(function(){eB&&eG&&eL&&eX(!0)},[eG,eB,eU,eL]),(0,y.useEffect)(function(){eU&&eN()},[eU]);var eM=(et=(0,l._)(function(){var e;return(0,d.Jh)(this,function(t){switch(t.label){case 0:return[4,(0,w.W)({dotReplit:e_,fs:ek})];case 1:return(e=t.sent().entrypoint)&&ec({path:e,opener:(0,J.gK)(e.toLowerCase())?{paneType:"markdown"}:void 0}),[2]}})}),function(){return et.apply(this,arguments)});function eF(){return ek.readFile(P.l)}var eW=ep({checkoutBranch:eI,onUpdateState:eu,showError:eT}),eV=eh({checkoutBranch:eI}),eH=(en=(0,l._)(function(e){var t,n,r,i,o,a;return(0,d.Jh)(this,function(l){switch(l.label){case 0:if(t=e.remote,n=e.accessToken,!eB||!(eG&&"Repl"===eG.repl.__typename))return[2];return m.kg.info("GitHub Import: Starting client-side GitHub import flow"),[4,eF()];case 1:if(r=l.sent(),!(ef&&eW))return[3,3];return i=eG.repl,[4,eW({remote:t,accessToken:n,homeDir:"/home/runner/".concat(i.slug)})];case 2:return l.sent(),[3,5];case 3:return[4,eV({remote:t,accessToken:n})];case 4:l.sent(),l.label=5;case 5:if(m.kg.info("GitHub Import: Cloned repo into Repl"),"NOT_FOUND"!==r.error)return[3,8];return[4,e_.updateDotReplit([])];case 6:return l.sent(),[4,eF()];case 7:r=l.sent(),l.label=8;case 8:if("content"in r)return[3,9];return m.kg.error("GitHub Import: Skipping patching dotReplit because templateDotReplit was an error",{readError:String(r.error)}),[3,14];case 9:return[4,eF()];case 10:return o=l.sent(),a=""!==r.content.toString()&&"content"in o&&o.content.toString()!==r.content.toString(),[4,eD(r.content)];case 11:if(l.sent(),m.kg.info("GitHub Import: Patched dotreplit"),!a)return[3,12];return m.kg.info("GitHub Import: Repo has .replit",{githubURL:t}),[3,14];case 12:return[4,eA()];case 13:l.sent(),m.kg.info("GitHub Import: Added recommended modules"),l.label=14;case 14:return[4,ey({variables:{input:{id:ev,doClone:!1}}})];case 15:if(l.sent(),!eI)return[3,17];return[4,ek.persist()];case 16:l.sent(),(0,q.pg)({router:em,params:[{mode:"delete",key:"importBranch"}]}),l.label=17;case 17:return m.kg.info("GitHub Import: Disabled doClone on Repl. Done."),[4,eM()];case 18:if(l.sent(),"html"===eS.mode)return[2];return er(),[2]}})}),function(e){return en.apply(this,arguments)})}},81147:function(e,t,n){n.d(t,{T:function(){return d}});var r=n(16155),i=n(41733),o=n(21262),a=n(71440),l=n(9122);function c(){var e=(0,o._)(["\n  query WorkspaceEduPaneEnabled($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isModelSolution\n        isProject\n        isProjectFork\n        owner {\n          __typename\n          ... on Team {\n            id\n            isAdmin\n          }\n          ... on User {\n            id\n          }\n        }\n      }\n    }\n  }\n"]);return c=function(){return e},e}var s={},u=(0,a.Ps)(c());function d(){var e,t,n,o=(t={variables:{replId:(0,r.Z)()}},n=(0,i._)({},s,t),l.a(u,n)).data,a=(null==o?void 0:null===(e=o.repl)||void 0===e?void 0:e.__typename)==="Repl"?null==o?void 0:o.repl:null;if(!a)return!1;var c=a.owner;return!!c&&a.isProjectFork&&!a.isModelSolution&&"Team"===c.__typename&&c.isAdmin}},53156:function(e,t,n){n.d(t,{Z:function(){return c}});var r=n(66626),i=n(23882),o=n(75271),a=n(73878),l=n(47523);function c(){var e=(0,i.Z)().fs,t=(0,r._)((0,o.useState)(!1),2),n=t[0],c=t[1],s=(0,l.Z)(),u=s.didConnectOnce,d=s.didDisconnect;return((0,o.useEffect)(function(){return c(e.getStatus()===a.kO.Syncing),e.onStatusChange(function(e){c(e===a.kO.Syncing)})},[e]),u)?{isSaving:n,isOffline:d}:{isSaving:!1,isOffline:!1}}},81321:function(e,t,n){n.d(t,{C:function(){return c}});var r=n(27387),i=n(96583),o=n(29574),a=n(42471),l=n(64566);function c(){var e,t,n,c=(0,o.Gn)("showFileTreeGitStatus").preferences.showFileTreeGitStatus,s=(0,l.Z)((n=(0,r._)(function(e){var t,n;return(0,i.Jh)(this,function(r){switch(r.label){case 0:if(!c)return[2,{status:null,error:null}];return[4,e.getRepositoryState()];case 1:if((t=r.sent()).error)return[2,t];if(t.type!==a.y5.NORMAL)return[2,{status:null,error:null}];return[4,e.status()];case 2:if((n=r.sent()).error)return[2,n];return[2,{status:n,error:null}]}})}),function(e){return n.apply(this,arguments)}),[c]);return s&&!s.error&&(null===(e=s.status)||void 0===e?void 0:e.changes)?function(e){var t=new Map,n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;t.set(l.path,{index:l.type.index,worktree:l.type.worktree})}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t}(null===(t=s.status)||void 0===t?void 0:t.changes):null}},62305:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(14118),i=n(16155),o=n(79685),a=n(82973),l=n(23882),c=n(75271),s=n(72106),u="persistmirrored";function d(){var e=(0,o.T)(),t=(0,i.Z)(),n=(0,r.P5)({controlName:"flag-persist-mirror-html",default:!0,logFlagToAnalytics:!1}),d=(0,l.Z)().container;(0,c.useEffect)(function(){if(!(!e||!n||(null!==(r=a.Z.get(u,"array"))&&void 0!==r?r:[]).includes(t))){var r,i=d.openChannel({service:"gcsfiles",skip:function(e){return!e.repl.authorizations.editFileContents.isAuthorized}},function(e){return e.channel.request({persistMirror:{path:s.Ql}}).then(function(e){if(e.ok){var n,r;r=null!==(n=a.Z.get(u,"array"))&&void 0!==n?n:[],a.Z.set(u,r.concat(t)),i()}}),function(){}});return i}},[d,e,n,t])}},45919:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(37782),i=n(23882),o=n(75271);function a(){var e=(0,i.Z)().container;(0,o.useEffect)(function(){var t=function(){e.getConnectionState()===r.em.CONNECTED&&e.focus()};return window.addEventListener("focus",t),function(){window.removeEventListener("focus",t)}},[e])}},4322:function(e,t,n){n.d(t,{s:function(){return s}});var r=n(66626),i=n(75271),o=n(14118),a=n(58988),l=n(35370),c=n(65883),s=function(){var e=(0,o.P5)({controlName:"flag-draft-buffers"}),t=(0,a.Qk)(),n=(0,i.useRef)(!1);return(0,i.useEffect)(function(){n.current=t||!1===e},[t,e]),n};t.Z=function(e,t){var n=(0,a.Qk)(),s=(0,r._)((0,i.useState)(!1),2),u=s[0],d=s[1],f=(0,o.P5)({controlName:"flag-draft-buffers"});return(0,i.useEffect)(function(){if(!t||!(0,l.Mb)(t)||!f||(0,c.C_)((0,c.S1)(t))){d(!1);return}d(!1===e.isFileOrDirSaved(t));var n=e.watchTextFile(t,{onFileSavedChanged:function(e){d(!e)}});return function(){n()}},[e,t,f]),f&&null!==t&&!1===n&&u}},21285:function(e,t,n){n.d(t,{V:function(){return c},Z:function(){return s}});var r=n(66626),i=n(75271),o=n(23882),a=n(72106),l=n(73878),c=".tutorial";function s(){var e=(0,o.Z)().fs,t=(0,r._)((0,i.useState)({isLoading:!0,isTutorial:!1}),2),n=t[0],s=t[1];return(0,i.useEffect)(function(){e.watchDir(a.Ql,{onChange:function(e){s({isLoading:!1,isTutorial:e.some(function(e){return e.type===l.Tv.Directory&&e.filename===c})})},onMoveOrDelete:function(){s({isLoading:!1,isTutorial:!1})},onError:function(){s({isLoading:!1,isTutorial:!1})}})},[e]),n}},43454:function(e,t,n){n.d(t,{ZP:function(){return R},Ln:function(){return T}});var r=n(27387),i=n(96583),o=n(25722),a=n(16155),l=n(37782),c=n(62699),s=n(8445),u=n(38163),d=n(23882),f=n(49853),h=n(80786),p=n(75271),m=n(4753),v=n(11346),g=n(73878),y=n(41733),b=n(21262),w=n(71440),Z=n(71793),x=n(9122);function C(){var e=(0,b._)(["\n  query ReplEnvironmentDesktopLoadCurriculum($id: String!) {\n    currentUser {\n      id\n      isTeacher: hasRole(role: TEACHER)\n      ...CrosisContextCurrentUser\n    }\n    repl(id: $id) {\n      ... on Repl {\n        id\n        isProject\n        isProjectFork\n        isModelSolution\n        isModelSolutionFork\n        owner {\n          ... on Team {\n            id\n          }\n          ... on User {\n            id\n          }\n        }\n        origin {\n          id\n          ...CrosisContextRepl\n          origin {\n            id\n            ...CrosisContextRepl\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return C=function(){return e},e}var k={},S=(0,w.Ps)(C(),Z.D,Z.C),_=n(49500),E=(0,f.cn)(!1);function T(){return(0,h.Dv)(E)}function R(){var e,t,n,f=(0,a.Z)(),b=(0,d.Z)().fs,w=(e=(0,y._)({},k,{variables:{id:f}}),x.a(S,e)).data,Z=(0,h.b9)(E);(0,p.useEffect)(function(){return function(){Z(!1)}},[Z]);var C=(null==w?void 0:w.repl.__typename)==="Repl"?w.repl:null,T=(null==w?void 0:null===(t=w.currentUser)||void 0===t?void 0:t.__typename)==="CurrentUser"?w.currentUser:null,R=(null==w?void 0:w.repl.__typename)==="Repl"&&w.repl.isModelSolutionFork,D=R?C&&(null===(n=C.origin)||void 0===n?void 0:n.origin):C&&C.origin||null,I=(0,c.b)((null==D?void 0:D.__typename)==="Repl"?{repl:D,currentUser:T||void 0}:null),B=(0,s.S)();(0,p.useEffect)(function(){C&&T&&C.isProject&&b.stat(".lesson").then(function(e){e.exists||b.createDir(".lesson")})},[b,T,C]),(0,p.useEffect)(function(){if(C&&(C.isProjectFork||R)&&D&&I){var e,t=(0,l.ZP)({onUnrecoverableError:function(e){_.error(e),o.$e(function(t){t.setTag("curriculum-authoring",!0),t.setExtra("originId",D.id),o.Tb(e)})}}),n=(0,u.Z)({container:t});t.connect({context:I,getMinimumRetryDelayMs:B,fetchConnectionMetadata:function(){return(0,m.Z)({url:"/data/repls/".concat(C.id,"/get_repl_origin_guest_connection_metadata")})}});var a=t.onConnectionStateChanged((e=(0,r._)(function(e){var r,l;return(0,i.Jh)(this,function(i){switch(i.label){case 0:if(e!==v.e.CONNECTED)return[3,8];a(),i.label=1;case 1:return i.trys.push([1,6,7,8]),[4,b.copyDirFromRemote(".lesson",".lesson",n)];case 2:if(!((r=i.sent()).error&&r.error!==g.Df.NotFound))return[3,3];return o.$e(function(e){e.setTag("curriculum-authoring",!0),e.setExtra("originId",D.id),o.Tb(Error("Error copying lesson: ".concat(r.error)))}),[3,5];case 3:return[4,b.stat(".lesson/instructions.md")];case 4:i.sent().exists&&Z(!0),i.label=5;case 5:return[3,8];case 6:return l=i.sent(),o.$e(function(e){e.setTag("curriculum-authoring",!0),o.Tb(l)}),[3,8];case 7:return t.destroy(),[7];case 8:return[2]}})}),function(t){return e.apply(this,arguments)}));return function(){return t.destroy()}}},[b,I,C,D,R,Z])}},58862:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(37475),i=n(75271);function o(){var e=(0,r.r9)();(0,i.useEffect)(function(){},[e])}},80410:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(31417),i=n(27387),o=n(66626),a=n(96583),l=n(40703),c=n(75271),s=n(52657);function u(){document.activeElement instanceof HTMLElement&&document.activeElement.blur()}function d(e){var t,n,d=e.fs,f=e.openMultipleFiles,h=e.openMultipleURLs,p=e.waitForFileClose,m=e.isMobileWorkspace,v=void 0!==m&&m,g=(0,s.Z)(p),y=(0,c.useCallback)((t=(0,i._)(function(e){var t,n,r;return(0,a.Jh)(this,function(i){switch(i.label){case 0:if(t=e.filename,n=e.waitForClose,!v)return[3,2];if(!t.endsWith(".git/COMMIT_EDITMSG"))return f({paths:[t]}),[2];return r=window.prompt("Enter a commit message"),[4,d.writeFile(t,null!=r?r:"")];case 1:case 4:return i.sent(),[2];case 2:if(u(),f({paths:[t]}),!n||!g.current)return[2];return[4,g.current(t)];case 3:return i.sent(),[4,d.flush()]}})}),function(e){return t.apply(this,arguments)}),[d,v,f,g]);(0,l.C)((n=(0,i._)(function(e,t){var n,i,l,c,s,d,p,m,v,g,b,w,Z;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return n=t.session,i=t.addCleanup,[4,e.replspaceApi.init.stream({session:n.from})];case 1:c=(l=o._.apply(void 0,[a.sent(),3]))[0],s=l[1],d=l[2],i(d),p=!1,m=!1,a.label=2;case 2:a.trys.push([2,11,12,17]),g=(0,r._)(s),a.label=3;case 3:return[4,g.next()];case 4:if(!(p=!(b=a.sent()).done))return[3,10];if(!(w=b.value).ok)return[3,9];switch(w.payload.$kind){case"openFile":return[3,5];case"openMultipleFiles":return[3,7];case"openMultipleURLs":return[3,8]}return[3,9];case 5:return[4,y(w.payload)];case 6:return a.sent(),w.payload.waitForClose&&c.push({$kind:"closeFile",filename:w.payload.filename,nonce:w.payload.nonce}),[3,9];case 7:return w.payload.files.length>0&&(u(),f({paths:w.payload.files})),[3,9];case 8:return w.payload.urls.length>0&&(u(),h({urls:w.payload.urls})),[3,9];case 9:return p=!1,[3,3];case 10:return[3,17];case 11:return Z=a.sent(),m=!0,v=Z,[3,17];case 12:if(a.trys.push([12,,15,16]),!(p&&null!=g.return))return[3,14];return[4,g.return()];case 13:a.sent(),a.label=14;case 14:return[3,16];case 15:if(m)throw v;return[7];case 16:return[7];case 17:return[2]}})}),function(e,t){return n.apply(this,arguments)}),[h,f,y])}},56850:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(10777),i=n(75271);function o(){(0,i.useEffect)(function(){var e=null;return!function t(){if(window.performance.memory){var n=window.performance.memory,i=n.jsHeapSizeLimit,o=n.totalJSHeapSize,a=n.usedJSHeapSize,l=window.performance.now();r.kg.info("perf:browser_memory",{jsHeapSizeLimit:i,totalJSHeapSize:o,usedJSHeapSize:a,timeElapsed:l}),e=setTimeout(t,-(3e5*Math.log(Math.random())))}}(),function(){e&&clearTimeout(e)}},[])}},3960:function(e,t,n){n.d(t,{L:function(){return c}});var r=n(41733),i=n(16155),o=n(79468),a=n(66554),l=n(75271);function c(){var e=(0,i.Z)(),t=(0,o.Z)("fileTree").trackTimeToLoadFileStart;return(0,l.useCallback)(function(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t(n);var o={action:"select",source:"filetree"};i.newTab?o={action:"newTab",source:"filetree"}:i.newPane&&(o={action:"newPane",source:"filetree"}),(0,a.Z)((0,r._)({replId:e},o))},[e,t])}},36413:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(29574),i=n(16155),o=n(96949),a=n(23882),l=n(75271),c=new Set([3e3,3001,3002,3003,3306,4e3,4200,5e3,5432,5173,6e3,6800,7e3,7001,8e3,8008,8080,8081,8888,9e3,9001,1e4,25565,25577,8887,27017,27018]);function s(){var e=(0,a.Z)().container,t=(0,r.Gn)("webviewAutoOpenOnPortOpened").preferences.webviewAutoOpenOnPortOpened,n=(0,i.Z)();(0,l.useEffect)(function(){return e.onPortOpened(function(e){var r=e.port,i=e.address,a=e.isForwarded,l=e.isVnc,s=e.externalPort;if(a){(0,o.j)(o.U3.WS_PORT_OPENED,{type:l?"vnc":"webview",replId:n,port:r,externalPort:s,address:i,webviewAutoOpenOnPortOpened:t});return}(0,o.j)(o.U3.WS_UNFORWARDED_PORT_OPENED,{port:r,isCommon:c.has(r),address:i,type:l?"vnc":"webview",replId:n,externalPort:s})})},[e,n,t])}},28467:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(47726),i=n(16155),o=n(10777),a=n(47),l=n(23882),c=n(75271),s=n(92756),u=n(58997),d=new Set;function f(e){var t=e.workspaceType,n=(0,i.Z)(),f=(0,l.Z)(),h=f.dotReplit,p=f.container;(0,c.useEffect)(function(){if(!d.has(n)){d.add(n);var e=h.watch(function(n){if(!n.error||n.error!==u.Yt.Disconnected){try{var i=p.getConnectionMetadata();if(!i||!i.token)throw Error("Expected token in measure call.");!function(e){var t=e.workspaceType,n=e.parsedToken,i=!!window.performance.getEntriesByName(s.Iy.pageNavStart,"mark").length,a={ssr:!i,workspaceType:t,tokenCluster:n.cluster},l="time to code";window.performance.measure(l,i?s.Iy.pageNavStart:void 0);var c=window.performance.getEntriesByName(l,"measure")[0];if(!c){o.kg.info("Could not obtain measure for time to code",a);return}var u="page invisible fetch connection metadata",d=c.duration;window.performance.getEntriesByName(s.Iy.fetchConnectionMetadataPageInvisibleStart,"mark").length&&(window.performance.measure(u,s.Iy.fetchConnectionMetadataPageInvisibleStart,s.Iy.fetchConnectionMetadataPageInvisibleEnd),d-=window.performance.getEntriesByName(u,"measure")[0].duration,window.performance.clearMeasures(u),window.performance.clearMarks(s.Iy.fetchConnectionMetadataPageInvisibleStart),window.performance.clearMarks(s.Iy.fetchConnectionMetadataPageInvisibleEnd)),o.kg.time("time to code minus page invisible",d,a),o.kg.time("time to code with page invisible",c.duration,a),window.performance.clearMeasures(l),r.v.addTiming("time_to_code_minus_page_invisible",d),r.v.addTiming("time_to_code_with_page_invisible",c.duration)}({workspaceType:t,parsedToken:(0,a.he)(i.token)})}catch(e){o.kg.info("Could not measure time to code",{workspaceType:t,e:e,dotReplitResult:n.error?n.error:"success"})}e()}});return e}},[n,t,h,p])}},79468:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(10777),i=n(79317),o=n(35370),a=new Map,l=function(e,t){if((0,o.Mb)(e)){var n=window.performance.now();a.set(e,{start:n,source:t})}},c=function(e){var t=a.get(e);if(void 0!==t){var n=t.start,o=t.source,l=window.performance.now(),c=(0,i.V)(e);r.kg.time("time to load file",l-n,{from:o,fileViewerType:c}),a.delete(e)}};function s(e){return{trackTimeToLoadFileStart:function(t){return l(t,e)},trackTimeToLoadFileEnd:c}}},57337:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(90267),i=n(16155),o=n(23882),a=n(41733),l=n(21262),c=n(71440),s=n(91476);function u(){var e=(0,l._)(["\n  subscription WorkspaceUserCanWrite($replId: String!) {\n    currentUserCanWrite(replId: $replId)\n  }\n"]);return u=function(){return e},e}var d={},f=(0,c.Ps)(u()),h=n(75271),p=n(73878);function m(){var e,t,n=(0,o.Z)().fs,l=(e={variables:{replId:(0,i.Z)()}},t=(0,a._)({},d,e),s.m(f,t)).data,c=(null==l?void 0:l.currentUserCanWrite)===!1;(0,h.useEffect)(function(){c&&window.location.reload()},[c]);var u=(0,h.useCallback)(function(){return c||n.getStatus()===p.kO.Clean?r.Tk.NavigateAnyway:r.Tk.PromptUser},[n,c]);(0,r.ZP)({shouldPreventNavCb:u})}},8056:function(e,t,n){n.d(t,{_:function(){return y},O:function(){return g}});var r=n(27387),i=n(66626),o=n(96583),a=n(83059),l=n(9816),c=n(70625),s=n(56262),u=n(41733),d=n(21262),f=n(71440),h=n(82303);function p(){var e=(0,d._)(["\n  mutation SetUserKeybindings($input: SetUserKeybindingsInput!) {\n    setUserKeybindings(input: $input) {\n      ... on Keybindings {\n        keybindings\n      }\n    }\n  }\n"]);return p=function(){return e},e}var m={},v=(0,f.Ps)(p());function g(){var e,t=(0,l.O)(),n=(0,i._)((e=(0,u._)({},m,void 0),h.D(v,e)),1)[0],c=(0,s.F)();return(0,a.Z)(function(){var e;return e=(0,r._)(function(e){var r,a,l,s,u,d,f,h,p;return(0,o.Jh)(this,function(o){switch(o.label){case 0:r=[],a=!0,l=!1,s=void 0;try{for(u=e[Symbol.iterator]();!(a=(d=u.next()).done);a=!0)h=(f=(0,i._)(d.value,2))[0],p=f[1],r.push({commandId:h,keyCombo:p})}catch(e){l=!0,s=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw s}}return[4,n({variables:{input:{environment:t,platform:c,keybindings:r}}})];case 1:return o.sent(),[2]}})}),function(t){return e.apply(this,arguments)}},[t,n,c])}function y(e){var t=new Map;if(!Array.isArray(e))return t;var n=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value,s=function(e){if(e&&"object"==typeof e&&"commandId"in e&&"string"==typeof e.commandId&&"keyCombo"in e){if(Array.isArray(e.keyCombo)){var t=(0,c.uv)(e.keyCombo);return{commandId:e.commandId,keyCombo:t}}if("string"==typeof e.keyCombo){var n=(0,c.gD)(e.keyCombo);return{commandId:e.commandId,keyCombo:n}}return{commandId:e.commandId,keyCombo:null}}}(l);s&&t.set(s.commandId,s.keyCombo)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t}},56262:function(e,t,n){n.d(t,{F:function(){return o}});var r=n(24281),i=n(23788);function o(){var e=(0,r.NJ)(),t=(0,r.Vm)(),n=(0,r.Cl)();return e||t?i.K5.Mac:n?i.K5.Windows:i.K5.Linux}},86433:function(e,t,n){n.d(t,{R:function(){return s}});var r=n(27387),i=n(96583),o=n(38242),a=n(21262);function l(){var e=(0,a._)(["\n  query FiletreeDownloadZip($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        url\n      }\n    }\n  }\n"]);return l=function(){return e},e}var c=(0,n(71440).Ps)(l());function s(e){return u.apply(this,arguments)}function u(){return(u=(0,r._)(function(e){var t,n,r;return(0,i.Jh)(this,function(i){switch(i.label){case 0:return[4,null===o.l||void 0===o.l?void 0:o.l.query({query:c,variables:{replId:e}})];case 1:return r=(null==(n=i.sent())?void 0:null===(t=n.data)||void 0===t?void 0:t.repl.__typename)==="Repl"?n.data.repl.url:window.location.pathname,window.open(r+".zip","_blank"),[2]}})})).apply(this,arguments)}},13490:function(e,t,n){n.d(t,{mn:function(){return u}});var r=n(66626),i=n(63257),o=n(35370),a=n(73878),l=["json","md","draw","txt"],c=[".gitignore",".replit"];function s(e,t){var n=new Map,a=!0,l=!1,c=void 0;try{for(var s,u=e[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d,f=s.value,h=(0,o.r6)(f);if(h&&(!t||h.startsWith(t))){var p=null!==(d=n.get(h))&&void 0!==d?d:0;n.set(h,p+1)}}}catch(e){l=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}return(0,i._)(n.entries()).sort(function(e,t){var n=(0,r._)(e,2)[1];return(0,r._)(t,2)[1]-n}).map(function(e){return(0,r._)(e,1)[0]})}function u(e,t){if(e.fileType===a.Tv.Directory||!e.input)return[];if("."===e.input)return c.map(function(e){return{value:e,highlight:[{from:1,to:e.length}]}});if(e.input.startsWith("."))return c.filter(function(t){return t.startsWith(e.input)}).map(function(t){return{value:t,highlight:[{from:t.length-e.input.length,to:t.length}]}});var n=(0,o.r6)(e.input),r=s(e.siblings.map(function(e){return e.filename}),n);if(r.length<3&&r.push.apply(r,(0,i._)(s(t(),n))),r.length<3){var u=n?l.filter(function(e){return e.startsWith(n)}):l;r.push.apply(r,(0,i._)(u))}return(0,i._)(new Set(r)).slice(0,3).map(function(t){var r=e.input;r.endsWith(".")?r=r.slice(0,-1):n&&(r=r.slice(0,-(n.length+1)));var i=r+"."+t;return{value:i,highlight:[{from:e.input.length,to:i.length}]}})}},16372:function(e,t,n){n.d(t,{B:function(){return o}});var r=n(73878),i=function(e){if(1===e.length)return e[0].type===r.Tv.File?"file":"folder";if(e.length>1){var t=e.filter(function(e){return e.type===r.Tv.File}).length,n=e.filter(function(e){return e.type===r.Tv.Directory}).length,i=t>1?"files":"file",o=n>1?"folders":"folder",a="file";return t>0&&n>0?a="".concat(i," and ").concat(o):t>0?a="".concat(i):n>0&&(a="".concat(o)),"".concat(a)}return""};function o(e){var t=i(e),n=1===e.length?t:"".concat(e.length," ").concat(t),r=e.slice(0,5).map(function(e){return e.path}).join(", ");return{name:n,description:e.length>5?"".concat(r," and ").concat(e.length-5," more ").concat(i(e.slice(5))):r,confirmDescription:n}}},70694:function(e,t,n){n.d(t,{r:function(){return r}});function r(e,t){return new Promise(function(n){var r=e.openChannel({service:"gcsfiles"},function(e){return e.channel.request({persistMirror:{path:t}}).then(function(e){e.ok,r(),n()}),function(e){e.willReconnect&&r()}})})}},5438:function(e,t,n){n.d(t,{e:function(){return k},Z:function(){return C}});var r=n(41733),i=n(66626),o=n(85234),a=n.n(o),l=n(10777),c=n(27387),s=n(98924),u=n(63257),d=n(96583),f=n(25722),h=n(57997),p=n(41060),m=n(58591),v="exit status 1";function g(){return(g=(0,c._)(function(e){var t,n,r,i,o,a,l;return(0,d.Jh)(this,function(c){switch(c.label){case 0:if(n=e.container,0===(r=(0,s._)(e,["container"])).query.trim().length)return[2,y(m.f.EMPTY_QUERY)];if(n.getConnectionState()===h.em.DISCONNECTED)return[2,y(m.f.CONTAINER_DISCONNECTED)];if(n.getConnectionState()===h.em.CONNECTING)return[2,y(m.f.CONTAINER_CONNECTING)];return[4,(t=n).exec.apply(t,(0,u._)((0,p.PR)(r)))];case 1:if(o=(i=c.sent()).output,a=i.error)switch(a){case v:return[2,y(m.f.EMPTY_RESULTS)];case"signal: broken pipe":return[2,y(m.f.PARTIAL_RESULTS)];case"Channel closed":return[2,y(m.f.CHANNEL_CLOSED)];default:return f.Tb(Error("Ripgrep search command failed with error: ".concat(a))),[2,{error:a,data:null}]}if(!(null==o?void 0:o.trim())||!(l=(0,p.Tq)()(o))||0===l.filesMap.size)return[2,y(m.f.EMPTY_RESULTS)];return[2,y(l.error,l.filesMap)]}})})).apply(this,arguments)}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{error:e,data:t}}var b=n(86763),w=n.n(b),Z=n(70593),x="File Search Used";function C(e){var t=e.container,n=e.onError,i=e.onUpdate,o=e.onLoadingStateChange,c=e.isStreaming,u=e.trackLatency,d=void 0!==u&&u,h=(0,Z.Z)({container:t}),g=[],y=a()(),b=Date.now(),C=function(e){i(g=e)};return w()(function(e){var t=a()();y=t,b=Date.now(),n(null),o(!0);var i=!0;if(""===e.query){C([]),o(!1);return}!function(e){var t=e.execer,n=e.onComplete,r=e.onError,i=e.onParse,o=(0,s._)(e,["execer","onComplete","onError","onParse"]);if(0===o.query.length){n("abort");return}var a=new TextEncoder,l=(0,p.Tq)(),c=0,u=0,d=function(){},h=function(e){r(e),n("error")},g=function(e){if(0===c&&"finished"===e){h(m.f.EMPTY_RESULTS);return}"finished"===e?n(e,{bytes:u}):n(e),d()},y=t.onOutput(function(e){var t=a.encode(e).length;u+=t;var n=l(e);if(n){var r=n.error,o=n.filesMap,s=n.filesMapChanges;r&&h(r),c=o.size,s.forEach(function(e){var t=o.get(e);t&&o.set(e,(0,p.Vd)(t))}),i(o,s)}}),b=t.onStderr(function(e){if(e.trim()===v)return h(m.f.EMPTY_RESULTS);h(m.f.INVALID_COMMAND)});d=function(){y(),b()};var w=(0,p.PR)(o);t.request({args:w,noUserEnv:!0}).then(function(e){if(e.error)return e.error.trim()===v?h(m.f.EMPTY_RESULTS):h(m.f.INVALID_COMMAND);g("finished")}).catch(function(e){return f.Tb(Error("Ripgrep search command failed with error: ".concat(e))),h(m.f.INVALID_COMMAND)})}((0,r._)({execer:h,onComplete:function(r,i){if(y===t){o(!1);var a,c,s,u,f="finished"===r&&i&&i.bytes===p.Ak;f&&n(m.f.PARTIAL_RESULTS),d&&l.kg.time("".concat(x," - complete"),Date.now()-b,{query:e.query,isRegex:e.isRegex,isCaseSensitive:e.isCaseSensitive,hasIncludes:(null!==(s=null==e?void 0:null===(a=e.includeGlobs)||void 0===a?void 0:a.length)&&void 0!==s?s:0)>0,hasExcludes:(null!==(u=null==e?void 0:null===(c=e.excludeGlobs)||void 0===c?void 0:c.length)&&void 0!==u?u:0)>0,latency:Date.now()-b,isPartialResults:f})}},onError:function(e){y===t&&n(e)},onParse:function(n,r){if(y===t){if(i){if(d){var a,s,u,f;l.kg.time("".concat(x," - first_chunk"),Date.now()-b,{query:e.query,isRegex:e.isRegex,isCaseSensitive:e.isCaseSensitive,hasIncludes:(null!==(u=null==e?void 0:null===(a=e.includeGlobs)||void 0===a?void 0:a.length)&&void 0!==u?u:0)>0,hasExcludes:(null!==(f=null==e?void 0:null===(s=e.excludeGlobs)||void 0===s?void 0:s.length)&&void 0!==f?f:0)>0})}C((0,p.Md)([],n,r)),i=!1}else C((0,p.Md)(g,n,r));c&&o(!1)}},mode:"json",context:0},e))},200)}function k(e){var t=e.container,n=w()(function(e,n,o){(function(e){return g.apply(this,arguments)})((0,r._)({container:t,mode:"json",context:1,isCaseSensitive:!1},e)).then(function(e){var t=e.data?function(e){var t={},n=!0,r=!1,o=void 0;try{for(var a,l=e.entries()[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=(0,i._)(a.value,2),s=c[0],u=c[1];t[s]=u.lines.map(function(e){return{content:e.content,lineNumber:e.lineNumber,matches:e.matches.map(function(e){return{column:e.start,length:e.length}})}}).filter(function(e){return e.matches.length>0})}}catch(e){r=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw o}}return t}(e.data):{},r=e.error===m.f.PARTIAL_RESULTS;if(r);else if(e.error)return n({error:e.error,results:null,isPartialResult:r});return n({error:null,results:t,isPartialResult:r})}).catch(o)},200);return function(e){return new Promise(function(t,r){return n(e,t,r)})}}},44793:function(e,t,n){n.d(t,{Eu:function(){return d},m6:function(){return l}});var r,i,o,a=n(63257);function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=function(e){return e.forEach(function(e){return e&&n.push("-g",e)})},i=[],o=[],l=!0,u=!1,f=void 0;try{for(var h,p=e[Symbol.iterator]();!(l=(h=p.next()).done);l=!0){var m=h.value,v=s(m);v.startsWith("**")?i.push(v):o.push(v)}}catch(e){u=!0,f=e}finally{try{l||null==p.return||p.return()}finally{if(u)throw f}}return o.length>0&&(r(["!*"]),new Set(o).forEach(function(e){r((function(e){var t=function(e){Array.isArray(r[e])||(r[e]=[]);var t,i=n[e],o=i.startsWith("{")&&i.endsWith("}")?d(i.substring(1,i.length-1),","):[i];(t=r[e]).push.apply(t,(0,a._)(o.map(function(t){var n=r[e-1];return n&&n.length>0?n.map(function(e){return"".concat(e,"/").concat(t)}):t}).flat(2)))},n=d(e,"/").filter(function(e){return e.length>0});"**"!==n[n.length-1]&&n.push("**");for(var r={},i=0;i<n.length;i++)t(i);return Object.values(r).flat(2)})(e).map(c))})),r(i),r(t.map(function(e){return"!".concat(c(s(e)))})),n}function c(e){return e.startsWith("**")||e.startsWith("/")?e:"/".concat(e)}function s(e){return e.replaceAll(/\*/g,function(e,t,n){return t>0&&("*"===n[t-1]||"\\"===n[t-1])||t<n.length-1&&"*"===n[t+1]?e:"**"})}var u=(r={},i={},(o=function(e,t){r[e]=t,i[t]=e})("{","}"),o("(",")"),o("[","]"),{hasKey:function(e){return e in r},getKey:function(e){return r[e]},hasValue:function(e){return e in i},getValue:function(e){return i[e]}});function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";if(0===e.length)return[];var n=[],r=[],i="",o=!0,a=!1,l=void 0;try{for(var c,s=e[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var d=c.value;if(d===t){if(0===r.length){n.push(i),i="";continue}}else if(u.hasKey(d))r.push(d);else if(u.hasValue(d)&&r.pop()!==u.getValue(d))return[e];i+=d}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return 0!==r.length?[e]:(i.length>0&&n.push(i),n)}},41060:function(e,t,n){n.d(t,{Ak:function(){return f},Tq:function(){return h},PR:function(){return g},Vd:function(){return m},Md:function(){return v}});var r=n(41733),i=n(30509),o=n(63257),a=n(10777);function l(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.map(function(e){return e.match(/["\s]/)&&!e.match(/'/)?"'".concat(e.replace(/(['\\])/g,"\\$1"),"'"):e.match(/["'\s]/)?'"'.concat(e.replace(/(["\\$`!])/g,"\\$1"),'"'):e.replace(/[#!"$&'()*,:;<=>?@[\\\]^`{|}]/g,"\\$&")}).join(" ")}var c=n(44793),s=n(58591),u=n(32581),d=n(91620).lW,f=524288;function h(){var e="",t=new Map;return function(n){var o=new Set,l=!1;if(n.trim().startsWith("error"))return{error:s.f.INVALID_COMMAND,filesMap:t,filesMapChanges:o};var c=n.indexOf("\n"),u=0,d=e+n;if(c>=0)c+=e.length;else{e=d;return}for(;c>=0;){var f=d.substring(u,c).trim();if(0!==f.length){var h=function(e){try{return JSON.parse(e)}catch(e){return null}}(f);h&&!function(e,t,n){switch(e.type){case"begin":var o=p(e.data.path);if(!o)return!1;t.set(o,{path:o,lines:[],dedentBy:0}),n.add(o);break;case"end":break;case"match":case"context":var l=p(e.data.path);if(!l)return!1;n.add(l);var c=t.get(l);if(!c)return!1;var s=function(e,t){var n,o,a=p(e.data.lines);if(!a)return null;var l=a.trimEnd().split(/\r?\n/),c=[];(null===(n=l[0])||void 0===n?void 0:n.trim())===""&&l.shift(),(null===(o=l[l.length-1])||void 0===o?void 0:o.trim())===""&&l.pop();var s=0,u=0,d=e.data.submatches;return l.forEach(function(t,n){var r=e.data.line_number+n,i=u;u+=t.length+1;for(var o=[];s<d.length;){var a=d[s];if(a.start>=u)break;var l=a.start-i,f=void 0;if(f=a.end<u?a.end-a.start:a.end===u?a.end-a.start-1:t.length-l,l<t.length&&o.push({start:l,length:f}),a.end>u){a.start=u;break}s++}c.push({lineNumber:r,content:t,matches:o})}),(0,i._)((0,r._)({},t),{lines:t.lines.concat(c)})}(e,c);s&&t.set(l,s);break;case"error":return a.kg.error("Invalid Search Line",{line:JSON.stringify(e)}),!1}return!0}(h,t,o)&&(l=!0)}u=c+1,c=d.indexOf("\n",u)}return e=d.substring(u),{error:l?s.f.INVALID_LINE:null,filesMap:t,filesMapChanges:o}}}function p(e){return e?"bytes"in e?d.from(e.bytes,"base64").toString():e.text:null}function m(e){var t,n=e.lines.length>0?(t=Math).min.apply(t,(0,o._)(e.lines.map(function(e){return e.content.match(/^[\t ]+/)}).flat().map(function(e){return(null==e?void 0:e.length)||0}))):0;return(0,i._)((0,r._)({},e),{dedentBy:n})}function v(e,t,n){for(var r=(0,o._)(e),i=new Set,a=0;a<r.length;a++){var l=r[a].path,c=t.get(l);n.has(l)&&c&&(r[a]=c,i.add(l))}var s=!0,u=!1,d=void 0;try{for(var f,h=n[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var p=f.value,m=t.get(p);!i.has(p)&&m&&r.push(m)}}catch(e){u=!0,d=e}finally{try{s||null==h.return||h.return()}finally{if(u)throw d}}return r}function g(e){var t=e.mode,n=e.query,r=e.context,i=e.isRegex,a=e.isCaseSensitive,s=e.isMatchingWholeWords,d=e.includeGlobs,h=e.excludeGlobs,p=void 0===h?(0,o._)(u.hD):h,m=["rg"];switch(t){case"json":m.push("--json");break;case"files":m.push("--files-with-matches")}return null!==r&&m.push("--context","".concat(r)),n.includes("\n")&&m.push("--multiline"),i||m.push("--fixed-strings"),m.push("--max-count","100"),m.push("--max-filesize","4M"),m.push("--max-depth","24"),m.push("--max-columns","512"),m.push("--max-columns-preview"),m.push(a?"--case-sensitive":"--ignore-case"),m.push("--hidden"),s&&m.push("--word-regexp"),m.push.apply(m,(0,o._)((0,c.m6)(d,p))),m.push("--",n),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f;return["sh","-c","".concat(l.apply(void 0,(0,o._)(e))," | head -c ").concat(t)]}(m)}},58591:function(e,t,n){var r,i;n.d(t,{f:function(){return r}}),(i=r||(r={})).PARTIAL_RESULTS="Displaying partial results, try being more specific with your search.",i.EMPTY_RESULTS="Nothing came up searching your Repl's content.",i.EMPTY_QUERY="No search query was provided.",i.INVALID_LINE="We encountered an invalid line while parsing your search results.",i.INVALID_COMMAND="Ripgrep returned an invalid response.",i.CONTAINER_DISCONNECTED="Disconnected from the container.",i.CONTAINER_CONNECTING="Connecting to the container.",i.CHANNEL_CLOSED="Channel was closed."},66554:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(96949);function i(e){(0,r.j)(r.U3.FILETREE_USED,e)}},98713:function(e,t,n){n.d(t,{YI:function(){return L},kW:function(){return A}});var r,i,o=n(41733),a=n(30509),l=n(3796),c=n(36809),s=n(63163),u=n(71711);n(75271),(r=i||(i={})).TEXT="TEXT",r.MENTION="MENTION",r.LINK="LINK",r.REPL_LINK="REPL_LINK",r.DEEP_LINK="DEEP_LINK",r.CODE="CODE",r.BOLD="BOLD",r.ITALICS="ITALICS",r.STRIKETHROUGH="STRIKETHROUGH",r.QUOTE="QUOTE";var d=function(e){var t=e.fragment,n=e.onClick;return(0,l.tZ)(u.Z,{size:"small",onClick:n,children:t.content})},f=function(e){var t=e.fragment,n=e.onClick;return(0,l.tZ)(u.Z,{size:"small",fontWeight:"medium",onClick:n,children:t.content})},h=function(e){var t=e.fragment,n=e.onClick;return(0,l.tZ)("a",{href:t.url,onClick:n,rel:"noreferrer noopener nofollow",target:"_blank",children:t.content})},p=function(e){var t=e.fragment,n=e.onClick;return(0,l.tZ)("a",{href:t.url,onClick:n,target:"_blank",children:t.content})},m=function(e){var t=e.fragment,n=e.onClick;return(0,l.tZ)("a",{href:t.url,onClick:n,children:t.content})},v=function(e){var t=e.fragment,n=e.onClick,r=e.style;return(0,l.tZ)("code",{onClick:n,style:r,children:t.content})},g=function(e){var t=e.fragment,n=e.onClick;return(0,l.tZ)("b",{onClick:n,children:t.content})},y=function(e){var t=e.fragment,n=e.onClick;return(0,l.tZ)("i",{onClick:n,children:t.content})},b=(0,c.X)({strikethrough:[{textDecoration:"line-through"}],blockquote:[s.l0.color.foregroundDimmest,s.l0.border({width:2,color:s.TV.foregroundDimmest,direction:"left"}),{paddingLeft:6}]}),w=function(e){var t=e.fragment,n=e.onClick;return(0,l.tZ)("span",{onClick:n,css:b.strikethrough,children:t.content})},Z=function(e){var t=e.fragment,n=e.onClick;return(0,l.tZ)("blockquote",{onClick:n,css:b.blockquote,children:t.content})},x=/(@[0-9a-zA-Z_]+)/,C=/(#[-a-zA-Z0-9@:%._+~#=/]+)/,k=/(https?:\/\/[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-zA-Z0-9()]{2,6}\b(?:[-a-zA-Z0-9()@:%_+.~#?&//=]*))/,S=/(`.+?`)/,_=/(\*\*.+?\*\*)/,E=/(_.+?_)/,T=/(\*.+?\*)/,R=/(~~.+?~~)/,D=/(^>.+?$\n?)/m,I=/\/@([0-9a-zA-Z_]+)\/(.+)/;function B(e){var t=e.url;return{type:"LINK",url:t,content:t}}function G(e){var t=e.hash;return{type:"DEEP_LINK",url:t,content:t}}var P=RegExp([S.source,_.source,E.source,T.source,R.source,k.source,x.source,C.source,D.source].join("|"),"m");function A(e,t){var n=e.split(P),r=[],i=[],o=!0,a=!1,l=void 0;try{for(var c,s=n[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value;if(u){var d=function(e,t){if(k.test(e)){var n={};try{n=new window.URL(e)}catch(t){return{content:e,type:"TEXT"}}return["repl.it","replit.com","firewalledreplit.com",document.location.host].includes(n.host)?n.pathname===t.replUrl?G({hash:n.hash}):I.test(n.pathname)?function(e){var t=e.url,n=I.exec(t.pathname);if(!n)throw Error("Not a Repl URL");return{type:"REPL_LINK",url:t.href,content:"@".concat(n[1],"/").concat(n[2]).concat(t.hash)}}({url:n}):B({url:e}):B({url:e})}if(C.test(e))return G({hash:e});if(D.test(e))return{type:"QUOTE",content:({text:e.slice(1).trim()}).text};if(S.test(e))return{type:"CODE",content:({code:e.slice(1,-1)}).code};if(_.test(e))return{type:"BOLD",content:({text:e.slice(2,-2)}).text};if(E.test(e)||T.test(e))return{type:"ITALICS",content:({text:e.slice(1,-1)}).text};if(R.test(e))return{type:"STRIKETHROUGH",content:({text:e.slice(2,-2)}).text};if(x.test(e)){var r=e.slice(1);if(!t.users||t.users.includes(r))return{type:"MENTION",username:r,content:"@".concat(r)}}return{content:e,type:"TEXT"}}(u,t);if(d){if("MENTION"===d.type){if(!d.username)continue;r.push(d.username)}i.push(d)}}}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return{tokens:i,mentions:r}}function L(e){var t=e.message,n=e.onMentionClick,r=void 0===n?function(){}:n,i=e.codeStyles,c=void 0===i?{}:i;return(0,l.tZ)(l.HY,{children:t.tokens.map(function(e,t){var n={fragment:e,key:t};return"MENTION"===e.type?(0,l.tZ)(f,(0,a._)((0,o._)({},n),{onClick:function(){return r(e)}})):"LINK"===e.type?(0,l.tZ)(h,(0,o._)({},n)):"REPL_LINK"===e.type?(0,l.tZ)(p,(0,o._)({},n)):"DEEP_LINK"===e.type?(0,l.tZ)(m,(0,o._)({},n)):"CODE"===e.type?(0,l.tZ)(v,(0,a._)((0,o._)({},n),{style:c})):"BOLD"===e.type?(0,l.tZ)(g,(0,o._)({},n)):"ITALICS"===e.type?(0,l.tZ)(y,(0,o._)({},n)):"STRIKETHROUGH"===e.type?(0,l.tZ)(w,(0,o._)({},n)):"QUOTE"===e.type?(0,l.tZ)(Z,(0,o._)({},n)):(0,l.tZ)(d,(0,o._)({},n))})})}},11999:function(e,t,n){n.d(t,{D:function(){return cY}});var r,i,o,a,l,c,s,u,d,f,h,p,m,v,g,y,b,w,Z,x,C=n(41733),k=n(30509),S=n(66626),_=n(63257),E=n(3796),T=n(62537),R=n(33083),D=n(92191),I=n(74044),B=n(99149),G=n(94717),P=n(69593),A=n(34209),L=n(85965),N=n(35139),O=n(29574),U=n(83059),X=n(42965),M=n(87915),F=n(17608),W=n(49982),V=n(33323),H=n(16865),z=n(61010),j=n(62407),q=n(37968),J=n(41639),Y=n(82424),$=n(7391),K=n.n($),Q=n(42306),ee=n(19236),et=n(49853),en=n(75271),er=n(35370),ei=n(52130),eo=n(97432),ea=n(14274),el=n(93245),ec=n(81346),es=n(37365),eu=n(63163),ed=n(86763),ef=n.n(ed),eh=n(28365),ep=n(24281),em=n(36809),ev=(0,em.X)({root:[eu.l0.height(48),eu.l0.backgroundColor.backgroundRoot,eu.l0.display.flex,eu.l0.justify.spaceBetween,eu.l0.align.stretch,{fontFamily:"Monaco, Menlo, 'Ubuntu Mono', Consolas, source-code-pro, monospace",button:[eu.l0.color.foregroundDefault,eu.l0.fontSize(16),eu.l0.flex.growAndShrink(1),{padding:"10px",fontFamily:"inherit",backgroundColor:"transparent",border:"0 none",flexBasis:"auto"}]}],fixedContainer:[eu.l0.position.fixed,eu.l0.width("100%"),eu.l0.zIndex(100),eu.l0.left(0)]}),eg=function(e){var t=e.buttons,n=e.onClick,r=e.onUndo,i=e.onRedo;return(0,E.BX)("nav",{css:ev.root,children:[t.map(function(e){return(0,E.tZ)("button",{onClick:function(t){t.stopPropagation(),t.preventDefault(),n(e)},children:void 0!==e.label?e.label:e.value},e.value)}),(0,E.tZ)("button",{onClick:function(e){e.stopPropagation(),e.preventDefault(),r()},children:(0,E.tZ)(ec.Z,{})}),(0,E.tZ)("button",{onClick:function(e){e.stopPropagation(),e.preventDefault(),i()},children:(0,E.tZ)(es.Z,{})})]})},ey=[{value:"{}",cursorOffset:1},{value:"()",cursorOffset:1},{value:'""',cursorOffset:1}],eb=function(e){var t=e.path,n=(0,_._)(ey).concat([{value:"= ",cursorOffset:2}]);return t.endsWith(".html")&&(n.unshift({value:"<>",cursorOffset:1}),n.unshift({label:"div",value:"<div></div>",cursorOffset:5})),n},ew="visualViewport"in window;function eZ(e){var t=e.filePath,n=e.isLoading,r=(0,eh.uN)(),i=(0,eo.d)({tablet:!1}),o=(0,ep.Vm)(),a=(0,ea.Z)();(0,en.useEffect)(function(){a&&r&&r.requestMeasure({read:function(){return{cursor:r.coordsAtPos(r.state.selection.main.head),scroller:r.scrollDOM.getBoundingClientRect()}},write:function(e){var t=e.cursor,n=e.scroller;if(t){var i=(t.top+t.bottom)/2,a=(n.top+n.bottom)/2;Math.abs(i-a)>5&&(r.scrollDOM.scrollTop+=i-a+(o?50:0))}}})},[a,r,o]);var l=(0,S._)((0,en.useState)(0),2),c=l[0],s=l[1];if((0,en.useEffect)(function(){if(o){var e=window.visualViewport;if(ew&&e){var t=ef()(function(){s(window.innerHeight-e.height-e.offsetTop)},100);return e.addEventListener("scroll",t),e.addEventListener("resize",t),function(){e.removeEventListener("scroll",t),e.removeEventListener("resize",t)}}}},[o]),!a||n||!i)return null;var u=(0,E.tZ)(eg,{onUndo:function(){r&&((0,ei.Yw)(r),r.focus())},onRedo:function(){r&&((0,ei.KX)(r),r.focus())},onClick:function(e){if(r){var t,n=null!==(t=r.state.selection.ranges[0].from)&&void 0!==t?t:0;r.dispatch({changes:{from:n,insert:e.value},selection:{anchor:n+e.cursorOffset}}),r.focus()}},buttons:eb({path:t})});return!o||ew?(0,E.tZ)(el.G,{css:ev.fixedContainer,style:{bottom:c},children:u}):u}var ex=n(73581),eC=n(49205),ek=n(79484),eS=n(83918),e_=n(27387),eE=n(96583),eT=n(3030),eR=n(42305),eD=n(54129),eI=n(92943),eB=n(23882),eG=n(25357),eP=n(26677),eA=new eR.j(function(e,t,n,r){return(0,eP.Rr)(e,t?(0,eG.ZF)("/home/runner/".concat(t.slug,"/").concat(n)):null,r)}),eL=n(12285),eN=n(80403),eO=n(64988),eU=n(16783),eX=n.n(eU),eM="".concat('url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"><circle cx="10" cy="10" r="10" fill="black" /></svg>\')',", linear-gradient(transparent, transparent)"),eF="".concat('url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"><path stroke="black" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="none" d="M2.5 10H15.5M15.5 10L9.5 5M15.5 10L9.5 15M18 4V16"/></svg>\')',", linear-gradient(transparent, transparent)"),eW=eT.tk.theme({".cm-vws-space":{backgroundColor:eu.TV.foregroundDimmest,maskImage:eM,maskSize:"0.375ch",maskPosition:"center",maskRepeat:"no-repeat","-webkit-mask-image":eM,"-webkit-mask-size":"0.375ch","-webkit-mask-position":"center","-webkit-mask-repeat":"no-repeat","&.cm-vws-leading":{opacity:.325},"&.cm-vws-enclosed":{opacity:.5},"&.cm-vws-trailing":{opacity:.5},"&.cm-vws-selected":{opacity:.75}},".cm-vws-tab":{backgroundColor:eu.TV.foregroundDimmest,maskImage:eF,maskSize:"1.75ch 1.75ch",maskPosition:"center",maskRepeat:"no-repeat","-webkit-mask-image":eF,"-webkit-mask-size":"1.75ch 1.75ch","-webkit-mask-position":"center","-webkit-mask-repeat":"no-repeat","&.cm-vws-leading":{opacity:.325,maskPosition:"left min(95%, 0.25ch) top 50%","-webkit-mask-position":"left min(95%, 0.25ch) top 50%"},"&.cm-vws-enclosed, &.cm-vws-trailing":{opacity:.5,maskPosition:"calc(50% - 0.25ch) 50%","-webkit-mask-position":"calc(50% - 0.25ch) 50%"},"&.cm-vws-selected":{opacity:.75}}}),eV=eX()(function(e,t,n){var r="cm-vws-".concat(" "===e?"space":"tab"," cm-vws-").concat(t).concat(n?" cm-vws-selected":"");return eT.p.mark({class:r})},function(e,t,n){return"".concat(e,"-").concat(t,"-").concat(n)});function eH(e,t,n){var r=e.facet(eq);if(!r.leading&&!r.enclosed&&!r.trailing&&!r.selected)return[];for(var i=[],o=e.doc.lineAt(t),a=e.doc.lineAt(n),l=o.number;l<=a.number;l++)!function(o){var a=e.doc.line(o),l=a.text.length;if(0!==l){var c=0===a.text.trim().length,s=!!r.selected&&e.selection.ranges.some(function(e){return!e.empty&&e.from<a.to&&e.to>=a.from});if(r.leading||r.enclosed||r.trailing||s){if(c){if(r.leading||r.trailing||s)for(var u=0;u<l;u++)!function(o){var l=a.text[o],c=a.from+o;if(!(c<t)&&!(c>=n)&&(" "===l||"	"===l)){var u=s&&e.selection.ranges.some(function(e){return e.from<=c&&e.to>c});(r.leading||r.trailing||u)&&i.push(eV(l,"trailing",u).range(c,c+1))}}(u);return}for(var d=l-a.text.trimStart().length,f=a.text.trim().length,h=0;h<l;h++)!function(o){var l=a.text[o],c=a.from+o;if(!(c<t)&&!(c>=n)&&(" "===l||"	"===l)){var u=void 0;u=o>=d+f?"trailing":o>d?"enclosed":"leading";var h=s&&e.selection.ranges.some(function(e){return e.from<=c&&e.to>c});(r[u]||h)&&i.push(eV(l,u,h).range(c,c+1))}}(h)}}}(l);return i}var ez=function(){"use strict";function e(t){(0,eL._)(this,e),this.decorations=eT.p.set(eH(t.state,0,t.state.doc.length))}return e.prototype.update=function(e){if((0,eO.aU)(e,eq)){this.decorations=eT.p.set(eH(e.state,0,e.state.doc.length));return}var t=e.state.facet(eq);if(e.docChanged||e.selectionSet&&t.selected){var n=this.decorations,r=null,i=null;if(e.selectionSet&&t.selected){var o=e.startState.selection.ranges.filter(function(e){return!e.empty}),a=(0,_._)(e.state.selection.ranges).concat((0,_._)(e.startState.selection.map(e.changes).ranges)).filter(function(e){return!e.empty});o.length&&(r=eN.jT.create(o)),a.length&&(i=eN.jT.create(a))}if(e.docChanged&&e.changes.iterChangedRanges(function(t,n,o,a){var l=eN.jT.range(e.startState.doc.lineAt(t).from,e.startState.doc.lineAt(n).to);r=r?r.addRange(l):eN.jT.create([l]);var c=eN.jT.range(e.state.doc.lineAt(o).from,e.state.doc.lineAt(a).to);i=i?i.addRange(c):eN.jT.create([c])}),r){var l=r.ranges;n=n.update({filter:function(e,t){return!l.some(function(n){return n.from<=e&&n.to>=t})},filterFrom:l[0].from,filterTo:l[l.length-1].to})}e.docChanged&&(n=n.map(e.changes)),i&&(n=n.update({add:i.ranges.map(function(t){return eH(e.state,t.from,t.to)}).flat()})),this.decorations=n}},e}(),ej=eT.lg.fromClass(ez,{decorations:function(e){return e.decorations}}),eq=eN.r$.define({combine:function(e){var t;return null!==(t=e[0])&&void 0!==t?t:{}},enables:[eW,eN.Wl.highest(ej)]}),eJ=new eR.j(function(e,t,n,r){return e||t||n||r?eq.of({leading:e,enclosed:t,trailing:n,selected:r}):null}),eY=n(36109),e$=n(37301),eK=n(23572),eQ=n(97763),e0=n(23469),e1=n(86472),e2=n(11208),e3=n(2309),e4=n(11568),e8=n(70593),e6=new eR.j(function(e,t,n,r,i,o){return e?e.formatters.map(function(e){var a;if(2===(a=e.id.split("/")).length&&a[1].includes("languageServer")){var l,c,s=n.find(function(t){return t.clientId===e.id});return s&&s&&s.isSupportedFile(o)&&r&&r.isFormatSupported&&(0,e0.Z)(s).isFormatSupported&&i?e$.Lf.of({format:(l=(0,e_._)(function(e,t,n){return(0,eE.Jh)(this,function(r){return[2,(t?s.request.formatRange(o,(0,eK.Ih)(e,t),n):s.request.format(o,n)).then(function(t){return"error"in t||t.cancelled?{error:!0}:t.result?{result:(0,e1.Z)(t.result,e.toString())}:{result:eN.as.empty(e.length)}})]})}),function(e,t,n){return l.apply(this,arguments)}),supportsRangeFormatting:(0,e0.Z)(s).isFormatRangeSupported,identifier:s.clientId,name:s.clientName}):[]}return(0,e4.F)(o,e)?e$.Lf.of({format:(c=(0,e_._)(function(n,r,i){var a,l,c,s,u;return(0,eE.Jh)(this,function(d){switch(d.label){case 0:if(!e.startCommand)throw Error("Expected formatter command");return a=(0,e8.Z)({container:t}),(l=e.startCommand.args).push("-f",o),r&&(l.push("--range-start",String(r.main.from)),l.push("--range-end",String(r.main.to))),l.push("--tab-size",String(i.tabSize)),i.insertSpaces&&l.push("--insert-spaces"),i.trimFinalNewlines&&l.push("--trim-final-newlines"),i.trimTrailingWhitespace&&l.push("--trim-trailing-whitespace"),i.insertFinalNewline&&l.push("--insert-final-newline"),e.startCommand.lifecycle===eY.api.Exec.Lifecycle.STDIN&&l.push("--stdin"),c="",s="",u=[a.onOutput(function(e){return c+=e}),a.onStderr(function(e){return s+=e}),a.dispose],[4,a.request((0,k._)((0,C._)({},e.startCommand),{args:l,lifecycle:eY.api.Exec.Lifecycle.STDIN,stdin:n.toString()})).then(function(e){var t=e.error;return u.forEach(function(e){return e()}),t?{error:!0,message:s}:{result:c}})];case 1:return[2,d.sent()]}})}),function(e,t,n){return c.apply(this,arguments)}),supportsRangeFormatting:e.supportsRangeFormatting,identifier:e.id,name:e.name}):null}).filter(Boolean):null}),e5=n(1076),e7=n(48096),e9=n(4955),te=n(9670),tt=function(e){"use strict";(0,e9._)(n,e);var t=(0,te._)(n);function n(e){var r;return(0,eL._)(this,n),(r=t.call(this)).type=e,r}return n.from=function(e){switch(e){case"yours":return this.yours;case"base":return this.base;case"middle":return this.middle;case"theirs":return this.theirs}},n.range=function(e,t,n){return this.from(e).range(t,n)},n}(eN.uU);function tn(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length,i=[],o=n;o<=r;){var a=e.lineAt(o),l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7;if(e.text.length<t)return null;var n=e.text[0],r=function(e){switch(e){case"<":return"yours";case"|":return"base";case"=":return"middle";case">":return"theirs";default:return null}}(n);if(!r)return null;var i=n.repeat(t);return e.text.slice(0,t)!==i||e.text.length>t&&" "!==e.text[t]?null:r}(a,t);l&&i.push(tt.range(l,a.from,a.to)),o=a.to+1}return i}tt.yours=new tt("yours"),tt.base=new tt("base"),tt.middle=new tt("middle"),tt.theirs=new tt("theirs");var tr=["yours","base","middle","theirs"];function ti(e){Array.isArray(e)&&(e=eN.Xs.of(e));var t=[],n=[];if(0===e.size)return{hunks:t,hanging:n};for(var r=e.iter();null!==r.value;){var i,o,a,l={},c={},s=[],u=!0,d=!1,f=void 0;try{for(var h,p=tr[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var m=h.value,v=r.value,g=r.from,y=r.to;if("base"!==m||v.type===m){if(v.type===m)l[m]={from:g,to:y},s.push({from:g,to:y,type:v.type});else if("yours"!==v.type)s.push({from:g,to:y,type:v.type});else break;if(r.next(),null===r.value)break}}}catch(e){d=!0,f=e}finally{try{u||null==p.return||p.return()}finally{if(d)throw f}}if(!l.yours||!l.middle||!l.theirs){n.push.apply(n,(0,_._)(s));continue}null!==(i=l.base)&&void 0!==i||(l.base=null),null!==(o=c.base)&&void 0!==o||(c.base=null);var b=null!==(a=l.base)&&void 0!==a?a:l.middle,w=l.yours.to+1,Z=b.from-1;if(c.yours=w<Z?{from:w,to:Z}:null,l.base){var x=l.base.to+1,C=l.middle.from-1;c.base=x<C?{from:x,to:C}:null}var k=l.middle.to+1,S=l.theirs.from-1;c.theirs=k<S?{from:k,to:S}:null;var E={from:l.yours.from,to:l.theirs.to,markers:l,content:c};t.push(E)}return{hunks:t,hanging:n}}var to=eN.r$.define({combine:function(e){return e.length?e[0]:7}}),ta=eN.QQ.define({create:function(e){var t=e.doc,n=e.facet(to),r=eN.Xs.of(tn(t,n)),i=ti(r);return{markers:r,hunks:i.hunks,hanging:i.hanging}},update:function(e,t){var n=t.newDoc,r=t.startState.facet(to),i=t.state.facet(to);if(r!==i){var o=eN.Xs.of(tn(n,i)),a=ti(o);return{markers:o,hunks:a.hunks,hanging:a.hanging}}if(!t.docChanged)return e;var l=null,c=null,s=null,u=null;t.changes.iterChangedRanges(function(e,t,n,r){l=null===l?e:Math.min(l,e),c=null===c?t:Math.max(c,t),s=null===s?n:Math.min(s,n),u=null===u?r:Math.max(u,r)});var d=e.markers;if(null!==l&&null!==c){var f=t.startState.doc.lineAt(l).from,h=t.startState.doc.lineAt(c).to;d=d.update({filter:function(){return!1},filterFrom:f,filterTo:h})}d=d.map(t.changes),null!==s&&null!==u&&(d=d.update({add:tn(n,i,s,u)}));var p=ti(d);return{markers:d,hunks:p.hunks,hanging:p.hanging}}}),tl=eT.tk.atomicRanges.from(ta,function(e){return function(){return e.markers}}),tc=eN.yy.changeFilter.of(function(e){var t=e.startState.field(ta);if(!e.docChanged||0===t.markers.size)return!0;var n=e.startState.doc,r=[];return e.changes.iterChanges(function(e,i,o,a,l){var c=l.length,s=Math.max(n.lineAt(e).from-1,0),u=Math.min(n.lineAt(i).to+1,n.length);t.markers.between(s,u,function(t,s){e<=t&&i>=s||0!==c&&(e===s&&"\n"===l.sliceString(0,1)||i===t&&"\n"===l.sliceString(c-1,c))||o===a&&(i===s+1&&0===n.lineAt(i).length||e===t-1&&0===n.lineAt(e).length)||r.push(t-1,s+1)})}),!(r.length>0)||r}),ts=eN.yy.transactionFilter.of(function(e){var t=e.docChanged?e.state.field(ta):e.startState.field(ta);if(0===t.markers.size)return e;var n=e.newSelection,r=!1,i=!1;do{i=!1;for(var o=0;o<n.ranges.length&&"break"!==function(e){var o=n.ranges[e],a=o.from,l=o.to,c=a,s=l;if(t.markers.between(a,l,function(e,t){var n=(e+t)/2;a>e&&a<t&&(c=a<n?e:t),l>e&&l<t&&(s=l<n?e:t)}),c!==a||s!==l){var u,d=o.anchor<o.head?c:s,f=o.anchor<o.head?s:c,h=o.goalColumn,p=null!==(u=o.bidiLevel)&&void 0!==u?u:void 0,m=eN.jT.range(d,f,h,p);return n=n.replaceRange(m,e),i=!0,r=!0,"break"}}(o);o++);}while(i);return r?[e,{selection:n,sequential:!0}]:e}),tu=n(42516),td="cm-git-conflict-marker-yours",tf="cm-git-conflict-marker-base",th="cm-git-conflict-marker-middle",tp="cm-git-conflict-marker-theirs",tm="cm-git-conflict-marker-hanging",tv="cm-git-conflict-content-yours",tg="cm-git-conflict-content-base",ty="cm-git-conflict-content-theirs";function tb(e){var t=e.background,n=e.color,r=e.noBorder,i={color:n,backgroundColor:t,backgroundClip:"padding-box",paddingTop:eu.TV.space4,paddingBottom:eu.TV.space4,fontWeight:eu.TV.fontWeightBold};return void 0!==r&&r||(i.borderLeft="4px solid rgba(0, 150, 255, 0.1)",i.paddingLeft="2px"),i}function tw(e){return{backgroundColor:e.background,backgroundClip:"padding-box",borderLeft:"4px solid rgba(0, 150, 255, 0.1)",paddingLeft:"2px"}}var tZ=eT.tk.theme((d={},(0,tu._)(d,".".concat(td),tb({background:"rgba(0, 150, 255, 0.1)",color:eu.TV.blueStrongest,noBorder:!0})),(0,tu._)(d,".".concat(th),tb({background:"rgba(255, 0, 0, 0.1)",color:eu.TV.redStrongest})),(0,tu._)(d,".".concat(tf),tb({background:"rgba(255, 165, 0, 0.1)",color:eu.TV.orangeStrongest})),(0,tu._)(d,".".concat(tp),tb({background:"rgba(0, 150, 255, 0.1)",color:eu.TV.blueStrongest,noBorder:!0})),(0,tu._)(d,".".concat(tm),tb({background:"rgba(100, 150, 255, 0.1)",color:eu.TV.blueStrongest,noBorder:!0})),(0,tu._)(d,".".concat(tv),tw({background:"rgba(0, 255, 0, 0.1)"})),(0,tu._)(d,".".concat(ty),tw({background:"rgba(255, 0, 0, 0.1)"})),(0,tu._)(d,".".concat(tg),tw({background:"rgba(255, 165, 0, 0.1)"})),d)),tx={yours:{marker:eT.p.line({class:td}),content:eT.p.line({class:tv})},base:{marker:eT.p.line({class:tf}),content:eT.p.line({class:tg})},middle:{marker:eT.p.line({class:th})},theirs:{marker:eT.p.line({class:tp}),content:eT.p.line({class:ty})},hanging:{marker:eT.p.line({class:tm})}},tC=function(){"use strict";function e(t){(0,eL._)(this,e),this.builder=new eN.f_,this.doc=t}var t=e.prototype;return t.add=function(e,t){var n=this.doc.lineAt(e.from);if(n.to>=e.to){this.builder.add(n.from,n.from,t);return}for(var r=n.from;r<=e.to;)this.builder.add(r,r,t),r=this.doc.lineAt(r).to+1},t.finish=function(){return this.builder.finish()},e}(),tk=eT.tk.decorations.from(ta,function(e){return function(t){var n=new tC(t.state.doc),r=!0,i=!1,o=void 0;try{for(var a,l=e.hunks[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;t.viewport.from>c.to||t.viewport.to<c.from||(n.add(c.markers.yours,tx.yours.marker),c.content.yours&&n.add(c.content.yours,tx.yours.content),c.markers.base&&n.add(c.markers.base,tx.base.marker),c.content.base&&n.add(c.content.base,tx.base.content),n.add(c.markers.middle,tx.middle.marker),c.content.theirs&&n.add(c.content.theirs,tx.theirs.content),n.add(c.markers.theirs,tx.theirs.marker))}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n.finish()}}),tS=eT.tk.decorations.from(ta,function(e){return function(){var t=new eN.f_,n=!0,r=!1,i=void 0;try{for(var o,a=e.hanging[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;t.add(l.from,l.from,tx.hanging.marker)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t.finish()}}),t_=[ta,[tl,tc,ts],[eN.Wl.lowest(tZ),tk,tS]],tE=n(96442),tT=function(){"use strict";function e(t,n,r,i,o,a){(0,eL._)(this,e),this.original=t,this.current=n,this.chunks=r,this.desc=i,this.pending=o,this.ranges=a}var t=e.prototype;return t.hasChanges=function(){return this.ranges.length>0},t.update=function(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0,a=this.original,l=this.chunks,c=this.desc,s=this.pending,u=this.ranges;if(Math.abs((this.pending?this.pending.length:this.current.length)-t.length)>=250||i){var d=(0,tE.Gj)(c,s,n).pending;l=(0,tE.U_)(a,t,{chunks:l,changesB:d},o),c=(0,tE.fu)(l,a.length),s=null,u=(0,tE.Hu)(c)}else s=(r=(0,tE.Gj)(c,s,n)).pending,c=r.desc,u=(0,tE.Hu)(c);return s&&t.eq(a)&&(l=[],c=eN.as.empty(a.length),s=null,u=[]),new e(a,t,l,c,s,u)},t.isAccurate=function(){return null===this.pending},t.getLineChangeType=function(e){var t=this.current.line(e);return 0===this.original.length&&this.current.length>0?tE.dQ.COVERED:(0,tE.dx)(t,tE.MF.B,this.ranges)},t.iterRanges=function(){return(0,eE.Jh)(this,function(e){switch(e.label){case 0:return[5,(0,eE.XA)(this.ranges)];case 1:return e.sent(),[2]}})},e.create=function(t,n,r){var i=(0,tE.U_)(t,n,void 0,r),o=(0,tE.fu)(i,t.length),a=(0,tE.Hu)(o);return new e(t,n,i,o,null,a)},e}(),tR=eN.r$.define({combine:function(e){var t;return null!==(t=e.filter(Boolean)[0])&&void 0!==t?t:null}}),tD=eN.QQ.define({create:function(){return null},update:function(e,t){var n=t.state.facet(tR);return!n||Math.max(n.lines,t.newDoc.lines)>5e3||Math.max(n.length,t.newDoc.length)>4e5?null:(e&&e.original.eq(n)?t.docChanged&&(e=e.update(t.newDoc,t.changes,!(t.isUserEvent("input.type")||t.isUserEvent("delete.forward")||t.isUserEvent("delete.backward")))):e=tT.create(n,t.newDoc,{scanLimit:4e4}),e)}}),tI=n(71215),tB=(0,eT.v5)({class:tI.Tr,renderEmptyElements:!0,lineMarker:function(e,t){var n=e.state.field(tD,!1);if(!n||!n.hasChanges())return tI.Do;if(0===n.original.length)return tI.Vt;var r=e.state.doc.lineAt(t.from);switch(n.getLineChangeType(r.number)){case tE.dQ.COVERED:return tI.vP;case tE.dQ.MODIFIED:return tI.wp;default:return tI.Do}},initialSpacer:function(e){return e.state.field(tD,!1)?tI.Vt:tI.Do},updateSpacer:function(e,t){var n=t.state.field(tD,!1)?tI.Vt:tI.Do;return e===n?e:n}}),tG=eN.r$.define({enables:function(e){return[tR.computeN([e],function(t){return t.facet(e)}),tI.Lw,tD,eN.Wl.highest(tB)]}}),tP=n(52870);(o=f||(f={})).GUTTER_DIFF="GUTTER_DIFF",o.INLINE_DIFF="INLINE_DIFF";var tA=eN.Py.define(),tL=eN.Py.define(),tN=eN.QQ.define({create:function(){return{head:null,mode:"GUTTER_DIFF"}},update:function(e,t){var n=e.head,r=e.mode,i=!0,o=!1,a=void 0;try{for(var l,c=t.effects[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;s.is(tA)?n=s.value:s.is(tL)&&(r=s.value)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return n!==e.head||r!==e.mode?{head:n,mode:r}:e},provide:function(e){return[tG.from(e,function(e){return"GUTTER_DIFF"===e.mode?e.head:null}),tP.p.from(e,function(e){return"INLINE_DIFF"===e.mode?e.head:null})]}}),tO=function(){"use strict";function e(t,n,r){var i=this;(0,eL._)(this,e),this.view=t,this.git=n,this.path=r,this.disposed=!1,this.dispose=n.onRefresh(function(){return i.fetchThenUpdateState()}),this.fetchThenUpdateState()}var t=e.prototype;return t.fetchThenUpdateState=function(){var e=this;return(0,e_._)(function(){var t,n,r,i,o;return(0,eE.Jh)(this,function(a){switch(a.label){case 0:return[4,e.git.getFileContents({path:e.path,revision:"HEAD",convertToBase64:(0,er.T3)(e.path)})];case 1:if(t=a.sent(),e.disposed||!(n=e.view.state.field(tN,!1)))return[2];return(!(o=null===(i=t.error?null:null!==(r=t.content)&&void 0!==r?r:"")?null:e.view.state.toText(i))!=!n.head||o&&n.head&&!o.eq(n.head))&&e.view.dispatch({effects:tA.of(o)}),[2]}})})()},t.destroy=function(){this.dispose(),this.disposed=!0},e}(),tU=n(14118),tX=new eR.j(function(e,t,n){var r=[t?[tN,eT.lg.define(function(n){return new tO(n,e,t)})]:[]];return n||r.push(t_),r}),tM=n(63115),tF=n(12717),tW=n(99842),tV=n(7351),tH=n(8571),tz=n(87183),tj=n(41091),tq=n(52927),tJ=n(63188),tY=n(24766),t$=n(85551),tK=n(43885),tQ="cm-ghostwriter-hint-tooltip",t0=eT.tk.theme((0,tu._)({".cm-ghostwriter-hint":{display:"none",width:"100%",backgroundColor:eu.TV.backgroundHigher,borderTop:"solid 1px ".concat(eu.TV.outlineDefault)}},".cm-tooltip-autocomplete.".concat(tQ," .cm-ghostwriter-hint"),{display:"block"})),t1=(0,em.X)({hint:[eu.l0.p(4),eu.l0.rowWithGap(8),eu.l0.align.center,eu.l0.font.default,{opacity:.6}],prompt:[eu.l0.rowWithGap(4),eu.l0.align.center]});function t2(){return(0,E.BX)(el.G,{css:t1.hint,children:[(0,E.tZ)(t$.Z,{width:8,height:8}),(0,E.BX)(el.G,{css:t1.prompt,children:[(0,E.tZ)(tK.ZP,{size:"small",dimmed:!1,shortcut:{key:"tab"}}),(0,E.tZ)(tY.xv,{variant:"small",multiline:!1,children:"to use AI suggestion."})]})]})}var t3=eT.lg.define(function(e){var t=function(){var t,n,r;return(0,_._)(e.dom.children).concat((0,_._)(null!==(r=null===(n=tJ.yb.get(e))||void 0===n?void 0:null===(t=n.children[0])||void 0===t?void 0:t.children)&&void 0!==r?r:[])).filter(function(e){return e.classList.contains("cm-tooltip-autocomplete")})},n=function(e){return Array.from(e.children).filter(function(e){return e.classList.contains("cm-ghostwriter-hint")})},r=!1;return{update:function(){null!==(0,tV.LR)(e.state)&&Promise.resolve().then(function(){if(!r){var e=!0,i=!1,o=void 0;try{for(var a,l=t()[Symbol.iterator]();!(e=(a=l.next()).done);e=!0){var c=a.value,s=n(c);if(0===s.length){var u=(0,tq.V)((0,E.tZ)(t2,{}));u.className="cm-ghostwriter-hint",c.appendChild(u)}}}catch(e){i=!0,o=e}finally{try{e||null==l.return||l.return()}finally{if(i)throw o}}}})},destroy:function(){var e=!0,i=!1,o=void 0;try{for(var a,l=t()[Symbol.iterator]();!(e=(a=l.next()).done);e=!0){var c=a.value,s=!0,u=!1,d=void 0;try{for(var f,h=n(c)[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var p=f.value;c.removeChild(p)}}catch(e){u=!0,d=e}finally{try{s||null==h.return||h.return()}finally{if(u)throw d}}}}catch(e){i=!0,o=e}finally{try{e||null==l.return||l.return()}finally{if(i)throw o}}r=!0}}}),t4=n(10777),t8=n(96949),t6=n(97420),t5=n(66591),t7=n(7225),t9=n(38935),ne=n(12623),nt=(0,em.X)({styles0:[{p:{whiteSpace:"pre-wrap"}}]}),nn={p:{padding:"".concat(eu.TV.space2," ").concat(eu.TV.space8),lineHeight:1.4,marginBottom:"".concat(eu.TV.space8," !important")},"p:first-of-type":{marginTop:"".concat(eu.TV.space4," !important")},"p:last-of-type":{marginBottom:"".concat(eu.TV.space4," !important")},pre:{margin:"".concat(eu.TV.space2," ").concat(eu.TV.space8)},"pre + p":{borderTop:"1px solid ".concat(eu.TV.outlineDimmest),paddingTop:eu.TV.space4},"h1, h2, h3":{margin:"".concat(eu.TV.space8," !important"),marginTop:"".concat(eu.TV.space12," !important"),padding:"0 !important",paddingBottom:"".concat(eu.TV.space4," !important"),fontSize:"100% !important",borderBottom:"1px solid ".concat(eu.TV.backgroundHighest," !important"),lineHeight:1},"h1:first-of-type, h2:first-of-type, h3:first-of-type":{marginTop:"".concat(eu.TV.space4," !important")},hr:{margin:"".concat(eu.TV.space8," !important"),borderTop:"2px solid ".concat(eu.TV.backgroundHighest," !important")},li:{margin:"".concat(eu.TV.space2," ").concat(eu.TV.space8)},".lsp-completion-detail":{borderBottom:"1px solid ".concat(eu.TV.backgroundHighest),marginBottom:eu.TV.space4},".cm-line":{paddingLeft:eu.TV.space4,paddingRight:eu.TV.space4},".cm-content":{paddingLeft:eu.TV.space4,paddingRight:eu.TV.space4}},nr=(0,en.memo)(function(e){var t=e.content,n=e.className;return(0,E.tZ)(el.G,{css:nn,children:(0,E.tZ)(t9.ZP,{className:n,components:{code:function(e){return(0,E.tZ)(ne.Z,(0,C._)({minimal:!0,disableCopy:!0},e))}},children:t})})});function ni(e){var t=e.content,n=e.className;return"string"==typeof t?(0,E.tZ)(nr,{css:nt.styles0,className:n,content:t}):t.kind===t7.MarkupKind.PlainText?(0,E.tZ)(el.G,{children:(0,E.tZ)(tY.xv,{className:n,children:t.value})}):(0,E.tZ)(nr,{className:n,content:t.value})}var no=n(98924),na=n(55992),nl=n(4384),nc=n(83176),ns=n(25490);(a=h||(h={}))[a.Dollar=0]="Dollar",a[a.Colon=1]="Colon",a[a.Comma=2]="Comma",a[a.CurlyOpen=3]="CurlyOpen",a[a.CurlyClose=4]="CurlyClose",a[a.Backslash=5]="Backslash",a[a.Forwardslash=6]="Forwardslash",a[a.Pipe=7]="Pipe",a[a.Int=8]="Int",a[a.VariableName=9]="VariableName",a[a.Format=10]="Format",a[a.Plus=11]="Plus",a[a.Dash=12]="Dash",a[a.QuestionMark=13]="QuestionMark",a[a.EOF=14]="EOF";var nu=function(){"use strict";function e(){(0,eL._)(this,e),this.value="",this.pos=0}var t=e.prototype;return t.text=function(e){this.value=e,this.pos=0},t.tokenText=function(e){return this.value.substr(e.pos,e.len)},t.next=function(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};var t,n=this.pos,r=0,i=this.value.charCodeAt(n);if("number"==typeof(t=e._table[i]))return this.pos+=1,{type:t,pos:n,len:1};if(e.isDigitCharacter(i)){t=8;do r+=1,i=this.value.charCodeAt(n+r);while(e.isDigitCharacter(i));return this.pos+=r,{type:t,pos:n,len:r}}if(e.isVariableCharacter(i)){t=9;do i=this.value.charCodeAt(n+ ++r);while(e.isVariableCharacter(i)||e.isDigitCharacter(i));return this.pos+=r,{type:t,pos:n,len:r}}t=10;do r+=1,i=this.value.charCodeAt(n+r);while(!isNaN(i)&&void 0===e._table[i]&&!e.isDigitCharacter(i)&&!e.isVariableCharacter(i));return this.pos+=r,{type:t,pos:n,len:r}},e.isDigitCharacter=function(e){return e>=48&&e<=57},e.isVariableCharacter=function(e){return 95===e||e>=97&&e<=122||e>=65&&e<=90},e}();nu._table=(p={},(0,tu._)(p,36,0),(0,tu._)(p,58,1),(0,tu._)(p,44,2),(0,tu._)(p,123,3),(0,tu._)(p,125,4),(0,tu._)(p,92,5),(0,tu._)(p,47,6),(0,tu._)(p,124,7),(0,tu._)(p,43,11),(0,tu._)(p,45,12),(0,tu._)(p,63,13),p);var nd=function(){"use strict";function e(){(0,eL._)(this,e),this._children=[],function(e,t){t.forEach(function(t){Object.defineProperty(e,t,{enumerable:!1,writable:!0})})}(this,["parent"])}var t=e.prototype;return t.appendChild=function(e){return e instanceof nf&&this._children[this._children.length-1]instanceof nf?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this},t.replace=function(e,t){var n=e.parent,r=n.children.indexOf(e),i=n.children.slice(0);i.splice.apply(i,[r,1].concat((0,_._)(t))),n._children=i,function e(t,n){var r=!0,i=!1,o=void 0;try{for(var a,l=t[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;c.parent=n,e(c.children,c)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}(t,n)},t.toString=function(){return this.children.reduce(function(e,t){return e+t.toString()},"")},t.len=function(){return 0},t.match=function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=Object.entries(nx)[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=(0,S._)(i.value,2),l=a[0],c=a[1];if(this instanceof c&&l in e)return e[l](this)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}},(0,nl._)(e,[{key:"children",get:function(){return this._children}},{key:"rightMostDescendant",get:function(){return this._children.length>0?this._children[this._children.length-1].rightMostDescendant:this}},{key:"snippet",get:function(){for(var e=this;;){if(!e)return;if(e instanceof nw)return e;e=e.parent}}}]),e}(),nf=function(e){"use strict";(0,e9._)(n,e);var t=(0,te._)(n);function n(e){var r;return(0,eL._)(this,n),(r=t.call(this)).value=e,r}var r=n.prototype;return r.toString=function(){return this.value},r.toTextmateString=function(){return n.escape(this.value)},r.len=function(){return this.value.length},r.clone=function(){return new n(this.value)},n.escape=function(e){return e.replace(/\$|}|\\/g,"\\$&")},n}(nd),nh=function(e){"use strict";(0,e9._)(n,e);var t=(0,te._)(n);function n(){return(0,eL._)(this,n),t.apply(this,arguments)}return n}(nd),np=function(e){"use strict";(0,e9._)(n,e);var t=(0,te._)(n);function n(e){var r;return(0,eL._)(this,n),(r=t.call(this)).index=e,r}var r=n.prototype;return r.toTextmateString=function(){var e="";return(this.transform&&(e=this.transform.toTextmateString()),0!==this.children.length||this.transform)?0===this.children.length?"${".concat(this.index).concat(e,"}"):this.choice?"${".concat(this.index,"|").concat(this.choice.toTextmateString(),"|").concat(e,"}"):"${".concat(this.index,":").concat(this.children.map(function(e){return e.toTextmateString()}).join("")).concat(e,"}"):"$".concat(this.index)},r.clone=function(){var e=new n(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(function(e){return e.clone()}),e},n.compareByIndex=function(e,t){return e.index===t.index?0:e.isFinalTabstop?1:t.isFinalTabstop||e.index<t.index?-1:e.index>t.index?1:0},(0,nl._)(n,[{key:"isFinalTabstop",get:function(){return 0===this.index}},{key:"choice",get:function(){return 1===this._children.length&&this._children[0]instanceof nm?this._children[0]:void 0}}]),n}(nh),nm=function(e){"use strict";(0,e9._)(n,e);var t=(0,te._)(n);function n(){var e;return(0,eL._)(this,n),e=t.apply(this,arguments),e.options=[],e}var r=n.prototype;return r.appendChild=function(e){return e instanceof nf&&(e.parent=this,this.options.push(e)),this},r.toString=function(){return this.options[0].value},r.toTextmateString=function(){return this.options.map(function(e){return e.value.replace(/\||,|\\/g,"\\$&")}).join(",")},r.len=function(){return this.options[0].len()},r.clone=function(){var e=new n;return this.options.forEach(e.appendChild,e),e},n}(nd),nv=function(e){"use strict";(0,e9._)(n,e);var t=(0,te._)(n);function n(){var e;return(0,eL._)(this,n),e=t.apply(this,arguments),e.regexp=RegExp(""),e}var r=n.prototype;return r.resolve=function(e){var t=this,n=!1,r=e.replace(this.regexp,function(){for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];return n=!0,t._replace(r.slice(0,-2))});return!n&&this._children.some(function(e){return e instanceof ng&&!!e.elseValue})&&(r=this._replace([])),r},r._replace=function(e){var t="",n=!0,r=!1,i=void 0;try{for(var o,a=this._children[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if(l instanceof ng){var c=e[l.index]||"";c=l.resolve(c),t+=c}else t+=l.toString()}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t},r.toString=function(){return""},r.toTextmateString=function(){return"/".concat(this.regexp.source,"/").concat(this.children.map(function(e){return e.toTextmateString()}),"/").concat((this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":""))},r.clone=function(){var e=new n;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map(function(e){return e.clone()}),e},n}(nd),ng=function(e){"use strict";(0,e9._)(n,e);var t=(0,te._)(n);function n(e,r,i,o){var a;return(0,eL._)(this,n),(a=t.call(this)).index=e,a.shorthandName=r,a.ifValue=i,a.elseValue=o,a}var r=n.prototype;return r.resolve=function(e){if("upcase"===this.shorthandName)return e?e.toLocaleUpperCase():"";if("downcase"===this.shorthandName)return e?e.toLocaleLowerCase():"";if("capitalize"===this.shorthandName)return e?e[0].toLocaleUpperCase()+e.substr(1):"";if("pascalcase"===this.shorthandName)return e?this._toPascalCase(e):"";if("camelcase"===this.shorthandName)return e?this._toCamelCase(e):"";if(e&&"string"==typeof this.ifValue)return this.ifValue;if(!e&&"string"==typeof this.elseValue)return this.elseValue;else return e||""},r._toPascalCase=function(e){var t=e.match(/[a-z0-9]+/gi);return t?t.map(function(e){return e.charAt(0).toUpperCase()+e.substr(1)}).join(""):e},r._toCamelCase=function(e){var t=e.match(/[a-z0-9]+/gi);return t?t.map(function(e,t){return 0===t?e.charAt(0).toLowerCase()+e.substr(1):e.charAt(0).toUpperCase()+e.substr(1)}).join(""):e},r.toTextmateString=function(){var e="${";return e+=this.index,this.shorthandName?e+=":/".concat(this.shorthandName):this.ifValue&&this.elseValue?e+=":?".concat(this.ifValue,":").concat(this.elseValue):this.ifValue?e+=":+".concat(this.ifValue):this.elseValue&&(e+=":-".concat(this.elseValue)),e+="}"},r.clone=function(){return new n(this.index,this.shorthandName,this.ifValue,this.elseValue)},n}(nd),ny=function(e){"use strict";(0,e9._)(n,e);var t=(0,te._)(n);function n(e){var r;return(0,eL._)(this,n),(r=t.call(this)).name=e,r}var r=n.prototype;return r.resolve=function(e){var t=e.resolve(this);return this.transform&&(t=this.transform.resolve(t||"")),void 0!==t&&(this._children=[new nf(t)],!0)},r.toTextmateString=function(){var e="";return(this.transform&&(e=this.transform.toTextmateString()),0===this.children.length)?"${".concat(this.name).concat(e,"}"):"${".concat(this.name,":").concat(this.children.map(function(e){return e.toTextmateString()}).join("")).concat(e,"}")},r.clone=function(){var e=new n(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map(function(e){return e.clone()}),e},n}(nh);function nb(e,t){for(var n=(0,_._)(e);n.length>0;){var r=n.shift();if(!t(r))break;n.unshift.apply(n,(0,_._)(r.children))}}var nw=function(e){"use strict";(0,e9._)(n,e);var t=(0,te._)(n);function n(){return(0,eL._)(this,n),t.apply(this,arguments)}var r=n.prototype;return r.offset=function(e){var t=0,n=!1;return(this.walk(function(r){return r===e?(n=!0,!1):(t+=r.len(),!0)}),n)?t:-1},r.fullLen=function(e){var t=0;return nb([e],function(e){return t+=e.len(),!0}),t},r.enclosingPlaceholders=function(e){for(var t=[],n=e.parent;n;)n instanceof np&&t.push(n),n=n.parent;return t},r.resolveVariables=function(e){var t=this;return this.walk(function(n){return n instanceof ny&&n.resolve(e)&&delete t._placeholders,!0}),this},r.appendChild=function(e){return delete this._placeholders,(0,nc._)((0,ns._)(n.prototype),"appendChild",this).call(this,e)},r.replace=function(e,t){return delete this._placeholders,(0,nc._)((0,ns._)(n.prototype),"replace",this).call(this,e,t)},r.toTextmateString=function(){return this.children.reduce(function(e,t){return e+t.toTextmateString()},"")},r.clone=function(){var e=new n;return this._children=this.children.map(function(e){return e.clone()}),e},r.walk=function(e){nb(this.children,e)},(0,nl._)(n,[{key:"placeholderInfo",get:function(){if(!this._placeholders){var e,t=[];this.walk(function(n){return n instanceof np&&(t.push(n),e=!e||e.index<n.index?n:e),!0}),this._placeholders={all:t,last:e}}return this._placeholders}},{key:"placeholders",get:function(){return this.placeholderInfo.all}}]),n}(nd),nZ=function(){"use strict";function e(){(0,eL._)(this,e),this._scanner=new nu,this._token={type:14,pos:0,len:0}}var t=e.prototype;return t.text=function(e){return this.parse(e).toString()},t.parse=function(e,t,n){var r=new nw;return this.parseFragment(e,r),this.ensureFinalTabstop(r,null!=n&&n,null!=t&&t),r},t.parseFragment=function(e,t){var n=t.children.length;for(this._scanner.text(e),this._token=this._scanner.next();this._parse(t););var r=new Map,i=[];t.walk(function(e){return e instanceof np&&(e.isFinalTabstop?r.set(0,void 0):!r.has(e.index)&&e.children.length>0?r.set(e.index,e.children):i.push(e)),!0});var o=function(e,n){var i=r.get(e.index);if(i){var a=new np(e.index);a.transform=e.transform;var l=!0,c=!1,s=void 0;try{for(var u,d=i[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value.clone();a.appendChild(f),f instanceof np&&r.has(f.index)&&!n.has(f.index)&&(n.add(f.index),o(f,n),n.delete(f.index))}}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}t.replace(e,[a])}},a=new Set,l=!0,c=!1,s=void 0;try{for(var u,d=i[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value;o(f,a)}}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}return t.children.slice(n)},t.ensureFinalTabstop=function(e,t,n){(t||n&&e.placeholders.length>0)&&!e.placeholders.find(function(e){return 0===e.index})&&e.appendChild(new np(0))},t._accept=function(e,t){if(void 0===e||this._token.type===e){var n=!t||this._scanner.tokenText(this._token);return this._token=this._scanner.next(),n}return!1},t._backTo=function(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1},t._until=function(e){for(var t=this._token;this._token.type!==e;){if(14===this._token.type)return!1;if(5===this._token.type){var n=this._scanner.next();if(0!==n.type&&4!==n.type&&5!==n.type)return!1}this._token=this._scanner.next()}var r=this._scanner.value.substring(t.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),r},t._parse=function(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)},t._parseEscaped=function(e){var t;return!!(t=this._accept(5,!0))&&(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new nf(t)),!0)},t._parseTabstopOrVariableName=function(e){var t,n=this._token;return this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(t)?new np(Number(t)):new ny(t)),!0):this._backTo(n)},t._parseComplexPlaceholder=function(e){var t,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0))))return this._backTo(n);var r=new np(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new nf("${"+t+":")),r.children.forEach(e.appendChild,e),!0}else if(r.index>0&&this._accept(7))for(var i=new nm;;){if(this._parseChoiceElement(i)){if(this._accept(2))continue;if(this._accept(7)&&(r.appendChild(i),this._accept(4)))return e.appendChild(r),!0}return this._backTo(n),!1}else if(this._accept(6))return this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(n),!1);else if(this._accept(4))return e.appendChild(r),!0;else return this._backTo(n)},t._parseChoiceElement=function(e){for(var t=this._token,n=[];2!==this._token.type&&7!==this._token.type;){var r=void 0;if(!(r=(r=this._accept(5,!0))?this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||r:this._accept(void 0,!0)))return this._backTo(t),!1;n.push(r)}return 0===n.length?(this._backTo(t),!1):(e.appendChild(new nf(n.join(""))),!0)},t._parseComplexVariable=function(e){var t,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0))))return this._backTo(n);var r=new ny(t);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(r),!0;if(!this._parse(r))return e.appendChild(new nf("${"+t+":")),r.children.forEach(e.appendChild,e),!0}else if(this._accept(6))return this._parseTransform(r)?(e.appendChild(r),!0):(this._backTo(n),!1);else if(this._accept(4))return e.appendChild(r),!0;else return this._backTo(n)},t._parseTransform=function(e){for(var t=new nv,n="",r="";!this._accept(6);){var i=void 0;if(i=this._accept(5,!0)){n+=i=this._accept(6,!0)||i;continue}if(14!==this._token.type){n+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){var o=void 0;if(o=this._accept(5,!0)){o=this._accept(5,!0)||this._accept(6,!0)||o,t.appendChild(new nf(o));continue}if(!(this._parseFormatString(t)||this._parseAnything(t)))return!1}for(;!this._accept(4);){if(14!==this._token.type){r+=this._accept(void 0,!0);continue}return!1}try{t.regexp=new RegExp(n,r)}catch(e){return!1}return e.transform=t,!0},t._parseFormatString=function(e){var t=this._token;if(!this._accept(0))return!1;var n=!1;this._accept(3)&&(n=!0);var r=this._accept(8,!0);if(!r)return this._backTo(t),!1;if(!n||this._accept(4))return e.appendChild(new ng(Number(r))),!0;if(!this._accept(1))return this._backTo(t),!1;if(this._accept(6)){var i=this._accept(9,!0);return i&&this._accept(4)?(e.appendChild(new ng(Number(r),i)),!0):(this._backTo(t),!1)}if(this._accept(11)){var o=this._until(4);if(o)return e.appendChild(new ng(Number(r),void 0,o,void 0)),!0}else if(this._accept(12)){var a=this._until(4);if(a)return e.appendChild(new ng(Number(r),void 0,void 0,a)),!0}else if(this._accept(13)){var l=this._until(1);if(l){var c=this._until(4);if(c)return e.appendChild(new ng(Number(r),void 0,l,c)),!0}}else{var s=this._until(4);if(s)return e.appendChild(new ng(Number(r),void 0,void 0,s)),!0}return this._backTo(t),!1},t._parseAnything=function(e){return 14!==this._token.type&&(e.appendChild(new nf(this._scanner.tokenText(this._token))),this._accept(void 0),!0)},e.escape=function(e){return e.replace(/\$|}|\\/g,"\\$&")},e.asInsertText=function(t){return new e().parse(t).toString()},e.guessNeedsClipboard=function(e){return/\${?CLIPBOARD/.test(e)},e}(),nx={Text:nf,Placeholder:np,Variable:ny,FormatString:ng,Choice:nm},nC=function(){"use strict";function e(t){(0,eL._)(this,e),this.lines=t.split(/\r\n?|\n/).map(function(e){return new nZ().parse(e).children})}return e.prototype.apply=function(t){var n=t.view,r=t.from,i=t.to,o=e.instantiate(this.lines,t),a=o.text,l=o.ranges,c={from:r,to:i,insert:eN.xv.of(a)},s={changes:c,scrollIntoView:!0,annotations:tV.Jv.of(t.completion)};if(l.length&&(s.selection=nD(l,0)),l.length>1){var u=new n_(l,0),d=s.effects=[nE.of(u)];void 0===n.state.field(nR,!1)&&d.push(eN.Py.appendConfig.of([nR,nB,nG]))}if(r===i&&!l.length){var f=eN.as.of(c,n.state.doc.length),h=n.state.selection.ranges.map(function(e){return e.map(f,0)});s.selection=eN.jT.create(h,n.state.selection.mainIndex)}return s},e.resolveVariable=function(e,t){var n=t.view,r=t.from,i=t.path;switch(e){case"TM_FILENAME":return(0,na.basename)(i);case"TM_FILENAME_BASE":return(0,na.basename)(i,(0,na.extname)(i));case"TM_DIRECTORY":return(0,na.dirname)(i);case"TM_FILEPATH":return i;case"TM_LINE_INDEX":return(n.state.doc.lineAt(r).number-1).toString();case"TM_LINE_NUMBER":return n.state.doc.lineAt(r).number.toString();default:return e}},e.instantiate=function(t,n){var r=n.view,i=n.from,o=r.state,a=[],l=[],c=o.doc.lineAt(i),s=/^\s*/.exec(c.text)[0],u=o.facet(R.c),d=!0,f=!1,h=void 0;try{for(var p,m,v=t[Symbol.iterator]();!(d=(m=v.next()).done);d=!0)!function(){var t=m.value,r=0,o="",c=function(e){var t=0,n=r;if(0===r&&(t=/^\t*/.exec(e)[0].length)){var i=s+u.repeat(t);e=i+e.slice(t),n+=i.length}return o+=e,r+=e.length,{line:a.length,from:n,to:r}},d=function(t){var o=!0,s=!1,u=void 0;try{for(var f,h=t[Symbol.iterator]();!(o=(f=h.next()).done);o=!0)f.value.match({Text:function(e){c(e.value)},Variable:function(t){var r=t.name,i=t.transform,o=e.resolveVariable(r,n);i&&(o=o.replace(i.regexp,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return i.children.map(function(e){return e.match({Text:function(e){return e.value},FormatString:function(e){return e.resolve(t[e.index])}})}).filter(Boolean).join("")})),c(o)},Choice:function(e){c(e.options[0].value)},Placeholder:function(e){var t,n=a.length?i+a.map(function(e){return e.length}).reduce(function(e,t){return e+t}):i;if(null===(t=e.children)||void 0===t?void 0:t.length){var o={field:e.index,from:n+r,to:null};l.push(o),d(e.children),o.to=n+r}else{c("");var s=n+r;l.push({field:e.index,from:s,to:s})}}})}catch(e){s=!0,u=e}finally{try{o||null==h.return||h.return()}finally{if(s)throw u}}};d(t),a.push(o)}()}catch(e){f=!0,h=e}finally{try{d||null==v.return||v.return()}finally{if(f)throw h}}var g=(p=Math).max.apply(p,(0,_._)(l.map(function(e){return e.field})));return{text:a,ranges:l.map(function(e){var t=e.field,n=(0,no._)(e,["field"]);return(0,k._)((0,C._)({},n),{field:0===t?g:t-1})})}},e}(),nk=eT.p.widget({widget:new(function(e){"use strict";(0,e9._)(n,e);var t=(0,te._)(n);function n(){return(0,eL._)(this,n),t.apply(this,arguments)}var r=n.prototype;return r.toDOM=function(){var e=document.createElement("span");return e.className="cm-snippetFieldPosition",e},r.ignoreEvent=function(){return!1},n}(eT.l9))}),nS=eT.p.mark({class:"cm-snippetField"}),n_=function(){"use strict";function e(t,n){(0,eL._)(this,e),this.ranges=t,this.active=n,this.deco=eT.p.set(t.map(function(e){return(e.from===e.to?nk:nS).range(e.from,e.to)}))}var t=e.prototype;return t.map=function(t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,l=this.ranges[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value,s=function(e,t){var n=t.mapPos(e.from,-1,eN.gc.TrackDel),r=t.mapPos(e.to,1,eN.gc.TrackDel);return null==n||null==r?null:{field:e.field,from:n,to:r}}(c,t);if(!s)return null;n.push(s)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return new e(n,this.active)},t.isSelectionInsideField=function(e){var t=this;return e.ranges.every(function(e){return t.ranges.some(function(n){return n.field===t.active&&n.from<=e.from&&n.to>=e.to})})},e}(),nE=eN.Py.define({map:function(e,t){return null==e?void 0:e.map(t)}}),nT=eN.Py.define(),nR=eN.QQ.define({create:function(){return null},update:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if(l.is(nE))return l.value;if(l.is(nT)&&e)return new n_(e.ranges,l.value)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e&&t.docChanged&&(e=e.map(t.changes)),e&&t.selection&&!e.isSelectionInsideField(t.selection)&&(e=null),e},provide:function(e){return eT.tk.decorations.from(e,function(e){return e?e.deco:eT.p.none})}});function nD(e,t){var n=e.filter(function(e){return e.field===t}).map(function(e){return eN.jT.range(e.from,e.to)});if(0!==n.length)return eN.jT.create(n)}function nI(e){return function(t){var n,r=t.state,i=t.dispatch,o=r.field(nR,!1);if(!o||e<0&&0===o.active)return!1;var a=o.active+e,l=(n=Math).max.apply(n,(0,_._)(o.ranges.map(function(e){return e.field}))),c=e>0&&o.active>=l;return i(r.update({selection:nD(o.ranges,a),effects:nE.of(c?null:new n_(o.ranges,a))})),!0}}var nB=eN.Wl.highest(eT.$f.of([{key:"Tab",run:nI(1),shift:nI(-1)},{key:"Escape",run:function(e){var t=e.state,n=e.dispatch;return!!t.field(nR,!1)&&(n(t.update({effects:nE.of(null)})),!0)}}])),nG=eT.tk.domEventHandlers({mousedown:function(e,t){var n,r=t.state.field(nR,!1);if(!r||null==(n=t.posAtCoords({x:e.clientX,y:e.clientY})))return!1;var i=r.ranges.find(function(e){return e.from<=n&&e.to>=n});return!!i&&i.field!==r.active&&(t.dispatch({selection:nD(r.ranges,i.field),effects:nE.of(r.ranges.some(function(e){return e.field>i.field})?new n_(r.ranges,i.field):null)}),!0)}}),nP=eN.r$.define({combine:function(e){return e.some(Boolean)}}),nA=new WeakMap;function nL(e){var t=Object.keys(e).join(""),n=/\w/.test(t);return n&&(t=t.replace(/\w/g,"")),"[".concat(n?"\\w":"").concat(t.replace(".","").replace(/[^\w\s]/g,"\\$&"),"]")}var nN="lsp-completion-keyboard-shortcuts",nO=eT.tk.theme((m={"& .cm-tooltip-autocomplete":{"& > *":{marginRight:4},"& > *:last-child":{marginRight:0},"& .cm-completionLabel":{flexGrow:1,flexShrink:1,overflowX:"auto",textOverflow:"ellipsis"},"& .cm-completionDetail":{color:t6.TV.foregroundDimmer,fontSize:"85%",marginLeft:"unset"}}},(0,tu._)(m,"& .".concat(nN),{display:"none"}),(0,tu._)(m,'& [aria-selected="true"] .'.concat(nN),{float:"right",display:"inline-block"}),m)),nU=n(92678);function nX(e){var t=e.content,n=e.className,r=e.showHoveredVariable,i=(0,O.Gn)("fontSize").preferences;if("string"!=typeof t&&"kind"in t)return(0,E.tZ)(ni,{content:t});var o=(Array.isArray(t)?t:[t]).map(function(e){return"string"==typeof e?e:"```"+e.language+"\n"+e.value+"\n```"}).join("\n");return(0,E.tZ)(t9.ZP,{css:[{p:{fontSize:i.fontSize}},r?[eu.l0.maxHeight(nM),eu.l0.overflowY("auto")]:void 0],className:n,components:{code:function(e){return(0,E.tZ)(ne.Z,(0,C._)({minimal:!0,disableCopy:!0},e))}},children:o})}var nM=100;function nF(e){var t=e.className,n=e.content,r=e.textHovered,i=(0,eB.Z)().debuggest,o=(0,eD.Z)(i.mainClient),a=o&&("running"===o.state.current||"paused"===o.state.current),l=(0,S._)((0,en.useState)(!1),2),c=l[0],s=l[1],u=(0,S._)((0,en.useState)(void 0),2),d=u[0],f=u[1],h=a&&d;return(0,en.useEffect)(function(){function e(){return(e=(0,e_._)(function(){var e,t;return(0,eE.Jh)(this,function(n){switch(n.label){case 0:if(!a)return[3,4];s(!0),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,o.evaluate({expression:r,context:"hover"})];case 2:return(null===(e=(t=n.sent()).body)||void 0===e?void 0:e.result)&&f((0,C._)({name:r,value:t.body.result},t.body)),[3,4];case 3:return s(!1),[7];case 4:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[o,a,r]),(0,E.BX)(el.G,{css:[nn,h?eu.l0.maxHeight(nM+190):eu.l0.maxHeight(190),eu.l0.minHeight(30),eu.l0.overflowY("auto"),eu.l0.borderRadius(4),eu.l0.backgroundColor.backgroundHigher],children:[c?void 0:(0,E.tZ)(nX,{content:n,className:t,showHoveredVariable:!!h}),h?(0,E.tZ)(el.G,{css:[eu.l0.maxHeight(190),eu.l0.overflowY("auto")],children:(0,E.tZ)(nU._,{depth:0,client:o,variable:d})}):void 0]})}var nW=n(98841),nV=n(60482),nH=n(54923),nz=n(62502),nj=n(4960),nq=n(1650),nJ=n(66938),nY=n(71051),n$=new(function(e){"use strict";(0,e9._)(n,e);var t=(0,te._)(n);function n(){var e;return(0,eL._)(this,n),(e=t.call(this)).elementClass="cm-gutterElement-hidden",e}return n.prototype.toDOM=function(){var e=document.createElement("span");e.classList.add("cm-hidden-lines-gutter");var t=document.createElement("span");return t.classList.add("cm-dot"),e.appendChild(t),e},n}(eT.SJ)),nK=function(e){"use strict";(0,e9._)(n,e);var t=(0,te._)(n);function n(e){var r;return(0,eL._)(this,n),(r=t.call(this)).numLines=e,r}var r=n.prototype;return r.eq=function(e){return e.numLines===this.numLines},r.toDOM=function(){var e=document.createElement("span");return e.textContent="".concat(this.numLines," hidden ").concat((0,nY.Z)("line",this.numLines)),e.className="cm-hidden-lines",e},n}(eT.l9),nQ=eT.p.mark({class:"cm-searchResultMatch"}),n0=eT.tk.baseTheme({".cm-hidden-lines":{color:"var(--foreground-dimmer)",backgroundColor:"var(--background-highest)",display:"inline-block",width:"100%"},".cm-gutterElement-hidden":{backgroundColor:"var(--background-highest)"},".cm-hidden-lines-gutter":{backgroundColor:"var(--background-highest)",display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"},".cm-dot":{height:"5px",width:"5px",backgroundColor:"var(--foreground-dimmest)",borderRadius:"50%",display:"inline-block"},".cm-tooltip .cm-scroller":{border:"2px solid var(--background-highest)",borderRadius:"var(--border-radius-4)"},".cm-tooltip .cm-scroller:hover":{border:"2px solid var(--accent-primary-dimmest)",boxShadow:"var(--shadow-1)",cursor:"pointer"},".cm-searchResultMatch":{color:eu.TV.foregroundDefault,backgroundColor:eu.TV.accentPrimaryDimmest,outline:eu.TV.accentPrimaryDimmer+" solid 1px"},".cm-searchResultMatch span":{color:eu.TV.foregroundDefault},".cm-tooltip .cm-searchResultMatch:hover":{opacity:.8},".cm-tooltip .cm-gutterElement":{display:"flex",marginTop:0,textAlign:"center",alignItems:"center",justifyContent:"center",lineHeight:"21px"},".cm-tooltip .cm-line":{padding:0},".cm-tooltip .cm-gutters":{padding:0},".cm-tooltip .cm-content":{paddingTop:0},".cm-tooltip .cm-lineWrapping":{whiteSpace:"pre"},".cm-tooltip .cm-cursor":{display:"none"},".cm-tooltip .cm-selectionBackground":{display:"none"}}),n1=n(84238),n2=n(9602),n3=n(29737),n4=n(7935),n8=n(10578),n6=n(7420),n5=(0,em.X)({snippetGroupText:[eu.l0.pl(8),eu.l0.py(8)],snippetGroupContainer:[eu.l0.p(4)],loadingContainer:[eu.l0.width(128),eu.l0.height(128),eu.l0.display.flex,eu.l0.align.center,eu.l0.justify.center],container:[eu.l0.minWidth("375px"),eu.l0.maxWidth("500px"),eu.l0.pt(4),eu.l0.overflowY("scroll")],firstReferenceDivider:[eu.l0.border({direction:"bottom",color:eu.TV.backgroundHighest})],headerGroup:[eu.l0.p(4)],headerContainer:[eu.l0.flex.row,eu.l0.justify.spaceBetween,eu.l0.align.center,eu.l0.pr(4)],header:[eu.l0.p(4),eu.l0.pl(8)],referencesGroups:[eu.l0.p(4)],referencesHeader:[eu.l0.p(4),eu.l0.pl(8)]});function n7(e){var t=e.matchesMap,n=e.fileToContents,r=e.type,i=e.onClose,o=e.jumpToPosition,a=Object.keys(t);return 0===a.length?(0,E.tZ)(tY.xv,{color:"dimmer",css:n5.snippetGroupText,multiline:!1,children:"REFERENCES"===r?"No references found":"No definitions found"}):(0,E.tZ)(el.G,{children:a.map(function(e){var r,l,c=t[e],s=n[e],u=(l=(r=c.sort(function(e,t){return e.from-t.from})).map(function(e){var t=e.from,n=e.to;return nQ.range(t,n)}),[eT.lg.define(function(){return{}},{decorations:function(){return eT.p.set(l)}}),function(e,t){var n=[],r=1;e.forEach(function(i,o){var a=t.lineAt(i.from),l=t.lineAt(i.to);r<a.number-2&&n.push({startLine:r,endLine:a.number-2}),r=l.number+2,o===e.length-1&&r<t.lines&&n.push({startLine:r,endLine:t.lines})});var i=n.map(function(e){var n=t.line(e.startLine),r=t.line(e.endLine);return eT.p.replace({widget:new nK(e.endLine-e.startLine+1)}).range(n.from,r.to)}),o=n.map(function(e){var n=t.line(e.startLine);return eT.p.line({class:"cm-line-hidden"}).range(n.from)}),a=eN.QQ.define({create:function(){return eT.p.set(i)},update:function(e){return e},provide:function(e){return eT.tk.decorations.from(e)}}),l=eN.QQ.define({create:function(){return eT.p.set(o)},update:function(e){return e},provide:function(e){return eT.tk.decorations.from(e)}}),c=n.map(function(e){var n=t.line(e.startLine);return n$.range(n.from)});return[a,l,n0,eT.p2.of(eN.Xs.of(c))]}(r,s)]);return(0,E.tZ)(el.G,{css:n5.snippetGroupContainer,children:(0,E.tZ)(rt,{path:e,extensions:[u],doc:s,numMatches:c.length,initiallyExpanded:1===a.length,onNavigateToCode:function(t){if(null!==t)o({path:e,line:t.line+1,col:t.character});else{var n=(0,S._)(c,1)[0],r=s.lineAt(n.from),a=n.from-r.from;o({path:e,line:r.number,col:a})}i()}})},e)})})}function n9(e){var t=e.files,n=e.onClose,r=e.references,i=e.definitions,o=e.currentFile,a=e.currentFileContents,l=e.jumpToPosition,c=(0,eB.Z)().fs,s=(0,e2.Z)(o)[0],u=(0,n1.Z)(n,[]),d=(0,S._)((0,en.useState)((0,tu._)({},o,eN.xv.of(a.split("\n")))),2),f=d[0],h=d[1];(0,en.useEffect)(function(){if(t.length){var e=!1;return!function(){n.apply(this,arguments)}(),function(){e=!0}}function n(){return(n=(0,e_._)(function(){var n;return(0,eE.Jh)(this,function(r){switch(r.label){case 0:var i;return n={},[4,Promise.all(t.map((i=(0,e_._)(function(e){var t;return(0,eE.Jh)(this,function(r){switch(r.label){case 0:return[4,c.readFile(e)];case 1:if((t=r.sent()).error)throw Error("Something went wrong reading file with path ".concat(e,". Received error: ").concat(t.error));return n[e]=eN.xv.of(t.content.toString().split("\n")),[2]}})}),function(e){return i.apply(this,arguments)})))];case 1:if(r.sent(),e)return[2];return h(function(e){return(0,C._)({},e,n)}),[2]}})})).apply(this,arguments)}},[c,t]);var p=(0,_._)(r).concat((0,_._)(i));if(!s||p.some(function(e){return!(s.documentUriToPath(e.uri) in f)}))return(0,E.tZ)(el.G,{css:n5.loadingContainer,children:(0,E.tZ)(n8.Z,{size:32})});var m={},v={};function g(e,t){if(!s)throw Error("Expected LSP Client");var n=s.documentUriToPath(e.uri),r=e.range,i=r.start,o=r.end;n in t||(t[n]=[]);var a=f[n],l=a.line(i.line+1),c=a.line(o.line+1);t[n].push({from:l.from+i.character,to:c.from+o.character})}return r.forEach(function(e){g(e,m)}),i.forEach(function(e){g(e,v)}),(0,E.BX)(el.G,{innerRef:u,css:n5.container,children:[(0,E.tZ)(el.G,{css:n5.firstReferenceDivider,children:(0,E.BX)(el.G,{css:n5.headerGroup,children:[(0,E.BX)(el.G,{css:n5.headerContainer,children:[(0,E.tZ)(tY.h4,{level:2,variant:"subheadDefault",css:n5.header,children:"Definitions"}),(0,E.tZ)(n6.Z,{filled:!1,border:!1,onClick:n,children:(0,E.tZ)(n4.Z,{})})]}),(0,E.tZ)(n7,{matchesMap:v,fileToContents:f,type:"DEFINITION",onClose:n,currentFile:o,jumpToPosition:l})]})}),(0,E.tZ)(el.G,{children:(0,E.BX)(el.G,{css:n5.referencesGroups,children:[(0,E.tZ)(tY.h4,{level:2,variant:"subheadDefault",css:n5.referencesHeader,children:"References"}),(0,E.tZ)(n7,{matchesMap:m,fileToContents:f,type:"REFERENCES",onClose:n,currentFile:o,jumpToPosition:l})]})})]})}(l=v||(v={})).DEFINITION="DEFINITION",l.REFERENCES="REFERENCES";var re=(0,em.X)({container:[eu.l0.width("100%"),eu.l0.p(4),eu.l0.rowWithGap(4),eu.l0.justify.spaceBetween,eu.l0.align.center],left:[eu.l0.flex.grow(1),eu.l0.rowWithGap(8),eu.l0.align.center],editor:[eu.l0.p(4)],text:[eu.l0.flex.shrink(1),{textOverflow:"ellipsis"}]});function rt(e){var t=e.path,n=e.doc,r=e.extensions,i=e.numMatches,o=e.onNavigateToCode,a=e.initiallyExpanded,l=(0,S._)((0,en.useState)(a),2),c=l[0],s=l[1];return(0,E.BX)(el.G,{children:[(0,E.BX)(el.G,{css:re.container,children:[(0,E.BX)(el.G,{css:re.left,children:[(0,E.tZ)(M.Z,{path:t}),(0,E.tZ)(tY.xv,{multiline:!1,title:t,css:re.text,children:t}),(0,E.tZ)(tY.xv,{color:"dimmest",multiline:!1,children:(0,nY.Z)("match",i,!0)})]}),(0,E.tZ)(n2.hU,{alt:c?"Collapse snippet":"Expand snippet",tooltipBehavior:"hidden",onClick:function(){return s(function(e){return!e})},children:(0,E.tZ)(n3.Z,{rotate:c?180:0,style:{transition:"200ms ease"}})})]}),(0,E.tZ)(el.G,{css:re.editor,style:{display:c?"block":"none"},children:(0,E.tZ)(nJ.F,{path:t,initialDoc:n,extensions:void 0===r?[]:r,maxHeight:"max-content",allowScroll:!0,hideGutter:!0,onNavigateToCode:o})})]})}var rn=n(13585),rr=n(92799),ri=n(37505),ro=(0,n(38158).B)(),ra=eN.Py.define(),rl=eN.QQ.define({create:function(){return null},update:function(e,t){if(t.isUserEvent("select")||t.isUserEvent("undo")||t.isUserEvent("redo"))return null;if(!t.isUserEvent("input.type")||t.changes.empty)return e;var n="";return t.changes.iterChanges(function(e,t,r,i,o){n=o.sliceString(0,1)}),n||null}}),rc=new tq.J(function(e){var t,n,r=e.help,i=e.index,o="1px solid ".concat(eu.TV.outlineDimmer),a="min(425px, 80vw)",l=r.signatures[i],c=r.signatures.length>1;if(!l)return null;var s=l.documentation,u=null!=r.activeParameter&&(null===(n=l.parameters)||void 0===n?void 0:null===(t=n[r.activeParameter])||void 0===t?void 0:t.documentation);return(0,E.BX)(el.G,{css:[eu.l0.flex.row,eu.l0.backgroundColor.backgroundHigher,{width:"max-content"}],children:[c?(0,E.tZ)(el.G,{css:[eu.l0.flex.row,eu.l0.pl(4),{borderRight:o,paddingBottom:5}],children:(0,E.BX)("span",{css:[{alignSelf:"flex-end"},eu.l0.p(4)],children:[i+1,"/",r.signatures.length]})}):null,(0,E.BX)(el.G,{children:[(0,E.tZ)(el.G,{css:[eu.l0.py(4),eu.l0.pl(c?4:8),eu.l0.pr(8),eu.l0.maxHeight(100),eu.l0.overflowY("scroll"),eu.l0.font.code,{lineHeight:eu.TV.lineHeightSmall,maxWidth:a}],children:(0,E.tZ)(rs,{signature:l,activeParameter:r.activeParameter})}),!!(s||u)&&(0,E.BX)(el.G,{css:[eu.l0.px(c?4:8),eu.l0.py(2),eu.l0.maxHeight(200),eu.l0.overflow("scroll"),{borderTop:o,maxWidth:a}],children:[u?(0,E.tZ)(ni,{content:u}):null,s?(0,E.tZ)(ni,{content:s}):null]})]})]})});function rs(e){var t,n=e.signature,r=n.label,i=n.parameters,o=e.activeParameter;if(null==o||!i)return(0,E.tZ)("span",{children:r});var a=null===(t=i[o])||void 0===t?void 0:t.label;if(!a)return(0,E.tZ)("span",{children:r});var l=(0,S._)("string"==typeof a?[r.indexOf(a),r.indexOf(a)+a.length]:a,2),c=l[0],s=l[1];return(0,E.BX)("div",{children:[(0,E.tZ)("span",{children:r.slice(0,c)}),(0,E.tZ)("strong",{children:a}),(0,E.tZ)("span",{children:r.slice(s)})]})}function ru(){return(ru=(0,e_._)(function(e,t,n,r,i){return(0,eE.Jh)(this,function(o){switch(o.label){case 0:var a;return[4,Promise.all(n.map((a=(0,e_._)(function(n){var o,a;return(0,eE.Jh)(this,function(l){return(o=i.current.get(n.clientId))&&n.notify.cancelRequest(o),a=n.generateId(),i.current.set(n.clientId,a),[2,n.request.signatureHelp(r,(0,eK.sg)(e.doc,t),{id:a}).then(function(e){return(i.current.get(n.clientId)===a&&i.current.set(n.clientId,null),"error"in e)?null:e.result})]})}),function(e){return a.apply(this,arguments)})))];case 1:return[2,o.sent().find(function(e){return null!==e&&e.signatures.length})]}})})).apply(this,arguments)}var rd=n(51638),rf=n(92674),rh=n.n(rf),rp=new Map,rm=n(85188),rv=n(22488),rg=n(65895),ry=n(76773),rb=n(41691),rw=n(80273),rZ={namespace:rb.pJ.namespace,type:rb.pJ.typeName,class:rb.pJ.className,enum:rb.pJ.typeName,interface:rb.pJ.typeName,struct:rb.pJ.typeName,typeParameter:rb.pJ.typeName,parameter:rb.pJ.variableName,variable:rb.pJ.variableName,property:rb.pJ.propertyName,enumMember:rb.pJ.propertyName,event:rb.pJ.typeName,function:rb.pJ.function(rb.pJ.variableName),method:rb.pJ.function(rb.pJ.propertyName),macro:rb.pJ.macroName,keyword:rb.pJ.keyword,modifier:rb.pJ.modifier,comment:rb.pJ.comment,string:rb.pJ.string,number:rb.pJ.number,regexp:rb.pJ.regexp,operator:rb.pJ.operator,decorator:rb.pJ.function(rb.pJ.annotation),angle:null,arithmetic:rb.pJ.arithmeticOperator,attribute:rb.pJ.attributeName,attributeBracket:rb.pJ.bracket,bitwise:rb.pJ.bitwiseOperator,boolean:rb.pJ.bool,brace:rb.pJ.brace,bracket:rb.pJ.bracket,builtinAttribute:rb.pJ.standard(rb.pJ.attributeName),builtinType:rb.pJ.standard(rb.pJ.typeName),character:rb.pJ.character,colon:rb.pJ.punctuation,comma:rb.pJ.separator,comparison:rb.pJ.compareOperator,constParameter:rb.pJ.constant(rb.pJ.variableName),derive:rb.pJ.function(rb.pJ.annotation),deriveHelper:rb.pJ.function(rb.pJ.annotation),dot:rb.pJ.derefOperator,escapeSequence:rb.pJ.escape,invalidEscapeSequence:rb.pJ.invalid,formatSpecifier:rb.pJ.processingInstruction,generic:rb.pJ.typeName,label:rb.pJ.labelName,lifetime:rb.pJ.special(rb.pJ.variableName),logical:rb.pJ.logicOperator,macroBang:rb.pJ.macroName,parenthesis:rb.pJ.paren,punctuation:rb.pJ.punctuation,selfKeyword:rb.pJ.self,selfTypeKeyword:rb.pJ.self,semicolon:rb.pJ.separator,typeAlias:rb.pJ.typeName,toolModule:rb.pJ.namespace,union:null,unresolvedReference:null,tomlArrayKey:rb.pJ.propertyName,tomlTableKey:rb.pJ.className},rx={declaration:rb.pJ.definition,definition:rb.pJ.definition,readonly:rb.pJ.constant,static:rb.pJ.constant,deprecated:null,abstract:null,async:rb.pJ.special,modification:function(e){return e===rb.pJ.keyword?rb.pJ.modifier:null},documentation:function(e){return e===rb.pJ.comment?rb.pJ.docComment:e===rb.pJ.string?rb.pJ.docString:null},defaultLibrary:rb.pJ.standard,attribute:null,callable:rb.pJ.function,constant:rb.pJ.constant,consuming:null,controlFlow:function(e){return e===rb.pJ.keyword?rb.pJ.controlKeyword:e===rb.pJ.operator?rb.pJ.controlOperator:null},crateRoot:null,injected:null,intraDocLink:function(){return rb.pJ.url},library:null,macro:null,mutable:null,public:null,reference:null,trait:null,unsafe:null},rC=new Set([rb.pJ.comment,rb.pJ.string,rb.pJ.number,rb.pJ.keyword,rb.pJ.operator]),rk=new Map;function rS(){return(rS=(0,e_._)(function(e){var t,n,r,i,o,a,l,c,s,u,d;return(0,eE.Jh)(this,function(f){switch(f.label){case 0:if(t=e.client,n=e.path,r=e.previous,i=e.doc,o=e.signal,a=(0,e0.Z)(t),r&&a.isSemanticTokensDeltaSupported)l=t.semanticTokensDelta(n,r,{signal:o});else if(a.isSemanticTokensFullSupported)l=t.semanticTokensFull(n,{signal:o});else{if(!i||!a.isSemanticTokensRangeSupported)return[2,null];c=(0,eK.sg)(i,0),s=(0,eK.sg)(i,i.length),l=t.semanticTokensRange(n,{start:c,end:s},{signal:o})}return[4,l];case 1:if((u=f.sent())&&"error"in u&&-32802===u.error.code)return[2,!1];if(!u||u.cancelled||!(d="result"in u&&!u.cancelled?u.result:null))return[2,null];return[2,d]}})})).apply(this,arguments)}var r_=function(){"use strict";function e(t,n){(0,eL._)(this,e),this.data=t,this.id=n}var t=e.prototype;return t.reset=function(){this.data=[],this.id=null},t.update=function(e){if(!e){this.reset();return}if("edits"in e&&this.id){var t,n,r=e.edits.slice().sort(function(e,t){return t.start-e.start}),i=!0,o=!1,a=void 0;try{for(var l,c=r[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s,u,d=l.value;(null===(s=d.data)||void 0===s?void 0:s.length)?(u=this.data).splice.apply(u,[d.start,d.deleteCount].concat((0,_._)(d.data))):this.data.splice(d.start,d.deleteCount)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}this.id=null!==(n=e.resultId)&&void 0!==n?n:null}else if("data"in e)this.data=e.data,this.id=null!==(t=e.resultId)&&void 0!==t?t:null;else throw Error("Invalid semantic tokens response")},t.decorations=function(e,t){for(var n=t.doc,r=new eN.f_,i=0,o=0,a=0;a<this.data.length;a+=5){var l=this.data[a],c=this.data[a+1],s=this.data[a+2],u=this.data[a+3],d=this.data[a+4];i+=l,o=l>0?c:o+c;var f=function(e,t,n){var r=(0,rw.uH)(e,t);if(null===r)return null;var i=rZ[r];if(!i)return null;var o=(0,rw.ib)(e,n),a="".concat(r,":").concat(o.join(",")),l=rk.get(a);if(void 0!==l)return l;var c=o.map(function(e){if(void 0===rx[e])return null;var t=rx[e];return null===t?null:t}).filter(Boolean),s=!0,u=!1,d=void 0;try{for(var f,h=c[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var p=(0,f.value)(i);p&&(i=p)}}catch(e){u=!0,d=e}finally{try{s||null==h.return||h.return()}finally{if(u)throw d}}return i&&rC.has(i)&&(i=null),rk.set(a,i),i}(e,u,d);if(f){var h=(0,R.QN)(t,[f]);if(h){var p=(0,eK.RL)(n,{line:i,character:o}),m=(0,eK.RL)(n,{line:i,character:o+s}),v=eT.p.mark({class:h});r.add(p,m,v)}}}return r.finish()},e}(),rE=["typescript"],rT=function(){"use strict";function e(t,n){var r=this;(0,eL._)(this,e),this.view=t,this.client=n,this.data=new r_([],null),this.controller=null,this.disposables=[],this.pending=!1,this.running=!1,this.changes=null,this.decorations=eT.p.none,this.proneToDesync=rE.some(function(e){return n.clientId.includes(e)}),this.disposables.push(n.onSemanticTokensRefresh(function(){return r.refresh()}),n.onServerCapabilitiesChange(function(){return r.refresh()}));var i=t.state.facet(tj.Yp);if(i){if(n.isOpen(i))this.run();else{var o=setTimeout(function(){n.isOpen(i)&&r.run()},500);this.disposables.push(function(){return clearTimeout(o)})}}}var t=e.prototype;return t.abort=function(){var e;this.pending=!1,null===(e=this.controller)||void 0===e||e.abort()},t.refresh=function(){this.abort(),this.data.reset(),this.run()},t.run=function(){if(this.pending=!0,!this.running){this.running=!0;var e=this;(0,e_._)(function(){var t;return(0,eE.Jh)(this,function(n){switch(n.label){case 0:t=function(){var t,n,r,i,o,a,l,c,s,u,d;return(0,eE.Jh)(this,function(f){switch(f.label){case 0:t=Date.now(),f.label=1;case 1:if(f.trys.push([1,3,,4]),e.pending=!1,e.changes=null,o=(i=e.view.state).facet(tj.Yp),a=null===(r=e.client.getServerCapabilities())||void 0===r?void 0:null===(n=r.semanticTokensProvider)||void 0===n?void 0:n.legend,c=(l=(0,e0.Z)(e.client)).isSemanticTokensFullSupported||l.isSemanticTokensRangeSupported,!o||!a||!c||!e.client.isOpen(o))return e.data.reset(),e.decorations.size>0&&(e.decorations=eT.p.none,e.view.dispatch()),[2,"continue"];return e.controller=new AbortController,[4,function(e){return rS.apply(this,arguments)}({client:e.client,path:o,previous:e.data.id,doc:i.doc,signal:e.controller.signal})];case 2:return!1===(s=f.sent())?e.pending=!0:e.controller.signal.aborted||(e.data.update(s),e.decorations=e.changes?e.data.decorations(a,i).map(e.changes):e.data.decorations(a,i),e.view.dispatch()),[3,4];case 3:return u=f.sent(),(0,eT.OO)(e.view.state,u),e.data.reset(),e.decorations=eT.p.none,e.changes=null,[3,4];case 4:if(e.controller=null,d=Date.now()-t,!(e.pending&&d<150))return[3,6];return[4,new Promise(function(e){return setTimeout(e,150-d)})];case 5:f.sent(),f.label=6;case 6:return[2]}})},n.label=1;case 1:if(!e.pending)return[3,3];return[5,(0,eE.XA)(t())];case 2:return n.sent(),[3,1];case 3:return e.running=!1,e.changes=null,[2]}})})()}},t.update=function(e){e.docChanged&&this.decorations.size&&(this.decorations=this.decorations.map(e.changes))},t.postUpdate=function(e){(0,eO.aU)(e,tj.Yp)?this.refresh():e.docChanged&&(this.running&&(this.changes=this.changes?this.changes.composeDesc(e.changes):e.changes),this.proneToDesync&&this.abort(),this.run())},t.destroy=function(){this.abort(),this.data.reset();var e=!0,t=!1,n=void 0;try{for(var r,i=this.disposables[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)(0,r.value)()}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.disposables=[]},e}(),rR=new eR.j(function(e){if(!e||!e.length)return null;var t=e.map(function(e){return eT.lg.define(function(t){return new rT(t,e)},{decorations:function(e){return e.decorations},provide:function(e){return eT.tk.updateListener.of(function(t){var n;return null===(n=t.view.plugin(e))||void 0===n?void 0:n.postUpdate(t)})}})});return eN.Wl.highest(t)}),rD=n(64426),rI=new eR.j(function(e){return nP.of(e)}),rB=new eR.j(function(e){return rm.WB.of(e)}),rG=new eR.j(function(e){return rD.I.of(e)}),rP=n(97588),rA=eT.tk.theme({"& .cm-gutters.cm-minimap-gutter":{backgroundColor:t6.TV.backgroundDefault,borderLeft:"1px solid ".concat(t6.TV.backgroundHigher)},"& .cm-minimap-box-shadow":{boxShadow:"unset"}}),rL=eN.QQ.define({create:function(e){return 0===e.doc.length||e.doc.lines>1e3},update:function(e,t){return t.docChanged?0===t.state.doc.length||t.state.doc.lines>1e3:e}}),rN=new eR.j(function(e,t,n){var r=function(){return{dom:document.createElement("div")}};return e?null:[rA,rL,rP.a.compute([tD,rL],function(e){if(e.field(rL,!1)||"blocks"!==t&&"characters"!==t)return null;var i=e.field(tD,!1),o={};if(i)for(var a=1;a<=e.doc.lines;a++)switch(i.getLineChangeType(a)){case tE.dQ.COVERED:o[a]=n.values.global.greenDefault;break;case tE.dQ.MODIFIED:o[a]=n.values.global.blueDefault}return{create:r,displayText:t,gutters:[o]}})]}),rO=n(88681),rU=n(85234),rX=n.n(rU),rM=n(82436),rF=eN.r$.define({combine:function(e){var t;return null!==(t=e.find(function(e){return null!==e}))&&void 0!==t?t:null}}),rW=eN.r$.define({combine:function(e){return rH(e)}}),rV=eN.r$.define({combine:function(e){return rH(e)}});function rH(e){var t=[];return e.forEach(function(e){return e?t.push(e):void 0}),t}var rz=function(e){"use strict";(0,e9._)(n,e);var t=(0,te._)(n);function n(e){var r;return(0,eL._)(this,n),(r=t.call(this)).diagnostic=e,r}return n.prototype.eq=function(e){return e instanceof n&&this.severityValue===e.severityValue},(0,nl._)(n,[{key:"severityValue",get:function(){switch(this.diagnostic.severity){case"error":return 3;case"warning":return 2;case"info":return 1;default:return 0}}},{key:"severityColor",get:function(){switch(this.diagnostic.severity){case"error":return"#d11";case"warning":return"orange";case"info":return"#999";default:return"#66d"}}}]),n}(eN.uU);function rj(e){var t=new eN.f_;return(0,D.c1)(e,function(e,n,r){t.add(n,r,new rz(e))}),t.finish()}var rq=eN.QQ.define({create:function(e){return rj(e)},update:function(e,t){return(0,eO.aU)(t,D.lC)?rj(t.state):e.map(t.changes)},provide:function(e){return rW.compute([e],function(t){for(var n=new Map,r=t.field(e).iter();r.value;){for(var i=t.doc.lineAt(r.from),o=t.doc.lineAt(r.to),a=i.number;a<=o.number;){var l,c=null===(l=n.get(a))||void 0===l?void 0:l.severityValue;(!c||c<r.value.severityValue)&&n.set(a,r.value),a++}r.next()}return Array.from(n.entries()).map(function(e){var t=(0,S._)(e,2),n=t[0],r=t[1];return{color:r.severityColor,number:n,zIndex:r.severityValue}})})}}),rJ="cm-with-scrollbar",rY="cm-scrollbar-gutter",r$="cm-scrollbar-inner",rK="cm-scrollbar-overlay-container",rQ="cm-scrollbar-overlay",r0="cm-scrollbar-overlay-invisible",r1="cm-scrollbar-overlay-active",r2="--cm-scrollbar-overlay-height",r3=eT.tk.theme((b={"&":{height:"100%",overflowY:"auto"}},(0,tu._)(b,"& .".concat(rY),{borderRight:0,boxSizing:"border-box",display:"flex",flexShrink:0,height:"100%",insetInlineStart:0,left:"unset",position:"sticky",right:0,top:0,width:"".concat(15,"px"),zIndex:200}),(0,tu._)(b,"& .".concat(r$),{height:"100%",position:"absolute",right:0,top:0,overflowY:"hidden",borderLeft:"1px solid",borderLeftColor:"inherit"}),(0,tu._)(b,"& .".concat(r$," > canvas"),{display:"block",height:"100%",width:"".concat(14,"px"),opacity:.6}),(0,tu._)(b,".".concat(rK),(y={position:"absolute",top:0,height:"100%",width:"100%"},(0,tu._)(y,"& .".concat(rQ),(g={background:"rgb(121, 121, 121)",opacity:"0.2",position:"absolute",right:0,top:0,height:"max(".concat(20,"px, var(").concat(r2,"))"),width:"100%",transition:"top 0s ease-in 0ms"},(0,tu._)(g,"&:hover",{opacity:"0.3"}),(0,tu._)(g,"&.".concat(r0),{pointerEvents:"none",opacity:0}),g)),(0,tu._)(y,"& .".concat(r1),(0,tu._)({opacity:1,visibility:"visible",transition:"visibility 0s linear 0ms, opacity 300ms"},"& .".concat(rQ),{opacity:"0.4"})),y)),(0,tu._)(b,"&.".concat(rJ," .cm-scroller::-webkit-scrollbar"),{width:0}),(0,tu._)(b,"&.".concat(rJ," .cm-scroller"),{scrollbarWidth:"none"}),b)),r4=function(){"use strict";function e(t){(0,eL._)(this,e),this.dragInfo=null,this.view=t,this.container=document.createElement("div"),this.container.classList.add(rK),this.container.role="presentation",this.container.ariaHidden="true",this.handle=document.createElement("div"),this.handle.classList.add(rQ),this.container.appendChild(this.handle);var n=t.dom.querySelector(".".concat(r$));n&&n.appendChild(this.container),this.observer=new ResizeObserver(this.resizeHandle.bind(this)),this.observer.observe(t.dom),this.container.addEventListener("mousedown",this.onMouseDown.bind(this)),window.addEventListener("mouseup",this.onMouseUp.bind(this)),window.addEventListener("mousemove",this.onMouseMove.bind(this))}var t=e.prototype;return t.resizeHandle=function(){var e=this;this.view.requestMeasure({key:"".concat(this,".resizeHandle"),read:function(){return{ratio:Math.min(1,e.view.scrollDOM.clientHeight/e.view.contentHeight)}},write:function(t){var n=t.ratio;e.handle.style.setProperty(r2,"".concat(100*n,"%")),1===n?e.handle.classList.add(r0):e.handle.classList.remove(r0)}})},t.updateHandlePosition=function(){var e=this;this.view.requestMeasure({key:"".concat(this,".onScroll"),read:function(){var t=e.view.contentHeight,n=e.view.scrollDOM.clientHeight,r=e.handle.getBoundingClientRect().height;return{scrollTop:Math.round(e.view.scrollDOM.scrollTop*((n-r)/(t-n)))}},write:function(t){var n=t.scrollTop;e.handle.style.top="".concat(n,"px")}})},t.onMouseDown=function(e){var t=this;if(2!==e.button){if(e.preventDefault(),e.target===this.handle){this.dragInfo={dragStartY:e.clientY},this.container.classList.add(r1);return}this.view.requestMeasure({key:"".concat(this,".onMouseDown"),read:function(){var n=t.view.scrollDOM.clientHeight,r=t.view.contentHeight;return{scrollTop:Math.max(0,e.clientY-e.target.getBoundingClientRect().top-n/r*n/2)/n*r}},write:function(e){var n=e.scrollTop;t.view.scrollDOM.scrollTop=n}})}},t.onMouseUp=function(){this.dragInfo&&(this.dragInfo=null,this.container.classList.remove(r1))},t.onMouseMove=function(e){if(this.dragInfo){e.preventDefault();var t=e.clientY-this.dragInfo.dragStartY;this.view.scrollDOM.scrollTop=this.view.scrollDOM.scrollTop+t/this.view.dom.clientHeight*this.view.contentHeight,this.view.scrollDOM.scrollTop>0&&Math.round(this.view.scrollDOM.scrollTop)<Math.round(this.view.contentHeight-this.view.dom.clientHeight)&&(this.dragInfo={dragStartY:e.clientY}),this.updateHandlePosition()}},t.update=function(e){(e.docChanged||e.geometryChanged)&&(this.resizeHandle(),this.updateHandlePosition())},t.destroy=function(){this.container.removeEventListener("mousedown",this.onMouseDown),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),this.container.remove(),this.observer.disconnect()},e}(),r8=function(){"use strict";function e(t){(0,eL._)(this,e),this.view=t;var n=t.state.facet(rF);if(!n)throw Error("expected config");this.dom=n.create(t).dom,this.dom.classList.add(rY);var r=document.createElement("div");r.classList.add(r$);var i=document.createElement("canvas");i.ariaHidden="true",this.context=i.getContext("2d"),r.appendChild(i),this.dom.appendChild(r),t.scrollDOM.insertBefore(this.dom,t.contentDOM.nextSibling),this.update()}var t=e.prototype;return t.shouldRedraw=function(e,t){return!!(!e||!t||(0,eO.aU)(e,"doc","selection","focus",rV,rW,R.SW,R.xP))||this.view.contentHeight!==this.previousContentHeight||2*t.scrollClientHeight!==this.previousCanvasHeight},t.update=function(e){var t=this;this.view.requestMeasure({key:this,read:function(){return{scrollClientHeight:t.view.scrollDOM.clientHeight}},write:function(n){var r=n.scrollClientHeight;if(t.context&&t.shouldRedraw(e,{scrollClientHeight:r})){t.previousContentHeight=t.view.contentHeight,t.context.canvas.width=28,t.context.canvas.height=2*r,t.previousCanvasHeight=t.context.canvas.height,t.context&&t.context.clearRect(0,0,t.context.canvas.width,t.context.canvas.height);var i=t.view.state.facet(rV),o=t.view.state.facet(rW),a=new Map,l=!0,c=!1,s=void 0;try{for(var u,d=o.entries()[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f,h=(0,S._)(u.value,2),p=h[0],m=h[1],v=p%3,g=void 0,y=void 0,b=!0,w=!1,Z=void 0;try{for(var x,C=m[Symbol.iterator]();!(b=(x=C.next()).done);b=!0){var k,_=x.value;if(void 0===g||void 0===y){g=_,y=_;continue}if(y.number+1===_.number&&y.color===_.color&&y.zIndex===_.zIndex){y=_;continue}a.set(v,(null!==(k=a.get(v))&&void 0!==k?k:[]).concat([[g,y]])),g=_,y=_}}catch(e){w=!0,Z=e}finally{try{b||null==C.return||C.return()}finally{if(w)throw Z}}g&&y&&a.set(v,(null!==(f=a.get(v))&&void 0!==f?f:[]).concat([[g,y]]))}}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}var E=!0,T=!1,D=void 0;try{for(var I,B=a.entries()[Symbol.iterator]();!(E=(I=B.next()).done);E=!0)!function(){var e=(0,S._)(I.value,2),n=e[0],i=e[1].sort(function(e,t){var n,r,i=(0,S._)(e,1)[0],o=(0,S._)(t,1)[0];return(null!==(n=i.zIndex)&&void 0!==n?n:0)-(null!==(r=o.zIndex)&&void 0!==r?r:0)}),o=!0,a=!1,l=void 0;try{for(var c,s=i[Symbol.iterator]();!(o=(c=s.next()).done);o=!0)!function(){var e=(0,S._)(c.value,2),i=e[0],o=i.color,a=i.number,l=e[1].number,s=t.view.state.doc.line(a),u=t.view.state.doc.line(l),d=1/0,f=-1/0;if((0,R.q2)(t.view.state).between(s.from,u.to,function(e,t){d>e&&(d=e),f<t&&(f=t)}),d<f){var h=t.view.state.doc.lineAt(d);h.number<=s.number&&(s=h),t.view.state.doc.lineAt(f).number>=u.number&&(u=h)}var p=s.number,m=u.number,v=!0,g=!1,y=void 0;try{for(var b,w=t.view.state.field(r7)[Symbol.iterator]();!(v=(b=w.next()).done);v=!0){var Z=(0,S._)(b.value,2),x=Z[0],C=Z[1];x[0].number<s.number&&(p-=C),x[1].number<u.number&&(m-=C)}}catch(e){g=!0,y=e}finally{try{v||null==w.return||w.return()}finally{if(g)throw y}}t.drawRange({scrollClientHeight:r,color:o,from:p,to:m,lane:n})}()}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}}()}catch(e){T=!0,D=e}finally{try{E||null==B.return||B.return()}finally{if(T)throw D}}var G=!0,P=!1,A=void 0;try{for(var L,N=i[Symbol.iterator]();!(G=(L=N.next()).done);G=!0){var O=L.value,U=!0,X=!1,M=void 0;try{for(var F,W=O[Symbol.iterator]();!(U=(F=W.next()).done);U=!0){var V=F.value,H=V.color,z=V.number,j=z,q=!0,J=!1,Y=void 0;try{for(var $,K=t.view.state.field(r7)[Symbol.iterator]();!(q=($=K.next()).done);q=!0){var Q=(0,S._)($.value,2),ee=(0,S._)(Q[0],1)[0],et=Q[1];ee.number<z&&(j-=et)}}catch(e){J=!0,Y=e}finally{try{q||null==K.return||K.return()}finally{if(J)throw Y}}t.drawRange({scrollClientHeight:r,color:H,from:j})}}catch(e){X=!0,M=e}finally{try{U||null==W.return||W.return()}finally{if(X)throw M}}}}catch(e){P=!0,A=e}finally{try{G||null==N.return||N.return()}finally{if(P)throw A}}}}})},t.destroy=function(){this.dom.remove()},t.drawRange=function(e){if(this.context){var t,n=(this.view.documentPadding.top+this.view.defaultLineHeight*(e.from-1))/this.view.contentHeight*e.scrollClientHeight,r=2;e.to&&(r=(this.view.documentPadding.top+this.view.defaultLineHeight*e.to)/this.view.contentHeight*e.scrollClientHeight-n)<4&&(n-=(4-r)/2,r=4),this.context.fillStyle=e.color,this.context.beginPath(),this.context.fillRect(9.333333333333334*(null!==(t=e.lane)&&void 0!==t?t:0),2*n,28/(void 0===e.lane?1:3),2*r)}},e}();function r6(e){for(var t=[],n=(0,R.q2)(e).iter();n.value;){var r=t[t.length-1];if(!r||r[0][1].to<n.to){var i=e.doc.lineAt(n.from),o=e.doc.lineAt(n.to);t.push([[i,o],o.number-i.number])}n.next()}return t}function r5(e){return null!==e.facet(rF)}var r7=eN.QQ.define({create:function(e){return r5(e)?r6(e):[]},update:function(e,t){return r5(t.state)&&(0,eO.aU)(t,"doc",R.iQ,r5)?r6(t.state):e}}),r9=eN.r$.define({combine:function(e){var t;return null!==(t=e.find(function(e){return null!==e}))&&void 0!==t?t:null},enables:function(e){return[rF.compute([e],function(t){return t.facet(e)}),r3,[r7,(0,eO.Zc)(function(e){return new r8(e)},{isEnabled:function(e){return null!==e.facet(rF)},provide:function(){return eT.tk.editorAttributes.of(function(e){return null!==e.state.facet(rF)?{class:rJ}:null})}})],(0,eO.Zc)(function(e){return new r4(e)},{isEnabled:function(e){return null!==e.facet(rF)},eventObservers:{scroll:function(){var e;null===(e=this.plugin())||void 0===e||e.updateHandlePosition()}}})]}}),ie="cm-multiplayer-selection-green",it="cm-multiplayer-selection-red",ir="cm-multiplayer-selection-blue",ii="cm-multiplayer-selection-gold",io="cm-multiplayer-selection-purple",ia="cm-multiplayer-selection-teal",il="cm-multiplayer-selection-pink",ic=eT.tk.theme((w={},(0,tu._)(w,".".concat(ie),{background:"rgba(27, 196, 125, 0.2)"}),(0,tu._)(w,".".concat(it),{background:"rgba(239, 85, 51, 0.2)"}),(0,tu._)(w,".".concat(ir),{background:"rgba(24, 160, 251, 0.2)"}),(0,tu._)(w,".".concat(ii),{background:"rgba(255, 199, 0, 1)"}),(0,tu._)(w,".".concat(io),{background:"rgba(144, 124, 255, 0.2)"}),(0,tu._)(w,".".concat(ia),{background:"rgba(0, 181, 206, 0.2)"}),(0,tu._)(w,".".concat(il),{background:"rgba(238, 70, 211, 0.2)"}),w)),is={"#1BC47D":ie,"#EF5533":it,"#18A0FB":ir,"#FFC700":ii,"#907CFF":io,"#00B5CE":ia,"#EE46D3":il},iu=eN.Py.define(),id=eN.Py.define(),ih=eN.Py.define(),ip=eN.QQ.define({create:function(){return{}},update:function(e,t){if(!t.changes.empty){var n=function(e){return t.changes.mapPos(Math.min(t.changes.length,e))},r={},i=!0,o=!1,a=void 0;try{for(var l,c=Object.values(e)[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;r[s.id]=(0,k._)((0,C._)({},s),{position:n(s.position),selectionStart:n(s.selectionStart),selectionEnd:n(s.selectionEnd)})}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}e=r}var u=!0,d=!1,f=void 0;try{for(var h,p=t.effects[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var m=h.value;if(m.is(rM.R)&&(e=(0,C._)({},e)),m.is(iu)&&m.value.position<=t.newDoc.length&&((e=(0,C._)({},e))[m.value.id]=(0,C._)({},m.value)),m.is(id)&&(e=(0,C._)({},e),m.is(id)&&delete e[m.value]),m.is(ih)){e=(0,C._)({},e);var v=!0,g=!1,y=void 0;try{for(var b,w=Object.entries(e)[Symbol.iterator]();!(v=(b=w.next()).done);v=!0){var Z=(0,S._)(b.value,2),x=Z[0];Z[1].username===m.value&&delete e[x]}}catch(e){g=!0,y=e}finally{try{v||null==w.return||w.return()}finally{if(g)throw y}}}}}catch(e){d=!0,f=e}finally{try{u||null==p.return||p.return()}finally{if(d)throw f}}return e},provide:function(e){return[ic,eN.Wl.high((0,eT.EY)({above:!1,class:"cm-multiplayer-cursor-layer",update:function(t){return(0,eO.aU)(t,e)},markers:function(t){var n=t.state.field(e,!1);if(!n)return[];var r=[],i=!0,o=!1,a=void 0;try{for(var l,c=Object.values(n)[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value,u=s.selectionStart,d=s.selectionEnd,f=s.color.selection;if(u!==d){var h=eN.jT.range(u,d);r.push.apply(r,(0,_._)(eT.dc.forRange(t,f,h)))}}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return r}})),rV.compute([e],function(t){var n=t.field(e,!1);return n?Object.entries(n).map(function(e){var n=(0,S._)(e,2),r=(n[0],n[1]);return{color:r.color.cursor,number:t.doc.lineAt(r.selectionStart).number}}):[]})]}}),im=eT.tk.theme({".multiplayer-cursor":{width:"2px",left:"0",top:"0"},".multiplayer-cursor .multiplayer-label":{boxShadow:eu.TV.shadow1,borderRadius:eu.TV.borderRadius4,padding:"1px",position:"absolute",left:"0px",animation:"fadeOut 2s ease-in forwards",color:"white",display:"inline-block",whiteSpace:"nowrap"},".multiplayer-cursor:hover .multiplayer-label":{animation:"auto"}});function iv(e){e.style.transform="translate(-10000px, -10000px)"}var ig=/iPhone|iPad|iPod/i;function iy(){return!!window.navigator.userAgent.match(ig)||"ontouchstart"in window&&window.navigator.userAgent.includes("Macintosh")}function ib(e){var t=document.createElement("div");t.textContent=e.username,t.style.backgroundColor=e.color.cursor,t.classList.add("multiplayer-label");var n=document.createElement("div");return n.classList.add("multiplayer-cursor"),n.style.backgroundColor=e.color.cursor,n.style.position=iy()?"absolute":"fixed",n.appendChild(t),{dom:n,label:t}}var iw=new Map,iZ=[im,eT.lg.define(function(e){var t=e.state.field(ip,!1),n=new Map((t?Object.values(t):[]).map(function(e){return[e.id,{view:ib(e),cursor:e}]})),r=!0,i=0,o="function"==typeof IntersectionObserver?new IntersectionObserver(function(e){Date.now()>i-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&s()},{threshold:[1]}):null;function a(){o&&(o.disconnect(),n.forEach(function(e){o.observe(e.view.dom)}))}function l(){t&&0!==Object.values(t).length&&(e.inView&&e.requestMeasure(u),r!==e.inView)&&!(r=e.inView)&&n.forEach(function(e){iv(e.view.dom)})}a();var c=null;function s(){null===c&&(c=setTimeout(function(){c=null,l()},50))}window.addEventListener("resize",s);var u={read:function(){return{editorRect:e.scrollDOM.getBoundingClientRect(),dimensions:new Map((t?Object.values(t):[]).map(function(t){var r=n.get(t.id),i=r?function(e,t){var n=iw.get(e);if(n)return n;var r=t.getBoundingClientRect().width;return iw.set(e,r),r}(t.username,r.view.label):null;return[t.id,{position:e.coordsAtPos(t.position),labelWidth:i}]}))}},write:function(e){n.forEach(function(t,n){var r=e.dimensions.get(n);!function(e){var t=e.cursorView,n=e.position,r=e.labelWidth,i=e.editorRect,o=t.dom,a=t.label;if(!n||!r){iv(o);return}var l=n.bottom-n.top;if(n.bottom<=i.top+l||n.top+l>=i.bottom||n.right<i.left-.1||n.left>i.right+.1){iv(o);return}var c=n.left+r-i.right,s="0px";c>0?(s="-".concat(c,"px"),a.style.borderBottomLeftRadius="4px"):a.style.borderBottomLeftRadius="0px",a.style.pointerEvents="none",a.style.transform="translate(".concat(s,", -100%)");var u=iy()?{x:n.left-i.left+"px",y:n.top-i.top+"px"}:{x:"calc(".concat(n.left,"px + var(--fixed-position-offset-x))"),y:"calc(".concat(n.top,"px + var(--fixed-position-offset-y))")},d=u.x,f=u.y;o.style.transform="translate(".concat(d,", ").concat(f,")"),o.style.height=l+"px"}({cursorView:t.view,position:(null==r?void 0:r.position)||null,labelWidth:(null==r?void 0:r.labelWidth)||null,editorRect:e.editorRect})})},key:"multiplayer-cursors-plugin-".concat(rX()())};return{update:function(r){r.transactions.length&&(i=Date.now());var o=r.state.field(ip,!1);if(!(o!==r.startState.field(ip,!1))){r.geometryChanged&&l();return}var c=new Map,s=new Set;if(o){var u=new Map((0,_._)(n.values()).map(function(e){return[e.cursor.id,e.view]}));Object.values(o).forEach(function(t){var n=u.get(t.id);if(n)s.add(n),c.set(t.id,{view:n,cursor:t});else{var r=ib(t);c.set(t.id,{view:r,cursor:t}),e.dom.appendChild(r.dom)}})}n.forEach(function(e){s.has(e.view)||e.view.dom.remove()}),n=c,t=o,a(),l()},destroy:function(){window.removeEventListener("resize",s),n.forEach(function(e){e.view.dom.remove()}),t=void 0,n=new Map,null==o||o.disconnect(),c&&clearTimeout(c)},maybeMeasure:l}},{eventHandlers:{scroll:function(){this.maybeMeasure()}}})],ix=function(){"use strict";function e(t,n,r,i){var o=this;(0,eL._)(this,e),this.view=t,this.destroyed=!1,this.colors=this.getColorMapFromUsers(i.getActiveUsers()),this.disposes=[],this.updateSelections=null,this.disposes.push(i.onUserLeave(function(e){o.destroyed||o.view.dispatch({effects:ih.of(e.username)})}),i.onActiveUsersChange(function(e){o.destroyed||(o.colors=o.getColorMapFromUsers(e))}),r.watchTextFile(n,{onReady:function(e){var t=e.updateSelections;o.destroyed||(o.updateSelections=t)},onCursor:function(e){if(!o.destroyed){var t=function(e){var t,n=e.cursor,r=e.usernameColorsMap,i=null===(t=n.user)||void 0===t?void 0:t.name;if(i){var o=n.id,a=n.position,l=n.selectionStart,c=n.selectionEnd,s=r[i];if(s&&o&&"number"==typeof a&&"number"==typeof l&&"number"==typeof c)return iu.of({id:o,username:i,position:a,color:{cursor:s,selection:is[s]||""},selectionStart:l,selectionEnd:c})}}({cursor:e,usernameColorsMap:o.colors});t&&o.view.dispatch({effects:t})}},onRemoveCursor:function(e){o.destroyed||o.view.dispatch({effects:id.of(e)})},onError:function(){o.updateSelections=null},onMoveOrDelete:function(){o.updateSelections=null}}))}var t=e.prototype;return t.getColorMapFromUsers=function(e){return e.reduce(function(e,t){return t.username&&t.color?(0,k._)((0,C._)({},e),(0,tu._)({},t.username,t.color)):e},{})},t.postUpdate=function(e){if(!(!e.selectionSet||e.transactions.every(function(e){return e.annotation(eN.YW.remote)}))&&this.updateSelections){var t=e.state.selection.ranges.map(function(e){return{position:e.head,selectionStart:e.from,selectionEnd:e.to}});this.updateSelections(t)}},t.destroy=function(){this.destroyed=!0,this.disposes.forEach(function(e){return e()})},e}(),iC=new eR.j(function(e,t,n){return[iZ,ip,eT.lg.define(function(r){return new ix(r,e,t,n)},{provide:function(e){return eT.tk.updateListener.of(function(t){var n;return null===(n=t.view.plugin(e))||void 0===n?void 0:n.postUpdate(t)})}})]}),ik=function(){"use strict";function e(t,n){var r=this;(0,eL._)(this,e),this.view=t,this.presence=n,this.destroyed=!1,this.followed=null,this.dispose=n.onFollowedUserChanged(function(e){return r.onFollowedUserChanged(e)}),Promise.resolve().then(function(){r.onFollowedUserChanged(n.getFollowedUser())})}var t=e.prototype;return t.onFollowedUserChanged=function(e){var t=this;if(!this.destroyed&&(this.followed=e,this.followed)){var n=this.view.state.field(ip,!1);if(n){var r=Object.values(n).find(function(e){var n;return e.username===(null===(n=t.followed)||void 0===n?void 0:n.username)});r&&this.jumpToPosition(r.position)}}},t.jumpToPosition=function(e){this.view.dispatch({effects:[eT.tk.scrollIntoView(eN.jT.cursor(e),{x:"center",y:"center"})]})},t.unfollow=function(){this.presence.getFollowedUser()&&this.presence.unfollowUser()},t.postUpdate=function(e){if(this.followed){var t=void 0,n=!0,r=!1,i=void 0;try{for(var o,a=e.transactions[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value,c=!0,s=!1,u=void 0;try{for(var d,f=l.effects[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var h=d.value;h.is(iu)&&h.value.username===this.followed.username&&(t=h)}}catch(e){s=!0,u=e}finally{try{c||null==f.return||f.return()}finally{if(s)throw u}}}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}t&&this.jumpToPosition(t.value.position)}},t.destroy=function(){this.destroyed=!0,this.dispose()},e}(),iS=new eR.j(function(e){return eT.lg.define(function(t){return new ik(t,e)},{provide:function(e){return eT.tk.updateListener.of(function(t){var n;return null===(n=t.view.plugin(e))||void 0===n?void 0:n.postUpdate(t)})},eventHandlers:{click:function(){this.unfollow()},wheel:function(){this.unfollow()},keydown:function(e){"Control"!==e.key&&"Meta"!==e.key&&this.unfollow()}}})}),i_=n(40455),iE=eT.lg.define(function(e){var t=e.state.facet(iT),n=[];return{update:function(e){t=e.state.facet(iT);var n=!0,r=!1,i=void 0;try{for(var o,a=e.transactions[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;l.changes.empty||this.pushTransaction(l)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}},flush:function(){n=[]},logs:function(){return n},pushEvent:function(t){var n={anchor:e.state.selection.main.anchor,head:e.state.selection.main.head,docLength:e.state.doc.length,time:Date.now(),type:t.type};t instanceof KeyboardEvent&&(n.key=t.key,n.metaKey=t.metaKey,n.shiftKey=t.shiftKey,n.altKey=t.altKey,n.ctrlKey=t.ctrlKey),t instanceof InputEvent&&(n.data=t.data,n.inputType=t.inputType,n.isComposing=t.isComposing),t instanceof CompositionEvent&&(n.data=t.data),this.pushLog(n)},pushTransaction:function(e){this.pushLog({userEvent:e.annotation(eN.YW.userEvent),changes:JSON.stringify(e.changes),time:Date.now(),type:"transaction"})},pushLog:function(e){t&&(n.push(e),n=n.slice(Math.max(0,n.length-100)))}}},{provide:function(e){var t=function(t,n){var r;return null===(r=n.plugin(e))||void 0===r?void 0:r.pushEvent(t)};return eN.Wl.highest(eT.tk.domEventHandlers({keypress:t,keydown:t,keyup:t,beforeinput:t,input:t,compositionstart:t,compositionupdate:t,compositionend:t}))}}),iT=eN.r$.define({combine:function(e){return!!e.length&&e[0]}}),iR=new eR.j(function(e){return iT.of(e)}),iD=n(76881),iI=n(79468),iB=n(73878),iG=eN.q6.define(),iP=eN.Py.define(),iA=eN.QQ.define({create:function(){return!0},update:function(e,t){return!(0,eO.aU)(t,iP)&&e},provide:function(e){return rO.o.from(e)}}),iL=function(){"use strict";function e(t,n,r,i){var o=this;(0,eL._)(this,e),this.view=t,this.path=n,this.fs=r,this.writeChange=null,this.destroyed=!1,this.debug=(0,k._)((0,C._)({},i),{latestReceivedVersion:0,openVersion:0,initiatedChanges:0,previousInitiatedChanges:null}),this.dispose=r.watchTextFile(n,{onReady:function(e){var n=e.initialContent,r=e.writeChange,i=e.version;o.destroyed||(o.debug.latestReceivedVersion=i,o.debug.openVersion=i,o.debug.setBsodFilePathVersion({filePath:o.path,version:i}),o.debug.trackTimeToLoadFileEnd(o.path),o.writeChange=r,t.dispatch({changes:{from:0,to:t.state.doc.length,insert:n},effects:iP.of(null),annotations:[eN.YW.addToHistory.of(!1),eN.YW.remote.of(!0),iG.of(!0)]}))},onChange:function(e){var n=e.changes,r=e.changeSource,i=e.version,a=e.userId;if(!o.destroyed){o.debug.latestReceivedVersion=i,o.debug.setBsodFilePathVersion({filePath:o.path,version:i});try{t.dispatch({changes:n,annotations:[eN.YW.remote.of(r===iB.Fl.Container),eN.YW.addToHistory.of(r===iB.Fl.Local||0===a),iG.of(!0)]})}catch(e){o.debugThrowSyncRemoteOpError(n,r,e)}}},onError:function(){o.destroyed||(o.dispose=null,o.writeChange=null)},onMoveOrDelete:function(){o.destroyed||(o.dispose=null,o.writeChange=null)}})}var t=e.prototype;return t.postUpdate=function(e){if(e.docChanged&&this.writeChange){var t=!0,n=!1,r=void 0;try{for(var i,o=e.transactions[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;if(!(a.annotation(eN.YW.remote)||a.annotation(iG))){this.debug.initiatedChanges++;var l=a.annotation(i_.Z)?{author:"ghostwriter"}:{};try{this.writeChange(a.changes,l),this.debug.previousInitiatedChanges=a.changes}catch(t){this.debugThrowWriteChangeError(e,a,t);break}}}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}}},t.destroy=function(){var e;this.destroyed=!0,null===(e=this.dispose)||void 0===e||e.call(this),this.dispose=null,this.writeChange=null,this.debug.deleteBsodFilePathVersion({filePath:this.path})},t.debugThrowSyncRemoteOpError=function(e,t,n){var r=this;this.fs.readFile(this.path,{fromDisk:!1}).then(function(i){var o="replitReadError: "+i.error;i.error||(o=i.content.toString());var a=r.view.contentDOM.innerText;r.debug.throwBsod({origin:"Codemirror: ot/syncRemoteOp",error:n,tags:{ot:!0},extras:{filePath:r.path,previousChanges:JSON.stringify(r.debug.previousInitiatedChanges),changes:JSON.stringify(e),changeSource:t,otClientDoc:o,domText:a,cmDoc:r.view.state.doc.sliceString(0),openVersion:r.debug.openVersion,version:r.debug.latestReceivedVersion,initiatedChanges:r.debug.initiatedChanges}}),(0,eT.OO)(r.view.state,n)})},t.debugThrowWriteChangeError=function(e,t,n){var r=this;this.fs.readFile(this.path,{fromDisk:!1}).then(function(i){var o="replitReadError: "+i.error;i.error||(o=i.content.toString());var a=e.view.contentDOM.innerText,l=e.view.plugin(iE),c=null==l?void 0:l.logs();null==l||l.flush(),r.debug.throwBsod({origin:"Codemirror: ot/writeChange",error:n,tags:{ot:!0},extras:{filePath:r.path,previousChanges:JSON.stringify(r.debug.previousInitiatedChanges),transactionChanges:JSON.stringify(t.changes),otherTransactionChanges:JSON.stringify(e.transactions.filter(function(e){return e!==t}).map(function(e){return e.changes})),transactionDoc:t.newDoc.sliceString(0),updateDoc:e.state.doc.sliceString(0),otClientDoc:o,domText:a,openVersion:r.debug.openVersion,latestReceivedVersion:r.debug.latestReceivedVersion,keystrokes:JSON.stringify(c)}})}),(0,eT.OO)(e.state,n)},e}(),iN=new eR.j(function(e,t,n){return eT.lg.define(function(r){return new iL(r,e,t,n)},{provide:function(e){return[iA,eT.tk.updateListener.of(function(t){var n;return null===(n=t.view.plugin(e))||void 0===n?void 0:n.postUpdate(t)})]}})}),iO=n(70125),iU=n(79685),iX=n(61873),iM=n(45077),iF=n(24006),iW=n(1277),iV=n(68453),iH=n(79904),iz=n(44935),ij=n(58532),iq=n(11195),iJ=(0,em.X)({buttons:[eu.l0.display.flex,eu.l0.rowWithGap(4),eu.l0.justify.end],input:[eu.l0.colWithGap(4),eu.l0.flex.grow(1)],gap:[eu.l0.colWithGap(16)],label:[eu.l0.color.foregroundDimmer,eu.l0.fontSize(12),eu.l0.height(24),eu.l0.justify.center],flexRow:[eu.l0.display.flex,eu.l0.rowWithGap(8),eu.l0.align.center]}),iY={fontFamily:"text-security-disc"},i$=el.K.label;function iK(e){var t=(0,eB.Z)().secrets,n=(0,en.useId)(),r=(0,en.useId)(),i=(0,S._)((0,en.useState)(""),2),o=i[0],a=i[1],l=(0,S._)((0,en.useState)(e.initialValue),2),c=l[0],s=l[1],u=(0,S._)((0,en.useState)(!1),2),d=u[0],f=u[1],h=(0,en.useRef)(null);return(0,en.useEffect)(function(){if(e.isOpen){var t;null===(t=h.current)||void 0===t||t.focus(),(0,t8.j)(t8.U3.PASTE_SCANNER_USED,{action:"modal_opened",provider:null==e?void 0:e.provider})}},[e.isOpen,null==e?void 0:e.provider]),(0,E.tZ)(iq.MT,{contain:!0,children:(0,E.tZ)(ij.u,{isOpen:e.isOpen,onRequestClose:e.onCancel,children:(0,E.BX)(el.G,{css:iJ.gap,children:[(0,E.tZ)(tY.xv,{variant:"subheadBig",multiline:!1,children:"Add a key name for your secret value"}),(0,E.BX)(el.G,{css:iJ.flexRow,children:[(0,E.BX)(el.G,{css:iJ.input,children:[(0,E.tZ)(i$,{css:iJ.label,htmlFor:n,children:"Key"}),(0,E.tZ)(iz.II,{id:n,ref:h,value:o,onChange:function(e){return a(e.target.value)}})]}),(0,E.BX)(el.G,{css:iJ.input,children:[(0,E.BX)(el.G,{css:iJ.flexRow,children:[(0,E.tZ)(i$,{css:iJ.label,htmlFor:r,children:"Value"}),(0,E.tZ)(n2.hU,{alt:"Toggle Secret",onClick:function(){return f(function(e){return!e})},tooltipPlacement:"top",children:d?(0,E.tZ)(z.Z,{}):(0,E.tZ)(H.Z,{})})]}),(0,E.tZ)(iz.II,{id:r,value:c,onChange:function(e){return s(e.target.value)},style:d?void 0:iY})]})]}),(0,E.BX)(el.G,{css:iJ.buttons,children:[(0,E.tZ)(iH.zx,{text:"Cancel",onClick:e.onCancel}),(0,E.tZ)(iH.zx,{colorway:"primary",text:"Save Secret",disabled:0===o.length||0===c.length,onClick:(0,e_._)(function(){return(0,eE.Jh)(this,function(n){switch(n.label){case 0:return[4,t.addEntries([{key:o,value:c}])];case 1:return n.sent(),e.onSaveSecret(o,c),(0,t8.j)(t8.U3.PASTE_SCANNER_USED,{action:"secret_created",provider:null==e?void 0:e.provider}),[2]}})})})]})]})})})}var iQ=n(2446),i0=n(54300),i1=n(31252),i2=(0,em.X)({hint:[eu.l0.align.center,eu.l0.border({color:eu.TV.outlineDimmer,direction:"top"}),eu.l0.color.foregroundDimmest,eu.l0.display.flex,eu.l0.flex.row,eu.l0.px(8),eu.l0.py(4),eu.l0.rowWithGap(8)],info:[eu.l0.p(8)],key:[eu.l0.px(4)],wrapper:[eu.l0.backgroundColor.backgroundHigher,eu.l0.borderRadius(4),eu.l0.cursor.default,eu.l0.font.default],mobileButtons:[eu.l0.flex.grow(1)],mobileHint:[eu.l0.justify.center]}),i3={borderTop:"1px solid ".concat(eu.TV.outlineDimmer),borderBottom:"1px solid ".concat(eu.TV.outlineDimmer),borderRadius:0};function i4(e){return(0,E.BX)(el.G,{css:i2.wrapper,style:e.onMobile?i3:void 0,children:[(0,E.BX)(el.G,{css:i2.info,style:{textAlign:e.onMobile?"center":"inherit"},children:[(0,E.tZ)(el.G,{children:"The value you pasted looks like a secret."}),(0,E.tZ)(el.G,{children:e.supportsSecrets?"Store it securely using our Secrets feature.":"Anyone will be able to see this."})]}),e.onMobile?(0,E.tZ)(i6,(0,C._)({},e)):(0,E.tZ)(i8,(0,C._)({},e))]})}function i8(e){return(0,E.BX)(E.HY,{children:[e.supportsSecrets?(0,E.BX)(el.G,{css:i2.hint,onClick:e.onClickUseSecrets,children:[(0,E.tZ)(iQ.Z,{}),"Press",(0,E.tZ)(el.G,{css:i2.key,children:(0,E.tZ)(i1.bM,{keyCombo:"Tab",small:!0})}),"to use Secrets"]}):null,(0,E.BX)(el.G,{css:i2.hint,onClick:e.onClickPasteAnyway,children:[(0,E.tZ)(i0.Z,{}),"Press",(0,E.tZ)(el.G,{css:i2.key,children:(0,E.tZ)(i1.bM,{keyCombo:"Enter",small:!0})}),"to paste anyway"]}),e.supportsSecrets?null:(0,E.BX)(el.G,{css:i2.hint,onClick:e.onClickUndo,children:[(0,E.tZ)(i0.Z,{}),"Press",(0,E.tZ)(el.G,{css:i2.key,children:(0,E.tZ)(i1.bM,{keyCombo:"Escape",small:!0})}),"to undo"]})]})}function i6(e){return(0,E.BX)(el.G,{css:[i2.hint,i2.mobileHint],children:[e.supportsSecrets?(0,E.tZ)(iH.zx,{css:i2.mobileButtons,iconLeft:(0,E.tZ)(iQ.Z,{}),text:"Use Secrets",onClick:e.onClickUseSecrets,colorway:"primary"}):null,(0,E.tZ)(iH.zx,{css:i2.mobileButtons,iconLeft:(0,E.tZ)(i0.Z,{}),text:"Paste Anyway",onClick:e.onClickPasteAnyway}),e.supportsSecrets?null:(0,E.tZ)(iH.zx,{css:i2.mobileButtons,iconLeft:(0,E.tZ)(iQ.Z,{}),text:"Undo",onClick:e.onClickUndo})]})}var i5=n(14548),i7=n(64627),i9=(0,em.X)({border:[eu.l0.border({color:t6.TV.accentPrimaryDefault,direction:"y",width:1})],title:[eu.l0.display.flex,eu.l0.rowWithGap(8),eu.l0.align.center,eu.l0.justify.spaceBetween,eu.l0.px(8),eu.l0.pt(4),eu.l0.font.default],wrapper:[eu.l0.backgroundColor.backgroundRoot,eu.l0.py(0),eu.l0.position.relative,eu.l0.zIndex(200)]});function oe(e){var t;return t=e.onClose,(0,en.useEffect)(function(){var e=function(e){"Escape"===e.key&&t(e)};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}},[t]),(0,E.tZ)(iq.MT,{autoFocus:!0,contain:!0,children:(0,E.tZ)(el.G,{css:i9.wrapper,children:(0,E.BX)(el.G,{css:i9.border,children:[(0,E.BX)(el.G,{css:i9.title,children:[(0,E.BX)(tY.xv,{multiline:!1,children:["Access the secret ",(0,E.tZ)("strong",{children:e.keyName}),":"]}),(0,E.tZ)(n2.hU,{alt:"Close",onClick:e.onClose,children:(0,E.tZ)(n4.Z,{})})]}),(0,E.tZ)(i5.Tg,{background:"root",children:(0,E.tZ)(i7.Z,{keyName:e.keyName,filePath:e.filePath,onInsert:e.onInsert})})]})})})}var ot=iF.V.compute([iX.xg],function(e){var t=e.field(iX.xg).iter();if(null===t.value)return null;for(var n=[];null!==t.value;){var r=t.from,i=t.to,o=t.value;n.push({from:r,to:i,insert:o.result.secret}),t.next()}return n}),on=function(e){"use strict";(0,e9._)(n,e);var t=(0,te._)(n);function n(e,r){var i;return(0,eL._)(this,n),(i=t.call(this)).secret=e,i.as=r,i}var r=n.prototype;return r.toDOM=function(e){var t=this,n=(0,tq.V)((0,E.tZ)(i4,{supportsSecrets:e.state.facet(iX.$X),onMobile:"pocket"===this.as,onClickUseSecrets:function(){e.dispatch({effects:iX.Lo.of(t.secret)})},onClickPasteAnyway:function(){(0,iX.Pz)(e),e.focus()},onClickUndo:function(){e.dispatch({effects:iX.uh.of(t.secret.id)}),e.focus()}}));return"pocket"===this.as&&(n.style.zIndex="200",n.style.position="relative",this.adjustForGutter(n,e)),n},r.updateDOM=function(e,t){return this.adjustForGutter(e,t),!0},r.adjustForGutter=function(e,t){var n=t.dom.querySelector(".cm-gutters");e.style.marginLeft=n?"-".concat(n.clientWidth,"px"):"inherit"},n}(eT.l9),or=iV.t.compute([iX.xv],function(e){var t=e.facet(tj.Yp),n=e.field(iX.xv);return n&&t?{key:"pasteScannerModal",node:function(e){var t;return(0,E.tZ)(iK,{isOpen:!0,initialValue:n.result.secret,provider:n.result.provider,onSaveSecret:(t=(0,e_._)(function(t){var r,i,o,a,l;return(0,eE.Jh)(this,function(c){for(r=e.state.field(iX.xg).iter(),i=[];r.value;)o=r.from,a=r.to,(l=r.value).id===n.id&&(i.push(iX.uh.of(l.id)),i.push(iX.Yt.of({secret:t,from:o,to:a}))),r.next();return e.dispatch({effects:(0,_._)(i).concat([iX.ZB.of(null)])}),[2]})}),function(e){return t.apply(this,arguments)}),onCancel:function(){return e.dispatch({effects:iX.ZB.of(null)})}})}}:null}),oi=eT.tk.decorations.compute([iX.Do],function(e){var t=e.field(iX.Do).iter(),n=t.from,r=t.to,i=t.value,o=e.facet(tj.Yp);return i&&o?eT.p.set(eT.p.widget({widget:new oo(i.key,o),side:1,block:!0}).range(n,r)):eT.p.none}),oo=function(e){"use strict";(0,e9._)(n,e);var t=(0,te._)(n);function n(e,r){var i;return(0,eL._)(this,n),(i=t.call(this)).key=e,i.filePath=r,i}var r=n.prototype;return r.toDOM=function(e){var t=(0,tq.V)((0,E.tZ)(oe,{keyName:this.key,filePath:this.filePath,onClose:function(){return e.dispatch({effects:iX.qs.of(null)})},onInsert:function(t){e.dispatch(e.state.changeByRange(function(e){return{range:eN.jT.cursor(e.from+t.length),changes:{from:e.from,to:e.to,insert:t}}})),e.focus(),(0,t8.j)(t8.U3.PASTE_SCANNER_USED,{action:"secret_key_inserted"})}}));return this.adjustForGutter(t,e),t},r.updateDOM=function(e,t){return this.adjustForGutter(e,t),!0},r.adjustForGutter=function(e,t){var n=t.dom.querySelector(".cm-gutters");e.style.marginLeft=n?"-".concat(n.clientWidth,"px"):"inherit"},n}(eT.l9),oa=[ot,(c=[iX.xv,iX.xg],s=function(e){return null!=e.field(iX.xv,!1)?null:e.field(iX.xg,!1)||null},[eT.hJ.compute(c,function(e){var t=s(e);if(!t||e.facet(iW.h))return null;for(var n=t.iter();n.value;){var r=function(){var e=new on(n.value,"tooltip");return{v:{arrow:!0,pos:n.to,create:function(t){return{dom:e.toDOM(t)}}}}}();if("object"===(0,iM._)(r))return r.v}return null}),eT.tk.decorations.compute(c,function(e){var t=s(e);if(!t||!e.facet(iW.h))return eT.p.none;for(var n=t.iter();n.value;){var r=new on(n.value,"pocket");return eT.p.set(eT.p.widget({widget:r,side:1,block:!0}).range(n.to,n.to))}return eT.p.none})]),or,oi],ol=new eR.j(function(e){return[iX.$X.of(!e),iX.Do,iX.xg,iX.xv,oa,iX.Gv]});function oc(e,t){var n=performance.now();t4.kg.time(e,n-t)}var os=new eR.j(function(e){var t=e?.01:.001;return eN.Wl.highest(eT.tk.domEventHandlers({keydown:function(e){if(Math.random()<t){var n=e.timeStamp;requestAnimationFrame(function(){oc("editor input latency",n),"undefined"!=typeof requestIdleCallback?requestIdleCallback(function(){oc("editor input latency after layout",n)}):setTimeout(function(){oc("editor input latency after layout",n)})})}}}))}),ou=n(91166),od=n(69436),of=n(32508),oh=n.n(of),op=[{regexp:/https?:\/\/[^\s)"']+/g,cursor:"pointer",onClick:function(e){oh()(e)&&window.open(e,"_blank")}}],om=new eR.j(function(e){return e?null:(0,od.ZP)({key:"mod",rules:op})}),ov=n(30826),og=n.n(ov),oy=new Set,ob=og()(function(){var e=!0,t=!1,n=void 0;try{for(var r,i=oy[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;(0,t8.j)(t8.U3.WS_TYPED,{fileExt:o})}}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}oy.clear()},18e4),ow=eT.tk.updateListener.of(function(e){if(e.docChanged){var t=e.state.facet(tj.Yp);if(t){var n=(0,er.r6)(t)||(0,er.UO)(t);!e.transactions.some(function(e){return e.annotation(eN.YW.remote)})&&(oy.has(n)||(oy.add(n),ob()))}}}),oZ=n(11515),ox=eT.tk.theme({".cm-ruler-element":{backgroundColor:eu.TV.backgroundHigher}}),oC=eN.QQ.define({create:function(e){return 0===e.doc.length},update:function(e,t){return t.docChanged?0===t.state.doc.length:e}}),ok=(0,eT.EY)({above:!1,class:"cm-ruler-layer",update:function(e){return(0,eO.aU)(e,oS,oC,rM.R)},markers:function(e){if(e.state.field(oC,!1))return[];var t=e.state.facet(oS);if(0===t.length)return[];var n=[],r=e.dom.getBoundingClientRect(),i=e.contentDOM.getBoundingClientRect().left-r.left+6,o=r.width-2,a=Math.max(r.height,e.contentHeight),l=!0,c=!1,s=void 0;try{for(var u,d=t[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value,h=i+e.defaultCharacterWidth*f;h<o&&n.push(new eT.dc("cm-ruler-element",h,0,2,a))}}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}return n}}),oS=eN.r$.define({enables:[oC,ok,ox]}),o_=new eR.j(function(e){return e.map(function(e){return oS.of(e)})}),oE=n(5786),oT=n(52657),oR=n(37862),oD=n(1567),oI=n(91026),oB=n(16633),oG=n(62922),oP=n(47385),oA=n(29460);function oL(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;if(!e.valid)return[];for(var r=[],i=e.getCursor(t),o=i.next();!o.done&&r.length<n;)r.push(o.value),o=i.next();return r}function oN(e){return e>420?"large":"small"}var oO=el.K.div,oU=(0,em.X)({root:[eu.l0.rowWithGap(4),eu.l0.px(4),eu.l0.py(6),{borderBottom:"1px solid",borderColor:eu.TV.outlineDimmest}],panelButtonWrapper:[eu.l0.center,eu.l0.height(32)],content:[eu.l0.display.grid,eu.l0.flex.growAndShrink(1),{gridTemplateAreas:'"search search-controls"',gridTemplateRows:"1fr",gridTemplateColumns:"1fr max-content",gap:eu.TV.space8}],contentExpanded:[{gridTemplateAreas:'"search search-controls" "replace replace-controls"',gridTemplateRows:"1fr 1fr",gridTemplateColumns:"1fr max-content"}],contentExpandedSmall:[{gridTemplateAreas:'"search" "search-controls" "replace" "replace-controls"',gridTemplateRows:"1fr max-content 1fr max-content",gridTemplateColumns:"1fr"}],contentSmall:[{gridTemplateAreas:'"search" "search-controls"',gridTemplateRows:"1fr max-content",gridTemplateColumns:"1fr"}],matchLabel:[eu.l0.position.absolute,eu.l0.top(0),eu.l0.right(0),eu.l0.height("100%"),eu.l0.center,eu.l0.pr(4)],inputControlsSmall:[eu.l0.colWithGap(8),eu.l0.flex.growAndShrink(1)],searchInputWrapper:[eu.l0.position.relative,{gridArea:"search"}],searchControls:[eu.l0.display.flex,eu.l0.align.center,eu.l0.rowWithGap(8),eu.l0.flex.wrap,{gridArea:"search-controls"}],replaceInputWrapper:[{gridArea:"replace"}],replaceControls:[eu.l0.display.flex,eu.l0.align.center,eu.l0.rowWithGap(8),eu.l0.flex.wrap,{gridArea:"replace-controls"}],searchSettings:eu.l0.flex.row,jumpIconButton:[eu.l0.height(32),eu.l0.width(32)]});function oX(e){var t=(0,en.useRef)(null);return(0,en.useEffect)(function(){if(t.current){var n;e!==(null===(n=t.current)||void 0===n?void 0:n.value)&&(t.current.value=e)}},[e]),t}var oM=new tq.J(en.forwardRef(function(e,t){var n=e.view,r=e.query,i=e.updateQuery,o=(0,S._)((0,en.useState)(!1),2),a=o[0],l=o[1],c=(0,S._)((0,en.useState)([]),2),s=c[0],u=c[1],d=(0,S._)((0,en.useState)(null),2),f=d[0],h=d[1],p=s.length,m=(0,oT.Z)(r),v=(0,oT.Z)(s),g=oX(r.search),y=oX(r.replace);function b(){(0,oE.g)(n);var e=n.state.selection.main;n.dispatch({effects:eT.tk.scrollIntoView(e.from,{y:"center",x:"center"})}),p<=1||h(function(t){if(null===t){var n=s.findIndex(function(t){return t.from===e.from&&t.to===e.to});return -1===n?1:n+1}return t>=p?1:t+1})}function w(){(0,oE.a7)(n);var e=n.state.selection.main;n.dispatch({effects:eT.tk.scrollIntoView(e.from,{y:"center",x:"center"})}),p<=1||h(function(t){if(null===t){var n=s.findIndex(function(t){return t.from===e.from&&t.to===e.to});return -1===n?1:n+1}return t<=1?p||1:t-1})}(0,en.useImperativeHandle)(t,function(){return{onSelectionSet:function(){var e=n.state.selection.main,t=v.current.findIndex(function(t){return t.from<=e.anchor&&t.to>=e.anchor});h(-1!==t?t+1:null)},onDocChanged:function(){u(oL(m.current,n.state.doc)),h(null)},onExpandRequested:function(){l(!0)}}},[n,m,v]),(0,en.useEffect)(function(){var e=oL(r,n.state.doc);u(e);var t=n.state.selection.main,i=e.findIndex(function(e){return e.from<=t.anchor&&e.to>=t.anchor});h(-1!==i?i+1:null)},[n,r]);var Z=(0,S._)((0,en.useState)(function(){return oN(n.dom.clientWidth)}),2),x=Z[0],C=Z[1],k=(0,oR.Z)(function(e){e.width&&C(oN(e.width))});function _(e){return(0,eT.$1)(n,e,"search-panel")}var T=p>0,R=r.search.length>0?"0 / 0":null,D=T?"".concat(f||1," / ").concat(p):R,I=D?8*D.length:null,B=(0,E.BX)(el.G,{css:oU.searchSettings,children:[(0,E.tZ)(oA.Z,{alt:"case sensitive",icon:(0,E.tZ)(oI.Z,{}),checked:r.caseSensitive,onClick:function(){i({caseSensitive:!r.caseSensitive})}}),(0,E.tZ)(oA.Z,{alt:"regular expressions",icon:(0,E.tZ)(oB.Z,{}),checked:r.regexp,onClick:function(){i({regexp:!r.regexp})}}),(0,E.tZ)(oA.Z,{alt:"whole words",icon:(0,E.tZ)(oG.Z,{}),checked:r.wholeWord,onClick:function(){i({wholeWord:!r.wholeWord})}})]}),G=[oU.content];return"small"!==x&&a?G.push(oU.contentExpanded):"small"===x&&a?G.push(oU.contentExpandedSmall):"small"!==x||a||G.push(oU.contentSmall),(0,E.tZ)(oO,{ref:k,onKeyDown:function(e){_(e)&&e.preventDefault()},children:(0,E.BX)(i5.Tg,{elevated:!0,css:oU.root,children:[(0,E.tZ)(el.G,{css:oU.panelButtonWrapper,children:(0,E.tZ)(n2.hU,{alt:a?"Close replace panel":"Show replace panel",css:oU.jumpIconButton,onClick:function(){l(function(e){return!e})},children:(0,E.tZ)(V.Z,{rotate:a?90:0,style:{transition:"200ms ease"}})})}),(0,E.BX)(el.G,{css:G,children:[(0,E.BX)(el.G,{css:oU.searchInputWrapper,children:[(0,E.tZ)(oP.h,{ref:g,style:{padding:4,paddingRight:null!=I?I:void 0},placeholder:"Search",defaultValue:r.search,name:"search","main-field":"true",onKeyDown:function(e){if((0,oD.jh)(e)&&"f"===e.key){e.currentTarget.select();return}if(!("enter"!==e.key.toLowerCase()||_(e))){if(e.preventDefault(),e.shiftKey){w();return}b()}},onChange:function(e){i({search:e})}}),D?(0,E.tZ)(el.G,{css:oU.matchLabel,children:(0,E.tZ)(tY.xv,{variant:"small",color:"dimmest",multiline:!1,children:D})}):null]}),(0,E.BX)(el.G,{css:oU.searchControls,children:[(0,E.BX)(el.G,{css:eu.l0.flex.row,children:[(0,E.tZ)(n2.hU,{css:oU.jumpIconButton,alt:"Previous",onClick:function(){w()},children:(0,E.tZ)(V.Z,{rotate:-90})}),(0,E.tZ)(n2.hU,{css:oU.jumpIconButton,alt:"Next",onClick:function(){b()},children:(0,E.tZ)(V.Z,{rotate:90})})]}),(0,E.tZ)(iH.zx,{text:"Select all",onClick:function(){(0,oE.i3)(n),n.focus()}}),B]}),a?(0,E.BX)(E.HY,{children:[(0,E.tZ)(el.G,{css:oU.replaceInputWrapper,children:(0,E.tZ)(iz.II,{ref:y,style:{padding:4},placeholder:"Replacement",name:"replace",defaultValue:r.replace,onKeyDown:function(e){"enter"!==e.key.toLowerCase()||_(e)||(e.preventDefault(),(0,oE.K9)(n))},onChange:function(e){i({replace:e.target.value})}})}),(0,E.BX)(el.G,{css:oU.replaceControls,children:[(0,E.tZ)(iH.zx,{text:"Replace",onClick:function(){(0,oE.K9)(n)}}),(0,E.tZ)(iH.zx,{text:"Replace all",onClick:function(){(0,oE.ko)(n)}})]})]}):null]}),(0,E.tZ)(el.G,{css:oU.panelButtonWrapper,children:(0,E.tZ)(n2.hU,{alt:"Close Search Panel",tooltipBehavior:"hidden",onClick:function(){(0,oE.N$)(n)},children:(0,E.tZ)(n4.Z,{})})})]})})})),oF=eN.Py.define(),oW=[(0,oE.yC)({createPanel:function(e){var t=!1,n=!1,r=!1,i=!1,o=!1,a=function(t){var n,r,i,o,a,l,c=(0,oE.uP)(e.state),s=new oE.Jb({search:null!==(n=t.search)&&void 0!==n?n:c.search,caseSensitive:null!==(r=t.caseSensitive)&&void 0!==r?r:c.caseSensitive,literal:null!==(i=t.literal)&&void 0!==i?i:c.literal,regexp:null!==(o=t.regexp)&&void 0!==o?o:c.regexp,replace:null!==(a=t.replace)&&void 0!==a?a:c.replace,wholeWord:null!==(l=t.wholeWord)&&void 0!==l?l:c.wholeWord});s.eq(c)||e.dispatch({effects:oE.ql.of(s)})},l=oM.create({view:e,query:(0,oE.uP)(e.state),updateQuery:a});return{dom:l,top:!0,update:function(t){(0,eO.aU)(t,oE.ql)&&oM.set(l,{view:e,query:(0,oE.uP)(t.state),updateQuery:a}),t.selectionSet&&!i&&(i=!0,requestAnimationFrame(function(){if(!n){var e;i=!1,null===(e=oM.ref(l))||void 0===e||e.onSelectionSet()}})),t.docChanged&&!r&&(r=!0,requestAnimationFrame(function(){if(!n){var e;r=!1,null===(e=oM.ref(l))||void 0===e||e.onDocChanged()}})),(0,eO.aU)(t,oF)&&!o&&(o=!0,requestAnimationFrame(function(){if(!n){var e;o=!1,null===(e=oM.ref(l))||void 0===e||e.onExpandRequested()}}))},mount:function(){t||(t=!0,requestAnimationFrame(function(){if(!n){t=!1;var e=l.querySelector("[main-field]");e&&(e.focus(),e.select())}}))},destroy:function(){return n=!0}}}}),eT.$f.of([{win:"Ctrl-h",linux:"Ctrl-h",preventDefault:!0,run:function(e){return!!((0,oE.Ep)(e.state)||(0,oE.nx)(e))&&(e.dispatch({effects:oF.of(null)}),!0)}}])],oV=n(16155),oH=n(38031),oz=null!==(Z=globalThis.requestIdleCallback)&&void 0!==Z?Z:globalThis.requestAnimationFrame;function oj(e,t,n){var r=e.field(t,!1);if(void 0===r){if(void 0===n)throw Error("Field is not mounted on state");return n}return t.spec.toJSON(r,e)}function oq(e){for(var t=e.sliceString(0,200)+e.length,n=0,r=0;r<t.length;r++)n=(n<<5)-n+t.charCodeAt(r)|0;return(n>>>0).toString(36)}var oJ=function(){"use strict";function e(t,n,r,i){var o=this;(0,eL._)(this,e),this.view=t,this.replId=n,this.cache=r,this.compartment=i,this.historyIsMounted=!1,this.destroyed=!1,this.pending=!1,this.scheduleCacheUpdate=this.scheduleCacheUpdate.bind(this),this.view.scrollDOM.addEventListener("scroll",this.scheduleCacheUpdate),this.view.state.field(iA,!1)||Promise.resolve().then(function(){o.destroyed||o.apply()})}var t=e.prototype;return t.apply=function(){if(!this.historyIsMounted&&this.view.state.field(ei.cE,!1)){(0,eT.OO)(this.view.state,Error("History was preconfigured on this view, if you want to use state cache, please make sure history is not already configured for this view"));return}if(!this.key||this.view.state.field(iA,!1)){if(this.historyIsMounted){var e,t,n=this.key?rO.o.of(!0):[];this.view.dispatch({effects:this.compartment.reconfigure(n)}),this.historyIsMounted=!1}return}var r=this.cache.get(this.key);if(!r||r.hash!==oq(this.view.state.doc)){this.view.dispatch({effects:this.compartment.reconfigure((0,ei.m8)())}),this.historyIsMounted=!0;return}var i=eN.jT.fromJSON(r.selection),o=[(e=r.scroll,(t=eT.tk.scrollIntoView(e.pos,{y:"start",x:"start",yMargin:e.yDiff,xMargin:e.scrollLeft})).value.isSnapshot=!0,t),this.compartment.reconfigure([ei.cE.init(function(e){var t,n;return t=ei.cE,n=r.history,t.spec.fromJSON(n,e)}),(0,ei.m8)()])];if(this.view.state.field(R.iQ,!1))for(var a=0;a<r.folds.length;a+=2){var l=r.folds[a],c=r.folds[a+1];o.push(R.SW.of({from:l,to:c}))}this.view.dispatch({selection:i,effects:o}),this.historyIsMounted=!0},t.scheduleCacheUpdate=function(){var e=this;this.pending||(this.pending=!0,oz(function(){e.pending&&!e.destroyed&&(e.pending=!1,e.historyIsMounted&&e.key&&e.cache.set(e.key,{hash:oq(e.view.state.doc),scroll:function(e){var t=e.scrollDOM.scrollTop,n=e.scrollDOM.scrollLeft;if(0===t&&0===n)return{pos:0,yDiff:0,scrollLeft:0};var r=e.lineBlockAtHeight(t+8),i=r.from>=e.viewport.from||e.viewportLineBlocks[0].top-t>200?r:e.viewportLineBlocks[0];return{pos:i.from,yDiff:i.top-t,scrollLeft:n}}(e.view),selection:e.view.state.selection.toJSON(),history:oj(e.view.state,ei.cE),folds:oj(e.view.state,R.iQ,[])}))}))},t.postUpdate=function(e){if((0,eO.aU)(e,tj.Yp,iA)){this.apply();return}!this.pending&&this.historyIsMounted&&(0,eO.aU)(e,"doc","selection",ei.cE,R.iQ)&&this.scheduleCacheUpdate()},t.destroy=function(){this.destroyed=!0,this.view.scrollDOM.removeEventListener("scroll",this.scheduleCacheUpdate)},(0,nl._)(e,[{key:"key",get:function(){var e=this.view.state.facet(tj.Yp);return e?"".concat(this.replId,":").concat(e):null}}]),e}(),oY=new eR.j(function(e,t){var n=new eN.F6,r=eT.lg.define(function(r){return new oJ(r,e,t,n)},{provide:function(e){return eT.tk.updateListener.of(function(t){var n;null===(n=t.view.plugin(e))||void 0===n||n.postUpdate(t)})}});return[n.of(rO.o.of(!0)),r]}),o$=eT.tk.theme({"&":{contain:"size"},"& > .cm-scroller":{contain:"strict"}}),oK=n(9487),oQ=n(99595),o0=n(1193);function o1(e,t,n,r){var i=(0,oQ.Z)().showError,o=(0,oV.Z)(),a=(0,o0.eR)({variables:{replId:o,path:e},onError:function(e){i(e.message)},skip:!r||t});return(0,en.useMemo)(function(){var r;return t||a.loading||a.error||!a.data||(null===(r=a.data.threadsByFile)||void 0===r?void 0:r.__typename)!=="ThreadsByFileResult"?{}:a.data.threadsByFile.threads.filter(function(t){return t.path===e&&(!n||!t.isResolved)}).reduce(function(e,t){return(0,k._)((0,C._)({},e),(0,tu._)({},t.id,t))},{})},[a.loading,a.data,a.error,e,t,n])}var o2=n(62279),o3=n(379),o4=n(49638),o8=n(25688),o6=n(59140),o5=n(60366),o7=n(27840),o9=n(98571),ae=function(e){var t=e.caretSize,n=void 0===t?[8,12]:t,r=(0,no._)(e,["caretSize"]);return(0,E.BX)("svg",(0,k._)((0,C._)({width:n[0],height:n[1],viewBox:"0 0 12 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r),{children:[(0,E.tZ)("mask",{id:"outline",fill:"white",children:(0,E.tZ)("path",{d:"M0 8L5.2 1.06667C5.6 0.533333 6.40033 0.533776 6.80033 1.06711C8.67223 3.56297 9.93719 5.24959 12 8H0Z"})}),(0,E.tZ)("path",{d:"M0 8L5.2 1.06667C5.6 0.533333 6.40033 0.533776 6.80033 1.06711C8.67223 3.56297 9.93719 5.24959 12 8H0Z",fill:"url(#gradient-fill)"}),(0,E.tZ)("path",{d:"M0 8L-0.8 7.4L-2 9H0V8ZM12 8V9H14L12.8 7.4L12 8ZM5.2 1.06667L4.4 0.466667L5.2 1.06667ZM6.80033 1.06711L6.00033 1.66711L6.80033 1.06711ZM12 7H0V9H12V7ZM0.8 8.6L6 1.66667L4.4 0.466667L-0.8 7.4L0.8 8.6ZM6.00033 1.66711C7.87223 4.16297 9.13719 5.84959 11.2 8.6L12.8 7.4C10.7372 4.64959 9.47223 2.96297 7.60033 0.467109L6.00033 1.66711ZM6 1.66667L6.00033 1.66711L7.60033 0.467109C6.80082 -0.598902 5.20049 -0.600655 4.4 0.466667L6 1.66667Z",fill:"#0079F2",mask:"url(#outline)"}),(0,E.tZ)("defs",{children:(0,E.BX)("linearGradient",{id:"gradient-fill",x1:"5.07692",y1:"0",x2:"5.07692",y2:"21.3333",gradientUnits:"userSpaceOnUse",children:[(0,E.tZ)("stop",{stopColor:"#57ABFF"}),(0,E.tZ)("stop",{offset:"1",stopColor:"#0079F2"})]})})]}))},at=n(66975),an=n(21289),ar=n(61177),ai=n(65894),ao=n(59325),aa=n(28949),al=n(20622),ac=n(76684),as=n(82973),au=n(14074),ad=n(7300),af=n(86866),ah=n(42704),ap=n(43133),am=n(52589),av=n(69284),ag=(0,em.X)({inlineThreadHeader:[eu.l0.flex.row,eu.l0.align.center,eu.l0.justify.spaceBetween,eu.l0.position.relative,eu.l0.px(12),eu.l0.py(8),{borderBottomWidth:eu.TV.borderWidthDefault,borderBottomStyle:"solid",borderBottomColor:eu.TV.outlineDimmest}],inlineThreadHeaderCaret:[eu.l0.position.absolute,eu.l0.height("fit-content"),eu.l0.display.flex,eu.l0.flex.row,eu.l0.align.center],inlineThreadHeaderActions:[eu.l0.flex.row,eu.l0.align.center,eu.l0.rowWithGap(4)],inlineThreadHeaderNavigator:[eu.l0.flex.row,eu.l0.align.center,eu.l0.rowWithGap(4)],inlineThreadInputContainer:[eu.l0.px(12),eu.l0.pb(8),eu.l0.pt(8),eu.l0.border({color:eu.TV.outlineDimmest,direction:"top"}),{".popover-control-container":[eu.l0.flex.grow(1)]}],inlineThreadInput:[eu.l0.flex.row,eu.l0.align.start,eu.l0.rowWithGap(8),eu.l0.width("full")],commentContainer:[eu.l0.px(12),eu.l0.py(12),eu.l0.maxHeight(300),eu.l0.overflowY("auto"),eu.l0.colWithGap(16)]}),ay=function(e){var t,n,r=e.isCreating,i=e.threadId,o=e.filePath,a=e.isResolved,l=e.isLoading,c=e.isPlaceholder,s=e.caretPosition,u=e.onRequestClose,d=e.onResolveThread,f=e.openThreadsInbox,h={viewAll:"Inbox",next:"Next thread",previous:"Previous thread",dismiss:"Collapse"},p=o1(null===o?"":o,l,!0,!0),m=(0,O.Gn)("fontSize").preferences.fontSize,v=[12,8];switch(m){case 10:v=[8,6];break;case 14:v=[10,6];break;case 18:v=[12,8];break;case 24:v=[14,10]}var g=(0,en.useMemo)(function(){return Object.values(p).sort(function(e,t){return e.indexStart-t.indexStart})},[p]),y=(0,en.useMemo)(function(){return g.findIndex(function(e){return e.id===i})},[g,i]),b=(0,an.a9)(),w=(t=(0,e_._)(function(){return(0,eE.Jh)(this,function(e){return b(y===g.length-1?g[0].id:g[y+1].id),[2]})}),function(){return t.apply(this,arguments)}),Z=(n=(0,e_._)(function(){return(0,eE.Jh)(this,function(e){return b(0===y?g[g.length-1].id:g[y-1].id),[2]})}),function(){return n.apply(this,arguments)});return(0,E.BX)(i5.Tg,{background:"root",css:ag.inlineThreadHeader,children:[null!==s&&(0,E.tZ)("span",{css:ag.inlineThreadHeaderCaret,style:{top:-v[1],left:s},children:(0,E.tZ)(ae,{caretSize:v})}),(0,E.tZ)(iH.zx,{iconLeft:(0,E.tZ)(af.Z,{}),onClick:function(){f()},text:h.viewAll,size:"small"}),g.length>1?(0,E.BX)(el.G,{css:ag.inlineThreadHeaderNavigator,children:[(0,E.tZ)(n2.hU,{alt:h.previous,onClick:Z,children:(0,E.tZ)(o5.Z,{})}),(0,E.BX)(tY.xv,{color:"dimmest",variant:"small",multiline:!1,children:[y+1,"/",g.length]}),(0,E.tZ)(n2.hU,{alt:h.next,onClick:w,children:(0,E.tZ)(o6.Z,{})})]}):null,(0,E.BX)(el.G,{css:ag.inlineThreadHeaderActions,children:[r||a||c?null:(0,E.tZ)(iH.zx,{onClick:void 0===d?function(){}:d,text:"Resolve",size:"small",iconLeft:(0,E.tZ)(o7.Z,{})}),!r&&a?(0,E.tZ)(o3.D,{text:"Resolved",colorway:"positive"}):null,(0,E.tZ)(iH.zx,{onClick:void 0===u?function(){}:u,text:h.dismiss,size:"small",iconLeft:(0,E.tZ)(ad.Z,{})})]})]})},ab=function(e){var t,n,r=e.threadId,i=e.isResolved,o=e.onMessageChange,a=e.onMessageSubmit,l=e.isPlaceholder,c=e.onRequestClose,s=void 0===c?function(){}:c,u=(0,S._)((0,en.useState)(""),2),d=u[0],f=u[1],h=(0,S._)((0,en.useState)(rh().v4()),2),p=h[0],m=h[1],v=(0,aa.Z)().ref,g=(0,en.useRef)(null),y={input:{placeholder:function(){return l?"Start a new thread (Markdown is supported)":i?"Reply to re-open thread":"Reply (Markdown is supported)"}},submit:"Post reply",cancel:"Cancel"},b=function(){var e=d.trim();0!==e.length&&(a({message:e,messageId:p}),f(""),m(rh().v4()))},w=(0,al.d)(),Z=(0,ai.Z)(),x=(0,S._)((0,ac.Z)({"@":(t=(0,e_._)(function(e){var t,n;return(0,eE.Jh)(this,function(r){return t=Z.filter(function(e){return e.id!==w}),e&&(n=e.toLowerCase(),t=t.filter(function(e){return e.username.toLowerCase().startsWith(n)})),[2,t.slice(0,5).map(function(e){return{icon:(0,E.tZ)(ao.Z,{username:e.username,fullName:e.fullName,url:e.image,style:{height:"24px",width:"24px",minWidth:"24px",minHeight:"24px"}}),value:e.username}})]})}),function(e){return t.apply(this,arguments)})}),2),_=x[0].suggestions,T=x[1],R=(0,ap.Kb)({items:(null==_?void 0:_.results)||[],defaultHighlightedIndex:0,isOpen:(null!==(n=null==_?void 0:_.results.length)&&void 0!==n?n:0)>0,onSelectedItemChange:function(e){var t=e.selectedItem;if(_&&t){var n=_.applySuggestion({targetValue:d,suggestionValue:t.value}),r=n.fullValue,i=n.cursorIndex;f(r),setTimeout(function(){g.current&&(g.current.setSelectionRange(i,i),g.current.focus())})}}}),D=R.isOpen,I=R.getInputProps,B=R.getMenuProps,G=R.getItemProps,P=R.highlightedIndex,A=R.getComboboxProps;return(0,en.useEffect)(function(){var e="threads/drafts/".concat(r),t=as.Z.get(e,"string");t&&f(t);var n=g.current;return function(){if(n){var t=n.value;if(0===t.length){as.Z.remove(e);return}as.Z.set(e,t)}}},[r]),(0,E.tZ)(i5.Tg,{background:"root",css:ag.inlineThreadInputContainer,children:(0,E.BX)("div",(0,k._)((0,C._)({css:ag.inlineThreadInput},A()),{children:[l?(0,E.tZ)(iH.zx,{text:y.cancel,onClick:s}):null,(0,E.BX)("div",{css:[{width:"100%"}],children:[(0,E.tZ)(iz.B,(0,C._)({},I({ref:function(e){g.current=e,v(e),T(e)},value:d,onChange:function(e){var t=e.target.value;f(t),o({message:t,messageId:p})},onKeyDown:function(e){!D&&(e.preventDownshiftDefault=!0,"Enter"!==e.key||e.shiftKey||(e.stopPropagation(),e.preventDefault(),b()))},onKeyUp:function(e){"Escape"===e.key&&(e.stopPropagation(),e.preventDefault(),s())},placeholder:y.input.placeholder(),css:[eu.l0.height(32),eu.l0.align.start,{resize:"vertical",width:"100%",flexGrow:1,caretColor:"auto"}],autoFocus:!0}))),(0,E.tZ)("div",{css:{position:"relative"},children:(0,E.tZ)("div",(0,k._)((0,C._)({},B({css:[{position:"absolute",top:eu.TV.space2,overflow:"hidden"},eu.l0.borderRadius(16),eu.l0.shadow(1),eu.l0.backgroundColor.backgroundDefault]})),{children:null==_?void 0:_.results.map(function(e,t){return(0,o2.az)("div",(0,k._)((0,C._)({},G({item:e,index:t})),{key:e.value}),(0,E.BX)(ah.Ug,{spacing:2,css:[P===t?eu.l0.backgroundColor.backgroundHighest:null,eu.l0.p(8)],children:[e.icon,(0,E.tZ)("div",{children:e.value})]}))})}))})]}),(0,E.tZ)(el.G,{css:[eu.l0.pt(4)],children:(0,E.tZ)(n2.hU,{alt:y.submit,tooltipDelay:"long",onClick:b,children:(0,E.tZ)(o9.Z,{})})})]}))})},aw=function(e){var t,n,r=e.threadId,i=e.isCreating,o=e.isResolved,a=void 0!==o&&o,l=e.view,c=e.filePath,s=e.openThreadsInbox,u=(0,o4.Z)(r,l,c),d=u.thread,f=u.loading,h=u.isPlaceholder,p=u.getLatestAnchor,m=u.updateThread,v=u.changeThreadMessage,g=u.finalizeThreadMessage,y=function(){null==l||l.dispatch({effects:[av.YM.of(null)]})},b=(0,O.Gn)("fontSize").preferences.fontSize,w=(0,en.useRef)(null);(0,ar.Z)(d);var Z=p(),x=l&&!f&&"number"==typeof(null==Z?void 0:Z.indexEnd)&&Z.indexEnd<=l.state.doc.length?null===(n=l.coordsAtPos(Z.indexEnd))||void 0===n?void 0:n.left:null,C=(null==l?void 0:l.dom.getBoundingClientRect().left)||null,k=b;switch(b){case 10:k=13;break;case 14:k=19;break;case 18:k=25;break;case 24:k=34}var S=(0,oQ.Z)().showConfirm,T=(0,oV.Z)(),R=(0,en.useRef)(null),D=function(){R.current&&(R.current.scrollTop=R.current.scrollHeight)};(0,en.useEffect)(function(){setTimeout(function(){D()},0)},[null==d?void 0:d.messages]);var I=(0,en.useMemo)(function(){return(null==d?void 0:d.messages)?(0,_._)(d.messages).sort(function(e,t){return Date.parse(e.timeCreated)-Date.parse(t.timeCreated)}):[]},[null==d?void 0:d.messages]),B=(t=(0,en.useRef)(0),(0,oR.Z)(function(e){var n=e.height;n!==t.current&&(null==l||l.requestMeasure()),t.current=n}));return(0,E.tZ)("div",{css:[eu.l0.width("100%"),eu.l0.backgroundColor.backgroundRoot],children:(0,E.BX)(el.G,{innerRef:(0,au.l)(w,B),css:[eu.l0.font.default,{borderTopWidth:eu.TV.borderWidthDefault,borderBottomWidth:eu.TV.borderWidthDefault,borderStyle:"solid",borderColor:eu.TV.accentPrimaryDefault}],children:[h||f?null:(0,E.tZ)(ay,{isCreating:i,isResolved:a,isLoading:f,threadId:r,filePath:c,caretPosition:x&&C?x-C-6:null,isPlaceholder:h,onRequestClose:y,onResolveThread:function(){m({changes:{isResolved:!0}}),S("Thread resolved. You can reopen it from the inbox.")},openThreadsInbox:s}),f&&!h?(0,E.tZ)(el.G,{style:{height:k},children:(0,E.tZ)(o8.Z,{viewBox:"0 0 400 21",backgroundColor:eu.TV.accentPrimaryDimmest,backgroundOpacity:0,foregroundColor:eu.TV.accentPrimaryDimmest,foregroundOpacity:.2,speed:1,children:(0,E.tZ)("rect",{x:"0",y:"0",width:"100%",height:"100%"})})}):(0,E.BX)(E.HY,{children:[!i&&I.length>0?(0,E.tZ)("div",{css:ag.commentContainer,style:{fontSize:b},ref:R,children:I.map(function(e){return(0,E.tZ)(at.Z,{thread:d,message:e},e.id)})}):null,(0,E.tZ)(ab,{threadId:r,isPlaceholder:h,isResolved:a,onRequestClose:y,onMessageChange:v,onMessageSubmit:function(e){g(e),(0,t8.j)(am.U3.MESSAGE_SENT,{replId:T,source:"threads",newThread:h})}})]})]})})},aZ=function(e){"use strict";(0,e9._)(n,e);var t=(0,te._)(n);function n(){return(0,eL._)(this,n),t.apply(this,arguments)}var r=n.prototype;return r.compare=function(e){return this==e||this.constructor==e.constructor&&this.eq(e)},r.eq=function(e){return!1},r.destroy=function(e){},n}(eN.uU);aZ.prototype.elementClass="",aZ.prototype.toDOM=void 0,aZ.prototype.mapMode=eN.gc.TrackBefore,aZ.prototype.startSide=aZ.prototype.endSide=-1,aZ.prototype.point=!0;var ax=eN.r$.define(),aC=eN.r$.define(),ak=eN.r$.define({combine:function(e){return e.some(function(e){return e})}}),aS=eT.lg.fromClass(function(){"use strict";function e(t){(0,eL._)(this,e),this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-right-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.width="0px",this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=t.state.facet(aC).map(function(e){return new aR(t,e)});var n=!0,r=!1,i=void 0;try{for(var o,a=this.gutters[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;this.dom.appendChild(l.dom)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}this.fixed=!t.state.facet(ak),this.fixed&&(this.dom.style.position="sticky",this.dom.style.right="0"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM.nextSibling)}var t=e.prototype;return t.update=function(e){if(e.viewportChanged){var t=this.view.contentDOM.nextElementSibling;t&&t!==this.dom&&t.classList.contains("cm-minimap-gutter")&&e.view.scrollDOM.insertBefore(this.dom,e.view.contentDOM.nextSibling)}if(this.updateGutters(e)){var n=this.prevViewport,r=e.view.viewport,i=Math.min(n.to,r.to)-Math.max(n.from,r.from);this.syncGutters(i<(r.to-r.from)*.8)}e.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(ak)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=e.view.viewport},t.syncGutters=function(e){var t=this,n=this.dom.nextSibling;e&&this.dom.remove();var r=eN.Xs.iter(this.view.state.facet(ax),this.view.viewport.from),i=[],o=this.gutters.map(function(e){return new aT(e,t.view.viewport,-t.view.documentPadding.top)}),a=!0,l=!1,c=void 0;try{for(var s,u=this.view.viewportLineBlocks[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value,f=void 0;if(Array.isArray(d.type)){var h=!0,p=!1,m=void 0;try{for(var v,g=d.type[Symbol.iterator]();!(h=(v=g.next()).done);h=!0){var y=v.value;if(y.type==eT.kH.Text){f=y;break}}}catch(e){p=!0,m=e}finally{try{h||null==g.return||g.return()}finally{if(p)throw m}}}else f=d.type==eT.kH.Text?d:void 0;if(f){i.length&&(i=[]),aE(r,i,d.from);var b=!0,w=!1,Z=void 0;try{for(var x,C=o[Symbol.iterator]();!(b=(x=C.next()).done);b=!0)x.value.line(this.view,f,i)}catch(e){w=!0,Z=e}finally{try{b||null==C.return||C.return()}finally{if(w)throw Z}}}}}catch(e){l=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}var k=!0,S=!1,_=void 0;try{for(var E,T=o[Symbol.iterator]();!(k=(E=T.next()).done);k=!0)E.value.finish()}catch(e){S=!0,_=e}finally{try{k||null==T.return||T.return()}finally{if(S)throw _}}e&&this.view.scrollDOM.insertBefore(this.dom,n)},t.updateGutters=function(e){var t=e.startState.facet(aC),n=e.state.facet(aC),r=e.docChanged||e.heightChanged||e.viewportChanged||!eN.Xs.eq(e.startState.facet(ax),e.state.facet(ax),e.view.viewport.from,e.view.viewport.to);if(t==n){var i=!0,o=!1,a=void 0;try{for(var l,c=this.gutters[Symbol.iterator]();!(i=(l=c.next()).done);i=!0)l.value.update(e)&&(r=!0)}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}else{r=!0;var s=[],u=!0,d=!1,f=void 0;try{for(var h,p=n[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var m=h.value,v=t.indexOf(m);v<0?s.push(new aR(this.view,m)):(this.gutters[v].update(e),s.push(this.gutters[v]))}}catch(e){d=!0,f=e}finally{try{u||null==p.return||p.return()}finally{if(d)throw f}}var g=!0,y=!1,b=void 0;try{for(var w,Z=this.gutters[Symbol.iterator]();!(g=(w=Z.next()).done);g=!0){var x=w.value;x.dom.remove(),0>s.indexOf(x)&&x.destroy()}}catch(e){y=!0,b=e}finally{try{g||null==Z.return||Z.return()}finally{if(y)throw b}}var C=!0,k=!1,S=void 0;try{for(var _,E=s[Symbol.iterator]();!(C=(_=E.next()).done);C=!0){var T=_.value;this.dom.appendChild(T.dom)}}catch(e){k=!0,S=e}finally{try{C||null==E.return||E.return()}finally{if(k)throw S}}this.gutters=s}return r},t.destroy=function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.gutters[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)r.value.destroy()}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}this.dom.remove()},e}(),{provide:function(e){return eT.tk.scrollMargins.of(function(t){var n=t.plugin(e);return n&&0!=n.gutters.length&&n.fixed?t.textDirection==eT.Nm.LTR?{left:n.dom.offsetWidth}:{right:n.dom.offsetWidth}:null})}});function a_(e){return Array.isArray(e)?e:[e]}function aE(e,t,n){for(;e.value&&e.from<=n;)e.from==n&&t.push(e.value),e.next()}var aT=function(){"use strict";function e(t,n,r){(0,eL._)(this,e),this.gutter=t,this.height=r,this.localMarkers=[],this.i=0,this.cursor=eN.Xs.iter(t.markers,n.from)}var t=e.prototype;return t.line=function(e,t,n){this.localMarkers.length&&(this.localMarkers=[]),aE(this.cursor,this.localMarkers,t.from);var r=n.length?this.localMarkers.concat(n):this.localMarkers,i=this.gutter.config.lineMarker(e,t,r);i&&r.unshift(i);var o=this.gutter;if(0!=r.length||o.config.renderEmptyElements){var a=t.top-this.height;if(this.i==o.elements.length){var l=new aD(e,t.height,a,r);o.elements.push(l),o.dom.appendChild(l.dom)}else o.elements[this.i].update(e,t.height,a,r);this.height=t.bottom,this.i++}},t.finish=function(){for(var e=this.gutter;e.elements.length>this.i;){var t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}},e}(),aR=function(){"use strict";function e(t,n){var r=this,i=function(e){r.dom.addEventListener(e,function(r){var i=t.lineBlockAtHeight(r.clientY-t.documentTop);n.domEventHandlers[e](t,i,r)&&r.preventDefault()})};for(var o in(0,eL._)(this,e),this.view=t,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:""),n.domEventHandlers)i(o);this.markers=a_(n.markers(t)),n.initialSpacer&&(this.spacer=new aD(t,0,0,[n.initialSpacer(t)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}var t=e.prototype;return t.update=function(e){var t=this.markers;if(this.markers=a_(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){var n=this.config.updateSpacer(this.spacer.markers[0],e);n!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[n])}var r=e.view.viewport;return!eN.Xs.eq(this.markers,t,r.from,r.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)},t.destroy=function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.elements[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)r.value.destroy()}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}},e}(),aD=function(){"use strict";function e(t,n,r,i){(0,eL._)(this,e),this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(t,n,r,i)}var t=e.prototype;return t.update=function(e,t,n,r){this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),!function(e,t){if(e.length!=t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].compare(t[n]))return!1;return!0}(this.markers,r)&&this.setMarkers(e,r)},t.setMarkers=function(e,t){for(var n="cm-gutterElement",r=this.dom.firstChild,i=0,o=0;;){var a=o,l=i<t.length?t[i++]:null,c=!1;if(l){var s=l.elementClass;s&&(n+=" "+s);for(var u=o;u<this.markers.length;u++)if(this.markers[u].compare(l)){a=u,c=!0;break}}else a=this.markers.length;for(;o<a;){var d=this.markers[o++];if(d.toDOM){d.destroy(r);var f=r.nextSibling;r.remove(),r=f}}if(!l)break;l.toDOM&&(c?r=r.nextSibling:this.dom.insertBefore(l.toDOM(e),r)),c&&o++}this.dom.className=n,this.markers=t},t.destroy=function(){this.setMarkers(null,[])},e}(),aI=eN.r$.define(),aB=eN.r$.define({combine:function(e){return(0,eN.BO)(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers:function(e,t){var n=Object.assign({},e);for(var r in t)!function(e){var r=n[e],i=t[e];n[e]=r?function(e,t,n){return r(e,t,n)||i(e,t,n)}:i}(r);return n}})}}),aG=function(e){"use strict";(0,e9._)(n,e);var t=(0,te._)(n);function n(e){var r;return(0,eL._)(this,n),(r=t.call(this)).number=e,r}var r=n.prototype;return r.eq=function(e){return this.number==e.number},r.toDOM=function(){return document.createTextNode(this.number)},n}(aZ);function aP(e,t){return e.state.facet(aB).formatNumber(t,e.state)}function aA(e){for(var t=9;t<e;)t=10*t+9;return t}aC.compute([aB],function(e){return{class:"cm-lineNumbers",renderEmptyElements:!1,markers:function(e){return e.state.facet(aI)},lineMarker:function(e,t,n){return n.some(function(e){return e.toDOM})?null:new aG(aP(e,e.state.doc.lineAt(t.from).number))},lineMarkerChange:function(e){return e.startState.facet(aB)!=e.state.facet(aB)},initialSpacer:function(e){return new aG(aP(e,aA(e.state.doc.lines)))},updateSpacer:function(e,t){var n=aP(t.view,aA(t.view.state.doc.lines));return n==e.number?e:new aG(n)},domEventHandlers:e.facet(aB).domEventHandlers}});var aL=new(function(e){"use strict";(0,e9._)(n,e);var t=(0,te._)(n);function n(){var e;return(0,eL._)(this,n),e=t.apply(this,arguments),e.elementClass="cm-activeLineGutter",e}return n}(aZ));ax.compute(["selection"],function(e){var t=[],n=-1,r=!0,i=!1,o=void 0;try{for(var a,l=e.selection.ranges[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;if(c.empty){var s=e.doc.lineAt(c.head).from;s>n&&(n=s,t.push(aL.range(s)))}}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return eN.Xs.of(t)});var aN=n(73307),aO=n(79393),aU=function(e){var t=e.isOpen,n=e.threadId,r=(0,S._)((0,en.useState)(!1),2),i=r[0],o=r[1],a=(0,aO.GD)({variables:{id:n},skip:"initial-spacer"===n});(0,en.useEffect)(function(){if(a&&!a.error){var e,t=null===(e=a.data)||void 0===e?void 0:e.thread;t&&o((null==t?void 0:t.__typename)==="AnnotationAnchor"&&(null==t?void 0:t.messages.some(function(e){return!e.seen})))}},[a]);var l={button:{alt:{default:"View threads",close:"Dismiss thread"}}};return(0,E.tZ)(n2.hU,{alt:t?l.button.alt.close:l.button.alt.default,size:24,className:"thread-indicator",css:[eu.l0.width(20),eu.l0.height(20),eu.l0.transition.snappy,eu.l0.cursor.pointer,eu.l0.display.flex,eu.l0.borderRadius(8),eu.l0.position.relative,eu.l0.overflow("visible"),t?eu.l0.color.accentPrimaryStrongest:eu.l0.color.foregroundDimmest,{borderWidth:eu.TV.borderWidthDefault,borderStyle:"solid",borderColor:t?eu.TV.accentPrimaryDefault:"transparent",backgroundColor:t?eu.TV.accentPrimaryDimmer:eu.TV.backgroundHigher,outline:0},{":hover":{borderColor:t?eu.TV.accentPrimaryStronger:eu.TV.outlineDimmer,color:t?eu.TV.accentPrimaryStrongest:eu.TV.foregroundDimmer,background:t?eu.TV.accentPrimaryDefault+" !important":eu.TV.backgroundHighest},svg:{width:12,height:12}}],children:(0,E.BX)(E.HY,{children:[i?(0,E.tZ)("div",{css:[eu.l0.width(8),eu.l0.height(8),eu.l0.backgroundColor.redStronger,eu.l0.position.absolute,eu.l0.top(-1),eu.l0.left(-1),eu.l0.borderRadius("full")]}):null,(0,E.tZ)(aN.Z,{})]})})};function aX(e,t,n){var r=t.clientWidth,i=n.clientWidth;e.style.maxWidth="".concat(r,"px"),e.style.position="sticky",e.style.zIndex="201",e.style.marginLeft="-".concat(i,"px")}var aM=function(e){"use strict";(0,e9._)(n,e);var t=(0,te._)(n);function n(e,r){var i;return(0,eL._)(this,n),(i=t.call(this)).id=e,i.filePath=r,i}var r=n.prototype;return r.eq=function(e){return e.id===this.id},r.toDOM=function(e){var t=(0,tq.V)((0,E.tZ)(aw,{threadId:this.id,view:e,filePath:this.filePath,openThreadsInbox:function(){return(0,rn.ZM)(e.state,{pane:{type:"threadInbox"}})}}));t.className="cm-thread-portal-widget";var n=e.dom.querySelector(".cm-scroller"),r=e.dom.querySelector(".cm-gutters");return n&&r&&aX(t,n,r),t},r.ignoreEvent=function(){return!0},n}(eT.l9),aF=function(e){"use strict";(0,e9._)(n,e);var t=(0,te._)(n);function n(e,r){var i;return(0,eL._)(this,n),(i=t.call(this)).id=e,i.active=r,i}var r=n.prototype;return r.toDOM=function(e){var t=this,n=(0,tq.V)((0,E.tZ)(aU,{isOpen:this.active,threadId:this.id}));return n.className="cm-thread-indicator",n.style.display="inline",n.style.cursor="pointer",n.setAttribute("aria-hidden","true"),n.onclick=function(n){n.stopPropagation(),n.preventDefault(),e.dispatch({effects:[av.YM.of(e.state.field(av.PQ)===t.id?null:t.id)]})},n},r.eq=function(e){return e.id===this.id&&e.active===this.active},n}(aZ),aW=[(i=[aS],r&&!1===r.fixed&&i.push(ak.of(!0)),i),aC.of((0,C._)({},{class:"",renderEmptyElements:!1,elementStyle:"",markers:function(){return eN.Xs.empty},lineMarker:function(){return null},lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},{class:"cm-thread-indicator-gutter",markers:function(e){var t=e.state.field(av.OQ),n=e.state.field(av.PQ);return eN.Xs.of(Object.values(t).filter(function(e){return e.indexEnd!==e.indexStart}).map(function(t){var r=e.state.doc.lineAt(Math.min(t.indexStart,t.indexEnd)).from;return new aF(t.id,t.id===n).range(r)}),!0)},initialSpacer:function(){return new aF("initial-spacer",!1)}}))],aV=function(e){var t=parseInt(e.substring(1),16);return[t>>16&255,t>>8&255,255&t]},aH=n(14861),az=function(e,t,n,r,i){if(t===n)return null;var o=(0,S._)(r,2),a=o[0],l=o[1];return eT.p.mark({class:"replit-thread-highlight cm-thread-".concat(e),attributes:{style:"background-color: ".concat(i?l:a)},id:e}).range(t,n)},aj=new eR.j(function(e,t){return e?[eN.Wl.highest(aW),av.cR,av.OQ,av.ZS,av.PQ,eT.tk.decorations.compute([av.OQ,av.ZS,av.PQ],function(e){var n=e.field(av.OQ),r=e.field(av.ZS),i=e.field(av.PQ),o=r||Object.values(n).find(function(e){return e.id===i});return eT.p.set((0,_._)(Object.values(n)).map(function(e){var n=o&&e.id===o.id;return az(e.id,e.indexStart,e.indexEnd,t,n)}).filter(function(t){return null!==t&&t.from!==t.to&&t.from<=e.doc.length&&t.to<=e.doc.length}),!0)}),eT.tk.decorations.compute([av.OQ,av.ZS,av.PQ,tj.Yp],function(e){var t=e.field(av.OQ),n=e.field(av.ZS),r=e.field(av.PQ),i=e.facet(tj.Yp);if(void 0===i)return eT.p.none;var o=(0,_._)(Object.values(t)).concat((0,_._)(n?[n]:[])).filter(Boolean).find(function(e){return e.id===r});return o?eT.p.set([eT.p.widget({widget:new aM(o.id,i),block:!0,side:1}).range(o.indexEnd)],!0):eT.p.none}),eT.tk.updateListener.of(function(e){(0,ri.j)(e,rM.R,function(){var t=(0,_._)(e.view.dom.querySelectorAll(".cm-thread-portal-widget")),n=e.view.dom.querySelector(".cm-scroller"),r=e.view.dom.querySelector(".cm-gutters");if(t.length&&n&&r){var i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;aX(s,n,r)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}})}),eT.tk.updateListener.of(function(e){(0,ri.j)(e,av.eR,function(t){var n=t.value,r=e.state.field(av.OQ)[n];r&&e.view.dispatch({selection:{anchor:r.indexStart,head:r.indexStart},effects:[eT.tk.scrollIntoView(r.indexStart,{x:"center",y:"center"})]})})})]:null}),aq=n(97687),aJ=n(43086),aY=n(11409);function a$(e){return{filePath:e,text:"",selections:[],hasFocus:!1}}function aK(e,t){var n;return null==t?a$(e):{filePath:e,text:null!==(n=t.state.doc.toString())&&void 0!==n?n:"",selections:t.state.selection.ranges.map(function(e){var t=e.from;return{location:t,length:e.to-t}}),hasFocus:t.hasFocus}}function aQ(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rX()(),n={messageType:aY.cF.TEXT_EDITOR_STATE,filePath:e.textEditorState.filePath,text:e.textEditorState.text,selections:e.textEditorState.selections,hasFocus:e.textEditorState.hasFocus,hasGhostwriterSuggestion:e.hasGhostwriterSuggestion,revisionId:e.revisionId};(0,aq.bG)(n,t)}function a0(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:rX()(),n={messageType:aY.cF.TEXT_EDITOR_CLOSED,filePath:e};(0,aq.bG)(n,t)}function a1(e,t,n,r,i){return r===e&&r===n.textEditorState.filePath&&t===n.textEditorState.filePath&&i===n.revisionId}function a2(e){var t=e.map(function(e){return eN.jT.range(e.location,e.location+e.length)});return eN.jT.create(t)}function a3(e,t,n,r,i){var o=i.payload;if((0,aY.Se)(o))return function(e,t,n,r,i){if(!a1(e,t,r,i.filePath,i.revisionId))return!1;var o=a2(i.selections);return n.dispatch({selection:o,scrollIntoView:!0}),!0}(e,t,n,r,o);if((0,aY.m7)(o))return function(e,t,n,r,i){if(!a1(e,t,r,i.filePath,i.revisionId))return!1;var o=a2(i.selections);return n.dispatch({changes:{from:0,to:n.state.doc.length,insert:i.text},selection:o,scrollIntoView:!0}),!0}(e,t,n,r,o);if((0,aY.ac)(o))return function(e,t,n,r,i){if(!a1(e,t,r,i.filePath,i.revisionId))return!1;var o=i.insertionRange,a=a2(i.selections);return n.dispatch({changes:{from:o.location,to:o.location+o.length,insert:i.text},selection:a,scrollIntoView:!0}),!0}(e,t,n,r,o);if((0,aY.fz)(o))return!!a1(e,t,r,o.filePath,o.revisionId)&&(n.dispatch(n.state.replaceSelection(o.text)),!0);if((0,aY.T$)(o))a1(e,t,r,o.filePath,o.revisionId)&&(0,iO.l)({filePath:e,view:n,clipboardText:o.text});else if((0,aY.aB)(o))switch(o.action){case aY.b9.REQUEST_BLUR:return function(e,t,n,r,i,o){if(!a1(e,t,r,i,o))return!1;n.contentDOM.blur()}(e,t,n,r,o.filePath,o.revisionId);case aY.b9.REQUEST_UNDO:return!!a1(e,t,r,o.filePath,o.revisionId)&&((0,ei.Yw)(n),!0);case aY.b9.REQUEST_REDO:return!!a1(e,t,r,o.filePath,o.revisionId)&&((0,ei.KX)(n),!0);case aY.b9.REQUEST_INDENT_SELECTION:return!!a1(e,t,r,o.filePath,o.revisionId)&&(ei.at(n),!0);case aY.b9.REQUEST_DEDENT_SELECTION:return!!a1(e,t,r,o.filePath,o.revisionId)&&(ei.xi(n),!0);case aY.b9.REQUEST_TOGGLE_COMMENT:return!!a1(e,t,r,o.filePath,o.revisionId)&&(ei.O8(n),!0);case aY.b9.REQUEST_ACCEPT_GHOSTWRITER_SUGGESTION:return!!a1(e,t,r,o.filePath,o.revisionId)&&(0,aJ.o)(n);case aY.b9.REQUEST_FOCUS:return n.focus(),!0;default:throw Error("Unknown BridgeTextEditorAction.")}else throw Error("Invalid payload.")}var a4=n(66791),a8=n(73660),a6=new eR.j(function(e){var t=eT.tk.domEventHandlers({scroll:ef()(function(t,n){var r=0,i=0,o=!0,a=!1,l=void 0;try{for(var c,s=n.visibleRanges[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value;r=Math.min(r,u.from),i=Math.max(r,u.to)}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}e("user:scroll",{visibleLines:{from:n.state.doc.lineAt(r).number,to:n.state.doc.lineAt(i).number}})},250)}),n=ef()(function(t,n,r){e("user:selection",{inputMethod:r,from:t,to:n})},250);return[t,eT.tk.updateListener.of(function(t){var r=t.transactions,i=!0,o=!1,a=void 0;try{for(var l,c=r[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;s.isUserEvent("input.paste")&&e("user:paste",{}),s.isUserEvent("input.drop")&&e("user:new-drop",{}),s.isUserEvent("move.drop")&&e("user:move-drop",{}),s.isUserEvent("delete.cut")&&e("user:cut",{}),s.isUserEvent("input.complete")&&e("user:complete",{}),s.isUserEvent("select")&&n(s.newSelection.main.from,s.newSelection.main.to,s.isUserEvent("select.pointer")?"pointer":"keyboard"),s.isUserEvent("undo")&&e("user:undo",{}),s.isUserEvent("redo")&&e("user:redo",{})}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}})]}),a5=n(26822),a7=n(572);function a9(e){var t=e.selection.main.head,n=e.doc.lineAt(t);return{offset:t,line:n.number,column:t-n.from+1}}var le=new eR.j(function(e){return eT.tk.focusChangeEffect.of(function(t,n){var r=t.facet(tj.Yp);return r&&e(r,n?{type:"focus",position:a9(t)}:{type:"blur"}),null})}),lt=new eR.j(function(e){return eT.tk.updateListener.of(function(t){if(t.selectionSet){var n=t.state.facet(tj.Yp);n&&e(n,{type:"update",hasFocus:t.view.hasFocus,position:a9(t.state)})}})}),ln=n(6038),lr=n(78371),li=n(81116),lo=n(90333),la=n(68307),ll=n(47495),lc=n(6191),ls=n(25639),lu=n(69967),ld=n(42354),lf=n(43561),lh=n(70793),lp=n(42471),lm=eT.tk.theme({"& .cm-scrollbar-gutter":{backgroundColor:t6.TV.backgroundDefault},"& .cm-scrollbar-inner":{borderColor:t6.TV.backgroundHigher}}),lv=new eR.j(function(e,t){var n;return e?null:[lm,r9.of({create:function(){return{dom:document.createElement("div")}}}),rW.compute(["doc",tD],function(e){var n=e.field(tD,!1);if(!n)return null;for(var r=[],i=1;i<=e.doc.lines;i++)switch(n.getLineChangeType(i)){case tE.dQ.COVERED:r.push({number:i,color:t.values.global.greenDefault,zIndex:1});break;case tE.dQ.MODIFIED:r.push({number:i,color:t.values.global.blueDefault,zIndex:0})}return r}),rq,(n=({color:t.values.global.foregroundDefault}).color,rV.compute(["doc","selection"],function(e){return e.selection.ranges.map(function(t){var r=t.head;return{color:n,number:e.doc.lineAt(r).number,zIndex:1/0}})}))]}),lg=n(64566),ly=n(50303),lb=n(21262),lw=n(71440),lZ=n(9122);function lx(){var e=(0,lb._)(["\n  query GetReplCodeRepairAuthorization($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        authorizations {\n          useCodeRepair {\n            isAuthorized\n            code\n            message\n          }\n        }\n      }\n    }\n  }\n"]);return lx=function(){return e},e}var lC={},lk=(0,lw.Ps)(lx()),lS=n(29017),l_=new eR.j(function(){return(0,eT.CT)()}),lE=function(e){var t;return(0,lg.Z)((t=(0,e_._)(function(t){var n;return(0,eE.Jh)(this,function(r){switch(r.label){case 0:return[4,t.status()];case 1:if((n=r.sent()).error)return[2,{error:n.error,isUnmerged:null}];if(n.changes.find(function(t){return t.path===e&&(t.type.index===lp.hF.UNMERGED||t.type.worktree===lp.hF.UNMERGED)}))return[2,{error:null,isUnmerged:!0}];return[2,{error:null,isUnmerged:!1}]}})}),function(e){return t.apply(this,arguments)}),[e])||{error:null,isUnmerged:null}};function lT(e){var t,n,r,i,o,a,l,c,s,u,d,f,h,p,m,v,g,y,b,w,Z,x,T,R,D,I,B,G,M,F,W,V,H,z,j,q,J,Y,ee,et,ei,eo,ea,el,ec,es,eu,ed,em,ev,eg,ey,eb,ew,eZ,ex,eC,ek,eS,eR,eG,eP,eU,eX,eM,eF,eW,eV,eH,ez,ej,eq,eY,e$,e1,e4,e8,e9,te,tt,tn,tr,ti,to,ta,tl,tc,ts,tu=e.filePath,td=e.autoFocus,tf=e.isHidden,th=e.deeplink,tp=e.onDeeplinkUpdated,tm=e.performPaneOperation,tv=(0,eB.Z)(),tg=tv.fs,ty=tv.debuggest,tb=tv.presence,tw=tv.runner,tZ=(0,O.Gn)("formatOnSave","rulers","minimapDisplay","showLeadingWhitespace","showEnclosedWhitespace","showTrailingWhitespace","showSelectedWhitespace").preferences,tx=(0,oZ.Z)(),tC=tx.ref,tk=tx.view,tS=(0,en.useCallback)(function(e){return tm({operation:"open",pane:e,secondary:!0})},[tm]);(0,eh.VD)(tk);var t_=(0,ep.FS)(),tE=iR.use(!!(null==t_?void 0:t_.match(/Chrome/i))&&!!(null==t_?void 0:t_.match(/Android/i))),tT="/replEnvironmentDesktop"===K().pathname,tR=(t={variables:{replId:(0,oV.Z)()}},n=(0,C._)({},lC,t),lZ.a(lk,n)).data,tD=(null==tR?void 0:null===(ts=tR.repl)||void 0===ts?void 0:ts.__typename)==="Repl"&&tR.repl.authorizations.useCodeRepair.isAuthorized,tI=(0,en.useContext)(ln.B3),tB=(0,iD.jT)(),tG=(i=(r={path:tu,isHidden:tf}).path,o=r.isHidden,a=(0,a7.NH)(),l=le.use(a),c=lt.use(a),(0,en.useEffect)(function(){a(i,{type:o?"hidden":"unhidden"})},[o,a,i]),(0,en.useEffect)(function(){return function(){a(i,{type:"unmount"})}},[a,i]),(0,en.useMemo)(function(){return[l,c]},[l,c])),tP=(d=(s={view:tk,presence:tb,fs:tg,filePath:tu}).view,f=s.presence,h=s.fs,p=s.filePath,m=iC.use(p,h,f),v=iS.use(f),g=(0,iI.Z)().trackTimeToLoadFileEnd,y=(0,iD.uV)(),b=(0,iD.Id)(),w=(0,iD.I7)(),Z=(0,en.useMemo)(function(){return{trackTimeToLoadFileEnd:g,throwBsod:y,setBsodFilePathVersion:b,deleteBsodFilePathVersion:w}},[w,b,y,g]),x=iN.use(p,h,Z),T=null===(u=(0,N.IK)(d,rO.o))||void 0===u||u,R=(0,en.useMemo)(function(){return[x,m,v]},[x,m,v]),(0,en.useMemo)(function(){return{isLoading:T,extensions:R}},[T,R])),tA=tP.isLoading,tL=tP.extensions;I=(D={view:tk,autoFocus:td,isLoading:tA}).view,B=D.isLoading,G=D.autoFocus,(0,en.useEffect)(function(){G&&I&&!B&&I.focus()},[I,B,G]);var tN=function(){var e=(0,oV.Z)(),t=(0,en.useContext)(oH.d);if(!t)throw Error("Expected codemirror state to be in codemirror state context");return oY.use(e,t)}(),tO=(F=(M={filePath:tu,isLoading:tA}).filePath,W=M.isLoading,V=(0,eB.Z)().fs,H=(0,e2.Z)(F),z=(0,O.Gn)("acceptSuggestionOnCommitCharacter","codeIntelligence","codeActionsOnSave","semanticTokens").preferences,j=(0,tU.P5)({controlName:"flag-lsp-semantic-tokens",logFlagToAnalytics:!1}),q=(0,tU.P5)({controlName:"flag-draft-buffers",logFlagToAnalytics:!1}),J=W||!z.codeIntelligence||!H.find(function(e){return e.isSupportedFile(F)}),Y=(0,en.useMemo)(function(){return new eO.Rh(J?[]:function(e,t,n,r){if(!t.length)return[];var i,o,a,l,c,s,u,d=[(o=(i={lspClients:t,path:n}).lspClients,a=i.path,eT.lg.define(function(e){var t,n,r,i,l,c;return n=(t={lspClients:o,path:a,view:e}).lspClients,r=t.path,i=t.view,l=rh().v4(),c=function(e){var t,n=rp.get(e.clientId);return(null!==(t=null==n?void 0:n.get(r))&&void 0!==t?t:[])[0]===l},function(){var e=!0,t=!1,o=void 0;try{for(var a,c=n[Symbol.iterator]();!(e=(a=c.next()).done);e=!0){var s,u=a.value,d=rp.get(u.clientId),f=null!==(s=null==d?void 0:d.get(r))&&void 0!==s?s:[];d?d.set(r,(0,_._)(f).concat([l])):rp.set(u.clientId,new Map([[r,[l]]])),u.notify.didOpen(r,i.state.doc.toString())}}catch(e){t=!0,o=e}finally{try{e||null==c.return||c.return()}finally{if(t)throw o}}}(),{id:l,destroy:function(){var e=!0,t=!1,i=void 0;try{for(var o,a=n[Symbol.iterator]();!(e=(o=a.next()).done);e=!0){var c,s=o.value,u=rp.get(s.clientId),d=(null!==(c=null==u?void 0:u.get(r))&&void 0!==c?c:[]).filter(function(e){return e!==l});s.getServerState()===rd.a.INITIALIZED&&s.isOpen(r)&&s.notify.didClose(r),0===d.length?null==u||u.delete(r):null==u||u.set(r,d)}}catch(e){t=!0,i=e}finally{try{e||null==a.return||a.return()}finally{if(t)throw i}}},update:function(e){if(e.docChanged){var t=!0,i=!1,o=void 0;try{for(var a,l,s=n[Symbol.iterator]();!(t=(l=s.next()).done);t=!0){var u,d=l.value;if(c(d)){var f=null===(u=d.getServerCapabilities())||void 0===u?void 0:u.textDocumentSync;if(f!==t5.TextDocumentSyncKind.None&&d.isOpen(r)){if(f===t5.TextDocumentSyncKind.Full){d.notify.didChange(r,[{text:e.view.state.doc.toString()}]);continue}a||(a=function(e,t){var n=[],r=t;return e.iterChanges(function(e,t,i,o,a){var l=a.sliceString(0),c=t-e,s=c+i;n.push({range:{start:(0,eK.sg)(r,i),end:(0,eK.sg)(r,s)},rangeLength:c,text:l}),r=r.replace(i,s,a)}),n}(e.changes,e.startState.doc)),d.notify.didChange(r,a)}}}}catch(e){i=!0,o=e}finally{try{t||null==s.return||s.return()}finally{if(i)throw o}}}}}})),(0,L.Fq)({lspClients:t,path:n}),function(e,t){function n(e){return(0,e0.Z)(e).isTextDocumentSyncSupported}return eT.lg.fromClass(function(){"use strict";function r(e){(0,eL._)(this,r),this.dispose=this.listen(e.state.facet(tj.Yp))}var i=r.prototype;return i.update=function(e){(0,eO.aU)(e,tj.Yp)&&(this.dispose=this.listen(e.state.facet(tj.Yp)))},i.destroy=function(){this.dispose&&this.dispose()},i.listen=function(r){if(this.dispose&&this.dispose(),r&&t.find(function(e){return n(e)}))return e.watchTextFile(r,{onFlush:function(){var e=!0,i=!1,o=void 0;try{for(var a,l=t[Symbol.iterator]();!(e=(a=l.next()).done);e=!0){var c=a.value;n(c)&&(0,e0.Z)(c).isTextDocumentSyncSaveSupported&&c.isOpen(r)&&c.notify.didSave(r)}}catch(e){i=!0,o=e}finally{try{e||null==l.return||l.return()}finally{if(i)throw o}}}})},r}())}(e,t),(0,rg.BB)(t)];return(0,rv.isMobile)()||d.push([nO,t0,t3,(0,tV.ys)({defaultKeymap:!1,closeOnBlur:!1,tooltipClass:function(e){return(0,tH.o)(e)?tQ:""},addToOptions:[{render:function(e,t){if(!(0,tH.o)(t))return null;var n=(0,tq.V)((0,E.tZ)("div",{className:nN,children:(0,E.tZ)(tK.ZP,{size:"inherit",shortcut:{key:""}})}));return n.style.display="inline-flex",n},position:200}],override:t.map(function(e){return(0,tV.eC)(["LineComment","BlockComment"],function(e){var t=.01>Math.random(),n=0,r=function(n,r,i){if(t&&r){var o=e.getLanguageId(r);return t4.kg.info("lsp:autocomplete:".concat(n),(0,C._)({languageId:o},i)),(0,t8.j)(t8.U3.LSP_COMPLETION_USED,(0,C._)({type:n,sampleRate:.01},i))}};function i(){return(i=(0,e_._)(function(t){var i,o,a,l,c,s,u,d,f,h;return(0,eE.Jh)(this,function(p){switch(p.label){case 0:if(!(o=e.getServerCapabilities())||!(null==o?void 0:o.completionProvider)||!(a=function(e,t){var n=e.state,r=e.pos;if(e.explicit)return{triggerKind:t5.CompletionTriggerKind.Invoked};var i=n.doc.lineAt(r),o=i.text[r-i.from-1],a=i.text.substring(0,r-i.from);return(null==t?void 0:t.includes(o))?{triggerKind:t5.CompletionTriggerKind.TriggerCharacter,triggerCharacter:o}:a.match(/\w$/)?{triggerKind:t5.CompletionTriggerKind.Invoked}:null}(t,(null==o?void 0:null===(i=o.completionProvider)||void 0===i?void 0:i.triggerCharacters)||[])))return[2,null];if(n&&e.notify.cancelRequest(n),!(l=t.state.facet(tj.Yp)))throw Error("path not found");return n=e.generateId(),c=t.state.doc,[4,e.request.completion(l,(0,eK.sg)(c,t.pos),a,{id:n})];case 1:if("error"in(s=p.sent())||(u=s.result,t.aborted||!u))return[2,null];return d=Array.isArray(u)?u:u.items,h=Array.isArray(u)?{}:null!==(f=u.itemDefaults)&&void 0!==f?f:{},[2,function(e){for(var t,n=e.context,r=e.items,i=e.itemDefaults,o=e.client,a=e.trackCompletion,l=e.startingDoc,c=null,s=(R=r.filter(function(e){return!!e.label}),D=["label","kind"],I=new Set,R.filter(function(e){var t=D.map(function(t){return e[t]}).join("");return!I.has(t)&&(I.add(t),!0)})).map(function(e){return{item:e,label:e.label,filterText:(e.filterText||e.label).toLowerCase(),sortText:(e.sortText||e.label).toLowerCase()}}),u=((s=s.sort(function(e,t){return e.sortText<t.sortText?-1:e.sortText>t.sortText?1:0})).length%2?s.length-1:s.length)/2,d=0;d<=u;d++){if(0===d&&s[u]){s[u].boost=0;continue}var f=s[u-d];if(f){var h=s[u-d+1],p=h.sortText,m=h.boost,v=void 0===m?0:m;f.boost=f.sortText===p?v:v+1}var g=s[u+d];if(g){var y=s[u+d-1],b=y.sortText,w=y.boost,Z=void 0===w?0:w;g.boost=g.sortText===b?Z:Z-1}}var x=null!==(P=null===(B=s[0])||void 0===B?void 0:B.boost)&&void 0!==P?P:0,T=null!==(A=null===(G=s[s.length-1])||void 0===G?void 0:G.boost)&&void 0!==A?A:0;if(x>99||T<-99)for(var R,D,I,B,G,P,A,L,N=99/Math.max(Math.abs(x),Math.abs(T)),O=0;O<s.length;O++)s[O].boost=(null!==(L=s[O].boost)&&void 0!==L?L:0)*N;var U=(0,S._)(function(e){var t=Object.create(null),n=Object.create(null),r=!0,i=!1,o=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value.filterText;t[c[0]]=!0;for(var s=1;s<c.length;s++)n[c[s]]=!0}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}var u=nL(t)+nL(n)+"*$";return[RegExp("^"+u),new RegExp(u)]}(s),2),X=U[0],M=U[1],F=n.matchBefore(M),W=n.pos;function V(e,t){var n,r,s,u,d,f,h,p,m,v,g,y,b,w;return m=t.state.facet(tj.Yp),v=null!==(d=(0,tz.Z)(t.state))&&void 0!==d?d:"unknown",g=(0,e0.Z)(o),y=e.item,b=e.boost,w={label:y.label,detail:g.isCompletionLabelDetailsSupported?null===(n=y.labelDetails)||void 0===n?void 0:n.description:y.detail,type:null===(r=Object.entries(t7.CompletionItemKind).find(function(e){var t=(0,S._)(e,2),n=(t[0],t[1]);return y.kind===n}))||void 0===r?void 0:r[0].toLowerCase(),commitCharacters:t.state.facet(nP)?null!==(p=null!==(h=null!==(f=y.commitCharacters)&&void 0!==f?f:i.commitCharacters)&&void 0!==h?h:null===(u=o.getServerCapabilities())||void 0===u?void 0:null===(s=u.completionProvider)||void 0===s?void 0:s.allCommitCharacters)&&void 0!==p?p:[]:void 0,boost:b},nA.set(w,e),w.apply=function(t,n,r,i){var s=function(e){var n=u?l:t.state.doc,r={from:(0,eK.RL)(n,e.start),to:(0,eK.RL)(n,e.end)};return u&&(r.from=u.mapPos(r.from),r.to=u.mapPos(r.to)),r};if(m){var u=c,d=null!==(h=null===(f=e.resolved)||void 0===f?void 0:f.additionalTextEdits)&&void 0!==h?h:y.additionalTextEdits;if(y.insertTextFormat===t7.InsertTextFormat.Snippet){var f,h,p,g,b,w=null;d&&(w={changes:d.map(function(e){return(0,k._)((0,C._)({},s(e.range)),{insert:e.newText})})});var Z=new nC(null!==(b=null!==(g=null===(p=y.textEdit)||void 0===p?void 0:p.newText)&&void 0!==g?g:y.insertText)&&void 0!==b?b:y.label);if(y.textEdit&&"range"in y.textEdit){var x=i,E=s(y.textEdit.range);r=E.from,i=Math.max(i=E.to,x)}var T=w?[w,Z.apply({view:t,from:r,to:i,path:m,completion:n})]:[Z.apply({view:t,from:r,to:i,path:m,completion:n})];t.dispatch.apply(t,(0,_._)(T)),a("completion-accepted",m,{language:v,completionKind:y.kind,insertTextFormat:y.insertTextFormat});return}var R=[];if(y.textEdit){if(!("range"in y.textEdit))return;var D=s(y.textEdit.range);R.push((0,k._)((0,C._)({},D),{to:Math.max(D.to,t.state.selection.main.to),insert:y.textEdit.newText}))}else{var I=y.insertText||y.label,B=t.state.wordAt(i);B&&B.to>i&&I.includes(t.state.doc.sliceString(i,B.to))&&(i=B.to),R.push({from:r,to:i,insert:I})}var G=(0,S._)(R,1)[0],P="";null==d||d.forEach(function(e){var t=s(e.range);"from"in G&&t.from===G.from&&(P=e.newText),R.push((0,k._)((0,C._)({},t),{insert:e.newText}))});var A=i-r;t.state.selection.ranges.forEach(function(e){if(e!==t.state.selection.main){if(!("insert"in G)||!G.insert)throw Error("Expected insert in mainChange");var n=e.from-A,r=P+G.insert;R.push({from:n,to:e.to,insert:r})}});var L=eN.as.of(R.map(function(e){return"from"in e&&void 0!==e.to?(0,k._)((0,C._)({},e),{from:Math.min(e.from,e.to),to:Math.max(e.from,e.to)}):e}),t.state.doc.length);a("completion-accepted",m,{language:v,completionKind:y.kind,insertTextFormat:y.insertTextFormat}),t.dispatch({annotations:tV.Jv.of(n),changes:L,selection:eN.jT.create(t.state.selection.ranges.map(function(e){return e.map(L,0)}),t.state.selection.mainIndex)}),y.command&&o.request.executeCommand(y.command.command,y.command.arguments)}},g.isCompletionItemResolveSupported&&(w.info=(0,e_._)(function(){var t,n,r,i,l,c,s;return(0,eE.Jh)(this,function(u){switch(u.label){case 0:if(n=null!==(t=e.resolved)&&void 0!==t?t:null)return[3,2];return[4,o.request.resolveCompletionItem(y)];case 1:if(n="result"in(r=u.sent())?r.result:null,r.cancelled||null===n)return[2,null];e.resolved=n,u.label=2;case 2:if(i=Math.floor(2147483647*Math.random()),l=[],m&&n.detail&&n.detail!==y.detail&&n.detail!==y.label&&(s=["```"+((c=m.lastIndexOf("."))>=0?m.slice(c+1):"md"),n.detail,"```"].join("\n"),l.push((0,E.tZ)(ni,{className:n.documentation?"lsp-completion-detail":void 0,content:{value:s,kind:"markdown"}},"".concat(i,"-detail")))),n.documentation&&l.push((0,E.tZ)(ni,{content:n.documentation},"".concat(i,"-documentation"))),0===l.length)return[2,null];return a("resolution-presented",m,{language:v,resolutionSource:"request",completionKind:y.kind}),[2,{dom:(0,tq.V)((0,E.tZ)("div",{children:l}))}]}})})),w}return F&&(W=F.from),s.length&&a("completion-options-presented",n.state.facet(tj.Yp),{language:null!==(t=(0,tz.Z)(n.state))&&void 0!==t?t:"unknown"}),{from:W,options:s.map(function(e){return V(e,n)}),validFor:X,update:function(e,t,n,r){return(0,k._)((0,C._)({},e),{options:e.options.map(function(e){var t,n=null!==(t=nA.get(e))&&void 0!==t?t:null;return n?V(n,r):e})})},map:function(e,t){return c=c?c.composeDesc(t):t,e}}}({context:t,startingDoc:c,items:d,itemDefaults:h,client:e,trackCompletion:r})]}})})).apply(this,arguments)}return function(e){return i.apply(this,arguments)}}(e))})})],function(e){var t={current:new Map};function n(){return(n=(0,e_._)(function(n,i){var o,a,l,c,s,u;return(0,eE.Jh)(this,function(d){switch(d.label){case 0:if(!(a=n.facet(tj.Yp))||(l=n.field(r,!1),c=n.field(rl,!1),!(s=e.filter(function(e){var t,n,r,i=null!==(r=null===(n=e.getServerCapabilities())||void 0===n?void 0:null===(t=n.signatureHelpProvider)||void 0===t?void 0:t.triggerCharacters)&&void 0!==r?r:[];return!!(i.length&&(l||c&&i.includes(c)))})).length))return[2,null];return[4,function(e,t,n,r,i){return ru.apply(this,arguments)}(n,i,s,a,t)];case 1:if(!(null==(u=d.sent())?void 0:null===(o=u.signatures)||void 0===o?void 0:o.length))return[2,null];return[2,u]}})})).apply(this,arguments)}var r=eN.QQ.define({create:function(){return null},update:function(e,t){return t.isUserEvent("select.pointer")?null:(e&&t.newSelection.main.from!==e.pos&&(e=(0,k._)((0,C._)({},e),{pos:t.newSelection.main.from})),(0,ri.j)(t,ro.effect,function(n){var r=n.value;e=r?{pos:t.newSelection.main.from,help:r,index:0}:null}),(0,ri.j)(t,ra,function(t){var n=t.value;if(e){var r=e.help.signatures.length,i=(r+e.index+n)%r;e=i>=e.help.signatures.length||i<0?null:(0,k._)((0,C._)({},e),{index:i})}}),e)},provide:function(e){var t=function(t){var n=t.state.field(e);if(!n)throw Error("expected nonnull field");var r=rc.create({help:n.help,index:n.index});return{dom:r,update:function(t){rc.update(r,function(r){var i=t.state.field(e);return i&&i!==n?{help:i.help,index:i.index}:r})}}};return eT.hJ.compute([e],function(n){var r=n.field(e);return r?{pos:r.pos,create:t,above:!0}:null})}}),i=eT.lg.define(function(){var t,r=ef()((t=(0,e_._)(function(e){var t,r,i;return(0,eE.Jh)(this,function(o){switch(o.label){case 0:if(!(t=e.state.selection.main).empty)return[3,2];return r=e.state.field(ro.state,!1),[4,function(e,t){return n.apply(this,arguments)}(e.state,t.from)];case 1:(i=o.sent())&&!r&&(0,tV._B)(e),e.dispatch({effects:ro.effect.of(i)}),o.label=2;case 2:return[2]}})}),function(e){return t.apply(this,arguments)}),0);return{update:function(t){e.some(function(e){return(0,e0.Z)(e).isSignatureHelpSupported})&&t.selectionSet&&t.state.selection.main.empty&&r(t.view)}}});function o(e,t){var n=e.state.field(ro.state,!1);return"active"!==(0,tV.LR)(e.state)&&null!=n&&("navigate"!==t||n.signatures.length>1)}var a=function(e){return function(t){return!!o(t,"navigate")&&(t.dispatch({effects:ra.of(e)}),!0)}},l=[{key:"ArrowDown",run:a(1)},{key:"ArrowUp",run:a(-1)},{key:"Escape",run:function(e){return!!o(e,"dismiss")&&(e.dispatch({effects:ro.effect.of(null)}),!0)}}];return[r,ro.state,rl,i,eN.Wl.high(eT.$f.of(l))]}(t),(l=function(e){var t,n=null;return(0,eT.bF)((t=(0,e_._)(function(t,r){var i,o,a,l,c,s;return(0,eE.Jh)(this,function(u){switch(u.label){case 0:if(t.state.facet(nW.j)||!(0,e0.Z)(e).isHoverSupported||!(i=t.state.facet(tj.Yp)))return[2,null];o=(0,eK.sg)(t.state.doc,r);try{a=t.state.wordAt(r)}catch(e){return[2,null]}if(n){if(n.from===(null==a?void 0:a.from)&&n.to===(null==a?void 0:a.to))return[2,null];e.notify.cancelRequest(n.id)}return n={id:l=e.generateId(),from:null==a?void 0:a.from,to:null==a?void 0:a.to},[4,e.request.hover(i,o,{id:l})];case 1:if(c=u.sent(),n=null,"error"in c||null===(s=c.result))return[2,null];return[2,function(e){var t,n,r=e.hover,i=e.state,o=e.offset;if((Array.isArray(r.contents)||"string"==typeof r.contents)&&0===r.contents.length)return null;var a="",l=i.doc;if(r.range)t=(0,eK.RL)(l,r.range.start),n=(0,eK.RL)(l,r.range.end),a=l.sliceString(t,n);else if(n=void 0,(t=o)<=i.doc.length){var c=i.wordAt(t);c?(a=l.sliceString(c.from,c.to),t=Math.min(t,c.from),n=c.to):a=l.sliceString(t,t+1)}return{pos:t,end:n,create:function(e){var t=(0,tq.V)((0,E.tZ)(nF,{content:r.contents,textHovered:a}));return t.classList.add("hover-tooltip"),t.style.padding="0",{dom:t,mount:function(){!function(e,t){t.forEach(function(t){return setTimeout(e,t)})}(function(){(0,eT.E2)(e)},[0,50,200,1e3])}}},above:!0}}({hover:s,offset:r,state:t.state})]}})}),function(e,n){return t.apply(this,arguments)}),{hideOn:function(e){return!e.annotation(eN.YW.remote)&&!!(e.isUserEvent("input")||e.isUserEvent("delete")||e.isUserEvent("select")||e.state.facet(nW.j))},hoverTime:0})},[eN.Wl.highest(t.map(function(e){return l(e)})),eT.tk.domEventObservers({mousedown:function(e,t){!(e.target instanceof HTMLElement&&e.target.matches(".cm-tooltip *"))&&(0,eT.Dm)(t.state)&&t.dispatch({effects:eT.E8})},keydown:function(e,t){"Escape"===e.key&&(0,eT.Dm)(t.state)&&t.dispatch({effects:eT.E8})},scroll:function(e,t){(0,eT.Dm)(t.state)&&t.dispatch({effects:eT.E8})}})]),(0,rm.DZ)(t,e,r),(0,nV.jd)({lspClients:t}),(c=eN.Py.define(),s=eN.Py.define(),[eT.tk.updateListener.of((u=(0,e_._)(function(e){var n,r,i,o,a,l,u,d,f,h,p,m,v,g,y,b,w,Z,x,C,k,S,E,T,R,D,I,B,G,P,A,L,N,O,U,X;return(0,eE.Jh)(this,function(M){switch(M.label){case 0:if(!t.some(function(e){var t=(0,e0.Z)(e);return t.isFindReferencesSupported||t.isFindDefinitionSupported}))return[2];n=null,r=!0,i=!1,o=void 0;try{for(a=e.transactions[Symbol.iterator]();!(r=(l=a.next()).done);r=!0){u=l.value,d=!0,f=!1,h=void 0;try{for(p=u.effects[Symbol.iterator]();!(d=(m=p.next()).done);d=!0)(v=m.value).is(nz.h)&&(n=v.value)}catch(e){f=!0,h=e}finally{try{d||null==p.return||p.return()}finally{if(f)throw h}}}}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}if(!n||!(g=e.view.state.facet(tj.Yp)))return[2];y=e.state.doc,b=(0,eK.sg)(y,n),w=[],Z=!0,x=!1,C=void 0;try{for(k=function(){var e=E.value,t=(0,e0.Z)(e);t.isFindDefinitionSupported&&w.push(e.request.findDefinitions(g,b).then(function(t){return{client:e,response:t,type:"definition"}})),t.isFindReferencesSupported&&w.push(e.request.findReferences(g,b,{includeDeclaration:!1}).then(function(t){return{client:e,response:t,type:"references"}}))},S=t[Symbol.iterator]();!(Z=(E=S.next()).done);Z=!0)k()}catch(e){x=!0,C=e}finally{try{Z||null==S.return||S.return()}finally{if(x)throw C}}return T=Promise.all(w),(0,nH.SC)(e.view,T),[4,T];case 1:R=M.sent(),D=[],I=[],B=new Set,G=!0,P=!1,A=void 0;try{for(L=function(){var e=O.value,t=e.client,n=e.response,r=e.type;if(("error"in n))throw Error("Something went wrong fetching references: ".concat(n.error.message));var i=(0,nq.g)(n.result);if(!i)return"continue";"definition"===r&&D.push.apply(D,(0,_._)(i)),"references"===r&&I.push.apply(I,(0,_._)(i)),i.forEach(function(e){B.add(t.documentUriToPath(e.uri))})},N=R[Symbol.iterator]();!(G=(O=N.next()).done);G=!0)L()}catch(e){P=!0,A=e}finally{try{G||null==N.return||N.return()}finally{if(P)throw A}}if(!D.length&&!I.length)return(0,nj.J)(e.view,{message:"No references found",offset:n}),e.view.dispatch({effects:s.of(null)}),[2];return U=Array.from(B).filter(function(e){return e!==g}),X=y.toJSON().join("\n"),e.view.dispatch({effects:c.of({references:I,definitions:D,currentFile:g,currentFileContents:X,files:U})}),[2]}})}),function(e){return u.apply(this,arguments)})),eN.QQ.define({create:function(){return null},update:function(e,t){var n=e,r=!0,i=!1,o=void 0;try{for(var a,l=t.effects[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var u=a.value;u.is(c)&&(n=u.value),u.is(s)&&(n=null)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n},provide:function(e){return[eT.$f.of([{key:"Escape",run:function(t){return!!t.state.field(e)&&(t.dispatch({effects:s.of(null)}),!0)}}]),eT.hJ.compute([e],function(t){var n=t.field(e),r=t.facet(tj.Yp);if(!n)return null;var i=t.selection.asSingle().main;return{pos:i.from,end:i.to,create:function(e){var t=(0,tq.V)((0,E.tZ)("div",{children:(0,E.tZ)(n9,(0,k._)((0,C._)({},n),{onClose:function(){e.dispatch({effects:s.of(null)})},jumpToPosition:function(t){if(t.path!==r){(0,rn.ZB)(e.state,{path:t,secondary:!1});return}var n=t.line,i=t.col;(0,tM.S)({view:e,line:n,col:i}),e.focus()}}))}));return t.classList.add("replit-tooltip"),t.style.padding="0",t.style.overflow="scroll",{dom:t}}}})]}})]),(0,rr.f)(e,t)),d}(V,H,F,q))},[H,F,V,q,J]),ee=(0,en.useMemo)(function(){return new eO.Rh(function(){return tW.T.of(H.map(function(e){return(0,e0.Z)(e)}))})},[H]),(0,en.useEffect)(function(){return!H.length||J?Y.set(null):(0,ry.uf)(H.map(function(e){return e.onServerCapabilitiesChange(function(){ee.set(tW.T.of(H.map(function(e){return(0,e0.Z)(e)})))})}))},[ee,H,Y,J]),[ee.extension,Y.extension,rI.use(z.acceptSuggestionOnCommitCharacter),rB.use(z.codeActionsOnSave),rG.use(z.codeIntelligence),rR.use(z.semanticTokens&&j?H:null)]),tJ=(ei=(et={debuggest:ty,filePath:tu}).debuggest,eo=et.filePath,ea=(0,eB.Z)().fs,el=(0,eI.Z)(),ec=(0,eD.Z)(ei.mainClient),eA.use(ec,el,eo,ea));(0,tM.Z)({filePath:tu,view:tk,isLoading:tA,deeplink:th,onDeeplinkUpdated:tp});var tY=(eu=(es={view:tk,filePath:tu}).view,ed=es.filePath,em=(0,eB.Z)().fs,(0,S._)((0,ll.L)({accept:[la.z.Code,lc.FILE],drop:function(e,t){if(eu){var n=t.getClientOffset(),r=n?eu.posAtCoords(n):null;if(null!==r){var i=function(e){eu.focus(),eu.dispatch({changes:{from:r,insert:e},selection:{anchor:r,head:r+e.length}})};if(e.type===la.z.Code)i(e.code);else{var o=!0,a=!1,l=void 0;try{for(var c,s=e.files[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value;ed&&(0,er.gK)(ed)&&(0,ls.r)(u,em,ed).then(i)}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}}}}}}),2)[1]),t$=(0,e5.Z)({filePath:tu}),t1=(eg=(ev={view:tk,filePath:tu,isLoading:tA,enable:tT}).view,ey=ev.filePath,eb=ev.isLoading,ew=ev.enable,eZ=(0,an.kM)(),(0,en.useEffect)(function(){eg&&eZ&&eg.dispatch({effects:[av.YM.of(eZ),av.eR.of(eZ)]})},[eg,eZ]),ex=(0,aH.F)().theme,ek=(eC=(0,S._)((0,en.useState)([t6.TV.accentPrimaryDimmest,t6.TV.accentPrimaryDimmer]),2))[0],eS=eC[1],(0,en.useEffect)(function(){var e=aV(ex.values.global.accentPrimaryDimmest);eS(["rgba(".concat(e.join(","),", 0.5)"),t6.TV.accentPrimaryDimmer])},[ex]),eR=o1(ey,eb,!0,ew),eG=(0,eB.Z)().fs,eU=(eP=(0,oK.kL)(ey)).contentRef,eX=eP.loadedFile,eM=eP.transformSelectionRef,(0,en.useEffect)(function(){var e=!1,t=eM.current,n=eU.current;if(eX&&t&&n&&!eb&&eg){var r=Object.values(eR);if(0===r.length){eg.dispatch({effects:av.qi.of({})});return}Promise.all(r.map(function(e){return(0,oK.Ft)({anchor:e,version:eG.getOTVersion(ey),transformSelection:t,content:n})})).then(function(t){if(!e){var n=t.filter(function(e){return!!e}).map(function(e){if(!e)throw Error("expected resolved anchor");return(0,C._)({},e.anchor,null==e?void 0:e.newSelection)});return eg.dispatch({effects:av.qi.of(n.reduce(function(e,t){return e[t.id]=t,e},{}))}),function(){e=!0,eg&&eg.dispatch({effects:av.qi.of({})})}}})}},[eR,eg,eX,eG,eM,eU,ey,eb]),aj.use(ew,ek));eV=(eF={view:tk,filePath:tu}).view,eH=eF.filePath,ez=(0,$.useRouter)(),ej=(0,X.Gv)(ez),eq=(0,en.useRef)({revisionId:rX()(),textEditorState:a$(eH),hasGhostwriterSuggestion:!1}),eY=(0,en.useRef)(eH),e$=null!==(eW=null==eV?void 0:eV.plugin(N.pE))&&void 0!==eW?eW:null,(0,en.useEffect)(function(){if(ej&&eV&&e$&&!e$.destroyed){var e=function(e){aQ(eq.current,e.messageId)},t=function(t){a3(eH,eY.current,eV,eq.current,t)?e(t):(0,aq.pl)(t.messageId)},n=function(t){a3(eH,eY.current,eV,eq.current,t)?e(t):(0,aq.pl)(t.messageId)},r=function(r){try{var i=r.data;if(!(0,aY.CF)(i)||i.protocolVersion!==aY.Wj)return;var o=i.payload;i.messageDirection===aY.s1.TO_NATIVE&&(0,aY.H7)(o)&&(eY.current=o.activePaneFilePath),(0,aq.fp)(r,function(r){var o=r.type;switch(o){case aY.cF.TEXT_EDITOR_STATE_REQUEST:e(i);break;case aY.cF.REQUEST_SET_SELECTION:case aY.cF.REQUEST_REPLACE_SELECTION:case aY.cF.REQUEST_SET_TEXT:case aY.cF.REQUEST_INSERT_TEXT:case aY.cF.REQUEST_PASTE_TEXT:t(i);break;case aY.cF.TEXT_EDITOR_REQUEST_ACTION:n(i);break;default:(0,a4.Z)(o)}})}catch(e){throw Error("Invalid message: ".concat(e))}};window.addEventListener("message",r),eq.current={revisionId:rX()(),textEditorState:aK(eH,eV),hasGhostwriterSuggestion:(0,tH.o)(eV.state)},aQ(eq.current);var i=!1,o=!1,a=e$.bind({changed:function(e){var t;return e.docChanged?(i=!0,!0):!!e.selectionSet||!!e.focusChanged||(null===(t=eq.current)||void 0===t?void 0:t.hasGhostwriterSuggestion)!==(0,tH.o)(e.state)},callback:function(){var e=i?rX()():eq.current.revisionId;i=!1,eq.current={revisionId:e,textEditorState:aK(eH,eV),hasGhostwriterSuggestion:(0,tH.o)(eV.state)},aQ(eq.current)},destroy:function(){window.removeEventListener("message",r),o||(a0(eH),o=!0)}});return function(){window.removeEventListener("message",r),a(),o||(a0(eH),o=!0)}}},[eV,eH,ej,e$]);var t2=(e1=(0,a8.K)((0,U.Z)(function(){return{path:tu}},[tu])),a6.use(e1)),t9=lE(tu).isUnmerged,ne=(e8=(e4={filePath:tu,enableConflicts:!0===t9}).filePath,e9=e4.enableConflicts,te=(0,tU.P5)({controlName:"flag-editor-git-conflict-markers",logFlagToAnalytics:!1}),tt=(0,eB.Z)().git,tX.use(tt,void 0===e8?null:e8,!(void 0!==e9&&e9)||!te)),nt=(0,X.T3)(),nn=om.use(nt),nr=iO.hx.use(tg),no=os.use(nt),na=o_.use(tZ.rulers),nl=(0,aH.F)(),nc=rN.use(nt,tZ.minimapDisplay,nl),ns=lv.use(nt,nl),nu=(0,tU.P5)({controlName:"flag-draft-buffers"}),nd=P.NS.use(tg,tw,nu,tZ.formatOnSave),nf=(tn={filePath:tu},tr=(0,eB.Z)().container,ti=(0,eQ.T)(),to=(0,O.Gn)("codeIntelligence").preferences,ta=(0,e2.Z)(tn.filePath),tl=(0,e3.Z)(ta),e6.use(ti,tr,ta,tl,to.codeIntelligence,tn.filePath)),nh=eJ.use(tZ.showLeadingWhitespace,tZ.showEnclosedWhitespace,tZ.showTrailingWhitespace,tZ.showSelectedWhitespace),np=(0,lS.N)({analyticsSurface:"workspace_editor"}),nm=(0,lo.Ls)({path:tu}),nv=(0,lo.fD)({path:tu}),ng=(0,lo.jg)({path:tu}),ny=(0,en.useCallback)(function(){tk&&nm(tk,"shortcut")},[tk,nm]),nb=(0,lu.u)({isMobile:nt,generateCode:nm,filePath:tu}),nw=(0,en.useCallback)(function(){tS({type:"ghostwriterChat"})},[tS]),nZ=(0,e7.W)({onGenerateCode:ny,onReplyInChat:nw}),nx=(0,lr.av)(),nk=nx.onContextMenu,nS=nx.closeContextMenu,n_=nx.openContextMenu,nE=nx.isVisible,nT=(0,en.useCallback)(function(e){tk&&(0,eT.$1)(tk,e,"context-menu")&&(nS(),e.stopPropagation(),e.preventDefault())},[nS,tk]),nR=(0,S._)((0,lo.aT)({path:tu,view:tk,onCommand:function(e){if(tk){var t=tk.state.selection.main.head;if(t){var n=tk.coordsAtPos(t);n&&n_({target:{x:n.left,y:n.top},command:[nD(),e],width:275,onKeyDownHandler:nT})}}}}),2),nD=nR[0],nI=nR[1],nB=(0,en.useCallback)(function(e){nk(e,{command:nD(),width:275,onKeyDownHandler:nT})},[nD,nk,nT]),nG=(0,en.useCallback)(function(e,t){n_({target:e,command:[nD(),t],width:275,onKeyDownHandler:nT})},[nD,nT,n_]),nU=lo.pZ.use(nt,nE,nB),nX=li.t.use(nG),nM=(0,en.useCallback)(function(e){n_({target:{x:e.right-275,y:e.top},width:275,command:nD(),onKeyDownHandler:nT})},[nD,nT,n_]),nJ=(0,ld.W)({editCode:ng,explainCode:nv,generateCode:nm,onMoreClick:nM}),nY=(tc=(0,iU.T)(),ol.use(tc)),n$=(0,tU.P5)({controlName:"flag-problems-pane"}),nK=(0,tU.P5)({controlName:"flag-code-repair"}),nQ=tF.y.use(n$),n0=ly.lL.use(tD&&nK),n1=l_.use(),n2=(0,rn.Fs)(tm),n3=lh.G.use(tg,tw,nu);return(0,E.tZ)("div",{css:lf.ac,"data-cy":tA?"workspace-cm-editor-loading":"workspace-cm-editor-".concat(tu),children:(0,E.tZ)(ou.ZP,{ref:tC,elementRef:tY,css:lf.Mp,filePath:tu,hideTooltips:tf,extensions:[nU,nX,nI,tL,tJ,tN,tO,nb,n1,nn,tE,no,ne,ns,nc,iO.sy,nr,iE,nZ,nY,o$,na,nh,nd,nf,A.er,t2,t$,t1,oW,ow,nt?[]:nJ,tG,nQ,n2,n3,n0,np],onException:function(e){var t,n={filePath:tu,cursorPosition:JSON.stringify(null==tI?void 0:null===(t=tI.get(Q._s))||void 0===t?void 0:t.position),fileVersion:tB({filePath:tu})};if(tk){var r=tk.plugin(iE),i=null==r?void 0:r.logs();null==r||r.flush(),n.domText=tk.contentDOM.innerText,n.keystrokes=JSON.stringify(i),n.selection=JSON.stringify(tk.state.selection.main.toJSON()),n.updateDoc=tk.state.doc.sliceString(0)}(0,a5.O)(e,{tags:{origin:"CodemirrorEditor: useEditor/onException",codemirror:!0},extras:n})},noHistory:!0})})}var lR=n(64888),lD=n(87088),lI=n(44794),lB=n(56636),lG=n(86466),lP=n(41974),lA=n(80786),lL=n(41960),lN=n(41026),lO=(0,et.cn)(0),lU=(0,et.cn)(new Map([["normal",[]],["compact",[]]])),lX=(0,et.cn)(null,function(e,t,n){var r=e(lV);t(lU,function(e){return(0,lP.Uy)(e,function(e){var t=e.get(r);if(!t)throw Error("Expect width for: "+r);t[n.index]=n.width})})}),lM=(0,et.cn)(null,function(e,t,n){t(lU,function(e){return(0,lP.Uy)(e,function(e){var t=!0,r=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0)(0,S._)(o.value,2)[1].slice(0,n)}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}})})}),lF=(0,et.cn)(function(e){var t=new Map([["normal",0],["compact",0]]),n=!0,r=!1,i=void 0;try{for(var o,a=e(lU)[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=(0,S._)(o.value,2),c=l[0],s=l[1],u=0,d=!0,f=!1,h=void 0;try{for(var p,m=s[Symbol.iterator]();!(d=(p=m.next()).done);d=!0){var v=p.value;void 0!==v&&(u+=v)}}catch(e){f=!0,h=e}finally{try{d||null==m.return||m.return()}finally{if(f)throw h}}t.set(c,u)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return t}),lW=(0,et.cn)(function(e){if("normal"===e(lV))return null;var t=e(lU).get("compact");if(!t)return null;var n=e(lO)-24,r=0,i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;if(void 0!==s){if((n-=s)>0){r++;continue}return r}}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return null}),lV=(0,et.cn)(function(e){var t,n=e(lO);return(null!==(t=e(lF).get("normal"))&&void 0!==t?t:0)>n?"compact":"normal"}),lH=(0,em.X)({item:[eu.l0.viewStyle,lG.gU.listItem,eu.l0.p(6),eu.l0.rowWithGap(4),eu.l0.align.center,{fontSize:eu.TV.fontSizeSmall}]});function lz(e){var t=(0,S._)((0,en.useState)(null),2),n=t[0],r=t[1],i=null!==n&&(null===(s=e.items[n])||void 0===s?void 0:s.popover);if(i)return(0,E.tZ)(E.HY,{children:i});var o=[],a=!0,l=!1,c=void 0;try{for(var s,u,d=e.items[Symbol.iterator]();!(a=(u=d.next()).done);a=!0){var f=u.value;f.onClick||f.popover||o.push(f.key)}}catch(e){l=!0,c=e}finally{try{a||null==d.return||d.return()}finally{if(l)throw c}}return(0,E.tZ)(lR.v2,{disabledKeys:o,onAction:function(t){var n=!0,i=!1,o=void 0;try{for(var a,l=e.items[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=a.value;if(c.key===t){if(c.onClick){c.onClick();break}c.popover&&r(e.items.indexOf(c));break}}}catch(e){i=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}},children:e.items.map(function(e){return(0,E.tZ)(lR.sN,{id:e.key,css:lH.item,children:(0,E.tZ)(lj.Provider,{value:function(){},children:(0,en.cloneElement)(e.item,{presentation:"overflowMenu"})})},e.key)})})}var lj=(0,en.createContext)(function(e){});function lq(){return(0,en.useContext)(lj)}var lJ=(0,em.X)({button:[eu.l0.viewStyle,eu.l0.reset.button,eu.l0.rowWithGap(4),eu.l0.center,eu.l0.color.foregroundDimmest,eu.l0.hover([eu.l0.color.foregroundDefault]),eu.l0.height("100%"),{fontSize:12,"&:has(*)":[eu.l0.px(4),lG.gU.nofill,eu.l0.borderRadius(0)]}],tooltip:[eu.l0.backgroundColor.backgroundHighest,eu.l0.borderRadius(4),eu.l0.color.foregroundDimmer,eu.l0.p(4),eu.l0.border({color:eu.TV.outlineDefault}),{fontSize:12}]});function lY(e){var t=(0,oR.Z)(function(t){return e.onWidth(t.width)}),n=(0,S._)((0,en.useState)(null),2),r=n[0],i=n[1];return(0,E.tZ)(el.G,{innerRef:t,children:(0,E.BX)(lD.aJ,{isDisabled:null==r||e.hidden,children:[(0,E.tZ)(lI.z,{isDisabled:e.isDisabled||e.hidden,css:lJ.button,style:e.hidden?{opacity:0,pointerEvents:"none"}:void 0,onPress:function(){var t;return null===(t=e.onClick)||void 0===t?void 0:t.call(e)},children:(0,E.tZ)(lj.Provider,{value:i,children:e.children})}),(0,E.tZ)(lD.u,{placement:"top",offset:8,css:lJ.tooltip,children:r})]})})}var l$=(0,em.X)({root:[eu.l0.flex.row,eu.l0.flex.growAndShrink(1),eu.l0.position.relative,{"& > div:first-of-type > button":{borderBottomLeftRadius:4},"& > div:button:last-of-type > button":{borderBottomRightRadius:4}}],middle:[eu.l0.flex.growAndShrink(1)],moreButton:[{width:24},eu.l0.reset.button,eu.l0.center,lG.gU.nofill,eu.l0.height("100%"),eu.l0.position.absolute,eu.l0.right(0),eu.l0.top(0)],popover:[eu.l0.borderRadius(4),eu.l0.border({color:eu.TV.outlineDefault})]});function lK(e){var t=e.left.filter(Boolean),n=e.right.filter(Boolean),r=(0,S._)((0,en.useState)(function(){return(0,et.MT)()}),1)[0],i=(0,lA.Dv)(lV,{store:r}),o=(0,lA.Dv)(lW,{store:r}),a=(0,lA.b9)(lX,{store:r}),l=(0,lA.b9)(lO,{store:r}),c=(0,oR.Z)(function(e){return l(e.width)}),s=t.length-1,u=(0,_._)(t).concat((0,_._)(n)),d=(0,lA.b9)(lM,{store:r}),f=u.length;return(0,en.useEffect)(function(){d(f)},[d,f]),(0,E.tZ)(E.HY,{children:(0,E.BX)(el.G,{className:e.className,css:l$.root,innerRef:c,children:[u.map(function(e,t){return e.popover?(0,E.BX)(en.Fragment,{children:[(0,E.BX)(lB.hg,{children:[(0,E.tZ)(lY,{onWidth:function(e){return a({index:t,width:e})},hidden:null!==o&&t>=o,isDisabled:!e.popover&&!e.onClick,children:(0,en.cloneElement)(e.item,{presentation:i})}),(0,E.tZ)(lL.Bf,{placement:t<=s?"top left":"top right",children:e.popover})]}),t===s?(0,E.tZ)(el.G,{css:l$.middle}):null]},e.key):(0,E.BX)(en.Fragment,{children:[(0,E.tZ)(lY,{onWidth:function(e){return a({index:t,width:e})},onClick:e.onClick,hidden:null!==o&&t>=o,isDisabled:!e.popover&&!e.onClick,children:(0,en.cloneElement)(e.item,{presentation:i})}),t===s?(0,E.tZ)(el.G,{css:l$.middle}):null]},e.key+t)}),null===o?null:(0,E.BX)(lB.hg,{children:[(0,E.tZ)(lI.z,{css:l$.moreButton,children:(0,E.tZ)(lN.Z,{size:12})}),(0,E.tZ)(lL.Bf,{placement:"top right",children:(0,E.tZ)(lz,{items:u.slice(o)})})]})]})})}var lQ=n(62881),l0=n(31718),l1=n(32652);function l2(e){var t=e.presentation,n=(0,O.Gn)("codeSuggestion").preferences.codeSuggestion,r=lq();return(0,en.useEffect)(function(){r("compact"===t?"AI":null)},[r,t]),(0,E.BX)(E.HY,{children:[(0,E.tZ)(t$.Z,{size:12,color:n?eu.TV.blurpleDefault:void 0}),"compact"===t?null:(0,E.tZ)(el.G,{children:"AI"})]})}var l3=(0,em.X)({root:[eu.l0.p(8),eu.l0.maxWidth(260)],featureHeader:[eu.l0.rowWithGap(8),eu.l0.align.center],featureTitle:[eu.l0.rowWithGap(4),eu.l0.align.center,eu.l0.flex.growAndShrink(1),eu.l0.fontWeight.medium],enableAutocomplete:[eu.l0.rowWithGap(4),eu.l0.align.center],text:[eu.l0.colWithGap(8)],hint:[eu.l0.rowWithGap(4),eu.l0.align.center]});function l4(){var e=(0,en.useId)(),t=(0,O.Gn)("codeSuggestion"),n=t.preferences.codeSuggestion,r=t.update;return(0,E.BX)(el.G,{css:l3.root,children:[(0,E.BX)(el.G,{css:l3.featureHeader,children:[(0,E.BX)(el.G,{css:l3.featureTitle,children:[(0,E.tZ)(lQ.Z,{color:eu.TV.blurpleDefault}),(0,E.tZ)(tY.xv,{children:"AI Autocomplete"})]}),(0,E.BX)(el.G,{css:l3.enableAutocomplete,children:[(0,E.tZ)(el.G,{tag:"label",htmlFor:e,children:(0,E.tZ)(tY.xv,{color:"dimmer",variant:"small",children:"Enable"})}),(0,E.tZ)(l0.X,{id:e,checked:n,onChange:function(){return r({codeSuggestion:!n})}})]})]}),(0,E.BX)(el.G,{css:l3.text,children:[(0,E.tZ)(tY.xv,{color:"dimmer",variant:"small",children:"Suggest lines of code as you type based on existing context."}),(0,E.BX)(el.G,{css:l3.hint,children:[(0,E.tZ)(tY.xv,{color:"dimmer",variant:"small",children:"Press"}),(0,E.tZ)(i1.bM,{small:!0,keyCombo:"Tab"}),(0,E.tZ)(tY.xv,{color:"dimmer",variant:"small",children:"to accept result"})]})]})]})}var l8=n(22961),l6=n(91466),l5=n(76208),l7=n(98008),l9=n(69941),ce=n(25607),ct=n(96214),cn=n(1051);function cr(e){var t=e.filePath,n=e.presentation,r=(0,O.Gn)("codeIntelligence").preferences.codeIntelligence,i=(0,eh.uN)(),o=(0,e2.Z)(t)[0],a=(0,S._)((0,en.useState)(null==o?void 0:o.getServerState()),2),l=a[0],c=a[1],s=(0,S._)((0,en.useState)(null==o?void 0:o.getServerHealth()),2),u=s[0],d=s[1],f=(0,S._)((0,en.useState)(!1),2),h=f[0],p=f[1],m=(0,N.IK)(i,tj.Q$),v=(0,en.useMemo)(function(){var e,n,r,i;return(r=null===(e=l8.$R.from(t))||void 0===e?void 0:e.name)?r:(r=null==m?void 0:null===(n=m.language)||void 0===n?void 0:n.name)&&r.length>0?(i=r).slice(0,1).toUpperCase()+i.slice(1).toLowerCase():(r=(0,er.r6)(t),m)?r:"Plain Text"},[t,m]),g=(0,en.useMemo)(function(){if(!r)return 6;if(null!==o&&u===rd.N.STALLED)return 3;var e=null!=o&&u===rd.N.READY;return h||l===rd.a.INITIALIZING||l===rd.a.INITIALIZED&&!e?0:e?1:l===rd.a.EXITED?2:null!==m?4:5},[o,h,m,u,l,r]);(0,en.useEffect)(function(){if(o)return p(!1),c(o.getServerState()),d(o.getServerHealth()),(0,ry.uf)([o.onServerStateChange(function(e){c(e)}),o.onServerHealthChange(function(e){d(e)})])},[o]);var y=(0,N.IK)(i,e$.i5),b=(0,S._)((0,en.useState)(y?{title:y.name,value:y.id}:void 0),2),w=b[0],Z=b[1],x=(0,en.useRef)(!1);(0,en.useEffect)(function(){x.current||(null==w?void 0:w.value)===(null==y?void 0:y.id)||Z(y?{title:y.name,value:y.id}:void 0)},[w,y]);var C=lq();return(0,en.useEffect)(function(){C("Language support"+("compact"===n?" (".concat(v,")"):""))},[C,n,v]),(0,E.BX)(E.HY,{children:[(0,E.tZ)(cc,{state:g}),"compact"===n?null:(0,E.tZ)(el.G,{children:v})]})}var ci=(0,em.X)({menu:[eu.l0.p(8),eu.l0.colWithGap(8),eu.l0.maxWidth(390),eu.l0.minWidth(390)],file:[eu.l0.pl(4),eu.l0.display.inlineFlex,eu.l0.rowWithGap(4),eu.l0.align.center,{verticalAlign:"top"}],section:[eu.l0.rowWithGap(8),eu.l0.align.center,eu.l0.justify.spaceBetween],header:[eu.l0.colWithGap(2),eu.l0.flex.shrink(1)],selects:[eu.l0.rowWithGap(4)],staticWidth:[eu.l0.flex.grow(0),eu.l0.flex.shrink(1)],variableWidth:[eu.l0.flex.grow(1),eu.l0.flex.shrink(0),{flexBasis:0}],flexEnd:[eu.l0.align.end],red:[eu.l0.color.redDefault],row:[eu.l0.rowWithGap(8),eu.l0.align.center]});function co(e){var t=e.filePath,n=e.openSettings,r=(0,eB.Z)(),i=r.dotReplit,o=r.lspnix,a=(0,e2.Z)(t)[0],l=(0,S._)((0,en.useState)(null==a?void 0:a.getServerState()),2),c=l[0],s=l[1],u=(0,S._)((0,en.useState)(null==a?void 0:a.getServerHealth()),2),d=u[0],f=u[1],h=(0,S._)((0,en.useState)(!1),2),p=h[0],m=h[1];(0,en.useEffect)(function(){if(a)return m(!1),s(a.getServerState()),f(a.getServerHealth()),(0,ry.uf)([a.onServerStateChange(function(e){s(e)}),a.onServerHealthChange(function(e){f(e)})])},[a]);var v=(0,O.Gn)("codeIntelligence").preferences.codeIntelligence,g=(0,en.useCallback)(function(){v&&(o.disable(),o.enable(),m(!0))},[o,v]),y=(0,eh.uN)(),b=(0,N.IK)(y,tj.Q$),w=(0,en.useMemo)(function(){if(!v)return 6;if(null!==a&&d===rd.N.STALLED)return 3;var e=null!=a&&d===rd.N.READY;return p||c===rd.a.INITIALIZING||c===rd.a.INITIALIZED&&!e?0:e?1:c===rd.a.EXITED?2:null!==b?4:5},[a,p,b,d,c,v]),Z=(0,N.IK)(y,e$.i5),x=(0,N.IK)(y,e$.dt),_=(0,S._)((0,en.useState)(Z?{title:Z.name,value:Z.id}:void 0),2),T=_[0],R=_[1],D=(0,en.useRef)(!1),I=(0,en.useMemo)(function(){var e;return null!==(e=null==x?void 0:x.map(function(e){return{title:e.name,value:e.id,icon:void 0}}))&&void 0!==e?e:[]},[x]);return(0,E.BX)(el.G,{css:ci.menu,children:[(0,E.BX)(tY.h4,{level:1,children:["Language support for ",(0,E.BX)("span",{css:ci.file,children:[(0,E.tZ)(M.Z,{path:t,size:16})," ",(0,E.tZ)("span",{children:(0,er.UO)(t)})]})]}),(0,E.tZ)(l6.R,{}),(0,E.tZ)(cl,{client:a,restart:g,state:w,openSettings:n,filePath:t}),x&&T?(0,E.BX)(E.HY,{children:[(0,E.tZ)(l6.R,{}),(0,E.BX)(el.G,{css:ci.section,children:[(0,E.tZ)(el.G,{css:[ci.header,ci.staticWidth],children:(0,E.tZ)(tY.xv,{multiline:!1,children:"Code Formatter"})}),1===x.length?(0,E.tZ)(el.G,{css:[ci.header,ci.variableWidth,ci.flexEnd],children:(0,E.tZ)(tY.xv,{multiline:!1,children:T.title})}):(0,E.tZ)(el.G,{css:ci.selects,children:(0,E.tZ)(ct.P,{placement:"top",items:I,selectedItem:(0,k._)((0,C._)({},T),{icon:D.current?(0,E.tZ)(n8.Z,{size:12}):void 0}),disabled:D.current,onChange:function(e){e.value!==T.value&&(D.current=!0,R(e),(function(e,t){return cs.apply(this,arguments)})(i,{path:t,formatterId:e.value}).finally(function(){return D.current=!1}))}})})]})]}):null]})}function ca(e){var t=(0,E.tZ)("a",{tabIndex:0,role:"button",onClick:e.restart,onKeyDown:function(t){"Enter"===t.key&&e.restart()},children:"Restart"});switch(e.state){case 0:return(0,E.tZ)(tY.xv,{multiline:!1,color:"dimmer",children:"Loading"});case 1:return(0,E.tZ)(tY.xv,{multiline:!1,color:"dimmer",children:"Active"});case 3:return(0,E.BX)(el.G,{css:ci.row,children:[(0,E.tZ)(tY.xv,{css:ci.red,multiline:!1,children:"Stalled"})," ",t]});case 2:return(0,E.BX)(el.G,{css:ci.row,children:[(0,E.tZ)(tY.xv,{css:ci.red,multiline:!1,children:"Stopped"})," ",t]});default:return null}}function cl(e){var t=function(){switch(e.state){case 0:case 1:case 2:case 3:return(0,E.BX)(E.HY,{children:[(0,E.tZ)(el.G,{css:[ci.header,ci.variableWidth],children:(0,E.tZ)(tY.xv,{multiline:!1,children:e.client?e.client.clientName:"Language Server for ".concat(e.filePath)})}),(0,E.tZ)(el.G,{css:[ci.header,ci.staticWidth],children:(0,E.tZ)(ca,{restart:e.restart,state:e.state})})]});case 5:case 4:return(0,E.tZ)(el.G,{css:ci.header,children:(0,E.tZ)(tY.xv,{color:"dimmer",children:"Limited language support because the language server is not available."})});case 6:return(0,E.tZ)(el.G,{css:ci.header,children:(0,E.BX)(tY.xv,{multiline:!0,color:"dimmer",children:["Code intelligence is disabled. Enable it in settings.",(0,E.tZ)("br",{}),(0,E.tZ)("a",{tabIndex:0,role:"button",onClick:e.openSettings,onKeyDown:function(t){"Enter"===t.key&&e.openSettings()},children:"Open settings"})]})});default:return null}}();return t?(0,E.BX)(el.G,{css:ci.section,children:[" ",t," "]}):null}function cc(e){switch(e.state){case 3:case 6:case 4:return(0,E.tZ)(ce.Z,{size:16});case 0:return(0,E.tZ)(n8.Z,{size:16,color:eu.TV.blueStronger});case 1:return(0,E.tZ)(el.G,{dataCy:"ws-code-intelligence-active",children:(0,E.tZ)(l7.Z,{size:16})});case 2:return(0,E.tZ)(l9.Z,{size:16});case 5:return(0,E.tZ)(l5.Z,{size:16})}}function cs(){return(cs=(0,e_._)(function(e,t){var n,r;return(0,eE.Jh)(this,function(i){return(n=".".concat((0,cn.mD)(t.path)),r="rules/formatter/fileExtensions/".concat(n,"/id"),t.formatterId)?[2,e.updateDotReplit([{path:"rules/formatter/fileExtensions",op:"add",value:JSON.stringify((0,tu._)({},"".concat(n),{id:t.formatterId}))}])]:[2,e.updateDotReplit([{path:r,op:"remove"}])]})})).apply(this,arguments)}(u=x||(x={}))[u.Loading=0]="Loading",u[u.Ready=1]="Ready",u[u.Exited=2]="Exited",u[u.Stalled=3]="Stalled",u[u.Partial=4]="Partial",u[u.Missing=5]="Missing",u[u.Disabled=6]="Disabled";var cu=n(22527);function cd(e){var t,n=e.presentation,r=(0,lg.Z)((t=(0,e_._)(function(e){var t,n,r,i;return(0,eE.Jh)(this,function(o){switch(o.label){case 0:return[4,e.getRepositoryState()];case 1:if((t=o.sent()).error)return[2,t];if(n=t.type,r=null,!(n!==lp.y5.INITIALIZING))return[3,3];return[4,e.status()];case 2:if((i=o.sent()).error)return[2,i];r=i,o.label=3;case 3:return[2,{branchName:null==r?void 0:r.branch,error:null}]}})}),function(e){return t.apply(this,arguments)})),i=!r||r.error?null:r.branchName,o=lq();return(0,en.useEffect)(function(){o("compact"===n&&i?i:null)},[o,n,i]),i?(0,E.BX)(E.HY,{children:[(0,E.tZ)(cu.Z,{color:t6.TV.foregroundDimmer,size:12}),"compact"===n?null:(0,E.tZ)(el.G,{children:i})]}):null}var cf=n(65559),ch=n(71480),cp=(0,em.X)({group:[eu.l0.align.center,eu.l0.rowWithGap(4)],row:[eu.l0.align.center,eu.l0.rowWithGap(8)]});function cm(e){var t,n,r,i,o,a,l,c,s=e.filePath,u=e.presentation,d=(n=(t=(0,S._)((0,en.useState)(null),2))[0],r=t[1],i=(0,e2.Z)(s),o=(0,cf.nC)(),a=(0,ee.dr)(),(0,en.useEffect)(function(){var e=function(e){var t,n=o().find(function(e){var t=(0,S._)(e,2);return"problems"===(t[0],t[1]).type});if(n){var r=a(n[0]);r&&"problems"===r.type&&(null===(t=r.updateProblems)||void 0===t||t.call(r,s,e))}},t=function(t){if(t.path===s){var n=[],o=!0,a=!1,l=void 0;try{for(var c,u=i[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var d=c.value;d.isOpen(s)&&n.push.apply(n,(0,_._)(d.getDiagnostics(t.path)))}}catch(e){a=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}r(n),e(n)}},n=[],l=!0,c=!1,u=void 0;try{for(var d,f=i[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var h=d.value;h.isOpen(s)&&n.push.apply(n,(0,_._)(h.getDiagnostics(s)))}}catch(e){c=!0,u=e}finally{try{l||null==f.return||f.return()}finally{if(c)throw u}}r(n),e(n);var p=[],m=!0,v=!1,g=void 0;try{for(var y,b=i[Symbol.iterator]();!(m=(y=b.next()).done);m=!0){var w=y.value;p.push(w.onDiagnostics(function(e){return t(e)}))}}catch(e){v=!0,g=e}finally{try{m||null==b.return||b.return()}finally{if(v)throw g}}return function(){p.forEach(function(e){return e()}),o().some(function(e){var t=(0,S._)(e,2),n=(t[0],t[1]);return"codeEditor"===n.type&&n.data.path===s})||e([])}},[i,s,o,a]),n),f=(0,en.useMemo)(function(){var e;return d?(e=d.reduce(function(e,t){return void 0===t.severity||(e[t.severity]=(e[t.severity]||0)+1),e},{}),d.length>0&&0===Object.keys(e).length&&(e[t7.DiagnosticSeverity.Error]=d.length),e):null},[d]),h=f&&null!==(l=f[t7.DiagnosticSeverity.Error])&&void 0!==l?l:0,p=f&&null!==(c=f[t7.DiagnosticSeverity.Warning])&&void 0!==c?c:0,m=null===f,v=lq();return((0,en.useEffect)(function(){if(m){v(null);return}var e="";0===h&&0===p&&(e="No problems"),h>0&&(e+="".concat((0,nY.Z)("Error",h),": ").concat(h)),p>0&&(e.length>0&&(e+=", "),e+="".concat((0,nY.Z)("Warning",p),": ").concat(p)),v(e)},[v,u,m,p,h]),f)?(0,E.BX)(el.G,{css:cp.row,children:[(0,E.BX)(el.G,{css:cp.group,children:[(0,E.tZ)(ch.Z,{severity:t7.DiagnosticSeverity.Error,size:12}),"compact"===u?null:(0,E.tZ)(tY.xv,{color:"dimmer",variant:"small",multiline:!1,children:String(h)})]}),(0,E.BX)(el.G,{css:cp.group,children:[(0,E.tZ)(ch.Z,{severity:t7.DiagnosticSeverity.Warning,size:12}),"compact"===u?null:(0,E.tZ)(tY.xv,{color:"dimmer",variant:"small",multiline:!1,children:String(p)})]})]}):null}function cv(e){if(e.facet(rO.o))return"";var t=e.selection,n="",r=0;if(t.ranges.length>1){r=t.ranges.reduce(function(e,t){return e+(t.to-t.from)},0);var i=t.ranges.length;n="".concat(i," selections")}else{var o=t.ranges[0],a=e.doc.lineAt(o.head),l=o.head-a.from;r=o.to-o.from,n="Ln ".concat(a.number,", Col ").concat(l+1)}return r>0&&(n+=" (".concat(r," chars)")),n}function cg(e){var t=e.view,n=(0,en.useRef)(null);return(0,en.useEffect)(function(){var e,r=n.current,i=null!==(e=t.plugin(N.pE))&&void 0!==e?e:null;if(r&&i&&!i.destroyed){var o=null,a=t.state;r.textContent=cv(a);var l=i.bind({changed:function(e){return(0,eO.aU)(e,"selection",rO.o)},callback:function(e){a=e.state,null===o&&(o=requestAnimationFrame(function(){o=null,r.textContent=a?cv(a):""}))}});return function(){l(),null!==o&&cancelAnimationFrame(o),r.textContent=""}}},[t]),(0,E.tZ)("span",{ref:n,"data-cy":"current-position"})}var cy=n(70546),cb=n(96034);function cw(e,t,n){var r=[],i=0,o=!0,a=!1,l=void 0;try{for(var c,s=e.iterLines()[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value,d=i;if(i=i+u.length+1,0!==u.length){var f=(0,cb.L)(u,t),h=u.trimStart(),p=d+(u.length-h.length);if(0!==f&&d!==p){var m="";if(n===cy.Q.TABS){var v=Math.floor(f/t),g=f%t;m="	".repeat(v)+" ".repeat(g)}else n===cy.Q.SPACES&&(m=" ".repeat(f));m+h!==u&&r.push({from:d,to:p,insert:m})}}}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return eN.as.of(r,e.length)}var cZ=n(91629),cx=n(22893),cC=n(28065),ck=n(15323),cS=n(10055),c_=n(55649),cE=n(40652),cT=(0,em.X)({surface:[eu.l0.height("100%")],cursorOverlay:{cursor:"pointer"},menu:[eu.l0.p(8),eu.l0.colWithGap(8),eu.l0.maxWidth(410)],file:[eu.l0.pl(4),eu.l0.display.inlineFlex,eu.l0.rowWithGap(4),eu.l0.align.center,{verticalAlign:"top"}],space:[eu.l0.width(2),eu.l0.color.foregroundDimmer,eu.l0.textAlign.center],section:[eu.l0.rowWithGap(8),eu.l0.align.center,eu.l0.justify.spaceBetween],header:[eu.l0.colWithGap(2),eu.l0.flex.shrink(1)],selects:[eu.l0.rowWithGap(4)],sizeInput:{border:"none"},buttonsGroup:[eu.l0.rowWithGap(8),eu.l0.align.center,eu.l0.justify.spaceBetween],saveButtons:[eu.l0.rowWithGap(4)]});function cR(e){var t,n=e.filePath,r=e.openSettings,i=(0,O.Gn)("indentDetection","indentSize").preferences,o=(0,eh.uN)(),a=(0,N.IK)(o,rO.o),l=null!==a&&!!i.indentDetection&&a,c=(0,N.IK)(o,cZ.K_),s=(0,N.IK)(o,cZ.E2),u=(0,N.IK)(o,cZ.vO),d=null!==(t=(0,N.IK)(o,eN.yy.tabSize))&&void 0!==t?t:i.indentSize,f="	"===(0,N.IK)(o,R.c)?cy.Q.TABS:cy.Q.SPACES,h=(0,S._)((0,en.useState)(!1),2),p=h[0],m=h[1],v=(0,S._)((0,en.useState)(f),2),g=v[0],y=v[1],b=(0,S._)((0,en.useState)(d),2),w=b[0],Z=b[1],x=(0,S._)((0,en.useState)(!1),2),C=x[0],k=x[1],T=(0,S._)((0,en.useState)(!1),2),D=T[0],I=T[1],B=(0,S._)((0,en.useState)(!1),2),G=B[0],P=B[1],A=(0,S._)((0,en.useState)(!1),2),L=A[0],U=A[1];(0,en.useEffect)(function(){C||(y(f),Z(d))},[f,d,C]),(0,en.useEffect)(function(){p||(y(f),Z(d),k(!1))},[p,f,d]),(0,en.useEffect)(function(){g===f&&w===d&&k(!1)},[g,w,f,d]),(0,en.useEffect)(function(){if(D||G||L){var e=setTimeout(function(){I(!1),P(!1),U(!1)},1e3);return function(){return clearTimeout(e)}}},[D,G,L]),l&&p&&m(!1);var X=(0,en.useCallback)(function(){if(o){var e=cw(o.state.doc,d,f);o.dispatch({changes:e,effects:cZ.Fm.of(!0)}),P(!0)}},[o,f,d]),F=(0,en.useCallback)(function(){o&&(o.dispatch({effects:cZ.Fm.of(!0)}),o.state.field(cZ.E2)&&o.dispatch({effects:cZ.O4.of({type:void 0,size:void 0})}),U(!0))},[o]),W=(0,en.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(o){var t=void 0,n=[cZ.O4.of({type:g,size:w})];if(e){if(g!==f&&(t=cw(o.state.doc,d,g)),g===cy.Q.SPACES&&w!==d){var r=function(e,t,n,r){if(t===cy.Q.TABS)return eN.as.empty(e.length);var i=" ".repeat(r),o=[],a=0,l=!0,c=!1,s=void 0;try{for(var u,d=e.iterLines()[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value,h=a;if(a=a+f.length+1,0!==f.length){var p=(0,cb.L)(f,n),m=f.trimStart(),v=h+(f.length-m.length);if(0!==p&&h!==v){var g=Math.floor(p/n),y=p%n,b=i.repeat(g)+" ".repeat(y);b+m!==f&&o.push({from:h,to:v,insert:b})}}}}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}return eN.as.of(o,e.length)}(t?t.apply(o.state.doc):o.state.doc,g,d,w);t=t?t.compose(r):r}t&&n.push(cZ.Fm.of(!0))}o.dispatch({changes:t,effects:n}),k(!1),I(!0)}},[o,f,d,g,w]),V=(0,en.useCallback)(function(){m(!1),r()},[r]),H=(0,en.useMemo)(function(){if(s){var e=s.size,t=s.type===cy.Q.SPACES?"spaces":"tabs";return"This file appears to use a unit of ".concat(e," ").concat(t,".")}return u?"Indentation detection hasn't been run on this file yet.":"This file is too small for indentation detection."},[s,u]);return(0,E.BX)(el.G,{css:cT.menu,children:[(0,E.BX)(tY.h4,{level:1,children:["Indentation for",(0,E.BX)("span",{css:cT.file,children:[(0,E.tZ)(M.Z,{path:n,size:16})," ",(0,E.tZ)("span",{children:(0,er.UO)(n)})]})]}),c?(0,E.tZ)(cx.E,{colorway:"warning",icon:(0,E.tZ)(i0.Z,{}),text:"This file type requires that ".concat(c===cy.Q.SPACES?"spaces":"tabs"," be used for indentation.")}):null,(0,E.tZ)(l6.R,{}),(0,E.BX)(el.G,{css:cT.section,children:[(0,E.BX)(el.G,{css:cT.header,children:[(0,E.tZ)(tY.xv,{multiline:!1,children:"Indentation unit"}),(0,E.tZ)(tY.xv,{variant:"small",color:"dimmer",children:"The size and character to use when indenting lines."})]}),(0,E.BX)(el.G,{css:cT.selects,children:[(0,E.tZ)(cE.qm,{css:cT.sizeInput,size:w,onChange:function(e){e!==w&&(Z(e),k(!0))}}),(0,E.tZ)(ct.P,{items:(0,_._)(cE.Ly),selectedItem:cE.Ly.find(function(e){return e.value===(g===cy.Q.SPACES?"spaces":"tabs")}),onChange:function(e){var t=(null==e?void 0:e.value)==="spaces"?cy.Q.SPACES:cy.Q.TABS;t!==g&&(y(t),k(!0))}})]})]}),(0,E.tZ)(l6.R,{}),i.indentDetection?(0,E.BX)(E.HY,{children:[(0,E.BX)(el.G,{css:cT.section,children:[(0,E.BX)(el.G,{css:cT.header,children:[(0,E.tZ)(tY.xv,{multiline:!1,children:"Detected indentation unit"}),(0,E.tZ)(tY.xv,{variant:"small",color:"dimmer",children:H})]}),L?(0,E.tZ)(iH.zx,{colorway:"positive",text:"Detected!",iconLeft:(0,E.tZ)(o7.Z,{}),onClick:F}):(0,E.tZ)(iH.zx,{text:s?"Re-detect":"Detect",iconLeft:(0,E.tZ)(ck.Z,{}),disabled:!u&&!s,onClick:F})]}),(0,E.tZ)(l6.R,{})]}):null,(0,E.BX)(el.G,{css:cT.buttonsGroup,children:[(0,E.tZ)(iH.zx,{text:"Global settings",iconLeft:(0,E.tZ)(cS.Z,{}),onClick:V}),(0,E.tZ)(el.G,{css:cT.saveButtons,children:D||G?(0,E.tZ)(E.HY,{children:D?(0,E.tZ)(iH.zx,{text:"Saved!",colorway:"positive",iconLeft:(0,E.tZ)(o7.Z,{}),onClick:function(){return W(!1)}}):(0,E.tZ)(iH.zx,{text:"Re-indented!",colorway:"positive",iconLeft:(0,E.tZ)(o7.Z,{}),onClick:X})}):(0,E.tZ)(E.HY,{children:C?(0,E.BX)(E.HY,{children:[(0,E.tZ)(iH.zx,{text:"Save and re-indent",colorway:"primary",iconLeft:(0,E.tZ)(c_.Z,{}),onClick:function(){return W(!0)}}),(0,E.tZ)(iH.zx,{text:"Save",iconLeft:(0,E.tZ)(o7.Z,{}),onClick:function(){return W(!1)}})]}):(0,E.tZ)(iH.zx,{text:"Re-indent file",iconLeft:(0,E.tZ)(c_.Z,{}),onClick:X})})})]})]})}function cD(e){var t,n=e.presentation,r=(0,O.Gn)("indentDetection","indentSize").preferences,i=(0,eh.uN)(),o=(0,N.IK)(i,rO.o),a=null!==o&&!!r.indentDetection&&o,l=null!==(t=(0,N.IK)(i,eN.yy.tabSize))&&void 0!==t?t:r.indentSize,c="	"===(0,N.IK)(i,R.c)?cy.Q.TABS:cy.Q.SPACES,s=lq();return(0,en.useEffect)(function(){s("File Indentation")},[s]),(0,E.BX)(E.HY,{children:[(0,E.tZ)(cB,{type:c,loading:a}),"compact"===n?null:(0,E.tZ)(cG,{type:c,size:l,loading:a})]})}function cI(e){var t=e.size,n=void 0===t?16:t,r=(0,no._)(e,["size"]);return(0,E.tZ)(cC.ZP,(0,k._)((0,C._)({size:n},r),{children:(0,E.tZ)("circle",{cx:n,cy:n,r:n/2,fillRule:"evenodd"})}))}function cB(e){var t=e.type;return e.loading?(0,E.tZ)(n8.Z,{size:12}):t===cy.Q.SPACES?(0,E.tZ)(cI,{color:eu.TV.foregroundDimmer,size:12}):(0,E.tZ)(c_.Z,{color:eu.TV.foregroundDimmer,size:12})}function cG(e){var t=e.type,n=e.size;if(e.loading)return(0,E.tZ)(tY.xv,{variant:"small",color:"dimmest",children:"Detecting..."});var r=t===cy.Q.SPACES?"Spaces":"Tabs";return(0,E.BX)(tY.xv,{variant:"small",color:"dimmer",children:[r,": ",n]})}function cP(e){var t=e.presentation,n=lq();return(0,en.useEffect)(function(){n("compact"===t?"History":null)},[n,t]),(0,E.BX)(E.HY,{children:["compact"===t?null:(0,E.tZ)(el.G,{children:"History"}),(0,E.tZ)(q.Z,{size:12})]})}var cA=n(80856),cL=(0,em.X)({text:[{textTransform:"capitalize"}]});function cN(e){var t=e.presentation,r=(0,S._)((0,en.useState)(null),2),i=r[0],o=r[1],a=(0,en.useRef)(null),l=(0,en.useRef)(null),c=lq(),s=(0,eh.uN)(),u=(0,O.Gn)("keyboardHandler").preferences,d=(null==u?void 0:u.keyboardHandler)==="vim",f=(0,en.useCallback)(function(e){var n=null!=e?e:"";if(s&&i&&void 0===e){var r,o,u=i.getCM(s);n=null!==(o=null==u?void 0:null===(r=u.state.vim)||void 0===r?void 0:r.mode)&&void 0!==o?o:"normal"}c("compact"===t?n:null),l.current=n,a.current&&a.current.innerText!==n&&(a.current.innerText=n||"")},[s,i,c,t]);return(0,en.useEffect)(function(){d&&!i&&n.e(9316).then(n.bind(n,4302)).then(function(e){o(e),f()})},[d,i,f]),(0,en.useEffect)(function(){if(s&&d&&i){var e,t=a.current,n=null!==(e=s.plugin(N.pE))&&void 0!==e?e:null;if(t&&n&&!n.destroyed)return n.bind({changed:function(){var e,t,n=i.getCM(s),r=null!==(t=null==n?void 0:null===(e=n.state.vim)||void 0===e?void 0:e.mode)&&void 0!==t?t:"";return l.current!==r},callback:function(){f()}})}},[s,d,i,f]),d?(0,E.BX)(E.HY,{children:[(0,E.tZ)(cA.Z,{size:12}),"compact"===t?null:(0,E.tZ)("span",{css:cL.text,ref:a})]}):null}var cO=n(63740);function cU(e){var t=e.presentation,n=e.toggled?"Diffing":"Diff",r=lq();return(0,en.useEffect)(function(){r("compact"===t?n:null)},[r,t,n]),(0,E.BX)(E.HY,{children:[(0,E.tZ)(cO.Z,{color:t6.TV.foregroundDimmer,size:12}),"compact"===t?null:(0,E.tZ)(el.G,{children:n})]})}var cX=(0,em.X)({root:[{borderTop:"1px solid ".concat(eu.TV.backgroundHigher)},{height:"29px",contain:"strict"}]}),cM=(0,en.memo)(function(e){var t,n,r,i,o,a,l,c,s,u,d,h,p,m,v,g,y,b,w,Z,x,C,k,S=e.filePath,_=e.performPaneOperation,T=(0,en.useCallback)(function(e){return _({operation:"open",pane:e,secondary:!0})},[_]),R=(0,en.useCallback)(function(){return T({type:"preferences"})},[T]),D=(t=(0,l1.ZP)(),(0,l1.G_)(t)?{item:(0,E.tZ)(l2,{}),popover:(0,E.tZ)(l4,{}),key:"ai"}:null),I=(r=(n={filePath:S,openSettings:R}).filePath,i=n.openSettings,{item:(0,E.tZ)(cr,{filePath:r,openSettings:i}),popover:(0,E.tZ)(co,{openSettings:i,filePath:r}),key:"codeIntelligence"}),B=(o=(0,tU.P5)({controlName:"flag-lsp-diagnostics-in-footer",logFlagToAnalytics:!1}),a=(0,eh.uN)(),o?{item:(0,E.tZ)(cm,{filePath:S}),onClick:a?function(){return(0,tF.C)(a)}:void 0,key:"lspDiagnostics"}:null),G=(0,tU.P5)({controlName:"flag-status-bar-branch",logFlagToAnalytics:!1})?{item:(0,E.tZ)(cd,{}),onClick:function(){return T({type:"git"})},key:"currentBranch"}:null,P=(l=(0,tU.P5)({controlName:"flag-editor-git-inline-diff",logFlagToAnalytics:!1}),p=(c=(0,eh.uN)(),s=(0,N.IK)(c,tN),u=!c||!s||null===s.head,d=(null==s?void 0:s.mode)===f.INLINE_DIFF,h={toggle:(0,en.useCallback)(function(){if(!c)return null;c.dispatch({effects:tL.of(d?f.GUTTER_DIFF:f.INLINE_DIFF)})},[c,d]),toggled:d,disabled:u}).toggle,m=h.toggled,v=h.disabled,l&&!v?{item:(0,E.tZ)(cU,{toggled:m}),onClick:p,key:"toggleDiff"}:null),A={item:(0,E.tZ)(cN,{}),key:"vimMode"},L=(g=(0,eh.uN)())?{item:(0,E.tZ)(cg,{view:g}),onClick:function(){return(0,oE.zo)(g)},key:"currentPosition"}:null,O=(b=(y={filePath:S,performPaneOperation:_}).filePath,w=y.performPaneOperation,Z=(0,en.useCallback)(function(){w({operation:"replace",pane:{type:"history",data:{path:b}}})},[w,b]),{item:(0,E.tZ)(cP,{}),key:"history",onClick:Z}),U=(C=(x={filePath:S,openSettings:R}).filePath,k=x.openSettings,{item:(0,E.tZ)(cD,{}),popover:(0,E.tZ)(cR,{filePath:C,openSettings:k}),key:"indentation"});return(0,E.tZ)(lK,{css:cX.root,left:[D,I,B,G,P,A],right:[L,U,O]})}),cF=(0,em.X)({root:[eu.l0.position.relative,eu.l0.flex.column,eu.l0.overflowY("hidden"),eu.l0.width("100%"),eu.l0.height("100%")]});function cW(e){var t=(0,eC.Do)(ex.Q.id,ex.y.Editor),n=(0,ea.Z)(),r=(0,ek.y)(),i=r.isAiCalloutVisible,o=r.handleDismiss;return(0,E.BX)("div",{ref:t,css:cF.root,children:[i?(0,E.tZ)(ek.Z,{filePath:e.filePath,onDismiss:o,performPaneOperation:e.performPaneOperation}):null,(0,E.tZ)(eS.$,{performPaneOperation:e.performPaneOperation,path:e.filePath}),(0,E.tZ)("div",{css:lf.ev,children:(0,E.tZ)(lT,{filePath:e.filePath,autoFocus:e.autoFocus,hideMobileKeyboardToolbar:e.hideMobileKeyboardToolbar,isHidden:e.isHidden,deeplink:e.deeplink,onDeeplinkUpdated:e.onDeeplinkUpdated,performPaneOperation:e.performPaneOperation})}),(0,E.tZ)("div",{style:{display:n?"none":"block"},children:(0,E.tZ)(cM,{filePath:e.filePath,performPaneOperation:e.performPaneOperation})}),e.hideMobileKeyboardToolbar?null:(0,E.tZ)(eZ,{filePath:e.filePath,isLoading:!1})]})}var cV=n(6843),cH=n(99319),cz=(0,em.X)({root:[eu.l0.coverContainer,eu.l0.center,eu.l0.p(16)]});function cj(e){var t=e.message;return(0,E.tZ)(el.G,{css:cz.root,children:(0,E.tZ)(el.G,{children:(0,E.tZ)(cx.E,{icon:(0,E.tZ)(i0.Z,{}),colorway:"orange",text:t})})})}var cq=n(49719),cJ=I.Dy.Object({type:I.Dy.Literal("codeEditor"),data:I.Dy.Object({path:I.Dy.Union([I.Dy.String({minLength:1}),I.Dy.Null()]),line:I.Dy.Optional(I.Dy.Number()),col:I.Dy.Optional(I.Dy.Number())})}),cY={Content:function(e){var t=e.pane,n=e.options;return(0,E.tZ)(cK,(0,k._)((0,C._)({},t.data),{isActive:n.isActive,isHidden:n.isHidden,performPaneOperation:n.performPaneOperation}))},Icon:function(e){var t=e.pane,n=e.size;return(0,E.tZ)(M.Z,{path:t.data.path||"",size:n})},getTitle:function(e){return e.data.path?(0,er.UO)(e.data.path):"No file open"},category:T.hc.WorkspaceFeatures,decode:function(e){return B.B4.Decode(cJ,e)}};function c$(e){var t,n,r,i,o,a,l,c,s=e.path,u=e.performPaneOperation,d=(0,eh.uN)(),f=(0,U.Z)(function(){return d?{match:cV.pl,data:{type:"action",label:"Toggle all folds",icon:(0,E.tZ)(V.Z,{}),run:function(){0===(0,R.q2)(d.state).size?(0,R.g_)(d):(0,R.jZ)(d)}}}:null},[d]),h=(0,N.IK)(d,G.W);(0,en.useEffect)(function(){h&&u({operation:"commit"})},[h,u]);var p=(0,cH.Mp)({path:s,performPaneOperation:u}),m=(t=(0,eh.uN)(),n=(0,N.IK)(t,P.SD),(0,U.Z)(function(){if(t&&n)return{match:cV.pl,data:{label:"Format "+(0,er.UO)(s),icon:(0,E.tZ)(j.Z,{}),type:"action",run:function(){(0,P.z1)(t)}}}},[n,s,t])),v=(r=(0,X.T3)(),o=(i=(0,O.Gn)("minimapDisplay")).preferences.minimapDisplay,a=i.update,(0,U.Z)(function(){return r?null:{match:cV.pl,data:{label:"Minimap",icon:(0,E.tZ)(W.Z,{}),type:"context"},commands:function(e){var t=e.active,n=e.searchQuery;return t||n?[{value:"none",label:"Hide",icon:(0,E.tZ)(z.Z,{})},{value:"characters",label:"Characters",icon:(0,E.tZ)(J.Z,{})},{value:"blocks",label:"Blocks",icon:(0,E.tZ)(Y.Z,{})}].filter(function(e){return e.value!==o}).map(function(e){return{match:cV.pl,data:{type:"action",label:e.label,icon:e.icon,run:function(){a({minimapDisplay:e.value})}}}}):[]}}},[a,o,r])),g=(l=function(){return u({operation:"replace",pane:{type:"history",data:{path:s}}})},(0,U.Z)(function(){return{match:cV.pl,data:{label:"History",icon:(0,E.tZ)(q.Z,{}),type:"action",run:function(){l()}}}},[l])),y=(0,U.Z)(function(){var e=void 0;if((0,er.gK)(s)&&(e={type:"markdown",data:{path:s}}),(0,er.B4)(s)&&(e={type:"media",data:{path:s}}),e)return{match:cV.pl,data:{label:"Preview",icon:(0,E.tZ)(H.Z,{}),type:"action",run:function(){e&&u({operation:"replace",pane:e})}}}},[s,u]),b=(c=(0,cf.p9)(),{match:cV.pl,data:{label:"Reveal in file tree",icon:(0,E.tZ)(F.Z,{}),type:"action",run:function(){c(s)}}});return(0,ee.L5)(function(){if(d){var e=[];return m&&e.push(m),y&&e.push(y),e.push(g),v&&e.push(v),f&&e.push(f),e.push(b),p&&e.push.apply(e,(0,_._)(p)),{type:"codeEditor",commands:e,getEditorView:function(){return d},getCurrentSelectionText:function(){if(!d.state.selection.main.empty)return d.state.sliceDoc(d.state.selection.main.from,d.state.selection.main.to)},insertGhostwriterChatCode:function(e,t){(0,A.el)({view:d,insert:e,overwrite:t})},revertGhostwriterChatCode:function(){(0,A.iG)(d)},fetchProblems:function(){return(0,D.j)(d),(0,L.ge)(d.state)}}}},[d,m,y,g,v,f,b,p]),(0,ee.Wk)(function(){return d},[d]),null}function cK(e){var t,n,r,i,o,a,l,c,s=e.path,u=e.line,d=e.col,f=e.isActive,h=e.isHidden,p=e.performPaneOperation,m=(0,S._)((0,en.useState)(!h),2),v=m[0],g=m[1];v||h||g(!0);var y=(0,S._)((0,en.useState)(function(){return(0,et.MT)()}),1)[0],b=(0,S._)((0,en.useState)(function(){return(0,et.MT)()}),1)[0],w=(0,$.useRouter)(),Z=!(K().query.embed||K().query.lite)&&!(0,X.Gv)(w)&&f,x=(n=(t={path:s,replaceEditorPath:(0,en.useCallback)(function(e){p({operation:"replace",pane:{type:"codeEditor",data:{path:e}}})},[p]),getFileRenameInProgress:(0,Q.p8)()}).path,r=t.replaceEditorPath,i=t.getFileRenameInProgress,o=(0,eB.Z)().fs,l=(a=(0,S._)((0,en.useState)(null),2))[0],c=a[1],(0,en.useEffect)(function(){if(n){if(n.startsWith("/"))return c('Cannot open "'.concat(n,'"')),function(){c(null)};var e=o.watchPathStat(n,{onNewStat:function(e){var t=i();if(!e.exists){if((null==t?void 0:t.from)===n){r(t.to);return}c('No file found at "'.concat(n,'", it may have been deleted'));return}if(e.type===iB.Tv.Directory){c('"'.concat(n,'" is a directory'));return}c(null)},onError:function(){c('Unknown error occured while read "'.concat(n,'", try re-opening the editor'))}});return function(){e(),c(null)}}},[i,o,n,r]),l),C=(0,U.Z)(function(){return{line:u,col:d}},[u,d]),k=(0,U.Z)(function(){return function(){p({operation:"replace",pane:{type:"codeEditor",data:{path:s}}})}},[p,s]);return s?x?(0,E.tZ)(cj,{message:x}):h&&!v?null:(0,E.tZ)(eh.Cl.Provider,{value:y,children:(0,E.BX)(cq.ox.Provider,{value:b,children:[(0,E.tZ)(cW,{filePath:s,autoFocus:Z,isHidden:null!=h&&h,deeplink:C,onDeeplinkUpdated:k,hideMobileKeyboardToolbar:!0,performPaneOperation:p},s),(0,E.tZ)(c$,{path:s,isActive:f,performPaneOperation:p})]})}):null}},25138:function(e,t,n){n.d(t,{J:function(){return a}});var r=n(74044),i=n(99149),o=r.Dy.Object({type:r.Dy.Literal("commands"),data:r.Dy.Object({autoFocus:r.Dy.Boolean()})}),a=function(e){return i.B4.Decode(o,e)}},70823:function(e,t,n){n.d(t,{J:function(){return a}});var r=n(74044),i=n(99149),o=r.Dy.Object({type:r.Dy.Literal("config"),flow:r.Dy.Union([r.Dy.Literal("githubImport"),r.Dy.Literal("incompleteConfig")])}),a=function(e){return i.B4.Decode(o,e)}},88433:function(e,t,n){n.d(t,{R:function(){return ue}});var r,i,o,a,l,c,s,u,d,f,h,p,m,v=n(66626),g=n(3796),y=n(12394),b=n(75271),w=n(27598),Z=n(54821),x=n(27387),C=n(63257),k=n(96583),S=n(42516),_=n(54455),E=n(22893),T=n(24766),R=n(93245),D=n(36809),I=n(54300),B=n(63163),G=n(41733),P=n(30509),A=n(98924),L=n(62279),N=n(1048),O=B.nC.min(600),U=(0,D.X)({maxWidth:{width:"100%",maxWidth:600,alignSelf:"center"},hiddenOnMobile:[B.l0.display.none,(0,S._)({},O,B.l0.display.flex)],hiddenOnDesktop:[B.l0.display.flex,(0,S._)({},O,B.l0.display.none)]});function X(e){var t=e.children,n=e.render,r=e.timeout,i=void 0===r?300:r,o=e.initialHeight,a=(0,b.useRef)(null),l=(0,b.useRef)(null),c=M(l),s=c>0?c:o,u={transition:i+"ms ease-out",transitionProperty:"height, opacity",opacity:0,height:0,visibility:"hidden"},d={entering:{opacity:1,height:s},entered:{transitionProperty:"opacity",opacity:1,height:s,visibility:"visible"},exiting:{opacity:0,height:0,visibility:"visible"},exited:{opacity:0,height:0,visibility:"hidden"}};return(0,g.tZ)(N.ZP,{nodeRef:a,timeout:i,in:n,children:function(e){return(0,g.tZ)(R.G,{innerRef:a,style:(0,G._)({},u,d[e]),children:(0,g.tZ)(R.G,{innerRef:l,children:t})})}})}function M(e){var t=(0,v._)((0,b.useState)(0),2),n=t[0],r=t[1];return(0,b.useEffect)(function(){if(e.current){var t=new ResizeObserver(function(e){var t=!0,n=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var l=o.value.borderBoxSize[0].blockSize;r(l)}}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}});return t.observe(e.current),function(){return t.disconnect()}}},[n,e]),n}var F=[B.l0.width("100%"),B.l0.p(8)],W=[B.l0.py(32),B.l0.minHeight("100%"),B.l0.center],V=function(e){var t=e.children,n=e.centered,r=e.maxWidth,i=(0,A._)(e,["children","centered","maxWidth"]),o=[F,n&&W,r&&U.maxWidth].filter(Boolean);return(0,g.tZ)(R.G,(0,P._)((0,G._)({},i),{css:o,children:t}))},H=n(9602),z=n(48155),j=n(10578),q=[B.l0.p(8),B.l0.center],J=function(){return(0,g.tZ)(R.G,{css:q,children:(0,g.tZ)(j.Z,{size:24})})},Y=(0,D.X)({error:[B.l0.flex.grow(0),B.l0.mt(0)]}),$=function(e){var t=e.text,n=(0,A._)(e,["text"]);return(0,g.tZ)(V,(0,P._)((0,G._)({css:Y.error},n),{children:(0,g.tZ)(E.E,{colorway:"warning",icon:(0,g.tZ)(I.Z,{}),text:t})}))},K=(0,D.X)({back:[B.l0.flex.row,B.l0.align.center]}),Q=function(e){var t=e.onBack;return(0,g.tZ)(R.G,{css:K.back,children:(0,g.tZ)(H.hU,{alt:"Back",tooltipBehavior:"hidden",onClick:t,children:(0,g.tZ)(z.Z,{})})})},ee=n(96949),et=function(e){var t=e.context;(0,ee.j)(ee.U3.DEPLOYMENT_SECTION_VIEWED,{context:t})},en=function(e,t){(0,ee.j)(ee.U3.DEPLOYMENT_DEBUG_SUMMARY_USED,{action:e,context:t})},er=n(8278),ei=n(21262),eo=n(71440),ea=n(9122),el=n(82303);function ec(){var e=(0,ei._)(["\n  query ScheduledJobListExecution($deploymentId: String!) {\n    scheduledJobListExecutions(input: { deploymentId: $deploymentId }) {\n      __typename\n      ... on ScheduledJobListExecutionsResults {\n        results {\n          id\n          startedAt\n          endedAt\n          status\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return ec=function(){return e},e}function es(){var e=(0,ei._)(["\n  mutation CancelScheduledJobExecution(\n    $deploymentId: String!\n    $executionId: String!\n  ) {\n    cancelScheduledJobExecution(\n      input: { deploymentId: $deploymentId, executionId: $executionId }\n    ) {\n      __typename\n      ... on CancelScheduledJobExecutionResult {\n        execution {\n          id\n          startedAt\n          endedAt\n          status\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n"]);return es=function(){return e},e}var eu={},ed=(0,eo.Ps)(ec()),ef=(0,eo.Ps)(es()),eh=n(85983),ep=n(15323),em=n(2447),ev=n(16936),eg=n(42965),ey=n(84e3),eb=n(20260),ew=n(25722),eZ=n(58474);function ex(){var e=(0,ei._)(["\n  fragment ReplLogLine2 on ReplLog {\n    __typename\n    timestamp\n    line\n    level\n    isFromReplit\n    deploymentId\n    executionId\n    buildId\n  }\n"]);return ex=function(){return e},e}function eC(){var e=(0,ei._)(["\n  query HostingDeploymentLogs2(\n    $replId: String!\n    $deploymentId: String!\n    $executionId: String\n    $start: DateTime\n    $end: DateTime\n    $message: String\n    $level: LogLevel\n    $limit: Int\n  ) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        __typename\n        hostingDeploymentLogs(\n          deploymentId: $deploymentId\n          executionId: $executionId\n          start: $start\n          end: $end\n          message: $message\n          level: $level\n          limit: $limit\n        ) {\n          ... on ReplLogs {\n            result {\n              ...ReplLogLine2\n            }\n          }\n          ... on NotFoundError {\n            message\n          }\n          ... on ServiceUnavailable {\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return eC=function(){return e},e}function ek(){var e=(0,ei._)(["\n  subscription HostingDeploymentLogUpdates(\n    $input: HostingDeploymentLogUpdatesInput!\n  ) {\n    hostingDeploymentLogUpdates(input: $input) {\n      ...ReplLogLine2\n    }\n  }\n  ","\n"]);return ek=function(){return e},e}var eS={},e_=(0,eo.Ps)(ex()),eE=(0,eo.Ps)(eC(),e_),eT=(0,eo.Ps)(ek(),e_),eR=n(41974),eD=n(37862),eI=n(50157),eB=n(27001),eG=(0,b.createContext)(null),eP=function(){var e=(0,b.useContext)(eG);if(!e)throw Error("Expected log context in context");return e},eA=function(e){var t,n,r,i,o=e.deploymentId,a=e.replId,l=e.executionId,c=e.openFile,s=(0,v._)((0,b.useState)(null),2),u=s[0],d=s[1],f=(0,v._)((0,b.useState)([]),2),h=f[0],p=f[1],m=(0,v._)((0,b.useState)(),2),g=m[0],y=m[1],w=(0,v._)((0,b.useState)({message:"",executionId:l,start:null,end:null,level:null}),2),Z=w[0],S=w[1],_=(0,b.useCallback)(function(){return S({message:"",executionId:l,start:null,end:null,level:null})},[l]),E=(0,v._)((0,b.useState)(!0),2),T=E[0],R=E[1],D=(0,v._)((0,b.useState)(!1),2),I=D[0],B=D[1],A=(0,v._)((0,b.useState)(!1),2),L=A[0],N=A[1],O=(0,v._)((0,b.useState)(!1),2),U=O[0],X=O[1],M=(0,v._)((0,eB.Z)("deployments-logs-color",!0),2),F=M[0],W=M[1],V=(0,b.useRef)(!1),H=(0,eD.Z)(function(e){var t=e.width;if(void 0!==t){var n=t>500;N(n),V.current||(V.current=!0,B(n))}}),z=(0,eI.iT)(),j=(t={ssr:!1,fetchPolicy:"network-only",variables:{deploymentId:o,replId:a,executionId:Z.executionId?"d-scheduled-".concat(o,"-").concat(Z.executionId):void 0,limit:100,level:Z.level,message:Z.message,start:null===(r=Z.start)||void 0===r?void 0:r.toDate(z).toISOString(),end:null===(i=Z.end)||void 0===i?void 0:i.toDate(z).toISOString()},onError:function(){y("Something went wrong"),p([])},onCompleted:function(e){if("hostingDeploymentLogs"in e.repl){if("ReplLogs"===e.repl.hostingDeploymentLogs.__typename){y(void 0);var t=e.repl.hostingDeploymentLogs.result,n=(0,C._)(t).reverse();if(!u){if(t.length>0){var r=new Date(t[0].timestamp);r.setSeconds(r.getSeconds()+1),d(r.toISOString())}else d(new Date().toISOString())}p(n)}else y(e.repl.hostingDeploymentLogs.message),p([])}}},n=(0,G._)({},eS,t),ea.a(eE,n)),q=j.loading,J=j.fetchMore,Y=j.subscribeToMore,$=j.variables;(0,b.useEffect)(function(){q&&d(null)},[q]),(0,b.useEffect)(function(){d(null)},[Z,o,a,l]),(0,b.useEffect)(function(){if(u)return Y({document:eT,variables:{input:(0,P._)((0,G._)({deploymentId:o,executionId:l},Z),{start:Z.end?Z.start:u,level:Z.level||void 0})},updateQuery:function(e,t){var n=t.subscriptionData;return(0,eR.Uy)(e,function(e){if(!("hostingDeploymentLogs"in e.repl))return e;if("ReplLogs"===e.repl.hostingDeploymentLogs.__typename){var t=n.data.hostingDeploymentLogUpdates;e.repl.hostingDeploymentLogs.result.unshift(t)}return e})}})},[Y,o,l,q,Z,u]);var K=(0,b.useRef)(null),Q=(0,b.useRef)(!1),ee=(0,b.useRef)(!1),et=(0,b.useCallback)((0,x._)(function(){var e,t,n,r;return(0,k.Jh)(this,function(i){switch(i.label){case 0:if(e=K.current?Math.abs(K.current.getTime()-Date.now()):0,q||K.current&&e<500||ee.current||Q.current)return[2];return(t=new Date(h[0].timestamp)).setSeconds(t.getSeconds()-1),Q.current=!0,[4,J({variables:(0,P._)((0,G._)({},$),{end:t.toISOString()})})];case 1:return n=i.sent().data,Q.current=!1,"hostingDeploymentLogs"in n.repl&&"ReplLogs"===n.repl.hostingDeploymentLogs.__typename&&(K.current=new Date,0===n.repl.hostingDeploymentLogs.result.length?ee.current=!0:(r=(0,C._)(n.repl.hostingDeploymentLogs.result).reverse(),p(function(e){return(0,C._)(r).concat((0,C._)(e))}))),[2]}})}),[J,q,h,$]);return(0,b.useMemo)(function(){return{logs:h,loading:q,error:g,fetchPage:et,isLive:T,setIsLive:R,isExpanded:I,setIsExpanded:B,filter:Z,setFilter:S,clearFilter:_,deploymentId:o,containerRef:H,isWide:L,isWrapped:U,setIsWrapped:X,openFile:c,isColorful:F,setIsColorful:W}},[_,H,o,g,et,Z,F,I,T,L,U,q,h,c,W])},eL=n(23522),eN=n(86466),eO=n(70196),eU=(0,D.X)({root:[B.l0.transition.none,B.l0.reset.button,B.l0.flex.row,B.l0.align.center,B.l0.font.code,B.l0.fontSize(12),B.l0.textAlign.left,B.l0.position.absolute,B.l0.top(0),B.l0.left(0),B.l0.width("100%"),B.l0.color.foregroundDefault,B.l0.border({color:B.TV.outlineDimmest,direction:"bottom"}),B.l0.highRes({borderWidth:.5}),{outline:"none",userSelect:"auto","--cell-background":"".concat(B.TV.backgroundDefault),"&:hover":{backgroundColor:eN.vb.interactiveBackground,"--cell-background":"".concat(eN.vb.interactiveBackground),".copy":{display:"block"}},'&[data-error="true"]':[B.l0.colorMixBg(B.TV.accentNegativeDimmest,"transparent"),{borderBottomColor:B.TV.accentNegativeDimmest,boxShadow:"0 -1px 0 0 "+B.TV.accentNegativeDimmest,"&:hover":{"--cell-background":"".concat(B.TV.accentNegativeDimmest),backgroundColor:"var(--cell-background) !important"},"&:active":{boxShadow:"0 -1px 0 0 "+B.TV.accentPrimaryDefault}},B.l0.highRes({boxShadow:"0 -0.5px 0 0 "+B.TV.accentNegativeDimmest,"&:active":{boxShadow:"0 -0.5px 0 0 "+B.TV.accentPrimaryDefault}})]}],primaryCell:[B.l0.display.block,B.l0.pl(6),B.l0.py(6),B.l0.pr(4),B.l0.flex.growAndShrink(1),B.l0.minHeight(26),{whiteSpace:"nowrap",'&[data-wrapped="true"]':{whiteSpace:"normal"},'&[data-new-flag="false"]':{cursor:"pointer",overflow:"hidden",textOverflow:"ellipsis",'&[data-wrapped="true"]':{whiteSpace:"normal"}},a:{color:"inherit","&:hover":{textDecoration:"underline"}}}],secondaryCell:[B.l0.p(6),B.l0.color.foregroundDimmest,B.l0.truncate,{'&[data-error="true"]':B.l0.color.accentNegativeStrongest}],copyColumn:[{display:"none",position:"absolute",top:"50%",zIndex:1,left:"calc(var(--width) + var(--scroll-left-offset))",transform:"translate(-100%, -50%)"}],copyButton:[{backgroundColor:"var(--cell-background) !important",color:"inherit"}]}),eX=(0,b.memo)(function(e){var t=e.log,n=e.y,r=e.height,i=e.resizeRef,o=e.index,a=e.isScrolling,l=e.columns,c=eP(),s=c.isWrapped,u=c.isColorful&&t.level===eh.in.Error&&["INFO","DEBUG","TRACE"].every(function(e){return!t.line.includes(e)}),d=(0,b.useMemo)(function(){return(0,eO.Z)(t.line)},[t.line]);return(0,g.BX)("div",{tabIndex:0,role:"button",title:d,css:eU.root,style:{height:r,transform:"translateY(".concat(n,"px)")},"data-error":u,children:[l.map(function(e,n){var r=n===l.length-1,a=e.renderCell(t);return(0,g.tZ)(R.G,{css:r?eU.primaryCell:eU.secondaryCell,style:{width:e.width},innerRef:r?i:void 0,"data-index":o,"data-error":u,"data-wrapped":s,children:a},e.key)}),(0,g.tZ)("span",{css:eU.copyColumn,className:"copy",children:!a&&(0,g.tZ)(eL.m,{textToCopy:d,tooltipDisable:!0,css:eU.copyButton})})]})}),eM=n(63123),eF=n(72748),eW=n(37633),eV=n(73966),eH=n.n(eV),ez=n(50900),ej=new(n(69244)).cF,eq=function(e){var t=e.log,n=e.files,r=eP().openFile,i=t.line;i=t.level===eh.in.Error?(0,eO.Z)(t.line):ej.toHtml(t.line);var o=(0,v._)((0,b.useState)([]),2),a=o[0],l=o[1];(0,b.useEffect)(function(){(0,ez.r)(i,function(){return Promise.resolve(n)}).then(function(e){return l(e)})},[n,i]);var c=(0,b.useCallback)(function(e){e.preventDefault();var t=e.target;t.dataset.file&&r({path:t.dataset.file})},[r]);return(0,g.tZ)("div",{dangerouslySetInnerHTML:{__html:function(e,t){t.sort(function(e,t){return e.from-t.from});var n="",r=0;return t.forEach(function(t){n+=e.slice(r,t.from);var i=e.slice(t.from,t.to);n+='<a href="#" data-file="'.concat(t.file,'">').concat(i,"</a>"),r=t.to}),n+=e.slice(r)}(i,a)},onKeyDown:c,onClick:c})},eJ=n(22419),eY=n(39031),e$=n(90831),eK=function(e){var t=e.scrollRef,n=e.scrollBottomRef,r=(0,b.useRef)(!1);return(0,ev.q)(function(){t.current&&setTimeout(function(){n.current&&((0,e$.Z)(n.current),r.current=!0)},0)}),{didInitialScroll:r}},eQ=function(e){var t,n=e.didInitialScroll,r=e.itemHeight,i=e.scrollRef,o=eP(),a=o.fetchPage,l=o.setIsLive,c=(0,v._)((0,b.useState)(!1),2),s=c[0],u=c[1],d=(0,v._)((0,b.useState)(0),2),f=d[0],h=d[1],p=(0,v._)((0,b.useState)(0),2),m=p[0],g=p[1],y=(0,b.useRef)(),w=(0,b.useRef)(!1);(0,b.useEffect)(function(){i.current&&h(i.current.offsetWidth-i.current.clientWidth)},[i]);var Z=(0,b.useCallback)(function(e){(y.current||s)&&clearTimeout(y.current),u(!0),y.current=setTimeout(function(){u(!1),g(e.scrollLeft)},100)},[s]);return{scrollHandler:(0,b.useCallback)((t=(0,x._)(function(e){var t,i,o,c,s,u,d;return(0,k.Jh)(this,function(f){switch(f.label){case 0:if(!(t=e.currentTarget)||w.current)return[2];if(Z(t),i=t.scrollHeight,o=t.scrollTop,l(s=i-(c=t.clientHeight)===o),u=20*r,!(!s&&o<u&&i>c&&n.current))return[3,5];w.current=!0,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,a()];case 2:return f.sent(),[3,4];case 3:return d=f.sent(),ew.Tb(d),[3,4];case 4:w.current=!1,f.label=5;case 5:return[2]}})}),function(e){return t.apply(this,arguments)}),[Z,l,r,n,a]),isScrolling:s,scrollLeftOffset:m-f}},e0=function(e){var t=e.scrollRef,n=e.scrollBottomRef,r=eP(),i=r.loading,o=r.logs,a=r.isLive,l=r.isWrapped,c=(0,b.useRef)(0),s=(0,b.useRef)(o[0]),u=(0,b.useCallback)(function(){n.current&&(0,e$.Z)(n.current)},[n]);(0,b.useEffect)(function(){var e=t.current;if(e&&!i&&0!==o.length){if(a)e.scrollHeight>e.clientHeight&&u();else if(s.current&&s.current.timestamp>o[0].timestamp){var n=e.scrollHeight;if(n!==c.current){var r=n-c.current,l=e.scrollTop;e.scrollTo({top:l+r,behavior:"instant"})}}s.current=o[0],c.current=e.scrollHeight}},[a,i,o,t,u]);var d=(0,b.useRef)(l);(0,b.useEffect)(function(){a&&d.current!==l&&(u(),d.current=l)},[a,l,u])},e1=(0,D.X)({root:[{overflow:"auto"},B.l0.flex.growAndShrink(1)],virtualTable:[B.l0.width("100%"),B.l0.position.relative],tableHeader:[B.l0.display.flex,B.l0.flex.row,B.l0.backgroundColor.backgroundDefault,B.l0.position.sticky,B.l0.zIndex(1),B.l0.top(0),B.l0.border({color:B.TV.outlineDimmest,direction:"bottom"})],columnHeader:[B.l0.color.foregroundDimmer,B.l0.fontSize(12),{lineHeight:"18px"},B.l0.px(6),B.l0.justify.center],infoTooltip:[B.l0.display.flex,B.l0.align.center,B.l0.gap(4),{lineHeight:0}],bottomAnchor:[B.l0.position.absolute,B.l0.bottom(0),B.l0.left(0),B.l0.right(0)]}),e2=function(){var e=eP().isColorful,t=(0,eW.f)();return(0,b.useMemo)(function(){var n={};if(t){var r=!0,i=!1,o=void 0;try{for(var a,l=Object.entries(t)[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=(0,v._)(a.value,2),s=c[0],u=c[1];n["--ansi-".concat(eH()(s))]=e?u:"currentColor"}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}}return n},[e,t])};function e3(){var e=eP(),t=e.loading,n=e.error,r=e.logs,i=e.isExpanded,o=e.isWrapped,a=e.isWide,l=!!(t||n),c=(0,b.useRef)(null),s=(0,b.useRef)(null),u=(0,eg.sG)(),d=e2(),f=u?44:26,h=(0,_.MG)({count:(null==r?void 0:r.length)||0,getScrollElement:function(){return c.current},estimateSize:function(){return f},overscan:10,measureElement:function(e){return e.getBoundingClientRect().height},rangeExtractor:function(e){var t=new Set([0].concat((0,C._)((0,eZ.MK)(e))));return(0,C._)(t)}});e0({scrollRef:c,scrollBottomRef:s});var p=eQ({didInitialScroll:eK({scrollRef:c,scrollBottomRef:s}).didInitialScroll,itemHeight:f,scrollRef:c}),m=p.scrollHandler,y=p.isScrolling,Z=p.scrollLeftOffset,x=(0,w.$y)(),k=(null==x?void 0:x.provider)===eh.r4.Cron,S=(0,b.useMemo)(function(){var e;return 8*(e=Math).max.apply(e,(0,C._)((null==r?void 0:r.map(function(e){return e.line.length}))||[]))},[r]),E=(0,w.XZ)().listFiles,T=(0,v._)((0,b.useState)([]),2),D=T[0],I=T[1];(0,b.useEffect)(function(){E().then(function(e){e.files&&I(e.files)})},[E]);var B=(0,eg.sG)(),P=(0,b.useMemo)(function(){return[{key:"time",title:(0,g.BX)("span",{css:e1.infoTooltip,children:["Time",!B&&(0,g.tZ)(eJ.u,{tooltip:"Logs persist for up to 30 days",css:e1.infoTooltip,children:(0,g.tZ)(eY.Z,{size:12})})]}),width:a?173:115,renderCell:function(e){var t=(0,eM.Z)(e.timestamp);return(0,eF.Z)(t,a?"yyyy-MM-dd HH:mm:ss.SS":"MM-dd HH:mm:ss")}},i&&{key:"build",title:"Deployment",width:75,renderCell:function(e){var t=e.buildId.split("-");return t?t[0]:e.buildId}},k&&{key:"run",title:"Run",width:50,renderCell:function(e){var t,n=null===(t=e.executionId)||void 0===t?void 0:t.split("-");return n?n[n.length-1]:""}},i&&{key:"source",title:"Source",width:57,renderCell:function(e){return e.isFromReplit?"System":"User"}},{width:o?void 0:S,key:"log",title:"Log",renderCell:function(e){return(0,g.tZ)(eq,{files:D,log:e})}}].filter(Boolean)},[D,k,i,B,a,o,S]),A=(0,b.useMemo)(function(){return P.reduce(function(e,t){return e+(t.width||0)},0)},[P]);return(0,g.tZ)(R.G,{innerRef:c,css:e1.root,onScroll:m,children:(0,g.BX)(R.G,{style:(0,G._)({height:h.getTotalSize(),minWidth:A,"--scroll-left-offset":"".concat(Z,"px")},d),css:e1.virtualTable,children:[(0,g.tZ)(R.G,{css:e1.tableHeader,children:P.map(function(e){return(0,g.tZ)(R.G,{tag:"div",css:e1.columnHeader,style:{width:e.width,flex:e.width?void 0:1,height:f},children:e.title},e.key)})}),h.getVirtualItems().map(function(e){var t=r[e.index];return t?(0,g.tZ)(eX,{log:t,height:e.size,y:e.start,resizeRef:h.measureElement,index:e.index,disabled:l,isScrolling:y,columns:P},e.key):null}),(0,g.tZ)("div",{ref:s,css:e1.bottomAnchor})]})})}var e4=(0,D.X)({root:[B.l0.flex.grow(1)],noLogsContainer:[B.l0.colWithGap(8),B.l0.pt(4)],noLogsText:[B.l0.textAlign.center],viewError:[B.l0.pt(0)]});function e8(){var e=eP(),t=e.logs,n=e.error;return e.loading?(0,g.tZ)(V,{css:e4.root,centered:!0,children:(0,g.tZ)(J,{})}):0===t.length?(0,g.BX)(g.HY,{children:[n?(0,g.tZ)($,{css:e4.viewError,text:n}):null,(0,g.tZ)(V,{css:e4.root,children:(0,g.BX)(R.G,{css:e4.noLogsContainer,children:[(0,g.tZ)(T.xv,{css:e4.noLogsText,children:"No logs are available."}),(0,g.BX)(T.xv,{color:"dimmer",css:e4.noLogsText,children:["Having trouble?"," ",(0,g.tZ)("a",{href:"https://docs.replit.com/cloud-services/deployments/troubleshooting",onClick:function(){return et({context:"troubleshooting_doc"})},target:"_blank",children:"Troubleshooting tips"})]})]})})]}):(0,g.tZ)(e3,{})}var e6=n(79904),e5=n(59140),e7=n(7300),e9=n(5189),te=n(31718),tt=n(31089),tn=n(28065);function tr(e){return(0,g.tZ)(tn.ZP,(0,P._)((0,G._)({},e),{viewBox:"0 0 16 16",fill:"none",children:(0,g.tZ)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 11.5H10A3.5 3.5 0 0013.5 8v0A3.5 3.5 0 0010 4.5H2.5m2 7L7 9m-2.5 2.5L7 14"})}))}var ti=n(1056),to=(0,D.X)({root:[B.l0.rowWithGap(8),B.l0.justify.spaceBetween,B.l0.border({color:B.TV.outlineDimmest,direction:"top"}),B.l0.height(29)],group:[B.l0.display.flex,B.l0.rowWithGap(8)],button:[B.l0.color.foregroundDefault,B.l0.borderRadius(0),B.l0.height("100%")],liveIndicatorWrapper:[B.l0.width(16),B.l0.height(16),B.l0.display.flex,B.l0.align.center,B.l0.justify.center],liveIndicator:[B.l0.width(6),B.l0.height(6),B.l0.borderRadius("full"),B.l0.backgroundColor.accentPositiveStronger],checkboxWrapper:[B.l0.display.flex,B.l0.align.center,B.l0.rowWithGap(4),B.l0.cursor.pointer],checkbox:[{input:[B.l0.width(16),B.l0.height(16)]}]});function ta(){var e=eP(),t=e.isLive,n=e.setIsLive,r=e.isExpanded,i=e.setIsExpanded,o=e.isWrapped,a=e.setIsWrapped,l=e.isColorful,c=e.setIsColorful,s=(0,tt.U)();return(0,g.BX)(R.G,{css:to.root,children:[(0,g.BX)(R.G,{css:to.group,children:[(0,g.tZ)(e6.zx,{iconLeft:r?(0,g.tZ)(e7.Z,{rotate:90}):(0,g.tZ)(e9.Z,{rotate:90}),onClick:function(){return i(function(e){return!e})},variant:"nofill",text:r?"Collapse":"Expand",css:to.button}),(0,g.BX)("label",{css:to.checkboxWrapper,htmlFor:s("wrap"),children:[(0,g.tZ)(te.X,{id:s("wrap"),checked:o,onChange:function(){return a(function(e){return!e})},css:to.checkbox}),(0,g.tZ)(tr,{}),(0,g.tZ)("span",{children:"Wrap"})]}),(0,g.BX)("label",{css:to.checkboxWrapper,htmlFor:s("colorful"),children:[(0,g.tZ)(te.X,{id:s("colorful"),checked:l,onChange:function(){return c(function(e){return!e})},css:to.checkbox}),(0,g.tZ)(ti.Z,{}),(0,g.tZ)("span",{children:"Colors"})]})]}),(0,g.tZ)(R.G,{css:to.group,children:(0,g.tZ)(e6.zx,{iconLeft:t?(0,g.tZ)(R.G,{css:to.liveIndicatorWrapper,children:(0,g.tZ)(R.G,{css:to.liveIndicator})}):(0,g.tZ)(e5.Z,{}),onClick:function(){return n(function(e){return!e})},variant:"nofill",text:"Live",css:to.button})})]})}var tl=n(82922),tc=n(82410),ts=n(91466),tu=n(94668),td=n(97221),tf=n(93721),th=n(7935),tp=n(41960),tm=(0,D.X)({buttonGroup:[B.l0.flex.row,B.l0.rowWithGap(1),{button:{"&:not(:first-child)":{borderTopLeftRadius:0,borderBottomLeftRadius:0},"&:not(:last-child)":{borderTopRightRadius:0,borderBottomRightRadius:0}}}],checkboxWithLabel:[B.l0.rowWithGap(8),B.l0.p(8)],dateRangeInputs:[B.l0.display.grid,B.l0.gap(8),B.l0.align.center,{gridTemplateColumns:"min-content 200px",gridAutoFlow:"row",gridAutoRows:"1fr"}],clearFilterButton:[B.l0.borderRadius(0),B.l0.width("fit-content")]});function tv(e){var t=e.onClear,n=e.label,r=e.buttonProps,i=e.children,o=t?"primary":void 0,a=(0,v._)((0,b.useState)(!1),2),l=a[0],c=a[1];return(0,g.BX)(tf.Z,{css:tm.buttonGroup,children:[(0,g.BX)(tp.xo,{label:n,isOpen:l,onOpenChange:c,noArrow:!0,background:"higher",children:[(0,g.tZ)(e6.zx,(0,G._)({colorway:o},r)),i]}),t?(0,g.tZ)(e6.zx,{colorway:o,text:"",iconLeft:(0,g.tZ)(th.Z,{}),onClick:t}):null]})}var tg=n(29737),ty=n(44935),tb=n(99065),tw=n(67824),tZ=n(3043),tx=n(54151),tC=n(44794),tk=n(33869),tS=n(30231),t_=(0,D.X)({group:[B.l0.display.flex,{gap:B.TV.space4},B.l0.position.relative],dateInput:[ty.u3,B.l0.flex.row,{gap:B.TV.space4}],dateSegment:[B.l0.borderRadius(2),{outline:"none","&[data-focused=true]":{outline:"2px solid ".concat(B.TV.accentPrimaryDefault),outlineOffset:1}}],iconButton:[B.l0.position.absolute,B.l0.top("50%"),B.l0.right(0),{transform:"translateY(-50%)"}],calendar:[B.l0.p(8)],calendarHeader:[B.l0.flex.row,B.l0.align.center,B.l0.justify.spaceBetween],calendarHeaderText:[B.l0.fontSize(B.TV.fontSizeDefault),B.l0.color.foregroundDefault,B.l0.fontWeight.normal],arrowButton:[eN.gU.listItem,B.l0.borderRadius("default"),B.l0.p(4),{appearance:"none",background:"transparent",border:"none"}],calendarGrid:[B.l0.mt(8),{th:[B.l0.height(14),B.l0.color.foregroundDimmer,B.l0.fontWeight.normal,B.l0.pb(4)]}],calendarCell:[eN.gU.listItem,B.l0.flex.column,B.l0.fontSize(B.TV.fontSizeDefault),B.l0.width(32),B.l0.height(28),B.l0.borderRadius("default"),{textAlign:"center",justifyContent:"center",'&[data-outside-visible-range="true"]':[B.l0.display.none],'&[data-selected="true"]':{"&, &:hover":[B.l0.backgroundColor.accentPrimaryDimmer]}}]});function tE(e){var t=(0,v._)((0,b.useState)(!1),2),n=t[0],r=t[1];return(0,g.tZ)(tw.Mt,(0,P._)((0,G._)({},e),{children:(0,g.BX)(tf.Z,{css:t_.group,children:[(0,g.tZ)(tZ.Wr,{css:t_.dateInput,children:function(e){return(0,g.tZ)(tZ.kE,{segment:e,css:t_.dateSegment})}}),(0,g.BX)(tp.xo,{label:"Calendar",isOpen:n,onOpenChange:r,children:[(0,g.tZ)(H.hU,{alt:"Open calendar",tooltipBehavior:"hidden",css:t_.iconButton,children:(0,g.tZ)(tb.Z,{})}),(0,g.BX)(tx.f,{css:t_.calendar,children:[(0,g.BX)("header",{css:t_.calendarHeader,children:[(0,g.tZ)(tC.z,{slot:"previous",css:t_.arrowButton,children:(0,g.tZ)(z.Z,{})}),(0,g.tZ)(tk.X,{css:t_.calendarHeaderText}),(0,g.tZ)(tC.z,{slot:"next",css:t_.arrowButton,children:(0,g.tZ)(tS.Z,{})})]}),(0,g.tZ)(tx.TK,{css:t_.calendarGrid,children:function(e){return(0,g.tZ)(tx.VX,{date:e,css:t_.calendarCell})}})]})]})]})}))}var tT=(0,D.X)({section:[B.l0.p(8),B.l0.gap(8)],dateRangeInputs:[B.l0.display.grid,B.l0.gap(8),B.l0.align.center,{gridTemplateColumns:"min-content 200px",gridAutoFlow:"row",gridAutoRows:"1fr"}]}),tR=function(){var e=eP(),t=e.filter,n=e.setFilter;return(0,g.BX)(R.G,{css:tT.dateRangeInputs,children:[(0,g.tZ)(td._,{variant:"text",children:"After"}),(0,g.tZ)(tE,{granularity:"minute",hourCycle:24,value:t.start,onChange:function(e){return n(function(t){return(0,P._)((0,G._)({},t),{start:e})})}}),(0,g.tZ)(td._,{variant:"text",children:"Before"}),(0,g.tZ)(tE,{granularity:"minute",hourCycle:24,value:t.end,onChange:function(e){return n(function(t){return(0,P._)((0,G._)({},t),{end:e})})}})]})},tD=function(){var e=eP(),t=e.filter,n=e.setFilter,r=(0,eI.iT)(),i=t.start||t.end,o="Date",a=t.start&&(0,eF.Z)(t.start.toDate(r),"M/d/yy"),l=t.end&&(0,eF.Z)(t.end.toDate(r),"M/d/yy");return a&&l?o="".concat(a," to ").concat(l):a?o="After ".concat(a):l&&(o="Before ".concat(l)),(0,g.tZ)(tv,{label:"Date range",onClear:i?function(){return n(function(e){return(0,P._)((0,G._)({},e),{start:null,end:null})})}:void 0,buttonProps:{text:o,iconRight:i?void 0:(0,g.tZ)(tg.Z,{})},children:(0,g.tZ)(R.G,{css:tT.section,children:(0,g.tZ)(tR,{})})})},tI=(0,D.X)({inputContainer:[B.l0.p(8)]}),tB=function(){var e=eP(),t=e.filter,n=e.setFilter,r=(0,v._)((0,b.useState)(t.executionId),2),i=r[0],o=r[1];return(0,b.useEffect)(function(){o(t.executionId)},[t.executionId]),(0,g.tZ)(ty.II,{placeholder:"*****",value:i||"",onChange:function(e){var t=e.target.value;o(t),t&&5!==t.length||n(function(e){return(0,P._)((0,G._)({},e),{executionId:t})})},onBlur:function(){return n(function(e){return(0,P._)((0,G._)({},e),{executionId:i})})},onKeyDown:function(e){"Enter"===e.key&&n(function(e){return(0,P._)((0,G._)({},e),{executionId:i})})}})},tG=function(){var e=eP(),t=e.filter,n=e.setFilter;return(0,g.tZ)(tv,{onClear:t.executionId?function(){return n(function(e){return(0,P._)((0,G._)({},e),{executionId:null})})}:void 0,label:"Run ID",buttonProps:{text:t.executionId?"Run: ".concat(t.executionId):"Run ID",iconRight:t.executionId?void 0:(0,g.tZ)(tg.Z,{})},children:(0,g.tZ)(R.G,{css:tI.inputContainer,children:(0,g.tZ)(tu.nv,{children:(0,g.tZ)(tB,{})})})})},tP=function(){var e=(0,w.$y)();return(null==e?void 0:e.provider)===eh.r4.Cron},tA=(0,D.X)({root:[B.l0.p(8),B.l0.rowWithGap(8),{"> *:first-child":B.l0.flex.grow(1)}],divider:B.l0.backgroundColor.outlineDimmer,section:[B.l0.p(8),B.l0.gap(8)],checkboxWithLabel:[B.l0.rowWithGap(8),B.l0.p(8)],buttonInnerCheckbox:[{pointerEvents:"none"}],clearFilterButton:[B.l0.borderRadius(0),B.l0.width("fit-content")]}),tL=function(){var e=eP(),t=e.filter,n=e.setFilter,r=function(){n(function(e){return(0,P._)((0,G._)({},e),{level:e.level===eh.in.Error?null:eh.in.Error})})};return(0,g.tZ)(e6.zx,{colorway:t.level===eh.in.Error?"primary":void 0,text:"Errors only",iconLeft:(0,g.tZ)(te.X,{onChange:r,checked:t.level===eh.in.Error}),onClick:r})},tN=function(){var e=tP();return(0,g.BX)(g.HY,{children:[(0,g.tZ)(tL,{}),(0,g.tZ)(tD,{}),e&&(0,g.tZ)(tG,{})]})},tO=function(){var e=eP(),t=e.filter,n=e.setFilter,r=e.clearFilter,i=tP(),o=!!(t.message||t.level||t.start||t.end||t.executionId),a=(0,tt.U)();return(0,g.tZ)(tv,{label:"Filter",buttonProps:{text:"",iconLeft:(0,g.tZ)(tc.Z,{})},onClear:o?r:void 0,children:(0,g.BX)(R.G,{children:[(0,g.BX)(R.G,{css:tA.checkboxWithLabel,children:[(0,g.tZ)(te.X,{name:"Filter by errors only",id:a("errors-only"),checked:t.level===eh.in.Error,onChange:function(e){return n(function(t){return(0,P._)((0,G._)({},t),{level:e?eh.in.Error:null})})}}),(0,g.tZ)("label",{htmlFor:a("errors-only"),children:"Errors only"})]}),i?(0,g.BX)(g.HY,{children:[(0,g.tZ)(ts.R,{css:tA.divider}),(0,g.tZ)(R.G,{css:tA.section,children:(0,g.BX)(tu.nv,{children:[(0,g.tZ)(td._,{color:"dimmer",children:"Run ID"}),(0,g.tZ)(tB,{})]})})]}):null,(0,g.tZ)(ts.R,{css:tA.divider}),(0,g.BX)(R.G,{css:tA.section,children:[(0,g.tZ)(td._,{color:"dimmer",children:"Date range"}),(0,g.tZ)(tR,{})]}),(0,g.tZ)(ts.R,{css:tA.divider}),(0,g.tZ)(e6.zx,{variant:"nofill",onClick:function(){return r()},text:"Clear all filters",alignment:"start",css:tA.clearFilterButton})]})})};function tU(){var e=eP(),t=e.filter,n=e.setFilter,r=e.isWide,i=(0,v._)((0,b.useState)(t.message),2),o=i[0],a=i[1];return(0,b.useEffect)(function(){a(t.message)},[t.message]),(0,g.BX)(R.G,{css:tA.root,children:[(0,g.tZ)(tl.E,{placeholder:"Search",value:o,onChange:function(e){a(e.target.value),""===e.target.value&&n(function(e){return(0,P._)((0,G._)({},e),{message:""})})},onBlur:function(){return n(function(e){return(0,P._)((0,G._)({},e),{message:o})})},onClear:function(){n(function(e){return(0,P._)((0,G._)({},e),{message:""})})},onKeyDown:function(e){"Enter"===e.key&&n(function(e){return(0,P._)((0,G._)({},e),{message:o})})}}),r?(0,g.tZ)(tN,{}):(0,g.tZ)(tO,{})]})}var tX=(0,D.X)({root:[B.l0.flex.growAndShrink(1),B.l0.overflow("hidden")],header:[B.l0.colWithGap(8),B.l0.p(6),{borderBottom:"1px solid ".concat(B.TV.outlineDimmest)}],headerActions:[B.l0.rowWithGap(8),B.l0.align.center,B.l0.justify.spaceBetween]}),tM=function(e){var t=e.deploymentId,n=e.replId,r=e.executionId,i=e.onBack,o=e.openFile;return t?(0,g.tZ)(tF,{deploymentId:t,replId:n,executionId:r,onBack:i,openFile:o}):(0,g.tZ)(V,{children:(0,g.tZ)(E.E,{colorway:"warning",icon:(0,g.tZ)(I.Z,{}),text:"Deployment not found"})})};function tF(e){var t=e.deploymentId,n=e.replId,r=e.executionId,i=e.onBack,o=eA({deploymentId:t,replId:n,executionId:r,openFile:e.openFile});return(0,ev.q)(function(){et({context:er.k.Logs})}),(0,g.tZ)(eG.Provider,{value:o,children:(0,g.BX)(R.G,{css:tX.root,innerRef:o.containerRef,children:[i?(0,g.tZ)(R.G,{css:tX.header,children:(0,g.tZ)(R.G,{css:tX.headerActions,children:(0,g.tZ)(H.hU,{alt:"Back",onClick:i,children:(0,g.tZ)(z.Z,{})})})}):null,(0,g.tZ)(tU,{}),(0,g.tZ)(e8,{}),(0,g.tZ)(ta,{})]})})}var tW=n(78272),tV=n(99595);function tH(){var e=(0,ei._)(["\n  fragment ExecuteScheduledJobExecution on ScheduledJobExecution {\n    id\n    startedAt\n    endedAt\n    status\n  }\n"]);return tH=function(){return e},e}function tz(){var e=(0,ei._)(["\n  mutation ExecuteScheduledJob($deploymentId: String!) {\n    executeScheduledJob(input: { deploymentId: $deploymentId }) {\n      __typename\n      ... on ExecuteScheduledJobResult {\n        execution {\n          ...ExecuteScheduledJobExecution\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n  ","\n"]);return tz=function(){return e},e}var tj={},tq=(0,eo.Ps)(tH()),tJ=(0,eo.Ps)(tz(),tq),tY=n(80703);function t$(e){var t,n=e.disabled,r=e.onSuccessfulExecution,i=(0,w.hn)(),o=(0,w.$y)(),a=(0,w.kW)(),l=(0,tV.Z)().showError,c=(0,v._)((0,b.useState)(),2),s=c[0],u=c[1],d=function(e){u(e.message),l(e.message)},f=(0,v._)((t=(0,G._)({},tj,{onError:d,onCompleted:function(e){var t=e.executeScheduledJob;if("ExecuteScheduledJobResult"===t.__typename){null==r||r(t.execution);return}d(Error("An error occurred while executing the scheduled job"))}}),el.D(tJ,t)),2),h=f[0],p=f[1].loading,m=!!(!i||!o||p||s||void 0!==n&&n),y=(null==o?void 0:o.status)===eh.Fe.Success,x=a===Z.z.Ready,C=!m&&x&&y,k=x?"You must successfully deploy your project before being able to run it":"Can't run while deployment is ".concat((0,tY.Sj)(a));return(0,g.tZ)(eJ.u,{tooltip:k,isDisabled:C,children:(0,g.tZ)(e6.zx,{text:"Run now",iconLeft:p?(0,g.tZ)(j.Z,{}):(0,g.tZ)(tW.Z,{}),size:"small",disabled:m||!C,onClick:function(){i&&!m&&h({variables:{deploymentId:i}})}})})}var tK=(0,D.X)({root:[B.l0.flex.growAndShrink(1),B.l0.overflow("hidden")],executionListHeader:[B.l0.colWithGap(8),B.l0.p(6),{borderBottom:"1px solid ".concat(B.TV.outlineDimmest)}],executionListHeaderActions:[B.l0.rowWithGap(8),B.l0.align.center,B.l0.justify.spaceBetween],executionList:[{overflow:"auto"},B.l0.flex.growAndShrink(1)],executionListRows:{width:"100%",position:"relative"},executionItem:[B.l0.rowWithGap(8),B.l0.align.center,B.l0.fontSize(12),B.l0.px(8),{position:"absolute",top:0,left:0,width:"100%",borderBottom:"1px solid ".concat(B.TV.outlineDimmest),color:B.TV.foregroundDimmer}],executionItemStatusDot:[B.l0.width("6px"),B.l0.height("6px"),B.l0.borderRadius("full"),B.l0.flex.shrink(0),B.l0.pr(4)],executionItemDistance:[B.l0.minWidth(100)],executionItemTimestamp:[B.l0.minWidth(90)],executionItemRunTime:[B.l0.minWidth(60)],executionItemStatus:[B.l0.minWidth(100),{textTransform:"capitalize"}],executionItemActions:[B.l0.rowWithGap(8),B.l0.align.center,{marginLeft:"auto"}],noExecutionsContainer:[B.l0.colWithGap(8),B.l0.pt(4)],noExecutionsText:[B.l0.textAlign.center],maxResultsMessage:[B.l0.fontSize(12),B.l0.color.foregroundDimmest]});function tQ(e){var t=e.deploymentId,n=e.replId,r=e.openFile,i=(0,v._)((0,b.useState)(),2),o=i[0],a=i[1];return t?o?(0,g.tZ)(tM,{replId:n,deploymentId:t,executionId:o,onBack:function(){return a(void 0)},openFile:r}):(0,g.tZ)(t0,{deploymentId:t,onViewExecutionLogs:function(e){var t=e.split("-");a(t[t.length-1])}}):(0,g.tZ)(V,{children:(0,g.tZ)(E.E,{colorway:"warning",icon:(0,g.tZ)(I.Z,{}),text:"Deployment not found"})})}function t0(e){var t,n,r,i=e.deploymentId,o=e.onViewExecutionLogs,a=(0,v._)((0,b.useState)([]),2),l=a[0],c=a[1],s=(0,v._)((0,b.useState)(!1),2),u=s[0],d=s[1],f=(0,v._)((0,b.useState)(),2),h=f[0],p=f[1],m=(t=(0,G._)({},eu,{variables:{deploymentId:i},onError:function(e){p(e)},onCompleted:function(e){(null==e?void 0:e.scheduledJobListExecutions.__typename)==="ScheduledJobListExecutionsResults"&&c(e.scheduledJobListExecutions.results)}}),ea.a(ed,t)),y=m.loading,w=m.refetch,Z=(0,v._)((n=(0,G._)({},eu,{onError:function(e){p(e)},onCompleted:function(e){var t=e.cancelScheduledJobExecution;"CancelScheduledJobExecutionResult"===t.__typename&&c(function(e){return e.map(function(e){return e.id===t.execution.id?t.execution:e})})}}),el.D(ef,n)),2),x=Z[0],k=Z[1].loading,S=!!(y||k||u||h);return(0,ev.q)(function(){y||w(),et({context:er.k.Schedule})}),(0,g.BX)(R.G,{css:tK.root,children:[(0,g.BX)(R.G,{css:tK.executionListHeader,children:[h?(0,g.tZ)(E.E,{colorway:"warning",icon:(0,g.tZ)(I.Z,{}),text:null!==(r=h.message)&&void 0!==r?r:"Something went wrong"}):null,(0,g.BX)(R.G,{css:tK.executionListHeaderActions,children:[(0,g.tZ)(t$,{disabled:S,onSuccessfulExecution:function(e){c(function(t){return[e].concat((0,C._)(t)).slice(0,50)})}}),(0,g.tZ)(H.hU,{alt:"Refresh",disabled:S,onClick:function(){S||(d(!0),w().finally(function(){d(!1)}))},children:u?(0,g.tZ)(j.Z,{}):(0,g.tZ)(ep.Z,{})})]})]}),(0,g.tZ)(t1,{executions:l,loading:y,disabled:S,onExecutionItemAction:function(e){switch(e.type){case"cancel":x({variables:{deploymentId:i,executionId:e.payload.id}});break;case"logs":o(e.payload.id)}}})]})}function t1(e){var t=e.executions,n=e.loading,r=e.disabled,i=e.onExecutionItemAction,o=(0,b.useRef)(null),a=(0,eg.sG)()?44:28,l=(0,_.MG)({count:t.length,getScrollElement:function(){return o.current},estimateSize:function(){return a},overscan:10});return n?(0,g.tZ)(V,{centered:!0,children:(0,g.tZ)(J,{})}):0===t.length?(0,g.tZ)(V,{children:(0,g.BX)(R.G,{css:tK.noExecutionsContainer,children:[(0,g.tZ)(T.xv,{css:tK.noExecutionsText,children:"No runs yet..."}),(0,g.BX)(T.xv,{color:"dimmer",css:tK.noExecutionsText,children:["Having trouble?"," ",(0,g.tZ)("a",{href:"https://docs.replit.com/cloud-services/deployments/troubleshooting",onClick:function(){return et({context:"troubleshooting_doc"})},target:"_blank",children:"Troubleshooting tips"})]})]})}):(0,g.tZ)(R.G,{innerRef:o,css:tK.executionList,children:(0,g.tZ)(R.G,{style:{height:l.getTotalSize()},css:tK.executionListRows,children:l.getVirtualItems().map(function(e){var n=t[e.index];return(0,g.tZ)(t4,{execution:n,height:e.size,y:e.start,index:e.index,onAction:i,disabled:r},e.key)})})})}var t2=(l={},(0,S._)(l,eh.YJ.Done,B.TV.accentPositiveDefault),(0,S._)(l,eh.YJ.Running,B.TV.orangeStronger),(0,S._)(l,eh.YJ.Failed,B.TV.accentNegativeDefault),(0,S._)(l,eh.YJ.Cancelled,B.TV.greyDefault),(0,S._)(l,eh.YJ.Unrecognized,B.TV.greyDefault),l);function t3(e){var t=e.status,n=t in t2?t2[t]:B.TV.greyDefault;return(0,g.tZ)(R.G,{tag:"span",css:tK.executionItemStatusDot,style:{backgroundColor:n,boxShadow:"0 0 8px ".concat(n)}})}function t4(e){var t=e.execution,n=e.y,r=e.height,i=e.index,o=e.onAction,a=e.disabled,l=(null==t?void 0:t.endedAt)?(new Date(t.endedAt).valueOf()-new Date(t.startedAt).valueOf())/1e3:null;return(0,g.BX)(g.HY,{children:[(0,g.BX)(R.G,{title:t.id,css:tK.executionItem,style:{height:r,transform:"translateY(".concat(n,"px)")},children:[(0,g.tZ)(t3,{status:t.status}),(0,g.tZ)(R.G,{css:tK.executionItemDistance,children:(0,em.Z)(new Date(t.startedAt),Date.now(),{addSuffix:!0})}),(0,g.BX)(R.G,{css:tK.executionItemTimestamp,children:[new Date(t.startedAt).toLocaleString("en-US",{month:"short",day:"2-digit"}),", ",new Date(t.startedAt).toLocaleString("en-US",{hour:"2-digit",minute:"2-digit",hourCycle:"h23"})]}),(0,g.tZ)(R.G,{css:tK.executionItemRunTime,children:l?"".concat(l,"s"):"-"}),(0,g.tZ)(R.G,{css:tK.executionItemStatus,children:t.status}),(0,g.BX)(R.G,{css:tK.executionItemActions,children:[t.status===eh.YJ.Running?(0,g.tZ)(H.hU,{alt:"Cancel",size:12,disabled:a,onClick:function(){return o({type:"cancel",payload:{id:t.id}})},children:(0,g.tZ)(ey.Z,{})}):null,(0,g.tZ)(H.hU,{alt:"Logs",size:18,disabled:a,onClick:function(){return o({type:"logs",payload:{id:t.id}})},children:(0,g.tZ)(eb.Z,{})})]})]}),49===i?(0,g.tZ)(R.G,{title:t.id,css:tK.executionItem,style:{height:r,transform:"translateY(".concat(n+r,"px)")},children:(0,g.tZ)(T.xv,{css:tK.maxResultsMessage,children:"Only the most recent 50 runs are displayed currently"})}):null]})}(r=c||(c={})).Cancel="cancel",r.Logs="logs";var t8=n(14118),t6=n(16155),t5=n(17695),t7=n(99743),t9=n(42427),ne=n(10055),nt=n(4273),nn=n(45151),nr=n(26881),ni=n(14861),no=(0,L.iv)([B.l0.maxHeight(320),B.l0.minHeight(240),{aspectRatio:"2 / 1"}]);function na(){var e=(0,ni.F)().values;return{animation:{duration:0},backgroundColor:e.global.backgroundHigher,borderColor:e.global.outlineDimmer,borderWidth:1,titleFont:{family:"'IBM Plex Sans', sans-serif"},titleColor:e.global.foregroundDimmest,bodyFont:{family:"'IBM Plex Sans', sans-serif"},bodyColor:e.global.foregroundDimmest,footerFont:{family:"'IBM Plex Sans', sans-serif"},footerColor:e.global.foregroundDimmest,padding:8,cornerRadius:6}}var nl=n(35820),nc=n(34293);function ns(){var e=(0,ei._)(["\n  fragment ReplAnalyticsDurationResult on ReplAnalyticsDuration {\n    __typename\n    results {\n      __typename\n      value\n      count\n    }\n  }\n"]);return ns=function(){return e},e}function nu(){var e=(0,ei._)(["\n  query ReplAnalyticsDuration(\n    $id: String!\n    $input: ReplAnalyticsDurationInput!\n  ) {\n    repl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsDuration(input: $input) {\n          ... on ReplAnalyticsDuration {\n            ...ReplAnalyticsDurationResult\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return nu=function(){return e},e}var nd={},nf=(0,eo.Ps)(ns()),nh=(0,eo.Ps)(nu(),nf),np=function(e){var t=e.data;nr.kL.register(nr.ZL);var n=(0,ni.F)().values;return(0,g.tZ)(nc.$Q,{options:{responsive:!0,maintainAspectRatio:!1,datasets:{bar:{categoryPercentage:1,barPercentage:1}},plugins:{tooltip:na()},scales:{y:{title:{display:!0,text:"# Requests",color:n.global.foregroundDimmer,font:{family:"'IBM Plex Sans', sans-serif"}},ticks:{font:{family:"'IBM Plex Sans', sans-serif"},color:n.global.foregroundDimmer,callback:function(e){if("number"==typeof e&&Math.floor(e)===e)return e}},grid:{color:n.global.outlineDimmest}},x:{title:{font:{family:"'IBM Plex Sans', sans-serif"},display:!0,text:"Duration (ms)",color:n.global.foregroundDimmer},ticks:{autoSkip:!1,maxRotation:20,color:n.global.foregroundDimmer,font:{family:"'IBM Plex Sans', sans-serif"}},grid:{color:n.global.outlineDimmest}}}},data:{labels:t.results.map(function(e){var t=e.value.replace("ms","").split("-"),n=t[t.length-1];return n.includes("s+")?n.replace("s+","000+"):"< "+n}),datasets:[{borderWidth:0,data:t.results.map(function(e){return e.count}),backgroundColor:Array(t.results.length).fill(n.global.tealDefault)}]}})},nm=function(e){var t,n,r,i=e.replId,o=e.start,a=e.hours,l=(0,v._)((0,b.useState)(void 0),2),c=l[0],s=l[1],u=(t=(0,G._)({},nd,{variables:{id:i,input:{start:o,hours:a,deployment:!0}},ssr:!1,onCompleted:function(e){if("Repl"===e.repl.__typename)switch(e.repl.analyticsDuration.__typename){case"UserError":case"NotFoundError":s(Error(e.repl.analyticsDuration.message))}}}),ea.a(nh,t)),d=u.data,f=u.loading,h=u.error;return h&&s(h),(0,g.BX)(R.G,{css:B.l0.colWithGap(8),children:[(0,g.tZ)(T.xv,{variant:"subheadDefault",children:"Request Durations (ms)"}),(0,g.BX)(R.G,{children:[f?(0,g.tZ)(R.G,{css:[no,B.l0.borderRadius(),nl.p.backgroundPulse()]}):null,c?(0,g.tZ)(E.E,{text:c.message,colorway:"negative"}):null,(null==d?void 0:null===(n=d.repl)||void 0===n?void 0:n.__typename)==="Repl"&&(null===(r=d.repl.analyticsDuration)||void 0===r?void 0:r.__typename)==="ReplAnalyticsDuration"?(0,g.tZ)(R.G,{css:no,children:(0,g.tZ)(np,{data:d.repl.analyticsDuration})}):null]})]})},nv=n(86306),ng=n(81995);nr.kL.register(nr.uw,nr.f$,nr.od,nr.jn,nr.u);var ny=function(e){var t=e.labels,n=e.datasets,r=e.maintainAspectRatio,i=e.yAxisLabel,o=e.xAxisLabel,a=e.unit,l=(0,ni.F)().values,c={labels:t.map(function(e){return e.toISOString()}),datasets:n.map(function(e){return(0,P._)((0,G._)({},e),{data:e.data.map(function(e){var t=e.x,n=e.y;return{x:t.toISOString(),y:n}}),pointRadius:.5,tension:.1})})},s=t.length;return(0,g.tZ)(nc.x1,{options:{clip:4,interaction:{mode:"nearest",intersect:!1},transitions:{active:{animation:{duration:0}}},elements:{point:{hoverRadius:4},line:{borderWidth:2}},responsive:!0,maintainAspectRatio:void 0===r||r,plugins:{tooltip:(0,P._)((0,G._)({},na()),{callbacks:{title:function(e){var t=new Date(e[0].label);return(0,eF.Z)(t,"MMM d, HH:mm (z)")}}})},scales:{y:{title:{display:!0,text:void 0===i?"# Requests":i,color:l.global.foregroundDimmer,font:{family:"'IBM Plex Sans', sans-serif"}},grid:{color:l.global.outlineDimmest},ticks:{font:{family:"'IBM Plex Sans', sans-serif"},color:l.global.foregroundDimmer,callback:function(e){if("number"==typeof e&&Math.floor(e)===e)return a?"".concat(e).concat(a):e}},min:0},x:{title:{display:!0,text:void 0===o?"Time":o,color:l.global.foregroundDimmer,font:{family:"'IBM Plex Sans', sans-serif"}},grid:{color:l.global.outlineDimmest},ticks:{font:{family:"'IBM Plex Sans', sans-serif"},color:l.global.foregroundDimmer,callback:function(e,n){var r=t[n];if(s<=24){if(r.getHours()%4!=0)return;return(0,eF.Z)(r,"HH:mm")}if(r.toISOString()===(0,ng.Z)(r).toISOString())return(0,eF.Z)(r,"MMM d")}}}}},data:c})};function nb(){var e=(0,ei._)(["\n  fragment ReplAnalyticsPageViewDataPoint on ReplAnalyticsPageViewsData {\n    __typename\n    timestamp\n    success\n    failure\n  }\n"]);return nb=function(){return e},e}function nw(){var e=(0,ei._)(["\n  fragment ReplAnalyticsPageViews on ReplAnalyticsPageViews {\n    __typename\n    uniques\n    results {\n      ...ReplAnalyticsPageViewDataPoint\n    }\n  }\n  ","\n"]);return nw=function(){return e},e}function nZ(){var e=(0,ei._)(["\n  query ReplAnalyticsPageViews(\n    $id: String!\n    $input: ReplAnalyticsPageViewsInput!\n  ) {\n    repl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsPageViews(input: $input) {\n          ... on ReplAnalyticsPageViews {\n            ...ReplAnalyticsPageViews\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return nZ=function(){return e},e}var nx={},nC=(0,eo.Ps)(nb()),nk=(0,eo.Ps)(nw(),nC),nS=(0,eo.Ps)(nZ(),nk),n_=function(e){var t=e.data,n=e.start,r=e.hours,i=(0,ni.F)().values,o=Array(r).fill(0).map(function(e,t){return(0,nv.Z)(n,t)}),a=t.results.reduce(function(e,t){return e.set(t.timestamp,t),e},new Map),l=[{label:"Connected",data:o.map(function(e){var t;return{y:(null!==(t=a.get(e.toISOString()))&&void 0!==t?t:{success:0}).success,x:e}}),borderColor:i.global.accentPrimaryStronger,backgroundColor:i.global.accentPrimaryStronger},{label:"Failed",data:o.map(function(e){var t;return{y:(null!==(t=a.get(e.toISOString()))&&void 0!==t?t:{failure:0}).failure,x:e}}),borderColor:i.global.accentNegativeStronger,backgroundColor:i.global.accentNegativeStronger}];return(0,g.tZ)(ny,{labels:o,datasets:l,maintainAspectRatio:!1})},nE=function(e){var t,n,r,i=e.replId,o=e.start,a=e.hours,l=(0,v._)((0,b.useState)(void 0),2),c=l[0],s=l[1],u=(t=(0,G._)({},nx,{variables:{id:i,input:{start:o,hours:a,deployment:!0}},ssr:!1,onCompleted:function(e){if("Repl"===e.repl.__typename)switch(e.repl.analyticsPageViews.__typename){case"UserError":case"NotFoundError":s(Error(e.repl.analyticsPageViews.message))}}}),ea.a(nS,t)),d=u.data,f=u.loading,h=u.error,p=(null==d?void 0:null===(n=d.repl)||void 0===n?void 0:n.__typename)==="Repl"&&(null===(r=d.repl.analyticsPageViews)||void 0===r?void 0:r.__typename)==="ReplAnalyticsPageViews"?d.repl.analyticsPageViews:void 0,m=p?p.uniques:void 0;return h&&s(h),(0,g.BX)(R.G,{css:[B.l0.colWithGap(8)],children:[(0,g.BX)(R.G,{css:[B.l0.flex.row,B.l0.align.center,B.l0.justify.spaceBetween],children:[(0,g.tZ)(T.xv,{variant:"subheadDefault",multiline:!1,children:"Requests"}),m?(0,g.BX)(T.xv,{multiline:!1,children:[(0,g.tZ)("strong",{children:m})," unique IP addresses"]}):null]}),(0,g.BX)(R.G,{children:[f?(0,g.tZ)(R.G,{css:[B.l0.width("100%"),no,B.l0.borderRadius(),nl.p.backgroundPulse()]}):null,c?(0,g.tZ)(E.E,{text:c.message,colorway:"negative"}):null,p?(0,g.tZ)(R.G,{css:no,children:(0,g.tZ)(n_,{data:p,start:o,hours:a})}):null]})]})},nT=n(60202);n(33741),nr.kL.register(nr.uw,nr.f$,nr.od,nr.jn,nr.Dx,nr.u,nr.FB);var nR=function(e){var t,n,r,i=e.data,o=e.start,a=e.end,l=e.label,c=e.unit,s=e.xAxisLabel,u=e.yAxisLabel,d=(0,ni.F)().values,f=na(),h={datasets:[{label:l,data:i,fill:!1,borderColor:d.global.blueDimmer,tension:.1}]},p=(r=Math).max.apply(r,(0,C._)(i.map(function(e){return e.y}))),m=Math.ceil(c===nT.YL.Percentage?Math.max(p,100):Math.ceil(1.2*p)),v=(t=o,(n=a.getTime()-t.getTime())<=36e5?{unit:"minute",stepSize:5}:n<=216e5?{unit:"minute",stepSize:30}:n<=864e5?{unit:"hour",stepSize:2}:n<=2592e5?{unit:"hour",stepSize:6}:n<=6048e5?{unit:"hour",stepSize:12}:{unit:"day",stepSize:1}),y=v.unit,b=v.stepSize;return(0,g.tZ)(nc.x1,{data:h,options:{animation:!1,scales:{x:{type:"time",time:{unit:y},title:{display:!0,text:s},min:o.getTime(),max:a.getTime(),ticks:{stepSize:b,color:d.global.foregroundDimmer}},y:{title:{display:!0,text:u},type:"linear",suggestedMax:m,ticks:{font:{family:"'IBM Plex Sans', sans-serif"},color:d.global.foregroundDimmer,callback:function(e){return c?"".concat(e).concat(c):e}},min:0}},maintainAspectRatio:!1,responsive:!0,plugins:{tooltip:(0,G._)({},f)}}})};function nD(){var e=(0,ei._)(["\n  fragment ReplAnalyticsTimeSeriesDataPoint on ReplAnalyticsTimeSeriesData {\n    __typename\n    timestamp\n    value\n    count\n    unit\n  }\n"]);return nD=function(){return e},e}function nI(){var e=(0,ei._)(["\n  fragment ReplAnalyticsTimeSeries on ReplAnalyticsTimeSeries {\n    __typename\n    results {\n      ...ReplAnalyticsTimeSeriesDataPoint\n    }\n  }\n  ","\n"]);return nI=function(){return e},e}function nB(){var e=(0,ei._)(["\n  query ReplAnalyticsTimeSeries(\n    $id: String!\n    $input: ReplAnalyticsTimeSeriesInput!\n  ) {\n    repl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsTimeSeries(input: $input) {\n          ... on ReplAnalyticsTimeSeries {\n            ...ReplAnalyticsTimeSeries\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return nB=function(){return e},e}var nG={},nP=(0,eo.Ps)(nD()),nA=(0,eo.Ps)(nI(),nP),nL=(0,eo.Ps)(nB(),nA),nN=function(e){var t,n,r,i=e.start,o=e.end,a=e.timeSeriesFragment,l=e.xAxisLabel,c=e.yAxisLabel;if(0===a.results.length)return(0,g.tZ)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"400px"},children:"No Data Available"});var s={label:(t=a.results)[0].value,unit:(r=null===(n=t[0])||void 0===n?void 0:n.unit)?function(e,t){var n=Object.entries(e).find(function(e){var n=(0,v._)(e,2);return n[0],n[1]===t});if(n)return e[n[0]]}(nT.YL,r):void 0,data:t.map(function(e){return{x:new Date(e.timestamp),y:e.count}})},u=s.label,d=s.unit,f=s.data;return(0,g.tZ)(nR,{data:f,start:i,end:o,label:u,unit:d,xAxisLabel:l,yAxisLabel:c})},nO=function(e){var t=e.data,n=e.start,r=e.hours,i=e.colorFn,o=Array(r).fill(0).map(function(e,t){return(0,nv.Z)(n,t)}),a=t.results.reduce(function(e,t){var n,r=t.timestamp,i=t.value,o=t.count,a=null!==(n=e.get(i))&&void 0!==n?n:new Map;return a.set(r,o),e.set(i,a),e},new Map),l=(0,C._)(a.keys()).map(function(e,t){var n=i(e,t),r=a.get(e);return{label:e,data:o.map(function(e){var t,n=null!==(t=null==r?void 0:r.get(e.toISOString()))&&void 0!==t?t:0;return{x:new Date(e),y:n}}),borderColor:n,backgroundColor:n}});return(0,g.tZ)(ny,{labels:o,datasets:l,maintainAspectRatio:!1})},nU=function(e){var t,n,r,i=e.replId,o=e.title,a=e.metric,l=e.start,c=e.hours,s=e.colorFn,u=(0,v._)((0,b.useState)(void 0),2),d=u[0],f=u[1],h=(t=(0,G._)({},nG,{variables:{id:i,input:{metric:a,start:l,hours:c,deployment:!0}},ssr:!1,onCompleted:function(e){if("Repl"===e.repl.__typename)switch(e.repl.analyticsTimeSeries.__typename){case"TooManyRequestsError":f(Error("Too many requests"));break;case"UserError":case"NotFoundError":f(Error(e.repl.analyticsTimeSeries.message))}}}),ea.a(nL,t)),p=h.data,m=h.loading,y=h.error,w=(null==p?void 0:null===(n=p.repl)||void 0===n?void 0:n.__typename)==="Repl"&&(null===(r=p.repl.analyticsTimeSeries)||void 0===r?void 0:r.__typename)==="ReplAnalyticsTimeSeries"?p.repl.analyticsTimeSeries:void 0;return y&&f(y),(0,g.BX)(R.G,{css:[B.l0.colWithGap(8)],children:[(0,g.tZ)(R.G,{css:[B.l0.flex.row,B.l0.align.center,B.l0.justify.spaceBetween],children:(0,g.tZ)(T.xv,{variant:"subheadDefault",multiline:!1,children:o})}),(0,g.BX)(R.G,{children:[m?(0,g.tZ)(R.G,{css:[B.l0.width("100%"),no,B.l0.borderRadius(),nl.p.backgroundPulse()]}):null,d?(0,g.tZ)(E.E,{text:d.message,colorway:"negative"}):null,w?(0,g.tZ)(R.G,{css:no,children:(0,nT.BB)(a)?(0,g.tZ)(nN,{start:l,end:(0,nv.Z)(l,c),timeSeriesFragment:w}):(0,g.tZ)(nO,{data:w,start:l,hours:c,colorFn:s})}):null]})]})},nX=n(51174),nM=n.n(nX);function nF(){var e=(0,ei._)(["\n  fragment ReplAnalyticsTopListResult on ReplAnalyticsTopList {\n    __typename\n    results {\n      __typename\n      value\n      count\n    }\n  }\n"]);return nF=function(){return e},e}function nW(){var e=(0,ei._)(["\n  query ReplAnalyticsTopList($id: String!, $input: ReplAnalyticsTopInput!) {\n    repl(id: $id) {\n      ... on Repl {\n        __typename\n        id\n        analyticsTopList(input: $input) {\n          ... on ReplAnalyticsTopList {\n            ...ReplAnalyticsTopListResult\n          }\n          ... on NotFoundError {\n            __typename\n            message\n          }\n          ... on UserError {\n            __typename\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return nW=function(){return e},e}var nV={},nH=(0,eo.Ps)(nF()),nz=(0,eo.Ps)(nW(),nH),nj=function(e){var t=e.data,n=e.variant;if(0===t.results.length)return(0,g.tZ)(T.xv,{multiline:!1,children:"No results"});switch(n){case"map":return(0,g.tZ)(nY,{data:t});case"pie":return(0,g.tZ)(nJ,{data:t,devices:!1});case"device-pie":return(0,g.tZ)(nJ,{data:t,devices:!0});case"table":return(0,g.tZ)(nq,{data:t})}},nq=function(e){var t=e.data;return nr.kL.register(nr.qi),(0,g.tZ)(R.G,{children:t.results.map(function(e,t){return(0,g.BX)(R.G,{css:[B.l0.rowWithGap(16),B.l0.py(8),{borderBottom:"1px solid ".concat(B.TV.outlineDimmest)},{"&:last-of-type":{borderBottom:"none"}}],children:[(0,g.tZ)(R.G,{css:[B.l0.flex.grow(1),B.l0.maxWidth("90%")],children:(0,g.tZ)(T.xv,{title:e.value,multiline:!1,children:e.value})}),(0,g.tZ)(R.G,{children:(0,g.tZ)(T.xv,{multiline:!1,children:e.count})})]},t)})})},nJ=function(e){var t=e.data,n=e.devices,r=(0,ni.F)(),i=r.isDarkColorScheme,o=r.values,a=i?B.tX.categorical:B.tX.categorical.reverse(),l=new Map;return n?t.results.forEach(function(e){var t=e.value,n=e.count,r=t.match(/\(.*\)/);if(r&&r.length){var i=r[0].substring(1,r[0].length-1),o=l.get(i)||0;l.set(i,o+n)}else{var a=l.get("Unknown")||0;l.set("Unknown",a+n)}}):t.results.forEach(function(e){var t=e.value,n=e.count,r=t.replace(/ \(.*\)/,""),i=l.get(r)||0;l.set(r,i+n)}),(0,g.tZ)(R.G,{css:no,children:(0,g.tZ)(nc.by,{options:{radius:"90%",maintainAspectRatio:!1,plugins:{tooltip:na()}},data:{labels:(0,C._)(l.keys()),datasets:[{borderWidth:(0,C._)(l.keys()).length>1?1:0,borderColor:o.global.outlineDimmest,data:(0,C._)(l.values()),backgroundColor:Array(l.size).fill(0).map(function(e,t){return a[t%a.length]})}]}})})},nY=function(e){var t=e.data,r=nM()(function(){return Promise.all([n.e(5381),n.e(4096),n.e(8742),n.e(4179)]).then(n.bind(n,24179))},{loadableGenerated:{webpack:function(){return[24179]}},ssr:!1}),i=t.results.map(function(e){return{country:e.value,numHits:e.count}});return(0,g.tZ)(r,{countries:i})},n$=function(e){var t,n,r,i=e.replId,o=e.start,a=e.hours,l=e.metric,c=e.count,s=e.variant,u=void 0===s?"table":s,d=e.expandable,f=(0,nT.CZ)(l),h=(0,v._)((0,b.useState)(void 0),2),p=h[0],m=h[1],y=(0,v._)((0,b.useState)(!1),2),w=y[0],Z=y[1],x=(t=(0,G._)({},nV,{variables:{id:i,input:{metric:l,start:o,hours:a,deployment:!0,count:w?3*c:c}},ssr:!1,onCompleted:function(e){if("Repl"===e.repl.__typename)switch(e.repl.analyticsTopList.__typename){case"UserError":case"NotFoundError":m(Error(e.repl.analyticsTopList.message))}}}),ea.a(nz,t)),C=x.data,k=x.loading,S=x.error;return S&&m(S),(0,g.BX)(R.G,{css:B.l0.colWithGap(8),children:[(0,g.BX)(R.G,{css:B.l0.rowWithGap(8),children:[(0,g.tZ)(T.xv,{variant:"subheadDefault",multiline:!1,children:"device-pie"===u?"Top Devices":"Top ".concat(f)}),void 0!==d&&d?(0,g.tZ)(H.hU,{alt:w?"Collapse list":"Expand list",onClick:function(){return Z(!w)},children:w?(0,g.tZ)(e7.Z,{}):(0,g.tZ)(e9.Z,{})}):null]}),(0,g.BX)(R.G,{children:[k?(0,g.tZ)(R.G,{css:[B.l0.height(80),B.l0.borderRadius(),nl.p.backgroundPulse()]}):null,p?(0,g.tZ)(E.E,{text:p.message,colorway:"negative"}):null,(null==C?void 0:null===(n=C.repl)||void 0===n?void 0:n.__typename)==="Repl"&&(null===(r=C.repl.analyticsTopList)||void 0===r?void 0:r.__typename)==="ReplAnalyticsTopList"?(0,g.tZ)(nj,{variant:u,data:C.repl.analyticsTopList}):null]})]})},nK=n(17601),nQ=n(19349),n0=n(6543),n1=n(34017),n2=[{label:"six hours",key:6},{label:"one day",key:24},{label:"five days",key:120},{label:"one week",key:168},{label:"two weeks",key:336},{label:"thirty days",key:720}],n3={label:"one week",key:168},n4=B.nC.min(600),n8=(0,D.X)({fullWidth:(0,S._)({},n4,{gridColumn:"span 2"})}),n6=(0,D.X)({container:[B.l0.display.grid,B.l0.gap(32),B.l0.pb(32),(0,S._)({},n4,{gridTemplateColumns:"repeat(2, minmax(0, 1fr))"})],fullWidth:n8.fullWidth,map:[n8.fullWidth],pies:[n8.fullWidth,B.l0.flex.column,(0,S._)({gap:32},B.nC.min(480),[B.l0.flex.row,{" > *":{flex:1}}])]}),n5=function(e){var t=e.replId,n=(0,v._)((0,b.useState)(n3),2),r=n[0],i=r.key,o=r.label,a=n[1],l=(0,v._)((0,b.useState)((0,n0.Z)((0,n1.Z)(new Date),i-1)),2),c=l[0],s=l[1],u=(0,nQ.o)("deployment-analytics-dot"),d=u.isDone,f=u.setAsDone,h=(0,n0.Z)((0,n1.Z)(new Date),23),p=(0,ni.F)().values,m=[p.global.redStronger,p.global.redDimmer,p.global.redStrongest,p.global.redDimmest],y=[p.global.orangeDefault,p.global.orangeDimmer,p.global.orangeStronger,p.global.orangeDimmest],w=[p.global.blueDefault,p.global.blueDimmer,p.global.blueStronger,p.global.blueDimmest],Z=[p.global.greenDefault,p.global.greenDimmer,p.global.greenStronger,p.global.greenDimmest];return(0,b.useEffect)(function(){et({context:er.k.Analytics})},[]),(0,b.useEffect)(function(){d||f()},[d,f]),(0,g.tZ)(V,{children:(0,g.BX)(R.G,{css:n6.container,children:[(0,g.tZ)(R.G,{css:n6.fullWidth,children:(0,g.tZ)(nK.ZE,{items:n2,label:"Past ".concat(o),icon:(0,g.tZ)(tg.Z,{}),onAction:function(e){var t,n="string"==typeof e?parseInt(e,10):e;a(null!==(t=n2.find(function(e){return e.key===n}))&&void 0!==t?t:n3),s((0,n0.Z)((0,n1.Z)(new Date),n-1))},cssProps:[B.l0.width("fit-content")],children:n2.map(function(e){return(0,g.tZ)(nK.ck,{children:(0,g.tZ)(R.G,{css:[B.l0.rowWithGap(8),B.l0.align.center,B.l0.color.foregroundDefault],children:(0,g.tZ)(T.xv,{multiline:!1,children:e.label})})},e.key)})})}),(0,g.tZ)(R.G,{css:n6.fullWidth,children:(0,g.tZ)(nE,{replId:t,start:c,hours:i})}),(0,g.tZ)(n$,{replId:t,metric:nT.Pc.Url,start:c,hours:i,count:4,expandable:!0}),(0,g.tZ)(n$,{replId:t,metric:nT.Pc.Referrer,start:c,hours:i,count:4,expandable:!0}),(0,g.tZ)(nU,{replId:t,title:"HTTP Statuses (24h)",metric:nT.RH.Statuses,start:h,hours:24,colorFn:function(e,t){var n=Number(e);return n<300?Z[t%Z.length]:n<400?w[t%w.length]:n<500?y[t%y.length]:m[t%m.length]}}),(0,g.tZ)(nm,{replId:t,start:c,hours:i}),(0,g.BX)(R.G,{css:n6.pies,children:[(0,g.tZ)(n$,{replId:t,metric:nT.Pc.Browser,start:c,hours:i,count:100,variant:"pie"}),(0,g.tZ)(n$,{replId:t,metric:nT.Pc.Browser,start:c,hours:i,count:100,variant:"device-pie"})]}),(0,g.tZ)(R.G,{css:n6.map,children:(0,g.tZ)(n$,{replId:t,metric:nT.Pc.Country,start:c,hours:i,count:100,variant:"map"})})]})})},n7=(0,D.X)({line:{width:1,position:"absolute",left:3},circlePast:{position:"absolute",top:10,left:1,width:5,height:5,borderRadius:"100%",opacity:.5}}),n9=(0,D.X)({container:{width:7,position:"relative"},linePast:[n7.line,{backgroundColor:B.TV.outlineDimmest,top:15,bottom:-10}],linePresent:[n7.line,{backgroundImage:"linear-gradient(to top, ".concat(B.TV.outlineDimmest,", ").concat(B.TV.outlineDimmer,")"),top:27,bottom:-10}],lineFuture:[n7.line,{borderRight:"1px dashed "+B.TV.outlineDimmer,top:23,bottom:-20}],lineFutureFailClosed:[n7.line,{backgroundColor:B.TV.outlineDimmest,top:19,bottom:-20}],lineFutureFailOpen:[n7.line,{borderRight:"1px dashed "+B.TV.outlineDimmer,top:22,bottom:-18}],circlePastGreen:[n7.circlePast,B.l0.backgroundColor.accentPositiveDefault],circlePastRed:[n7.circlePast,B.l0.backgroundColor.accentNegativeDefault],circlePastGray:[n7.circlePast,B.l0.backgroundColor.outlineDimmer],circlePresent:[B.l0.backgroundColor.accentPrimaryStronger,{position:"absolute",top:20,left:0,width:7,height:7,borderRadius:"100%"}],circleFuture:{position:"absolute",top:12,left:-1,width:9,height:9},circleFutureFailClosed:[B.l0.backgroundColor.accentNegativeDefault,{position:"absolute",top:14,left:1,width:5,height:5,borderRadius:"100%",opacity:.6}]});function re(e){var t,n;switch(e.type){case"pastSuccess":t=n9.linePast,n=(0,g.tZ)(R.G,{css:n9.circlePastGreen});break;case"pastFail":t=n9.linePast,n=(0,g.tZ)(R.G,{css:n9.circlePastRed});break;case"pastNeutral":t=n9.linePast,n=(0,g.tZ)(R.G,{css:n9.circlePastGray});break;case"present":t=n9.linePresent,n=(0,g.tZ)(R.G,{css:n9.circlePresent});break;case"future":t=n9.lineFuture,n=(0,g.tZ)("svg",{viewBox:"0 0 9 9",css:n9.circleFuture,children:(0,g.tZ)("circle",{cx:4.5,cy:4.5,r:4,fill:"none",stroke:B.TV.outlineStrongest,strokeDasharray:"2 1"})});break;case"futureFailClosed":t=n9.lineFutureFailClosed,n=(0,g.tZ)(R.G,{css:n9.circleFutureFailClosed});break;case"futureFailOpen":t=n9.lineFutureFailOpen,n=null}return(0,g.BX)(R.G,{css:n9.container,children:[(0,g.tZ)(R.G,{css:t,"data-timeline-line":!0}),n]})}var rt=n(90169),rn=n(61989),rr=n(14548),ri=n(62881),ro=n(56738),ra=n(99677),rl=n(56763);function rc(e){var t=e.currentStatus,n=e.provider,r=e.logs,i=e.viewBuildLogs,o=e.debugSummary,a=e.openFile,l=e.onViewBuildLogs,c=e.onViewApplicationLogs;if((0,w.BU)().hasDebugSummariesAuthorization&&o){var s=t===eh.Fe.Building?"Build failed":"Promotion failed";return(0,g.tZ)(rb,{title:s,debugSummary:o,view:er.k.DeploymentInProgress,openFile:a})}return t===eh.Fe.Building?(0,g.tZ)(rm,{provider:n,logs:r,openFile:a,viewBuildLogs:i,onViewBuildLogs:l}):t===eh.Fe.Promoting?(0,g.tZ)(rp,{provider:n,logs:r,openFile:a,viewBuildLogs:i,onViewBuildLogs:l,onViewApplicationLogs:c}):null}function rs(e){var t=e.currentStatus,n=e.provider,r=e.debugSummary,i=e.openFile,o=e.onViewApplicationLogs;return(0,w.BU)().hasDebugSummariesAuthorization&&r?(0,g.tZ)(rb,{title:"Deployment failed",debugSummary:r,view:"deploy_history_logs",openFile:i}):t===eh.Fe.Building?(0,g.tZ)(rm,{provider:n,openFile:i}):t===eh.Fe.Promoting?(0,g.tZ)(rp,{provider:n,openFile:i,onViewApplicationLogs:o}):null}var ru=(0,D.X)({self:[B.l0.borderRadius(4),B.l0.overflow("hidden"),B.l0.border({color:B.TV.outlineDimmer}),B.l0.mb(6)]});function rd(e){var t=e.title,n=e.debugSummary,r=e.onViewBuildLogs,i=e.openFile;return(0,g.tZ)(R.G,{css:ru.self,children:(0,g.tZ)(rb,{title:t,debugSummary:n,view:er.k.Deployment,onViewBuildLogs:r,viewBuildLogsIcon:(0,g.tZ)(eb.Z,{}),openFile:i})})}var rf=(0,D.X)({errorContainer:[B.l0.p(12),B.l0.colWithGap(12)],warning:[B.l0.colWithGap(8)],warningTitle:[B.l0.rowWithGap(8),B.l0.align.center],link:{color:B.TV.foregroundDefault,textDecoration:"underline",":hover":{color:B.TV.accentPrimaryStronger}},xtermContainer:[B.l0.display.flex,B.l0.pt(12),B.l0.pl(16),B.l0.overflow("hidden"),B.l0.borderRadius(4,4,0,0)],xterm:[B.l0.width("100%"),B.l0.maxWidth("100%"),B.l0.height(200)],xtermButton:B.l0.borderRadius(0,0,4,4),list:[{listStyle:"inside"}],listCta:B.l0.display.inlineFlex});function rh(e){var t=e.title,n=e.description,r=e.logs,i=e.viewBuildLogs,o=e.onViewBuildLogs,a=e.openFile,l=(0,eW.f)(),c=(0,w.XZ)(),s=(0,v._)((0,ro.Z)({openFile:a,listFiles:c.listFiles}),2),u=s[0],d=s[1],f=(0,b.useRef)(r?r.slice(-5):[]);return(0,b.useEffect)(function(){f.current.length&&f.current.forEach(function(e){null==u||u.write(e)})},[u]),(0,g.BX)(rr.Tg,{elevated:!0,css:rf.errorContainer,children:[(0,g.BX)(R.G,{css:rf.warning,children:[(0,g.BX)(R.G,{css:rf.warningTitle,children:[(0,g.tZ)(I.Z,{color:B.TV.accentNegativeStronger}),(0,g.tZ)(T.xv,{multiline:!1,children:t})]}),(0,g.tZ)(T.xv,{children:n})]}),void 0===i||i?null:(0,g.BX)(R.G,{children:[(0,g.tZ)(R.G,{css:rf.xtermContainer,style:{backgroundColor:null==l?void 0:l.background},children:(0,g.tZ)(R.K.div,{css:rf.xterm,ref:d})}),(0,g.tZ)(e6.zx,{text:"View all",iconLeft:(0,g.tZ)(e9.Z,{}),onClick:function(){return null==o?void 0:o()},css:rf.xtermButton})]})]})}function rp(e){var t=(0,w.MV)();return(0,g.tZ)(rh,(0,G._)({title:"Your app failed to promote",description:(0,g.BX)(g.HY,{children:["Common issues for promote stage errors can be an error occurring while trying to run your run command, your application exiting unexpectedly, an error on your app server or a provisioning issue.",(0,g.tZ)("br",{}),(0,g.tZ)("br",{}),"Ways to debug:",(0,g.BX)("ul",{css:rf.list,children:[t?(0,g.tZ)("li",{children:"This promotion may also be failing due to VNC incompatibilities."}):null,(0,g.tZ)("li",{children:"make sure your repl runs in the Workspace"}),(0,g.BX)("li",{children:["view our"," ",(0,g.tZ)("a",{href:"https://docs.replit.com/cloud-services/deployments/troubleshooting",target:"_blank",css:rf.link,onClick:function(){return et({context:"troubleshooting_doc"})},children:"troubleshooting tips"})]}),e.provider!==eh.r4.Static&&e.onViewApplicationLogs?(0,g.BX)("li",{children:["look for errors in your application's server logs"," ",(0,g.tZ)(e6.zx,{text:"Logs",size:"small",iconLeft:(0,g.tZ)(eb.Z,{}),onClick:e.onViewApplicationLogs,css:B.l0.display.inlineFlex})," "]}):null,(0,g.tZ)("li",{children:"look for errors in your deploy logs"})]})]})},e))}function rm(e){var t=(0,w.MV)();return(0,g.tZ)(rh,(0,G._)({title:"Your app failed to build",description:(0,g.BX)(g.HY,{children:["Common issues for build stage errors can be an error occurring while trying to run your build command or an compilation issue with your application code.",(0,g.tZ)("br",{}),(0,g.tZ)("br",{}),"Ways to debug:",(0,g.BX)("ul",{css:rf.list,children:[t?(0,g.tZ)("li",{children:"This promotion may also be failing due to VNC incompatibilities."}):null,(0,g.tZ)("li",{children:"make sure your repl runs in the Workspace"}),(0,g.BX)("li",{children:["view our"," ",(0,g.tZ)("a",{href:"https://docs.replit.com/cloud-services/deployments/troubleshooting",target:"_blank",css:rf.link,onClick:function(){return et({context:"troubleshooting_doc"})},children:"troubleshooting tips"})]}),(0,g.tZ)("li",{children:"look for errors in your deploy logs"})]})]})},e))}function rv(e){return(0,g.tZ)(rh,(0,G._)({title:"This build's deploy logs have expired",description:(0,g.tZ)(g.HY,{children:"No information was found for this build. Deploy logs expire after 30 days."})},e))}var rg=[B.l0.cursor.pointer,B.l0.reset.button,B.l0.color.foregroundDimmest,B.l0.focusRing,B.l0.hover(B.l0.color.foregroundDefault),{lineHeight:1.2,":not([disabled])":{cursor:"pointer"}}],ry=(0,D.X)({errorsSection:[B.l0.colWithGap(4),B.l0.p(8),B.l0.colorMixBg(B.TV.accentNegativeDimmest,"transparent",.3),B.l0.color.accentNegativeStrongest],errorsHeader:[B.l0.rowWithGap(12),B.l0.align.center,B.l0.justify.spaceBetween],experimentalTag:[B.l0.rowWithGap(4),B.l0.align.center,B.l0.mr(12),B.l0.color.blurpleStrongest],errorsSectionTitleText:[B.l0.color.foregroundDefault],loading:[B.l0.rowWithGap(4),B.l0.align.center],errorsList:[B.l0.display.flex,B.l0.colWithGap(4),B.l0.pt(6),B.l0.pl(24),{listStyleType:"disc"}],suggestionsSection:[B.l0.colorMixBg(B.TV.blurpleDimmest,"transparent",.15),B.l0.border({direction:"top",color:B.TV.outlineDimmer})],aiSuggestions:[B.l0.p(8),B.l0.colWithGap(8)],aiSuggestionsTitle:[B.l0.rowWithGap(8),B.l0.color.blurpleStrongest,B.l0.align.center],aiSuggestionsList:B.l0.pl(24),divider:B.l0.backgroundColor.outlineDimmer,aiChat:[B.l0.p(8),B.l0.color.foregroundDimmer,{a:{color:"inherit",textDecoration:"underline"}}],headerRight:[B.l0.rowWithGap(0)],textButton:[rg]});function rb(e){var t=e.title,n=e.debugSummary,r=e.view,i=e.onViewBuildLogs,o=e.viewingBuildLogs,a=e.viewBuildLogsIcon,l=e.openFile,c=(0,rt.nC)(n),s=c.loading,u=c.debugResult,d=c.error,f=(0,w.XZ)().listFiles,h=(0,v._)((0,b.useState)([]),2),p=h[0],m=h[1],y=(0,t6.Z)(),Z=(0,w.hn)(),x=(0,b.useRef)(!1);return(0,b.useEffect)(function(){Z&&u&&!x.current&&(x.current=!0,en("viewed",{view:r,debugSummary:n,debugResult:u,replId:y,deploymentId:Z}),u.suggestions.some(function(e){return!!rw(e)})&&f().then(function(e){e.files&&m(e.files)}))},[u,r,n,y,Z,f]),(0,g.BX)(rr.Tg,{elevated:!0,children:[(0,g.BX)(R.G,{css:ry.errorsSection,children:[(0,g.BX)(R.G,{css:ry.errorsHeader,children:[(0,g.BX)(R.G,{css:rf.warningTitle,children:[(0,g.tZ)(I.Z,{color:B.TV.accentNegativeStronger}),(0,g.tZ)(T.xv,{css:ry.errorsSectionTitleText,multiline:!1,children:t})]}),(0,g.BX)(R.G,{css:ry.headerRight,children:[(0,g.BX)(R.G,{css:ry.experimentalTag,children:[(0,g.tZ)(T.xv,{variant:"small",children:"Experimental"}),(0,g.tZ)(ra.Z,{})]}),"function"==typeof i?(0,g.tZ)(R.G,{children:(0,g.BX)("button",{css:ry.textButton,onClick:i,children:[o?"Hide":"View"," logs"," ",(0,g.tZ)(rZ,{viewingBuildLogs:o,viewBuildLogsIcon:a})]})}):null]})]}),(0,g.BX)(T.xv,{children:[s?(0,g.BX)(R.G,{css:ry.loading,children:[(0,g.tZ)(j.Z,{}),(0,g.tZ)(T.xv,{children:"Analyzing error, generating suggestions..."})]}):(0,g.tZ)(g.HY,{children:u?(0,g.BX)(g.HY,{children:[(0,g.tZ)(T.xv,{children:"Your deployment attempt had the following errors:"}),(0,g.tZ)("ul",{css:ry.errorsList,children:u.errors.map(function(e){return(0,g.tZ)("li",{children:e},e)})})]}):null}),d?(0,g.tZ)(T.xv,{children:d}):null]})]}),!s&&u?(0,g.tZ)(R.G,{css:ry.suggestionsSection,children:(0,g.BX)(R.G,{css:ry.aiSuggestions,children:[(0,g.BX)(R.G,{css:ry.aiSuggestionsTitle,children:[(0,g.tZ)(ri.Z,{}),(0,g.tZ)(T.xv,{multiline:!1,children:"Replit AI suggestions"})]}),(0,g.tZ)("ol",{css:ry.aiSuggestionsList,children:u.suggestions.map(function(e){return(0,g.tZ)(rC,{suggestion:e,files:p,openFile:l},e.name)})})]})}):null]})}function rw(e){var t,n,r,i;return"File"in e&&(null===(t=e.File)||void 0===t?void 0:t.file)!=="null"&&(null===(n=e.File)||void 0===n?void 0:n.file)!==""?(null===(r=e.File)||void 0===r?void 0:r.file.replace("./",""))||void 0:"file"in e&&"null"!==e.file&&""!==e.file&&(null===(i=e.file)||void 0===i?void 0:i.replace("./",""))||void 0}function rZ(e){var t=e.viewingBuildLogs;return e.viewBuildLogsIcon||(t?(0,g.tZ)(rl.Z,{}):(0,g.tZ)(tg.Z,{}))}var rx=(0,D.X)({self:{"[data-accordion-header]":[B.l0.align.start,B.l0.flex.growAndShrink(1),B.l0.rowWithGap(4)]},headerInner:[B.l0.flex.growAndShrink(1),B.l0.align.baseline,B.l0.rowWithGap(4)],description:[rg,B.l0.textAlign.left,B.l0.color.foregroundDimmer,B.l0.rowWithGap(8),B.l0.flex.growAndShrink(1),B.l0.justify.spaceBetween],file:[B.l0.color.foregroundDimmest,B.l0.fontSize("small")],body:[B.l0.border(),B.l0.borderRadius(),B.l0.mt(4),B.l0.mb(8),B.l0.overflow("hidden"),B.l0.font.code,B.l0.fontSize("small"),{lineHeight:B.TV.lineHeightSmall}],before:[B.l0.color.accentNegativeStrongest,B.l0.colorMixBg(B.TV.accentNegativeDimmest,"transparent",.3),B.l0.px(6),B.l0.py(2)],after:[B.l0.color.accentPositiveStrongest,B.l0.colorMixBg(B.TV.accentPositiveDimmest,"transparent",.3),B.l0.px(6)],fileLinkButton:[rg,B.l0.fontSize("small")]});function rC(e){var t=e.suggestion,n=e.files,r=e.openFile,i=(0,b.useRef)(rw(t)),o=(0,v._)((0,b.useState)(),2),a=o[0],l=o[1];return(0,b.useEffect)(function(){if(i.current&&!a){var e=!0,t=!1,r=void 0;try{for(var o,c=n[Symbol.iterator]();!(e=(o=c.next()).done);e=!0)if(o.value===i.current){l(i.current);return}}catch(e){t=!0,r=e}finally{try{e||null==c.return||c.return()}finally{if(t)throw r}}}},[n,a]),(0,g.tZ)("li",{css:rx.self,children:(0,g.tZ)(rn.Q,{toggleOn:"chevron",chevron:"none",headerContent:function(e){var n=e.isExpanded,i=e.toggle;return(0,g.BX)(g.HY,{children:[(0,g.BX)(R.G,{css:rx.headerInner,children:[(0,g.BX)("button",{css:rx.description,onClick:i,children:[(0,g.tZ)(T.xv,{maxLines:n?void 0:1,style:{color:"inherit"},children:t.description})," "]}),a?(0,g.tZ)("button",{css:rx.fileLinkButton,onClick:function(e){e.stopPropagation(),r({path:a})},children:a}):null]}),(0,g.tZ)(H.hU,{alt:"Show suggestion",onClick:i,children:n?(0,g.tZ)(rl.Z,{}):(0,g.tZ)(tg.Z,{})})]})},headerProps:{"data-accordion-header":""},children:(0,g.BX)(R.G,{css:rx.body,children:[(0,g.tZ)(R.G,{css:rx.before,children:(0,g.tZ)("pre",{children:t.before})}),(0,g.tZ)(R.G,{css:rx.after,children:(0,g.tZ)("pre",{children:t.after})})]})})})}var rk=n(17202),rS=n(379),r_=n(27840),rE=n(97420),rT=function(e){var t=e.stage,n=e.activeStage;return t===e.erroredStage?(0,g.tZ)(I.Z,{alt:"error"}):t<n?(0,g.tZ)(r_.Z,{alt:"success"}):t===n?(0,g.tZ)(j.Z,{alt:"current"}):(0,g.tZ)(t7.Z,{alt:"waiting"})},rR=function(e){var t=e.stage,n=e.activeStage,r=e.erroredStage;return void 0===n?null:t===r?"negative":t<n?"positive":t===n?"primary":null},rD=function(e){var t,n=e.stage,r=e.totalStagesWithTitle,i=e.activeStage,o=e.text,a=e.erroredStage,l=void 0!==i;return(0,g.tZ)(b.Fragment,{children:(0,g.tZ)(rS.D,{text:l?o:"",colorway:null!==(t=rR({stage:n,activeStage:i,erroredStage:a}))&&void 0!==t?t:void 0,variant:"filled",css:[l&&i<=n&&!a?nl.p.foregroundPulse():{},B.l0.border({color:rE.TV.backgroundDefault}),B.l0.overflow("hidden"),(0,S._)({position:"relative",flex:1,height:26,zIndex:r-n,":first-of-type":{paddingLeft:6,paddingRight:6},":not(:first-of-type)":{paddingLeft:24},":not(:last-of-type)":{marginRight:-24}," span":B.l0.display.none},B.nC.min(400),{" span":B.l0.display.flex,":first-of-type":{paddingLeft:16,paddingRight:0}})],iconRight:l?(0,g.tZ)(rT,{stage:n,activeStage:i,erroredStage:a}):void 0})},l&&i<=n&&!a?1:0)};function rI(){var e=(0,ei._)(["\n  query HostingDeployActionHistory(\n    $input: HostingBuildDeployActionHistoryInput!\n  ) {\n    hostingBuildDeployActionHistory(input: $input) {\n      ... on HostingBuildDeployActionHistoryResults {\n        results {\n          ... on HostingBuildDeployLogAction {\n            log\n          }\n          ... on HostingBuildDeployStatusAction {\n            status\n            message\n          }\n        }\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n"]);return rI=function(){return e},e}var rB={},rG=(0,eo.Ps)(rI()),rP=[{id:0,title:"Provision",statusType:eh.Fe.Pending},{id:1,title:"Build",statusType:eh.Fe.Building},{id:2,title:"Bundle",statusType:eh.Fe.Running},{id:3,title:"Promote",statusType:eh.Fe.Promoting},{id:4,statusType:eh.Fe.Success}],rA=rP.filter(function(e){return"title"in e}),rL=function(e){return rP.find(function(t){return t.statusType===e})},rN=(0,D.X)({base:{borderRadius:B.TV.borderRadiusDefault,paddingLeft:6,paddingRight:6,height:24},disabled:{pointerEvents:"none",color:B.TV.greyDefault}}),rO=[B.l0.borderRadius(),{border:"1px solid var(--outline-dimmest)"}],rU=(0,D.X)({container:rO,top:[B.l0.colWithGap(12),B.l0.p(16),B.l0.pt(12)],header:[B.l0.rowWithGap(8),B.l0.justify.spaceBetween,B.l0.width("100%")],headerLeft:[B.l0.rowWithGap(8),B.l0.align.baseline,B.l0.flex.shrink(1)],headerRight:[B.l0.rowWithGap(6),B.l0.justify.end],started:[B.l0.rowWithGap(6),B.l0.flex.growAndShrink(1),B.l0.justify.end,B.l0.color.foregroundDimmest],cancel:[rN.base,{'&[data-cancelable="true"]':{opacity:1,width:"auto"},'&[data-cancelable="false"]':{opacity:0,width:0}}],stages:[B.l0.flex.row,B.l0.flex.grow(1),{zIndex:0}],bottom:[B.l0.borderRadius(0,0,4,4),B.l0.overflow("hidden")],logsOpen:[B.l0.overflow("hidden"),B.l0.height("auto")],logsClosed:[B.l0.overflow("hidden"),B.l0.height(0)],xtermContainer:[B.l0.display.flex,B.l0.pt(12),B.l0.pl(16),B.l0.overflow("hidden")],xterm:[B.l0.width("100%"),B.l0.maxWidth("100%"),B.l0.height(340)],textButton:[B.l0.cursor.pointer,B.l0.reset.button,B.l0.color.foregroundDimmest,B.l0.focusRing,B.l0.hover(B.l0.color.foregroundDefault),{lineHeight:1.2,":not([disabled])":{cursor:"pointer"}}]}),rX=function(e){return(0,g.BX)(R.G,{css:rU.top,children:[(0,g.BX)(R.G,{css:rU.header,children:[(0,g.BX)(R.G,{css:rU.headerLeft,children:[(0,g.tZ)(T.xv,{variant:"subheadDefault",multiline:!1,children:"Deploying"}),e.timeStarted&&e.userDisplayName?(0,g.BX)(T.xv,{css:rU.started,multiline:!1,maxLines:1,children:["Started ".concat((0,rk.Z)(new Date(e.timeStarted),Date.now(),{addSuffix:!0})," by "),(0,g.tZ)("span",{children:e.userDisplayName})]}):null,(0,g.tZ)(e6.zx,{size:"small",text:"Cancel",css:rU.cancel,onClick:e.onCancel,iconRight:e.isCanceling?(0,g.tZ)(j.Z,{}):void 0,disabled:e.isCanceling,"data-cancelable":e.onCancel?"true":"false"})]}),(0,g.tZ)(R.G,{css:rU.headerRight,children:e.onViewBuildLogs?(0,g.BX)("button",{css:rU.textButton,onClick:e.onViewBuildLogs,children:[e.viewBuildLogs?"Hide":"View"," logs"," ",e.viewBuildLogs?(0,g.tZ)(rl.Z,{}):(0,g.tZ)(tg.Z,{})]}):null})]}),(0,g.tZ)(R.G,{css:rU.stages,children:rA.map(function(t){var n=t.id,r=t.title;return(0,g.tZ)(rD,{stage:n,totalStagesWithTitle:rA.length,text:r,activeStage:e.activeStage,erroredStage:e.erroredStage},n)})})]})},rM=function(e){return(0,w.kW)()===Z.z.Preparing?(0,g.tZ)(R.G,{css:rU.container,children:(0,g.tZ)(rX,{})}):(0,g.tZ)(rF,(0,G._)({},e))},rF=function(e){var t,n,r,i,o,a,l,c,s,u,d,f,h,p,m=e.initialBuild,y=e.viewBuildLogsOnLoad,Z=e.onViewLogs,S=e.onCanceled,_=e.onError,E=e.openFile,T=(0,w.rm)(),D=(0,w.pn)(),I=D?{id:D.id,status:D.status,provider:D.provider,timeStarted:D.timeCreated,userDisplayName:D.user.displayName,debugSummary:D.debugSummary}:void 0,B=(0,b.useRef)(m||I),P=(t={skip:!(null===(i=B.current)||void 0===i?void 0:i.id),variables:{input:{buildId:null!==(p=null===(o=B.current)||void 0===o?void 0:o.id)&&void 0!==p?p:""}},fetchPolicy:"network-only",ssr:!1,onCompleted:function(e){if(null==e?void 0:e.hostingBuildDeployActionHistory)switch(e.hostingBuildDeployActionHistory.__typename){case"NotFoundError":break;case"UnauthorizedError":_(e.hostingBuildDeployActionHistory.message);break;case"HostingBuildDeployActionHistoryResults":var t=e.hostingBuildDeployActionHistory.results;if(t&&t.length>0){var n=[],r=[],i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;switch(s.__typename){case"HostingBuildDeployLogAction":n.push(s.log);break;case"HostingBuildDeployStatusAction":r.push(s)}}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}er({type:"setHistory",payload:n});var u=!0,d=!1,f=void 0;try{for(var h,p=r[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var m=h.value;ei(m.status,m.debugSummary)}}catch(e){d=!0,f=e}finally{try{u||null==p.return||p.return()}finally{if(d)throw f}}}break;default:_("Unexpected typename.")}},onError:function(e){_(e.message)}},n=(0,G._)({},rB,t),ea.a(rG,n)),A=P.loading,L=P.refetch;(0,w.U)(function(e){switch(e.__typename){case"HostingBuildDeployLogAction":er({type:"addLog",payload:e.log});break;case"HostingBuildDeployStatusAction":ei(e.status,e.debugSummary)}});var N=(0,v._)((0,b.useState)(B.current?null===(a=rL(B.current.status))||void 0===a?void 0:a.id:void 0),2),O=N[0],U=N[1],X=(0,v._)((0,b.useState)((null===(l=B.current)||void 0===l?void 0:l.status)==="failed"?null===(c=rL(null===(s=B.current)||void 0===s?void 0:s.status))||void 0===c?void 0:c.id:void 0),2),M=X[0],F=X[1],W=(0,v._)((0,b.useState)((null===(u=B.current)||void 0===u?void 0:u.debugSummary)||void 0),2),V=W[0],H=W[1],z=(0,v._)((0,b.useState)(!1),2),j=z[0],q=z[1],J=(0,w.XZ)(),Y=(0,v._)((0,ro.Z)({openFile:E,listFiles:J.listFiles}),2),$=Y[0],K=Y[1],Q=(0,eW.f)(),ee=(0,v._)((0,b.useReducer)(function(e,t){switch(t.type){case"setHistory":return $&&$.clear(),{allLogs:(0,C._)(t.payload).concat((0,C._)(e.allLogs))};case"addLog":return{allLogs:(0,C._)(e.allLogs).concat([t.payload]),recentLogs:[t.payload]};case"refetchLogs":return $&&$.clear(),A||L(),{allLogs:[]}}},{allLogs:[]}),2),en=ee[0],er=ee[1],ei=function(e,t){if(e===eh.Fe.Failed)F(O),t&&H(t);else{var n=rL(e);if(!n)return;U(n.id)}},eo=(r=(0,x._)(function(){return(0,k.Jh)(this,function(e){switch(e.label){case 0:return q(!0),[4,T()];case 1:return e.sent(),S(),[2]}})}),function(){return r.apply(this,arguments)}),el=(0,v._)((0,b.useState)(y||!1),2),ec=el[0],es=el[1],eu=function(){es(!ec),ec||et({context:"deploy_progress_logs"})};(0,b.useEffect)(function(){et({context:"deploy_progress"})},[]),(0,b.useEffect)(function(){var e;(null===(e=B.current)||void 0===e?void 0:e.id)&&D&&D.id!==B.current.id&&(B.current={id:D.id,status:D.status,provider:D.provider,timeStarted:D.timeCreated,userDisplayName:D.user.displayName,debugSummary:D.debugSummary},U(void 0),F(void 0),er({type:"refetchLogs"}))},[D,null===(d=B.current)||void 0===d?void 0:d.id,L]),(0,b.useEffect)(function(){var e;void 0!==O&&(null===(e=B.current)||void 0===e?void 0:e.status)==="failed"&&F(O)},[O,null===(f=B.current)||void 0===f?void 0:f.status]),(0,b.useEffect)(function(){if($){if(en.recentLogs){en.recentLogs.forEach(function(e){return $.write(e)});return}en.allLogs.forEach(function(e){return $.write(e)})}},[en,$]);var ed=null===(h=rP.find(function(e){return e.id===O}))||void 0===h?void 0:h.statusType,ef=ed!==eh.Fe.Success&&!M;return B.current?(0,g.BX)(R.G,{css:rU.container,children:[(0,g.tZ)(rX,{onCancel:ef?eo:void 0,isCanceling:j,onViewBuildLogs:eu,viewBuildLogs:ec,timeStarted:B.current.timeStarted,userDisplayName:B.current.userDisplayName,activeStage:O,erroredStage:M}),(0,g.BX)(R.G,{css:rU.bottom,children:[(0,g.BX)(R.G,{css:ec?rU.logsOpen:rU.logsClosed,children:[(0,g.tZ)(ts.R,{}),(0,g.tZ)(R.G,{css:rU.xtermContainer,style:{backgroundColor:null==Q?void 0:Q.background},children:(0,g.tZ)(R.K.div,{css:rU.xterm,ref:K})})]}),M&&ed?(0,g.BX)(g.HY,{children:[(0,g.tZ)(ts.R,{}),(0,g.tZ)(rc,{currentStatus:ed,provider:B.current.provider,debugSummary:V,logs:en.allLogs,viewBuildLogs:ec,openFile:E,onViewBuildLogs:eu,onViewApplicationLogs:Z})]}):null]})]}):null},rW=n(66177),rV=n(82549),rH=n(28393);(s||(s={})).Current="current";var rz=(0,S._)({},"current",{icon:(0,g.tZ)(function(e){var t=e.color;return(0,g.tZ)(R.G,{css:[B.l0.align.center,B.l0.rowWithGap(8),{textTransform:"capitalize"}],children:(0,g.tZ)(R.G,{tag:"span",css:[B.l0.width("8px"),B.l0.height("8px"),B.l0.borderRadius("full"),{backgroundColor:t,boxShadow:"0 0 12px ".concat(t)}]})})},{color:B.TV.blueStronger}),text:"Current deployment"}),rj=R.K.div,rq=function(e){var t=e.activityLogItem.type,n=(0,v._)((0,b.useState)(!1),2),r=n[0],i=n[1],o=(0,v._)((0,b.useState)(!1),2),a=o[0],l=o[1],c=(0,b.useRef)(!1);(0,b.useEffect)(function(){c.current=!0;var e=setTimeout(function(){l(r)},200);return function(){clearTimeout(e)}},[r]);var s=t in rz&&rz[t];if(!s)return null;var u=s.icon,d=s.text;return(0,g.tZ)(R.G,{css:[B.l0.p(8)],onMouseEnter:function(){return i(!0)},onMouseLeave:function(){return i(!1)},children:(0,g.BX)(rH.Z,{isOpen:a,onClickOutside:function(){return l(!1)},padding:8,children:[(0,g.tZ)(rj,{css:B.l0.cursor.pointer,children:u}),(0,g.tZ)(R.G,{css:[B.l0.maxWidth(240)],children:(0,g.tZ)(T.xv,{children:d})})]})})},rJ=n(39537);function rY(){var e=(0,ei._)(["\n  fragment HostingActivityLogBuild on HostingBuild {\n    id\n    status\n    hasDeployLogs\n    provider\n    timeCreated\n    user {\n      id\n      displayName\n    }\n    debugSummary {\n      ...BuildDebugSummary\n    }\n  }\n  ","\n"]);return rY=function(){return e},e}function r$(){var e=(0,ei._)(["\n  fragment HostingActivityLogLine2 on HostingActivityLog {\n    id\n    build {\n      ...HostingActivityLogBuild\n    }\n    type\n    user {\n      id\n      displayName\n    }\n    timeCreated\n  }\n  ","\n"]);return r$=function(){return e},e}function rK(){var e=(0,ei._)(["\n  query HostingDeploymentActivityLogs2(\n    $replId: String!\n    $after: String\n    $count: Int\n  ) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        hostingDeployment {\n          ... on HostingDeployment {\n            id\n            currentBuild {\n              id\n            }\n            activityLogs(after: $after, count: $count) {\n              items {\n                ...HostingActivityLogLine2\n              }\n              pageInfo {\n                hasNextPage\n                nextCursor\n              }\n            }\n          }\n          ... on Error {\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return rK=function(){return e},e}function rQ(){var e=(0,ei._)(["\n  query HostingActivityLogBuildHistory(\n    $input: HostingBuildDeployActionHistoryInput!\n  ) {\n    hostingBuildDeployActionHistory(input: $input) {\n      ... on HostingBuildDeployActionHistoryResults {\n        results {\n          ... on HostingBuildDeployStatusAction {\n            status\n            message\n          }\n          ... on HostingBuildDeployLogAction {\n            log\n          }\n        }\n      }\n    }\n  }\n"]);return rQ=function(){return e},e}var r0={},r1=(0,eo.Ps)(rY(),rJ.Si),r2=(0,eo.Ps)(r$(),r1),r3=(0,eo.Ps)(rK(),r2),r4=(0,eo.Ps)(rQ()),r8=n(23788),r6=function(e){var t=e.build,n=t.id.slice(0,8),r=(0,v._)((0,b.useState)(!1),2),i=r[0],o=r[1],a=(0,v._)((0,b.useState)(!1),2),l=a[0],c=a[1],s=(0,b.useRef)(!1);return(0,b.useEffect)(function(){s.current=!0;var e=setTimeout(function(){c(i)},200);return function(){clearTimeout(e)}},[i]),(0,g.tZ)("span",{onMouseEnter:function(){return o(!0)},onMouseLeave:function(){return o(!1)},children:(0,g.BX)(rH.Z,{isOpen:l,onClickOutside:function(){return c(!1)},padding:8,children:[(0,g.tZ)("span",{css:[eN.gU.listItem,B.l0.display.inlineBlock,B.l0.px(2),B.l0.py(0),B.l0.borderRadius(4)],children:n}),(0,g.tZ)(R.G,{css:[B.l0.maxWidth(260)],children:(0,g.tZ)(T.xv,{variant:"small",children:t.id})})]})})},r5=(u={},(0,S._)(u,r8.dD.Deploy,function(e){return(0,g.BX)(g.HY,{children:["deployed ",(0,g.tZ)(r6,{build:e})]})}),(0,S._)(u,r8.dD.Rollback,function(e){return(0,g.BX)(g.HY,{children:["rolled back ",(0,g.tZ)(r6,{build:e})]})}),(0,S._)(u,r8.dD.Fail,function(e){return(0,g.BX)(g.HY,{children:["failed to deploy ",(0,g.tZ)(r6,{build:e})]})}),u),r7=function(e){var t=e.activityLogItem,n=t.type,r=t.build,i=r.user.displayName,o=n in r5&&r5[n](r);return o?(0,g.BX)(T.xv,{multiline:!1,children:[(0,g.tZ)("span",{css:B.l0.fontWeight.medium,children:i+" "}),o]}):null},r9=n(79035),ie=n(71051);function it(e){var t=e.type,n=e.view,r=e.onViewBuildLogs,i=e.openFile,o=(0,t6.Z)();return(0,g.tZ)(ip,{replId:o,type:void 0===t?"default":t,view:n,onSelect:r,openFile:i})}var ir=rP.filter(function(e){return"title"in e}),ii=(0,D.X)({root:[B.l0.flex.row,B.l0.px(8),B.l0.pb(8),{zIndex:0}]});function io(e){var t=e.activeStage,n=e.erroredStage;return(0,g.tZ)(R.G,{css:ii.root,children:ir.map(function(e){return(0,g.tZ)(rD,{stage:e.id,text:e.title,totalStagesWithTitle:ir.length,activeStage:t,erroredStage:n},e.id)})})}var ia=(0,D.X)({root:[B.l0.colWithGap(8),B.l0.height("100%")],header:[B.l0.pt(8),B.l0.px(8),B.l0.rowWithGap(8),B.l0.align.center],divider:[{marginLeft:8,marginRight:8,borderBottom:"1px solid "+B.TV.outlineDimmest}],name:[B.l0.color.foregroundDefault,B.l0.fontWeight.medium],content:[B.l0.p(8),B.l0.flex.growAndShrink(1),B.l0.position.relative],loading:[B.l0.coverContainer,B.l0.center],error:[B.l0.m(8),B.l0.borderRadius(8),B.l0.overflow("hidden")],xterm:[B.l0.coverContainer,{overflow:"hidden",borderBottomLeftRadius:8,borderBottomRightRadius:8,"& > div":[B.l0.coverContainer,B.l0.p(8)]}]});function il(e){var t,n,r=e.build,i=e.onBack,o=e.fs,a=e.openFile,l=e.onViewAppLogs,c=(0,v._)((0,ro.Z)({openFile:a,listFiles:o.listFiles}),2),s=c[0],u=c[1],d=(t={variables:{input:{buildId:r.id}},ssr:!1,fetchPolicy:"cache-and-network"},n=(0,G._)({},r0,t),ea.a(r4,n)),f=d.data,h=d.loading,p=(0,b.useMemo)(function(){var e=[],t=f&&"HostingBuildDeployActionHistoryResults"===f.hostingBuildDeployActionHistory.__typename?f.hostingBuildDeployActionHistory.results:null;if(t){var n=void 0,r=void 0,i=void 0,o=!0,a=!1,l=void 0;try{for(var c,s,u=t[Symbol.iterator]();!(o=(s=u.next()).done);o=!0)!function(){var t=s.value;if("HostingBuildDeployLogAction"===t.__typename)return e.push(t.log);rP.some(function(e){return e.statusType===t.status})&&(n=t.status),t.status===eh.Fe.Failed&&(r=n)}()}catch(e){a=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw l}}var d=n?null===(c=rL(n))||void 0===c?void 0:c.id:void 0;return r&&(i=d),{logs:e,activeStage:d,erroredStage:i,erroredStatus:r}}},[f]);return(0,b.useEffect)(function(){s&&p&&s.write(p.logs.join(""))},[s,p]),(0,g.BX)(R.G,{css:ia.root,children:[(0,g.BX)(R.G,{css:ia.header,children:[(0,g.tZ)(H.hU,{alt:"Back to timeline",onClick:function(){return i()},children:(0,g.tZ)(z.Z,{})}),(0,g.tZ)(R.G,{children:(0,g.BX)(T.xv,{color:"dimmer",multiline:!1,children:[(0,g.tZ)("span",{css:ia.name,children:r.user.displayName+" "}),(0,r9.B)(r.status)]})}),(0,g.tZ)(r6,{build:r})]}),p||h?(0,g.BX)(g.HY,{children:[(null==p?void 0:p.erroredStatus)?(0,g.tZ)(R.G,{css:ia.error,children:(0,g.tZ)(rs,{currentStatus:p.erroredStatus,provider:r.provider,debugSummary:r.debugSummary,openFile:a,onViewApplicationLogs:l})}):null,(0,g.tZ)(io,{activeStage:null==p?void 0:p.activeStage,erroredStage:null==p?void 0:p.erroredStage}),(0,g.tZ)(R.G,{css:ia.divider}),(0,g.BX)(rr.Tg,{css:ia.content,children:[(0,g.tZ)(R.G,{css:ia.xterm,innerRef:u}),h||!s?(0,g.tZ)(R.G,{css:ia.loading,children:(0,g.tZ)(j.Z,{color:B.TV.white,size:24})}):null]})]}):(0,g.tZ)(rv,{provider:r.provider,openFile:a})]})}var ic=(0,D.X)({item:B.l0.rowWithGap(12),past:{":last-of-type":{"[data-timeline-line]":{display:"none"}}},future:{":last-of-type":{"[data-timeline-line]":{bottom:-19}}},animate:{animation:(0,L.F4)("\n  0% {\n    opacity: 0;\n    height: ".concat((null==i?void 0:i.from)?i.from:0,"px;\n  }\n  99% {\n    opacity: 1;\n    height: ").concat(36.4,"px;\n  }\n  ").concat((null==i?void 0:i.noAuto)?"100% {\n        opacity: 1;\n        height: ".concat(36.4,"px;\n      }"):"100% {\n    height: auto;\n  }","\n"))+" 300ms ease-out forwards"}}),is=(0,D.X)({root:[B.l0.colWithGap(8)],empty:[B.l0.pb(8),B.l0.center,B.l0.align.stretch],items:[],loadMore:[B.l0.center],item:[B.l0.rowWithGap(8),B.l0.pl(8),B.l0.pr(4),B.l0.pb(12),B.l0.align.center,B.l0.flex.growAndShrink(1),B.l0.color.foregroundDimmest,B.l0.hover(B.l0.color.foregroundDefault)],itemMainText:[B.l0.flex.growAndShrink(1),(0,S._)({},B.nC.min(640),B.l0.flex.growAndShrink(0))],itemLine:[B.l0.display.none,(0,S._)({},B.nC.min(640),[B.l0.display.flex,B.l0.flex.growAndShrink(1),B.l0.border({color:B.TV.outlineDimmest,direction:"top"})])],itemRight:[B.l0.rowWithGap(6),B.l0.justify.end,B.l0.textAlign.right],itemContent:[B.l0.rowWithGap(8),B.l0.flex.growAndShrink(1),B.l0.align.center],itemPast:[ic.item,ic.past],itemPastAnimate:[ic.item,ic.past,ic.animate],itemFuture:[ic.item,ic.future],itemFutureAnimate:[ic.item,ic.future,ic.animate],disabledLog:{cursor:"not-allowed"}}),iu=(0,D.X)({top:B.l0.rowWithGap(12),button:[B.l0.reset.button,B.l0.cursor.pointer,B.l0.borderRadius(8),B.l0.display.flex,B.l0.rowWithGap(6),B.l0.align.center,B.l0.px(8),B.l0.color.foregroundDimmer,B.l0.height(32),B.l0.hover(B.l0.color.foregroundDefault),{'&[data-highlight="true"]':[B.l0.color.accentNegativeStrongest,B.l0.backgroundColor.accentNegativeDimmest,B.l0.border({color:B.TV.accentNegativeDimmer})]}],info:[B.l0.flex.growAndShrink(1),{'&[data-open="false"]':B.l0.pb(6)}],buttonContent:[B.l0.flex.growAndShrink(1),B.l0.rowWithGap(8),B.l0.align.center],failedBuildList:B.l0.pt(8)});function id(e){var t=e.items,n=e.upcomingBuildStatus,r=e.view,i=e.onClick,o=e.openFile,a=(0,v._)((0,b.useState)(!1),2),l=a[0],c=a[1],s=(0,w.kW)(),u=t[0],d=u.build.debugSummary,f=s===Z.z.Ready&&!n&&r!==er.k.DeploymentInProgress&&d;return(0,g.BX)(R.G,{children:[(0,g.BX)(R.G,{css:iu.top,children:[(0,g.tZ)(re,{type:l?"futureFailOpen":"futureFailClosed"}),(0,g.BX)(R.G,{css:iu.info,"data-open":l,children:[f?(0,g.tZ)(rd,{title:"".concat(t.length," ").concat((0,ie.Z)("build",t.length)," failed"),debugSummary:d,onViewBuildLogs:function(){return i(u.build)},openFile:o}):null,(0,g.BX)("button",{onClick:function(){return c(!l)},css:iu.button,children:[(0,g.BX)(R.G,{css:iu.buttonContent,children:[(0,g.tZ)(e9.Z,{}),(0,g.tZ)(T.xv,{children:"View all failed builds"}),l?null:(0,g.BX)(T.xv,{css:B.l0.color.foregroundDimmest,variant:"small",children:[t.length>1?"Most recent: ":null,(0,rk.Z)(new Date(t[0].timeCreated),Date.now(),{addSuffix:!0})]})]}),l?(0,g.tZ)(rl.Z,{color:B.TV.foregroundDimmer}):(0,g.tZ)(tg.Z,{color:B.TV.foregroundDimmer})]})]})]}),l?(0,g.tZ)(R.G,{css:iu.failedBuildList,children:t.map(function(e){return(0,g.tZ)(im,{item:e,onClick:function(){return i(e.build)},type:"future"},e.id)})}):null]})}function ih(e){var t=e.items,n=e.view,r=e.onClick,i=e.openFile,o=(0,v._)((0,b.useState)(!1),2),a=o[0],l=o[1],c=(0,w.BU)().hasDebugSummariesAuthorization,s=(0,w.pn)(),u=(0,b.useRef)(void 0);(0,b.useEffect)(function(){(null==s?void 0:s.status)!==void 0&&(u.current=null==s?void 0:s.status)},[s,null==s?void 0:s.status]);var d=!s&&u.current!==eh.Fe.Building&&u.current!==eh.Fe.Success,f=d?B.TV.accentNegativeStronger:B.TV.foregroundDimmer;if(0===t.length)return null;var h=t[0];return c&&h.build.debugSummary?(0,g.tZ)(id,{items:t,upcomingBuildStatus:u.current,view:n,onClick:r,openFile:i}):(0,g.BX)(R.G,{children:[(0,g.BX)(R.G,{css:iu.top,children:[(0,g.tZ)(re,{type:a?"futureFailOpen":"futureFailClosed"}),(0,g.tZ)(R.G,{css:iu.info,"data-open":a,children:(0,g.BX)("button",{onClick:function(){return l(!a)},css:iu.button,"data-highlight":d,children:[(0,g.BX)(R.G,{css:iu.buttonContent,children:[d?(0,g.tZ)(I.Z,{color:B.TV.accentNegativeStronger}):null,(0,g.BX)(T.xv,{children:[t.length," ",(0,ie.Z)("build",t.length)," failed"]}),a?null:(0,g.BX)(T.xv,{children:[t.length>1?"Most recent: ":null,(0,rk.Z)(new Date(t[0].timeCreated),Date.now(),{addSuffix:!0})]})]}),a?(0,g.tZ)(rl.Z,{color:f}):(0,g.tZ)(tg.Z,{color:f})]})})]}),a?(0,g.tZ)(R.G,{css:iu.failedBuildList,children:t.map(function(e){return(0,g.tZ)(im,{item:e,onClick:function(){return r(e.build)},type:"future"},e.id)})}):null]})}function ip(e){var t,n,r,i=e.replId,o=e.type,a=void 0===o?"default":o,l=e.view,c=e.onSelect,s=e.openFile,u=(t=(0,G._)({},r0,{variables:{replId:i,count:20},fetchPolicy:"cache-and-network",ssr:!1}),ea.a(r3,t)),d=u.data,f=u.previousData,h=u.loading,p=u.error,m=u.fetchMore,v=null!=d?d:f,y=(null==v?void 0:v.repl.__typename)==="Repl"?v.repl:null,Z=(null==y?void 0:null===(r=y.hostingDeployment)||void 0===r?void 0:r.__typename)==="HostingDeployment"?y.hostingDeployment:null,C=(n=(0,x._)(function(){var e;return(0,k.Jh)(this,function(t){switch(t.label){case 0:if(!(e=null==Z?void 0:Z.activityLogs.pageInfo.nextCursor))return[2];return[4,m({variables:{after:e,count:20}})];case 1:return t.sent(),[2]}})}),function(){return n.apply(this,arguments)}),S=(0,rW.Z)({onLoadMore:C,rootMargin:"0px 0px 300px 0px"}).targetRef,_=(0,w.$y)(),T=(0,w.pn)(),D=(0,b.useRef)(void 0);if((0,b.useEffect)(function(){(null==T?void 0:T.id)!==void 0&&(D.current=null==T?void 0:T.id)},[null==T?void 0:T.id]),h&&!Z)return"failureQueue"===a?null:(0,g.tZ)(ig,{});if(!(null==Z?void 0:Z.activityLogs))return null;var B=Z.activityLogs,P=B.items,A=B.pageInfo;if(0===P.length)return null;if(p)return(0,g.tZ)(R.G,{css:is.empty,children:(0,g.tZ)(E.E,{colorway:"warning",icon:(0,g.tZ)(I.Z,{}),text:"Something went wrong"})});var L=function(e,t){var n=[],r=(null==t?void 0:t.timeCreated)?new Date(t.timeCreated):null,i=!0,o=!1,a=void 0;try{for(var l,c=e[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;if(s.type!==eh.dD.Fail||r&&r.getTime()>new Date(s.build.timeCreated).getTime())break;n.push(s)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return n}(P,_);return"failureQueue"===a?(0,g.tZ)(X,{render:L.length>0,initialHeight:44,children:(0,g.tZ)(ih,{items:L,view:l,onClick:c,openFile:s})}):(0,g.BX)(R.G,{css:is.root,"data-history-timeline-items":P.length-L.length,children:[(0,g.tZ)(R.G,{css:is.items,children:P.map(function(e,t){return e.build.id===(null==_?void 0:_.id)||t<L.length?null:(0,g.tZ)(im,{item:e,onClick:function(){return c(e.build)}},e.id)})}),A.nextCursor?(0,g.tZ)(R.G,{css:is.loadMore,children:(0,g.tZ)(H.hU,{disabled:h,tooltipBehavior:"hidden",alt:"Show more",onClick:C,ref:S,children:h?(0,g.tZ)(j.Z,{}):(0,g.tZ)(rV.Z,{})})}):null]})}function im(e){var t=e.item,n=e.onClick,r=e.timeline,i=e.type,o=t.build.hasDeployLogs,a=new Date(t.timeCreated),l=Date.now(),c=!o,s=(0,g.BX)(R.G,{css:is.item,children:[(0,g.tZ)(R.G,{css:is.itemMainText,children:(0,g.tZ)(r7,{activityLogItem:t})}),(0,g.tZ)(R.G,{css:is.itemLine}),(0,g.BX)(R.G,{css:is.itemRight,children:[(0,g.tZ)(rq,{activityLogItem:t}),(0,g.tZ)(T.xv,{multiline:!1,children:(0,rk.Z)(a,l,{addSuffix:!0})}),(0,g.tZ)(H.hU,{alt:o?"View deploy logs":"Deploy logs expire after 30 days",onClick:n,disabled:c,css:c&&is.disabledLog,children:(0,g.tZ)(eb.Z,{})})]})]});return void 0===r||r?(0,g.BX)(R.G,{css:"past"===(void 0===i?"past":i)?is.itemPast:is.itemFuture,children:[(0,g.tZ)(re,{type:t.type===eh.dD.Fail?"pastFail":"pastSuccess"}),s]}):s}var iv=(0,D.X)({loading:[B.l0.rowWithGap(12),{":last-of-type":{"[data-timeline-line]":{display:"none"}}}],loadingItem:[nl.p.backgroundPulse(),B.l0.height(20.4),B.l0.mt(2),B.l0.ml(4),B.l0.flex.growAndShrink(1),B.l0.borderRadius(6),{opacity:.5,marginBottom:14}]});function ig(){return(0,g.tZ)(R.G,{children:[,,,].fill(0).map(function(e,t){return(0,g.BX)(R.G,{css:iv.loading,children:[(0,g.tZ)(re,{type:"pastNeutral"}),(0,g.tZ)(rr.Tg,{elevated:!0,css:iv.loadingItem})]},t)})})}var iy=(0,D.X)({self:[B.l0.colWithGap(8)],selfGrow:[B.l0.colWithGap(8),B.l0.flex.grow(1)],label:[B.l0.rowWithGap(8),B.l0.align.center,B.l0.maxWidth("100%")],labelText:[B.l0.flex.growAndShrink(1),{textOverflow:"ellipsis"}],labelTextWarning:[B.l0.flex.growAndShrink(1),B.l0.color.orangeStrongest,{textOverflow:"ellipsis"}],header:[B.l0.display.flex,B.l0.flex.row,B.l0.justify.spaceBetween,B.l0.align.center],actions:[B.l0.rowWithGap(4)],labelLoading:[B.l0.rowWithGap(8),B.l0.align.center,nl.p.foregroundPulse(),B.l0.width(200),B.l0.borderRadius(8)],inputLoading:[nl.p.foregroundPulse(),B.l0.borderRadius(8)]}),ib=function(e){var t=e.id,n=e.title,r=e.information,i=e.optional,o=e.detail,a=e.warning,l=e.actions,c=e.children,s=e.grow;return(0,g.BX)(R.G,{css:void 0!==s&&s?iy.selfGrow:iy.self,children:[(0,g.BX)(R.G,{css:iy.header,children:[(0,g.BX)(R.G,{tag:"label",htmlFor:t,css:iy.label,children:[(0,g.tZ)(T.xv,{color:"dimmer",multiline:!1,children:n}),(0,g.tZ)(eJ.u,{tooltip:r,children:(0,g.tZ)(eY.Z,{color:B.TV.foregroundDimmest})}),void 0!==i&&i?(0,g.tZ)(T.xv,{css:iy.labelText,variant:"small",color:"dimmest",multiline:!1,children:"optional"}):null,o?(0,g.tZ)(T.xv,{css:iy.labelText,variant:"small",color:"dimmest",multiline:!1,children:o}):null,a?(0,g.tZ)(T.xv,{css:iy.labelTextWarning,variant:"small",multiline:!1,children:a}):null]}),l?(0,g.tZ)(R.G,{css:iy.actions,children:l}):null]}),c]})},iw=function(){return(0,g.BX)(R.G,{css:iy.self,children:[(0,g.tZ)(R.G,{css:iy.header,children:(0,g.tZ)(R.G,{css:iy.labelLoading,children:(0,g.tZ)(T.xv,{color:"dimmer",multiline:!1,children:"\xa0"})})}),(0,g.tZ)(R.G,{css:iy.inputLoading,children:(0,g.tZ)(ty.II,{disabled:!0})})]})};function iZ(){var e=(0,ei._)(["\n  query ReservedVMMachineConfigurations {\n    hostingMachineConfigurations(input: { provider: gce }) {\n      __typename\n      ... on HostingMachineConfigurationsResults {\n        results {\n          ...MachineConfiguration\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return iZ=function(){return e},e}var ix={},iC=(0,eo.Ps)(iZ(),rJ.bN),ik=n(96214),iS=n(68140),i_=n(77631),iE=(0,D.X)({header:[B.l0.colWithGap(4),B.l0.mb(16)],costWrapper:[B.l0.rowWithGap(2),B.l0.align.center,B.l0.flex.shrink(1)],cost:[B.l0.rowWithGap(4),B.l0.align.baseline],selectWrapper:B.l0.rowWithGap(12),selectInner:[B.l0.flex.growAndShrink(1)],select:[B.l0.border({color:rE.TV.outlineDefault}),{flex:"1 1 auto"}]}),iT=function(e){var t,n=e.initialMachineConfiguration,r=e.isTeamRepl,i=e.onChange,o=e.onConfirm,a=e.onError,l=e.onBack,c=(0,v._)((0,b.useState)(n?(0,P._)((0,G._)({},n),{maxInstances:1}):void 0),2),s=c[0],u=c[1],d=(0,v._)((0,i_.gr)(null==s?void 0:s.configurationSlug),2),f=d[0],h=d[1],p=(0,v._)((0,b.useState)(!1),2),m=p[0],y=p[1],w=(t=(0,G._)({},ix,{onCompleted:function(e){"HostingMachineConfigurationsResults"!==e.hostingMachineConfigurations.__typename&&a("Something went wrong")},onError:function(e){return a(e.message)}}),ea.a(iC,t)),Z=w.data,x=w.loading,C=(null==Z?void 0:Z.hostingMachineConfigurations.__typename)==="HostingMachineConfigurationsResults"?Z.hostingMachineConfigurations.results:null;(0,b.useEffect)(function(){et({context:er.k.AutoscaleMachineConfiguration})},[]),(0,b.useEffect)(function(){if(C&&!s){var e=r?C.find(function(e){return"e2-micro"===e.slug}):C.find(function(e){return"e2-small"===e.slug});if(!e){a("An error occurred trying to validate default machine configuration");return}var t={configurationId:e.id,configurationLabel:e.label,configurationSlug:e.slug,maxInstances:1};u(t),"function"==typeof i&&i(t)}},[C,s,r,i,a]);var k=C&&(null==C?void 0:C.length)>0,S=x||r||m||!k;return(0,g.BX)(g.HY,{children:[(0,g.tZ)(V,{maxWidth:!0,children:(0,g.tZ)(Q,{onBack:l})}),(0,g.BX)(V,{maxWidth:!0,children:[(0,g.BX)(R.G,{css:iE.header,children:[(0,g.tZ)(T.xv,{variant:"subheadBig",children:"Reserved VM configuration"}),(0,g.tZ)(T.xv,{variant:"small",color:"dimmer",children:"Reserved VM apps are always on and can have a dedicated machine. You are billed for the total number of hours your machines have been running for. The cost per hour changes depending on your machine configuration."})]}),(0,g.tZ)(ib,{id:"machineConfiguration",title:"Machine Configuration",information:"Your machine configuration determines the number of vCPUs and memory available to your app. You can change it at any time.",children:s?(0,g.BX)(g.HY,{children:[(0,g.tZ)(R.G,{css:iE.selectWrapper,children:r?(0,g.tZ)(ty.II,{value:s.configurationLabel,disabled:!0}):(0,g.BX)(g.HY,{children:[(0,g.tZ)(R.G,{css:iE.selectInner,children:(0,g.tZ)(ik.P,{css:iE.select,initialSelectedItem:{id:s.configurationId,title:s.configurationLabel},items:k?Object.values(C).map(function(e){var t=e.id;return{title:e.label,id:t}}):[],onChange:function(e){var t=e.id,n=null==C?void 0:C.find(function(e){return e.id===t});if(!n){a("An error occurred trying to validate selected machine configuration");return}var r={configurationId:n.id,configurationLabel:n.label,configurationSlug:n.slug,maxInstances:1};u(r),"function"==typeof i&&i(r)},disabled:S})}),(0,g.tZ)(R.G,{css:iE.costWrapper,children:(0,g.BX)(R.G,{css:iE.cost,children:[(0,g.BX)(T.xv,{variant:"subheadDefault",multiline:!1,children:["$",h]}),(0,g.tZ)(T.xv,{color:"dimmer",variant:"small",multiline:!1,children:"per month"}),(0,g.BX)(T.xv,{color:"dimmer",variant:"small",multiline:!1,children:["($",f,"/hour)"]})]})})]})}),"function"==typeof o?(0,g.BX)(R.G,{css:[B.l0.colWithGap(8),B.l0.pt(8)],children:[(0,g.tZ)(e6.zx,{colorway:"primary",text:"Approve and update",iconRight:(0,g.tZ)(tS.Z,{}),onClick:function(){if(!s){a("An error occurred trying to validate selected machine configuration");return}y(!0),o(s)},loading:x,disabled:S}),(0,g.BX)(T.xv,{color:"dimmest",children:["Your deployed app will incur charges for any resource usage."," ",(0,g.tZ)("a",{href:iS.TT.ABOUT_USAGE_BASED_BILLING,target:"_blank",rel:"noopener",children:"Learn more"})]})]}):null]}):(0,g.tZ)(R.G,{css:[nl.p.foregroundPulse(),B.l0.borderRadius(8)],children:(0,g.tZ)(ty.II,{disabled:!0})})})]})]})},iR=(d={},(0,S._)(d,eh.r4.Gce,"Reserved VM"),(0,S._)(d,eh.r4.CloudRun,"Autoscale"),(0,S._)(d,eh.r4.Static,"Static"),(0,S._)(d,eh.r4.Cron,"Scheduled"),d),iD=n(9834),iI=n.n(iD),iB=n(47363),iG=n(26394),iP=n(95173),iA=(0,D.X)({root:[B.l0.rowWithGap(0),B.l0.flex.shrink(1)],name:[B.l0.color.foregroundDefault,B.l0.fontWeight.medium],item:[B.l0.rowWithGap(8),B.l0.pr(4),B.l0.align.center,B.l0.flex.growAndShrink(1)],itemMainText:[B.l0.flex.growAndShrink(1),B.l0.align.center],itemRight:[B.l0.textAlign.right],itemContent:[B.l0.rowWithGap(8),B.l0.flex.growAndShrink(1),B.l0.align.center],disabledLog:{cursor:"not-allowed"}}),iL=function(e){var t=e.onClick,n=(0,w.kW)(),r=(0,w.$y)();if(n===Z.z.Loading||!r)return(0,g.tZ)(j.Z,{size:12});var i=r.status,o=r.hasDeployLogs,a=!o;return(0,g.tZ)(R.G,{css:iA.root,children:(0,g.BX)(R.G,{css:iA.item,children:[(0,g.tZ)(iG.c,{status:i}),(0,g.tZ)(R.G,{css:iA.itemMainText,children:(0,g.BX)(T.xv,{multiline:!1,children:[(0,g.tZ)("span",{css:iA.name,children:r.user.displayName+" "}),(0,r9.B)(i)+" ",!function(e){switch(e){case eh.Fe.Building:case eh.Fe.Promoting:case eh.Fe.Running:case eh.Fe.Pending:case eh.Fe.Failed:case eh.Fe.Success:return!0;case eh.Fe.Resuming:case eh.Fe.Suspending:case eh.Fe.Suspended:case eh.Fe.UpdatingTier:return!1}}(i)?null:(0,g.tZ)(eJ.u,{tooltip:(0,iP.Z)(new Date(r.timeCreated),"MMMM do, Y 'at' h:m aa z"),maxWidth:250,children:function(e,t){return(0,g.tZ)("span",(0,P._)((0,G._)({},e),{ref:t,children:(0,rk.Z)(new Date(r.timeCreated),Date.now(),{addSuffix:!0})}))}})]})}),(0,g.tZ)(R.G,{css:iA.itemRight,children:(0,g.tZ)(H.hU,{alt:o?"View deploy logs":"Deploy logs expire after 30 days",onClick:t,disabled:a,css:a&&iA.disabledLog,children:(0,g.tZ)(eb.Z,{})})})]})})},iN=n(27060),iO=n(2446),iU=function(e){var t=e.currentBuild,n=(0,t8.P5)({type:"string",controlName:"flag-fallback-deployments-domain",default:i_.q7}),r=(0,v._)((0,b.useState)([]),2),i=r[0],o=r[1],a=n!==i_.q7;return(0,b.useEffect)(function(){var e=(null===(i=t.repl.hostingDeployment)||void 0===i?void 0:i.__typename)==="HostingDeployment"&&t.repl.hostingDeployment.id,r=[];switch(t.provider){case eh.r4.Goval:r.push({href:"https://".concat(e,".id.repl.co"),private:!0});break;case eh.r4.Gce:case eh.r4.CloudRun:case eh.r4.Static:var i,a,l,c,s,u,d=(null===(a=t.repl.hostingDeployment)||void 0===a?void 0:a.__typename)==="HostingDeployment"?null===(l=t.repl.hostingDeployment)||void 0===l?void 0:l.replitAppSubdomain:void 0;!d&&(null===(c=t.repl.owner)||void 0===c?void 0:c.username)&&(d="".concat(t.repl.slug,"-").concat(t.repl.owner.username)),d&&r.push({href:"https://".concat(d).concat((null===(u=window)||void 0===u?void 0:null===(s=u.location)||void 0===s?void 0:s.hostname)!=="replit.com"?".staging":"",".").concat(n),private:!1})}if(t.repl.domains){var f=t.repl.domains.filter(function(t){return(null==t?void 0:t.hosting_deployment_id)===e}),h=!0,p=!1,m=void 0;try{for(var v,g=f[Symbol.iterator]();!(h=(v=g.next()).done);h=!0){var y=v.value;y&&r.push({href:"https://".concat(y.domain),private:!1,state:"verified"!==y.state?y.state:void 0})}}catch(e){p=!0,m=e}finally{try{h||null==g.return||g.return()}finally{if(p)throw m}}}o(r)},[t,n]),(0,g.BX)(R.G,{css:[B.l0.colWithGap(2),B.l0.flex.growAndShrink(1)],children:[a?(0,g.tZ)(E.E,{colorway:"warning",text:"The ".concat(i_.q7," domain is currently unavailable, please use the ").concat(n," URL below.")}):null,i.map(function(e,t){return(0,g.BX)(R.G,{css:[B.l0.rowWithGap(8),B.l0.align.center],children:[(0,g.tZ)(T.xv,{css:[B.l0.flex.shrink(1)],multiline:!1,children:(0,g.tZ)("a",{href:e.href,target:"_blank",css:[B.l0.color.foregroundDefault],children:e.href})}),e.private?(0,g.tZ)(iO.Z,{color:B.TV.foregroundDefault}):null,(0,g.tZ)("a",{href:e.href,target:"_blank",css:[B.l0.display.flex,B.l0.align.center],children:(0,g.tZ)(iN.Z,{color:B.TV.foregroundDefault})}),e.state?(0,g.BX)(T.xv,{multiline:!1,children:["(",e.state,")"]}):null]},"domains-".concat(t))})]})},iX=(0,L.F4)("\n    50% {\n      background-color: ".concat(B.TV.accentPositiveDimmest,";\n      outline: 1px solid ").concat(B.TV.accentPositiveDimmer,";\n      box-shadow: 0px 0px 32px rgba(0, 145, 24, 0.3);\n    }\n")),iM=(0,D.X)({deploymentInfo:[B.l0.colWithGap(8),B.l0.p(16),B.l0.borderRadius(),{outline:"1px solid transparent"}]}),iF=(0,D.X)({textButton:[B.l0.cursor.pointer,B.l0.reset.button,B.l0.color.accentPrimaryStronger,B.l0.focusRing,B.l0.hover(B.l0.color.accentPrimaryStrongest),{lineHeight:1.2,":not([disabled])":{cursor:"pointer"}}],textLink:B.l0.hover(B.l0.color.accentPrimaryStrongest),labeledSection:[B.l0.flex.growAndShrink(1),(0,S._)({},B.nC.min(400),[B.l0.flex.row,B.l0.align.baseline])],labeledSectionFullWidth:[B.l0.flex.growAndShrink(1),(0,S._)({},B.nC.min(400),[B.l0.flex.row,B.l0.align.baseline,B.l0.flex.grow(1),B.l0.justify.spaceBetween])],buildStatus:[B.l0.rowWithGap(4),B.l0.align.center,B.l0.flex.shrink(1)],deploymentInfo:iM.deploymentInfo,deploymentInfoAnimate:[iM.deploymentInfo,{animation:"".concat(iX," 700ms ease-out")}],deploymentInfoTitle:[B.l0.rowWithGap(8),B.l0.flex.wrap,B.l0.flex.shrink(0),B.l0.justify.spaceBetween],deploymentInfoContent:[B.l0.colWithGap(8),(0,S._)({},B.nC.min(400),B.l0.colWithGap(4))],typeColumn:[B.l0.rowWithGap(6),B.l0.flex.wrap,B.l0.flex.shrink(1)]}),iW=function(e){var t=e.text,n=e.onClick;return(0,g.tZ)("button",{css:iF.textButton,onClick:n,children:t})},iV=function(e){var t=e.name,n=e.sku,r=e.canManage,i=e.usageLink,o=e.onManageClick;return(0,g.BX)(R.G,{css:iF.typeColumn,children:[(0,g.tZ)(T.xv,{multiline:!1,children:t}),n?(0,g.BX)(T.xv,{color:"dimmest",multiline:!1,children:["(",n,")"]}):null,r?(0,g.tZ)(iW,{text:"Manage",onClick:o}):null,i?(0,g.tZ)(iI(),{legacyBehavior:!0,href:"/usage",passHref:!0,children:(0,g.tZ)("a",{css:iF.textLink,children:(0,g.tZ)(T.xv,{children:"See all usage"})})}):null]})},iH=function(e){var t=e.label,n=e.children,r=e.fullWidth;return(0,g.BX)(R.G,{css:r?iF.labeledSectionFullWidth:iF.labeledSection,children:[(0,g.tZ)(R.G,{css:B.l0.minWidth(100),children:(0,g.tZ)(T.xv,{css:B.l0.color.foregroundDimmer,multiline:!1,children:t})}),n]})},iz=function(e){var t=e.provider,n=e.machine,r=e.onViewBuildLogs,i=e.onManageClick,o=e.onViewAction,a=(0,w.kW)(),l=(0,w.$y)(),c=void 0!==l,s=t!==eh.r4.Static&&c&&null===l.hasImageTag,u=!!((a===Z.z.Ready||a===Z.z.Suspended)&&!s),d=null,f=null,h=null,p=null,m=(0,w.pn)(),v=(0,b.useRef)(void 0);(0,b.useEffect)(function(){m&&(v.current=null==m?void 0:m.id)},[m,null==m?void 0:m.id]);var y=(null==l?void 0:l.status)===eh.Fe.Success,x=(null==l?void 0:l.id)===v.current,C=(null==l?void 0:l.provider)!==eh.r4.Cron;switch(l&&(f=(0,g.BX)(g.HY,{children:[(0,g.tZ)(iH,{label:"Status",children:(0,g.tZ)(R.G,{css:iF.buildStatus,children:(0,g.tZ)(iL,{onClick:function(){r(l)}})})}),C?(0,g.tZ)(iH,{label:"Domain",children:(0,g.tZ)(iU,{currentBuild:l})}):null]})),t){case eh.r4.Gce:h=(0,g.tZ)(iH,{label:"Type",fullWidth:!c,children:(0,g.tZ)(iV,{name:iR[t],sku:null==n?void 0:n.configurationLabel,canManage:u,onManageClick:i})});break;case eh.r4.CloudRun:h=(0,g.tZ)(iH,{label:"Type",fullWidth:!c,children:(0,g.tZ)(iV,{name:iR[t],sku:n?"".concat(n.configurationLabel," / ").concat(n.maxInstances," Max"):"Beta",canManage:u,usageLink:!0,onManageClick:i})});break;case eh.r4.Static:h=(0,g.tZ)(iH,{label:"Type",fullWidth:!c,children:(0,g.tZ)(iV,{name:iR[t],sku:void 0,canManage:u&&c,onManageClick:i})});break;case eh.r4.Cron:if(!(null==l?void 0:null===(k=l.machineJob)||void 0===k?void 0:k.timezone))break;var k,S,_,D=null==l?void 0:null===(S=l.machineJob)||void 0===S?void 0:S.timezone,B=iB.y.find(function(e){return e.utc.includes(D)}),G=(null==B?void 0:B.abbr)||D;h=(0,g.tZ)(iH,{label:"Type",fullWidth:!c,children:(0,g.tZ)(iV,{name:iR[t],sku:"".concat(G,", ").concat(null==l?void 0:null===(_=l.machineJob)||void 0===_?void 0:_.crontab),canManage:!1,onManageClick:i})}),d=(0,g.tZ)(t$,{onSuccessfulExecution:function(){o({type:er.a.ChangeView,payload:{view:er.k.Schedule}})}});case eh.r4.Goval:}return(s&&(p=(0,g.tZ)(R.G,{children:(0,g.tZ)(E.E,{icon:(0,g.tZ)(I.Z,{}),colorway:"warning",text:"To upgrade, please redeploy."})})),f||h||p)?(0,g.BX)(rr.Tg,{elevated:!0,css:y&&x?iF.deploymentInfoAnimate:iF.deploymentInfo,style:{paddingTop:l?12:16},children:[l?(0,g.BX)(R.G,{css:iF.deploymentInfoTitle,children:[(0,g.tZ)(T.xv,{variant:"subheadDefault",multiline:!1,children:"Production"}),d]}):null,(0,g.BX)(R.G,{css:iF.deploymentInfoContent,children:[f,h,p]})]}):null},ij=n(43540),iq=n(89470),iJ=(0,D.X)({styles0:[B.l0.height(128),B.l0.width(128),B.l0.borderRadius(2),eN.gU.nofill],styles1:[B.l0.position.absolute]}),iY=(0,D.X)({container:[B.l0.align.center,B.l0.colWithGap(4)],qrContainer:[B.l0.align.center,B.l0.justify.center]});function i$(e){var t=e.color;return(0,g.BX)(R.G,{css:iY.container,children:[(0,g.BX)(R.G,{css:iY.qrContainer,children:[(0,g.tZ)("svg",{viewBox:"0 0 128 128",css:iJ.styles0,target:"_blank",onClick:function(){window.open("/mobile")},children:(0,g.tZ)("path",{fill:null!=t?t:B.TV.foregroundDefault,d:"m0,13.58v13.58h27.15V0H0v13.58ZM34.91,1.94v1.94h-3.88v3.88h3.88v-3.88h7.76v3.88h3.88v-3.88h-3.88V0h-7.76v1.94Zm31.03,0v1.94h-15.52v7.76h-15.52v3.88h7.76v7.76h-3.88v-3.88h-7.76v11.64h-15.52v7.76h-3.88v3.88h-3.88v-3.88H0v3.88h7.76v3.88H0v7.76h3.88v3.88H0v3.88h3.88v3.88H0v3.88h3.88v3.88H0v3.88h3.88v3.88H0v3.88h15.52v3.88h-3.88v7.76h3.88v-3.88h3.88v-3.88h7.76v-3.88h-7.76v-7.76h3.88v3.88h3.88v-3.88h3.88v-3.88h3.88v-19.39h7.76v-3.88h-3.88v-3.88h-3.88v-3.88h3.88v-3.88h3.88v3.88h3.88v-3.88h3.88v-3.88h3.88v-7.76h3.88v3.88h3.88v7.76h-3.88v3.88h11.64v-3.88h3.88v3.88h15.52v3.88h-3.88v3.88h3.88v11.64h11.64v3.88h-11.64v3.88h-3.88v3.88h15.52v7.76h-3.88v-3.88h-3.88v3.88h-3.88v-3.88h-3.88v3.88h3.88v15.52h3.88v15.52h7.76v3.88h-3.88v3.88h-3.88v-3.88h-3.88v3.88h-7.76v-3.88h-3.88v3.88h3.88v3.88h-11.64v-3.88h3.88v-7.76h7.76v-3.88h7.76v-3.88h-3.88v-3.88h-3.88v-3.88h3.88v-11.64h-11.64v3.88h3.88v3.88h-7.76v-3.88h-7.76v-3.88h-7.76v3.88h7.76v7.76h-7.76v-3.88h-15.52v7.76h3.88v-3.88h7.76v3.88h3.88v3.88h-3.88v3.88h-11.64v-3.88h-3.88v-7.76h-3.88v15.52h3.88v3.88h3.88v-3.88h3.88v3.88h3.88v3.88h3.88v3.88h7.76v-3.88h-7.76v-3.88h15.52v-3.88h-3.88v-3.88h7.76v-7.76h11.64v7.76h-7.76v3.88h-3.88v7.76h-3.88v3.88h3.88v3.88h27.15v-7.76h3.88v7.76h7.76v-3.88h3.88v3.88h3.88v-3.88h-3.88v-7.76h3.88v3.88h3.88v-3.88h3.88v-3.88h-3.88v3.88h-3.88v-3.88h-3.88v-11.64h3.88v3.88h3.88v3.88h7.76v-3.88h-3.88v-3.88h-7.76v-7.76h-3.88v-7.76h7.76v7.76h7.76v-3.88h-3.88v-7.76h-7.76v-3.88h-7.76v3.88h-3.88v-11.64h3.88v3.88h7.76v-3.88h-7.76v-3.88h3.88v-7.76h3.88v-3.88h3.88v3.88h3.88v3.88h-3.88v15.52h3.88v-11.64h3.88v-7.76h-3.88v-7.76h3.88v-7.76h-3.88v-11.64h-3.88v11.64h3.88v3.88h-3.88v3.88h-7.76v-3.88h3.88v-3.88h-3.88v-3.88h3.88v-3.88h-3.88v3.88h-3.88v-7.76h-7.76v3.88h3.88v3.88h-11.64v-3.88h3.88v-11.64h-3.88v7.76h-3.88v-11.64h3.88v-3.88h-3.88v3.88h-3.88v-3.88h-3.88v-3.88h7.76V3.88h3.88v3.88h3.88V0h-7.76v3.88h-3.88V0h-3.88v3.88h-7.76V0h-7.76v1.94Zm34.91,11.64v13.58h27.15V0h-27.15v13.58Zm-31.03-5.82v3.88h-7.76v3.88h-3.88v7.76h3.88v3.88h-3.88v-3.88h-3.88v3.88h-3.88v3.88h-3.88v7.76h-3.88v-7.76h-3.88v7.76h-3.88v3.88h-3.88v-3.88h-11.64v-3.88h11.64v-3.88h3.88v-7.76h3.88v3.88h3.88v-3.88h3.88v3.88h3.88v-3.88h3.88v-3.88h-7.76v-3.88h3.88v-3.88h3.88v3.88h3.88v-7.76h7.76v-3.88h3.88v3.88Zm-46.8,5.82v9.45H4.13V4.13h18.89v9.45Zm100.85,0v9.45h-18.89V4.13h18.89v9.45Zm-116.11,0v5.82h11.64V7.76H7.76v5.82Zm73.7-3.88v1.94h-3.88v7.76h-3.88v3.88h3.88v3.88h3.88v-7.76h3.88v7.76h-3.88v3.88h-3.88v-3.88h-3.88v3.88h-3.88v3.88h-3.88v-3.88h3.88v-3.88h-3.88v-11.64h3.88v3.88h3.88V7.76h7.76v1.94Zm27.15,3.88v5.82h11.64V7.76h-11.64v5.82Zm-38.79,11.64v1.94h3.88v-3.88h-3.88v1.94Zm-27.15,3.88v1.94h3.88v-3.88h-3.88v1.94Zm46.55,7.76v1.94h-11.64v-3.88h11.64v1.94Zm-62.06,7.76v1.94h-3.88v3.88h11.64v3.88h-11.64v3.88h3.88v3.88h3.88v11.64h-3.88v3.88h-3.88v-3.88h-3.88v3.88h-3.88v3.88h-3.88v-3.88h-3.88v-7.76h3.88v-11.64h3.88v3.88h3.88v-7.76h-7.76v-3.88h-3.88v-3.88h3.88v-3.88h15.52v1.94Zm81.45,1.94v3.88h3.88v7.76h-3.88v7.76h-3.88v3.88h-3.88v-3.88h3.88v-11.64h-3.88v-3.88h-3.88v-3.88h-3.88v-3.88h15.52v3.88Zm-96.97,1.94v1.94h3.88v-3.88h-3.88v1.94Zm89.21,0v1.94h3.88v3.88h3.88v-3.88h-3.88v-3.88h-3.88v1.94Zm-81.45,3.88v1.94h3.88v-3.88h-3.88v1.94Zm77.58,3.88v1.94h-3.88v-3.88h3.88v1.94Zm-77.58,9.7v3.88h-7.76v7.76h3.88v-3.88h3.88v-3.88h3.88v3.88h3.88v-3.88h-3.88v-3.88h3.88v-3.88h-7.76v3.88Zm19.39-1.94v1.94h3.88v-3.88h-3.88v1.94Zm0,11.64v1.94h-3.88v7.76h-3.88v3.88h3.88v-3.88h3.88v3.88h3.88v-7.76h-3.88v-3.88h3.88v-3.88h-3.88v1.94Zm58.18,7.76v1.94h3.88v-3.88h3.88v11.64h-7.76v-3.88h-3.88v-7.76h3.88v1.94Zm15.52,0v1.94h-3.88v-3.88h3.88v1.94ZM0,95.03v1.94h7.76v-3.88H0v1.94Zm23.27,0v1.94h3.88v-3.88h-3.88v1.94Zm46.55,0v1.94h-3.88v-3.88h3.88v1.94Zm38.79,7.76v5.82h-11.64v-11.64h11.64v5.82ZM0,114.42v13.58h27.15v-27.15H0v13.58Zm65.94-11.64v1.94h-3.88v-3.88h3.88v1.94Zm34.91,0v1.94h3.88v-3.88h-3.88v1.94Zm-42.67,3.88v1.94h-3.88v3.88h-3.88v-3.88h3.88v-3.88h3.88v1.94Zm-35.16,7.76v9.45H4.13v-18.89h18.89v9.45Zm-15.26,0v5.82h11.64v-11.64H7.76v5.82Zm100.85,3.88v1.94h-3.88v-3.88h3.88v1.94Zm-69.82,3.88v1.94h-3.88v3.88h3.88v-3.88h3.88v3.88h3.88v-3.88h-3.88v-3.88h-3.88v1.94Zm54.3,0v1.94h-3.88v-3.88h3.88v1.94Zm31.03,3.88v1.94h3.88v-3.88h-3.88v1.94Z"})}),(0,g.tZ)(iq.Z,{size:32,css:iJ.styles1,color:t})]}),(0,g.tZ)(T.xv,{variant:"small",color:"dimmer",children:"Scan to install"})]})}var iK=n(58532),iQ=n(64765),i0=n(52589),i1=(0,D.X)({row:[B.l0.pb(12),B.l0.rowWithGap(2),B.l0.justify.center],buttonLeft:[B.l0.borderRadius(8,0,0,8),B.l0.flex.growAndShrink(1)],buttonRight:[B.l0.borderRadius(0,8,8,0)]});function i2(e){var t=e.shouldShow,n=e.onDismissTour,r=(0,v._)((0,b.useState)(!1),2),i=r[0],o=r[1];return(0,g.BX)(g.HY,{children:[t?(0,g.BX)(R.G,{css:i1.row,children:[(0,g.tZ)(e6.zx,{iconLeft:(0,g.tZ)(iQ.Z,{}),onClick:function(){(0,ee.j)(i0.U3.DEPLOYMENT_MOBILE_DOWNLOAD_QR_VIEWED),o(!0)},text:"Deploy with the Replit App!",css:i1.buttonLeft}),(0,g.tZ)(e6.zx,{css:i1.buttonRight,text:"",iconLeft:(0,g.tZ)(th.Z,{}),onClick:n})]}):null,(0,g.tZ)(iK.u,{isOpen:i,onRequestClose:function(){o(!1),n()},children:(0,g.tZ)(i$,{})})]})}function i3(e){var t=e.deployability,n=e.isRedeploy,r=t.deploy,i=t.redeploy,o=n?i:r;return o.isAuthorized?null:(0,g.tZ)(E.E,{text:o.message,colorway:"warning",icon:(0,g.tZ)(I.Z,{})})}var i4=n(30043),i8=n(74492);function i6(e){var t=e.secrets,n=e.otherSecrets,r=new Map,i=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=(0,v._)(l.value,2),u=s[0],d=s[1];t.has(u)||r.set(u,d)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return{missing:r}}var i5=(0,D.X)({root:[B.l0.borderRadius(8),{border:"1px solid "+B.TV.outlineDimmer}],button:[B.l0.reset.button,eN.gU.nofill,B.l0.rowWithGap(8),B.l0.align.center,B.l0.height(32),B.l0.px(8),{border:"0 none",borderBottomLeftRadius:0,borderBottomRightRadius:0}],buttonText:[B.l0.flex.growAndShrink(1),B.l0.rowWithGap(8),B.l0.align.center],expanded:[B.l0.px(8),B.l0.pb(8)],missingItems:[B.l0.colWithGap(8)],missingItem:[B.l0.rowWithGap(8)],missingSecret:[B.l0.rowWithGap(8),B.l0.flex.growAndShrink(1)],subtitle:[{borderTop:"1px solid "+B.TV.outlineDimmest,top:-1},B.l0.py(8),B.l0.position.relative]});function i7(e){var t=e.secrets,n=e.otherSecrets,r=e.otherEnvName,i=e.onAddSecret,o=e.initialExpanded,a=i6({secrets:t,otherSecrets:n}).missing,l=(0,v._)((0,b.useState)(o),2),c=l[0],s=l[1],u=0===a.size;if((0,b.useEffect)(function(){u&&s(!1)},[u]),u)return null;var d="".concat(a.size," ").concat((0,ie.Z)("secret",a.size)," out of sync"),f=1===a.size?"A ".concat(r," secret is missing from this environment"):"".concat(a.size," ").concat(r," secrets are missing from this environment");return(0,g.BX)(R.G,{css:i5.root,children:[(0,g.BX)(R.G,{css:i5.button,tag:"button",onClick:function(){return s(function(e){return!e})},children:[(0,g.BX)(R.G,{css:i5.buttonText,children:[(0,g.tZ)(I.Z,{color:B.TV.orangeDefault}),(0,g.tZ)(T.xv,{multiline:!1,children:d})]}),c?(0,g.tZ)(rl.Z,{}):(0,g.tZ)(tg.Z,{})]}),c?(0,g.BX)(R.G,{css:i5.expanded,children:[(0,g.tZ)(T.xv,{css:i5.subtitle,color:"dimmer",children:f}),(0,g.tZ)(R.G,{css:i5.missingItems,children:(0,C._)(a.entries()).map(function(e){var t=(0,v._)(e,2),n=t[0],r=t[1];return(0,g.BX)(R.G,{css:i5.missingItem,children:[(0,g.BX)(R.G,{css:i5.missingSecret,children:[(0,g.tZ)(i8.u_,{value:n}),(0,g.tZ)(i8.BH,{value:r})]}),r?(0,g.tZ)(e6.zx,{iconLeft:(0,g.tZ)(i4.Z,{}),variant:"outlined",text:"Add secret",onClick:function(){return i({key:n,value:r})}}):null]},n)})})]}):null]})}function i9(e){var t=e.secrets,n=(0,v._)((0,b.useState)(null),2),r=n[0],i=n[1];return(0,b.useEffect)(function(){function e(){return(e=(0,x._)(function(){return(0,k.Jh)(this,function(e){switch(e.label){case 0:return[4,t.read()];case 1:return i.apply(void 0,[e.sent()]),[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[t]),{devSecrets:r}}var oe=n(96394),ot=n(64172),on=n(54129),or=n(68220),oi=n(64206),oo=n(70145),oa=n(39268),ol=n(40107),oc=n.n(ol),os=(0,D.X)({self:[B.l0.colWithGap(8),B.l0.mt(8)],accordion:[B.l0.mb(0)],accordionItem:[B.l0.rowWithGap(4),B.l0.align.center],textButton:[B.l0.cursor.pointer,B.l0.reset.button,B.l0.color.accentPrimaryStronger,B.l0.focusRing,B.l0.hover(B.l0.color.accentPrimaryStrongest),{lineHeight:1.2,":not([disabled])":{cursor:"pointer"}}],tableHeader:[B.l0.color.foregroundDimmer,B.l0.m(4),B.l0.textAlign.left],tableWrapper:[B.l0.mb(8),B.l0.colWithGap(8),(0,S._)({},O,B.l0.rowWithGap(0))],table:[B.l0.flex.column,B.l0.width("100%"),(0,S._)({},O,[B.l0.width("50%"),B.l0.colWithGap(6),{"&:first-child":{table:{borderRight:"1px solid "+B.TV.outlineDimmer}}}])],ghostRow:[B.l0.display.none,(0,S._)({},O,B.l0.display.flex)]}),ou=function(e){var t=e.text,n=e.onClick;return(0,g.tZ)("button",{css:os.textButton,onClick:n,children:t})};function od(e){var t=e.hasPortsConfigured,n=e.hasPort80Configured,r=e.hasConflictingPorts,i=e.hasLocalhostPort80,o=e.openNetworkingPane;return t?n?r?(0,g.tZ)(E.E,{text:(0,g.BX)(g.HY,{children:["Potential port conflict. Make sure no External Ports have conflicts in your configuration and that you only have one External Port configured on port :80. Open the"," ",(0,g.tZ)(ou,{text:"Networking pane to resolve.",onClick:o})]}),colorway:"warning"}):i?(0,g.tZ)(E.E,{text:(0,g.BX)(g.HY,{children:["Hosting your deployment on localhost can cause security or performance issues in some cases. Open the"," ",(0,g.tZ)(ou,{text:"Networking pane to configure.",onClick:o})]}),colorway:"primary"}):(0,g.tZ)(E.E,{text:(0,g.BX)(g.HY,{children:["Deployment forwarding to External Port :80. Open the"," ",(0,g.tZ)(ou,{text:"Networking pane to configure.",onClick:o})]}),colorway:"primary"}):(0,g.tZ)(E.E,{text:(0,g.BX)(g.HY,{children:["Potential port issue. Deployments require an External Port configured on port :80. Open the"," ",(0,g.tZ)(ou,{text:"Networking pane to configure.",onClick:o})]}),colorway:"warning"}):(0,g.tZ)(E.E,{text:(0,g.BX)(g.HY,{children:["No ports configured. Deployments will automatically forward the first Internal Port that opens. Open the"," ",(0,g.tZ)(ou,{text:"Networking pane to configure.",onClick:o})]})})}var of=function(e){return 80===(0,oo.OD)(e.configuration)};function oh(e){var t=e.portState,n=(0,oo.VZ)(t.configuration),r=(0,oo.OD)(t.configuration),i=of(t);return(0,g.BX)(g.HY,{children:[(0,g.BX)(oa.sg,{width:"50%",children:[(0,g.tZ)(T.xv,{children:n?"localhost":"0.0.0.0"}),i&&n?(0,g.tZ)(oi.Z,{size:16,color:or.Br.primary.default}):null]}),(0,g.BX)(oa.sg,{width:"50%",children:[(0,g.BX)(T.xv,{children:[":",r]}),i?(0,g.tZ)(r_.Z,{size:16,color:or.Br.positive.default}):(0,g.tZ)(th.Z,{size:16,color:or.Br.negative.default})]})]})}function op(e){var t=e.ports,n=e.openNetworkingPane,r=(0,on.Z)(t.portsState),i=(null==r?void 0:r.filter(function(e){return(0,oo.OD)(e.configuration)}).sort(function(e,t){var n,r;return(null!==(n=(0,oo.OD)(e.configuration))&&void 0!==n?n:0)-(null!==(r=(0,oo.OD)(t.configuration))&&void 0!==r?r:0)}))||null,o=null==i?void 0:i.find(of),a=!!o,l=!!(i&&i.length>0),c=!!i&&!!o&&!!(i.filter(of).length>1||i.some(function(e){return(0,oo.OD)(e.configuration)===o.configuration.localPort})),s=!!(o&&(0,oo.VZ)(o.configuration)),u=l&&!a||c,d=(0,v._)((0,b.useState)(!1),2),f=d[0],h=d[1];return(0,g.tZ)(rn.Q,{headerContent:(0,g.BX)(R.G,{css:os.accordionItem,children:[(0,g.tZ)(ib,{id:"deploymentPortConfiguration",title:"Port configuration",information:"Configure which port your deployment should use for incoming requests."}),u?(0,g.tZ)(I.Z,{size:16,color:or.Br.warning.strongest}):null]}),expanded:f,onClick:function(){return h(!f)},css:os.accordion,children:(0,g.BX)(R.G,{css:os.self,children:[(0,g.tZ)(od,{hasPortsConfigured:l,hasPort80Configured:a,hasConflictingPorts:c,hasLocalhostPort80:s,openNetworkingPane:n}),(0,g.tZ)(R.G,{children:(0,g.BX)(R.G,{css:os.tableWrapper,children:[(0,g.BX)(R.G,{css:os.table,children:[(0,g.tZ)(T.xv,{css:os.tableHeader,children:"Deployment expects:"}),(0,g.BX)(oa.iA,{children:[(0,g.BX)(oa.X2,{children:[(0,g.tZ)(oa.sg,{header:!0,width:"50%",children:"Host"}),(0,g.tZ)(oa.sg,{header:!0,width:"50%",children:"External Port"})]}),(0,g.BX)(oa.X2,{children:[(0,g.tZ)(oa.sg,{width:"50%",children:(0,g.tZ)(T.xv,{children:"0.0.0.0"})}),(0,g.BX)(oa.sg,{width:"50%",children:[(0,g.tZ)(T.xv,{children:":80"}),(0,g.tZ)(r_.Z,{size:16,color:or.Br.positive.default})]})]}),l&&i?oc()((null==i?void 0:i.length)-1).map(function(e){return(0,g.tZ)(oa.X2,{css:os.ghostRow,children:(0,g.tZ)(oa.sg,{children:(0,g.tZ)(T.xv,{children:"\xa0"})})},e)}):null]})]}),(0,g.BX)(R.G,{css:os.table,children:[(0,g.tZ)(T.xv,{css:os.tableHeader,children:"Your External Port configuration(s):"}),(0,g.BX)(oa.iA,{children:[(0,g.BX)(oa.X2,{children:[(0,g.tZ)(oa.sg,{header:!0,width:"50%",children:"Host"}),(0,g.tZ)(oa.sg,{header:!0,width:"50%",children:"External Port"})]}),l?null==i?void 0:i.map(function(e){return(0,g.tZ)(oa.X2,{children:(0,g.tZ)(oh,{portState:e})},e.configuration.localPort)}):(0,g.BX)(oa.X2,{children:[(0,g.tZ)(oa.sg,{width:"50%",children:(0,g.tZ)(T.xv,{children:"-"})}),(0,g.tZ)(oa.sg,{width:"50%",children:(0,g.tZ)(T.xv,{children:"-"})})]})]})]})]})})]})})}var om=n(84238),ov=n(52657),og=n(59489),oy=n(99799);function ob(){var e=(0,ei._)(["\n  query CheckReplitAppSubdomainAvailability(\n    $subdomain: String!\n    $deploymentId: String\n  ) {\n    replitAppSubdomainAvailability(\n      subdomain: $subdomain\n      deploymentId: $deploymentId\n    ) {\n      __typename\n      ... on ReplitAppSubdomainAvailabilityResult {\n        available\n        message\n      }\n      ... on UserError {\n        errorMessage: message\n      }\n    }\n  }\n"]);return ob=function(){return e},e}var ow={},oZ=(0,eo.Ps)(ob()),ox=n(63740),oC=n(90632),ok=n(34030),oS=(0,D.X)({self:[B.l0.colWithGap(4),B.l0.flex.growAndShrink(1)],input:[B.l0.color.greyStrongest],loading:[nl.p.backgroundPulse(B.TV.backgroundHighest,B.TV.backgroundHigher)],error:[B.l0.color.accentNegativeStronger]}),o_=function(e){var t=e.id,n=e.value,r=e.loading,i=e.disabled,o=e.onChange,a=e.error,l=e.placeholder,c=e.type,s=void 0===c?"text":c,u=e.onFocus,d=(0,oy.Ar)(n),f=(0,b.useId)();return s||(s="text"),(0,g.BX)(R.G,{css:oS.self,children:[(0,g.tZ)(ty.II,{id:t,value:!r&&d?n:"",onChange:function(e){return o(e.target.value)},css:r?oS.loading:oS.input,disabled:r||i,"aria-describedby":f,placeholder:r?"":l,type:s,onFocus:u}),a?(0,g.tZ)(R.G,{css:oS.error,"aria-live":"polite","aria-atomic":"true",id:f,children:(0,g.tZ)("span",{children:a})}):null]})},oE=[B.l0.borderRadius(8),B.l0.width(32),B.l0.height(32),eN.gU.filled,B.l0.justify.center,B.l0.align.center],oT=(0,D.X)({root:[B.l0.rowWithGap(8),B.l0.align.center],iconButton:[B.l0.height("100%"),B.l0.borderRadius(8),{"& button":B.l0.height(32)}],keyInput:[B.l0.width("40%")],valueInput:[B.l0.flex.growAndShrink(1)],secretDifferentInDev:[oE,B.l0.color.orangeStrongest],secretSameInDev:[oE,B.l0.color.accentPrimaryStrongest],deploymentOnly:[oE,B.l0.color.accentPrimaryStrongest]});function oR(e){var t=e.existsInDev,n=e.isDifferentInDev;return t?n?(0,g.tZ)(eJ.u,{tooltip:"The value of this secret differs from the workspace value",children:(0,g.tZ)(R.G,{css:oT.secretDifferentInDev,children:(0,g.tZ)(ox.Z,{})})}):(0,g.tZ)(eJ.u,{tooltip:"The value of this secret is the same as the workspace value",children:(0,g.tZ)(R.G,{css:oT.secretSameInDev,children:(0,g.tZ)(oC.Z,{})})}):(0,g.tZ)(eJ.u,{tooltip:"This secret only exists as a deployment secret",children:(0,g.tZ)(R.G,{css:oT.deploymentOnly,children:(0,g.tZ)(ok.Z,{})})})}var oD=function(e){var t=e.index,n=e.name,r=e.value,i=e.disabled,o=e.updateEnvVarName,a=e.updateEnvVarValue,l=e.removeEnvVar,c=e.otherKeys,s=e.devSecrets,u=(0,tt.U)(),d=(0,v._)((0,b.useState)(""===n||""===r),2),f=d[0],h=d[1],p=!!(n&&r),m=(0,ov.Z)(p),y=(0,om.Z)(function(){y.current&&m.current&&h(!1)},[m]),w=!!(s&&s.has(n)),Z=!!(w&&s&&s.get(n)!==r);return f?(0,g.BX)(g.HY,{children:[(0,g.BX)(R.G,{css:oT.root,innerRef:y,children:[(0,g.tZ)(R.G,{css:oT.keyInput,children:(0,g.tZ)(ty.II,{placeholder:"Name",id:"".concat(u,"-name-").concat(t),value:n,onChange:function(e){return o(e.currentTarget.value)},onKeyDown:function(e){"Enter"===e.key&&p&&h(!1)},disabled:i})}),(0,g.tZ)(R.G,{css:oT.valueInput,children:(0,g.tZ)(ty.II,{placeholder:"Value",name:"".concat(u,"-value-").concat(t),value:r,onChange:function(e){return a(e.currentTarget.value)},onKeyDown:function(e){"Enter"===e.key&&p&&h(!1)},disabled:i})}),i?null:(0,g.tZ)(rr.Tg,{elevated:!0,css:oT.iconButton,children:(0,g.tZ)(H.hU,{alt:"Add",tooltipBehavior:"hidden",onClick:function(){p?h(!1):l()},children:p?(0,g.tZ)(r_.Z,{}):(0,g.tZ)(th.Z,{})})})]}),c.includes(n)?(0,g.BX)(T.xv,{variant:"small",css:{color:B.TV.accentNegativeDefault},children:['Secret "',n,'" already exists']}):null]}):(0,g.BX)(R.G,{css:oT.root,children:[(0,g.tZ)(oR,{existsInDev:w,isDifferentInDev:Z}),(0,g.tZ)(i8.u_,{value:n}),(0,g.tZ)(i8.BH,{value:r}),(0,g.tZ)(i8.$M,{onEdit:function(){return h(!0)},onDelete:function(){return l()}})]})},oI=function(e){var t,n,r,i,o,a=e.id,l=e.subdomain,c=e.deploymentId,s=e.onChange,u=e.updateValidity,d=(0,t8.P5)({type:"string",controlName:"flag-fallback-deployments-domain",default:i_.q7}),f=d!==i_.q7,h=(t={variables:{subdomain:l,deploymentId:c},skip:0===l.length},n=(0,G._)({},ow,t),ea.a(oZ,n)),p=h.data,m=h.loading,v=h.error,y=(null==p?void 0:p.replitAppSubdomainAvailability.__typename)==="ReplitAppSubdomainAvailabilityResult"&&p.replitAppSubdomainAvailability.available,w=(null==p?void 0:p.replitAppSubdomainAvailability.__typename)==="ReplitAppSubdomainAvailabilityResult"?p.replitAppSubdomainAvailability.message:null==p?void 0:null===(r=p.replitAppSubdomainAvailability)||void 0===r?void 0:r.errorMessage;return((0,b.useEffect)(function(){u(y)},[y]),v)?(0,g.tZ)(E.E,{colorway:"negative",text:"Something went wrong, please try refreshing the page."}):(0,g.BX)(R.G,{children:[(0,g.BX)(R.G,{css:[B.l0.rowWithGap(4),B.l0.align.center],children:[(0,g.tZ)(ty.II,{id:a,placeholder:"subdomain",value:l,onChange:function(e){return s(e.target.value)}}),(0,g.BX)(T.xv,{multiline:!1,children:[(null===(o=window)||void 0===o?void 0:null===(i=o.location)||void 0===i?void 0:i.hostname)!=="replit.com"?".staging":"",".",d]})]}),(0,g.BX)(R.G,{css:[B.l0.rowWithGap(4),B.l0.align.center,B.l0.pt(4)],children:[m?(0,g.BX)(g.HY,{children:[(0,g.tZ)(j.Z,{}),(0,g.tZ)(T.xv,{multiline:!1,children:"Checking availability"})]}):null,y?(0,g.BX)(g.HY,{children:[(0,g.tZ)(r_.Z,{color:"green"}),(0,g.tZ)(T.xv,{css:[B.l0.color.greenDefault],multiline:!1,children:"Available"})]}):null,y||m?null:(0,g.BX)(g.HY,{children:[(0,g.tZ)(I.Z,{color:"red"}),(0,g.tZ)(T.xv,{css:[B.l0.color.redDefault],multiline:!1,children:w})]}),f?(0,g.tZ)(E.E,{colorway:"warning",text:"The ".concat(i_.q7," domain is currently unavailable, please use the ").concat(d," URL above.")}):null]})]})},oB=function(e){var t=e.appType,n=e.onChange,r=(0,tt.U)();return(0,g.tZ)(og.hE,{name:"deploymentTargetSelector",value:t,onChange:n,row:!0,css:[B.l0.width("100%"),B.l0.flex.row],children:[{value:eh.Vp.Server,name:"Web Server",description:"ex. an API or website"},{value:eh.Vp.Worker,name:"Background Worker",description:"ex. a Discord or Slack bot"}].map(function(e,t){return(0,g.tZ)(R.G,{css:[B.l0.flex.grow(1)],children:(0,g.tZ)(eJ.u,{tooltip:e.description,children:(0,g.tZ)(og.rK,{id:r(e.value),value:e.value,text:e.name})})},t)})})},oG=n(86763),oP=n.n(oG),oA=n(21882),oL=n(47483),oN=n(42649),oO=n(41636),oU=(0,D.X)({self:{ul:{maxHeight:"300px"}},select:[B.l0.border()],error:[B.l0.color.accentNegativeStronger],button:[B.l0.reset.button,B.l0.viewStyle,eN.gU.nofill,B.l0.align.center,B.l0.display.inlineFlex,{borderColor:eN.gU.outlined.borderColor}],popover:[B.l0.width("max-content"),B.l0.overflow("auto"),B.l0.p(1),B.l0.minWidth(240)],listbox:[B.l0.maxHeight(300),B.l0.minWidth(300),B.l0.overflow("auto")],dropdownItemAndContainer:[B.l0.flex.row,B.l0.align.center,eN.gU.listItem,B.l0.px(8),B.l0.py(4)],selectedItemAndContainer:[B.l0.px(8),B.l0.py(4),B.l0.justify.spaceBetween,B.l0.align.center,B.l0.rowWithGap(8)],selectedTimezoneCode:[B.l0.align.center,B.l0.textAlign.left,B.l0.rowWithGap(8)],timezoneCode:[B.l0.align.center,B.l0.textAlign.left,B.l0.rowWithGap(8)],selectedCheckIcon:[B.l0.align.center,B.l0.flex.row],header:[B.l0.pt(8),B.l0.px(8),B.l0.pb(4),B.l0.flex.growAndShrink(1),{borderBottom:"1px solid ".concat(B.TV.outlineDimmest)}],search:[B.l0.p(8),{borderBottom:"1px solid ".concat(B.TV.outlineDimmest)}],searchInput:[B.l0.width("100%")],dropdownHeader:[B.l0.fontWeight.medium],loading:[B.l0.maxWidth(70),nl.p.backgroundPulse(B.TV.backgroundHighest,B.TV.backgroundHigher)]});function oX(e){var t=e.initialTimezone,n=e.onChange,r=e.loading,i=e.error,o=(0,v._)((0,b.useState)(),2),a=o[0],l=o[1],c=(0,b.useId)();return(0,b.useEffect)(function(){if(!r){if(t&&!a){l(t);return}if(!a&&!t){var e=Intl.DateTimeFormat().resolvedOptions().timeZone;if((0,i_.lb)(e)){n(e),l(e);return}var i="America/Los_Angeles";i&&(n(i),l(i))}}},[n,a,t,r]),(0,g.BX)(R.G,{css:oU.self,children:[r||!a?(0,g.tZ)(ty.II,{css:oU.loading,disabled:!0}):(0,g.tZ)(oj,{selectedTzCode:a,onSelectionChange:function(e){"string"==typeof e&&(n(e),l(e))},css:oU.select}),i?(0,g.tZ)(R.G,{css:oU.error,"aria-live":"polite","aria-atomic":"true",id:c,children:(0,g.tZ)("span",{children:i})}):null]})}var oM=(0,D.X)({self:[oU.dropdownItemAndContainer,B.l0.justify.spaceBetween,{backgroundColor:eN.vb.interactiveBackground}]});function oF(e){var t=e.title;return(0,g.BX)(R.G,{css:oU.selectedItemAndContainer,children:[(0,g.tZ)(R.G,{css:oU.selectedTimezoneCode,children:(0,g.tZ)(T.xv,{variant:"text",color:"dimmer",children:t})}),(0,g.tZ)(tg.Z,{})]})}function oW(e){var t=e.tzCode,n=e.selected;return(0,g.BX)(R.G,{css:n?oM.self:oU.dropdownItemAndContainer,children:[(0,g.tZ)(R.G,{css:oU.timezoneCode,children:(0,g.tZ)(T.xv,{variant:"text",color:n?"default":"dimmer",children:t.replace(/_/g," ").replace(/\//g,", ")})}),(0,g.tZ)(R.G,{css:oU.selectedCheckIcon,children:n?(0,g.tZ)(r_.Z,{size:16}):null})]})}var oV=(0,D.X)({self:[oU.button,B.l0.align.center,B.l0.px(8),B.l0.py(4),(0,S._)({},B.BC.min("mobileMax"),[B.l0.rowWithGap(4)])]});function oH(e){return e.toLowerCase().replaceAll("_"," ")}var oz=iB.y.map(function(e){var t=e.value,n=e.abbr,r=e.utc,i=oH(t),o=oH(n),a=r.map(function(e){return{tzCode:e,normalizedUtcValue:oH(e)}});return(0,P._)((0,G._)({},e),{normalizedValue:i,normalizedAbbr:o,normalizedUtc:a,searchableText:oH([e.value,e.abbr].concat((0,C._)(e.utc)).join(" "))})});function oj(e){var t=e.selectedTzCode,n=e.onSelectionChange,r=(0,v._)((0,b.useState)(""),2),i=r[0],o=r[1],a=(0,v._)((0,b.useState)(iB.y),2),l=a[0],c=a[1],s=(0,v._)((0,b.useState)(iB.y.find(function(e){return e.utc.includes(t)})),2),u=s[0],d=s[1];(0,b.useEffect)(function(){d(iB.y.find(function(e){return e.utc.includes(t)}))},[t]);var f=oP()(function(e){c(function(e){if(!e)return iB.y;var t=oH(e);return oz.map(function(n){var r=0,i=n.searchableText,o=n.normalizedValue,a=n.normalizedAbbr,l=n.normalizedUtc,c=n.utc;if(i.includes(t)){o.includes(t)&&(r+=10/(o.indexOf(t)+1)),a.includes(t)&&(r+=8/(a.indexOf(t)+1));var s=c;return l.some(function(e){return e.normalizedUtcValue.includes(t)})&&(r+=5,e.length>=3&&(s=l.map(function(e){var n=e.tzCode,r=e.normalizedUtcValue;return r.includes(t)?{tzCode:n,utcScore:5/(r.indexOf(t)+1)}:{tzCode:n,utcScore:0}}).sort(function(e,t){return t.utcScore-e.utcScore}).map(function(e){return e.tzCode}))),(0,P._)((0,G._)({},n),{utc:s,score:r})}return(0,P._)((0,G._)({},n),{score:0})}).filter(function(e){return e.score>0}).sort(function(e,t){return t.score-e.score})}(e))},100),h=function(e){o(e),f(e)};return(0,g.BX)(oA.Ph,{onSelectionChange:n,"aria-label":"Timezone Select",children:[u?(0,g.tZ)(tC.z,{css:oU.button,children:(0,g.tZ)(oF,{title:u.abbr})}):(0,g.tZ)(eJ.u,{tooltip:"Could not detect valid timezone. Please try again, or contact support.",children:(0,g.BX)(tC.z,{css:oV.self,children:[(0,g.tZ)(T.xv,{color:"dimmer",children:"Select"}),(0,g.tZ)(eY.Z,{})]})}),(0,g.BX)(tp.Bf,{noArrow:!0,css:oU.popover,background:"default",placement:"bottom right",children:[(0,g.tZ)(R.G,{css:oU.search,children:(0,g.tZ)(ty.II,{css:oU.searchInput,value:i,onChange:function(e){return h(e.target.value)},placeholder:"Search"})}),(0,g.tZ)(oL.wb,{css:oU.listbox,children:l.map(function(e){var n=e.value,r=e.abbr,i=e.utc;return(0,g.BX)(oN.$0,{children:[(0,g.tZ)(oO.h,{css:oU.header,children:(0,g.BX)(T.xv,{variant:"small",color:"dimmest",css:oU.dropdownHeader,children:[n," (",r,")"]})}),i.map(function(e){return(0,g.tZ)(oL.m9,{id:e,children:(0,g.tZ)(oW,{tzCode:e,selected:e===t})},e)})]},n)})})]})]})}var oq=n(82419),oJ={scheduleToCronExpression:{inputTarget:rt.i3.ENGLISH,outputTarget:rt.i3.CRON},cronExpressionToSchedule:{inputTarget:rt.i3.CRON,outputTarget:rt.i3.ENGLISH}},oY=function(e){var t,n=e.type,r=e.onTranslation,i=e.onError,o=(0,b.useRef)(null),a=(0,v._)((0,b.useState)(!1),2),l=a[0],c=a[1],s=function(e,t){var n,r;n=Error(e),ew.$e(function(e){e.setTag("deployments-pane",!0),e.setTag("context","useScheduledMachineConfigurationTranslator"),r&&e.setExtras(r),ew.Tb(n)}),i(t||e)},u=(0,rt.Vs)({onTranslation:function(e,t,i){if(!l&&(o.current&&clearTimeout(o.current),t)){if(!e){r("Unable to derive valid translation from description");return}var a,c=(a=e.match(/`([^`]+)`(?=[^`]*$)/))?a[1]:null;if(!c||"scheduleToCronExpression"===n&&!(0,oq.isValidCron)(c)){r("Unable to derive valid Cron expression from description");return}r(c),(0,ee.j)(ee.U3.DEPLOYMENT_SCHEDULE_TRANSLATION_GENERATED,{type:n,translation:e,prompt:i})}},onError:function(e){return s(e,"Error translating description")}}),d=u.sendMessage,f=u.loading,h=(t=(0,x._)(function(e){var t;return(0,k.Jh)(this,function(i){return(o.current&&clearTimeout(o.current),e)?"cronExpressionToSchedule"!==n||(0,oq.isValidCron)(e)?(t=oJ[n],d((0,P._)((0,G._)({},t),{content:e})),o.current=setTimeout(function(){c(!0),s("Translation timed out")},8e3)):r("Invalid cron expression"):r(""),[2]})}),function(e){return t.apply(this,arguments)});return(0,b.useEffect)(function(){return function(){o.current&&clearTimeout(o.current)}},[o]),{translate:h,loading:f}};function o$(){return(0,g.BX)("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,g.tZ)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M2.97978 15.6465C2.78451 15.8417 2.78451 16.1583 2.97978 16.3536L7.64644 21.0202C7.8417 21.2155 8.15829 21.2155 8.35355 21.0202C8.54881 20.825 8.54881 20.5084 8.35355 20.3131L4.54044 16.5L9.66666 16.5C9.9428 16.5 10.1667 16.2762 10.1667 16C10.1667 15.7239 9.9428 15.5 9.66666 15.5L4.54044 15.5L8.35355 11.6869C8.54881 11.4916 8.54881 11.1751 8.35355 10.9798C8.15829 10.7845 7.8417 10.7845 7.64644 10.9798L2.97978 15.6465Z",fill:B.TV.blurpleStronger}),(0,g.tZ)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M16.3889 12.2661C16.259 11.9113 15.741 11.9113 15.6111 12.2661L14.7182 14.7055C14.675 14.8237 14.577 14.9153 14.4536 14.9531L12.2883 15.6156C11.9044 15.7331 11.9037 16.2592 12.2873 16.3776L14.4544 17.0466C14.5773 17.0846 14.6749 17.1761 14.718 17.2939L15.6111 19.7339C15.741 20.0887 16.259 20.0887 16.3889 19.7339L17.2819 17.2942C17.3251 17.1762 17.4228 17.0846 17.546 17.0468L19.7122 16.381C20.0959 16.263 20.0959 15.737 19.7122 15.619L17.546 14.9532C17.4228 14.9154 17.3251 14.8238 17.2819 14.7058L16.3889 12.2661Z",fill:B.TV.blurpleStronger}),(0,g.tZ)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M29.0202 15.6465C29.2155 15.8417 29.2155 16.1583 29.0202 16.3536L24.3536 21.0202C24.1583 21.2155 23.8417 21.2155 23.6465 21.0202C23.4512 20.825 23.4512 20.5084 23.6465 20.3131L27.4596 16.5L22.3333 16.5C22.0572 16.5 21.8333 16.2762 21.8333 16C21.8333 15.7239 22.0572 15.5 22.3333 15.5L27.4596 15.5L23.6465 11.6869C23.4512 11.4916 23.4512 11.1751 23.6465 10.9798C23.8417 10.7845 24.1583 10.7845 24.3536 10.9798L29.0202 15.6465Z",fill:B.TV.blurpleStronger})]})}var oK=B.nC.min(480),oQ=(0,D.X)({cronConfig:[B.l0.colWithGap(8),B.l0.pb(16),B.l0.flex.growAndShrink(1),(0,S._)({},oK,[B.l0.colWithGap(0),B.l0.rowWithGap(8),B.l0.align.start])],scheduledLabeledInput:[B.l0.flex.growAndShrink(1)],crontabLabeledInput:[B.l0.flex.growAndShrink(1),B.l0.maxWidth(128)],translationSwitch:[B.l0.flex.shrink(1),B.l0.mb(4),(0,S._)({transform:"rotate(90deg)",alignSelf:"flex-start"},oK,{transform:"rotate(0deg)",marginBottom:0,paddingTop:30})],translationSwitchIcon:[B.l0.height(32),B.l0.width(32),B.l0.center],timezoneSelect:[B.l0.flex.shrink(1),(0,S._)({minWidth:75},oK,{paddingTop:30})],timeoutConfig:[B.l0.flex.row,B.l0.flex.growAndShrink(1),B.l0.width("100%"),B.l0.align.start,B.l0.pb(8)],notificationConfig:[B.l0.flex.row,B.l0.flex.growAndShrink(1),B.l0.width("100%"),B.l0.align.start,B.l0.pb(8)],selectedItemAndContainer:[B.l0.px(8),B.l0.py(4),B.l0.justify.spaceBetween,B.l0.align.center,B.l0.rowWithGap(8)],selectedTimeoutUnits:[B.l0.align.center,B.l0.textAlign.left,B.l0.rowWithGap(8)],button:[B.l0.reset.button,B.l0.viewStyle,eN.gU.nofill,B.l0.align.center,B.l0.display.inlineFlex,{borderColor:eN.gU.outlined.borderColor},B.l0.minWidth(100)],timeoutUnitsDropdown:[B.l0.ml(4)],dropdownItemAndContainer:[B.l0.flex.row,B.l0.align.center,eN.gU.listItem,B.l0.px(8),B.l0.py(4)],dropdownItem:[B.l0.align.center,B.l0.textAlign.left,B.l0.rowWithGap(8)],selectedCheckIcon:[B.l0.align.center,B.l0.flex.row],popover:[B.l0.width("max-content"),B.l0.overflow("auto"),B.l0.p(1),B.l0.minWidth(120)],timeoutLabeledSection:[B.l0.flex.row]}),o0=(0,D.X)({self:[oQ.dropdownItemAndContainer,B.l0.justify.spaceBetween,{backgroundColor:eN.vb.interactiveBackground}]}),o1=["minutes","hours"];function o2(e,t){var n=parseInt(e,10);return isNaN(n)?0:"hours"===t.toLowerCase()?3600*n:60*n}function o3(e){return/^\d+$/.test(e.trim())&&!isNaN(parseInt(e,10))}function o4(e,t){return o3(e)&&o2(e,t)>39600}function o8(e){var t=e.title;return(0,g.BX)(R.G,{css:oQ.selectedItemAndContainer,children:[(0,g.tZ)(R.G,{css:oQ.selectedTimeoutUnits,children:(0,g.tZ)(T.xv,{variant:"text",color:"dimmer",children:t})}),(0,g.tZ)(tg.Z,{})]})}function o6(e){var t=e.item,n=e.selected;return(0,g.BX)(R.G,{css:n?o0.self:oQ.dropdownItemAndContainer,children:[(0,g.tZ)(R.G,{css:oQ.dropdownItem,children:(0,g.tZ)(T.xv,{variant:"text",color:n?"default":"dimmer",children:t})}),(0,g.tZ)(R.G,{css:oQ.selectedCheckIcon,children:n?(0,g.tZ)(r_.Z,{size:16}):null})]})}function o5(e){var t=e.callback,n=e.delay,r=(0,b.useRef)();return(0,b.useEffect)(function(){return function(){r.current&&clearTimeout(r.current)}},[]),{callerFunction:function(e){r.current&&clearTimeout(r.current),r.current=setTimeout(function(){return t(e)},n)}}}function o7(e){var t=e.crontab,n=e.setCrontab,r=e.crontabError,i=e.timezone,o=e.setTimezone,a=e.timezoneError,l=e.loading,c=void 0!==l&&l,s=e.timeoutValue,u=e.setTimeoutValue,d=e.timeoutUnits,f=e.setTimeoutUnits,h=e.setTimeoutValueError,p=(0,v._)((0,b.useState)(!1),2),m=p[0],y=p[1],w=(0,v._)((0,b.useState)(null),2),Z=w[0],x=w[1],C=(0,v._)((0,b.useState)(null),2),k=C[0],S=C[1],_=(0,v._)((0,b.useState)("scheduleToCronExpression"),2),E=_[0],T=_[1],D="scheduleToCronExpression"===E,I="cronExpressionToSchedule"===E,G=oY({type:E,onTranslation:function(e){y(!1),D?n(e):I&&S(e)},onError:function(e){y(!1),x(e)}}),P=G.translate,A=G.loading,L=o5({callback:function(e){return P(e)},delay:3e3}).callerFunction,N=o5({callback:y,delay:500}).callerFunction,O=function(e,t){switch(t){case"scheduleToCronExpression":S(e);break;case"cronExpressionToSchedule":n(e)}U&&y(!1),""!==e&&null!==e&&(N(!0),L(e))},U=A||m;if((0,b.useEffect)(function(){h(!o3(s)||o4(s,d))},[s,d,h]),Z)return(0,g.BX)(R.G,{children:[(0,g.tZ)(R.G,{css:oQ.crontabLabeledInput,children:(0,g.tZ)(ib,{id:"cronExpression",title:"Cron expression",information:"A cron expression is a string of characters used to define a schedule for running tasks at specific times or intervals in software applications.",warning:"".concat(Z,". Enter valid Cron expression."),grow:!0,children:(0,g.tZ)(o_,{id:"cronExpression",value:t,placeholder:"* * * * *",loading:c,disabled:!1,onChange:n,error:r})})}),(0,g.tZ)(R.G,{css:oQ.timezoneSelect,children:(0,g.tZ)(oX,{initialTimezone:i,onChange:o,error:a,loading:c})})]});var X="";return o3(s)?o4(s,d)&&(X="Please enter a value less than the maximum of 11 hours"):X="Please enter a positive whole number",(0,g.BX)(R.G,{children:[(0,g.BX)(R.G,{css:oQ.cronConfig,children:[(0,g.tZ)(R.G,{css:oQ.scheduledLabeledInput,children:(0,g.tZ)(ib,{id:"schedule",title:"Schedule description",information:"Describe when you want your scheduled deployment to run",grow:!0,children:(0,g.tZ)(o_,{id:"describeSchedule",value:k,placeholder:t?"":"Every day at 3:00 AM",loading:c,disabled:U&&!D,onChange:function(e){return O(e,"scheduleToCronExpression")},onFocus:function(){return T("scheduleToCronExpression")}})})}),(0,g.tZ)(R.G,{css:oQ.translationSwitch,children:(0,g.tZ)(eJ.u,{tooltip:"When you type, Replit AI will translate between these properties",children:(0,g.tZ)(R.G,{css:oQ.translationSwitchIcon,children:U?(0,g.tZ)(j.Z,{color:B.TV.blurpleStronger}):(0,g.tZ)(o$,{})})})}),(0,g.tZ)(R.G,{css:oQ.crontabLabeledInput,children:(0,g.tZ)(ib,{id:"cronExpression",title:"Cron expression",information:"A cron expression is a string of characters used to define a schedule for running tasks at specific times or intervals in software applications.",grow:!0,children:(0,g.tZ)(o_,{id:"cronExpression",value:t,placeholder:"* * * * *",loading:c,disabled:U&&!I,onChange:function(e){return O(e,"cronExpressionToSchedule")},onFocus:function(){return T("cronExpressionToSchedule")},error:r})})}),(0,g.tZ)(R.G,{css:oQ.timezoneSelect,children:(0,g.tZ)(oX,{initialTimezone:i,onChange:o,error:a,loading:c})})]}),(0,g.tZ)(R.G,{css:oQ.timeoutConfig,children:(0,g.tZ)(ib,{id:"timeout",title:"Job timeout",information:"The maximum amount of time each execution of your scheduled job will run before being stopped",grow:!0,children:(0,g.BX)(R.G,{css:oQ.timeoutLabeledSection,children:[(0,g.tZ)(o_,{id:"timeoutValue",value:s,placeholder:"",loading:c,disabled:!1,onChange:function(e){return u(null!=e?e:"")},error:X,type:"number"}),(0,g.BX)(oA.Ph,{css:oQ.timeoutUnitsDropdown,defaultSelectedKey:o1[0],selectedKey:d,onSelectionChange:function(e){return f(e.toString())},children:[(0,g.tZ)(tC.z,{css:oQ.button,children:(0,g.tZ)(o8,{title:d})}),(0,g.tZ)(tp.Bf,{css:oQ.popover,background:"default",placement:"bottom right",children:(0,g.tZ)(oL.wb,{children:o1.map(function(e){return(0,g.tZ)(oL.m9,{id:e,children:(0,g.tZ)(o6,{item:e,selected:e===d})},e)})})})]})]})})})]})}var o9=n(73878);function ae(){var e=(0,ei._)(["\n  fragment DeploymentsDeployOptionsDeployment on HostingDeployment {\n    id\n    replitAppSubdomain\n    currentBuild {\n      id\n      provider\n      envVars {\n        name\n        value\n      }\n      machineJob {\n        timezone\n        crontab\n        timeoutSeconds\n        failureNotifications\n      }\n    }\n  }\n"]);return ae=function(){return e},e}function at(){var e=(0,ei._)(["\n  query DeploymentsDeployOptions($id: String!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        ...DeploymentsDeployOptionsDeployment\n      }\n    }\n  }\n  ","\n"]);return at=function(){return e},e}var an={},ar=(0,eo.Ps)(ae()),ai=(0,eo.Ps)(at(),ar);function ao(e){var t=e.isPrivate,n=e.setIsPrivate;return(0,g.tZ)(ib,{id:"deploymentPrivacy",title:"Visibility",information:"Whether your deployment URL should be accessible to the public internet or only to authorized Replit users",children:(0,g.BX)(og.hE,{name:"deploymentPrivacySelector",value:t,onChange:n,row:!0,css:[B.l0.width("100%"),B.l0.flex.row],children:[(0,g.tZ)(og.rK,{id:"deployment-privacy-disabled",value:!1,text:"Public",icon:(0,g.tZ)(ok.Z,{})}),(0,g.tZ)(og.rK,{id:"deployment-privacy-enabled",value:!0,text:"Private",icon:(0,g.tZ)(iO.Z,{})})]})})}function aa(){return(aa=(0,x._)(function(e){var t,n,r,i,o,a,l,c,s,u,d,f,h,p,m,v,g;return(0,k.Jh)(this,function(y){switch(y.label){case 0:t=["webpack.config.js","vite.config.js","webpack.config.ts","vite.config.ts"],n=!0,r=!1,i=void 0,y.label=1;case 1:y.trys.push([1,6,7,8]),o=t[Symbol.iterator](),y.label=2;case 2:if(n=(a=o.next()).done)return[3,5];return l=a.value,[4,e.stat(l)];case 3:if(!((c=y.sent()).exists&&c.type===o9.Tv.File))return[3,4];return[2,"dist"];case 4:return n=!0,[3,2];case 5:return[3,8];case 6:return s=y.sent(),r=!0,i=s,[3,8];case 7:try{n||null==o.return||o.return()}finally{if(r)throw i}return[7];case 8:u=["dist","build","public"],d=!0,f=!1,h=void 0,y.label=9;case 9:y.trys.push([9,14,15,16]),p=u[Symbol.iterator](),y.label=10;case 10:if(d=(m=p.next()).done)return[3,13];return v=m.value,[4,e.stat(v)];case 11:if(!((g=y.sent()).exists&&g.type===o9.Tv.Directory))return[3,12];return[2,v];case 12:return d=!0,[3,10];case 13:return[3,16];case 14:return s=y.sent(),f=!0,h=s,[3,16];case 15:try{d||null==p.return||p.return()}finally{if(f)throw h}return[7];case 16:return[2]}})})).apply(this,arguments)}var al=(0,D.X)({self:B.l0.colWithGap(16),footer:B.l0.colWithGap(0),ctaGroup:[B.l0.rowWithGap(8),B.l0.pt(12)],deployButton:B.l0.flex.grow(1),secretsModal:[B.l0.colWithGap(8)],secretsModalButtons:[B.l0.rowWithGap(8),B.l0.justify.end,B.l0.pt(8)]}),ac=function(e){var t,n,r,i,o,a,l,c,s,u,d,f,h,p,m,y,C,S,_=e.deploymentId,E=e.initialSubdomain,D=e.provider,I=e.machine,P=e.secrets,A=e.fs,L=e.ports,N=e.dotReplit,O=e.onDeploy,U=e.onCancel,X=e.onError,M=e.initialSecretsSyncExpanded,F=e.openNetworkingPane,W=(0,w.kW)(),V=(0,w.XA)().deployBuild,q=(t=(0,G._)({},an,{skip:!_,variables:{id:null!=_?_:""},fetchPolicy:"cache-and-network",ssr:!1,onCompleted:function(e){var t=(null===(n=e.hostingDeployment)||void 0===n?void 0:n.__typename)==="HostingDeployment"?e.hostingDeployment:null;if(t){if(t.replitAppSubdomain&&(ec(t.replitAppSubdomain),ed(!0)),t.currentBuild.machineJob&&(ek(t.currentBuild.machineJob.timezone),eI(t.currentBuild.machineJob.crontab),t.currentBuild.machineJob.timeoutSeconds)){var n,r,i,o=t.currentBuild.machineJob.timeoutSeconds;o%3600==0?(r=o/3600,i="Hours"):(r=Math.floor(o/60),i="Minutes"),eJ(r.toString()),eK(i)}eN(t.currentBuild.envVars.map(function(e){return{name:e.name,value:e.value}}))}}}),ea.a(ai,t)),J=q.data,Y=q.loading,$=(r=(n={provider:D,fs:A,secrets:P,dotReplit:N,isNewDeployment:!_,onError:X,onOptions:function(e){e.appType&&ei(e.appType),e.envVars&&eN(e.envVars),e.ignorePorts&&eX(e.ignorePorts),e.buildCommand&&em(e.buildCommand),e.runCommand&&ey(e.runCommand),e.publicDir&&eW(e.publicDir)}}).isNewDeployment,i=n.provider,o=n.fs,a=n.secrets,l=n.onOptions,c=n.onError,s=n.dotReplit,d=(u=(0,v._)((0,b.useState)(!0),2))[0],f=u[1],h=(0,ov.Z)(c),p=(0,ov.Z)(l),(0,b.useEffect)(function(){var e=!1;function t(){return(t=(0,x._)(function(){var t,n,l,c,u,d,h,m,g;return(0,k.Jh)(this,function(y){switch(y.label){case 0:return t=eh.Vp.Server,n=null,l=null,c=null,u=null,[4,Promise.all([r?(0,oe.QX)(a):Promise.resolve(null),(0,oe.$f)(s)])];case 1:if(h=(d=v._.apply(void 0,[y.sent(),2]))[0],m=d[1],e)return[2];if(r)switch(i){case eh.r4.Gce:t=m.ignorePorts?eh.Vp.Worker:eh.Vp.Server;break;case eh.r4.CloudRun:t=eh.Vp.CloudRun;break;case eh.r4.Static:t=eh.Vp.Static;break;case eh.r4.Cron:t=eh.Vp.Cron}else m.appType&&(t=m.appType);if(l=m.buildCommand,!(t!==eh.Vp.Static))return[3,2];return n=m.runCommand,[3,5];case 2:if(!m.publicDir)return[3,3];return c=m.publicDir,[3,5];case 3:return[4,function(e){return aa.apply(this,arguments)}(o)];case 4:(g=y.sent())&&(c=g),y.label=5;case 5:return i===eh.r4.Gce&&(u=m.ignorePorts),p.current({appType:t,envVars:h,buildCommand:l,runCommand:n,publicDir:c,ignorePorts:u}),f(!1),[2]}})})).apply(this,arguments)}try{!function(){t.apply(this,arguments)}()}catch(e){h.current(e.message),f(!1)}return function(){e=!0}},[i,o,s,h,p,r,a]),{loading:d}).loading,K=(null==J?void 0:null===(C=J.hostingDeployment)||void 0===C?void 0:C.__typename)==="HostingDeployment"?J.hostingDeployment:null,Q=null==K?void 0:K.currentBuild,ee=void 0!==Q,en=(0,v._)((0,b.useState)(eh.Vp.Server),2),er=en[0],ei=en[1],eo=(0,v._)((0,b.useState)(E),2),el=eo[0],ec=eo[1],es=(0,v._)((0,b.useState)(!1),2),eu=es[0],ed=es[1],ef=(0,v._)((0,b.useState)(null),2),ep=ef[0],em=ef[1],ev=(0,v._)((0,b.useState)(null),2),eg=ev[0],ey=ev[1],eb=(0,v._)((0,b.useState)(void 0),2),ew=eb[0],eZ=eb[1],ex=(0,v._)((0,b.useState)(null),2),eC=ex[0],ek=ex[1],eS=(0,v._)((0,b.useState)(void 0),2),e_=eS[0],eE=eS[1],eT=(0,v._)((0,b.useState)(null),2),eD=eT[0],eI=eT[1],eB=(0,v._)((0,b.useState)(void 0),2),eG=eB[0],eP=eB[1],eA=(0,v._)((0,b.useState)(null!==(S=null==Q?void 0:Q.envVars.map(function(e){return{name:e.name,value:e.value}}))&&void 0!==S?S:[]),2),eL=eA[0],eN=eA[1],eO=(0,v._)((0,b.useState)(!1),2),eU=eO[0],eX=eO[1],eM=(0,v._)((0,b.useState)(null),2),eF=eM[0],eW=eM[1],eV=(0,v._)((0,b.useState)(void 0),2),eH=eV[0],ez=eV[1],ej=(0,v._)((0,b.useState)("10"),2),eq=ej[0],eJ=ej[1],eY=(0,v._)((0,b.useState)(o1[0]),2),e$=eY[0],eK=eY[1],eQ=(0,v._)((0,b.useState)(!1),2),e0=eQ[0],e1=eQ[1],e2=(0,v._)((0,b.useState)(!1),2),e3=e2[0],e4=e2[1],e8=(0,t8.P5)({controlName:i_.BP,logFlagToAnalytics:!1}),e5=i9({secrets:P}).devSecrets;(0,b.useEffect)(function(){et({context:"deploy_options"})},[]);var e7=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,n=e.value;eN(function(e){return(0,eR.Uy)(e,function(e){e.push({name:null!=t?t:"",value:null!=n?n:""})})})},e9=function(e,t){eN(function(n){return(0,eR.Uy)(n,function(n){n[e].name=t})})},te=function(e,t){eN(function(n){return(0,eR.Uy)(n,function(n){n[e].value=t})})},tt=function(e){eN(function(t){return(0,eR.Uy)(t,function(t){t.splice(e,1)})})},tn=er!==eh.Vp.Static,tr=D===eh.r4.Gce,ti=er===eh.Vp.Static,to=D!==eh.r4.Cron&&!(null==K?void 0:K.replitAppSubdomain),ta=D===eh.r4.Cron,tl=er===eh.Vp.Server||er===eh.Vp.CloudRun,tc=(m=(0,x._)(function(){var e,t,n,r,i,o;return(0,k.Jh)(this,function(a){switch(a.label){case 0:if(n=(!to||eu)&&el.length?el:void 0,i=null!==(r=null==K?void 0:null===(t=K.currentBuild)||void 0===t?void 0:null===(e=t.machineJob)||void 0===e?void 0:e.failureNotifications)&&void 0!==r&&r,!n)return[2];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,V({envVars:eL.filter(function(e){return(0,oy.GV)(e)}),subdomain:n,machineConfigurationId:(null==I?void 0:I.configurationId)||void 0,maxMachineInstances:(null==I?void 0:I.maxInstances)||void 0,machineJob:eC&&eD?{timezone:eC,crontab:eD,timeoutSeconds:o2(eq,e$),failureNotifications:i}:void 0,config:{buildCommand:ep,runCommand:eg,appType:er,ignorePorts:eU,publicDir:eF},isPrivate:e3})];case 2:return a.sent(),O(),[3,4];case 3:if((o=a.sent())instanceof ot.ZG)return eZ("Run command cannot be empty."),[2];if(o instanceof ot.SF)return ez("Public directory cannot be empty."),[2];if(o instanceof ot.Iy)return eE(o.message||"Invalid timezone."),[2];if(o instanceof ot.Bz)return eP(o.message||"Invalid crontab."),[2];return X(o.message),[3,4];case 4:return[2]}})}),function(){return m.apply(this,arguments)}),ts=(0,v._)((0,b.useState)(!1),2),tu=ts[0],td=ts[1],tf=(0,v._)((0,b.useState)(!1),2),th=tf[0],tp=tf[1],tm=(0,(0,w.BU)().getDeployabilityByProvider)(D),tv=ee?tm.redeploy.isAuthorized:tm.deploy.isAuthorized,tg=Y||$||!tv||W===Z.z.Preparing||e0,ty=tg||to&&!eu,tb=eL.map(function(e){return e.name}),tw=(y=(0,x._)(function(){return(0,k.Jh)(this,function(e){switch(e.label){case 0:return td(!0),[4,P.addEntries(eL.map(function(e){return{key:e.name,value:e.value}}))];case 1:return e.sent(),td(!1),tp(!1),[2]}})}),function(){return y.apply(this,arguments)}),tZ=$?(0,g.BX)(g.HY,{children:[(0,g.tZ)(iw,{}),(0,g.tZ)(iw,{}),(0,g.tZ)(iw,{})]}):(0,g.BX)(g.HY,{children:[ta?(0,g.tZ)(o7,{crontab:eD,setCrontab:eI,crontabError:eG,timezone:eC,setTimezone:ek,timezoneError:e_,loading:Y,timeoutValue:eq,setTimeoutValue:eJ,timeoutUnits:e$,setTimeoutUnits:eK,setTimeoutValueError:e1}):null,to?(0,g.tZ)(ib,{id:"primaryDomain",title:"Primary domain",information:"You can add more custom domains after deploying",children:(0,g.tZ)(oI,{id:"primaryDomain",subdomain:el,deploymentId:_||void 0,onChange:ec,updateValidity:ed})}):null,ti?(0,g.tZ)(ib,{id:"publicDir",title:"Public directory",information:"The public directory is the folder where the browser should start when serving your static site",children:(0,g.tZ)(o_,{id:"publicDir",value:eF,onChange:eW,loading:$,disabled:tg,error:eH})}):null,(0,g.tZ)(ib,{id:"buildCommand",title:"Build command",information:"The build command is the command-line statement that compiles your app at build time.",optional:!0,children:(0,g.tZ)(o_,{id:"buildCommand",value:ep,onChange:em,loading:$,disabled:tg})}),tn?(0,g.tZ)(ib,{id:"runCommand",title:"Run command",information:"The run command is the command-line statement that launches your app after it has been built.",children:(0,g.tZ)(o_,{id:"runCommand",value:eg,onChange:ey,loading:$,disabled:tg,error:ew})}):null,(0,g.tZ)(ib,{id:"envVars",title:"Deployment secrets",information:"Secrets, or environment variables, are private keys you can use to access APIs and services",actions:_&&eL.length>0?(0,g.tZ)(H.hU,{alt:"Copy all secrets from Deployment to Development.",disabled:tu,onClick:function(){tp(!0)},children:(0,g.tZ)(z.Z,{})}):null,children:(0,g.BX)(R.G,{css:[B.l0.colWithGap(12)],children:[eL.length>0?eL.map(function(e,t){var n=e.name,r=e.value;return(0,g.tZ)(oD,{index:t,name:n,value:r,updateEnvVarName:function(e){return e9(t,e)},updateEnvVarValue:function(e){return te(t,e)},removeEnvVar:function(){return tt(t)},disabled:tg,otherKeys:tb.filter(function(e,n){return n!==t}),devSecrets:e5},t)}):null,e5?(0,g.tZ)(i7,{secrets:new Map(eL.map(function(e){return[e.name,e.value]})),otherSecrets:e5,otherEnvName:"workspace",onAddSecret:function(e){return e7({name:e.key,value:e.value})},initialExpanded:M}):null,(0,g.tZ)(e6.zx,{onClick:function(){return e7()},text:"Add deployment secret",iconLeft:(0,g.tZ)(i4.Z,{}),disabled:Y})]})}),tr?(0,g.tZ)(ib,{id:"deploymentAppType",title:"App type",information:"Configure your app based on whether it needs to serve traffic from the web.",children:(0,g.tZ)(oB,{appType:er,onChange:function(e){ei(e),eX((e===eh.Vp.Server||e===eh.Vp.Worker)&&e===eh.Vp.Worker)}})}):null,!ta&&e8?(0,g.tZ)(ao,{isPrivate:e3,setIsPrivate:e4}):null,tl?(0,g.tZ)(op,{ports:L,openNetworkingPane:F}):null]});return(0,g.BX)(g.HY,{children:[(0,g.BX)(R.G,{css:al.self,children:[tZ,(0,g.BX)(R.G,{css:al.footer,children:[(0,g.tZ)(i3,{deployability:tm,isRedeploy:ee}),(0,g.BX)(R.G,{css:al.ctaGroup,children:[Q?(0,g.tZ)(e6.zx,{text:"Cancel",onClick:U}):null,(0,g.tZ)(R.G,{css:al.deployButton,children:(0,g.tZ)(e6.zx,{colorway:"primary",onClick:tc,text:W===Z.z.Preparing&&"Preparing..."||$&&"Fetching options..."||"Deploy",iconLeft:$||W===Z.z.Preparing?(0,g.tZ)(j.Z,{}):(0,g.tZ)(t9.Z,{}),disabled:ty})})]})]})]}),(0,g.tZ)(iK.u,{isOpen:th,onRequestClose:function(){tu||tp(!1)},children:(0,g.BX)(R.G,{css:al.secretsModal,children:[(0,g.tZ)(T.xv,{variant:"subheadBig",children:"Copy secrets from Deployment to Development?"}),(0,g.tZ)(T.xv,{children:"Are you sure you want to copy all of your secrets from Deployment to Development? Secrets already present in Development will be overwritten and lost permanently."}),(0,g.BX)(R.G,{css:al.secretsModalButtons,children:[(0,g.tZ)(e6.zx,{text:"Cancel",disabled:tu,onClick:function(){tp(!1)}}),(0,g.tZ)(e6.zx,{text:"Yes, copy secrets",colorway:"negative",disabled:tu,loading:tu,onClick:tw})]})]})})]})};function as(){var e=(0,ei._)(["\n  query HostingDeploymentConfigRedeploy($id: String!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        replitAppSubdomain\n        activityLogs(count: 20) {\n          items {\n            id\n            ...HostingActivityLogLine2\n          }\n          pageInfo {\n            hasNextPage\n            nextCursor\n          }\n        }\n        currentBuild {\n          id\n          envVars {\n            name\n            value\n          }\n        }\n        ...DeploymentsDeployOptionsDeployment\n      }\n    }\n  }\n  ","\n  ","\n"]);return as=function(){return e},e}var au={},ad=(0,eo.Ps)(as(),r2,ar),af=(0,D.X)({self:B.l0.colWithGap(8),ctaGroup:{flexDirection:"row",gap:8,flexWrap:"wrap"},loading:rO,deployOptions:[B.l0.p(16),B.l0.pt(12),B.l0.borderRadius(8),B.l0.border({color:B.TV.outlineDimmest})]}),ah=function(e){var t,n,r,i,o,a,l,c,s,u,d,f,h,p,m,y,C=e.deploymentId,S=e.dotReplit,_=e.fs,T=e.ports,D=e.secrets,B=e.onError,P=e.expanded,A=e.setExpanded,L=e.shouldShowMobileTour,N=e.onDismissMobileTour,O=e.openNetworkingPane,U=e.onResume,X=(0,w.XA)().redeployWithNoNewOptions,M=(0,w.kW)(),F=(i=(t={deploymentId:C,dotReplit:S}).deploymentId,o=t.dotReplit,l=(a=(0,v._)((0,b.useState)(null),2))[0],c=a[1],(0,b.useEffect)(function(){var e=!1;function t(){return(t=(0,x._)(function(){var t;return(0,k.Jh)(this,function(n){switch(n.label){case 0:return[4,(0,oe.$f)(o)];case 1:if(t=n.sent(),e)return[2];return c(t),[2]}})})).apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){e=!0}},[o]),d=(s=(0,G._)({},au,{variables:{id:i},ssr:!1,fetchPolicy:"cache-and-network"}),u=ea.a(ad,s)).data,f=u.loading,h=u.error,p=(null==d?void 0:null===(n=d.hostingDeployment)||void 0===n?void 0:n.__typename)==="HostingDeployment"?d.hostingDeployment:null,(null==d?void 0:null===(r=d.hostingDeployment)||void 0===r?void 0:r.__typename)==="NotFoundError"?{deployment:null,config:null,error:"Deployment not found",loading:!1}:null===l||!p&&f?{data:null,erorr:null,loading:!0}:h||!p?{deployment:null,config:null,error:"Something went wrong",loading:!1}:{deployment:p,config:l,error:null,loading:!1}),W=(0,w.BU)().deployability,V=null===(m=F.deployment)||void 0===m?void 0:m.currentBuild,H=i9({secrets:D}).devSecrets,z=null===(y=F.deployment)||void 0===y?void 0:y.currentBuild.envVars,j=(0,b.useMemo)(function(){return H&&z?i6({secrets:new Map(null==z?void 0:z.map(function(e){return[e.name,e.value]})),otherSecrets:H}).missing.size:0},[H,z]);if(F.error)return(0,g.tZ)($,{text:F.error});if(P)return V?(0,g.tZ)(R.G,{css:af.deployOptions,children:(0,g.tZ)(ac,{initialSubdomain:"",provider:V.provider,deploymentId:C,fs:_,secrets:D,dotReplit:S,ports:T,onCancel:function(){return A(!1)},onDeploy:function(){return A(!1)},onError:B,initialSecretsSyncExpanded:j>0,openNetworkingPane:O})}):(0,g.tZ)(E.E,{colorway:"warning",icon:(0,g.tZ)(I.Z,{}),text:"Provider not found"});var q=F.loading||!W.redeploy.isAuthorized||!(M===Z.z.Ready||M===Z.z.Suspended);return(0,g.BX)(R.G,{css:af.self,children:[(0,g.tZ)(i3,{deployability:W,isRedeploy:!0}),(0,g.BX)(R.G,{css:af.ctaGroup,children:[(0,g.tZ)(e6.zx,{disabled:q,onClick:(0,x._)(function(){return(0,k.Jh)(this,function(e){switch(e.label){case 0:if(F.loading)return[2];if(M===Z.z.Suspended)return U(),[2];return[4,X()];case 1:return e.sent(),[2]}})}),text:M===Z.z.Suspended?"Resume":"Redeploy",iconLeft:(0,g.tZ)(t9.Z,{})}),(0,g.tZ)(e6.zx,{disabled:q,text:j>0?"".concat(j," ").concat((0,ie.Z)("secrets",j)," out of sync"):"Edit commands and secrets",iconLeft:j>0?(0,g.tZ)(I.Z,{}):void 0,onClick:function(){return A(!0)}}),(0,g.tZ)(i2,{shouldShow:L,onDismissTour:N})]})]})},ap=n(67790),am=n(63411),av=n(80786),ag=B.nC.min(320),ay=(0,D.X)({container:B.l0.colWithGap(4),label:[B.l0.flex.column,B.l0.pb(4),(0,S._)({},ag,[B.l0.flex.row,B.l0.justify.spaceBetween,B.l0.pb(0)])],resource:B.l0.fontWeight.medium,cost:[B.l0.rowWithGap(1),B.l0.align.baseline]}),ab=n(49853),aw=n(50366),aZ=[1,2,4,8],ax=aw.m0*aw.hU,aC=[ax,2*ax,4*ax,8*ax],ak=[[0,3],[0,4],[2,5],[3,6]],aS=aZ.length-1,a_=1/(2*aS),aE=(0,ab.cn)(0),aT=(0,ab.cn)(function(e){return aZ[e(aE)]}),aR=(0,ab.cn)(function(e){return aC[e(aE)]}),aD=(0,ab.cn)(function(e){return ak[e(aE)]}),aI=(0,ab.cn)(0),aB=(0,ab.cn)(function(e){var t=e(aF)[0]/aS,n=e(aF)[1]/aS,r=0,i=0;return e(aI)<t&&(r=(t-e(aI))/a_,i=t-a_),e(aI)>n&&(r=(e(aI)-n)/a_,i=n+a_),{overage:r,point:i}}),aG=(0,ab.cn)(0),aP=(0,ab.cn)(0),aA=[.5,1,2,4,8,16,32];aw.m0;var aL=[[0,1],[0,1],[0,2],[0,3],[1,3],[2,3],[3,3]],aN=aA.length-1,aO=1/(2*aN),aU=(0,ab.cn)(2),aX=(0,ab.cn)(function(e){return aA[e(aU)]}),aM=(0,ab.cn)(function(e){return e(aJ)*aw.m0}),aF=(0,ab.cn)(function(e){return aL[e(aU)]}),aW=(0,ab.cn)(0),aV=(0,ab.cn)(function(e){var t=e(aD)[0]/aN,n=e(aD)[1]/aN,r=0,i=0;return e(aW)<t&&(r=(t-e(aW))/aO,i=t-aO),e(aW)>n&&(r=(e(aW)-n)/aO,i=n+aO),{overage:r,point:i}}),aH=(0,ab.cn)(null,function(e,t){var n=e(aE),r=e(aF)[0],i=e(aF)[1];n<r&&t(aE,r),n>i&&t(aE,i)}),az=(0,ab.cn)(null,function(e,t){var n=e(aU),r=e(aD)[0],i=e(aD)[1];n<r&&t(aU,r),n>i&&t(aU,i)}),aj=(0,ab.cn)(function(e){var t=e(aF)[0]/aS,n=e(aF)[1]/aS,r=e(aD)[0]/aN,i=e(aD)[1]/aN;return e(aI)<t?(t-e(aI))/a_:e(aI)>n?(e(aI)-n)/a_:e(aW)<r?(r-e(aW))/aO:e(aW)>i?(e(aW)-i)/aO:0}),aq=(0,ab.cn)(function(e){var t;return(1e5*(t={ramCost:e(aM),cpuCost:e(aR)}).ramCost+1e5*t.cpuCost)/1e5}),aJ=(0,ab.cn)(function(e){return e(aX)*aw.v7}),aY=(0,ab.cn)(function(e){return e(aT)*aw.hU}),a$=(0,ab.cn)(function(e){return e(aJ)+e(aY)});(o=f||(f={})).None="0ms",o.Normal="200ms";var aK=["ArrowLeft","ArrowRight","Home","End"],aQ=(0,L.iv)({position:"relative",height:"16px",width:"100%",touchAction:"none"}),a0=(0,L.iv)({position:"absolute",zIndex:2,top:"0",width:"16px",height:"16px",backgroundColor:B.TV.white,borderRadius:"100%",outline:"none",cursor:"pointer",willChange:"left, transition",boxShadow:"0 0 8px rgba(0,0,0,0.15)",":focus":{outline:"2px solid ".concat(B.TV.accentPrimaryDefault),":not(:focus-visible)":{outlineColor:"transparent"}}}),a1=(0,b.forwardRef)(function(e,t){var n=(0,v._)((0,av.KO)(aT),1)[0],r=(0,av.b9)(aG),i=(0,b.useRef)(null),o=(0,b.useRef)(null);return(0,b.useImperativeHandle)(t,function(){return i.current}),n&&i.current&&(i.current.setAttribute("aria-valuemin",String(aZ[0])),i.current.setAttribute("aria-valuemax",String(aZ[aZ.length-1])),i.current.setAttribute("aria-valuenow",String(n))),(0,b.useEffect)(function(){var e=function(){i.current&&(r(parseFloat(getComputedStyle(i.current).getPropertyValue("left"))),o.current=requestAnimationFrame(e))};return e(),function(){o.current&&cancelAnimationFrame(o.current)}},[r]),(0,b.useMemo)(function(){return(0,g.tZ)("div",{ref:i,role:"slider",tabIndex:0,css:[a0,{left:"calc((100% - 16px) * var(--cpu-progress, 0))",transition:"left var(--cpu-transition-time, 100ms) cubic-bezier(0, 0, 0.2, 1)"}]})},[])}),a2="min(var(--point), var(--position))",a3="max(var(--point), var(--position))",a4=(0,b.forwardRef)(function(e,t){var n=(0,av.Dv)(aB),r=n.overage,i=n.point,o=(0,av.Dv)(aI),a=(0,b.useRef)(null);return(0,b.useEffect)(function(){(0,ap.A)(a,"--opacity",String(r))},[r]),(0,b.useEffect)(function(){(0,ap.A)(a,"--point",String(100*i)+"%")},[i]),(0,b.useEffect)(function(){(0,ap.A)(a,"--position",String(100*o)+"%")},[o]),(0,b.useMemo)(function(){return(0,g.BX)(g.HY,{children:[(0,g.tZ)("div",{ref:t,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,g.tZ)("div",{"aria-hidden":!0,css:{position:"absolute",top:"5px",left:"0",width:"100%",height:"6px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:eN.vb.interactiveBorder,borderRadius:"2px"},children:(0,g.tZ)("div",{ref:a,"aria-hidden":!0,css:{"--opacity":0,"--point":0,"--position":0,backgroundImage:"\n                linear-gradient(\n                  to right, transparent ".concat(a2,", \n                  ").concat(eN.vb.interactiveBorderHover," ").concat(a2,", \n                  ").concat(eN.vb.interactiveBorderHover," ").concat(a3,", \n                  transparent ").concat(a3," \n                )"),opacity:"var(--opacity)",width:"100%",height:"100%"}})})]})},[t])}),a8=(0,D.X)({container:{flexDirection:"row",justifyContent:"space-between",height:6,paddingLeft:8,paddingRight:8},mark:{width:1,backgroundColor:B.TV.outlineStronger}});function a6(e){var t=e.list;return(0,g.tZ)(R.G,{css:a8.container,children:t.map(function(e){return(0,g.tZ)(R.G,{css:a8.mark},e)})})}function a5(e){var t=e.setAttrs,n=(0,v._)((0,av.KO)(aE),2),r=n[0],i=n[1],o=(0,v._)((0,b.useState)(!1),2),a=o[0],l=o[1],c=(0,b.useRef)(null),s=(0,b.useRef)(null),u=(0,b.useRef)(null),d=(0,b.useCallback)(function(e){t.setTransitionTime(e)},[t]),h=(0,b.useCallback)(function(e){t.setProgress(e)},[t]);return void 0===r||a||(h(r/aS),d(f.Normal)),(0,b.useEffect)(function(){if(void 0!==r&&s.current&&u.current&&!a){var e=s.current,t=u.current,n=function(n){if(0===n.button){l(!0),t.focus();var r=e.getBoundingClientRect(),o=t.getBoundingClientRect(),a=r.width,c=o.width,s=n.target===e?c/2:n.clientX-o.left,u=null,p=function(e){var t=Math.max(0,Math.min(1,(e-r.left-s)/(a-c)));t!==u&&(u=t,h(t),i(Math.round(t*aS)))};p(n.clientX);var m=function(e){d(f.None),p(e.clientX),e.preventDefault(),e.stopPropagation()},v=function(){window.removeEventListener("pointermove",m),window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",v),d(f.Normal),l(!1)};window.addEventListener("pointermove",m),window.addEventListener("pointerup",v),window.addEventListener("pointercancel",v),n.preventDefault(),n.stopPropagation()}};return e.addEventListener("pointerdown",n),t.addEventListener("pointerdown",n),function(){e.removeEventListener("pointerdown",n),t.removeEventListener("pointerdown",n)}}},[r,a,i,h,d]),(0,b.useEffect)(function(){if(void 0!==r&&u.current&&!a){var e=u.current,t=function(e){if(void 0!==r&&aK.includes(e.key)){var t=Math.max(0,r-1),n=Math.min(aS,r+1),o=null;switch(e.key){case"ArrowLeft":o=t;break;case"ArrowRight":o=n;break;case"Home":o=0;break;case"End":o=aS}null!==o&&(i(o),e.preventDefault(),e.stopPropagation())}};return e.addEventListener("keydown",t),function(){e.removeEventListener("keydown",t)}}},[a,r,i]),(0,b.useMemo)(function(){return(0,g.BX)(R.G,{css:B.l0.colWithGap(8),children:[(0,g.BX)(R.G,{innerRef:c,css:aQ,children:[(0,g.tZ)(a4,{ref:s}),(0,g.tZ)(a1,{ref:u})]}),(0,g.tZ)(a6,{list:aZ})]})},[])}function a7(e){var t=e.setAttrs,n=(0,v._)((0,av.KO)(aT),1)[0],r=(0,v._)((0,av.KO)(aY),1)[0],i=(0,av.b9)(az);return(0,b.useEffect)(function(){i()},[i,n]),(0,g.BX)(R.G,{css:ay.container,children:[(0,g.BX)(R.G,{css:ay.label,children:[(0,g.BX)(T.xv,{css:ay.resource,multiline:!1,children:[n," vCPU",n>1?"s":""]}),(0,g.BX)(R.G,{css:ay.cost,children:[(0,g.BX)(T.xv,{color:"dimmer",multiline:!1,children:[r," ",(0,ie.Z)("compute unit",r)]}),(0,g.tZ)(T.xv,{color:"dimmest",variant:"small",multiline:!1,children:"/sec"})]})]}),(0,g.tZ)(a5,{setAttrs:t})]})}var a9=(0,b.forwardRef)(function(e,t){var n=(0,v._)((0,av.KO)(aX),1)[0],r=(0,av.b9)(aP),i=(0,b.useRef)(null),o=(0,b.useRef)(null);return(0,b.useImperativeHandle)(t,function(){return i.current}),n&&i.current&&(i.current.setAttribute("aria-valuemin",String(aA[0])),i.current.setAttribute("aria-valuemax",String(aA[aA.length-1])),i.current.setAttribute("aria-valuenow",String(n))),(0,b.useEffect)(function(){var e=function(){i.current&&(r(parseFloat(getComputedStyle(i.current).getPropertyValue("left"))),o.current=requestAnimationFrame(e))};return e(),function(){o.current&&cancelAnimationFrame(o.current)}},[r]),(0,b.useMemo)(function(){return(0,g.tZ)("div",{ref:i,role:"slider",tabIndex:0,"data-ram-thumb":!0,css:[a0,{left:"calc((100% - 16px) * var(--ram-progress, 0))",transition:"left var(--ram-transition-time, 100ms) cubic-bezier(0, 0, 0.2, 1)"}]})},[])}),le="min(var(--point), var(--position))",lt="max(var(--point), var(--position))",ln=(0,b.forwardRef)(function(e,t){var n=(0,av.Dv)(aV),r=n.overage,i=n.point,o=(0,av.Dv)(aW),a=(0,b.useRef)(null);return(0,b.useEffect)(function(){(0,ap.A)(a,"--opacity",String(r))},[r]),(0,b.useEffect)(function(){(0,ap.A)(a,"--point",String(100*i)+"%")},[i]),(0,b.useEffect)(function(){(0,ap.A)(a,"--position",String(100*o)+"%")},[o]),(0,b.useMemo)(function(){return(0,g.BX)(g.HY,{children:[(0,g.tZ)("div",{ref:t,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,g.tZ)("div",{"aria-hidden":!0,css:{position:"absolute",top:"5px",left:"0",width:"100%",height:"6px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:eN.vb.interactiveBorder,borderRadius:"2px"},children:(0,g.tZ)("div",{ref:a,"aria-hidden":!0,css:{"--opacity":0,"--point":0,"--position":0,backgroundImage:"\n                linear-gradient(\n                  to right, transparent ".concat(le,", \n                  ").concat(eN.vb.interactiveBorderHover," ").concat(le,", \n                  ").concat(eN.vb.interactiveBorderHover," ").concat(lt,", \n                  transparent ").concat(lt," \n                )"),opacity:"var(--opacity)",width:"100%",height:"100%"}})})]})},[t])});function lr(e){var t=e.setAttrs,n=(0,v._)((0,av.KO)(aU),2),r=n[0],i=n[1],o=(0,v._)((0,b.useState)(!1),2),a=o[0],l=o[1],c=(0,b.useRef)(null),s=(0,b.useRef)(null),u=(0,b.useRef)(null),d=(0,b.useCallback)(function(e){t.setTransitionTime(e)},[t]),h=(0,b.useCallback)(function(e){t.setProgress(e)},[t]);return void 0===r||a||(h(r/aN),d(f.Normal)),(0,b.useEffect)(function(){if(void 0!==r&&s.current&&u.current&&!a){var e=s.current,t=u.current,n=function(n){if(0===n.button){l(!0),t.focus();var r=e.getBoundingClientRect(),o=t.getBoundingClientRect(),a=r.width,c=o.width,s=n.target===e?c/2:n.clientX-o.left,u=null,p=function(e){var t=Math.max(0,Math.min(1,(e-r.left-s)/(a-c)));t!==u&&(u=t,h(t),i(Math.round(t*aN)))};p(n.clientX);var m=function(e){d(f.None),p(e.clientX),e.preventDefault(),e.stopPropagation()},v=function(){window.removeEventListener("pointermove",m),window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",v),d(f.Normal),l(!1)};window.addEventListener("pointermove",m),window.addEventListener("pointerup",v),window.addEventListener("pointercancel",v),n.preventDefault(),n.stopPropagation()}};return e.addEventListener("pointerdown",n),t.addEventListener("pointerdown",n),function(){e.removeEventListener("pointerdown",n),t.removeEventListener("pointerdown",n)}}},[r,a,i,h,d]),(0,b.useEffect)(function(){if(void 0!==r&&u.current&&!a){var e=u.current,t=function(e){if(void 0!==r&&aK.includes(e.key)){var t=Math.max(0,r-1),n=Math.min(aN,r+1),o=null;switch(e.key){case"ArrowLeft":o=t;break;case"ArrowRight":o=n;break;case"Home":o=0;break;case"End":o=aN}null!==o&&(i(o),e.preventDefault(),e.stopPropagation())}};return e.addEventListener("keydown",t),function(){e.removeEventListener("keydown",t)}}},[a,r,i]),(0,b.useMemo)(function(){return(0,g.BX)(R.G,{css:B.l0.colWithGap(8),children:[(0,g.BX)(R.G,{innerRef:c,css:aQ,children:[(0,g.tZ)(ln,{ref:s}),(0,g.tZ)(a9,{ref:u})]}),(0,g.tZ)(a6,{list:aA})]})},[])}function li(e){var t=e.setAttrs,n=(0,v._)((0,av.KO)(aX),1)[0],r=(0,v._)((0,av.KO)(aJ),1)[0],i=(0,av.b9)(aH);return(0,b.useEffect)(function(){i()},[i,n]),(0,g.BX)(R.G,{css:ay.container,children:[(0,g.BX)(R.G,{css:ay.label,children:[(0,g.BX)(T.xv,{css:ay.resource,multiline:!1,children:[n," GiB RAM"]}),(0,g.BX)(R.G,{css:ay.cost,children:[(0,g.BX)(T.xv,{color:"dimmer",multiline:!1,children:[r," ",(0,ie.Z)("compute unit",r)]}),(0,g.tZ)(T.xv,{color:"dimmest",variant:"small",multiline:!1,children:"/sec"})]})]}),(0,g.tZ)(lr,{setAttrs:t})]})}var lo=(0,D.X)({container:[B.l0.px(8),B.l0.width("100%"),B.l0.position.absolute,B.l0.top(60),B.l0.bottom(21),B.l0.transition.snappy,B.l0.zIndex(1),(0,S._)({},B.nC.min(320),B.l0.top(34))],svg:[B.l0.width("100%"),B.l0.height("100%"),B.l0.overflow("visible")],overage:{"--opacity":0,opacity:"var(--opacity)",transition:"opacity 80ms ease-out"}});function la(){var e,t=(0,av.Dv)(aj),n=(0,b.useRef)(null),r=(0,b.useRef)(null),i=(0,b.useRef)((null===(e=r.current)||void 0===e?void 0:e.offsetWidth)||0),o=(0,av.Dv)(aG),a=(0,av.Dv)(aP);(0,b.useEffect)(function(){r.current&&(i.current=r.current.offsetWidth)});var l={x1:o/(i.current-16)*100,x2:a/(i.current-16)*100,y1:0,y2:100,strokeWidth:3,vectorEffect:"non-scaling-stroke",shapeRendering:"crisp-edges"};return(0,b.useEffect)(function(){(0,ap.A)(n,"--opacity",String(Math.pow(t,1/3)))},[t]),(0,g.tZ)(R.G,{css:lo.container,id:"rope",innerRef:r,children:(0,g.BX)("svg",{height:100,viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",css:lo.svg,children:[(0,g.tZ)("line",(0,P._)((0,G._)({},l),{stroke:B.TV.outlineDimmer})),(0,g.tZ)("line",(0,P._)((0,G._)({},l),{stroke:B.TV.outlineDefault,strokeDasharray:8})),(0,g.BX)("g",{ref:n,css:lo.overage,children:[(0,g.tZ)("line",(0,P._)((0,G._)({},l),{stroke:B.TV.accentPrimaryDefault})),(0,g.tZ)("line",(0,P._)((0,G._)({},l),{stroke:B.TV.accentPrimaryStrongest,strokeDasharray:8}))]})]})})}var ll=[B.l0.borderRadius(8)],lc=(0,D.X)({container:[ll],disabled:[ll,{opacity:.5,pointerEvents:"none"}],top:[B.l0.p(16),B.l0.colWithGap(12)],bottom:[B.l0.p(16),B.l0.border({direction:"top",color:B.TV.outlineDimmer})],header:[B.l0.rowWithGap(8)],text:[B.l0.colWithGap(4),B.l0.flex.growAndShrink(1)],title:[B.l0.rowWithGap(4),B.l0.align.center],edit:eN.gU.outlined,overview:[B.l0.colWithGap(8)],overviewLine:[B.l0.flex.column,(0,S._)({},B.nC.min(320),[B.l0.flex.row,B.l0.justify.spaceBetween])],overviewValue:[B.l0.fontWeight.medium],total:[B.l0.rowWithGap(4),B.l0.flex.shrink(1),B.l0.align.center],cost:[B.l0.flex.row,B.l0.align.baseline,{gap:1}],builder:[B.l0.colWithGap(12),B.l0.position.relative,{"--cpu-transition-time":f.Normal,"--cpu-progress":1,"--ram-transition-time":f.Normal,"--ram-progress":1,"#rope":{opacity:0}," *":{transitionTimingFunction:"ease"},":hover, :focus-within":{" #rope":{opacity:1}}}]});function ls(e){var t=e.machineConfiguration,n=e.disabled,r=e.toggleEditable,i=void 0===r||r,o=(0,b.useRef)(null),a=(0,v._)((0,b.useState)(!i),2),l=a[0],c=a[1],s=(0,av.Dv)(aT),u=(0,av.Dv)(aX),d=(0,av.Dv)(aY),f=(0,av.Dv)(aJ),h=(0,av.Dv)(aq),p=(0,av.Dv)(a$),m=(0,av.b9)(aI),y=(0,av.b9)(aW),w=(0,av.b9)(aE),Z=(0,av.b9)(aU);return(0,b.useEffect)(function(){if(t){var e=aZ.findIndex(function(e){return e.toString()===t.vcpu}),n=aA.findIndex(function(e){return e.toString()===t.memory});w(e),Z(n)}},[t,w,Z]),(0,g.BX)(rr.Tg,{elevated:!0,css:n?lc.disabled:lc.container,children:[(0,g.BX)(R.G,{css:lc.top,children:[(0,g.BX)(R.G,{css:lc.header,children:[(0,g.BX)(R.G,{css:lc.text,children:[(0,g.BX)(R.G,{css:lc.title,children:[(0,g.tZ)(am.Z,{}),(0,g.tZ)(T.xv,{variant:"subheadDefault",multiline:!1,children:"Machine power"})]}),(0,g.tZ)(T.xv,{multiline:!0,color:"dimmer",children:"The power level for each machine that spins up upon any request"})]}),i?(0,g.tZ)(e6.zx,{text:l?"Done":"Edit",css:lc.edit,onClick:function(){return c(!l)}}):null]}),l?(0,g.BX)(g.HY,{children:[(0,g.BX)(R.G,{css:lc.builder,innerRef:o,children:[(0,g.tZ)(la,{}),(0,g.tZ)(a7,{setAttrs:{setTransitionTime:function(e){(0,ap.A)(o,"--cpu-transition-time",e)},setProgress:function(e){(0,ap.A)(o,"--cpu-progress",e.toString()),m(e)}}}),(0,g.tZ)(li,{setAttrs:{setTransitionTime:function(e){(0,ap.A)(o,"--ram-transition-time",e)},setProgress:function(e){(0,ap.A)(o,"--ram-progress",e.toString()),y(e)}}})]}),(0,g.tZ)(T.xv,{color:"dimmer",children:"Only some configurations are valid. When you change one slider, the other one will automatically adjust to remain valid."})]}):(0,g.BX)(R.G,{css:lc.overview,children:[(0,g.BX)(R.G,{css:lc.overviewLine,children:[(0,g.BX)(T.xv,{css:lc.overviewValue,multiline:!1,children:[s," vCPU",s>1?"s":""]}),(0,g.BX)(R.G,{css:lc.cost,children:[(0,g.BX)(T.xv,{multiline:!1,color:"dimmer",children:[d," ",(0,ie.Z)("compute unit",d)]}),(0,g.tZ)(T.xv,{variant:"small",color:"dimmest",multiline:!1,children:"/sec"})]})]}),(0,g.BX)(R.G,{css:lc.overviewLine,children:[(0,g.BX)(T.xv,{css:lc.overviewValue,multiline:!1,children:[u," GiB RAM"]}),(0,g.BX)(R.G,{css:lc.cost,children:[(0,g.BX)(T.xv,{multiline:!1,color:"dimmer",children:[f," ",(0,ie.Z)("compute unit",f)]}),(0,g.tZ)(T.xv,{variant:"small",color:"dimmest",multiline:!1,children:"/sec"})]})]})]})]}),(0,g.tZ)(R.G,{css:lc.bottom,children:(0,g.BX)(R.G,{css:lc.overviewLine,children:[(0,g.tZ)(T.xv,{css:lc.overviewValue,multiline:!1,children:"Total per machine"}),(0,g.BX)(R.G,{css:lc.total,children:[(0,g.BX)(R.G,{css:lc.cost,children:[(0,g.BX)(T.xv,{multiline:!1,children:[p," ",(0,ie.Z)("compute unit",p)]}),(0,g.tZ)(T.xv,{variant:"small",color:"dimmer",multiline:!1,children:"/sec"})]}),(0,g.tZ)(eJ.u,{tooltip:(0,g.BX)(R.G,{css:lc.cost,children:[(0,g.BX)(T.xv,{multiline:!1,children:["$",h.toFixed(6)]}),(0,g.tZ)(T.xv,{variant:"small",color:"dimmest",multiline:!1,children:"/sec"})]}),children:(0,g.tZ)(eY.Z,{color:B.TV.foregroundDimmest})})]})]})})]})}var lu=[1,2,3,4,5,6,7,8,9,10],ld=lu.length-1,lf=1/(2*ld),lh=(0,ab.cn)(2),lp=(0,ab.cn)(function(e){return lu[e(lh)]}),lm=(0,ab.cn)(function(e){return(e(aq)*e(lp)).toFixed(6)}),lv=(0,ab.cn)(function(e){return e(a$)*e(lp)}),lg=(0,ab.cn)(0),ly=(0,ab.cn)(function(e){var t=0/ld,n=lu.length-1/ld,r=0,i=0;return e(lg)<t&&(r=(t-e(lg))/lf,i=t-lf),e(lg)>n&&(r=(e(lg)-n)/lf,i=n+lf),{overage:r,point:i}});(a=h||(h={})).None="0ms",a.Normal="120ms";var lb=["ArrowLeft","ArrowRight","Home","End"],lw=(0,L.iv)({position:"relative",height:"16px",width:"100%",touchAction:"none"}),lZ=(0,L.iv)({position:"absolute",zIndex:2,top:"0",width:"16px",height:"16px",backgroundColor:B.TV.white,borderRadius:"100%",outline:"none",cursor:"pointer",willChange:"left, transition",boxShadow:"0 0 8px rgba(0,0,0,0.15)",":focus":{outline:"2px solid ".concat(B.TV.accentPrimaryDefault),":not(:focus-visible)":{outlineColor:"transparent"}}}),lx=(0,b.forwardRef)(function(e,t){var n=(0,v._)((0,av.KO)(lp),1)[0],r=(0,b.useRef)(null);return(0,b.useImperativeHandle)(t,function(){return r.current}),n&&r.current&&(r.current.setAttribute("aria-valuemin",String(lu[0])),r.current.setAttribute("aria-valuemax",String(lu[lu.length-1])),r.current.setAttribute("aria-valuenow",String(n))),(0,b.useMemo)(function(){return(0,g.tZ)("div",{ref:r,role:"slider",tabIndex:0,css:[lZ,{left:"calc((100% - 16px) * var(--max-instances-progress, 0))",transition:"left var(--max-instances-transition-time, 100ms) ease-out"}]})},[])}),lC="min(var(--point), var(--position))",lk="max(var(--point), var(--position))",lS=(0,b.forwardRef)(function(e,t){var n=(0,av.Dv)(ly),r=n.overage,i=n.point,o=(0,av.Dv)(lg),a=(0,b.useRef)(null);return(0,b.useEffect)(function(){(0,ap.A)(a,"--opacity",String(r))},[r]),(0,b.useEffect)(function(){(0,ap.A)(a,"--point",String(100*i)+"%")},[i]),(0,b.useEffect)(function(){(0,ap.A)(a,"--position",String(100*o)+"%")},[o]),(0,b.useMemo)(function(){return(0,g.BX)(g.HY,{children:[(0,g.tZ)("div",{ref:t,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,g.tZ)("div",{"aria-hidden":!0,css:{position:"absolute",top:"5px",left:"0",width:"100%",height:"6px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:eN.vb.interactiveBorder,borderRadius:"2px"},children:(0,g.tZ)("div",{ref:a,"aria-hidden":!0,css:{"--opacity":0,"--point":0,"--position":0,backgroundImage:"\n                linear-gradient(\n                  to right, transparent ".concat(lC,", \n                  ").concat(eN.vb.interactiveBorderHover," ").concat(lC,", \n                  ").concat(eN.vb.interactiveBorderHover," ").concat(lk,", \n                  transparent ").concat(lk," \n                )"),opacity:"var(--opacity)",width:"100%",height:"100%"}})})]})},[t])});function l_(e){var t=e.setAttrs,n=(0,v._)((0,av.KO)(lh),2),r=n[0],i=n[1],o=(0,v._)((0,b.useState)(!1),2),a=o[0],l=o[1],c=(0,b.useRef)(null),s=(0,b.useRef)(null),u=(0,b.useRef)(null),d=(0,b.useCallback)(function(e){t.setTransitionTime(e)},[t]),f=(0,b.useCallback)(function(e){t.setProgress(e)},[t]);return void 0===r||a||(f(r/ld),d(h.Normal)),(0,b.useEffect)(function(){if(void 0!==r&&s.current&&u.current&&!a){var e=s.current,t=u.current,n=function(n){if(0===n.button){l(!0),t.focus();var r=e.getBoundingClientRect(),o=t.getBoundingClientRect(),a=r.width,c=o.width,s=n.target===e?c/2:n.clientX-o.left,u=null,p=function(e){var t=Math.max(0,Math.min(1,(e-r.left-s)/(a-c)));t!==u&&(u=t,f(t),i(Math.round(t*ld)))};p(n.clientX);var m=function(e){d(h.None),p(e.clientX),e.preventDefault(),e.stopPropagation()},v=function(){window.removeEventListener("pointermove",m),window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",v),d(h.Normal),l(!1)};window.addEventListener("pointermove",m),window.addEventListener("pointerup",v),window.addEventListener("pointercancel",v),n.preventDefault(),n.stopPropagation()}};return e.addEventListener("pointerdown",n),t.addEventListener("pointerdown",n),function(){e.removeEventListener("pointerdown",n),t.removeEventListener("pointerdown",n)}}},[r,a,i,f,d]),(0,b.useEffect)(function(){if(void 0!==r&&u.current&&!a){var e=u.current,t=function(e){if(void 0!==r&&lb.includes(e.key)){var t=Math.max(0,r-1),n=Math.min(ld,r+1),o=null;switch(e.key){case"ArrowLeft":o=t;break;case"ArrowRight":o=n;break;case"Home":o=0;break;case"End":o=ld}null!==o&&(i(o),e.preventDefault(),e.stopPropagation())}};return e.addEventListener("keydown",t),function(){e.removeEventListener("keydown",t)}}},[a,r,i]),(0,b.useMemo)(function(){return(0,g.tZ)(R.G,{css:B.l0.colWithGap(8),children:(0,g.BX)(R.G,{innerRef:c,css:lw,children:[(0,g.tZ)(lS,{ref:s}),(0,g.tZ)(lx,{ref:u})]})})},[])}var lE=(0,D.X)({costInfo:[B.l0.rowWithGap(4),B.l0.flex.shrink(1),B.l0.align.center]});function lT(e){var t=e.setAttrs,n=(0,v._)((0,av.KO)(lp),1)[0],r=(0,v._)((0,av.KO)(lm),1)[0],i=(0,v._)((0,av.KO)(lv),1)[0];return(0,g.BX)(R.G,{css:ay.container,children:[(0,g.BX)(R.G,{css:ay.label,children:[(0,g.BX)(T.xv,{css:ay.resource,multiline:!1,children:[n," ",(0,ie.Z)("machine",n)]}),(0,g.BX)(R.G,{css:lE.costInfo,children:[(0,g.BX)(R.G,{css:ay.cost,children:[(0,g.BX)(T.xv,{multiline:!1,children:[i," compute units"]}),(0,g.tZ)(T.xv,{color:"dimmer",variant:"small",multiline:!1,children:"/s at max traffic"})]}),(0,g.tZ)(eJ.u,{tooltip:(0,g.BX)(R.G,{css:ay.cost,children:[(0,g.BX)(T.xv,{multiline:!1,children:["$",r]}),(0,g.tZ)(T.xv,{variant:"small",color:"dimmest",multiline:!1,children:"/s"})]}),children:(0,g.tZ)(eY.Z,{color:B.TV.foregroundDimmest})})]})]}),(0,g.tZ)(l_,{setAttrs:t})]})}var lR=n(19621),lD=[B.l0.colWithGap(12),B.l0.borderRadius("container"),B.l0.p(16)],lI=(0,D.X)({container:[lD],disabled:[lD,{opacity:.5,pointerEvents:"none"}],text:[B.l0.colWithGap(4)],title:[B.l0.rowWithGap(4),B.l0.align.center],cost:[B.l0.flex.row,B.l0.align.baseline,B.l0.fontWeight.medium,{gap:3}],builder:[B.l0.colWithGap(8),B.l0.position.relative,{"--max-instances-transition-time":h.Normal,"--max-instances":1," *":{transitionTimingFunction:"ease"}}]});function lB(e){var t=e.maxMachineInstances,n=e.disabled,r=e.onError,i=(0,b.useRef)(null),o=(0,av.b9)(lg),a=(0,av.b9)(lh);return(0,b.useEffect)(function(){if(t){var e=lu.indexOf(t);if(-1===e){r("An error occurred while setting selected max machine instances.");return}a(e)}},[t,a,r]),(0,g.BX)(rr.Tg,{elevated:!0,css:n?lI.disabled:lI.container,children:[(0,g.BX)(R.G,{css:lI.text,children:[(0,g.BX)(R.G,{css:lI.title,children:[(0,g.tZ)(lR.Z,{}),(0,g.tZ)(T.xv,{variant:"subheadDefault",multiline:!1,children:"Max number of machines"})]}),(0,g.tZ)(T.xv,{multiline:!0,variant:"small",color:"dimmer",children:"The most machines that should ever spin up to handle your highest traffic. More machines means a faster experience for your users."})]}),(0,g.tZ)(R.G,{css:lI.builder,innerRef:i,children:(0,g.tZ)(lT,{setAttrs:{setTransitionTime:function(e){(0,ap.A)(i,"--max-instances-transition-time",e)},setProgress:function(e){(0,ap.A)(i,"--max-instances-progress",e.toString()),o(e)}}})})]})}function lG(){var e=(0,ei._)(["\n  query AutoscaleMachineConfigurations {\n    hostingMachineConfigurations(input: { provider: cloud_run }) {\n      __typename\n      ... on HostingMachineConfigurationsResults {\n        results {\n          ...MachineConfiguration\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n    }\n  }\n  ","\n"]);return lG=function(){return e},e}var lP={},lA=(0,eo.Ps)(lG(),rJ.bN),lL=function(e){var t,n,r=(0,w.kW)(),i=(0,w.hn)(),o=(0,w.$y)(),a=void 0!==(0,w.pn)(),l=!a&&"string"!=typeof i,c=(0,av.Dv)(aT),s=(0,av.Dv)(aX),u=(0,av.Dv)(lp),d=(t=(0,G._)({},lP,{onCompleted:function(t){"HostingMachineConfigurationsResults"!==t.hostingMachineConfigurations.__typename&&e.onError("Something went wrong")},onError:function(t){return e.onError(t.message)}}),ea.a(lA,t)),f=d.data,h=d.loading,p=(null==f?void 0:f.hostingMachineConfigurations.__typename)==="HostingMachineConfigurationsResults"?f.hostingMachineConfigurations.results:null;(0,b.useEffect)(function(){et({context:er.k.AutoscaleMachineConfiguration})},[]);var m=(n=(0,x._)(function(){var t,n,r,i;return(0,k.Jh)(this,function(o){return(t=null==p?void 0:p.find(function(e){var t=e.vcpu,n=e.memory;return c.toString()===t&&s.toString()===n}))?(n=t.id,r=t.label,i=t.slug,e.onConfirm({configurationId:n,configurationLabel:r,configurationSlug:i,maxInstances:u})):e.onError("An error occurred trying to validate selected machine configuration"),[2]})}),function(){return n.apply(this,arguments)}),v=h||e.fetching||a||r!==Z.z.Ready;return(0,g.BX)(g.HY,{children:[(0,g.tZ)(V,{maxWidth:!0,children:(0,g.tZ)(Q,{onBack:e.onBack})}),(0,g.tZ)(V,{maxWidth:!0,children:(0,g.BX)(R.G,{css:B.l0.colWithGap(16),children:[(0,g.BX)(R.G,{css:B.l0.colWithGap(4),children:[(0,g.tZ)(T.xv,{variant:"subheadBig",children:"Autoscale machine configuration"}),(0,g.tZ)(T.xv,{variant:"small",color:"dimmer",children:"Autoscale apps spin up enough machines to meet demand at any point in time. You are billed for the total number of compute units across all machines."})]}),(0,g.BX)(R.G,{css:B.l0.colWithGap(16),children:[(0,g.tZ)(ls,{machineConfiguration:null==o?void 0:o.machineConfiguration,disabled:v}),(0,g.tZ)(lB,{maxMachineInstances:null==o?void 0:o.maxMachineInstances,disabled:v,onError:e.onError})]}),(0,g.BX)(R.G,{css:[B.l0.colWithGap(8),B.l0.pt(8)],children:[(0,g.tZ)(e6.zx,{colorway:"primary",text:l?"Approve and configure build settings":"Approve and update",iconRight:(0,g.tZ)(tS.Z,{}),onClick:m,loading:h}),(0,g.BX)(T.xv,{color:"dimmest",children:["Your deployed app will utilize any available monthly free allotment before charging for additional resource usage."," ",(0,g.tZ)("a",{href:iS.TT.ABOUT_USAGE_BASED_BILLING,target:"_blank",rel:"noopener",children:"Learn more"})]})]})]})})]})},lN=(0,D.X)({deployOptionsWithCurrentBuild:[B.l0.p(16),B.l0.pt(12),B.l0.borderRadius(),B.l0.border({color:B.TV.outlineDimmest})],back:[B.l0.pb(8),B.l0.flex.growAndShrink(1)],subViewOuter:[B.l0.rowWithGap(12)],subView:[B.l0.pb(12),B.l0.flex.growAndShrink(1),B.l0.colWithGap(12)],deploymentInfoWrapper:[B.l0.rowWithGap(12),{':has( + [data-history-timeline-items="0"])':{"[data-timeline-line]":{display:"none"}}}],deploymentInfo:[B.l0.pb(16),B.l0.flex.growAndShrink(1),B.l0.colWithGap(12)]}),lO=function(e){var t=e.view,n=e.onLifecycleCommand,r=e.onViewAction,i=e.onError,o=e.openFile,a=(0,w.kW)(),l=(0,w.hn)(),c=(0,w.$y)(),s=(0,w.pn)(),u=(0,w.XZ)(),d=(0,w.Qk)(),f=(0,eg.sG)(),h=void 0!==c,p=(0,t6.Z)(),m=(0,w.l9)(p),y=null==c?void 0:c.provider,x=h&&c.machineConfiguration?{configurationId:c.machineConfiguration.id,configurationLabel:c.machineConfiguration.label,configurationSlug:c.machineConfiguration.slug,maxInstances:null==c?void 0:c.maxMachineInstances}:void 0,C=(0,ij.Z)("deployments-pane","deployments-mobile-download"),k=C.shouldDisplay,S=C.dismiss,_=C.register;(0,b.useEffect)(function(){_()},[_]);var E=(null==c?void 0:c.status)&&c.status===eh.Fe.Success&&k&&!f,T=(0,v._)((0,b.useState)(!1),2),D=T[0],I=T[1],B=(0,v._)((0,b.useState)(null),2),G=B[0],P=B[1],A=(0,v._)((0,b.useState)(null),2),L=A[0],N=A[1];(0,b.useEffect)(function(){et({context:er.k.Deployment})},[]),(0,b.useEffect)(function(){(a===Z.z.Preparing||a===Z.z.Deploying)&&(t===er.k.DeploymentInProgress||G||r({type:er.a.ChangeView,payload:{view:er.k.DeploymentInProgress}}))},[a,t,r,G]);var O=(0,b.useRef)(void 0);(0,b.useEffect)(function(){O.current=null==s?void 0:s.id},[null==s?void 0:s.id]);var U=(null==c?void 0:c.status)===eh.Fe.Success,X=(null==c?void 0:c.id)===O.current;(0,b.useEffect)(function(){U&&X&&r({type:er.a.ChangeView,payload:{view:er.k.Deployment}})},[U,X,r]);var M=null==s?void 0:s.status,F=(0,b.useRef)(M);(0,b.useEffect)(function(){M&&(F.current=M)},[M]);var W=(0,w.v5)(),H=(0,w.t7)();if(G)return(0,g.tZ)(il,{build:G,fs:u,openFile:o,onBack:function(){P(null)},onViewAppLogs:function(){r({type:er.a.ChangeView,payload:{view:er.k.Logs}})}});if(L===eh.r4.CloudRun)return(0,g.tZ)(lL,{onError:i,onConfirm:function(e){r({type:er.a.SendDeploymentLifecycleCommand,payload:{command:eh.Qc.UpdateMachineConfiguration,machineConfigurationId:e.configurationId,maxMachineInstances:e.maxInstances}})},onBack:function(){return N(null)}});if(L===eh.r4.Gce)return(0,g.tZ)(iT,{isTeamRepl:m,initialMachineConfiguration:x,onConfirm:function(e){r({type:er.a.SendDeploymentLifecycleCommand,payload:{command:eh.Qc.UpdateMachineConfiguration,machineConfigurationId:e.configurationId,maxMachineInstances:e.maxInstances}})},onBack:function(){return N(null)},onError:i});var z=!h||!l||!(a===Z.z.Ready||a===Z.z.Suspended||a===Z.z.ProcessingLifecycleCommand);return(0,g.tZ)(g.HY,{children:(0,g.tZ)(V,{children:(0,g.BX)(R.G,{children:[(0,g.BX)(R.G,{css:lN.subViewOuter,children:[h?(0,g.tZ)(re,{type:"future"}):null,(0,g.BX)(R.G,{css:lN.subView,children:[z?null:(0,g.tZ)(ah,{dotReplit:W,fs:u,secrets:d,ports:H,deploymentId:l,onError:i,expanded:D,setExpanded:I,shouldShowMobileTour:null!=E&&E,onDismissMobileTour:S,openNetworkingPane:function(){r({type:er.a.OpenPane,payload:{type:"networking"}})},onResume:function(){n({command:eh.Qc.Resume})}}),t===er.k.DeploymentInProgress?(0,g.tZ)(rM,{openFile:o,viewBuildLogsOnLoad:!h,onViewLogs:function(){r({type:er.a.ChangeView,payload:{view:er.k.Logs}})},onCanceled:function(){r({type:er.a.ChangeView,payload:{view:er.k.Deployment}}),i("Build cancelled")},onError:i}):null]})]}),h?(0,g.BX)(g.HY,{children:[(0,g.tZ)(it,{type:"failureQueue",onViewBuildLogs:P,openFile:o,view:t}),(0,g.BX)(R.G,{css:lN.deploymentInfoWrapper,children:[(0,g.tZ)(re,{type:"present"}),(0,g.tZ)(R.G,{css:lN.deploymentInfo,children:(0,g.tZ)(iz,{provider:y,machine:x,onViewBuildLogs:P,onManageClick:function(){if(y===eh.r4.CloudRun||y===eh.r4.Gce){N(y);return}y===eh.r4.Static&&r({type:er.a.ChangeView,payload:{view:er.k.Settings}})},onViewAction:r})})]}),(0,g.tZ)(it,{onViewBuildLogs:P,openFile:o,view:t})]}):null]})})})},lU=n(99059),lX=n(57185),lM=n(14769),lF=n(48827),lW=n(21602),lV=n(24374),lH=n(4733),lz=n(76711),lj=n(36259),lq=n(5297),lJ=n(66791),lY=n(49135);function l$(){var e=(0,ei._)(["\n  fragment DeploymentsNewDeploymentRepl on Repl {\n    id\n    slug\n    owner {\n      ... on User {\n        id\n        username\n      }\n      ... on Team {\n        id\n        username\n      }\n    }\n  }\n"]);return l$=function(){return e},e}function lK(){var e=(0,ei._)(["\n  query DeploymentsNewDeployment($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...DeploymentsNewDeploymentRepl\n      }\n    }\n  }\n  ","\n"]);return lK=function(){return e},e}var lQ={},l0=(0,eo.Ps)(l$()),l1=(0,eo.Ps)(lK(),l0);function l2(){var e=(0,ei._)(["\n  query DeploymentsPaneIntro($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        owner {\n          __typename\n          ... on Team {\n            id\n          }\n        }\n        ...DeploymentsNewDeploymentRepl\n      }\n    }\n  }\n  ","\n"]);return l2=function(){return e},e}var l3={},l4=(0,eo.Ps)(l2(),l0);function l8(e){var t=(0,G._)({},l3,e);return ea.a(l4,t)}var l6=(0,D.X)({type:[B.l0.borderRadius(8),B.l0.p(8)],hostingTierFlow:B.l0.colWithGap(8),manageReserved:B.l0.colWithGap(16),manageReservedHeader:[B.l0.rowWithGap(8),B.l0.align.center],scheduledJobsConfiguration:[B.l0.colWithGap(4)]});function l5(e){var t,n,r,i=e.replId,o=e.initialState,a=e.fs,l=e.secrets,c=e.dotReplit,s=e.ports,u=e.onBack,d=e.onDeploy,f=e.onError,h=e.openNetworkingPane,p=(0,v._)((0,b.useState)(o),2),m=p[0],y=p[1],w=(t=(0,G._)({},lQ,{variables:{replId:i},onError:function(e){return f(e.message)}}),ea.a(l1,t)),Z=w.data,x=w.loading,C=(null==Z?void 0:Z.repl.__typename)==="Repl"?Z.repl:null,k=C?(0,oy.Jw)({replSlug:C.slug,username:null===(n=C.owner)||void 0===n?void 0:n.username}):"",S=(0,t8.P5)({controlName:i_.dA,logFlagToAnalytics:!1});if(x)return(0,g.tZ)(J,{});if(!C)return null;var _=(null==C?void 0:null===(r=C.owner)||void 0===r?void 0:r.__typename)==="Team";return m.type===eh.r4.Static?(0,g.BX)(g.HY,{children:[(0,g.tZ)(V,{maxWidth:!0,children:(0,g.tZ)(H.hU,{alt:"Back",tooltipBehavior:"hidden",onClick:function(){return u()},children:(0,g.tZ)(z.Z,{})})}),(0,g.tZ)(V,{maxWidth:!0,children:(0,g.tZ)(rr.Tg,{css:l6.type,elevated:!0,children:(0,g.tZ)(iH,{label:"Type",fullWidth:!0,children:(0,g.tZ)(iV,{name:iR[m.type]})})})}),(0,g.tZ)(V,{maxWidth:!0,children:(0,g.tZ)(ac,{initialSubdomain:k,deploymentId:null,provider:m.type,onError:f,onCancel:function(){return u()},onDeploy:d,dotReplit:c,fs:a,ports:s,secrets:l,openNetworkingPane:h})})]}):m.type===eh.r4.Gce?(0,g.BX)(g.HY,{children:[(0,g.tZ)(iT,{isTeamRepl:_,onBack:u,onError:f,onChange:function(e){y({type:eh.r4.Gce,machine:e})}}),(0,g.tZ)(V,{maxWidth:!0,children:(0,g.tZ)(ac,{initialSubdomain:k,deploymentId:null,provider:m.type,machine:m.machine,onError:f,onCancel:u,onDeploy:d,fs:a,secrets:l,dotReplit:c,ports:s,openNetworkingPane:h})}),(0,g.tZ)(V,{maxWidth:!0,children:(0,g.BX)(T.xv,{color:"dimmest",children:["Your deployed app will incur charges for any resource usage."," ",(0,g.tZ)("a",{href:iS.TT.ABOUT_USAGE_BASED_BILLING,target:"_blank",rel:"noopener",children:"Learn more"})]})})]}):m.type===eh.r4.Cron?S?(0,g.BX)(g.HY,{children:[(0,g.tZ)(V,{maxWidth:!0,children:(0,g.tZ)(Q,{onBack:u})}),(0,g.tZ)(V,{maxWidth:!0,children:(0,g.BX)(R.G,{css:l6.scheduledJobsConfiguration,children:[(0,g.tZ)(T.xv,{variant:"subheadBig",children:"Scheduled Job configuration"}),(0,g.tZ)(T.xv,{variant:"small",color:"dimmer",children:"Scheduled deployments run at a specified time and frequency configured by you. During executions they spin up an on demand machine to run your code. You are billed for the total number of compute units used across all machines plus $0.10/month per scheduled deployment scheduler."})]})}),(0,g.tZ)(V,{maxWidth:!0,children:(0,g.tZ)(ib,{id:"machineConfiguration",title:"Machine Configuration",information:"Your machine configuration determines the number of vCPUs and memory available to your app.",detail:"More machine configurations coming soon.",children:(0,g.tZ)(rr.Tg,{css:l6.type,elevated:!0,children:(0,g.tZ)(iV,{name:"1 vCPU / 2 GiB RAM",sku:"$0.000028/sec"})})})}),(0,g.tZ)(V,{maxWidth:!0,children:(0,g.tZ)(ac,{initialSubdomain:k,deploymentId:null,provider:m.type,onError:f,onCancel:function(){return u()},onDeploy:d,fs:a,secrets:l,dotReplit:c,ports:s,openNetworkingPane:h})}),(0,g.tZ)(V,{maxWidth:!0,children:(0,g.BX)(T.xv,{color:"dimmest",children:["Your deployed app will incur charges for any resource usage."," ",(0,g.tZ)("a",{href:iS.TT.ABOUT_USAGE_BASED_BILLING,target:"_blank",rel:"noopener",children:"Learn more"})]})})]}):null:m.machine?(0,g.BX)(g.HY,{children:[(0,g.tZ)(V,{maxWidth:!0,children:(0,g.tZ)(H.hU,{alt:"Back",tooltipBehavior:"hidden",onClick:function(){return y({type:eh.r4.CloudRun,machine:null})},children:(0,g.tZ)(z.Z,{})})}),(0,g.tZ)(V,{maxWidth:!0,children:(0,g.tZ)(rr.Tg,{css:l6.type,elevated:!0,children:(0,g.tZ)(iH,{label:"Type",fullWidth:!0,children:(0,g.tZ)(iV,{name:iR[m.type],sku:"".concat(m.machine.configurationLabel," / ").concat(m.machine.maxInstances," Max"),canManage:!0,onManageClick:function(){y({type:eh.r4.CloudRun,machine:null})}})})})}),(0,g.tZ)(V,{maxWidth:!0,children:(0,g.tZ)(ac,{initialSubdomain:k,deploymentId:null,provider:m.type,machine:m.machine,onError:f,onCancel:function(){return y({type:eh.r4.CloudRun})},onDeploy:d,fs:a,secrets:l,dotReplit:c,ports:s,openNetworkingPane:h})})]}):(0,g.tZ)(V,{maxWidth:!0,children:(0,g.tZ)(lL,{onBack:u,onError:f,onConfirm:function(e){y({type:eh.r4.CloudRun,machine:e})}})})}var l7=n(62537),l9=B.nC.min(600),ce={order:"--provider-order"},ct={order:"var(".concat(ce.order,")")},cn=(0,L.iv)([B.l0.width("100%"),B.l0.maxWidth(340),(0,S._)({},l9,{order:ct.order})]),cr=(0,L.iv)([B.l0.reset.button,B.l0.overflow("hidden"),B.l0.position.relative,B.l0.focusRing,B.l0.borderRadius(),B.l0.width("100%")]),ci=(0,D.X)({self:[cn,{"&::after":{content:"none"}}],selfLoading:[cn,nl.p.foregroundPulse(),B.l0.border({color:B.TV.backgroundHighest})],button:[cr,eN.gU.filledAndOutlined,B.l0.border({color:B.TV.outlineDimmer})],buttonActive:[cr,B.l0.cursor.pointer,B.l0.backgroundColor.accentPrimaryDimmest,B.l0.border({color:B.TV.accentPrimaryStronger})],content:[B.l0.p(8),B.l0.colWithGap(4),(0,S._)({},l9,B.l0.py(12))],contentRecommended:[B.l0.p(8),B.l0.colWithGap(4),(0,S._)({},l9,{paddingTop:12,paddingBottom:20})],recommended:[B.l0.py(4),B.l0.backgroundColor.backgroundHighest],recommendedActive:[B.l0.py(4),B.l0.backgroundColor.accentPrimaryDimmer],icon:[B.l0.display.none,B.l0.color.foregroundDimmer,B.l0.center,(0,S._)({},l9,B.l0.display.flex)],iconActive:[B.l0.display.none,B.l0.color.accentPrimaryStrongest,B.l0.center,(0,S._)({},l9,B.l0.display.flex)],tiersTitle:[B.l0.rowWithGap(8),B.l0.align.center],title:[B.l0.rowWithGap(4),B.l0.center]});function co(e){var t,n=e.loading,r=e.active,i=e.provider,o=e.onClick,a=e.title,l=e.description,c=e.recommended,s=e.index,u=(t={},(0,S._)(t,eh.r4.CloudRun,(0,g.tZ)(lH.Z,{size:32})),(0,S._)(t,eh.r4.Gce,(0,g.tZ)(lR.Z,{size:32})),(0,S._)(t,eh.r4.Static,(0,g.tZ)(lj.Z,{size:32})),(0,S._)(t,eh.r4.Cron,(0,g.tZ)(t7.Z,{size:32})),t)[i];return(0,g.tZ)("span",{css:n?ci.selfLoading:ci.self,children:(0,g.BX)("button",{css:r?ci.buttonActive:ci.button,onClick:function(){return o(i)},disabled:n,style:(0,S._)({},ce.order,s),children:[c?(0,g.tZ)(R.G,{css:r?ci.recommendedActive:ci.recommended,children:(0,g.tZ)(T.xv,{variant:"small",children:"Recommended"})}):null,(0,g.BX)(R.G,{css:c?ci.contentRecommended:ci.content,children:[(0,g.tZ)(R.G,{css:r?ci.iconActive:ci.icon,children:u}),(0,g.BX)(R.G,{children:[(0,g.tZ)(R.G,{css:ci.title,children:(0,g.tZ)(T.xv,{variant:"subheadDefault",multiline:!1,children:a})}),(0,g.tZ)(T.xv,{multiline:!1,variant:"small",children:l})]})]})]})})}var ca=(0,D.X)({container:[B.l0.colWithGap(12),B.l0.maxWidth(420),{marginLeft:"auto",marginRight:"auto"}],item:[B.l0.align.center,{display:"grid",gridTemplateColumns:"56px auto",gap:20}],text:[B.l0.flex.growAndShrink(1),B.l0.textAlign.left]});function cl(e){var t=e.header,n=e.info;return(0,g.BX)(R.G,{css:ca.container,children:[(0,g.tZ)(T.xv,{variant:"subheadDefault",children:t}),n.map(function(e,t){return(0,g.BX)(R.G,{css:ca.item,children:[e.icon,(0,g.tZ)(T.xv,{css:ca.text,children:e.text})]},t)})]})}var cc=[eh.r4.Gce,eh.r4.CloudRun,eh.r4.Static,eh.r4.Cron],cs=(0,D.X)({container:[B.l0.colWithGap(32),B.l0.textAlign.center,U.maxWidth],title:[B.l0.colWithGap(4),B.l0.width("100%"),B.l0.maxWidth(400),B.l0.align.center,{marginLeft:"auto",marginRight:"auto"}],body:B.l0.colWithGap(16),providers:[B.l0.flex.column,B.l0.align.center,(0,S._)({gap:8},l9,[B.l0.flex.row,B.l0.align.center,{gap:12}])],providerDetails:B.l0.colWithGap(16),cta:[B.l0.width("100%"),B.l0.maxWidth(320),{marginLeft:"auto",marginRight:"auto"}],ctaGroup:B.l0.colWithGap(8),secondaryCta:[B.l0.width("100%"),B.l0.maxWidth(320)],ctaContainer:[B.l0.colWithGap(8),B.l0.align.center],ctaStatusBanner:[B.l0.textAlign.left],oldCta:[B.l0.px(8),B.l0.colWithGap(16)],payment:[B.l0.p(16),B.l0.borderRadius("container"),B.l0.textAlign.left,B.l0.shadow(2)],budgetContainer:[B.l0.colWithGap(8),B.l0.border(),B.l0.borderRadius(),B.l0.p(8)],disabledBanner:[B.l0.py(6),{alignSelf:"center"}]}),cu=function(e){var t,n,r,i,o,a=e.replId,l=e.onError,c=e.onDeploy,s=e.onViewAction,u=e.initialSelectedProvider,d=(0,w.XZ)(),f=(0,w.Qk)(),h=(0,w.v5)(),p=(0,w.t7)(),m=(0,v._)((0,b.useState)(void 0),2),y=m[0],Z=m[1],C=(0,v._)((0,b.useState)(void 0),2),_=C[0],E=C[1],D=(0,v._)((0,b.useState)(!1),2),I=D[0],G=D[1],P=(0,v._)((0,b.useState)(!1),2),A=P[0],L=P[1],N=(0,v._)((0,b.useState)(null!=u?u:null),2),O=N[0],U=N[1],X=(0,w.BU)(),M=X.getDeployabilityByProvider,F=X.refetch;(0,b.useEffect)(function(){et({context:"intro"})},[]);var W=(0,l7.Se)(),H=W.getDescription,z=W.Icon,j=l8({variables:{id:a},onError:function(e){return l(e.message)}}),q=j.loading,J=j.data,Y=(0,v._)((0,b.useState)(!1),2),$=Y[0],K=Y[1],Q=(null==J?void 0:J.repl.__typename)==="Repl"&&(null===(n=J.repl.owner)||void 0===n?void 0:n.__typename)==="Team",ee=(null==J?void 0:J.repl.__typename)==="Repl"&&(null==J?void 0:null===(r=J.repl.owner)||void 0===r?void 0:r.id)&&(0,lY.xm)(null==J?void 0:null===(i=J.repl.owner)||void 0===i?void 0:i.id),en=(0,t8.P5)({controlName:i_.dA,logFlagToAnalytics:!1});(0,b.useEffect)(function(){(0,x._)(function(){var e,t;return(0,k.Jh)(this,function(n){switch(n.label){case 0:if(q)return[2];if(Q&&!ee)return Z(eh.r4.Gce),E(eh.r4.Gce),[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,(0,oe.$f)(h)];case 2:if(null===(e=n.sent()).appType)return Z(eh.r4.CloudRun),E(eh.r4.CloudRun),[2];if((t=(0,tY.oU)(e.appType))===eh.r4.Goval||t===eh.r4.Extension)return l("Did not recognize template deployment provider"),[2];return Z(t),E(t),[3,4];case 3:return n.sent(),l("Something went wrong"),[3,4];case 4:return[2]}})})()},[l,h,q,Q,ee]);var ei=(0,b.useCallback)((0,x._)(function(){return(0,k.Jh)(this,function(e){switch(e.label){case 0:return K(!0),[4,F()];case 1:return e.sent(),K(!1),[2]}})}),[F,K]);if(O)return(0,g.tZ)(l5,{replId:a,initialState:O?{type:O}:{type:eh.r4.Gce,didCheckout:!0},fs:d,secrets:f,dotReplit:h,ports:p,onDeploy:c,onBack:function(){return U(null)},onError:l,openNetworkingPane:function(){s({type:er.a.OpenPane,payload:{type:"networking"}})}});var eo=M(y),ea=eo.deploy,el=eo.isIncludedInSubscription,ec=ea.isAuthorized,es=ea.code,eu=ea.message,ed=q||$||void 0===y,ef=(o={title:"Deploy to production",subtitle:H({type:"deployments"})},(0,S._)(o,eh.r4.Gce,{display:!0,title:"Reserved VM",subtitle:"Always On Servers",header:"Reserved VMs are for long-running jobs and apps",info:[{text:"Reserved VMs ensure high uptime, minimizing disruptions for apps requiring persistent session data.",icon:(0,g.tZ)(lM.lV,{})},{text:(t=(0,v._)((0,i_.gr)("e2-micro"),1)[0],"Reserved VMs are billed hourly starting at $".concat(t,"/hour.")),icon:(0,g.tZ)(lM.G8,{})},{text:"Suitable for bots, stateful APIs, webscraping, and long-running jobs.",icon:(0,g.tZ)(lM.KU,{})}]}),(0,S._)(o,eh.r4.CloudRun,{display:!0,title:"Autoscale",subtitle:"Meet demand exactly",header:"Autoscale is the best choice for most projects",info:[{text:"Automatically scales from zero to any level of demand, making it inexpensive for most apps and effortless when you go viral.",icon:(0,g.tZ)(lM.Qm,{})},{text:"Compute units are billed at $".concat(aw.m0," per compute unit."),icon:(0,g.tZ)(lM.fG,{})},{text:"Suitable for web apps and stateless APIs.",icon:(0,g.tZ)(lM.KU,{})}]}),(0,S._)(o,eh.r4.Static,{display:!0,title:"Static",subtitle:"Easy client-side apps",header:"Share client-side apps fast",info:[{text:"You only pay for outbound data transfer (included in Replit plans). $0.10/GiB otherwise.",icon:(0,g.tZ)(lM.Lv,{})},{text:"Fast deploy times allow you to move quickly on your production sites.",icon:(0,g.tZ)(lM.lt,{})},{text:"Suitable for HTML sites and static content.",icon:(0,g.tZ)(lM.KU,{})}]}),(0,S._)(o,eh.r4.Cron,{display:en,title:"Scheduled",subtitle:"Time-based job scheduler",header:"The easiest way to schedule for your apps to run",info:[{text:"Scheduled deployments run at a specified time and frequency configured by you.",icon:(0,g.tZ)(lM.lt,{})},{text:"Usage-based pricing. Each scheduled job is billed at $0.00000125 per compute unit + $0.10 per month for the scheduler.",icon:(0,g.tZ)(lM.fG,{})},{text:"Suitable for internal tools, one-off tasks, and Cron jobs.",icon:(0,g.tZ)(lM.KU,{})}]}),o);return(0,g.BX)(V,{centered:!0,children:[(0,g.tZ)(iK.u,{isOpen:A,onRequestClose:function(){return L(!1)},children:(0,g.tZ)(lX.Z,{onRequestClose:function(){return L(!1)}})}),(0,g.BX)(R.G,{css:cs.container,children:[(0,g.BX)(R.G,{css:cs.title,children:[(0,g.tZ)(z,{pane:{type:"deployments"},size:48}),(0,g.tZ)(T.h4,{level:1,variant:"subheadBig",children:ef.title}),(0,g.tZ)(T.xv,{color:"dimmer",children:ef.subtitle}),(0,g.tZ)(T.xv,{css:B.l0.textAlign.center,children:(0,g.tZ)("a",{href:"https://docs.replit.com/category/replit-deployments",target:"_blank",rel:"noopener",children:"Learn more"})})]}),(0,g.BX)(R.G,{css:cs.body,children:[(0,g.tZ)(R.G,{css:cs.providers,children:cc.map(function(e,t){if(!ef[e].display)return null;var n=ef[e],r=n.title,i=n.subtitle;return(0,g.tZ)(co,{provider:e,loading:ed,active:y===e,onClick:function(e){Z(e),G(!1)},title:r,description:i,recommended:_===e,index:e===_&&0===t?1.5:e===_&&2===t?.5:t},e)})}),(0,g.BX)(R.G,{css:cs.ctaGroup,children:[(0,g.tZ)(cd,{loading:ed,isDeployable:ec,isDeployableCode:es,isDeployableExplanation:eu,isIncludedInSubscription:el,handleOnProviderContinue:function(){y&&U(y)},refetchDeployabilityQueryData:ei,setShowPaymentMethodForm:function(){return G(!0)},showPaymentMethodForm:I,setShowSupportForm:function(){return L(!0)}}),I?(0,g.tZ)(rr.Tg,{elevated:!0,css:cs.payment,children:(0,g.tZ)(lW.q,{onSuccess:(0,x._)(function(){return(0,k.Jh)(this,function(e){switch(e.label){case 0:return G(!1),[4,ei()];case 1:return e.sent(),[2]}})}),context:"workspace_hosting_pane"})}):null]})]}),(0,g.tZ)(R.G,{css:cs.providerDetails,children:y?(0,g.tZ)(cl,{header:ef[y].header,info:ef[y].info}):null})]})]})};function cd(e){var t=e.isDeployable,n=e.isDeployableCode,r=e.isDeployableExplanation,i=e.isIncludedInSubscription,o=e.loading,a=e.handleOnProviderContinue,l=e.refetchDeployabilityQueryData,c=e.setShowPaymentMethodForm,s=e.showPaymentMethodForm,u=e.setShowSupportForm,d=(0,eg.sG)();if(!t&&d)return(0,g.tZ)(E.E,{text:r,colorway:"grey",css:cs.disabledBanner});if(i)return(0,g.BX)(g.HY,{children:[(0,g.tZ)(e6.zx,{colorway:"primary",onClick:a,text:"Included in your subscription",loading:o,css:cs.cta}),(0,g.tZ)(T.xv,{color:"dimmer",children:r})]});switch(n){case eh.RO.RequiresActiveSubscription:case eh.RO.RequiresPaymentMethodOrSubscription:return(0,g.BX)(R.G,{css:cs.ctaContainer,children:[(0,g.tZ)(lq.Z,{context:"workspace_hosting_pane",text:"Upgrade your plan to deploy",css:cs.cta,colorway:"primary",variant:"default",disabled:s,onPlanCheckoutComplete:l}),(0,g.tZ)(e6.zx,{variant:"nofill",colorway:"primary",text:"or add a payment method",css:cs.cta,disabled:s,loading:o,iconLeft:(0,g.tZ)(lz.Z,{}),onClick:function(){return c()}})]});case eh.RO.RequiresSmsVerification:return(0,g.tZ)(lU.Z,{context:eh.jv.Deployments,onSuccess:l});case eh.RO.RequiresPaymentMethod:return(0,g.tZ)(e6.zx,{colorway:"primary",text:"Add a payment method",css:cs.cta,disabled:s,loading:o,iconLeft:(0,g.tZ)(lz.Z,{}),onClick:function(){return c()}});case eh.RO.RequiresUnbanning:return(0,g.tZ)(lV.u,{text:"Your account currently has restrictions on deploying. We're here to help! Please reach out to our support team for assistance.",colorway:"warning",iconLeft:(0,g.tZ)(I.Z,{}),css:cs.ctaStatusBanner,onClick:function(){return u()}});case eh.RO.InsufficientBudget:return(0,g.BX)(g.HY,{children:[(0,g.tZ)(E.E,{text:"You've reached your monthly usage budget. Increase your budget to continue deploying.",colorway:"warning",icon:(0,g.tZ)(I.Z,{}),css:cs.ctaStatusBanner}),(0,g.tZ)(R.G,{css:cs.budgetContainer,children:(0,g.tZ)(lF.L,{onUpdateSuccess:l})})]});case eh.RO.FeatureDisabled:case eh.RO.FeatureUnsupportedForReplitTeams:case eh.RO.FeatureUnsupportedForTeamsEdu:case eh.RO.FeatureUnsupportedForTeamsFree:case eh.RO.FeatureUnsupportedForTeamsPro:case eh.RO.InsufficientPermissions:case eh.RO.InsufficientQuota:case eh.RO.RequiresEmailVerification:return(0,g.tZ)(E.E,{text:r,colorway:"grey",css:cs.disabledBanner});case eh.RO.Authorized:case eh.RO.AuthorizedQuota:return(0,g.tZ)(e6.zx,{colorway:"primary",onClick:a,text:"Set up your deployment",loading:o,css:cs.cta});default:(0,lJ.Z)(n)}}var cf=[{label:"one hour",key:1},{label:"six hours",key:6},{label:"one day",key:24},{label:"three days",key:72},{label:"one week",key:168}],ch={label:"one hour",key:1},cp=B.nC.min(600),cm=(0,D.X)({fullWidth:(0,S._)({},cp,{gridColumn:"span 2"})}),cv=(0,D.X)({container:(0,S._)({display:"grid",gap:32},cp,{gridTemplateColumns:"repeat(2, minmax(0, 1fr))"}),fullWidth:cm.fullWidth,map:[cm.fullWidth],pies:[cm.fullWidth,B.l0.flex.column,(0,S._)({gap:32},B.nC.min(480),[B.l0.flex.row,{" > *":{flex:1}}])],timeSpanSelector:[B.l0.rowWithGap(8),B.l0.align.center,B.l0.color.foregroundDefault]}),cg=function(e){var t=e.replId,n=(0,v._)((0,b.useState)(ch),2),r=n[0],i=r.key,o=r.label,a=n[1],l=(0,n0.Z)(new Date,i),c=(0,ni.F)().values,s=cb(l,cy(i));return(0,g.tZ)(V,{children:(0,g.BX)(R.G,{css:cv.container,children:[(0,g.tZ)(R.G,{css:cv.fullWidth,children:(0,g.tZ)(nK.ZE,{items:cf,label:"Past ".concat(o),icon:(0,g.tZ)(tg.Z,{}),onAction:function(e){var t,n="string"==typeof e?parseInt(e,10):e;a(null!==(t=cf.find(function(e){return e.key===n}))&&void 0!==t?t:ch)},cssProps:[B.l0.width("fit-content")],children:cf.map(function(e){return(0,g.tZ)(nK.ck,{children:(0,g.tZ)(R.G,{css:cv.timeSpanSelector,children:(0,g.tZ)(T.xv,{multiline:!1,children:e.label})})},e.key)})})}),(0,g.tZ)(R.G,{css:cv.fullWidth,children:(0,g.tZ)(nU,{replId:t,title:"CPU Utilization",metric:nT.RH.CPU,start:s,hours:i,colorFn:function(){return c.global.redDefault}})}),(0,g.tZ)(R.G,{css:cv.fullWidth,children:(0,g.tZ)(nU,{replId:t,title:"Memory Utilization",metric:nT.RH.Memory,start:s,hours:i,colorFn:function(){return c.global.redDefault}})})]})})},cy=function(e){return e<=1?6e5:e<=6?18e5:e<=24?72e5:216e5},cb=function(e,t){var n=e.getTime()%t;return new Date(e.getTime()-n)},cw=(0,D.X)({sectionContainer:[B.l0.colWithGap(8)]});function cZ(e){var t=e.shouldShowDownloadQR,n=(0,v._)((0,b.useState)(t),2),r=n[0],i=n[1];return(0,g.tZ)(R.G,{children:(0,g.BX)(R.G,{css:cw.sectionContainer,children:[(0,g.tZ)(e6.zx,{iconLeft:(0,g.tZ)(iQ.Z,{}),text:"Install the Replit App",onClick:function(){return i(function(e){var t=!e;return t&&(0,ee.j)(ee.U3.DEPLOYMENT_MOBILE_DOWNLOAD_QR_VIEWED),t})}}),r?(0,g.tZ)(i$,{color:B.TV.foregroundDefault}):null]})})}var cx=n(45685),cC=n(30286),ck=n(81253),cS=n(73274),c_=n(19602),cE=(0,D.X)({container:B.l0.colWithGap(24),pauseAndResumeButtons:B.l0.colWithGap(8),sectionContainer:B.l0.colWithGap(8),sectionButton:[B.l0.color.accentNegativeStrongest,B.l0.transition.snappy,(0,S._)({backgroundColor:eN.vb.interactiveBackground,borderColor:"transparent"},B.wl.hover,{borderColor:"transparent"})]}),cT=function(e){var t=e.hideResume,n=e.hideSuspend,r=e.onLifecycleCommand,i=e.authorizations,o=(0,w.kW)(),a=(0,w.$y)(),l=(0,v._)((0,b.useState)(!1),2),c=l[0],s=l[1],u=i.editDeploymentStatus,d=u.isAuthorized,f=u.message,h=(null==a?void 0:a.status)===eh.Fe.Resuming,p=(null==a?void 0:a.status)===eh.Fe.Suspending,m=(null==a?void 0:a.status)===eh.Fe.Suspended,y=h||p||o===Z.z.ProcessingLifecycleCommand||o===Z.z.Deploying,x=!(void 0!==t&&t)&&(m||h)&&(null==a?void 0:a.hasImageTag),C=!(void 0!==n&&n)&&!m&&!h&&(p||o===Z.z.Deploying||o===Z.z.Ready)&&(null==a?void 0:a.hasImageTag);return(0,g.tZ)(g.HY,{children:(0,g.BX)(R.G,{css:cE.container,children:[x||C?(0,g.BX)(R.G,{css:cE.pauseAndResumeButtons,children:[x?(0,g.BX)(g.HY,{children:[(0,g.tZ)(eJ.u,{tooltip:f,isDisabled:d,children:(0,g.tZ)(e6.zx,{text:h?"Resuming":"Resume",onClick:function(){return r({command:eh.Qc.Resume})},loading:h,disabled:y||!d,iconLeft:h?(0,g.tZ)(j.Z,{}):(0,g.tZ)(ck.Z,{})})}),(0,g.tZ)(T.xv,{color:"dimmer",children:"Your app will become accessible to users again"})]}):null,C?(0,g.BX)(g.HY,{children:[(0,g.tZ)(eJ.u,{tooltip:f,isDisabled:d,children:(0,g.tZ)(e6.zx,{text:"Pause",onClick:function(){return r({command:eh.Qc.Suspend})},loading:p,disabled:y||!d,iconLeft:p?(0,g.tZ)(j.Z,{}):(0,g.tZ)(cC.Z,{})})}),(0,g.tZ)(T.xv,{color:"dimmer",children:"Your deployment billing will continue, but all users will lose access to your app"})]}):null]}):null,(0,g.tZ)(cR,{setIsDestroying:s,onLifecycleCommand:r,authorizations:i}),(0,g.tZ)(cD,{isDestroying:c,setIsDestroying:s,onLifecycleCommand:r,authorizations:i})]})})};function cR(e){var t=e.setIsDestroying,n=e.onLifecycleCommand,r=e.authorizations,i=(0,v._)((0,b.useState)(!1),2),o=i[0],a=i[1],l=r.deleteDeployment,c=l.isAuthorized,s=l.message;return(0,g.BX)(g.HY,{children:[(0,g.BX)(R.G,{css:cE.sectionContainer,children:[(0,g.tZ)(eJ.u,{tooltip:s,isDisabled:c,children:(0,g.tZ)(e6.zx,{text:"Change deployment type",onClick:function(){return a(!0)},disabled:!c,iconLeft:(0,g.tZ)(cS.Z,{})})}),(0,g.tZ)(T.xv,{color:"dimmer",children:"To change your deployment type, you will need to shut down and create a new deployment"})]}),(0,g.tZ)(iK.u,{isOpen:o,onRequestClose:function(){return a(!1)},children:(0,g.tZ)(cx.Z,{confirmLabel:"Yes, delete my deployment",title:"Change Deployment Type",isDestructive:!0,onConfirm:function(){t(!0),a(!1),n({command:eh.Qc.Destroy})},onCancel:function(){return a(!1)},children:"To change your deployment type, you will need to shut down and create a new deployment. This will destroy your deployment and any associated deployment tiers, saved replit.app domain and deployment history. You can always come back and redeploy your repl again."})})]})}function cD(e){var t=e.isDestroying,n=e.setIsDestroying,r=e.onLifecycleCommand,i=e.authorizations,o=(0,v._)((0,b.useState)(!1),2),a=o[0],l=o[1],c=i.deleteDeployment,s=c.isAuthorized,u=c.message;return(0,g.BX)(g.HY,{children:[(0,g.BX)(R.G,{css:cE.sectionContainer,children:[(0,g.tZ)(eJ.u,{tooltip:u,isDisabled:s,children:(0,g.tZ)(e6.zx,{text:"Shut down",colorway:"negative",variant:"outlined",css:cE.sectionButton,onClick:function(){return l(!0)},disabled:t||!s,iconLeft:(0,g.tZ)(c_.Z,{})})}),(0,g.tZ)(T.xv,{color:"dimmer",children:"Your deployment billing will be canceled, and your deployed app will cease to exist"})]}),(0,g.tZ)(iK.u,{isOpen:a,onRequestClose:function(){return l(!1)},children:(0,g.tZ)(cx.Z,{confirmLabel:"Yes, delete my deployment",title:"Delete Deployment",isDestructive:!0,onConfirm:function(){n(!0),l(!1),r({command:eh.Qc.Destroy})},onCancel:function(){return l(!1)},children:"This will destroy your deployment and any associated deployment tiers, saved replit.app domain and deployment history. You can always come back and redeploy your repl again."})})]})}var cI=n(46134);function cB(){var e=(0,ei._)(["\n  query AutoscaleUsageSectionCurrentUser {\n    currentUser {\n      id\n      usageInterval {\n        ... on UsageInterval {\n          startDate\n          endDate\n          resources {\n            autoscaleComputeUnits {\n              usage\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return cB=function(){return e},e}var cG={},cP=(0,eo.Ps)(cB()),cA=n(89313),cL=(0,D.X)({root:[B.l0.colWithGap(4),B.l0.p(8),B.l0.pt(12),B.l0.borderRadius(8),{outline:"1px solid transparent"}],outerRow:[B.l0.rowWithGap(12),B.l0.align.center],typeCol:[B.l0.colWithGap(4),B.l0.flex.growAndShrink(1)],configAndUsageRow:[B.l0.rowWithGap(12),B.l0.align.center,B.l0.flex.growAndShrink(1)],usageRow:[B.l0.rowWithGap(8)]}),cN=function(e){var t,n=e.machineConfiguration,r=(t=(0,G._)({},cG,void 0),ea.a(cP,t)).data,i=(0,b.useMemo)(function(){return function(e){var t,n,r=e.data;if((null==r?void 0:null===(t=r.currentUser)||void 0===t?void 0:t.__typename)==="CurrentUser"){var i=null==r?void 0:null===(n=r.currentUser)||void 0===n?void 0:n.usageInterval;if(i&&"UsageInterval"===i.__typename){var o=i.resources.autoscaleComputeUnits.usage,a=(0,cI.fZ)(o,{resourceUsageType:"ComputeUnits"}),l=new Date(i.endDate).toLocaleString("default",{month:"short",day:"numeric"});return{description:"".concat(a," used this billing period"),renewalInfo:"Renews ".concat(l," ")}}}}({data:r})},[r]),o=(0,b.useMemo)(function(){if(null!=n)return"Autoscale (".concat(n.label,")")},[n]);if(!o||!i)return(0,g.tZ)(R.G,{css:[B.l0.justify.center,B.l0.flex.row],children:(0,g.tZ)(j.Z,{})});var a=e.authorizations.editDeploymentTier,l=a.isAuthorized,c=a.message;return(0,g.BX)(rr.Tg,{elevated:!0,css:cL.root,children:[(0,g.BX)(R.G,{css:cL.outerRow,children:[(0,g.tZ)(R.G,{css:cL.typeCol,children:o?(0,g.tZ)(T.xv,{multiline:!1,children:o}):null}),(0,g.tZ)(H.hU,{alt:l?"Edit":c,disabled:!l,onClick:e.onEditAutoscaleMachineConfiguration,children:(0,g.tZ)(cA.Z,{})})]}),i?(0,g.BX)(g.HY,{children:[(0,g.BX)(R.G,{css:cL.outerRow,children:[(0,g.tZ)(T.xv,{multiline:!1,children:i.description}),(0,g.tZ)(T.xv,{color:"dimmer",multiline:!1,children:i.renewalInfo})]}),(0,g.tZ)(R.G,{css:cL.outerRow,children:(0,g.tZ)(iI(),{legacyBehavior:!0,passHref:!0,href:"/usage",prefetch:!1,children:(0,g.tZ)("a",{role:"button",children:"View account resource limits"})})})]}):null]})},cO=n(54505),cU=n(22192),cX=n(6674),cM=(0,cU.$)(["paddingRight"]),cF=cM.cssVars,cW=cM.styleTokens,cV=(0,D.X)({inputWrapper:[B.l0.position.relative,B.l0.flex.growAndShrink(1),{input:[{paddingRight:cW.paddingRight}]}],copyButton:[B.l0.position.absolute,B.l0.top("50%"),B.l0.right(4),{transform:"translateY(-50%)"}]});function cH(e){return(0,g.BX)(R.G,{css:cV.inputWrapper,style:(0,S._)({},cF.paddingRight,e.value?"36px":"8px"),children:[(0,g.tZ)(ty.II,(0,P._)((0,G._)({},e),{onClick:function(e){return e.currentTarget.select()}})),e.value?(0,g.tZ)(H.hU,{css:cV.copyButton,alt:"Copy",tooltipBehavior:"hidden",onClick:function(){return e.value&&(0,cO.Z)(e.value)},children:(0,g.tZ)(cX.Z,{})}):null]})}var cz=(0,D.X)({root:[B.l0.flex.column,(p={gap:8},(0,S._)(p,B.nC.min("mobileMax"),[B.l0.flex.row,{"& > div:nth-of-type(1)":{width:"30%"},"& > div:nth-of-type(2)":{maxWidth:50}}]),(0,S._)(p,"label",[B.l0.color.foregroundDimmer,{fontSize:B.TV.fontSizeSmall}]),p)],col:[B.l0.colWithGap(4),B.l0.flex.growAndShrink(1)],records:[B.l0.px(12),B.l0.pt(8),B.l0.pb(16),B.l0.colWithGap(16),B.l0.borderRadius(12),(0,S._)({},B.nC.min("mobileMax"),B.l0.colWithGap(12))],divider:(0,S._)({display:"flex",height:1,backgroundColor:B.TV.outlineDimmest},B.nC.min("mobileMax"),B.l0.display.none)});function cj(e){return(0,g.BX)(R.G,{css:cz.root,children:[(0,g.BX)(R.G,{css:cz.col,children:[(0,g.tZ)(R.G,{tag:"label",children:"Hostname"}),(0,g.tZ)(ty.II,{value:e.hostname,readOnly:!0})]}),(0,g.BX)(R.G,{css:cz.col,children:[(0,g.tZ)(R.G,{tag:"label",children:"Type"}),(0,g.tZ)(ty.II,{value:e.type,readOnly:!0})]}),(0,g.BX)(R.G,{css:cz.col,children:[(0,g.tZ)(R.G,{tag:"label",children:"Record"}),(0,g.tZ)(cH,{value:e.record,readOnly:!0})]})]})}function cq(e){var t="replit-verify=".concat(e.deploymentId);return(0,g.BX)(rr.Tg,{background:"default",css:cz.records,children:[(0,g.tZ)(cj,{hostname:e.hostname,type:"A",record:e.apexProxy}),(0,g.tZ)(R.G,{css:cz.divider}),(0,g.tZ)(cj,{hostname:e.hostname,type:"TXT",record:t})]})}function cJ(){var e=(0,ei._)(["\n  mutation HostingDeploymentsUnlinkDomain(\n    $input: UnlinkHostingDeploymentDomainInput!\n  ) {\n    unlinkHostingDeploymentDomain(input: $input) {\n      ... on HostingDeployment {\n        id\n        domains {\n          id\n        }\n      }\n    }\n  }\n"]);return cJ=function(){return e},e}function cY(){var e=(0,ei._)(["\n  mutation HostingDeploymentsVerifyDomain(\n    $input: VerifyHostingDeploymentDomainInput!\n  ) {\n    verifyHostingDeploymentDomain(input: $input) {\n      ... on HostingDeploymentDomain {\n        id\n        state\n      }\n    }\n  }\n"]);return cY=function(){return e},e}var c$={},cK=(0,eo.Ps)(cJ()),cQ=(0,eo.Ps)(cY()),c0=n(76143);function c1(){var e=(0,ei._)(["\n  fragment HostingDeploymentDomainsDomain on HostingDeploymentDomain {\n    id\n    state\n    domain\n  }\n"]);return c1=function(){return e},e}function c2(){var e=(0,ei._)(["\n  fragment HostingDeploymentDomainsHostingDeployment on HostingDeployment {\n    id\n    currentBuild {\n      id\n      status\n    }\n    repl {\n      id\n      apexProxy\n    }\n    domains {\n      id\n      ...HostingDeploymentDomainsDomain\n    }\n    legacyReplDomains {\n      id\n      ...HostingDeploymentDomainsDomain\n    }\n  }\n  ","\n"]);return c2=function(){return e},e}function c3(){var e=(0,ei._)(["\n  query HostingDeploymentDomains($id: String!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        ...HostingDeploymentDomainsHostingDeployment\n      }\n    }\n  }\n  ","\n"]);return c3=function(){return e},e}function c4(){var e=(0,ei._)(["\n  mutation LinkHostingDeploymentDomain(\n    $input: LinkHostingDeploymentDomainInput!\n  ) {\n    linkHostingDeploymentDomain(input: $input) {\n      ... on HostingDeployment {\n        id\n        domains {\n          ...HostingDeploymentDomainsDomain\n        }\n      }\n    }\n  }\n  ","\n"]);return c4=function(){return e},e}var c8={},c6=(0,eo.Ps)(c1()),c5=(0,eo.Ps)(c2(),c6),c7=(0,eo.Ps)(c3(),c5),c9=(0,eo.Ps)(c4(),c6),se="https://docs.replit.com/additional-resources/custom-domains",st=(0,D.X)({root:[B.l0.colWithGap(8),B.l0.borderRadius(8),B.l0.pl(8),B.l0.pr(4),B.l0.height(32),B.l0.justify.center]}),sn=(0,D.X)({root:st.root,rootExpanded:[st.root,B.l0.height("auto"),B.l0.pt(4),B.l0.pb(12),B.l0.justify.start],domainRow:[B.l0.reset.button,B.l0.rowWithGap(8),B.l0.align.center,B.l0.justify.spaceBetween],iconButtons:[B.l0.flex.row],expanded:[B.l0.colWithGap(12),B.l0.pl(4),B.l0.pr(8)],domainWrapper:[B.l0.rowWithGap(8),B.l0.align.center,B.l0.flex.shrink(1),B.l0.color.accentPrimaryStronger,{a:B.l0.hover(B.l0.color.accentPrimaryStrongest)}],statusDot:[B.l0.borderRadius("full"),B.l0.width(6),B.l0.height(6)],status:[B.l0.rowWithGap(4),B.l0.align.center],dnsRecords:[B.l0.colWithGap(6)],buttons:[B.l0.flex.column,B.l0.justify.spaceBetween,(m={gap:8},(0,S._)(m,B.nC.min("mobileMax"),B.l0.flex.row),(0,S._)(m,"button",[B.l0.flex.growAndShrink(1)]),m)],warning:[B.l0.rowWithGap(6),B.l0.align.center]}),sr={verified:{color:B.TV.accentPositiveDefault,text:"Verified"},verifying:{color:B.TV.orangeDefault,text:"Verifying"},failed:{color:B.TV.accentNegativeDefault,text:"Failed"}};function si(e){var t,n,r,i=e.domain,o=e.deploymentId,a=e.apexProxy,l=e.authorizations,c=(0,v._)((0,b.useState)(!1),2),s=c[0],u=c[1],d=(0,v._)((0,b.useState)(!1),2),f=d[0],h=d[1],p=(0,v._)((t=(0,G._)({},c8,{variables:{id:o},fetchPolicy:"network-only",ssr:!1}),c0.t(c7,t)),2),m=p[0],y=p[1].loading,w=(0,v._)((n=(0,G._)({},c$,void 0),el.D(cK,n)),2),Z=w[0],x=w[1].loading,C=(0,v._)((r=(0,G._)({},c$,void 0),el.D(cQ,r)),2),k=C[0],S=C[1].loading,_=i.state===eh.zt.Failed,E=l.addCustomDomain,D=E.isAuthorized,P=E.message,A=l.deleteCustomDomain,L=A.isAuthorized,N=A.message;return(0,g.BX)(rr.Tg,{elevated:!0,css:s?sn.rootExpanded:sn.root,children:[(0,g.BX)(R.G,{css:sn.domainRow,style:{borderBottomLeftRadius:s?0:void 0,borderBottomRightRadius:s?0:void 0},children:[(0,g.BX)(R.G,{css:sn.domainWrapper,children:[(0,g.tZ)(T.xv,{multiline:!1,children:(0,g.tZ)("a",{target:"_blank",href:"".concat(i.domain.startsWith("http://")||i.domain.startsWith("https://")?"":"https://").concat(i.domain),children:i.domain})}),(0,g.BX)(R.G,{css:sn.status,children:[(0,g.tZ)(R.G,{css:sn.statusDot,style:{backgroundColor:sr[i.state].color}}),(0,g.tZ)(T.xv,{color:"dimmer",variant:"small",children:sr[i.state].text})]})]}),(0,g.BX)(R.G,{css:sn.iconButtons,children:[(0,g.tZ)(eL.m,{textToCopy:i.domain,tooltipSuccessText:"Copy link"}),(0,g.tZ)(eJ.u,{tooltip:P,isDisabled:D,children:(0,g.tZ)(H.hU,{alt:"Edit",disabled:!D,tooltipBehavior:"hidden",onClick:function(){h(!1),u(function(e){return!e})},css:B.l0.color.foregroundDimmer,children:s?(0,g.tZ)(rl.Z,{}):(0,g.tZ)(cA.Z,{})})})]})]}),s?(0,g.tZ)(R.G,{css:sn.expanded,children:f?(0,g.BX)(g.HY,{children:[(0,g.tZ)(T.xv,{children:"Are you sure you want to unlink this domain?"}),(0,g.BX)(R.G,{css:sn.buttons,children:[(0,g.tZ)(e6.zx,{size:"small",variant:"outlined",text:"Cancel",onClick:function(){h(!1)}}),(0,g.tZ)(e6.zx,{size:"small",disabled:x,text:"Yes, unlink "+i.domain,colorway:"negative",onClick:function(){Z({variables:{input:{hostingDeploymentDomainId:i.id}}})}})]})]}):(0,g.BX)(g.HY,{children:[(0,g.BX)(R.G,{css:sn.dnsRecords,children:[_?(0,g.BX)(g.HY,{children:[(0,g.BX)(R.G,{css:sn.warning,children:[(0,g.tZ)(I.Z,{}),(0,g.tZ)(T.xv,{children:"DNS Error"})]}),(0,g.BX)(T.xv,{children:["Failed to link domain. Make sure your domain's DNS settings have these records."," ",(0,g.tZ)("a",{target:"_blank",href:se,children:"Learn more"})]})]}):(0,g.BX)(T.xv,{color:"dimmer",children:["Add these records to your domain's"," ",(0,g.tZ)("strong",{css:B.l0.color.foregroundDefault,children:"DNS settings"}),". This may take up to 48 hours to fully apply."," ",(0,g.tZ)("a",{target:"_blank",href:se,children:"Learn more"})]}),(0,g.tZ)(cq,{hostname:i.domain,apexProxy:a,deploymentId:o})]}),(0,g.BX)(R.G,{css:sn.buttons,children:[(0,g.tZ)(e6.zx,{iconLeft:y||S?(0,g.tZ)(j.Z,{}):(0,g.tZ)(ep.Z,{}),size:"small",text:_?"Retry linking":"Check status",onClick:function(){_?k({variables:{input:{hostingDeploymentDomainId:i.id}}}):m()}}),(0,g.tZ)(eJ.u,{isDisabled:L,tooltip:N,children:(0,g.tZ)(e6.zx,{iconLeft:(0,g.tZ)(c_.Z,{}),size:"small",disabled:x||!L,text:_?"Remove domain":"Unlink domain",colorway:"negative",onClick:function(){h(!0)}})})]})]})}):null]})}var so=n(77402);function sa(){var e=(0,ei._)(["\n  mutation HostingDeploymentsUnlinkLegacyReplDomain(\n    $input: UnlinkLegacyReplDomainInput!\n  ) {\n    unlinkLegacyReplDomain(input: $input) {\n      ... on Repl {\n        id\n        hostingDeployment {\n          ... on HostingDeployment {\n            id\n            legacyReplDomains {\n              id\n              ...HostingDeploymentDomainsDomain\n            }\n            domains {\n              id\n              ...HostingDeploymentDomainsDomain\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return sa=function(){return e},e}var sl={},sc=(0,eo.Ps)(sa(),c6),ss=n(43580),su=n(32508),sd=n.n(su),sf=(0,D.X)({root:[B.l0.colWithGap(16),B.l0.p(8),B.l0.borderRadius(8),B.l0.border({color:B.TV.outlineDimmer})],labelRow:[B.l0.rowWithGap(8),B.l0.align.center],labelText:[B.l0.flex.growAndShrink(1)],controls:[B.l0.rowWithGap(8),B.l0.justify.spaceBetween,{"& > button":[B.l0.flex.growAndShrink(1)]}],domainSection:[B.l0.colWithGap(8)],error:[B.l0.rowWithGap(4),B.l0.align.center],recordsSection:[B.l0.colWithGap(8)],valueRow:[B.l0.borderRadius(8),B.l0.pl(8),B.l0.pr(4),B.l0.height(32),B.l0.rowWithGap(8),B.l0.align.center,B.l0.justify.spaceBetween,{a:B.l0.hover(B.l0.color.accentPrimaryStrongest)}]});function sh(e){var t,n=(0,v._)((0,b.useState)(!0),2),r=n[0],i=n[1],o=(0,v._)((0,b.useState)(""),2),a=o[0],l=o[1],c=(0,v._)((0,b.useState)(!1),2),s=c[0],u=c[1],d=(0,v._)((t=(0,G._)({},c8,{onCompleted:function(){e.onAdd()}}),el.D(c9,t)),2),f=d[0],h=d[1].loading,p=(0,b.useRef)(null),m=(0,b.useId)(),y=sd()(a,{require_valid_protocol:!1})&&a.split(".").length>=2,w=!y||h,Z=y?null:"Enter a valid domain",x=h?(0,g.tZ)(j.Z,{}):(0,g.tZ)(tS.Z,{});return r||h||(x=(0,g.tZ)(so.Z,{})),(0,g.BX)(R.G,{tag:"form",css:sf.root,onSubmit:function(t){if(t.preventDefault(),r){var n;i(!1),null===(n=p.current)||void 0===n||n.focus();return}f({variables:{input:{hostingDeploymentId:e.deploymentId,domain:a}}})},children:[(0,g.BX)(R.G,{css:sf.domainSection,children:[(0,g.BX)(R.G,{tag:"label",htmlFor:m,css:sf.labelRow,children:[y&&!r?(0,g.tZ)(r_.Z,{color:B.TV.accentPositiveDefault}):null,(0,g.tZ)(T.xv,{color:"dimmer",children:"First, enter your domain"})]}),r?(0,g.tZ)(ty.II,{id:m,autoFocus:!0,placeholder:"example.com",value:a,disabled:h,onChange:function(e){return l(e.currentTarget.value)},onBlur:function(e){return u(!!e.currentTarget.value)}}):(0,g.BX)(rr.Tg,{elevated:!0,css:sf.valueRow,children:[(0,g.tZ)(R.G,{href:"https://"+a,tag:"a",target:"_blank",children:a}),(0,g.tZ)(H.hU,{alt:"Edit",onClick:function(){return i(!0)},children:(0,g.tZ)(cA.Z,{color:B.TV.foregroundDimmer})})]}),Z&&s?(0,g.BX)(R.G,{css:sf.error,children:[(0,g.tZ)(I.Z,{size:12,color:B.TV.orangeDefault}),(0,g.tZ)(T.xv,{variant:"small",children:Z})]}):null]}),!r&&y?(0,g.tZ)(sp,{apexProxy:e.apexProxy,domain:a,deploymentId:e.deploymentId}):null,(0,g.BX)(R.G,{css:sf.controls,children:[(0,g.tZ)(e6.zx,{type:"button",text:"Cancel",onClick:e.onCancel}),(0,g.tZ)(e6.zx,{ref:p,iconRight:x,colorway:"primary",type:"submit",disabled:w,text:r?"Next":"Link domain"})]})]})}function sp(e){return(0,g.BX)(R.G,{css:sf.recordsSection,children:[(0,g.BX)(R.G,{css:sf.labelRow,children:[(0,g.tZ)(ss.Z,{color:B.TV.foregroundDimmest}),(0,g.BX)(T.xv,{multiline:!0,css:sf.labelText,children:["Next, add the following records your domain's DNS settings."," ",(0,g.tZ)("a",{target:"_blank",href:se,children:"Learn more"})]})]}),(0,g.tZ)(cq,{apexProxy:e.apexProxy,hostname:e.domain,deploymentId:e.deploymentId})]})}var sm=(0,D.X)({root:[B.l0.py(12),B.l0.flex.column,(0,S._)({gap:6},B.nC.min("mobileMax"),[B.l0.py(4),B.l0.flex.row,B.l0.align.center,{gap:2,button:{border:"none"}}])],domainLink:[B.l0.flex.growAndShrink(1),B.l0.flex.row,B.l0.fontWeight.medium,{a:[B.l0.truncate,B.l0.flex.shrink(1)]}],confirm:[B.l0.p(8),B.l0.borderRadius(8),B.l0.colWithGap(8),B.l0.justify.spaceBetween],confirmButtons:[B.l0.rowWithGap(8),{button:[B.l0.flex.growAndShrink(1)]}],unlinkButton:[B.l0.color.foregroundDimmer,B.l0.hover(B.l0.backgroundColor.backgroundHighest)]}),sv=function(e){var t=e.domain;return(0,g.tZ)("a",{target:"_bank",href:"https://"+t,children:t})};function sg(e){var t,n=e.deploymentId,r=e.domain,i=e.apexProxy,o=(0,v._)((t=(0,G._)({},sl,void 0),el.D(sc,t)),2),a=o[0],l=o[1].loading,c=(0,v._)((0,b.useState)(!1),2),s=c[0],u=c[1],d=(0,v._)((0,b.useState)(!1),2),f=d[0],h=d[1];return s?(0,g.BX)(rr.Tg,{elevated:!0,css:sm.confirm,children:[(0,g.BX)(T.xv,{children:["Are you sure you want to remove ",(0,g.tZ)(sv,{domain:r.domain}),"?"]}),(0,g.BX)(R.G,{css:sm.confirmButtons,children:[(0,g.tZ)(e6.zx,{text:"Cancel",onClick:function(){return u(!1)},size:"small"}),(0,g.tZ)(e6.zx,{size:"small",disabled:l,colorway:"negative",iconLeft:l?(0,g.tZ)(j.Z,{}):(0,g.tZ)(c_.Z,{}),text:"Unlink domain",onClick:function(){return a({variables:{input:{replDomainId:r.id}}})}})]})]}):f?(0,g.BX)(rr.Tg,{elevated:!0,css:sm.confirm,children:[(0,g.BX)(R.G,{children:[(0,g.tZ)(T.xv,{variant:"small",color:"dimmer",children:"Transfering"}),(0,g.tZ)(R.G,{css:sm.domainLink,children:(0,g.tZ)(sv,{domain:r.domain})})]}),(0,g.tZ)(sp,{deploymentId:n,domain:r.domain,apexProxy:i}),(0,g.BX)(R.G,{css:sm.confirmButtons,children:[(0,g.tZ)(e6.zx,{text:"Cancel",onClick:function(){return h(!1)},size:"small"}),(0,g.tZ)(e6.zx,{size:"small",disabled:l,colorway:"primary",iconLeft:l?(0,g.tZ)(j.Z,{}):(0,g.tZ)(so.Z,{}),text:"Complete transfer",onClick:function(){return a({variables:{input:{replDomainId:r.id,transferToHostingDeploymentId:n}}})}})]})]}):(0,g.BX)(R.G,{css:sm.root,children:[(0,g.tZ)(R.G,{css:sm.domainLink,children:(0,g.tZ)(sv,{domain:r.domain})}),(0,g.tZ)(e6.zx,{size:"small",variant:"outlined",text:"Unlink",onClick:function(){return u(!0)},iconLeft:(0,g.tZ)(c_.Z,{}),css:sm.unlinkButton}),(0,g.tZ)(e6.zx,{size:"small",variant:"outlined",disabled:l,iconRight:(0,g.tZ)(tS.Z,{}),colorway:"primary",text:"Transfer to deployment",onClick:function(){return h(!0)}})]})}var sy=(0,D.X)({root:[B.l0.colWithGap(4),B.l0.p(12),B.l0.pb(6),B.l0.borderRadius(12),B.l0.backgroundColor.backgroundHigher,B.l0.border({color:B.TV.outlineDimmer})],header:[B.l0.align.center,B.l0.rowWithGap(8)],list:[{"& > div:not(:first-of-type)":B.l0.border({color:B.TV.outlineDimmer,direction:"top"})}]});function sb(e){var t=e.domains,n=e.deploymentId,r=e.apexProxy,i=1===t.length?"domain":"domains";return(0,g.BX)(rr.Tg,{css:sy.root,children:[(0,g.BX)(R.G,{css:B.l0.colWithGap(4),children:[(0,g.BX)(R.G,{css:sy.header,children:[(0,g.tZ)(I.Z,{color:B.TV.yellowStronger}),(0,g.BX)(T.xv,{variant:"subheadDefault",children:["Transfer ",i]})]}),(0,g.BX)(T.xv,{color:"dimmer",children:["You have attached ",t.length," custom ",i," to your development Repl. Please transfer ","domain"===i?"it":"them"," to your deployment for the best user experience."]})]}),(0,g.tZ)(R.G,{css:sy.list,children:t.map(function(e){return(0,g.tZ)(sg,{domain:e,deploymentId:n,apexProxy:r},e.id)})})]})}var sw=(0,D.X)({root:[B.l0.colWithGap(8)],error:[B.l0.center,B.l0.rowWithGap(8)],loading:[B.l0.center],empty:[B.l0.px(16),B.l0.py(32),B.l0.borderRadius(8),B.l0.center,B.l0.colWithGap(8),{border:"1px dashed",borderColor:B.TV.outlineDimmer}],primaryDomain:[B.l0.rowWithGap(4),B.l0.height(32),B.l0.justify.spaceBetween,B.l0.align.center,B.l0.pl(8),B.l0.pr(4),B.l0.borderRadius(8)],primaryDomainLink:[B.l0.flex.shrink(1),B.l0.color.accentPrimaryStronger,{a:B.l0.hover(B.l0.color.accentPrimaryStrongest)}],icons:[B.l0.flex.row,B.l0.align.center],footer:[B.l0.flex.row]});function sZ(e){var t,n,r,i,o=e.deployment,a=e.authorizations,l=(0,v._)((0,b.useState)(!1),2),c=l[0],s=l[1],u=(0,v._)((0,b.useState)(void 0),2),d=u[0],f=u[1],h=(0,t8.P5)({type:"string",controlName:"flag-fallback-deployments-domain",default:i_.q7});t={variables:{id:o.id},fetchPolicy:"cache-and-network",ssr:!1,pollInterval:d,onCompleted:function(e){var t,n;f((null===(t=e.hostingDeployment)||void 0===t?void 0:t.__typename)==="HostingDeployment"&&(null===(n=e.hostingDeployment.domains)||void 0===n?void 0:n.some(function(e){return e.state===r8.zt.Verifying}))?3e4:void 0)}},n=(0,G._)({},c8,t),ea.a(c7,n);var p=(null==o?void 0:null===(r=o.domains)||void 0===r?void 0:r.length)?o.domains:null,m=(null==o?void 0:o.currentBuild.status)===eh.Fe.Success,y=null==o?void 0:o.repl.apexProxy,Z=(0,w.$y)(),x=function(){var e,t,n,r,i,o=(null==Z?void 0:null===(e=Z.repl.hostingDeployment)||void 0===e?void 0:e.__typename)==="HostingDeployment"?null===(t=Z.repl.hostingDeployment)||void 0===t?void 0:t.replitAppSubdomain:void 0;if(!o&&(null==Z?void 0:null===(n=Z.repl.owner)||void 0===n?void 0:n.username)&&(o="".concat(Z.repl.slug,"-").concat(Z.repl.owner.username)),o)return"https://".concat(o).concat((null===(i=window)||void 0===i?void 0:null===(r=i.location)||void 0===r?void 0:r.hostname)!=="replit.com"?".staging":"",".").concat(h)}(),C=a.addCustomDomain,k=C.isAuthorized,S=C.message;return(0,g.BX)(R.G,{css:sw.root,children:[!c&&(null==o?void 0:null===(i=o.legacyReplDomains)||void 0===i?void 0:i.length)&&y?(0,g.tZ)(sb,{domains:o.legacyReplDomains,deploymentId:o.id,apexProxy:y}):null,(0,g.BX)(rr.Tg,{elevated:!0,css:sw.primaryDomain,children:[(0,g.tZ)(T.xv,{multiline:!1,css:sw.primaryDomainLink,children:(0,g.tZ)("a",{href:x,target:"_blank",rel:"noreferrer noopener",children:x})}),(0,g.BX)(R.G,{css:sw.icons,children:[(0,g.tZ)(eL.m,{textToCopy:null!=x?x:""}),(0,g.tZ)(eJ.u,{tooltip:sx,children:(0,g.tZ)(iO.Z,{"aria-label":sx,color:B.TV.foregroundDimmer,css:B.l0.m(4)})})]})]}),p&&o?(0,g.tZ)(R.G,{css:B.l0.colWithGap(8),children:p.map(function(e){return(0,g.tZ)(R.G,{children:(0,g.tZ)(si,{apexProxy:o.repl.apexProxy,deploymentId:o.id,domain:e,authorizations:a})},e.domain)})}):null,c&&y?(0,g.tZ)(sh,{apexProxy:y,deploymentId:o.id,onAdd:function(){return s(!1)},onCancel:function(){return s(!1)}}):null,m?null:(0,g.tZ)(E.E,{colorway:"warning",icon:(0,g.tZ)(I.Z,{}),text:"You must successfully deploy your project before linking a domain"}),!1===c?(0,g.tZ)(R.G,{css:sw.footer,children:(0,g.tZ)(eJ.u,{tooltip:S,isDisabled:k,children:(0,g.tZ)(e6.zx,{disabled:!m||!k,iconLeft:(0,g.tZ)(i4.Z,{}),text:"Link a domain",onClick:function(){return s(!0)},variant:"outlined",size:"small"})})}):null]})}var sx="Your primary domain cannot be changed";function sC(){var e=(0,ei._)(["\n  fragment DeploymentSettingsAuthorizations on ReplAuthorizations {\n    addCustomDomain {\n      isAuthorized\n      code\n      message\n    }\n    deleteCustomDomain {\n      isAuthorized\n      code\n      message\n    }\n    deleteDeployment {\n      isAuthorized\n      code\n      message\n    }\n    editDeploymentStatus(provider: $provider) {\n      isAuthorized\n      code\n      message\n    }\n    editDeploymentTier(provider: $provider) {\n      isAuthorized\n      code\n      message\n    }\n  }\n"]);return sC=function(){return e},e}function sk(){var e=(0,ei._)(["\n  query HostingDeploymentSettings($id: String!) {\n    hostingDeployment(id: $id) {\n      ... on HostingDeployment {\n        id\n        ...HostingDeploymentDomainsHostingDeployment\n        currentBuild {\n          id\n          provider\n          machineConfiguration {\n            ...MachineConfiguration\n          }\n          machineJob {\n            ... on HostingBuildMachineJob {\n              failureNotifications\n            }\n          }\n          envVars {\n            name\n            value\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n"]);return sk=function(){return e},e}function sS(){var e=(0,ei._)(["\n  query HostingDeploymentSettingsAuthz(\n    $replId: String!\n    $provider: HostingBuildProvider!\n  ) {\n    repl(id: $replId) {\n      __typename\n      ... on Repl {\n        id\n        authorizations {\n          ...DeploymentSettingsAuthorizations\n        }\n      }\n    }\n  }\n  ","\n"]);return sS=function(){return e},e}var s_={},sE=(0,eo.Ps)(sC()),sT=(0,eo.Ps)(sk(),c5,rJ.bN),sR=(0,eo.Ps)(sS(),sE);function sD(){var e=(0,ei._)(["\n  mutation NotificationsSectionUpdateFailureNotifications(\n    $input: UpdateMachineJobFailureNotificationInput!\n  ) {\n    updateMachineJobFailureNotification(input: $input) {\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on UpdateMachineJobFailureNotificationResult {\n        failureNotifications\n      }\n    }\n  }\n"]);return sD=function(){return e},e}var sI={},sB=(0,eo.Ps)(sD()),sG=n(50575),sP=n(8558),sA=(0,D.X)({container:[B.l0.colWithGap(8)]});function sL(e){var t,n=e.replId,r=e.isCurrentBuildSuccess,i=e.areFailureNotificationsEnabled,o=(0,t8.P5)({controlName:"flag-cron-push-notifications",type:"boolean",default:!1,logFlagToAnalytics:!0}),a=(0,v._)((0,b.useState)(i),2),l=a[0],c=a[1],s=(0,v._)((0,b.useState)(void 0),2),u=s[0],d=s[1],f=(0,v._)((t=(0,G._)({},sI,{onCompleted:function(e){var t=e.updateMachineJobFailureNotification;((null==t?void 0:t.__typename)==="NotFoundError"||(null==t?void 0:t.__typename)==="UnauthorizedError"||(null==t?void 0:t.__typename)==="UserError")&&(d(t.message),c(function(e){return!e}))}}),el.D(sB,t)),1)[0],h=function(e){d(void 0),f({variables:{input:{replId:n,failureNotifications:e}}}),c(e)};return(0,g.BX)(R.G,{children:[u?(0,g.tZ)(E.E,{text:u,colorway:"warning"}):null,(0,g.BX)(eJ.u,{isDisabled:r,tooltip:"Most recent build failed. Re-deploy successfully before enabling notifications",placement:"top-end",css:sA.container,children:[(0,g.BX)(og.hE,{disabled:!r,tag:"fieldset",name:"notification-switch",value:l?"enabled":"disabled",onChange:function(e){h("enabled"===e)},row:!0,primary:!0,stretch:!0,children:[(0,g.tZ)(og.rK,{id:"failure-notifications-disabled",value:"disabled",text:"Disabled",icon:(0,g.tZ)(sP.Z,{})}),(0,g.tZ)(og.rK,{id:"failure-notifications-enabled",value:"enabled",text:"Enabled",icon:(0,g.tZ)(sG.Z,{})})]}),(0,g.tZ)(T.xv,{color:"dimmer",children:"Send email ".concat(o?"and push ":"","notifications when scheduled jobs fail")})]})]})}var sN=(0,D.X)({container:[B.l0.colWithGap(32),U.maxWidth,B.l0.py(8)],usageContainer:B.l0.colWithGap(16),header:B.l0.pb(8),paddedHeader:B.l0.pb(12),notificationConfig:[B.l0.flex.row,B.l0.flex.growAndShrink(1),B.l0.width("100%"),B.l0.align.start,B.l0.pb(8)]}),sO=function(e){var t=e.deploymentId,n=e.onLifecycleCommand,r=e.onError;return t?(0,g.tZ)(sX,{deploymentId:t,onLifecycleCommand:n,onError:r}):(0,g.tZ)(V,{children:(0,g.tZ)(E.E,{colorway:"warning",icon:(0,g.tZ)(I.Z,{}),text:"Deployment not found"})})},sU={__typename:"ReplAuthorizations",addCustomDomain:{__typename:"ReplAuthorization",isAuthorized:!1,code:eh.RO.InsufficientPermissions,message:"Loading"},deleteCustomDomain:{__typename:"ReplAuthorization",isAuthorized:!1,code:eh.RO.InsufficientPermissions,message:"Loading"},deleteDeployment:{__typename:"ReplAuthorization",isAuthorized:!1,code:eh.RO.InsufficientPermissions,message:"Loading"},editDeploymentStatus:{__typename:"ReplAuthorization",isAuthorized:!1,code:eh.RO.InsufficientPermissions,message:"Loading"},editDeploymentTier:{__typename:"ReplAuthorization",isAuthorized:!1,code:eh.RO.InsufficientPermissions,message:"Loading"}};function sX(e){var t,n,r,i,o,a,l,c,s=(0,eg.sG)(),u=(0,v._)((0,b.useState)(!1),2),d=u[0],f=u[1];(0,b.useEffect)(function(){et({context:er.k.Settings})},[]);var h=(0,v._)((t=(0,G._)({},s_,void 0),c0.t(sR,t)),2),p=h[0],m=h[1],y=m.data,w=m.error,Z=(n={variables:{id:e.deploymentId},ssr:!1,fetchPolicy:"cache-and-network",onCompleted:function(e){var t;(null==e?void 0:null===(t=e.hostingDeployment)||void 0===t?void 0:t.__typename)==="HostingDeployment"&&p({variables:{replId:e.hostingDeployment.repl.id,provider:e.hostingDeployment.currentBuild.provider}})}},r=(0,G._)({},s_,n),ea.a(sT,r)),x=Z.data,C=Z.loading,k=Z.error,S=(null==x?void 0:null===(i=x.hostingDeployment)||void 0===i?void 0:i.__typename)==="HostingDeployment"?x.hostingDeployment:void 0,_=(null==S?void 0:S.currentBuild.provider)===eh.r4.Cron;if(d)return(0,g.tZ)(lL,{onError:e.onError,onConfirm:function(t){e.onLifecycleCommand({command:eh.Qc.UpdateMachineConfiguration,machineConfigurationId:t.configurationId,maxMachineInstances:t.maxInstances})},onBack:function(){return f(!1)}});if(k)return(0,g.tZ)($,{text:k.message});if(C||!S)return(0,g.tZ)(V,{centered:!0,children:(0,g.tZ)(J,{})});var D=S.currentBuild,I=null!==(l=null==D?void 0:D.machineConfiguration)&&void 0!==l?l:void 0,B=(null==y?void 0:null===(o=y.repl)||void 0===o?void 0:o.__typename)==="Repl"?y.repl.authorizations:sU;return(0,g.tZ)(V,{children:(0,g.BX)(R.G,{css:sN.container,children:[w?(0,g.tZ)(E.E,{colorway:"negative",text:w.message}):void 0,D.provider===eh.r4.CloudRun?(0,g.BX)(R.G,{children:[(0,g.tZ)(T.xv,{variant:"subheadDefault",css:sN.header,children:"Resource usage"}),(0,g.tZ)(R.G,{css:sN.usageContainer,children:(0,g.tZ)(cN,{machineConfiguration:I,onEditAutoscaleMachineConfiguration:function(){return f(!0)},authorizations:B})})]}):null,D.provider!==eh.r4.Cron?(0,g.BX)(R.G,{children:[(0,g.tZ)(T.xv,{variant:"subheadDefault",css:sN.header,children:"Domains"}),(0,g.tZ)(sZ,{deployment:S,authorizations:B})]}):null,(0,g.BX)(R.G,{children:[(0,g.tZ)(T.xv,{variant:"subheadDefault",css:sN.paddedHeader,children:"Manage deployment"}),(0,g.tZ)(cT,{onLifecycleCommand:e.onLifecycleCommand,authorizations:B})]}),_?(0,g.BX)(R.G,{children:[(0,g.tZ)(T.xv,{variant:"subheadDefault",css:sN.paddedHeader,children:"Scheduled Job Notifications"}),(0,g.tZ)(sL,{replId:S.repl.id,isCurrentBuildSuccess:S.currentBuild.status===eh.Fe.Success,areFailureNotificationsEnabled:null!==(c=null===(a=S.currentBuild.machineJob)||void 0===a?void 0:a.failureNotifications)&&void 0!==c&&c})]}):null,s?null:(0,g.BX)(R.G,{children:[(0,g.tZ)(T.xv,{variant:"subheadDefault",css:sN.paddedHeader,children:"Deploy on the go"}),(0,g.tZ)(cZ,{shouldShowDownloadQR:!1})]})]})})}var sM=n(39808),sF=(0,L.iv)([B.l0.reset.button,B.l0.focusRing,B.l0.display.flex,B.l0.position.relative,B.l0.borderRadius(),B.l0.py(8),B.l0.px(8),B.l0.rowWithGap(12),B.l0.align.center,(0,S._)({rowGap:0},O,[B.l0.pb(8),B.l0.pt(12),B.l0.colWithGap(4)])]),sW=(0,cU.$)(["transformOffset","transformOffsetHover","selectedBorderColor"]),sV=sW.cssVars,sH=sW.styleTokens,sz=(0,D.X)({self:[(0,S._)({flex:1,minWidth:0,"&::after":{content:"none"}},O,{transform:sH.transformOffset,transition:"transform 120ms ease-in-out"})],selfLoading:[{flex:1,minWidth:0},nl.p.foregroundPulse(),B.l0.border({color:B.TV.backgroundHighest})],button:[sF,eN.gU.filledAndOutlined,B.l0.border({color:B.TV.outlineDimmer})],buttonActive:[sF,B.l0.cursor.pointer,B.l0.colorMixBg(B.TV.accentPrimaryDimmest,eN.vb.interactiveBackground),B.l0.border({color:sH.selectedBorderColor})],recommended:[B.l0.py(2),B.l0.mx(8),B.l0.colorMixBg(B.TV.accentPrimaryDimmest),B.l0.color.accentPrimaryStrongest,B.l0.borderRadius("default","default",0,0),B.l0.display.none,(0,S._)({},O,B.l0.display.flex)],recommendedMobile:[B.l0.display.flex,B.l0.color.accentPrimaryStrongest,B.l0.backgroundColor.accentPrimaryDimmest,B.l0.py(2),B.l0.px(6),B.l0.borderRadius(),(0,S._)({},O,B.l0.display.none)],recommendedMobileActive:[B.l0.display.flex,B.l0.color.accentPrimaryStrongest,B.l0.backgroundColor.accentPrimaryDimmer,B.l0.py(2),B.l0.px(6),B.l0.borderRadius(),(0,S._)({},O,B.l0.display.none)],icon:[B.l0.color.foregroundDimmer,B.l0.center],iconActive:[B.l0.color.accentPrimaryStrongest,B.l0.center],tiersTitle:[B.l0.rowWithGap(8),B.l0.align.center],title:[B.l0.fontWeight.medium,B.l0.textAlign.left,B.l0.flex.growAndShrink(1)]});function sj(e){var t,n=e.loading,r=e.active,i=e.provider,o=e.onClick,a=e.title,l=e.recommended,c=e.disabled,s=e.style,u=(t={},(0,S._)(t,eh.r4.CloudRun,(0,g.tZ)(lH.Z,{size:24})),(0,S._)(t,eh.r4.Gce,(0,g.tZ)(lR.Z,{size:24})),(0,S._)(t,eh.r4.Static,(0,g.tZ)(lj.Z,{size:24})),(0,S._)(t,eh.r4.Cron,(0,g.tZ)(t7.Z,{size:24})),t)[i];return(0,g.BX)(R.G,{css:[n?sz.selfLoading:sz.self,c&&U.hiddenOnMobile],style:s,children:[(0,g.tZ)(R.G,{css:sz.recommended,style:{visibility:l?"visible":"hidden"},children:(0,g.tZ)(T.xv,{variant:"small",children:"Recommended"})}),(0,g.BX)("button",{css:r?sz.buttonActive:sz.button,onClick:function(){return o(i)},disabled:n||c,children:[(0,g.tZ)(R.G,{css:r?sz.iconActive:sz.icon,children:u}),(0,g.tZ)(T.xv,{css:sz.title,multiline:!1,children:a}),l?(0,g.tZ)(R.G,{css:r?sz.recommendedMobileActive:sz.recommendedMobile,children:"Recommended"}):null]})]})}var sq=[eh.r4.Gce,eh.r4.CloudRun,eh.r4.Static,eh.r4.Cron],sJ=(0,D.X)({container:[B.l0.colWithGap(32),B.l0.textAlign.center,U.maxWidth],title:[B.l0.colWithGap(4),B.l0.width("100%"),B.l0.maxWidth(400),B.l0.align.center,{marginLeft:"auto",marginRight:"auto"}],body:B.l0.colWithGap(24),providers:[B.l0.flex.column,(0,S._)({gap:4},O,[B.l0.flex.row,B.l0.align.end,{gap:8,"&:hover > div":{transform:sH.transformOffsetHover,transition:"transform 120ms ease-in-out"}}])],providerDetails:B.l0.colWithGap(16),recommendationHeader:[B.l0.fontWeight.medium,B.l0.pb(12)],recommendationReasons:[B.l0.colWithGap(6),B.l0.border({color:B.TV.outlineDimmest}),B.l0.borderRadius(),B.l0.py(8),B.l0.px(12),{alignSelf:"center"}],recommendationReasonsUl:[B.l0.textAlign.left,B.l0.display.flex,B.l0.rowWithGap(8),{listStyleType:"disc"}],recommendationReason:[B.l0.ml(16)],descriptionTableToggle:[B.l0.color.foregroundDimmer,B.l0.hover(B.l0.color.foregroundDefault),{alignSelf:"center"}],descriptionTable:[B.l0.colWithGap(12),B.l0.pb(12),U.hiddenOnMobile],cta:[B.l0.width("100%"),B.l0.maxWidth(320),{marginLeft:"auto",marginRight:"auto"}],ctaGroup:B.l0.colWithGap(12),secondaryCta:[B.l0.width("100%"),B.l0.maxWidth(320)],ctaContainer:[B.l0.colWithGap(8),B.l0.align.center],ctaStatusBanner:[B.l0.textAlign.left],oldCta:[B.l0.px(8),B.l0.colWithGap(16)],payment:[B.l0.p(16),B.l0.borderRadius("container"),B.l0.textAlign.left,B.l0.shadow(2)],budgetContainer:[B.l0.colWithGap(8),B.l0.border(),B.l0.borderRadius(),B.l0.p(8)],disabledBanner:[B.l0.py(6),{alignSelf:"center"}],learnMoreLink:[B.l0.display.flex,B.l0.rowWithGap(6),B.l0.align.center,{alignSelf:"center"},B.l0.hover(B.l0.color.accentPrimaryStrongest)]}),sY=function(e){var t,n,r,i,o,a=e.replId,l=e.onError,c=e.onDeploy,s=e.onViewAction,u=e.initialSelectedProvider,d=(0,w.XZ)(),f=(0,w.Qk)(),h=(0,w.v5)(),p=(0,w.t7)(),m=(0,v._)((0,b.useState)(void 0),2),y=m[0],Z=m[1],C=(0,v._)((0,b.useState)(void 0),2),_=C[0],E=C[1],D=(0,v._)((0,b.useState)(!1),2),I=D[0],G=D[1],P=(0,v._)((0,b.useState)(!1),2),A=P[0],L=P[1],N=(0,v._)((0,b.useState)(null!=u?u:null),2),O=N[0],X=N[1],M=(0,v._)((0,b.useState)(!1),2),F=M[0],W=M[1],H=(0,w.BU)(),z=H.getDeployabilityByProvider,j=H.refetch;(0,b.useEffect)(function(){et({context:"intro"})},[]);var q=(0,l7.Se)(),J=q.getDescription,Y=q.Icon,$=l8({variables:{id:a},onError:function(e){return l(e.message)}}),K=$.loading,Q=$.data,ee=(0,v._)((0,b.useState)(!1),2),en=ee[0],ei=ee[1],eo=(null==Q?void 0:Q.repl.__typename)==="Repl"&&(null===(n=Q.repl.owner)||void 0===n?void 0:n.__typename)==="Team",ea=(null==Q?void 0:Q.repl.__typename)==="Repl"&&(null==Q?void 0:null===(r=Q.repl.owner)||void 0===r?void 0:r.id)&&(0,lY.xm)(null==Q?void 0:null===(i=Q.repl.owner)||void 0===i?void 0:i.id),el=(0,t8.P5)({controlName:i_.dA,logFlagToAnalytics:!1});(0,b.useEffect)(function(){(0,x._)(function(){var e,t;return(0,k.Jh)(this,function(n){switch(n.label){case 0:if(K)return[2];if(eo&&!ea)return Z(eh.r4.Gce),E(eh.r4.Gce),[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,(0,oe.$f)(h)];case 2:if(null===(e=n.sent()).appType)return Z(eh.r4.CloudRun),E(eh.r4.CloudRun),[2];if((t=(0,tY.oU)(e.appType))===eh.r4.Goval||t===eh.r4.Extension)return l("Did not recognize template deployment provider"),[2];return Z(t),E(t),[3,4];case 3:return n.sent(),l("Something went wrong"),[3,4];case 4:return[2]}})})()},[l,h,K,eo,ea]);var ec=(0,b.useCallback)((0,x._)(function(){return(0,k.Jh)(this,function(e){switch(e.label){case 0:return ei(!0),[4,j()];case 1:return e.sent(),ei(!1),[2]}})}),[j,ei]);if(O)return(0,g.tZ)(l5,{replId:a,initialState:O?{type:O}:{type:eh.r4.Gce,didCheckout:!0},fs:d,secrets:f,dotReplit:h,ports:p,onDeploy:c,onBack:function(){return X(null)},onError:l,openNetworkingPane:function(){s({type:er.a.OpenPane,payload:{type:"networking"}})}});var es=z(y),eu=es.deploy,ed=es.isIncludedInSubscription,ef=eu.isAuthorized,ep=eu.code,em=eu.message,ev=K||en||void 0===y,eg=(o={},(0,S._)(o,eh.r4.Gce,{display:!0,title:"Reserved VM",description:"Provides a high-uptime VM; best for apps with known resource needs and persistent session data",billing:(t=(0,v._)((0,i_.gr)("e2-micro"),1)[0],"Billed hourly starting at $".concat(t,"/hour.")),examples:"Web scrapers, stateful APIs, long-running jobs"}),(0,S._)(o,eh.r4.CloudRun,{display:!0,title:"Autoscale",description:"Scales resources from zero to any level of traffic; ideal for apps with variable demand",billing:"Usage-based  700 minutes of machine time will cost $1 to start",examples:"Web apps, stateless APIs"}),(0,S._)(o,eh.r4.Static,{display:!0,title:"Static",description:"Serves static content like HTML/CSS; simple and cost-effective for websites that don't require a server",billing:"Free, only pay for outbound data transfer (included in Replit plans). Otherwise, $0.10/GiB",examples:"Statically-generated sites or plain HTML/CSS/JS"}),(0,S._)(o,eh.r4.Cron,{display:el,title:"Scheduled",description:"Runs tasks at specified times configured by you; useful for periodic jobs like daily reports",billing:"Usage-based  595 minutes of machine time will cost $1",examples:"Monitors, Slack reminder bots, periodic scrapers"}),o),ey=(sq.length-1)/2;return(0,g.BX)(V,{centered:!0,children:[(0,g.tZ)(iK.u,{isOpen:A,onRequestClose:function(){return L(!1)},children:(0,g.tZ)(lX.Z,{onRequestClose:function(){return L(!1)}})}),(0,g.BX)(R.G,{css:sJ.container,children:[(0,g.BX)(R.G,{css:sJ.title,children:[(0,g.tZ)(Y,{pane:{type:"deployments"},size:48}),(0,g.tZ)(T.h4,{level:1,variant:"subheadBig",children:"Deploy to production"}),(0,g.tZ)(T.xv,{color:"dimmer",children:J({type:"deployments"})})]}),(0,g.BX)(R.G,{css:sJ.body,children:[(0,g.tZ)(R.G,{css:sJ.providers,children:sq.map(function(e,t){var n,r=-(t-ey);if(!eg[e].display)return null;var i=eg[e].title,o=_===e,a=y===e;return(0,g.BX)(g.HY,{children:[(0,g.tZ)(sj,{provider:e,loading:ev,active:a,onClick:function(e){Z(e),G(!1),F||W(!0)},title:i,recommended:o,disabled:!F&&!o,style:(n={},(0,S._)(n,sV.transformOffset,F?0:"translateX(calc(".concat(100*r,"% + ").concat(8*r,"px))")),(0,S._)(n,sV.transformOffsetHover,F?0:a?"translateX(calc(".concat(100*r,"% + ").concat(8*r,"px))"):"translateX(calc(".concat(100*r,"% + ").concat(t<ey?8*r-75:8*r+75,"px)) scale(0.8)")),(0,S._)(n,"zIndex",o?1:void 0),(0,S._)(n,sV.selectedBorderColor,F?B.TV.accentPrimaryStronger:B.TV.accentPrimaryDimmest),n)},e),(0,g.tZ)(s1,{info:eg[e],render:y===e})]})})}),_&&!F?(0,g.BX)(R.G,{css:U.hiddenOnMobile,children:[(0,g.BX)(R.G,{css:sJ.recommendationHeader,children:[eg[_].title," is recommended for this template"]}),(0,g.tZ)(s0,{info:eg[_],dim:!0})]}):null,F?(0,g.BX)(R.G,{css:sJ.descriptionTable,children:[(0,g.tZ)(sQ,{title:"Description",content:sq.map(function(e){return eg[e].description})}),(0,g.tZ)(sQ,{title:"Billing",content:sq.map(function(e){return eg[e].billing})}),(0,g.tZ)(sQ,{title:"Example apps",content:sq.map(function(e){return eg[e].examples})})]}):null,(0,g.BX)(R.G,{css:sJ.ctaGroup,children:[(0,g.tZ)(e6.zx,{variant:"nofill",css:sJ.descriptionTableToggle,text:F?"Only show recommended deployment type":"Show all deployment types",onClick:function(){W(function(e){return e&&Z(_),!e})}}),(0,g.tZ)(s$,{loading:ev,isDeployable:ef,isDeployableCode:ep,isDeployableExplanation:em,isIncludedInSubscription:ed,handleOnProviderContinue:function(){y&&X(y)},refetchDeployabilityQueryData:ec,setShowPaymentMethodForm:function(){return G(!0)},showPaymentMethodForm:I,setShowSupportForm:function(){return L(!0)}}),I?(0,g.tZ)(rr.Tg,{elevated:!0,css:sJ.payment,children:(0,g.tZ)(lW.q,{onSuccess:(0,x._)(function(){return(0,k.Jh)(this,function(e){switch(e.label){case 0:return G(!1),[4,ec()];case 1:return e.sent(),[2]}})}),context:"workspace_hosting_pane"})}):null]})]}),(0,g.tZ)(sM.Z,{href:"https://docs.replit.com/category/replit-deployments",target:"_blank",rel:"noopener",css:sJ.learnMoreLink,iconRight:(0,g.tZ)(iN.Z,{}),text:"Learn more about Deployments"})]})]})};function s$(e){var t=e.isDeployable,n=e.isDeployableCode,r=e.isDeployableExplanation,i=e.isIncludedInSubscription,o=e.loading,a=e.handleOnProviderContinue,l=e.refetchDeployabilityQueryData,c=e.setShowPaymentMethodForm,s=e.showPaymentMethodForm,u=e.setShowSupportForm,d=(0,eg.sG)();if(!t&&d)return(0,g.tZ)(E.E,{text:r,colorway:"grey",css:sJ.disabledBanner});if(i)return(0,g.BX)(g.HY,{children:[(0,g.tZ)(e6.zx,{colorway:"primary",onClick:a,text:"Included in your subscription",loading:o,css:sJ.cta}),(0,g.tZ)(T.xv,{color:"dimmer",children:r})]});switch(n){case eh.RO.RequiresActiveSubscription:case eh.RO.RequiresPaymentMethodOrSubscription:return(0,g.BX)(R.G,{css:sJ.ctaContainer,children:[(0,g.tZ)(lq.Z,{context:"workspace_hosting_pane",text:"Upgrade your plan to deploy",css:sJ.cta,colorway:"primary",variant:"default",disabled:s,onPlanCheckoutComplete:l}),(0,g.tZ)(e6.zx,{variant:"nofill",colorway:"primary",text:"or add a payment method",css:sJ.cta,disabled:s,loading:o,iconLeft:(0,g.tZ)(lz.Z,{}),onClick:function(){return c()}})]});case eh.RO.RequiresSmsVerification:return(0,g.tZ)(lU.Z,{context:eh.jv.Deployments,onSuccess:l});case eh.RO.RequiresPaymentMethod:return(0,g.tZ)(e6.zx,{colorway:"primary",text:"Add a payment method",css:sJ.cta,disabled:s,loading:o,iconLeft:(0,g.tZ)(lz.Z,{}),onClick:function(){return c()}});case eh.RO.RequiresUnbanning:return(0,g.tZ)(lV.u,{text:"Your account currently has restrictions on deploying. We're here to help! Please reach out to our support team for assistance.",colorway:"warning",iconLeft:(0,g.tZ)(I.Z,{}),css:sJ.ctaStatusBanner,onClick:function(){return u()}});case eh.RO.InsufficientBudget:return(0,g.BX)(g.HY,{children:[(0,g.tZ)(E.E,{text:"You've reached your monthly usage budget. Increase your budget to continue deploying.",colorway:"warning",icon:(0,g.tZ)(I.Z,{}),css:sJ.ctaStatusBanner}),(0,g.tZ)(R.G,{css:sJ.budgetContainer,children:(0,g.tZ)(lF.L,{onUpdateSuccess:l})})]});case eh.RO.FeatureDisabled:case eh.RO.FeatureUnsupportedForReplitTeams:case eh.RO.FeatureUnsupportedForTeamsEdu:case eh.RO.FeatureUnsupportedForTeamsFree:case eh.RO.FeatureUnsupportedForTeamsPro:case eh.RO.InsufficientPermissions:case eh.RO.InsufficientQuota:case eh.RO.RequiresEmailVerification:return(0,g.tZ)(E.E,{text:r,colorway:"grey",css:sJ.disabledBanner});case eh.RO.Authorized:case eh.RO.AuthorizedQuota:return(0,g.tZ)(e6.zx,{colorway:"primary",onClick:a,text:"Set up your deployment",loading:o,css:sJ.cta});default:(0,lJ.Z)(n)}}var sK=(0,D.X)({root:[B.l0.colWithGap(4),B.l0.textAlign.left,B.l0.display.none,(0,S._)({},O,B.l0.display.flex)],title:[B.l0.px(2),B.l0.fontWeight.medium],content:[B.l0.rowWithGap(8)],p:[B.l0.px(2),{flex:1}],hr:[B.l0.height(1),B.l0.backgroundColor.outlineDimmest,B.l0.mx(2)],soloRoot:[B.l0.display.grid,B.l0.textAlign.left,B.l0.pl(4),B.l0.py(4),(0,S._)({gridTemplateColumns:"auto",columnGap:16},O,[B.l0.pl(0),B.l0.py(0),B.l0.maxWidth(400),{gridTemplateColumns:"max-content auto",marginInline:"auto"}])],soloTitles:(0,S._)({},O,B.l0.textAlign.left),soloDescriptions:B.l0.pb(8),autosizeContainer:[B.l0.display.flex,B.l0.overflow("hidden"),(0,S._)({transition:"height 120ms ease-out"},O,B.l0.display.none)]});function sQ(e){var t=e.content,n=e.title;return(0,g.BX)(R.G,{css:sK.root,children:[(0,g.tZ)(T.xv,{variant:"small",color:"dimmer",css:sK.title,children:n}),(0,g.tZ)(R.G,{css:sK.hr}),(0,g.tZ)(R.G,{css:sK.content,children:t.map(function(e,t){return(0,g.tZ)(T.xv,{variant:"small",css:sK.p,children:e},t)})})]})}function s0(e){var t=e.info,n=e.dim;return(0,g.BX)(R.G,{css:sK.soloRoot,children:[(0,g.tZ)(T.xv,{color:n?"dimmest":"dimmer",css:sK.soloTitles,children:"Description"}),(0,g.tZ)(T.xv,{color:n?"dimmer":"default",css:sK.soloDescriptions,children:t.description}),(0,g.tZ)(T.xv,{color:n?"dimmest":"dimmer",css:sK.soloTitles,children:"Billing"}),(0,g.tZ)(T.xv,{color:n?"dimmer":"default",css:sK.soloDescriptions,children:t.billing}),(0,g.tZ)(T.xv,{color:n?"dimmest":"dimmer",css:sK.soloTitles,children:"Example apps"}),(0,g.tZ)(T.xv,{color:n?"dimmer":"default",css:sK.soloDescriptions,children:t.examples})]})}function s1(e){var t=e.info,n=e.render,r=e.initialHeight,i=(0,b.useRef)(null),o=(0,b.useRef)(null),a=M(o),l=a>0?a:r,c={transition:"200ms ease-in-out",transitionProperty:"height",height:0,visibility:"hidden"},s={entering:{height:l,visibility:"visible"},entered:{height:l,visibility:"visible"},exiting:{height:0,visibility:"visible"},exited:{height:0,visibility:"hidden"}};return(0,g.tZ)(N.ZP,{nodeRef:i,timeout:200,in:n,children:function(e){return(0,g.tZ)(R.G,{innerRef:i,style:(0,G._)({},c,s[e]),css:sK.autosizeContainer,children:(0,g.tZ)(R.G,{innerRef:o,children:(0,g.tZ)(s0,{info:t})})})}})}var s2=(0,D.X)({root:[{height:"100%"},B.l0.overflow("hidden"),B.l0.position.relative],content:[B.l0.overflow("auto"),B.l0.flex.growAndShrink(1),B.l0.position.relative]}),s3=function(e){var t,n,r,i,o,a,l=e.onViewUpdate,c=e.onError,s=e.refetch,u=e.openFile,d=e.openPane,f=e.initialView,h=e.error,p=function(e){L({type:er.a.SendDeploymentLifecycleCommand,payload:e})},m=(0,t6.Z)(),y=(0,w.hn)(),Z=(0,w.pn)(),S=(0,w.$y)(),_=(0,w.XZ)(),T="string"==typeof y,D=!(void 0!==Z)&&!T,B=(0,v._)((0,b.useState)(function(){return Z?er.k.DeploymentInProgress:D?er.k.Intro:er.k.Deployment}),2),G=B[0],P=B[1],A=(0,w.mF)(),L=(t=(0,x._)(function(e){var t;return(0,k.Jh)(this,function(n){switch(n.label){case 0:switch(l(),e.type){case er.a.SendDeploymentLifecycleCommand:return[3,1];case er.a.ChangeView:return[3,3];case er.a.OpenPane:return[3,4]}return[3,7];case 1:return[4,A(e.payload)];case 2:if(n.sent(),e.payload.command===eh.Qc.Destroy)return P(er.k.Intro),s(),[2];return e.payload.command===eh.Qc.UpdateMachineConfiguration&&s(),P(er.k.Deployment),[3,8];case 3:return P(e.payload.view),[3,8];case 4:if(!("codeEditor"===(t=e.payload).type&&".replit"===t.data.path))return[3,6];return[4,_.stat(".replit")];case 5:if(!n.sent().exists)return c("Could not find .replit configuration file."),[2];n.label=6;case 6:return d(t),[3,8];case 7:return[3,8];case 8:return[2]}})}),function(e){return t.apply(this,arguments)}),N=(0,t8.P5)({controlName:"flag-depl-intro-simp",default:!1}),O=(n=null==S?void 0:S.provider,r=(0,t8.P5)({controlName:"flag-supply-eye",logFlagToAnalytics:!1,default:!1}),o=(i=(0,nQ.o)("deployment-analytics-dot")).isLoading,a=i.isDone,(0,b.useMemo)(function(){return[{value:er.k.Deployment,label:"Overview",icon:(0,g.tZ)(t9.Z,{})}].concat((0,C._)(n===eh.r4.Cron?[{value:er.k.Schedule,label:"Schedule",icon:(0,g.tZ)(t7.Z,{})}]:[]),(0,C._)(n!==eh.r4.Static?[{value:er.k.Logs,label:"Logs",icon:(0,g.tZ)(eb.Z,{})}]:[]),(0,C._)(n!==eh.r4.Cron?[{value:er.k.Analytics,label:"Analytics",icon:(0,g.tZ)(t5.Z,{}),showDot:!o&&!a}]:[]),(0,C._)(n&&r&&s4(n)?[{value:er.k.ResourceMonitoring,label:"Resources",icon:(0,g.tZ)(nt.Z,{}),beta:!1}]:[]),[{value:er.k.Settings,label:"Settings",icon:(0,g.tZ)(ne.Z,{})}])},[a,o,n,r]));return G===er.k.Intro?N?(0,g.tZ)(R.G,{css:s2.content,children:(0,g.tZ)(sY,{initialSelectedProvider:f===er.k.ReservedVMTierSelection?eh.r4.Gce:void 0,onViewAction:L,onError:c,onDeploy:function(){L({type:er.a.ChangeView,payload:{view:er.k.DeploymentInProgress}})},replId:m})}):(0,g.tZ)(R.G,{css:s2.content,children:(0,g.tZ)(cu,{initialSelectedProvider:f===er.k.ReservedVMTierSelection?eh.r4.Gce:void 0,onViewAction:L,onError:c,onDeploy:function(){L({type:er.a.ChangeView,payload:{view:er.k.DeploymentInProgress}})},replId:m})}):(0,g.BX)(R.G,{css:s2.root,children:[O?(0,g.tZ)(nn.g,{onClick:function(e){L({type:er.a.ChangeView,payload:{view:e.value}})},tabs:O,value:G===er.k.DeploymentInProgress?er.k.Deployment:G}):null,(0,g.BX)(R.G,{css:s2.content,children:[h?(0,g.tZ)(V,{children:(0,g.tZ)(E.E,{colorway:"warning",icon:(0,g.tZ)(I.Z,{}),text:h})}):null,G===er.k.Analytics?(0,g.tZ)(n5,{replId:m}):null,G===er.k.Logs?(0,g.tZ)(tM,{replId:m,deploymentId:y,openFile:u}):null,G===er.k.ResourceMonitoring?(0,g.tZ)(cg,{replId:m}):null,G===er.k.Settings?(0,g.tZ)(sO,{onError:c,deploymentId:y,onLifecycleCommand:p}):null,G===er.k.Deployment||G===er.k.DeploymentInProgress?(0,g.tZ)(lO,{view:G,refetch:s,onViewAction:L,onError:c,openFile:u,onLifecycleCommand:p}):null,G===er.k.Schedule?(0,g.tZ)(tQ,{replId:m,deploymentId:y,openFile:u}):null]})]})},s4=function(e){return[eh.r4.Gce,eh.r4.CloudRun,eh.r4.Cron].includes(e)};function s8(e){var t=e.initialView,n=e.onViewUpdate,r=e.openFile,i=e.openPane,o=e.tabsNavRef,a=(0,w.m8)(),l=(0,w.kW)(),c=(0,w.ev)(),s=(0,v._)((0,b.useState)(null),2),u=s[0],d=s[1];return l===Z.z.Loading?(0,g.tZ)(y.Z,{pane:{type:"deployments"},headerText:"Deploy to production",loading:!0}):(0,g.tZ)(s3,{tabsNavRef:o,initialView:t,onViewUpdate:function(){u&&d(null),n()},onError:d,refetch:a,openFile:r,openPane:i,error:u||c})}var s6=n(19236),s5=n(74044),s7=n(99149),s9=s5.Dy.Object({type:s5.Dy.Literal("deployments"),data:s5.Dy.Optional(s5.Dy.Object({view:s5.Dy.Enum(er.k)}))}),ue={Content:function(e){var t=e.pane.data,n=e.options.performPaneOperation,r=(0,b.useRef)(function(e){if(e&&"object"==typeof e&&"view"in e&&e.view===er.k.ReservedVMTierSelection)return er.k.ReservedVMTierSelection}(t)),i=(0,b.useCallback)(function(e){return n({operation:"open",secondary:!0,pane:{type:(0,l7.Dp)(e),data:e}})},[n]),o=(0,v._)((0,b.useState)(null),2),a=o[0],l=o[1];return(0,s6.L5)(function(){if(a)return{type:"deployments",getTabs:a.getTabs,setTab:a.setTab}},[a]),(0,g.tZ)(s8,{tabsNavRef:l,initialView:r.current,onViewUpdate:function(){r.current&&(r.current=void 0,n({operation:"replace",pane:{type:"deployments"}}))},openFile:i,openPane:function(e){n({operation:"open",pane:e})}})},Icon:function(e){var t=e.size;return(0,g.tZ)(tn.Pd.Provider,{value:{color:rE.TV.greenStrongest,size:t},children:(0,g.tZ)(t9.Z,{})})},getTitle:function(){return"Deployments"},description:"Deploy a stable, public version of your Repl, unaffected by the changes you make in the workspace",category:l7.hc.CloudServices,decode:function(e){return s7.B4.Decode(s9,e)}}},50544:function(e,t,n){n.d(t,{J:function(){return c}});var r=n(74044),i=n(99149),o=n(68140),a=r.Dy.Union(Object.values(o.TT).map(function(e){return r.Dy.Literal(e)})),l=r.Dy.Object({type:r.Dy.Literal("docs"),data:r.Dy.Optional(r.Dy.Object({url:r.Dy.Optional(r.Dy.Union([a,r.Dy.Null()]))}))}),c=function(e){return i.B4.Decode(l,e)}},49821:function(e,t,n){n.d(t,{J:function(){return a}});var r=n(74044),i=n(99149),o=r.Dy.Object({type:r.Dy.Literal("preferences")}),a=function(e){return i.B4.Decode(o,e)}},18454:function(e,t,n){n.d(t,{s:function(){return th},G:function(){return tv}});var r,i=n(27387),o=n(66626),a=n(96583),l=n(3796),c=n(74044),s=n(99149),u=n(24766),d=n(93245),f=n(36809),h=n(71920),p=n(19602),m=n(63163),v=n(23882),g=n(31252),y=n(62537),b=n(19236),w=n(75271),Z=n(42516),x=n(41733),C=n(30509),k=n(93632),S=n(46954),_=n(37862),E=n(22192),T=n(62466),R=n(42965),D=n(73581),I=n(12666),B=n(1053),G=n(49205),P=n(37633),A=n(41974),L=n(75982),N=n(71051),O=n(79904),U=n(9602),X=n(379),M=n(22419),F=n(27840),W=n(29737),V=n(33323),H=n(56981),z=n(39819),j=n(17824),q=n(54300),J=n(70145),Y=n(72748),$=n(22524),K=n(66791),Q=n(70196);function ee(e){return e&&0!==e.length?e[0].toUpperCase()+e.substring(1).toLowerCase():""}var et=(0,f.X)({outputBlockMetadataWrapper:[{containerType:"size"},m.l0.pl(4),m.l0.pr(8),m.l0.rowWithGap(4),m.l0.align.center,m.l0.justify.spaceBetween,m.l0.height(28),m.l0.backgroundColor.backgroundDefault,m.l0.border({direction:"bottom",width:1,style:"solid",color:m.TV.backgroundHigher}),m.l0.position.sticky,m.l0.top(0),m.l0.zIndex(1)],outputBlockMetadataWrapperLeft:[m.l0.rowWithGap(4),m.l0.align.center,m.l0.flex.shrink(1)],outputBlockMetadataWrapperRight:[m.l0.rowWithGap(6),m.l0.align.center],executionPill:[m.l0.flex.shrink(0),m.l0.display.flex,{"@container (max-width: 120px)":[m.l0.display.none]}],lastLineTextWrapper:[m.l0.flex.shrink(1)],lastLineText:[m.l0.display.block,m.l0.maxWidth("100%"),m.l0.overflow("hidden"),m.l0.font.code,m.l0.flex.shrink(1),{textOverflow:"ellipsis",whiteSpace:"nowrap"}],askAIButton:[m.l0.display.flex,m.l0.flex.row,m.l0.align.center,m.l0.m(0),{"@container (max-width: 120px)":[m.l0.display.none]}],aiButtonWithoutPorts:[{"@container (max-width: 320px)":{padding:"0 4px","& > span":[m.l0.display.none]}}],aiButtonWithPorts:[{"@container (max-width: 460px)":{padding:"0 4px","& > span":[m.l0.display.none]}}],dateText:[m.l0.flex.row,{"@container (max-width: 260px)":[m.l0.display.none]}],verticalDivider:[m.l0.mx(6),{width:1,height:28,background:m.TV.backgroundHigher}],portInfoDomain:[m.l0.display.flex,m.l0.flex.row,m.l0.align.center,m.l0.m(0),{"@container (max-width: 400px)":m.l0.display.none}],portInfoPorts:[m.l0.display.flex,m.l0.flex.row,m.l0.align.center,m.l0.m(0),{"@container (max-width: 320px)":m.l0.display.none}],portTooltipHeader:[m.l0.color.foregroundDimmer,m.l0.fontWeight.normal,m.l0.px(2),m.l0.pb(2)],portTooltipColumnLeft:[m.l0.textAlign.right],portTooltipColumnMiddle:[m.l0.textAlign.center,m.l0.px(4)],portInfoText:[m.l0.mr(0)]}),en=[et.askAIButton,et.aiButtonWithoutPorts],er=[et.askAIButton,et.aiButtonWithPorts],ei=(r={},(0,Z._)(r,B.kH.DEBUGGER,"debugger"),(0,Z._)(r,B.kH.PACKAGER,"packager"),(0,Z._)(r,B.kH.UNIT_TEST,"tests"),(0,Z._)(r,B.kH.EXECUTION,"run"),(0,Z._)(r,B.kH.PORT_INFO,"port"),(0,Z._)(r,B.kH.FORMATTER,"formatter"),(0,Z._)(r,B.kH.SAVE,"save"),r);function eo(e){var t=e.onClick,n=e.showingPorts;return(0,l.BX)(d.G,{css:n?er:en,children:[(0,l.tZ)(u.xv,{color:"dimmer",children:(0,l.tZ)(O.zx,{size:"small",variant:"underlinedOnHover",iconLeft:(0,l.tZ)(j.Z,{}),text:"Ask AI",onClick:void 0===t?function(){}:t})}),(0,l.tZ)(d.G,{css:et.verticalDivider})]})}function ea(e){var t=e.openedPorts;return(0,l.tZ)(d.G,{children:(0,l.BX)("table",{children:[(0,l.BX)("tr",{children:[(0,l.tZ)("th",{css:et.portTooltipHeader,children:"Internal"}),(0,l.tZ)("th",{}),(0,l.tZ)("th",{css:et.portTooltipHeader,children:"External"})]}),(0,l.tZ)("tbody",{children:t.map(function(e){var t=e.configuration,n=!0,r=null;switch(t.type){case J.DL.FORWARDED:n=!0,r=":".concat(t.externalPort);break;case J.DL.INTERNAL_ONLY:n=!1,r=null;break;case J.DL.NO_MORE_EXTERNAL_PORTS_AVAILABLE:case J.DL.MISCONFIGURED:case J.DL.CONFIG_MISSING:n=!0,r=(0,l.tZ)(q.Z,{})}return(0,l.BX)("tr",{children:[(0,l.BX)("td",{css:et.portTooltipColumnLeft,children:[":",t.localPort]}),(0,l.tZ)("td",{css:et.portTooltipColumnMiddle,children:n?"":null}),(0,l.tZ)("td",{children:r})]},t.localPort)})})]})})}function el(e){var t=e.openPane,n=e.openedPorts,r=void 0!==n&&n.length>0,i=r?"{...}.replit.dev":"",o=(0,w.useMemo)(function(){return r?1===n.length?":".concat(n[0].configuration.localPort):"".concat(n.length," ").concat((0,N.Z)("port",n.length)):""},[r,n]),a=(0,w.useCallback)(function(){t({type:"webview",data:r?{portType:"local",port:n[0].configuration.localPort}:void 0},!0)},[r,t,n]),c=(0,w.useCallback)(function(){t({type:"networking"},!0)},[t]);return r?(0,l.BX)(l.HY,{children:[(0,l.BX)(d.G,{css:et.portInfoDomain,children:[(0,l.tZ)(u.xv,{color:"dimmer",css:et.portInfoText,children:(0,l.tZ)(M.u,{tooltip:"Open Webview",children:(0,l.tZ)(O.zx,{size:"small",variant:"underlinedOnHover",text:i,onClick:a})})}),(0,l.tZ)(d.G,{css:et.verticalDivider})]}),(0,l.BX)(d.G,{css:et.portInfoPorts,children:[(0,l.tZ)(u.xv,{color:"dimmer",css:et.portInfoText,children:(0,l.tZ)(M.u,{tooltip:(0,l.tZ)(ea,{openedPorts:n}),children:(0,l.tZ)(O.zx,{size:"small",variant:"underlinedOnHover",iconLeft:(0,l.tZ)(H.Z,{color:m.TV.accentPositiveStronger}),text:o,onClick:c})})}),(0,l.tZ)(d.G,{css:et.verticalDivider})]})]}):null}function ec(e){var t=e.isDone,n=e.error,r=e.finishedTooltipText,i=e.executionPillText,o=e.runningTooltipText,a=e.circleColor,c=void 0===a?m.TV.accentPositiveDefault:a,s=e.duration,f=e.time,h=e.openPane,p=e.isCollapsed,v=e.setIsCollapsed,g=e.lastMeaningfullLine,y=e.openedPorts,b=e.onAiChatClick,w=(0,Y.Z)(new Date(f),"HH:mm:ss, MM/dd");return(0,l.BX)(d.G,{css:et.outputBlockMetadataWrapper,onDoubleClick:function(){return v(!p)},children:[(0,l.BX)(d.G,{css:et.outputBlockMetadataWrapperLeft,onDoubleClick:function(e){return e.stopPropagation()},children:[(0,l.tZ)(U.hU,{alt:p?"Expand":"Collapse",onClick:function(){return v(!p)},children:p?(0,l.tZ)(V.Z,{}):(0,l.tZ)(W.Z,{})}),(0,l.tZ)(X.D,{color:"grey",text:ee(i),css:et.executionPill}),(0,l.tZ)(d.G,{css:et.lastLineTextWrapper,children:p?(0,l.tZ)(u.xv,{css:et.lastLineText,variant:"small",children:g}):null})]}),(0,l.BX)(d.G,{css:et.outputBlockMetadataWrapperRight,onDoubleClick:function(e){return e.stopPropagation()},children:[(0,l.tZ)(eo,{showingPorts:!!y&&y.length>0,onClick:b}),(0,l.tZ)(el,{openPane:h,openedPorts:y}),(0,l.BX)(u.xv,{color:"dimmer",variant:"small",css:et.dateText,children:[s?(0,l.tZ)(M.u,{tooltip:"".concat(Math.round(s).toLocaleString(),"ms"),children:s<1e3?"".concat(Math.floor(s),"ms"):s<6e4?"".concat(Math.floor(s/1e3),"s"):"".concat(Math.floor(s/6e4),"m")}):null,s?"".concat("\xa0","on").concat("\xa0"):null,w]}),t?(0,l.tZ)(M.u,{tooltip:r,children:void 0!==n?(0,l.tZ)(q.Z,{}):(0,l.tZ)(F.Z,{})}):(0,l.tZ)(M.u,{tooltip:void 0===o?"Running...":o,children:(0,l.tZ)(z.Z,{color:c})})]})]})}function es(e){var t,n,r=e.isCollapsed,i=e.setIsCollapsed,o=e.openPane,a=e.startTime,c=e.endTime,s=e.localStartTime,u=e.localEndTime,d=e.isDone,f=e.data,h=e.error,p=e.openedPorts,m=e.onAiChatClick,v=ed(!d),g=ef(f.onMessage);a&&c?t=c-a:!d&&s?t=v-s:d&&u&&(t=u-s);var y="Finished";return void 0!==h&&(y=void 0!==h?ee(h):"Finished with error"),(0,l.tZ)(ec,{isDone:d,error:h,finishedTooltipText:y,executionPillText:null!==(n=f.executionMode)&&void 0!==n?n:"unknown",duration:t,time:null!=a?a:s,lastMeaningfullLine:g,openPane:o,isCollapsed:r,setIsCollapsed:i,openedPorts:p,onAiChatClick:m})}function eu(e){var t,n=e.isCollapsed,r=e.setIsCollapsed,i=e.openPane,o=e.localStartTime,a=e.localEndTime,c=e.isDone,s=e.type,d=e.error,f=e.data,h=e.onAiChatClick,p=ed(!c),v=ef(f.onMessage),g=ei[s],y=d?(0,l.BX)(u.xv,{multiline:!0,children:[ee(ei[s])," error",(0,l.tZ)("br",{}),d]}):"Finished",b=m.TV.accentPositiveDefault,w="Running...";if(s===B.kH.DEBUGGER){var Z=f.debugState;b="paused"===Z?m.TV.yellowDefault:m.TV.accentPositiveDefault,w="paused"===Z?"Paused":"Running..."}return a?t=a-o:!c&&o&&(t=p-o),(0,l.tZ)(ec,{isCollapsed:n,setIsCollapsed:r,openPane:i,isDone:c,finishedTooltipText:y,executionPillText:g,duration:t,time:o,circleColor:b,runningTooltipText:w,lastMeaningfullLine:v,error:d,onAiChatClick:h})}function ed(e){var t=(0,o._)((0,w.useState)(function(){return Date.now()}),2),n=t[0],r=t[1];return(0,w.useEffect)(function(){if(e){var t=setInterval(function(){r(Date.now())},100);return function(){clearInterval(t)}}},[e]),n}function ef(e){var t=(0,o._)((0,w.useState)(""),2),n=t[0],r=t[1];return(0,w.useEffect)(function(){return e(function(e){var t,n=null===(t=(0,Q.Z)(e).split("\n").reverse().find(function(e){return e.trim().length>0}))||void 0===t?void 0:t.trim();n&&r(n)})}),n}function eh(e){var t,n,r=e.isCollapsed,i=e.setIsCollapsed,o=e.openPane,a=e.isDone,c=e.type,s=e.data,u=e.error,d=e.localStartTime,f=e.localEndTime,h=e.startTime,p=e.endTime,m=e.openedPorts,v=e.openAIWithMessage,g=(t=s.onMessage,n=(0,w.useRef)(""),(0,w.useEffect)(function(){return t(function(e){n.current=(n.current+e).slice(-1500)})},[t]),n.current),y=function(){g&&(null==v||v((0,$.Rn)(g)))};switch(c){case B.kH.EXECUTION:return(0,l.tZ)(es,{isCollapsed:r,setIsCollapsed:i,openPane:o,isDone:a,type:c,startTime:h,endTime:p,localStartTime:d,localEndTime:f,data:s,error:u,openedPorts:m,onAiChatClick:y});case B.kH.DEBUGGER:case B.kH.PACKAGER:case B.kH.UNIT_TEST:case B.kH.FORMATTER:case B.kH.SAVE:return(0,l.tZ)(eu,{isCollapsed:r,setIsCollapsed:i,openPane:o,isDone:a,type:c,localStartTime:d,localEndTime:f,data:s,error:u,openedPorts:m,onAiChatClick:y});default:(0,K.Z)(c)}}var ep=n(23979),em=n(78371),ev=n(13502),eg=n(16642),ey=n(1567),eb=n(14118),ew=n(73660),eZ={noScroll:!0},ex=(0,f.X)({terminal:{gridRow:1,gridColumn:1,position:"sticky",top:ep.Cn.topOffset,"& .xterm":[m.l0.py(ep.J),m.l0.pl(ep.J),m.l0.height("100%"),m.l0.overflow("hidden")],"& .xterm-viewport":[m.l0.overflow("hidden")],"& .xterm-scroll-area":{height:"0px !important"}},searchWidget:{gridRow:1,gridColumn:1,position:"sticky",top:ep.Cn.topOffset,height:30,margin:"2px 0 0 auto",zIndex:4}});function eC(e){var t=e.onMessage,n=e.onInput,r=e.openFile,i=e.openAIWithMessage,a=e.openSearchAndReplace,c=e.openWebview,s=e.listFiles,u=e.autoFocus,f=e.maxHeight,h=e.onResizeTerminal,p=e.scrollPosition,m=e.scrollParent,v=e.performPaneOperation,g=(0,ep.fB)({maxHeight:f,openFile:r,listFiles:s,openWebview:c,performPaneOperation:v}),y=g.visibleHeight,b=g.visibleLines,Z=g.bufferHeight,x=g.bufferLines,C=g.wrapperResizeRef,k=g.xterm,S=g.xtermRef,_=g.hasScrollback,E=(0,w.useMemo)(function(){return null==k?void 0:k._term},[k]),T=(0,w.useMemo)(function(){var e,t=null==E?void 0:E._core;return null!==(e=null==t?void 0:t._renderService.dimensions.css.cell)&&void 0!==e?e:{width:0,height:0}},[E]),R=(0,o._)((0,w.useState)(!1),2),D=R[0],I=R[1],B=(0,o._)((0,w.useState)(""),2),G=B[0],P=B[1],A=(0,o._)((0,w.useState)(!1),2),L=A[0],N=A[1],O=(0,w.useRef)(null),U=(0,eb.P5)({controlName:"flag-output-userevents",logFlagToAnalytics:!1}),X=(0,ew.K)();(0,w.useEffect)(function(){return function(){null!==O.current&&clearTimeout(O.current)}},[O]),(0,w.useEffect)(function(){if(E){if(p<1||!_){E.scrollToLine(0);return}var e=Z-y,t=x-b;if(e<1){E.scrollToLine(0);return}E.scrollToLine(Math.round(p/e*t))}},[Z,x,_,p,E,y,b]);var M=(0,w.useCallback)(function(){if(E){var e=E.getSelectionPosition();e&&m(e.start.y*T.height-f/2)}},[E,f,m,T.height]);(0,w.useEffect)(function(){if(U)return t(function(e){return X("repl:run:output",{output:e})})},[t,U,X]);var F=(0,em.av)().onContextMenu,W=(0,ev.j)({xterm:k,isOutputsTerminal:!0,openAIWithMessage:i,openShellSearch:function(e){I(!0),P(e)},openSearchAndReplace:a});return(0,l.BX)(ep.VU,{onInput:n,xterm:k,wrapperResizeRef:C,bufferHeight:Z,onMessage:t,onResizeTerminal:h,autoFocus:u,style:{pointerEvents:L?"none":"all"},onWheel:function(){N(!0),O.current&&clearTimeout(O.current),O.current=setTimeout(function(){N(!1)},200)},onKeyDown:function(e){"f"===e.key&&(0,ey.jh)(e)&&(I(!0),e.preventDefault())},children:[D?(0,l.tZ)(d.G,{css:ex.searchWidget,children:(0,l.tZ)(eg.R,{searchValue:G,setSearchValue:P,findPrevious:function(e){(null==k?void 0:k.findPrevious(e,eZ))&&M()},findNext:function(e){(null==k?void 0:k.findNext(e,eZ))&&M()},exit:function(){return I(!1)}})}):null,(0,l.tZ)(ep.UB,{xtermRef:S,visibleHeight:y,maxHeight:f,css:ex.terminal,onContextMenu:function(e){return F(e,{command:W})}})]})}var ek=n(91466),eS=n(81253),e_=n(12394),eE=n(24126),eT=n(76848),eR=(0,f.X)({emptyStateWrapper:[m.l0.p(8),m.l0.display.block,{lineHeight:"32px"}],simpleRunButtonWrapper:[m.l0.rowWithGap(6),m.l0.backgroundColor.accentPositiveDimmest,m.l0.color.accentPositiveStrongest,m.l0.align.center,m.l0.borderRadius(8),m.l0.py(2),m.l0.px(6),m.l0.mx(4),m.l0.cursor.pointer,{"&:hover":[m.l0.color.white,m.l0.backgroundColor.accentPositiveDefault]}]}),eD=(0,f.X)({root:[m.l0.p(8),m.l0.colWithGap(8)],header:[m.l0.colWithGap(6),m.l0.align.start],workflows:[m.l0.colWithGap(6)]});function eI(e){var t=e.onClick;return(0,l.tZ)(d.G,{tag:"span",style:{display:"inline-block"},children:(0,l.BX)(d.G,{tag:"button",onClick:t,css:eR.simpleRunButtonWrapper,children:[(0,l.tZ)(eS.Z,{size:12}),(0,l.tZ)(u.xv,{children:"Run"})]})})}function eB(e){var t=e.runner,n=(0,o._)((0,w.useState)(function(){return t.getRunState()}),2),r=n[0],i=n[1],a=(0,eT.s2)(),c=function(){if(null==a?void 0:a.run){a.run();return}var e=t.getRunState();(e===B.Ah.IDLE||e===B.Ah.STOPPING)&&t.run()},s=(0,eb.P5)({controlName:"flag-work-flows"});return((0,w.useEffect)(function(){var e=t.onStateChanged(function(e){i(e)});return function(){return e()}},[t]),r===B.Ah.OFFLINE)?(0,l.tZ)(d.G,{css:eR.emptyStateWrapper,children:"The Repl is booting..."}):r===B.Ah.RUNNING||r===B.Ah.BEFORE_RUN?(0,l.tZ)(d.G,{css:eR.emptyStateWrapper,children:"Running..."}):s?(0,l.BX)(d.G,{css:eD.root,children:[(0,l.tZ)(u.xv,{variant:"small",color:"dimmest",children:"Results of your code will appear here when you run"}),(0,l.tZ)(ek.R,{}),(0,l.BX)(d.G,{css:eD.header,children:[(0,l.tZ)(u.xv,{variant:"small",color:"dimmer",children:"Default"}),(0,l.tZ)(O.zx,{size:"small",text:"Run",iconLeft:(0,l.tZ)(eS.Z,{}),colorway:"positive",onClick:c})]}),(0,l.tZ)(ek.R,{}),(0,l.BX)(d.G,{css:eD.workflows,children:[(0,l.tZ)(u.xv,{variant:"small",color:"dimmer",children:"Workflows"}),(0,l.tZ)(eE.A,{})]})]}):(0,l.tZ)(e_.Z,{pane:{type:"runnerOutput"},headerText:"Run your code",bodyText:(0,l.BX)(l.HY,{children:["Results of your code will appear here when you"," ",(0,l.tZ)(eI,{onClick:c})," the project."]})})}var eG=n(21781),eP=n(31417),eA=n(21460),eL=n(6829),eN=n(42306),eO=n(28670),eU=n(67827),eX=n(14074);function eM(e){var t=e.visualState,n=e.onSetVisualState,r=e.maxHeight,i=(0,o._)((0,w.useState)(t===B.MZ.EXPANDED?0:void 0),2),a=i[0],l=i[1],c=(0,w.useRef)(null),s=(0,o._)((0,w.useState)(t===B.MZ.EXPANDED?"expanded":"collapsed"),2),u=s[0],d=s[1],f=(0,o._)((0,w.useState)(t===B.MZ.COLLAPSED?0:void 0),2),h=f[0],p=f[1],m=(0,w.useCallback)(function(e){e&&l(e.getBoundingClientRect().height)},[]),v=(0,_.Z)(function(e){var t=e.height;"expanded"===u&&l(t)},{type:"debounce",wait:200});(0,w.useEffect)(function(){if(c.current)switch(u){case"start-collapsing":d("is-collapsing");break;case"is-collapsing":p(0);break;case"start-expanding":d("is-expanding");break;case"is-expanding":p(a);break;case"expanded":p(void 0)}},[u,a]);var g="expanded"!==u&&"is-expanding"!==u,y=(0,w.useCallback)(function(e){n(e?B.MZ.COLLAPSED:B.MZ.EXPANDED)},[n]),b=(0,w.useRef)(t);(0,w.useEffect)(function(){b.current===B.MZ.EXPANDED&&t===B.MZ.COLLAPSED&&c.current&&(d("start-collapsing"),p(Math.min(c.current.getBoundingClientRect().height,r)),d("start-collapsing")),b.current===B.MZ.COLLAPSED&&t===B.MZ.EXPANDED&&d("start-expanding"),b.current=t},[r,t]);var Z=(0,w.useCallback)(function(){"is-collapsing"===u&&d("collapsed"),"is-expanding"===u&&d("expanded")},[u]),x=(0,w.useMemo)(function(){return{style:{height:h,transition:"height 120ms ease-out",overflow:"expanded"===u||"start-collapsing"===u?"visible":"hidden"},onTransitionEnd:Z}},[h,u,Z]);return{collapsedStep:u,isCollapsed:g,setIsCollapsed:y,blockWrapperRef:c,blockWrapperProps:x,blockResizeRef:(0,w.useMemo)(function(){return(0,eX.l)(v,m)},[v,m]),measuredBlockHeight:a}}var eF=n(35820),eW=(0,f.X)({terminalLoadingWrapper:[m.l0.p(8)],terminalLoadingLine:[m.l0.borderRadius(2),eF.p.foregroundPulse(),m.l0.height(16),m.l0.mb(4)]});function eV(e){var t=e.targetHeight,n=Math.min(Math.floor((t-8)/20),4),r=(0,w.useMemo)(function(){return Array.from({length:n}).map(function(e,t){return(0,l.tZ)(d.G,{css:eW.terminalLoadingLine,style:{width:100*Math.random()+"%"}},t)})},[n]);return(0,l.tZ)(d.G,{css:eW.terminalLoadingWrapper,style:{height:t+"px"},children:(0,l.tZ)(d.G,{style:{position:"sticky",top:36},children:r})})}var eH=n(24374),ez=n(10055),ej=n(97933),eq=(0,f.X)({button:[m.l0.textAlign.left]}),eJ=function(e){var t=e.onClick;return(0,ej.Z)()?(0,l.tZ)(eH.u,{text:"Missing required secrets. Click here to add them.",onClick:t,iconRight:(0,l.tZ)(ez.Z,{}),colorway:"warning",css:eq.button}):null},eY=n(34030),e$=n(91620).lW,eK="outputs",eQ=(0,E.$)(["blockMinHeight","terminalBackgroundColor","previewHeight"]),e0=eQ.cssVars,e1=eQ.styleTokens,e2=(0,f.X)({outputBlockMetadataWrapper:[{containerType:"size"},m.l0.pl(4),m.l0.pr(8),m.l0.rowWithGap(4),m.l0.align.center,m.l0.justify.spaceBetween,m.l0.height(28),m.l0.backgroundColor.backgroundDefault,m.l0.border({direction:"bottom",width:1,style:"solid",color:m.TV.backgroundHigher}),m.l0.position.sticky,m.l0.top(0),m.l0.zIndex(1)],outputBlockMetadataWrapperLeft:[m.l0.rowWithGap(4),m.l0.align.center,m.l0.flex.shrink(1)],outputBlockMetadataWrapperRight:[m.l0.rowWithGap(4),m.l0.align.center],taskNamePill:[m.l0.maxWidth(100),m.l0.flex.shrink(0),m.l0.display.flex,{"> span":{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},"@container (max-width: 120px)":[m.l0.display.none]}],dateText:[m.l0.flex.row,{"@container (max-width: 460px)":[m.l0.display.none]}],outputBlockClosingBorder:[m.l0.height(1),m.l0.zIndex(1),m.l0.border({direction:"bottom",width:1,style:"solid",color:m.TV.backgroundHigher}),{marginTop:-1}],outputBlockTerminalWrapper:[m.l0.minHeight(e1.blockMinHeight)],terminal:{gridRow:1,gridColumn:1,position:"sticky",top:ep.Cn.topOffset,"& .xterm":[m.l0.py(ep.J),m.l0.pl(ep.J),m.l0.height("100%"),m.l0.overflow("hidden")],"& .xterm-viewport":[m.l0.overflow("hidden")],"& .xterm-scroll-area":{height:"0px !important"}},searchWidget:{gridRow:1,gridColumn:1,position:"sticky",top:ep.Cn.topOffset,height:30,margin:"2px 0 0 auto",zIndex:4},avatarWrapper:[m.l0.flex.growAndShrink(0),m.l0.rowWithGap(4),m.l0.align.center]});function e3(e){return(0,Y.Z)(new Date(e),"HH:mm:ss, MM/dd")}function e4(e){var t=e.isCollapsed,n=e.setIsCollapsed,r=e.taskName,i=e.duration,o=e.isDone,a=e.hasError,c=e.errorMessage,s=e.startTime,f=e.activeUsers,h=e.openPane,p=e.openedPorts,v=e.onAIChatClick,g=e3(s);return(0,l.BX)(d.G,{css:e2.outputBlockMetadataWrapper,onDoubleClick:function(){return n(!t)},children:[(0,l.BX)(d.G,{css:e2.outputBlockMetadataWrapperLeft,onDoubleClick:function(e){return e.stopPropagation()},children:[(0,l.tZ)(U.hU,{alt:t?"Expand":"Collapse",onClick:function(){return n(!t)},children:t?(0,l.tZ)(V.Z,{}):(0,l.tZ)(W.Z,{})}),(0,l.tZ)(X.D,{color:"grey",text:r,css:e2.taskNamePill})]}),(0,l.BX)(d.G,{css:e2.outputBlockMetadataWrapperRight,onDoubleClick:function(e){return e.stopPropagation()},children:[(0,l.tZ)(eo,{showingPorts:!!p&&p.length>0,onClick:v}),(0,l.tZ)(el,{openPane:h,openedPorts:p}),(0,l.BX)(u.xv,{color:"dimmer",variant:"small",css:e2.dateText,children:[i?(0,l.tZ)(M.u,{tooltip:"".concat(Math.round(i).toLocaleString(),"ms"),children:i<1e3?"".concat(Math.floor(i),"ms"):i<6e4?"".concat(Math.floor(i/1e3),"s"):"".concat(Math.floor(i/6e4),"m")}):null,i?"".concat("\xa0","on").concat("\xa0"):null,g]}),f.length>0?(0,l.tZ)(d.G,{css:e2.avatarWrapper,children:f.map(function(e){return(0,l.tZ)(eO.Z,{user:e,size:16},e.id)})}):null,o?(0,l.tZ)(M.u,{tooltip:a?"Error".concat(c?": ".concat(c):""):"Finished",children:a?(0,l.tZ)(q.Z,{}):(0,l.tZ)(F.Z,{})}):(0,l.tZ)(M.u,{tooltip:"Running...",children:(0,l.tZ)(z.Z,{color:m.TV.accentPositiveDefault})})]})]})}var e8={noScroll:!0};function e6(e){var t=e.taskIdx,n=e.runId,r=e.connectToTask,c=e.disconnectFromTask,s=e.maxHeight,u=e.scrollParent,f=e.scrollPosition,h=e.openPane,p=e.openAIWithMessage,m=(0,ep.fB)({maxHeight:s,openFile:function(){},listFiles:function(){return Promise.resolve({error:null,files:[]})},openWebview:function(){}}),v=m.visibleHeight,g=m.visibleLines,y=m.bufferHeight,b=m.bufferLines,Z=m.wrapperResizeRef,x=m.hasScrollback,C=m.xterm,k=m.xtermRef,S=(0,w.useMemo)(function(){return null==C?void 0:C._term},[C]),_=(0,w.useMemo)(function(){var e,t=null==S?void 0:S._core;return null!==(e=null==t?void 0:t._renderService.dimensions.css.cell)&&void 0!==e?e:{width:0,height:0}},[S]),E=(0,w.useRef)(!1),T=(0,o._)((0,w.useState)(null),2),R=T[0],D=T[1],I=(0,w.useRef)(null),B=(0,o._)((0,w.useState)(!1),2),G=B[0],P=B[1],A=(0,w.useRef)(null);(0,w.useEffect)(function(){return function(){null!==A.current&&clearTimeout(A.current)}},[A]),(0,w.useEffect)(function(){if(S){if(f<1||!x){S.scrollToLine(0);return}var e=y-v,t=b-g;if(e<1){S.scrollToLine(0);return}S.scrollToLine(Math.round(f/e*t))}},[y,b,x,f,S,v,g]),(0,w.useEffect)(function(){function e(){return(e=(0,i._)(function(){var e,t,n,i,l,c,s,u,d,f,h;return(0,a.Jh)(this,function(a){switch(a.label){case 0:if(E.current||!C||!R)return[2];return[4,r()];case 1:n=(t=o._.apply(void 0,[a.sent(),2]))[0],i=t[1],E.current=!0,I.current=n,null===(e=I.current)||void 0===e||e.push({$kind:"resize",size:C.getSize()}),l=!1,c=!1,a.label=2;case 2:a.trys.push([2,7,8,13]),u=(0,eP._)(i),a.label=3;case 3:return[4,u.next()];case 4:if(!(l=!(d=a.sent()).done))return[3,6];if(!(f=d.value).ok){if("UNEXPECTED_DISCONNECT"===f.payload.code||"NO_MATCHING_TASK_STATE"===f.payload.code)return[3,6];throw Error("[".concat(f.payload.code,"] ").concat(f.payload.message))}"output"===f.payload.$kind&&R(f.payload.chunk),a.label=5;case 5:return l=!1,[3,3];case 6:return[3,13];case 7:return h=a.sent(),c=!0,s=h,[3,13];case 8:if(a.trys.push([8,,11,12]),!(l&&null!=u.return))return[3,10];return[4,u.return()];case 9:a.sent(),a.label=10;case 10:return[3,12];case 11:if(c)throw s;return[7];case 12:return[7];case 13:return[2]}})})).apply(this,arguments)}return function(){e.apply(this,arguments)}(),function(){E.current=!1}},[r,n,t,R,C]),(0,w.useEffect)(function(){return function(){c()}},[c]);var L=(0,w.useCallback)(function(e){return D(function(){return e}),function(){}},[]),N=(0,o._)((0,w.useState)(!1),2),O=N[0],U=N[1],X=(0,o._)((0,w.useState)(""),2),M=X[0],F=X[1],W=(0,w.useCallback)(function(e){h({type:"searchReplace",data:{initialQuery:e}},!0)},[h]),V=(0,em.av)().onContextMenu,H=(0,ev.j)({xterm:C,isOutputsTerminal:!0,openAIWithMessage:p,openShellSearch:function(e){U(!0),F(e)},openSearchAndReplace:W}),z=(0,w.useCallback)(function(){if(S){var e=S.getSelectionPosition();e&&u(e.start.y*_.height-s/2)}},[S,s,u,_.height]);return(0,l.BX)(ep.VU,{xterm:C,wrapperResizeRef:Z,bufferHeight:y,onInput:function(e){var t,n=new Uint8Array(e$.from(e));null===(t=I.current)||void 0===t||t.push({$kind:"stdin",stdin:n})},onMessage:L,onResizeTerminal:function(e){var t;null===(t=I.current)||void 0===t||t.push({$kind:"resize",size:e})},onFocus:function(){var e;null===(e=I.current)||void 0===e||e.push({$kind:"focused"})},onBlur:function(){var e;null===(e=I.current)||void 0===e||e.push({$kind:"blurred"})},style:{pointerEvents:G?"none":"all"},onWheel:function(){P(!0),A.current&&clearTimeout(A.current),A.current=setTimeout(function(){P(!1)},200)},onKeyDown:function(e){"f"===e.key&&(0,ey.jh)(e)&&(U(!0),e.preventDefault())},children:[O?(0,l.tZ)(d.G,{css:e2.searchWidget,children:(0,l.tZ)(eg.R,{searchValue:M,setSearchValue:F,findPrevious:function(e){(null==C?void 0:C.findPrevious(e,e8))&&z()},findNext:function(e){(null==C?void 0:C.findNext(e,e8))&&z()},exit:function(){return U(!1)}})}):null,(0,l.tZ)(ep.UB,{xtermRef:k,visibleHeight:v,maxHeight:s,css:e2.terminal,onContextMenu:function(e){return V(e,{command:H})}})]})}function e5(e){var t,n,r,i,a,c,s=e.task,u=e.config,d=e.isCollapsed,f=e.setIsCollapsed,h=e.openPane,p=e.openedPorts,m=e.onAIChatClick,v="FINISHED"===s.state||"FAILED"===s.state,g=s.startTime,y=v?s.endTime:void 0,b=(0,eN.aG)(),Z=(0,w.useMemo)(function(){return s.userIds.map(function(e){return b.find(function(t){return t.id===e})}).filter(Boolean)},[s,b]),x=(t=!v,r=(n=(0,o._)((0,w.useState)(function(){return Date.now()}),2))[0],i=n[1],(0,w.useEffect)(function(){if(t){var e=setInterval(function(){i(Date.now())},100);return function(){clearInterval(e)}}},[t]),r);g&&y?c=y-g:v||(c=x-g);var C="shell.exec"===u.task&&"args"in u?u.args:u.task;return(0,l.tZ)(e4,{isCollapsed:d,setIsCollapsed:f,taskName:C,duration:c,isDone:v,hasError:"FAILED"===s.state,errorMessage:"FAILED"===s.state?null===(a=s.result)||void 0===a?void 0:a.message:void 0,startTime:s.startTime,activeUsers:Z,openPane:h,openedPorts:p,onAIChatClick:m})}function e7(e){var t,n,r,c=e.task,s=e.taskIdx,u=e.runId,f=e.config,h=e.maxHeight,p=e.rootRef,m=e.currentUser,v=e.ports,g=e.openAIWithMessage,y=e.openPane,b=e.onDoExposePort,k=e.onDontExposePort,E=(0,w.useRef)(null),R=(0,o._)((0,w.useState)(!0),2),D=R[0],G=R[1],A=(0,o._)((0,w.useState)(!1),2),N=A[0],O=A[1],U=(0,o._)((0,w.useState)(0),2),X=U[0],M=U[1],F=(0,P.f)(),W=(0,S.Z)(D,N?6e4:500),V=(0,I.r4)(v,(null===(t=c.metadata)||void 0===t?void 0:t.task)==="shell.exec"?null===(n=c.metadata)||void 0===n?void 0:n.cgroupPath:void 0),H=(0,o._)((0,w.useState)(B.MZ.EXPANDED),2),z=eM({maxHeight:h,visualState:H[0],onSetVisualState:H[1]}),j=z.collapsedStep,q=z.isCollapsed,J=z.setIsCollapsed,Y=z.blockWrapperRef,K=z.blockWrapperProps,Q=z.blockResizeRef,ee=z.measuredBlockHeight;(0,w.useEffect)(function(){if(p.current){var e,t=p.current,n=function(){var n,r;M(Math.max(0,t.scrollTop-(null!==(r=null===(n=E.current)||void 0===n?void 0:n.offsetTop)&&void 0!==r?r:0))),O(!0),e&&clearTimeout(e),e=setTimeout(function(){O(!1)},500)};return t.addEventListener("scroll",n),function(){clearInterval(e),t.removeEventListener("scroll",n)}}},[p,E]),(0,w.useEffect)(function(){if(E.current&&p.current)return(0,T.j)(E.current,function(){return G(!0),function(){G(!1)}},{root:p.current,threshold:0})},[p,E]);var et=(0,eU.U)(function(e){return function(){return e.workflows.connectToTask.stream({runId:u,taskIdx:s,userId:m.id,processViewId:eK})}},[u,s,m]),en=(0,eU.U)(function(e){return function(){return e.workflows.disconnectFromTask.rpc({runId:u,taskIdx:s,userId:m.id,processViewId:eK})}},[u,s,m]),er=(0,eU.U)(function(e){return(0,i._)(function(){var t,n,r,i,l,c,d,f,h;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return[4,e.workflows.readTaskBuffer.subscribe({runId:u,taskIdx:s})];case 1:t=o._.apply(void 0,[a.sent(),1])[0],n=new Uint8Array([]),r=!1,i=!1,a.label=2;case 2:a.trys.push([2,7,8,13]),c=(0,eP._)(t),a.label=3;case 3:return[4,c.next()];case 4:if(!(r=!(d=a.sent()).done))return[3,6];if(!(f=d.value).ok)throw Error(f.payload.code+": "+f.payload.message);"output"===f.payload.$kind&&(n=e$.concat([n,f.payload.chunk])),"finished"===f.payload.$kind&&g((0,$.Rn)(n.toString())),a.label=5;case 5:return r=!1,[3,3];case 6:return[3,13];case 7:return h=a.sent(),i=!0,l=h,[3,13];case 8:if(a.trys.push([8,,11,12]),!(r&&null!=c.return))return[3,10];return[4,c.return()];case 9:a.sent(),a.label=10;case 10:return[3,12];case 11:if(i)throw l;return[7];case 12:return[7];case 13:return[2]}})})}),ei=(0,o._)((0,w.useState)(0),2),eo=ei[0],ea=ei[1],el=(0,_.Z)(function(e){var t=e.height;"expanded"===j&&ea(t)},{type:"debounce",wait:200}),ec=(0,w.useCallback)(function(){y({type:"networking"},!0)},[y]),es=(0,w.useCallback)(function(e,t){y({type:"webview",data:{portType:"local",path:e,port:t}},!0)},[y]),eu=(0,w.useCallback)(function(){y({type:"envEditor"})},[y]),ed="FINISHED"===c.state||"FAILED"===c.state,ef=!1;return("collapsed"===j?ef=!1:(!ed||W)&&(ef=!0),et&&en)?(0,l.BX)(d.G,{innerRef:E,children:[(0,l.tZ)(e5,{task:c,config:f,isCollapsed:q,setIsCollapsed:J,openPane:y,openedPorts:V,onAIChatClick:function(){return null==er?void 0:er()}}),(0,l.BX)(d.G,{innerRef:el,style:{position:"sticky",top:28},children:[(0,l.tZ)(eJ,{onClick:eu}),(0,l.tZ)(L.ms,{configurations:V.map(function(e){return e.configuration}),openWebview:function(){es("/",V[0].configuration.localPort)},openNetworkingTool:ec,onDontExposePort:function(){1===V.length&&k(V[0].configuration.localPort)},onDoExposePort:function(){1===V.length&&b(V[0].configuration.localPort)}})]}),(0,l.tZ)("div",(0,C._)((0,x._)({ref:Y},K),{children:(0,l.tZ)(d.G,{css:e2.outputBlockTerminalWrapper,style:(r={},(0,Z._)(r,e0.blockMinHeight,ee+"px"),(0,Z._)(r,e0.terminalBackgroundColor,null==F?void 0:F.background),(0,Z._)(r,ep.Dq.topOffset,28+eo+"px"),r),children:ef?(0,l.tZ)(d.G,{innerRef:Q,children:(0,l.tZ)(e6,{taskIdx:s,runId:u,maxHeight:h-28-eo,scrollParent:function(e){var t,n,r,i=e+(null!==(r=null===(t=E.current)||void 0===t?void 0:t.offsetTop)&&void 0!==r?r:0);null===(n=p.current)||void 0===n||n.scrollTo({top:i})},scrollPosition:X,connectToTask:et,disconnectFromTask:en,openPane:y,openAIWithMessage:g})}):(0,l.tZ)(eV,{targetHeight:null!=ee?ee:0})})})),(0,l.tZ)(d.G,{css:e2.outputBlockClosingBorder})]}):null}function e9(e){var t=(0,w.useCallback)(function(){e.openPane({type:"dependencies"},!0)},[e]),n=e3(e.task.startTime),r=e.task.metadata;return((null==r?void 0:r.task)==="packager.installForAll"||(null==r?void 0:r.task)==="packager.installForLanguage")&&(null==r?void 0:r.hasUserFacingOutput)===!0?(0,l.tZ)(e7,(0,x._)({},e)):(0,l.BX)(d.G,{css:e2.outputBlockMetadataWrapper,children:[(0,l.BX)(d.G,{css:e2.outputBlockMetadataWrapperLeft,children:[(0,l.tZ)(U.hU,{alt:"Open Packager",onClick:t,children:(0,l.tZ)(eA.Z,{})}),(0,l.tZ)(X.D,{color:"grey",text:"Packager",css:e2.taskNamePill})]}),(0,l.BX)(d.G,{css:e2.outputBlockMetadataWrapperRight,children:[(0,l.tZ)(u.xv,{color:"dimmer",variant:"small",css:e2.dateText,children:n}),(0,l.tZ)(M.u,{tooltip:"Finished",children:(0,l.tZ)(F.Z,{})})]})]})}function te(e){var t=e.task,n=e.config,r=e.openPane,i=n.args,o=e3(t.startTime),a=(0,w.useCallback)(function(){r({type:"webview",data:{portType:"local",port:i}},!0)},[r,i]);return(0,l.BX)(d.G,{css:e2.outputBlockMetadataWrapper,children:[(0,l.BX)(d.G,{css:e2.outputBlockMetadataWrapperLeft,children:[(0,l.tZ)(U.hU,{alt:"Open Webview",onClick:a,children:(0,l.tZ)(eY.Z,{})}),(0,l.tZ)(X.D,{color:"grey",text:":".concat(i),css:e2.taskNamePill})]}),(0,l.BX)(d.G,{css:e2.outputBlockMetadataWrapperRight,children:[(0,l.tZ)(u.xv,{color:"dimmer",variant:"small",css:e2.dateText,children:o}),(0,l.tZ)(M.u,{tooltip:"Finished",children:(0,l.tZ)(F.Z,{})})]})]})}function tt(e){var t=(0,eL.x)();if(!t)return null;var n=e.config.task;switch(n){case"shell.exec":case"dummy.echo":case"dummy.print":case"dummy.sleep":case"dummy.pass":case"dummy.fail":return(0,l.tZ)(e7,(0,C._)((0,x._)({},e),{currentUser:t}));case"packager.installForLanguage":case"packager.installForAll":return(0,l.tZ)(e9,(0,C._)((0,x._)({},e),{currentUser:t}));case"workspace.openWebview":return(0,l.tZ)(te,(0,C._)((0,x._)({},e),{config:e.config}));case"workflow.run":return null;default:(0,K.Z)(n)}}var tn=n(24810),tr=(0,E.$)(["blockMinHeight","terminalBackgroundColor"]),ti=tr.cssVars,to=tr.styleTokens,ta=(0,f.X)({outputsListParent:[m.l0.height("100%"),m.l0.overflow("hidden"),m.l0.borderRadius(0,0,8,8)],outputsListWrapper:[m.l0.height("100%")],outputsList:[m.l0.height("100%"),m.l0.overflowY("scroll")],outputsListSnapToBottom:{scrollSnapType:"y mandatory"},scrollSnap:[m.l0.height(1),{marginTop:-1,pointerEvents:"none",scrollSnapAlign:"end"}],outputBlockCollapsingWrapper:[m.l0.minHeight(to.blockMinHeight)],outputBlockTerminalWrapper:[m.l0.minHeight(to.blockMinHeight),{backgroundColor:to.terminalBackgroundColor}],outputBlockClosingBorder:[m.l0.height(1),m.l0.zIndex(1),m.l0.border({direction:"bottom",width:1,style:"solid",color:m.TV.backgroundHigher}),{marginTop:-1}]});function tl(e){var t,n=e.onInput,r=e.openFile,i=e.openPane,a=e.openAIWithMessage,c=e.openSearchAndReplace,s=e.openSecretsPane,u=e.listFiles,f=e.autoFocus,h=e.rootRef,p=e.maxHeight,m=e.onResizeTerminal,v=e.isDone,g=e.data,y=e.error,b=e.localStartTime,k=e.localEndTime,E=e.startTime,R=e.endTime,D=e.type,G=e.visualState,A=e.onSetVisualState,N=e.ports,O=e.onDontExposePort,U=e.onDoExposePort,X=e.performPaneOperation,M=(0,w.useRef)(null),F=(0,o._)((0,w.useState)(!0),2),W=F[0],V=F[1],H=(0,o._)((0,w.useState)(!1),2),z=H[0],j=H[1],q=(0,o._)((0,w.useState)(0),2),J=q[0],Y=q[1],$=(0,P.f)(),K=(0,S.Z)(W,z?6e4:500),Q=(0,I.r4)(N,D===B.kH.EXECUTION?g.cgroup:void 0),ee=(0,o._)((0,w.useState)(0),2),et=ee[0],en=ee[1],er=(0,w.useCallback)(function(e,t){i({type:"webview",data:{portType:"local",path:e,port:t}},!0)},[i]),ei=eM({maxHeight:p,visualState:G,onSetVisualState:A}),eo=ei.collapsedStep,ea=ei.isCollapsed,el=ei.setIsCollapsed,ec=ei.blockWrapperRef,es=ei.blockWrapperProps,eu=ei.blockResizeRef,ed=ei.measuredBlockHeight;(0,tn.Z)({sendInput:function(e){return n(e),!0},paste:function(){return!1}}),(0,w.useEffect)(function(){if(h.current){var e,t=h.current,n=function(){var n,r;Y(Math.max(0,t.scrollTop-(null!==(r=null===(n=M.current)||void 0===n?void 0:n.offsetTop)&&void 0!==r?r:0))),j(!0),e&&clearTimeout(e),e=setTimeout(function(){j(!1)},500)};return t.addEventListener("scroll",n),function(){clearInterval(e),t.removeEventListener("scroll",n)}}},[h,M]),(0,w.useEffect)(function(){if(M.current&&h.current)return(0,T.j)(M.current,function(){return V(!0),function(){V(!1)}},{root:h.current,threshold:0})},[h,M]);var ef=(0,_.Z)(function(e){var t=e.height;"expanded"===eo&&en(t)},{type:"debounce",wait:200}),em=!1;return"collapsed"===eo?em=!1:(!v||K)&&(em=!0),(0,l.BX)(d.G,{innerRef:M,children:[(0,l.tZ)(eh,{isCollapsed:ea,setIsCollapsed:el,openPane:i,isDone:v,data:g,localStartTime:b,localEndTime:k,startTime:E,endTime:R,type:D,error:y,openedPorts:Q,openAIWithMessage:a}),(0,l.BX)(d.G,{innerRef:ef,style:{position:"sticky",top:28},children:[(0,l.tZ)(eJ,{onClick:s}),(0,l.tZ)(L.ms,{configurations:Q.map(function(e){return e.configuration}),openWebview:function(){er("/",Q[0].configuration.localPort)},openNetworkingTool:function(){i({type:"networking"},!0)},onDontExposePort:function(){1===Q.length&&O(Q[0].configuration.localPort)},onDoExposePort:function(){1===Q.length&&U(Q[0].configuration.localPort)}})]}),(0,l.tZ)("div",(0,C._)((0,x._)({ref:ec},es),{children:(0,l.tZ)(d.G,{css:ta.outputBlockTerminalWrapper,style:(t={},(0,Z._)(t,ti.blockMinHeight,ed+"px"),(0,Z._)(t,ti.terminalBackgroundColor,null==$?void 0:$.background),(0,Z._)(t,ep.Dq.topOffset,28+et+"px"),t),children:em?(0,l.tZ)(d.G,{innerRef:eu,children:(0,l.tZ)(eC,{onMessage:g.onMessage,onInput:n,openFile:r,openAIWithMessage:a,openSearchAndReplace:c,openWebview:er,listFiles:u,maxHeight:p-28-et,onResizeTerminal:m,scrollPosition:J,scrollParent:function(e){var t,n,r,i=e+(null!==(r=null===(t=M.current)||void 0===t?void 0:t.offsetTop)&&void 0!==r?r:0);null===(n=h.current)||void 0===n||n.scrollTo({top:i})},autoFocus:f,performPaneOperation:X})}):(0,l.tZ)(eV,{targetHeight:null!=ed?ed:0})})})),(0,l.tZ)(d.G,{css:ta.outputBlockClosingBorder})]})}function tc(e){var t=e.performPaneOperation,n=e.isActive,r=e.runner,i=e.ports,a=e.listFiles,c=e.sessionId,s=e.openAIWithMessage,u=e.onDontExposePort,f=e.onDoExposePort,h=(0,o._)((0,w.useState)([]),2),p=h[0],m=h[1],v=(0,o._)((0,w.useState)(0),2),g=v[0],b=v[1],Z=(0,o._)((0,w.useState)(!0),2),x=Z[0],C=Z[1],S=(0,w.useRef)(null),E=(0,G.Do)(D.Q.id,D.y.Output),T=(0,o._)((0,w.useState)(!1),2),I=T[0],P=T[1],L=(0,w.useRef)(0),N=(0,R.T3)(),O=(0,eT.QF)(),U=(0,w.useMemo)(function(){return O?Object.entries(O).flatMap(function(e){var t=(0,o._)(e,2),n=t[0],r=t[1];return r.tasks.filter(function(e){return e.state!==eG.PX.NOT_STARTED}).map(function(e,t){return{task:e,taskIdx:t,runId:n,config:r.workflow.tasks[t]}})}).sort(function(e,t){return e.task.startTime-t.task.startTime}):[]},[O]),X=(0,_.Z)(function(e){b(e.height)},{type:"throttle",wait:200}),M=(0,w.useCallback)(function(e){t({operation:"open",secondary:!0,pane:{type:(0,y.Dp)(e),data:e}})},[t]),F=(0,w.useCallback)(function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t({operation:"open",secondary:n,pane:e})},[t]),W=(0,w.useCallback)(function(){t({operation:"open",secondary:!1,pane:{type:"envEditor"}})},[t]),V=(0,w.useCallback)(function(e){t({operation:"open",secondary:!0,pane:{type:"searchReplace",data:{initialQuery:e}}})},[t]),H=(0,w.useCallback)(function(e){s(e),c&&t({operation:"open",secondary:!0,pane:{type:"ghostwriterChat",data:{sessionId:c}}})},[t,s,c]);return(0,w.useEffect)(function(){return r.onStateChanged(function(e){P(e===B.Ah.BEFORE_RUN)})},[r]),(0,w.useEffect)(function(){m(r.getOutputBlocks())},[r]),(0,w.useEffect)(function(){var e=r.onAllBlocksChanged(function(e){m(e)}),t=r.onBlockChanged(function(e){!p.find(function(t){return t.id===e.id})&&S.current&&(S.current.scrollTo(0,S.current.scrollHeight),C(!0)),m((0,A.Uy)(function(t){var n=t.findIndex(function(t){return t.id===e.id});n>=0?t[n]=e:t.push(e)}))});return function(){t(),e()}},[r,p,S]),(0,l.BX)(d.G,{css:ta.outputsListParent,innerRef:E,children:[I?(0,l.tZ)(k.Z,{}):null,(0,l.BX)(d.G,{css:ta.outputsListWrapper,innerRef:X,children:[0===p.length&&0===U.length?(0,l.tZ)(eB,{runner:r}):null,(0,l.BX)(d.G,{css:[ta.outputsList,x&&ta.outputsListSnapToBottom],innerRef:S,onScroll:function(){S.current&&(S.current.scrollTop<L.current?C(!1):C(S.current.scrollHeight-S.current.scrollTop-20<g),L.current=S.current.scrollTop)},children:[p.map(function(e,o){var c=o===p.length-1;return(0,l.tZ)(tl,{rootRef:S,maxHeight:g,onInput:function(e){var t=r.getRunState();(t===B.Ah.IDLE||t===B.Ah.RUNNING)&&r.sendInput(e)},openFile:M,openAIWithMessage:H,openSearchAndReplace:V,openPane:F,openSecretsPane:W,listFiles:a,onResizeTerminal:function(t){e.isDone||e.type!==B.kH.EXECUTION||r.resizeTerminalForBlock(e.id,t)},autoFocus:n&&c&&!N,isDone:e.isDone,type:e.type,error:e.error,visualState:e.visualState,onSetVisualState:function(t){return r.setBlockVisualState(e.id,t)},localStartTime:e.localStartTime,localEndTime:e.localEndTime,startTime:e.startTime,endTime:e.endTime,data:e.data,ports:i,onDontExposePort:u,onDoExposePort:f,performPaneOperation:t},e.id)}),U.map(function(e){return(0,l.tZ)(tt,{task:e.task,taskIdx:e.taskIdx,runId:e.runId,config:e.config,maxHeight:g,rootRef:S,ports:i,openPane:F,openAIWithMessage:H,onDoExposePort:f,onDontExposePort:u},e.runId+"-"+e.taskIdx)}),x?(0,l.tZ)(d.G,{css:ta.scrollSnap}):null]})]})]})}var ts=n(90169),tu=n(96949),td=n(28065),tf=c.Dy.Object({type:c.Dy.Literal("runnerOutput")}),th={id:"outputs.clear",name:"Clear console history",default:void 0};function tp(e){var t,n,r,c,s,u,d,f=e.runner,h=e.options,m=(n=(t=(0,v.Z)()).fs,r=t.ports,c=(0,eU.U)(function(e){return function(){return e.workflows.clearHistory.rpc({})}},[]),s=(0,w.useMemo)(function(){return[{type:"action",label:"Clear history",icon:(0,l.tZ)(p.Z,{}),run:function(){c&&c(),f.clearBlockHistory()}}]},[f,c]),(0,b.L5)(function(){return{actions:s,type:"runnerOutput",startBlock:f.startBlock,endBlock:f.endBlock,writeOutputToBlock:f.writeOutputToBlock,writeErrorToBlock:f.writeErrorToBlock}},[f,s]),(0,g.Il)(function(){return[th.id,f.clearBlockHistory]},[f]),u=(0,w.useCallback)(function(e){r.updateDotReplitPortsMapping(e,void 0)},[r]),{onDoExposePort:(0,w.useCallback)(function(e){r.tryExposingPortAutomatically(e)},[r]),onDontExposePort:u,ports:r,fs:n}),y=m.ports,Z=m.fs,x=m.onDontExposePort,C=m.onDoExposePort,k=(0,o._)((0,w.useState)(""),2),S=k[0],_=k[1],E=(0,ts.bD)({onSession:function(e){_(e),h.performPaneOperation({operation:"open",secondary:!0,pane:{type:"ghostwriterChat",data:{sessionId:e}}})}}).sendMessage,T=(0,o._)((0,ts.Ni)(),1)[0],R=(0,w.useCallback)((d=(0,i._)(function(e){return(0,a.Jh)(this,function(t){return(0,tu.j)(tu.U3.AI_CHAT_EVENT,{action:"message_sent",intent_type:"explain",model:T,user_model_selection:T,message_content:e,message_source:"console"}),E({kind:"message",message:e,intent:ts.$h.EXPLAIN,model:"advanced"===T?ts.BY.ADVANCED:ts.BY.BASIC}),[2]})}),function(e){return d.apply(this,arguments)}),[T,E]);return(0,l.tZ)(tc,{runner:f,ports:y,listFiles:Z.listFiles,isActive:h.isActive,performPaneOperation:h.performPaneOperation,sessionId:S,openAIWithMessage:R,onDontExposePort:x,onDoExposePort:C})}var tm=(0,f.X)({unavailable:[m.l0.p(8)]}),tv={Content:function(e){var t=e.options,n=(0,v.Z)().runner;return"outputs"!==n.mode?(0,l.tZ)(d.G,{css:tm.unavailable,children:(0,l.tZ)(u.xv,{children:"Console is not available."})}):(0,l.tZ)(tp,{options:t,runner:n})},Icon:function(e){var t=e.size;return(0,l.tZ)(td.Pd.Provider,{value:{color:m.TV.yellowStrongest,size:t},children:(0,l.tZ)(h.Z,{})})},getTitle:function(){return"Console"},description:"View the terminal output after running your code",category:y.hc.WorkspaceFeatures,decode:function(e){return s.B4.Decode(tf,e)}}},31797:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(3796),i=n(93245),o=n(54300),a=n(71711),l={Content:function(){return(0,r.tZ)(i.G,{style:{padding:32},children:(0,r.tZ)(a.Z,{children:"Sorry, this feature is not supported."})})},Icon:function(){return(0,r.tZ)(o.Z,{})},getTitle:function(){return"Unsupported"},category:n(62537).hc.Other,decode:function(){return{type:"commands",data:{autoFocus:!1}}}}},237:function(e,t,n){n.d(t,{J:function(){return w},R:function(){return Z}});var r=n(66626),i=n(3796),o=n(74044),a=n(99149),l=n(79685),c=n(28065),s=n(36259),u=n(12666),d=n(23882),f=n(73452),h=n(87061),p=n(38822),m=n(75834),v=n(62537),g=n(75271),y=n(97420),b=o.Dy.Object({type:o.Dy.Literal("webview"),data:o.Dy.Optional(o.Dy.Union([o.Dy.Object({portType:o.Dy.Literal("local"),port:o.Dy.Number(),path:o.Dy.Optional(o.Dy.String())}),o.Dy.Object({portType:o.Dy.Literal("external"),port:o.Dy.Number(),path:o.Dy.Optional(o.Dy.String())})]))}),w=function(e){return a.B4.Decode(b,e)},Z={Content:function(e){var t=e.pane.data,n=e.options.performPaneOperation,o=(0,d.Z)(),a=o.container,c=o.runner,s=o.ports,v=(0,l.T)(),y=(0,r._)((0,g.useState)(function(){return function(){}}),2),b=y[0],w=y[1],Z=(0,u.bg)(s),x=v?f.oB:(0,f.Cl)(t,Z);(0,p.Z)({container:a,runner:c,refreshWebView:b}),(0,m.Z)({runner:c,refreshWebView:b});var C=(0,g.useCallback)(function(){return n({operation:"open",secondary:!0,pane:{type:"networking"}})},[n]);return void 0===x?(0,i.tZ)(h.Z,{openNetworkingTool:C}):(0,i.tZ)(f.U8,{initialPort:x,initialPath:null==t?void 0:t.path,openPane:function(e){n({operation:"open",pane:e})},openNetworkingTool:C,setRefreshCb:w,ports:s,container:a})},Icon:function(e){var t=e.size;return(0,i.tZ)(c.Pd.Provider,{value:{color:y.TV.foregroundDimmer,size:t},children:(0,i.tZ)(s.Z,{})})},getTitle:function(){return"Webview"},description:"Preview your Repl as a web application",category:v.hc.WorkspaceFeatures,decode:w}},63672:function(e,t,n){n.d(t,{U:function(){return wf}});var r,i,o,a,l,c,s,u,d,f,h,p,m,v,g,y,b,w,Z,x,C,k,S,_,E,T,R,D,I,B,G,P,A,L,N=n(66626),O=n(63257),U=n(3796),X=n(74044),M=n(99149),F=n(9602),W=n(87915),V=n(24766),H=n(93245),z=n(36809),j=n(47874),q=n(10578),J=n(63163),Y=n(23882),$=n(99319),K=n(62537),Q=n(19236),ee=n(75271),et=n(35370),en=(0,z.X)({text:{width:"100%",textAlign:"center"},loaderContainer:[J.l0.display.flex,J.l0.center,J.l0.height("100%")]}),er=X.Dy.Object({type:X.Dy.Literal("binary"),data:X.Dy.Object({path:X.Dy.String()})}),ei={Content:function(e){var t=e.pane,n=e.options;return(0,U.tZ)(eo,{path:t.data.path,performPaneOperation:n.performPaneOperation})},Icon:function(e){var t=e.pane,n=e.size;return(0,U.tZ)(W.Z,{path:t.data.path,size:n})},getTitle:function(e){return(0,et.UO)(e.data.path)},category:K.hc.WorkspaceFeatures,decode:function(e){return M.B4.Decode(er,e)}};function eo(e){var t=e.path,n=e.performPaneOperation,r=(0,Y.Z)().fs,i=(0,$.Mp)({path:t,performPaneOperation:n});(0,Q.L5)(function(){if(i)return{commands:i?(0,O._)(i):[]}},[i]);var o=(0,N._)((0,ee.useState)(null),2),a=o[0],l=o[1],c=(0,N._)((0,ee.useState)(!0),2),s=c[0],u=c[1];return((0,ee.useEffect)(function(){var e=r.watchFile(t,{onChange:function(e){l(e.toString("base64")),u(!1)},onError:function(){l(null),u(!1)},onMoveOrDelete:function(){l(null),u(!1)}});return function(){e(),u(!0),l(null)}},[r,t]),s)?(0,U.tZ)(H.G,{css:en.loaderContainer,children:(0,U.tZ)(q.Z,{})}):null===a?(0,U.tZ)(V.xv,{multiline:!1,children:"Failed to load binary file"}):(0,U.BX)(U.HY,{children:[(0,U.tZ)($.HK,{path:t,performPaneOperation:n}),(0,U.BX)($.VY,{centered:!0,children:[(0,U.tZ)(V.xv,{css:en.text,children:"The file is not displayed in the text editor because it is either binary or uses an unsupported text encoding."}),(0,U.tZ)(F.hU,{alt:"Download",css:[J.l0.position.absolute,J.l0.bottom(8),J.l0.right(8),J.l0.p(16)],children:(0,U.tZ)("a",{href:"data:text/plain;base64,".concat(a),download:(0,et.UO)(t),css:[J.l0.color.foregroundDimmer],children:(0,U.tZ)(j.Z,{})})})]})]})}var ea=n(11999),el=n(19621),ec=n(39808),es=n(13850),eu=n(12394),ed=n(42306),ef=n(68140),eh=n(83059),ep=n(41733),em=n(30509),ev=n(78950),eg=n(44935),ey=n(54505),eb=n(79904),ew=n(14548),eZ=n(30231),ex=n(6674),eC=n(12379),ek=(0,z.X)({button:{width:"fit-content"}});function eS(e){var t=e.code,n=e.activeFile,r=(0,eC.Z)(n),i=r?{text:"Insert",iconRight:(0,U.tZ)(eZ.Z,{}),onClick:function(){return r({code:t,insertAt:"end"})}}:{text:"Copy",iconLeft:(0,U.tZ)(ex.Z,{}),onClick:function(){return(0,ey.Z)(t)}};return(0,U.tZ)(ew.Tg,{background:"default",children:(0,U.tZ)(eb.zx,(0,ep._)({size:"small",variant:"outlined",css:ek.button},i))})}var e_=(0,z.X)({self:J.l0.colWithGap(4),content:[J.l0.rowWithGap(4),J.l0.backgroundColor.backgroundRoot,J.l0.borderRadius(4),J.l0.p(4),J.l0.align.center,{width:"fit-content"}]});function eE(e){var t=e.method,n=e.content,r=e.activeFile,i=(0,N._)((0,ee.useState)(n),2),o=i[0],a=i[1];return(0,U.BX)(H.G,{css:e_.self,children:[(0,U.tZ)(eG,{title:t}),(0,U.tZ)(H.G,{css:e_.content,children:o.map(function(e,n){var r="".concat(t,"-").concat(n);return"input"===e.type?(0,U.tZ)(eR,{i:n,value:e.value,placeholder:e.placeholder,setContent:a},r):(0,U.tZ)(eI,{value:e.value},r)})}),(0,U.tZ)(eS,{code:o.reduce(function(e,t){return e+(t.value||("input"===t.type?t.placeholder:""))},""),activeFile:r})]})}var eT=(0,z.X)({self:[J.l0.width(64),J.l0.height(24),J.l0.zIndex(1)]});function eR(e){var t=e.i,n=e.value,r=e.placeholder,i=e.setContent;return(0,U.tZ)(eg.II,{onChange:function(e){i(function(n){return n.map(function(n,r){return t===r?(0,em._)((0,ep._)({},n),{value:e.target.value}):n})})},placeholder:r,value:n||"",css:eT.self})}var eD=(0,z.X)({self:[J.l0.borderRadius(0),J.l0.backgroundColor.backgroundRoot],code:[J.l0.font.code,J.l0.color.greyStronger,J.l0.p(4)]});function eI(e){var t=e.value;return(0,U.tZ)(H.G,{css:eD.self,children:(0,U.tZ)(V.xv,{css:eD.code,multiline:!1,children:t})})}var eB=(0,z.X)({self:J.l0.rowWithGap(4),bold:{fontWeight:J.TV.fontWeightMedium}});function eG(e){var t=e.title,n=(0,N._)((0,eh.Z)(function(){var e=(0,ev._)(t.split(" "));return[e[0],e.slice(1).join(" ")]},[t]),2),r=n[0],i=n[1];return(0,U.BX)(H.G,{css:eB.self,children:[(0,U.tZ)(V.xv,{css:eB.bold,multiline:!1,children:r}),(0,U.tZ)(V.xv,{color:"dimmer",multiline:!1,children:i})]})}(r=y||(y={})).IMPORT="Import the database",r.CREATE="Create a new database",r.SET="Set a key to a value",r.GET="Get a key's value",r.DELETE="Delete a key",r.LIST="List all keys",r.LIST_PREFIX="List keys with a prefix";var eP={language:"Bash",methods:[eO("Set a key to a value","curl $REPLIT_DB_URL -d '{{key}} = {{value}}'"),eO("Get a key's value","curl $REPLIT_DB_URL/{{key}}"),eO("Delete a key","curl -XDELETE $REPLIT_DB_URL/{{key}}"),eO("List all keys",'curl "$REPLIT_DB_URL?prefix={{key}}"')]},eA={language:"Node",methods:[eO("Import the database",'const Database = require("@replit/database")'),eO("Create a new database","const db = new Database()"),eO("Set a key to a value",'db.set("{{key}}", "{{value}}").then(() => {})'),eO("Get a key's value",'db.get("{{key}}").then(value => {})'),eO("Delete a key",'db.delete("{{key}}").then(() => {})'),eO("List all keys","db.list().then(keys => {})"),eO("List keys with a prefix",'db.list("{{prefix}}").then(matches => {})')]},eL={language:"Go",methods:[eO("Import the database",'import "github.com/replit/database-go"'),eO("Set a key to a value",'db.Set("{{key}}", "{{value}}")'),eO("Get a key's value",'value, _ := database.Get("{{key}}")'),eO("Delete a key",'database.Delete("{{key}}")'),eO("List all keys",'keys, _ := database.ListKeys("")'),eO("List keys with a prefix",'matches, _ := database.ListKeys("{{prefix}}")')]},eN={language:"Python",methods:[eO("Import the database","from replit import db"),eO("Set a key to a value",'db["{{key}}"] = "{{value}}"'),eO("Get a key's value",'db["{{key}}"]'),eO("Delete a key",'del db["{{key}}"]'),eO("List all keys","keys = db.keys()"),eO("List keys with a prefix",'matches = db.prefix("{{prefix}}")')]};function eO(e,t){return{method:e,content:function(e){for(var t=[],n=0;n<e.length;){var r=e.indexOf("{{",n),i=e.indexOf("}}",n);if(-1===r||-1===i){t.push({type:"code",value:e.substring(n)});break}t.push({type:"code",value:e.substring(n,r)}),t.push({type:"input",placeholder:e.substring(r+2,i)}),n=i+2}return t}(t)}}var eU=(0,z.X)({self:J.l0.colWithGap(24),code:[J.l0.font.code,J.l0.color.greyStronger,J.l0.backgroundColor.backgroundRoot,J.l0.p(4),J.l0.borderRadius(4)]});function eX(e){var t=e.activeFile,n=(0,eh.Z)(function(){return function(e){switch(e?(0,et.r6)(e):"bash"){case"js":case"ts":case"tsx":case"jsx":case"mjs":return eA;case"go":return eL;case"py":return eN;default:return eP}}(t)},[t]);return(0,U.BX)(H.G,{css:eU.self,children:[(0,U.BX)(V.xv,{color:"dimmer",children:["You can use the Database from any Repl by making HTTP requests or a client library as outlined below. Weve set an environment variable called ",(0,U.tZ)("code",{css:eU.code,children:"REPLIT_DB_URL"})," in your Repl if you'd like to interact with the database directly."]}),n.methods.map(function(e){return(0,U.tZ)(eE,{method:e.method,content:e.content,activeFile:t},"".concat(n.language).concat(e.method))})]})}var eM=n(61989),eF=(0,z.X)({children:[J.l0.p(12),J.l0.colWithGap(8)]});function eW(e){var t=e.title,n=e.defaultExpanded,r=e.children;return(0,U.tZ)(eM.Q,{defaultExpanded:n,headerContent:(0,U.tZ)(V.xv,{variant:"subheadDefault",multiline:!1,children:t}),children:(0,U.tZ)(H.G,{css:eF.children,children:r})})}var eV=n(62279),eH=n(71051),ez=n(35820),ej=n(46321),eq=(0,eV.F4)("from{opacity:0}to{opacity:1}"),eJ=(0,z.X)({self:[J.l0.colWithGap(8),{animation:"".concat(eq," 100ms forwards ease-in-out alternate")}],selfLoadingText:[J.l0.height(16),J.l0.width(48),J.l0.borderRadius(4),ez.p.backgroundPulse()],selfLoading:[J.l0.height(12),J.l0.borderRadius(16),ez.p.backgroundPulse()],text:[J.l0.rowWithGap(4),{display:"inline-flex"}],textSpan:[J.l0.width("fit-content"),J.l0.display.inlineFlex]});function eY(e){var t,n,r=e.database,i=e.loading,o=(null==r?void 0:r.sizeMB)||0,a=(t=1e6*(t=o)/1048576,"".concat(t.toFixed(),"/50 MiB")),l=i||!r;return(0,U.tZ)(H.G,{css:eJ.self,children:l?(0,U.BX)(U.HY,{children:[(0,U.tZ)(H.G,{css:eJ.selfLoadingText}),(0,U.tZ)(H.G,{css:eJ.selfLoading})]}):(0,U.BX)(U.HY,{children:[(0,U.BX)(V.xv,{color:"dimmer",css:eJ.text,multiline:!1,children:[(0,U.tZ)(H.K.span,{css:eJ.textSpan,children:a}),(0,U.tZ)(H.K.span,{css:eJ.textSpan,children:"|"}),(0,U.tZ)(H.K.span,{css:eJ.textSpan,children:(n=(n=null==r?void 0:r.keysCount)||0,"".concat(n," ").concat((0,eH.Z)("key",n)))})]}),(0,U.tZ)(ej.J,{current:o,total:50,tooltip:a})]})},l?"databaseLoadingStats":"databaseLoadedStats")}var e$=n(16155),eK=n(21262),eQ=n(71440),e0=n(9122);function e1(){var e=(0,eK._)(["\n  fragment DatabaseUsage on Database {\n    id\n    keysCount\n    sizeMB\n  }\n"]);return e1=function(){return e},e}function e2(){var e=(0,eK._)(["\n  query Database($replID: String!) {\n    repl(id: $replID) {\n      ... on Repl {\n        id\n        database {\n          id\n          ...DatabaseUsage\n        }\n      }\n    }\n    currentUser {\n      id\n      isLoggedIn\n    }\n  }\n  ","\n"]);return e2=function(){return e},e}var e3={},e4=(0,eQ.Ps)(e1()),e8=(0,eQ.Ps)(e2(),e4),e6=n(22893),e5=(0,z.X)({sectionWrapper:[J.l0.colWithGap(16),J.l0.width("100%"),J.l0.maxWidth(450)]});function e7(e){var t,n,r,i,o,a,l,c,s,u=e.performPaneOperation,d=(l=(i={variables:{replID:(0,e$.Z)()},pollInterval:1e4},o=(0,ep._)({},e3,i),a=e0.a(e8,o)).data,c=a.error,s=a.loading,l&&("Repl"===l.repl.__typename?n=null==l?void 0:null===(r=l.repl)||void 0===r?void 0:r.database:t="Could not fetch Database info"),c&&("GraphQL error: You don't have access to this database"===c.message?n=null:t=c.message),{db:n,loading:s,error:t}),f=d.db,h=d.error,p=d.loading,m=(0,ed.R3)(),v=(0,K.Se)().getTitle({type:"database"});return(0,U.tZ)(eu.Z,{pane:{type:"database"},headerText:v,action:(0,U.BX)(H.G,{css:e5.sectionWrapper,children:[h?(0,U.tZ)(e6.E,{colorway:"negative",text:h}):null,(0,U.tZ)(eW,{title:"Storage capacity",children:(0,U.tZ)(eY,{database:f,loading:p})}),(0,U.tZ)(eW,{title:"How to use the database",children:(0,U.tZ)(eX,{activeFile:m})}),(0,U.tZ)(e9,{performPaneOperation:u})]})})}function e9(e){var t=e.performPaneOperation;return(0,U.tZ)(ec.Z,{href:ef.TT.REPL_DATABASE,target:"_blank",rel:"noopener",onClick:function(e){e.preventDefault(),t({operation:"open",pane:{type:"docs",data:{url:ef.TT.REPL_DATABASE}}})},iconLeft:(0,U.tZ)(es.Z,{}),text:"Learn more in the docs"})}var te=n(28065),tt=n(97420),tn=X.Dy.Object({type:X.Dy.Literal("database")}),tr={Content:function(e){var t=e.options.performPaneOperation;return(0,U.tZ)(e7,{performPaneOperation:t})},Icon:function(e){var t=e.size;return(0,U.tZ)(te.Pd.Provider,{value:{color:tt.TV.blurpleStronger,size:t},children:(0,U.tZ)(el.Z,{})})},getTitle:function(){return"Database (Key/Value)"},description:"Free, easy-to-use key-value store suitable for unstructured data, caching, session management, fast lookups, and flexible data models",category:K.hc.CloudServices,decode:function(e){return M.B4.Decode(tn,e)}},ti=n(42516),to=n(42471),ta=n(80403),tl=n(52870),tc=n(98924),ts=n(33799),tu=n(3030),td="rgba(180, 0, 0, 0.125)",tf="rgba(0, 180, 0, 0.125)",th=tu.tk.theme({"&.cm-merge-b .cm-changedLine":{background:"rgba(0, 180, 0, 0.075)"},"&.cm-merge-a .cm-changedLine":{background:"rgba(180, 0, 0, 0.075)"},"&.cm-merge-b .cm-changedLineGutter":{background:tf},"&.cm-merge-a .cm-changedLineGutter":{background:td},"&.cm-merge-b .cm-changedText":{background:tf,outline:"solid 1px ".concat(tf),borderRadius:"2px"},"&.cm-merge-a .cm-changedText":{background:td,outline:"solid 1px ".concat(td),borderRadius:"2px"},".cm-collapsedLines":{color:tt.TV.accentPrimaryStrongest,background:tt.TV.accentPrimaryDimmest,transition:"background 250ms ease","&:hover":{background:tt.TV.accentPrimaryDimmer}}}),tp=[tu.tk.baseTheme({".cm-scroller":{height:"100% !important",overflowY:"auto !important"}}),tu.tk.theme({".cm-scroller":{height:"auto !important",overflowY:"visible !important"}})],tm=[ta.Wl.highest(tp),th],tv=n(82436),tg=n(91166),ty=n(75921),tb=n(52657);function tw(e){var t,n,r,i=e.a,o=e.b,a=e.style,l=e.className,c=(0,tc._)(e,["a","b","style","className"]),s=(0,N._)((0,ee.useState)(null),2),u=s[0],d=s[1],f=(0,N._)((0,ee.useState)(null),2),h=f[0],p=f[1],m=(0,ee.useRef)(!1),v=(0,tb.Z)(c),g=(0,tb.Z)(i.doc),y=(0,tb.Z)(o.doc),b=(0,tg.Xl)((0,em._)((0,ep._)({},i),{readOnly:!0})),w=(0,tg.Xl)((0,em._)((0,ep._)({},o),{readOnly:!0})),Z=(t=(0,N._)((0,ee.useState)(),2)[1],(0,ee.useCallback)(function(e){t(function(){throw e})},[])),x=c.orientation,C=c.revertControls,k=c.renderRevertControl,S=c.collapseUnchanged,_=c.gutter,E=c.highlightChanges,T=void 0!==S,R=null==S?void 0:S.margin,D=null==S?void 0:S.minSize,I=null!==(n=null==h?void 0:h.a)&&void 0!==n?n:null,B=null!==(r=null==h?void 0:h.b)&&void 0!==r?r:null;return(0,tg.uF)(),(0,ee.useEffect)(function(){var e=function(e){Z(e)};if(u){var t=null;try{t=new ts.QK((0,em._)((0,ep._)({},v.current),{parent:u,a:{doc:g.current,extensions:[tu.tk.exceptionSink.of(e),tm].concat((0,O._)(b))},b:{doc:y.current,extensions:[tu.tk.exceptionSink.of(e),tm].concat((0,O._)(w))}}))}catch(t){e(t)}return t&&(p(t),m.current=!0),function(){if(t){p(null);try{t.destroy()}catch(t){e(t)}}}}},[u]),(0,ee.useEffect)(function(){I&&!m.current&&I.dispatch({changes:{from:0,to:I.state.doc.length,insert:i.doc}})},[I,i.doc]),(0,ee.useEffect)(function(){B&&!m.current&&B.dispatch({changes:{from:0,to:B.state.doc.length,insert:o.doc}})},[B,o.doc]),(0,ee.useEffect)(function(){h&&!m.current&&tZ(h,v.current.collapseUnchanged)},[h,v,i.doc,o.doc]),(0,ee.useEffect)(function(){if(h&&!m.current){var e=T?{margin:R,minSize:D}:void 0;h.reconfigure({orientation:x,revertControls:C,renderRevertControl:k,collapseUnchanged:e,gutter:_,highlightChanges:E}),e&&tZ(h,e)}},[h,x,C,k,T,R,D,_,E]),(0,tv.H)(I),(0,tv.H)(B),(0,ee.useEffect)(function(){m.current=!1}),(0,U.BX)(U.HY,{children:[(0,U.tZ)("div",{ref:d,className:l,style:a}),(0,U.tZ)(ty.N1,{view:I}),(0,U.tZ)(ty.N1,{view:B})]})}function tZ(e,t){e&&t&&(e.reconfigure({collapseUnchanged:void 0}),e.reconfigure({collapseUnchanged:(0,ep._)({},t)}))}var tx=n(59489),tC=n(23522),tk=n(29737),tS=n(56763),t_=(0,z.X)({container:[J.l0.width(60),J.l0.height(24),J.l0.display.flex,J.l0.center,J.l0.borderRadius(4),J.l0.fontSize(J.TV.fontSizeSmall)]});function tE(e){var t,n,r;switch(e.type){case to.hF.ADDED:case to.hF.UNTRACKED:t="Added",n=J.TV.greenDimmest,r=J.TV.greenStrongest;break;case to.hF.MODIFIED:t="Modified",n=J.TV.yellowDimmest,r=J.TV.yellowStrongest;break;case to.hF.DELETED:t="Deleted",n=J.TV.redDimmest,r=J.TV.redStrongest;break;case to.hF.RENAMED:t="Renamed",n=J.TV.tealDimmest,r=J.TV.tealStrongest;break;case to.hF.COPIED:t="Copy",n=J.TV.limeDimmest,r=J.TV.limeStrongest;break;default:return null}return(0,U.tZ)(H.G,{style:{backgroundColor:n,color:r},css:t_.container,children:(0,U.tZ)("span",{children:t})})}function tT(e){var t,n,r;switch(e.type){case"ADDED":t="Added",n=J.TV.greenDimmest,r=J.TV.greenStrongest;break;case"MODIFIED":t="Modified",n=J.TV.yellowDimmest,r=J.TV.yellowStrongest;break;case"DELETED":t="Deleted",n=J.TV.redDimmest,r=J.TV.redStrongest;break;case"RENAMED":t="Renamed",n=J.TV.tealDimmest,r=J.TV.tealStrongest;break;case"COPIED":t="Copy",n=J.TV.limeDimmest,r=J.TV.limeStrongest;break;default:return null}return(0,U.tZ)(H.G,{style:{backgroundColor:n,color:r},css:t_.container,children:(0,U.tZ)("span",{children:t})})}var tR=n(57025),tD=[{"& > span:first-child-of-type":[J.l0.flex.grow(1),J.l0.textAlign.left]},{"& > span":[J.l0.flex.shrink(1)]},J.l0.height("auto"),J.l0.p(8),J.l0.fontWeight.medium,J.l0.backgroundColor.backgroundHigher,J.l0.flex.row,J.l0.align.center,J.l0.justify.spaceBetween,J.l0.overflow("hidden"),J.l0.cursor.pointer],tI=(0,z.X)({buttonFolded:[tD,J.l0.borderRadius(8)],buttonUnfolded:[tD,J.l0.borderRadius(8,8,0,0)],rowContainer:[J.l0.align.center,J.l0.rowWithGap(8),J.l0.position.relative,J.l0.zIndex(1),J.l0.overflow("hidden")],diffContainer:[J.l0.flex.grow(1),J.l0.borderRadius(8)],bodyContainer:[J.l0.borderRadius(0,0,8,8),J.l0.p(8),J.l0.display.flex,J.l0.flex.row,J.l0.flex.wrap,J.l0.align.center,J.l0.justify.center,J.l0.backgroundColor.backgroundDefault,J.l0.border({color:J.TV.outlineDimmer,direction:"bottom"}),J.l0.border({color:J.TV.outlineDimmer,direction:"left"}),J.l0.border({color:J.TV.outlineDimmer,direction:"right"})],noChangesContainer:[J.l0.py(8),J.l0.px(8),J.l0.center,J.l0.width("100%")],innerContainer:[J.l0.display.flex,J.l0.align.center],splitContainer:[J.l0.p(8),J.l0.display.flex,J.l0.flex.row,J.l0.justify.spaceBetween,J.l0.maxWidth("100%"),J.l0.align.center],splitChild:[J.l0.align.center,J.l0.justify.center,{flexBasis:"50%"}],buttonGroupItem:[J.l0.width(64),J.l0.height(32)]}),tB=function(e){var t=e.value,n=e.onChange;return(0,U.BX)(tx.hE,{name:"SplitOrUnifiedDiff",value:t,onChange:n,row:!0,children:[(0,U.tZ)(H.G,{css:tI.buttonGroupItem,children:(0,U.tZ)(tx.rK,{value:"Unified",text:"Unified",id:"SplitOrUnifiedDiffUnified"})}),(0,U.tZ)(H.G,{css:tI.buttonGroupItem,children:(0,U.tZ)(tx.rK,{value:"Split",text:"Split",id:"SplitOrUnifiedDiffSplit"})})]})},tG=function(e){var t=e.folded,n=void 0!==t&&t,r=e.setFolded,i=e.diff,o="".concat(i.initial.path,"/").concat(i.initial.filename),a="".concat(i.final.path,"/").concat(i.final.filename);return(0,U.BX)(H.G,{css:n?tI.buttonFolded:tI.buttonUnfolded,onClick:function(){return r(!n)},children:[(0,U.BX)(H.G,{css:[tI.rowContainer,J.l0.flex.shrink(1)],children:["RENAMED"===i.status||"COPIED"===i.status?(0,U.BX)(U.HY,{children:[(0,U.tZ)(W.Z,{path:o}),(0,U.tZ)(V.xv,{multiline:!1,children:i.initial.filename}),""===i.initial.path?null:(0,U.tZ)(V.xv,{multiline:!1,color:"dimmest",css:[J.l0.fontWeight.normal],maxLines:1,children:i.initial.path}),(0,U.tZ)(eZ.Z,{}),(0,U.tZ)(W.Z,{path:a}),(0,U.tZ)(V.xv,{multiline:!1,children:i.final.filename}),""===i.final.path?null:(0,U.tZ)(V.xv,{multiline:!1,color:"dimmest",css:[J.l0.fontWeight.normal],children:i.final.path})]}):(0,U.BX)(U.HY,{children:[(0,U.tZ)(W.Z,{path:a}),(0,U.tZ)(V.xv,{multiline:!1,children:i.final.filename}),""===i.final.path?null:(0,U.tZ)(V.xv,{multiline:!1,color:"dimmest",css:[J.l0.fontWeight.normal],children:i.final.path})]}),(0,U.tZ)(tC.m,{textToCopy:a,tooltipText:"Copy Full Path",tooltipPlacement:"bottom-end"})]}),(0,U.BX)(H.G,{css:tI.rowContainer,children:[(0,U.tZ)(tT,{type:i.status}),(0,U.tZ)(F.hU,{alt:n?"Collapse diff":"Expand diff",onClick:function(){return r(!n)},children:n?(0,U.tZ)(tk.Z,{}):(0,U.tZ)(tS.Z,{})})]})]})},tP=function(e){var t=e.diff,n=e.splitOrUnified,r=e.extensions;return"Split"===n?(0,U.tZ)(tw,{a:{filePath:t.initial.filename,doc:t.initial.content},b:{filePath:t.final.filename,doc:t.final.content,extensions:r},collapseUnchanged:{},style:{width:"100%"}}):(0,U.tZ)(tg.ZP,{filePath:t.final.filename,initialDoc:t.final.content,extensions:[tl.p.of(ta.xv.of(t.initial.content.split("\n")))],readOnly:!0,style:{width:"100%"}})},tA=function(e){return(0,et.T3)(e)?"media":(0,et.Mb)(e)?"ot":"binary"},tL=function(e){var t=e.content,n=e.type,r=e.filename,i=e.extensions;switch(n){case"media":return(0,U.tZ)(H.G,{css:[{display:"flex",height:"100%"}],children:(0,U.tZ)(tR.A,{content:t,mime:(0,et.yC)(r)})});case"ot":return(0,U.tZ)(tg.ZP,{filePath:r,initialDoc:t,readOnly:!0,style:{width:"100%"},extensions:i});default:return(0,U.tZ)(V.xv,{color:"dimmest",multiline:!1,children:"This binary file has changed."})}},tN=function(e){var t=e.diff,n=e.splitOrUnified,r=e.extensions;if(t.loading)return(0,U.tZ)(H.G,{css:tI.noChangesContainer,children:(0,U.tZ)(q.Z,{size:20})});if(t.initial.content===t.final.content)return(0,U.tZ)(H.G,{css:tI.noChangesContainer,children:(0,U.tZ)(V.xv,{color:"dimmest",multiline:!1,children:"There are no changes to show."})});if("DELETED"===t.status)return(0,U.tZ)(H.G,{css:tI.noChangesContainer,children:(0,U.tZ)(V.xv,{color:"dimmest",multiline:!1,children:"This file has been deleted."})});var i=tA(t.initial.filename),o=tA(t.final.filename);if("ADDED"===t.status)switch(o){case"media":return(0,U.tZ)(H.G,{css:tI.noChangesContainer,children:(0,U.tZ)(H.G,{css:tI.innerContainer,children:(0,U.tZ)(tR.A,{content:t.final.content,mime:(0,et.yC)(t.final.filename)})})});case"ot":return(0,U.tZ)(H.G,{css:tI.noChangesContainer,children:(0,U.tZ)(tg.ZP,{filePath:t.final.filename,initialDoc:t.final.content,readOnly:!0,style:{width:"100%"},extensions:r})});default:return(0,U.tZ)(H.G,{css:tI.noChangesContainer,children:(0,U.tZ)(V.xv,{color:"dimmest",multiline:!1,children:"This binary file has been added."})})}return"binary"===i&&"binary"===o?(0,U.tZ)(H.G,{css:tI.noChangesContainer,children:(0,U.tZ)(V.xv,{color:"dimmest",multiline:!1,children:"This binary file has changed."})}):"ot"===i&&"ot"===o?(0,U.tZ)(tP,{diff:t,splitOrUnified:n,extensions:r}):(0,U.BX)(H.G,{css:tI.splitContainer,children:[(0,U.tZ)(H.G,{css:tI.splitChild,children:(0,U.tZ)(tL,{content:t.initial.content,type:i,filename:t.initial.filename,extensions:r})}),(0,U.tZ)(H.G,{css:tI.splitChild,children:(0,U.tZ)(tL,{content:t.final.content,type:o,filename:t.final.filename,extensions:r})})]})},tO=function(e){var t=e.diff,n=e.folded,r=e.setFolded,i=e.splitOrUnified;return(0,U.BX)(H.G,{css:tI.diffContainer,children:[(0,U.tZ)(tG,{folded:n,setFolded:r,diff:t}),n?null:(0,U.tZ)(ew.Tg,{css:tI.bodyContainer,elevated:!0,children:(0,U.tZ)(tN,{diff:t,splitOrUnified:i})})]},t.id)},tU=n(22419),tX=n(20858),tM=n(27387),tF=n(96583),tW=n(64566),tV=n(25722),tH=function(e){var t=e.context,n=e.gitService,r=e.result,i=e.data;tV.$e(function(e){e.setTag("service","git"),e.setTag("context",t),e.setExtra("env",n.getEnv()),i&&tV.sU("data",i),tV.Tb(r.error)})},tz=(i=(0,tM._)(function(e,t,n,r){var i,o,a;return(0,tF.Jh)(this,function(l){switch(l.label){case 0:if("git"!==r.type)return[3,2];return i=r.revision,[4,e.getFileContents({path:n,revision:i,convertToBase64:(0,et.T3)(n)})];case 1:if((o=l.sent()).error)throw tH({context:"use-file-at-revision-fetch-content",gitService:e,result:o,data:{path:n,revision:i}}),o.error;return[2,o.content||""];case 2:return[4,t.readFile(n,{fromDisk:!0})];case 3:if((a=l.sent()).error)throw a.error;return[2,a.content.toString("utf8")]}})}),function(e,t,n,r){return i.apply(this,arguments)}),tj=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=(0,N._)((0,ee.useState)(null),2),o=i[0],a=i[1],l=(0,N._)((0,ee.useState)(!0),2),c=l[0],s=l[1],u=(0,Y.Z)().fs,d=(0,tW.Z)((n=(0,tM._)(function(n){var r,i;return(0,tF.Jh)(this,function(o){switch(o.label){case 0:s(!0),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,tz(n,u,e,t)];case 2:return r=o.sent(),s(!1),[2,{content:r,error:null}];case 3:return i=o.sent(),s(!1),[2,{content:null,error:i}];case 4:return[2]}})}),function(e){return n.apply(this,arguments)}),[e,t,u],r);return(0,ee.useEffect)(function(){d&&(d.error?a(null):a(d.content))},[d]),{fileContent:o,loading:c}},tq=X.Dy.Object({type:X.Dy.Literal("git"),revision:X.Dy.String()}),tJ=X.Dy.Object({type:X.Dy.Literal("fs")}),tY=X.Dy.Object({type:X.Dy.Literal("diff"),data:X.Dy.Object({left:X.Dy.Object({path:X.Dy.String(),data:X.Dy.Union([tq,tJ])}),right:X.Dy.Object({path:X.Dy.String(),data:X.Dy.Union([tq,tJ])})})}),t$=(0,z.X)({container:[J.l0.colWithGap(16),J.l0.p(8)],header:[J.l0.mt(0),J.l0.mb(8)],emphasizedText:[J.l0.fontWeight.bold],bodyContainer:[J.l0.borderRadius(8),J.l0.p(8),J.l0.display.flex,J.l0.flex.row,J.l0.flex.wrap,J.l0.align.center,J.l0.justify.center,J.l0.backgroundColor.backgroundDefault,J.l0.border({color:J.TV.outlineDimmest,direction:"full"})],tooltipContainer:[J.l0.display.inlineBlock]}),tK=function(e){var t=e.filename,n=e.onFileClick;return(0,U.tZ)("span",{css:t$.tooltipContainer,children:(0,U.tZ)(tU.u,{tooltip:"View file",children:(0,U.tZ)("button",{css:[J.l0.reset.button,J.l0.linkStyle,J.l0.fontWeight.medium],onClick:n,children:t})})})},tQ=function(e){return"git"===e.type?e.revision:"working directory"},t0=function(e){var t,n,r=e.left,i=e.right,o=e.onFileClick,a=r.path===i.path,l=(t=r.data,n=i.data,t.type===n.type&&("git"!==t.type||t.revision===n.revision));return a?l?(0,U.BX)(V.h4,{level:1,variant:"text",css:t$.header,children:["Comparing"," ",(0,U.BX)("span",{css:t$.emphasizedText,children:[(0,U.tZ)(tK,{filename:r.path,onFileClick:o})," ",tQ(r.data)]})," ","to itself"]}):(0,U.BX)(V.h4,{level:1,variant:"text",css:t$.header,children:["Comparing"," ",(0,U.BX)("span",{css:t$.emphasizedText,children:[(0,U.tZ)(tK,{filename:r.path,onFileClick:o})," ",tQ(r.data)]})," ","to ",(0,U.tZ)("span",{css:t$.emphasizedText,children:tQ(i.data)})]}):l?(0,U.BX)(V.h4,{level:1,variant:"text",css:t$.header,children:["Comparing ",(0,U.tZ)("span",{css:t$.emphasizedText,children:r.path})," to"," ",(0,U.BX)("span",{css:t$.emphasizedText,children:[(0,U.tZ)(tK,{filename:i.path,onFileClick:o})," ",tQ(r.data)]})]}):(0,U.BX)(V.h4,{level:1,variant:"text",css:t$.header,children:["Comparing"," ",(0,U.BX)("span",{css:t$.emphasizedText,children:[r.path," ",tQ(r.data)]})," ","to"," ",(0,U.BX)("span",{css:t$.emphasizedText,children:[(0,U.tZ)(tK,{filename:i.path,onFileClick:o})," ",tQ(i.data)]})]})},t1=(b={},(0,ti._)(b,"Content",function(e){var t=e.pane.data,n=t.left,r=t.right,i=e.options.performPaneOperation,o=(0,N._)((0,ee.useState)("Split"),2),a=o[0],l=o[1],c=tj(n.path,n.data),s=c.fileContent,u=c.loading,d=tj(r.path,r.data),f=d.fileContent,h=d.loading,p=(0,ee.useMemo)(function(){return null===s&&null!==f?to.yH.ADDED:null!==s&&null===f?to.yH.DELETED:to.yH.MODIFIED},[s,f]);return(0,U.BX)(H.G,{css:t$.container,children:[(0,U.tZ)(t0,{left:n,right:r,onFileClick:function(){i({operation:"open",pane:{type:(0,K.Dp)({path:r.path}),data:{path:r.path}}})}}),(0,U.tZ)(tB,{value:a,onChange:l}),(0,U.tZ)(ew.Tg,{css:t$.bodyContainer,children:(0,U.tZ)(tN,{diff:{id:"".concat(n.path,"-").concat(r.path),status:p,loading:u||h,initial:{filename:(0,et.UO)(n.path),path:(0,et.Il)(n.path),content:null!=s?s:""},final:{filename:(0,et.UO)(r.path),path:(0,et.Il)(r.path),content:null!=f?f:""}},splitOrUnified:a})})]})}),(0,ti._)(b,"Icon",function(){return(0,U.tZ)(tX.Z,{})}),(0,ti._)(b,"getTitle",function(e){var t=e.data;return t.left.path===t.right.path?"Diff: ".concat((0,et.UO)(t.left.path)):"Diff: ".concat((0,et.UO)(t.left.path)," - ").concat((0,et.UO)(t.right.path))}),(0,ti._)(b,"category",K.hc.WorkspaceFeatures),(0,ti._)(b,"decode",function(e){return M.B4.Decode(tY,e)}),b),t2=n(55551),t3=n(18557),t4=n(23666),t8=n(93696),t6=n(14861),t5=n(66411),t7=n(86763),t9=n.n(t7),ne=n(43257),nt=n(92674),nn=n.n(nt);function nr(){var e=(0,eK._)(["\n  query WorkspaceDrawCurrentUser {\n    currentUser {\n      id\n      username\n    }\n  }\n"]);return nr=function(){return e},e}var ni={},no=(0,eQ.Ps)(nr()),na=function(e){return e.reduce(function(e,t){return e[t.id]=t,e},{})},nl=function(e,t,n){if(!e)return[];var r,i=t(e.getSceneElementsIncludingDeleted()),o=e.getAppState();return(r=n.reduce(function(e,t){var n,r,a;return t.id===(null===(n=o.editingElement)||void 0===n?void 0:n.id)||t.id===(null===(r=o.resizingElement)||void 0===r?void 0:r.id)||t.id===(null===(a=o.draggingElement)||void 0===a?void 0:a.id)||(i[t.id]&&i[t.id].version>t.version?e.push(i[t.id]):i[t.id]&&i[t.id].version===t.version&&i[t.id].versionNonce!==t.versionNonce&&i[t.id].versionNonce<t.versionNonce?e.push(i[t.id]):e.push(t),delete i[t.id]),e},[])).concat.apply(r,(0,O._)(Object.values(i)))},nc=function(){var e,t,n=new Promise(function(n,r){e=n,t=r});return n.resolve=e,n.reject=t,n},ns=(0,eV.iv)(".excalidraw.excalidraw-modal-container.excalidraw--mobile{margin-top:",t3.Mz-1,"px;}");function nu(e){var t,r,i,o,a=e.fs,l=e.broadcast,c=e.filePath,s=(0,N._)((0,ee.useState)(void 0),2),u=s[0],d=s[1],f=(0,t4.Z)(),h=(0,ee.useRef)(function(e){return(0,O._)(e)}),p=(0,ee.useRef)(function(e){return -1}),m=(0,ee.useRef)({readyPromise:nc()}),v=(0,ee.useRef)({promise:null});(0,ee.useEffect)(function(){Promise.all([n.e(7309),n.e(7697)]).then(n.t.bind(n,87697,23)).then(function(e){h.current=function(t){return t.filter(function(t){return t.isDeleted||!e.isInvisiblySmallElement(t)})},p.current=e.getSceneVersion,d(e.Excalidraw)})},[]);var g=function(){return m.current},y=(t=(0,ep._)({},ni,{ssr:!1}),e0.a(no,t)),b=y.data,w=y.loading,Z=(null==b?void 0:null===(o=b.currentUser)||void 0===o?void 0:o.username)||"",x=(0,t6.F)().isDarkColorScheme,C=(0,t5.aG)(),k=(0,t8.Z)(),S=null==k?void 0:k.color,_=(0,N._)((0,ee.useState)(new Map),2),E=_[0],T=_[1],R=(0,N._)((0,ee.useState)(-1),2),D=R[0],I=R[1],B=(0,ee.useRef)(nn()()).current;(0,ee.useEffect)(function(){function e(){return(e=(0,tM._)(function(){var e,t;return(0,tF.Jh)(this,function(n){switch(n.label){case 0:if(!b||!b.currentUser)return[2];return[4,m.current.readyPromise];case 1:return n.sent(),e=g().getAppState().collaborators,t=new Map,C.forEach(function(n){if(n.username!==(null==b?void 0:null===(r=b.currentUser)||void 0===r?void 0:r.username)){var r,i=e.get(n.username)||{};t.set(n.username,(0,em._)((0,ep._)({},i),{username:n.username,color:{background:n.color,foreground:n.color}}))}}),g().updateScene({collaborators:t}),[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[b,C]);var G=(r=(0,tM._)(function(e,t){var n,r,i,o,a,s;return(0,tF.Jh)(this,function(u){t||(e=e.filter(function(e){return!E.has(e.id)||e.version>E.get(e.id)})),n=!0,r=!1,i=void 0;try{for(o=e[Symbol.iterator]();!(n=(a=o.next()).done);n=!0)s=a.value,E.set(s.id,s.version),T(new Map(E))}catch(e){r=!0,i=e}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return l.broadcastMessage(B,{text:JSON.stringify({elements:e,path:c})}),[2]})}),function(e,t){return r.apply(this,arguments)});(0,ee.useEffect)(function(){if(l)return l.onBroadcastReceived(B,function(e){var t=e.username,n=JSON.parse(e.text);if(n.path===c){if(n.collaborator&&m.current){var r=g().getAppState().collaborators;r.set(t,(0,em._)((0,ep._)({},r.get(t),n.collaborator),{username:t})),g().updateScene({collaborators:r})}else if(n.elements){var i=nl(g(),na,n.elements);I(p.current(i)),g().updateScene({elements:i})}else if(n.removePresence){var o=g().getAppState().collaborators;o.delete(n.removePresence),g().updateScene({collaborators:o})}}})},[l,c,B]),(0,ee.useEffect)(function(){function e(){return(e=(0,tM._)(function(){return(0,tF.Jh)(this,function(e){var t;return c&&a&&(v.current.promise=new Promise((t=(0,tM._)(function(e){var t,n,r;return(0,tF.Jh)(this,function(i){switch(i.label){case 0:return[4,Promise.all([a.readFile(c),m.current.readyPromise])];case 1:return"content"in(t=N._.apply(void 0,[i.sent(),1])[0])&&(n=JSON.parse(t.content.toString()||"{}"),r=g().getAppState(),n.appState=(0,ep._)({},r),n.scrollToContent=!0,e(n)),[2]}})}),function(e){return t.apply(this,arguments)}))),[2]})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[c,a]);var P=(0,ee.useCallback)(t9()((i=(0,tM._)(function(e,t){var n;return(0,tF.Jh)(this,function(r){switch(r.label){case 0:if(n=e.filter(function(e){return!e.isDeleted}),!c)return[3,2];return[4,a.writeFile(c,ne.Z.from(JSON.stringify({elements:n,files:t})))];case 1:r.sent(),r.label=2;case 2:return[2]}})}),function(e,t){return i.apply(this,arguments)}),350),[c]),A=function(e){p.current(e)>D&&(D>-1&&G(h.current(e),!1),I(p.current(e)))};return(0,U.BX)(H.G,{css:{position:"relative",height:"100%",width:"100%",flex:1,boxShadow:S?"0 3px 0 3px ".concat(S):"none",backgroundColor:J.TV.backgroundDefault,"& .excalidraw [title~=Library]":{display:"none"}},onMouseLeave:function(){l.broadcastMessage(B,{text:JSON.stringify({removePresence:Z,path:c})})},children:[u&&!w?(0,U.tZ)(u,{ref:m,UIOptions:{canvasActions:{loadScene:!1}},isCollaborating:!0,theme:x?"dark":"light",initialData:v.current.promise,onPointerUpdate:function(e){var t=e.pointer,n=g().getAppState().selectedElementIds||{};l.broadcastMessage(B,{text:JSON.stringify({collaborator:{pointer:t,selectedElementIds:n},path:c})})},onChange:function(e,t,n){A(e),I(p.current(e)),p.current(e)>D&&P(e,n)},name:Z}):null,f?(0,U.tZ)(eV.xB,{styles:[ns]}):null]})}function nd(e){var t=e.fs,n=e.broadcast,r=e.filePath;return(0,U.tZ)(nu,{fs:t,broadcast:n,filePath:r},r)}var nf=X.Dy.Object({type:X.Dy.Literal("draw"),data:X.Dy.Object({path:X.Dy.String()})}),nh={Content:function(e){var t=e.pane,n=e.options.performPaneOperation;return(0,U.tZ)(np,{path:t.data.path,performPaneOperation:n})},Icon:function(e){var t=e.size;return(0,U.tZ)(t2.Z,{size:t})},getTitle:function(e){return(0,et.UO)(e.data.path)},category:K.hc.WorkspaceFeatures,decode:function(e){return M.B4.Decode(nf,e)}};function np(e){var t=e.path,n=e.performPaneOperation,r=(0,Y.Z)(),i=r.fs,o=r.broadcast,a=(0,$.Mp)({path:t,performPaneOperation:n});return(0,Q.L5)(function(){if(a)return{commands:a}},[a]),(0,U.BX)(U.HY,{children:[(0,U.tZ)($.HK,{path:t,performPaneOperation:n}),(0,U.tZ)($.VY,{children:(0,U.tZ)(nd,{fs:i,broadcast:o,filePath:t})})]})}var nm=n(2446),nv=n(74492),ng=X.Dy.Object({type:X.Dy.Literal("envEditor")}),ny={Content:function(e){var t=e.options.performPaneOperation,n=(0,Y.Z)().secrets,r=(0,Y.Z)().runner;return(0,U.tZ)(nv.ZP,{watchEnv:n.watch,readRawEnv:n.rawRead,writeRawEnv:n.rawWrite,getRunState:r.getRunState,performPaneOperation:t})},Icon:function(e){var t=e.size;return(0,U.tZ)(nm.Z,{size:t})},getTitle:function(){return"Secrets"},description:"Store sensitive information (like API keys) securely in your Repl",category:K.hc.WorkspaceFeatures,decode:function(e){return M.B4.Decode(ng,e)}},nb=n(4135),nw=n(14118),nZ=n(80786),nx=n(49853),nC=(0,ee.createContext)(null);function nk(){var e=(0,ee.useContext)(nC);if(!e)throw Error("Expected store in context");return e}var nS=(0,nx.cn)([]),n_=(0,nx.cn)(function(e){return e(nS)},function(e,t,n){var r=e(nS),i=Math.random().toString(36).substring(7);t(nS,[{id:i,type:n,dismiss:function(){var n=e(nS).filter(function(e){return e.id!==i});t(nS,n)}}].concat((0,O._)(r)))});function nE(){return(0,nZ.b9)(n_,{store:nk()})}var nT=n(66791),nR=n(54455),nD=n(91466),nI=n(86466),nB=n(41960),nG=n(82922),nP=n(38775),nA=n(30043),nL=n(24969),nN=n(6065),nO=n(90767),nU=n(7599),nX=n(76143);function nM(){var e=(0,eK._)(["\n  query GitUserImageByUsername($username: String!) {\n    userByUsername(username: $username) {\n      id\n      image\n    }\n  }\n"]);return nM=function(){return e},e}var nF={},nW=(0,eQ.Ps)(nM()),nV=n(79032),nH=(0,z.X)({gitUserContainer:[J.l0.flex.row],gitUserInnerContainer:[J.l0.align.center,J.l0.flex.row,{"& > :not(:first-child)":{marginLeft:J.TV.space4}}],gitUserInnerContainerFlipped:[J.l0.align.center,J.l0.flex.rowReverse,{"& > :not(:last-child)":{marginLeft:J.TV.space4}}],alignCenter:[J.l0.align.center]});function nz(e){var t=e.name,n=e.email,r=e.allowPlaceholderAvatar,i=void 0!==r&&r,o=e.color,a=void 0===o?"default":o,l=e.small,c=void 0!==l&&l,s=e.flip,u=void 0!==s&&s,d=e.placement,f=e.showTooltip;return void 0===f||f?(0,U.tZ)(H.G,{css:nH.gitUserContainer,children:(0,U.tZ)(tU.u,{placement:void 0===d?"bottom":d,tooltip:(0,U.tZ)(V.xv,{children:n}),children:(0,U.BX)(H.G,{css:u?nH.gitUserInnerContainerFlipped:nH.gitUserInnerContainer,children:[(0,U.tZ)(nj,{email:n,name:t,enablePlaceholder:i,small:c}),(0,U.tZ)(V.xv,{multiline:!1,color:a,variant:c?"small":"text",children:t})]})})}):(0,U.tZ)(H.G,{css:nH.gitUserContainer,children:(0,U.BX)(H.G,{css:u?nH.gitUserInnerContainerFlipped:nH.gitUserInnerContainer,children:[(0,U.tZ)(nj,{email:n,name:t,enablePlaceholder:i,small:c}),(0,U.tZ)(V.xv,{multiline:!1,color:a,variant:c?"small":"text",children:t})]})})}function nj(e){var t,n=e.name,r=e.email,i=e.enablePlaceholder,o=void 0!==i&&i,a=e.small,l=void 0!==a&&a,c=(0,N._)((t=(0,ep._)({},nF,{initialFetchPolicy:"cache-and-network",nextFetchPolicy:"cache-first",ssr:!1}),nX.t(nW,t)),1)[0],s=(0,N._)((0,ee.useState)(null),2),u=s[0],d=s[1];return(0,ee.useEffect)(function(){var e;(e=(0,tM._)(function(){var e,t,n,i,o,a,l,s,u,f;return(0,tF.Jh)(this,function(h){switch(h.label){case 0:if(!r.endsWith("@".concat(nU.O)))return[3,1];return e=r.split("@")[0],(t=(0,N._)(e.split("+"),2))[0],n=t[1],d((0,nL.vt)("https://github.com/".concat(n,".png"))),[3,4];case 1:if(!r.endsWith("@".concat(nU.J)))return[3,3];return a=r.split("@")[0],(l=(0,N._)(a.split("-"),2))[0],[4,c({variables:{username:l[1]}})];case 2:return(s=null===(o=h.sent().data)||void 0===o?void 0:null===(i=o.userByUsername)||void 0===i?void 0:i.image)&&d(s),[3,4];case 3:u=(0,nV.FB)(r),(f=new URL("https://gravatar.com/avatar/".concat(u))).searchParams.append("d","404"),d(f.toString()),h.label=4;case 4:return[2]}})}),function(){return e.apply(this,arguments)})()},[r,c]),(0,ee.useMemo)(function(){var e=l?12:16;return null===u?o?(0,U.tZ)(nO.Z,{css:nH.alignCenter,size:e}):null:(0,U.tZ)(nN.q,{css:nH.alignCenter,username:n,src:u,onError:function(){return d(null)},size:e})},[u,o,l,n])}var nq=n(96988),nJ=n(52949);(o=w||(w={})).DASHBOARD="DASHBOARD",o.BRANCH="BRANCH",o.CURRENT_BRANCH="CURRENT_BRANCH",o.SETTINGS="SETTINGS",o.COMMIT="COMMIT";var nY=n(98817),n$=H.K.button,nK=(0,z.X)({container:[J.l0.display.flex,J.l0.flex.growAndShrink(1),J.l0.overflow("hidden")],cursorOverlay:{cursor:"pointer"},fullWidth:[J.l0.width("100%")],searchContainer:[J.l0.p(8)],paddedX:[J.l0.px(8)],loadingContainer:[J.l0.display.flex,J.l0.align.center,J.l0.justify.center,J.l0.py(48)],menu:[J.l0.maxWidth(390),J.l0.width(280),J.l0.display.flex,J.l0.flex.shrink(1),J.l0.maxHeight(640),J.l0.borderRadius(8),J.l0.overflow("hidden")],form:[J.l0.display.flex,J.l0.flex.growAndShrink(1),J.l0.flex.column,J.l0.overflow("hidden")],body:[J.l0.py(8),J.l0.colWithGap(8),J.l0.flex.growAndShrink(1),J.l0.overflow("auto")],branchMetadata:[J.l0.rowWithGap(8),J.l0.align.center,J.l0.flex.shrink(1)],section:[J.l0.rowWithGap(8),J.l0.align.center,J.l0.justify.spaceBetween],selector:[J.l0.display.flex,J.l0.align.center,J.l0.rowWithGap(4)],header:[J.l0.colWithGap(2),J.l0.width("100%")],menuItem:[{backgroundColor:"inherit"},nI.gU.listItem,J.l0.px(8),J.l0.py(4),J.l0.borderRadius(0),J.l0.align.start],inputDisabled:[{opacity:.75}],padded:[J.l0.p(8)],virtualItem:[J.l0.position.absolute,J.l0.top(0),J.l0.left(0),J.l0.width("100%"),J.l0.overflow("hidden")],virtualList:[J.l0.position.relative],divider:[J.l0.mt(8),J.l0.mb(8),J.l0.ml(0),J.l0.mr(0)],errorText:[J.l0.color.accentNegativeStronger,J.l0.mt(4)],createBranchButton:[J.l0.height(32),J.l0.overflow("hidden"),{whiteSpace:"nowrap",textOverflow:"ellipsis"}]}),nQ=function(e,t){var n,r,i,o=nE(),a=(0,Y.Z)().git,l=(0,N._)((0,ee.useState)(!0),2),c=l[0],s=l[1],u=(0,tW.Z)((n=(0,tM._)(function(e){var t,n,r,i,a,l,c,u,d,f,h,p,m,v,g,y,b,w,Z,x,C;return(0,tF.Jh)(this,function(k){switch(k.label){case 0:return s(!0),[4,e.isInitialized()];case 1:if((t=k.sent()).error)return o(t.error),s(!1),[2,t];if(!t.initialized)return s(!1),[2,{active:[],stale:[],important:[],error:null}];return[4,e.listBranches()];case 2:if((n=k.sent()).error)return o(n.error),s(!1),[2,n];return[4,e.findDefaultBranches()];case 3:if((r=k.sent()).error)return o(r.error),s(!1),[2,r];i=n.branches,a=new Set,l=!0,c=!1,u=void 0;try{for(d=function(){var e=h.value,t=i.find(function(t){return(0,to.Pi)(t,e)});t&&a.add(t)},f=r.refs[Symbol.iterator]();!(l=(h=f.next()).done);l=!0)d()}catch(e){c=!0,u=e}finally{try{l||null==f.return||f.return()}finally{if(c)throw u}}p=Date.now()-72e6,m=[],v=[],g=!0,y=!1,b=void 0;try{for(w=i[Symbol.iterator]();!(g=(Z=w.next()).done);g=!0)x=Z.value,a.has(x)||(x.commit.author.date>p?m.push(x):v.push(x))}catch(e){y=!0,b=e}finally{try{g||null==w.return||w.return()}finally{if(y)throw b}}return C=Array.from(a),s(!1),[2,{active:m,stale:v,important:C,error:null}]}})}),function(e){return n.apply(this,arguments)}),[o]),d=(r=(0,tM._)(function(t){var n;return(0,tF.Jh)(this,function(r){switch(r.label){case 0:if(c||(0,to.Pi)(e,t))return[2];return s(!0),[4,a.switchBranch(t)];case 1:return(n=r.sent()).error?(o(n.error),s(!1)):(a.forceRefresh(),(0,nq.J)("branch-switched")),[2]}})}),function(e){return r.apply(this,arguments)}),f=(i=(0,tM._)(function(e){var t;return(0,tF.Jh)(this,function(n){switch(n.label){case 0:if(c||""===e)return[2];return s(!0),[4,a.createBranch({name:e,checkout:!0})];case 1:return(t=n.sent()).error?(o(t.error),s(!1)):(a.forceRefresh(),(0,nq.J)("branch-created")),[2]}})}),function(e){return i.apply(this,arguments)});if((0,ee.useEffect)(function(){null!==e&&(s(!1),t({mode:w.CURRENT_BRANCH}))},[e,t]),null===u||c)return{loading:c,active:[],stale:[],important:[],handleSwitchBranch:d,handleCreateBranch:f,error:null};if(u.error)return{loading:c,active:[],stale:[],important:[],handleSwitchBranch:d,handleCreateBranch:f,error:u.error};var h=u.active,p=u.stale,m=u.important;return{loading:c,active:null!=h?h:[],stale:null!=p?p:[],important:null!=m?m:[],handleSwitchBranch:d,handleCreateBranch:f,error:null}},n0=function(e){var t=e.branch,n=nQ(t,e.switchMode),r=n.loading,i=n.active,o=n.important,a=n.stale,l=n.handleSwitchBranch,c=n.handleCreateBranch,s=(0,N._)((0,ee.useState)(!1),2),u=s[0],d=s[1],f=(0,N._)((0,ee.useState)(""),2),h=f[0],p=f[1],m=(0,N._)((0,ee.useState)(!1),2),v=m[0],g=m[1];return(0,U.tZ)(n9,{isOpen:u,setIsOpen:d,important:o,active:i,stale:a,current:t,query:h,setQuery:p,onSwitchBranch:l,createBranchLoading:v,createBranch:(0,tM._)(function(){return(0,tF.Jh)(this,function(e){switch(e.label){case 0:return g(!0),[4,c(h)];case 1:return e.sent(),p(""),g(!1),[2]}})}),loading:r})},n1=function(e){var t=e.onClick,n=e.children,r=(0,ee.useRef)(null),i=(0,N._)((0,nY.XZ)(r,!1),4),o=i[0],a=i[1],l=i[2],c=i[3];return(0,nY.Ym)(a,r),(0,U.tZ)(n$,{ref:r,role:"menuitem",css:nK.menuItem,onClick:function(e){c(),t(e)},onKeyDown:l,tabIndex:o,children:n})},n2=function(e){var t=e.branch;return(0,U.BX)(H.G,{css:nK.branchMetadata,children:[(0,U.tZ)(nz,{name:t.commit.author.name,email:t.commit.author.email,color:"dimmer",allowPlaceholderAvatar:!0,placement:"top",showTooltip:!1,small:!0}),(0,U.tZ)(V.xv,{color:"dimmer",variant:"small",children:(0,nP.lb)(t.commit.author.date)})]})},n3=function(e){var t=e.branch,n=e.current,r=e.onSwitchBranch,i=(0,ee.useMemo)(function(){return(0,to.p3)(t,n)},[t,n]);return(0,U.BX)(n1,{onClick:function(){return r(t)},children:[(0,U.tZ)(V.xv,{multiline:!1,children:(0,U.tZ)(nJ.Lr,{name:t.name,remote:t.type===to.HO.REMOTE?t.remote:null,current:i})}),(0,U.tZ)(n2,{branch:t})]})},n4=function(e,t){return t.filter(function(t){return(0,to.Qj)(t).toLowerCase().includes(e.toLowerCase())})},n8=function(e,t,n){var r=0,i=[];if(e.length+t.length+n.length===0)return i;if(e.length>0){i.push({key:"heading-important-".concat(r++),type:"heading",title:"Important"});for(var o=0;o<e.length;++o)i.push({key:"branch-important-".concat(r++),type:"branch",branch:e[o]});t.length+n.length>0&&i.push({key:"divider-important-".concat(r++),type:"divider"})}if(t.length>0){i.push({key:"heading-active-".concat(r++),type:"heading",title:"Active"});for(var a=0;a<t.length;++a)i.push({key:"branch-active-".concat(r++),type:"branch",branch:t[a]});n.length>0&&i.push({key:"divider-active-".concat(r++),type:"divider"})}if(n.length>0){i.push({key:"heading-stale-".concat(r++),type:"heading",title:"Stale"});for(var l=0;l<n.length;++l)i.push({key:"branch-stale-".concat(r++),type:"branch",branch:n[l]})}return i},n6=function(e){var t=e.item,n=e.current,r=e.onSwitchBranch;return"heading"===t.type?(0,U.tZ)(H.G,{css:nK.paddedX,children:(0,U.tZ)(V.xv,{multiline:!1,variant:"small",color:"dimmest",css:J.l0.fontWeight.medium,children:t.title})}):"divider"===t.type?(0,U.tZ)(H.G,{css:nK.divider,children:(0,U.tZ)(nD.R,{})}):(0,U.tZ)(H.G,{children:(0,U.tZ)(n3,{branch:t.branch,current:n,onSwitchBranch:r})})},n5=function(e){var t=e.items,n=e.current,r=e.onSwitchBranch,i=(0,ee.useRef)(null),o=(0,nR.MG)({overscan:10,count:t.length,getScrollElement:function(){return i.current},estimateSize:function(e){var n,r;return null!==(n=void 0===(r=t[e])?0:"heading"===r.type?30:"branch"===r.type?65:"divider"===r.type?20:void 0)&&void 0!==n?n:0}});return(0,U.tZ)(nY.uP,{options:{direction:"vertical"},children:(0,U.tZ)("div",{css:nK.body,ref:i,children:(0,U.tZ)("ul",{css:nK.virtualList,style:{height:"".concat(o.getTotalSize(),"px")},children:o.getVirtualItems().map(function(e){return(0,U.tZ)("div",{css:nK.virtualItem,style:{transform:"translateY(".concat(e.start,"px)")},"data-index":e.index,ref:o.measureElement,children:(0,U.tZ)(n6,{item:t[e.index],current:n,onSwitchBranch:r})},e.key)})})})})},n7=function(e){var t=e.query,n=e.setQuery,r=e.filteredImportant,i=e.filteredActive,o=e.filteredStale,a=e.current,l=e.onSwitchBranch,c=e.createBranchLoading,s=e.createBranch,u=e.loading,d=(0,ee.useMemo)(function(){return n8(r,i,o)},[r,i,o]),f='Create Branch "'.concat(t,'"'),h=(0,ee.useMemo)(function(){return(0,O._)(r).concat((0,O._)(i),(0,O._)(o)).some(function(e){return e.name===t})},[t,r,i,o]);return(0,U.tZ)(H.G,{css:nK.menu,children:(0,U.tZ)("form",{onSubmit:function(e){e.preventDefault(),s()},css:nK.form,children:u?(0,U.tZ)(H.G,{css:nK.loadingContainer,children:(0,U.tZ)(q.Z,{})}):(0,U.BX)(U.HY,{children:[(0,U.tZ)(H.G,{css:nK.searchContainer,children:(0,U.tZ)(nG.E,{value:t,onChange:function(e){n(e.target.value)},onClear:function(){n("")},loading:!1,placeholder:"Find or create a branch..."})}),(0,U.tZ)(H.G,{css:nK.paddedX,children:(0,U.tZ)(nD.R,{})}),d.length>0?(0,U.tZ)(n5,{items:d,current:a,onSwitchBranch:l}):null,h||""===t?null:(0,U.BX)(H.G,{css:nK.padded,children:[(0,U.tZ)(eb.zx,{text:f,size:"small",iconLeft:c?(0,U.tZ)(q.Z,{}):(0,U.tZ)(nA.Z,{}),stretch:!0,css:nK.createBranchButton,disabled:c||!(0,to.Dc)(t),type:"submit"}),(0,to.Dc)(t)?null:(0,U.tZ)(V.xv,{variant:"small",css:nK.errorText,multiline:!1,children:"Invalid branch name"})]})]})})})},n9=function(e){var t=e.isOpen,n=e.setIsOpen,r=e.important,i=e.active,o=e.stale,a=e.current,l=e.query,c=e.setQuery,s=e.onSwitchBranch,u=e.createBranchLoading,d=e.createBranch,f=e.loading,h=(0,ee.useMemo)(function(){return n4(l,r)},[l,r]),p=(0,ee.useMemo)(function(){return n4(l,i)},[l,i]),m=(0,ee.useMemo)(function(){return n4(l,o)},[l,o]);return(0,U.BX)(nB.xo,{label:"View Branches",placement:"bottom",isOpen:t,onOpenChange:function(e){n(e)},offset:16,children:[function(e){var n=e.onClick,r=(0,tc._)(e,["onClick"]);return(0,U.tZ)(eb.zx,{variant:"nofill",text:(0,U.BX)(V.xv,(0,em._)((0,ep._)({multiline:!1,variant:"small",css:nK.selector},r),{children:[(0,U.tZ)(nJ.Lr,{name:a.name,remote:a.type===to.HO.REMOTE?a.remote:null,icon:!0}),t?(0,U.tZ)(tS.Z,{}):(0,U.tZ)(tk.Z,{})]})),size:"small",stretch:!0,alignment:"start",css:nK.fullWidth,onClick:n})},(0,U.tZ)(n7,{query:l,setQuery:c,filteredImportant:h,filteredActive:p,filteredStale:m,current:a,onSwitchBranch:s,createBranchLoading:u,createBranch:d,loading:f})]})},re=n(3488),rt=n(20379),rn=n(10055),rr=n(15323);function ri(){var e,t,n,r,i,o=(0,N._)((0,ee.useState)(!1),2),a=o[0],l=o[1],c=(0,Y.Z)().git,s=(t=(e=(0,N._)((0,ee.useState)(!1),2))[0],n=e[1],r=(0,Y.Z)().git,(0,ee.useEffect)(function(){return r.onBusyChange(n)},[r]),t),u=nE(),d=(0,tW.Z)((i=(0,tM._)(function(e){var t,n;return(0,tF.Jh)(this,function(r){switch(r.label){case 0:return[4,e.isInitialized()];case 1:if((t=r.sent()).error)return u(t.error),[2,t];if(!t.initialized)return[2,{hasRemotes:!1,error:null}];return[4,e.getRemotes()];case 2:if((n=r.sent()).error)return u(n.error),[2,n];return[2,{hasRemotes:n.remotes.size>0,error:null}]}})}),function(e){return i.apply(this,arguments)}),[u]);if(null==d?void 0:d.error)return null;var f=!!d&&d.hasRemotes,h=s||a||null===d;function p(){return(p=(0,tM._)(function(){var e;return(0,tF.Jh)(this,function(t){switch(t.label){case 0:if(c.isBusy()||h)return[2];if(l(!0),!f)return[3,2];return[4,c.fetch()];case 1:(e=t.sent()).error?u(e.error):(0,nq.J)("remote-fetched"),t.label=2;case 2:return[4,c.refreshProfiles()];case 3:return t.sent(),c.forceRefresh(),setTimeout(function(){return l(!1)},500),[2]}})})).apply(this,arguments)}return(0,U.tZ)(F.hU,{alt:f?"Refresh and Fetch":"Refresh",size:24,onClick:function(){return p.apply(this,arguments)},disabled:h,children:h?(0,U.tZ)(q.Z,{}):(0,U.tZ)(rr.Z,{})})}var ro=(0,z.X)({container:[J.l0.height(36),J.l0.px(8),J.l0.py(4),J.l0.rowWithGap(8),J.l0.backgroundColor.backgroundDefault,J.l0.align.center,J.l0.justify.spaceBetween,J.l0.zIndex(1),{borderBottom:"1px solid ".concat(J.TV.outlineDimmer)}],left:[J.l0.rowWithGap(4),J.l0.align.center,J.l0.flex.growAndShrink(1)],right:[J.l0.rowWithGap(8),J.l0.align.center],back:{marginLeft:-4}}),ra=function(e){var t=e.openSettings;return(0,U.BX)(H.G,{css:ro.container,children:[(0,U.BX)(H.G,{css:ro.left,children:[(0,U.tZ)(rt.Z,{size:16}),(0,U.tZ)(V.xv,{variant:"subheadDefault",multiline:!1,children:"Repository"})]}),(0,U.BX)(H.G,{css:ro.right,children:[(0,U.tZ)(rh,{openSettings:t}),(0,U.tZ)(ri,{})]})]})},rl=function(e){var t=e.branch,n=e.switchMode,r=e.openSettings;return(0,U.BX)(H.G,{css:ro.container,children:[(0,U.tZ)(H.G,{css:ro.left,children:(0,U.tZ)(n0,{branch:t,switchMode:n})}),(0,U.BX)(H.G,{css:ro.right,children:[(0,U.tZ)(rh,{openSettings:r}),(0,U.tZ)(ri,{})]})]})},rc=function(e){var t=e.onBack;return(0,U.BX)(H.G,{css:ro.container,children:[(0,U.BX)(H.G,{css:ro.left,children:[(0,U.tZ)(rd,{onBack:t,alt:"Back"}),(0,U.tZ)(V.xv,{variant:"subheadDefault",multiline:!1,children:"Settings"})]}),(0,U.tZ)(H.G,{css:ro.right})]})},rs=function(e){var t=e.switchMode,n=e.openSettings;return(0,U.BX)(H.G,{css:ro.container,children:[(0,U.BX)(H.G,{css:ro.left,children:[(0,U.tZ)(rf,{switchMode:t}),(0,U.tZ)(V.xv,{variant:"subheadDefault",multiline:!1,children:"Commit"})]}),(0,U.BX)(H.G,{css:ro.right,children:[(0,U.tZ)(rh,{openSettings:n}),(0,U.tZ)(ri,{})]})]})};function ru(e){var t=e.mode,n=e.branch,r=e.switchMode,i=e.onBack,o=function(){return r({mode:w.SETTINGS})};switch(t){case w.DASHBOARD:return(0,U.tZ)(ra,{openSettings:o});case w.BRANCH:case w.CURRENT_BRANCH:if(null===n)throw Error("Tried to show branch in header, but branch is null");return(0,U.tZ)(rl,{branch:n,switchMode:r,openSettings:o});case w.SETTINGS:return(0,U.tZ)(rc,{onBack:i});case w.COMMIT:return(0,U.tZ)(rs,{switchMode:r,openSettings:o});default:return(0,U.BX)(H.G,{css:ro.container,children:[(0,U.tZ)(H.G,{css:ro.left}),(0,U.tZ)(H.G,{css:ro.right})]})}}function rd(e){var t=e.onBack,n=e.alt;return(0,U.tZ)(F.hU,{css:ro.back,alt:n,size:28,onClick:t,children:(0,U.tZ)(re.Z,{})})}function rf(e){var t=e.switchMode;return(0,U.tZ)(rd,{css:ro.back,onBack:function(){return t({mode:w.CURRENT_BRANCH})},alt:"Back to current branch"})}function rh(e){var t=e.openSettings;return(0,U.tZ)(F.hU,{alt:"Settings",size:24,onClick:t,children:(0,U.tZ)(rn.Z,{})})}var rp=n(31718),rm=(0,z.X)({checkboxLabel:J.l0.rowWithGap(8)});function rv(){var e=(0,ee.useId)(),t=(0,N._)((0,ee.useState)(!0),2),n=t[0],r=t[1],i=(0,N._)((0,ee.useState)(!1),2),o=i[0],a=i[1],l=nE(),c=(0,Y.Z)().git;function s(){return(s=(0,tM._)(function(){var e;return(0,tF.Jh)(this,function(t){switch(t.label){case 0:if(o)return[2];return a(!0),[4,c.init({initialCommit:n,includeAllInitialFiles:!0})];case 1:return(e=t.sent()).error?(a(!1),l(e.error)):(c.forceRefresh(),(0,nq.J)("repository-initialized")),[2]}})})).apply(this,arguments)}return(0,U.BX)(U.HY,{children:[(0,U.tZ)(eb.zx,{text:o?"Initializing...":"Initialize Git Repository",iconLeft:o?(0,U.tZ)(q.Z,{}):(0,U.tZ)(nb.Z,{}),colorway:"primary",loading:o,onClick:function(){return s.apply(this,arguments)}}),(0,U.BX)(H.G,{css:rm.checkboxLabel,tag:"label",children:[(0,U.tZ)(rp.X,{id:e,checked:n,onChange:function(e){return r(e)},size:"small"}),(0,U.tZ)(V.xv,{variant:"small",multiline:!1,children:"Create initial commit with all changes"})]})]})}var rg=n(54300),ry=n(7935),rb=n(32622),rw=n(32134),rZ=n(27840),rx=n(96674);function rC(){var e,t=(0,tW.Z)((e=(0,tM._)(function(e){return(0,tF.Jh)(this,function(t){return[2,{connectedToGithub:rk(e),error:null}]})}),function(t){return e.apply(this,arguments)}));return null==t||t.error?null:t.connectedToGithub}function rk(e){return e.hasProfile(to.rG.GITHUB)}function rS(e){var t=e.label,n=e.allowReconnect,r=e.callback,i=e.useV2App,o=(0,N._)((0,ee.useState)(!1),2),a=o[0],l=o[1],c=(0,Y.Z)().git,s=rC(),u=(0,t4.Z)(),d=(0,rw.v)({onAuth:function(){(0,nq.J)("github-user-connected"),l(!1),c.refreshProfiles({preferredProvider:to.rG.GITHUB}),null==r||r()},onClose:function(){return l(!1)},useV2App:i});return s&&!(void 0!==n&&n)?(0,U.tZ)(eb.zx,{text:"Connected to GitHub",colorway:"primary",iconLeft:(0,U.tZ)(rZ.Z,{}),disabled:!0}):(0,U.tZ)(eb.zx,{text:a||null===s?"Connecting...":u?"Visit account page to connect to GitHub":void 0===t?"Connect to GitHub":t,colorway:"primary",iconLeft:a?(0,U.tZ)(q.Z,{}):(0,U.tZ)(rx.Z,{}),loading:a,onClick:function(){if(u){rb.X.openExternalUrl("/account#connected-services");return}l(!0),d()}})}var r_=n(47549);function rE(e){return!!e&&("string"==typeof e?e.includes(r_.Kd):e.fetch.includes(r_.Kd))}function rT(e){return e.endsWith(".git")?e.slice(0,-4):e}function rR(e){if(!e)return null;var t="string"==typeof e?e:e.fetch;return rE(t)?rT(t):null}function rD(e){var t="string"==typeof e?e:e.fetch;if(rE(t)){var n=(t=rT(t)).split("/");if(n.length<2)return null;var r=n[n.length-2],i=n[n.length-1];return"".concat(r,"/").concat(i)}return null}var rI=(0,z.X)({body:[J.l0.p(4),J.l0.colWithGap(8),J.l0.borderRadius(0,0,8,8)],remedies:[J.l0.flex.row,J.l0.align.center,J.l0.justify.end,J.l0.flex.wrap,{gap:"8px"}]});function rB(e){var t=e.description,n=e.remedies,r=e.error;return(0,U.BX)(ew.Tg,{css:rI.body,elevated:!0,children:[(0,U.tZ)(V.xv,{children:t}),(0,U.BX)(H.G,{css:rI.remedies,children:[n,(0,U.tZ)(eb.zx,{text:"Dismiss",iconLeft:(0,U.tZ)(ry.Z,{}),onClick:r.dismiss})]})]})}function rG(e){var t,n=e.error,r=(0,tW.Z)((t=(0,tM._)(function(e){var t,r,i,o,a,l,c,s,u,d;return(0,tF.Jh)(this,function(f){switch(f.label){case 0:switch(n.type){case to.aq.UNKNOWN_NOT_GIT:return[3,1];case to.aq.UNKNOWN:return[3,2];case to.aq.CHANNEL_CLOSED:return[3,3];case to.aq.NOT_INITIALIZED:return[3,4];case to.aq.UNAUTHENTICATED:return[3,5];case to.aq.INDEX_FILE_CORRUPT:return[3,7];case to.aq.UNKNOWN_REMOTE:return[3,8];case to.aq.INDEX_LOCKED:return[3,9];case to.aq.NO_COMMITS:return[3,10];case to.aq.PATH_MATCHED_NO_FILES:return[3,11];case to.aq.USER_NOT_CONFIGURED:return[3,12];case to.aq.INVALID_REFERENCE:return[3,13];case to.aq.BRANCH_ALREADY_EXISTS:return[3,14];case to.aq.MERGE_CONFLICT:return[3,15];case to.aq.UPSTREAM_NOT_SET:return[3,16];case to.aq.HEAD_DETACHED:return[3,17];case to.aq.DIRTY_WORKTREE:return[3,18];case to.aq.PROTECTED_BRANCH:return[3,19];case to.aq.PUSH_REJECTED:return[3,20];case to.aq.REMOTE_ALREADY_EXISTS:return[3,21];case to.aq.TIMEOUT:return[3,22];case to.aq.ALREADY_INITIALIZED:return[3,23]}return[3,24];case 1:return t="Unknown error from the Git service. This is probably a bug in the app.",r=null,[3,25];case 2:return t="There was an unrecognized fatal error with Git. This is probably a bug in the app.",r=null,[3,25];case 3:return t="The command was interrupted. Please try again.",r=null,[3,25];case 4:return t="There isn't a Git repository in the Repl's root directory.",r=null,[3,25];case 5:return[4,e.getRemotes()];case 6:if((i=f.sent()).error)return[2,i];if(0!==i.remotes.size){o=!1,a=!0,l=!1,c=void 0;try{for(s=i.remotes.values()[Symbol.iterator]();!(a=(u=s.next()).done);a=!0)if(d=u.value,rE(d)){o=!0;break}}catch(e){l=!0,c=e}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}if(o){if(rk(e))return t="Failed to authenticate with the remote. Please ensure that Replit has access to this repository on GitHub.",r=(0,U.tZ)(rS,{label:"Update GitHub Repository Access",callback:n.dismiss,allowReconnect:!0}),[3,25];return t="Failed to authenticate with the remote. You have not connected your Replit account to GitHub, so Replit may not have access to the remote repository. Please connect your account to GitHub and try again.",r=(0,U.tZ)(rS,{label:"Connect to GitHub",callback:n.dismiss,allowReconnect:!0}),[3,25]}}return t="Failed to authenticate with the remote.",r=null,[3,25];case 7:return t="The Git index file is corrupt. This can happen if the index file is manually edited, or if the Git repository is corrupted.",r=null,[3,25];case 8:return t="The remote specified isn't configured.",r=null,[3,25];case 9:return t="Git tried to perform an action but the index lockfile still exists. This means Git either crashed previously or is still running an action.",r=null,[3,25];case 10:return t="There are no commits in the repository.",r=null,[3,25];case 11:return t="The path specified didn't match any files.",r=null,[3,25];case 12:return t="There isn't any user information configured for Git.",r=null,[3,25];case 13:return t="An unknown/invalid reference was specified. This is usually a branch, but it could be something else, such as a tag.",r=null,[3,25];case 14:return t="The branch specified already exists.",r=null,[3,25];case 15:return t="There was an unexpected merge conflict.",r=null,[3,25];case 16:return t="The upstream branch isn't set.",r=null,[3,25];case 17:return t="The HEAD is detached. You have a commit checked out, not a branch.",r=null,[3,25];case 18:return t="There are uncommitted changes.",r=null,[3,25];case 19:return t="This operation cannot be performed on a protected branch.",r=null,[3,25];case 20:return t="The push was rejected by the remote. This is usually because the remote has commits that aren't in the local repository.",r=null,[3,25];case 21:return t="The remote specified already exists.",r=null,[3,25];case 22:return t="The remote operation timed out.",r=null,[3,25];case 23:return t="There is already a Git repository in the Repl's root directory.",r=null,[3,25];case 24:return t="We ran into an unknown error that we don't have a description for. This is probably a bug with the app.",r=null,[3,25];case 25:return[2,{description:t,remedies:r,error:null}]}})}),function(e){return t.apply(this,arguments)}),[n],{refresh:!1});if(!r)return(0,U.tZ)(rB,{description:null,remedies:null,error:n});if(r.error)return(0,U.tZ)(rB,{description:"Unknown error from the Git service. This is probably a bug in the app.",remedies:null,error:n});var i=r.description,o=r.remedies;return(0,U.tZ)(rB,{description:i,remedies:o,error:n})}var rP=(0,z.X)({errorNotification:[{pointerEvents:"all"},J.l0.p(1),J.l0.backgroundColor.accentNegativeDimmer,J.l0.borderRadius(8),J.l0.shadow(3)],header:[J.l0.py(4),J.l0.px(8),J.l0.display.flex,J.l0.flex.row,J.l0.align.center,J.l0.justify.spaceBetween,J.l0.color.accentNegativeStrongest],headerText:[J.l0.rowWithGap(4),J.l0.align.center],errorType:[J.l0.font.code,{opacity:.75}],body:[J.l0.pt(4),J.l0.pb(8),J.l0.px(8),J.l0.colWithGap(8),J.l0.backgroundColor.backgroundHigher,J.l0.borderRadius(0,0,8,8)]});function rA(e){var t=e.error;return(0,U.BX)(H.G,{css:rP.errorNotification,children:[(0,U.BX)(H.G,{css:rP.header,children:[(0,U.BX)(H.G,{css:rP.headerText,children:[(0,U.tZ)(rg.Z,{}),(0,U.tZ)(V.xv,{variant:"subheadDefault",multiline:!1,children:function(e){switch(e.type){case to.aq.UNKNOWN_NOT_GIT:return"Unknown Error";case to.aq.UNKNOWN:return"Unknown Git Error";case to.aq.NOT_INITIALIZED:case to.aq.UNAUTHENTICATED:case to.aq.INDEX_FILE_CORRUPT:case to.aq.UNKNOWN_REMOTE:case to.aq.INDEX_LOCKED:case to.aq.NO_COMMITS:case to.aq.PATH_MATCHED_NO_FILES:case to.aq.USER_NOT_CONFIGURED:case to.aq.INVALID_REFERENCE:case to.aq.BRANCH_ALREADY_EXISTS:case to.aq.MERGE_CONFLICT:case to.aq.HEAD_DETACHED:case to.aq.DIRTY_WORKTREE:case to.aq.PUSH_REJECTED:case to.aq.PROTECTED_BRANCH:case to.aq.REMOTE_ALREADY_EXISTS:case to.aq.ALREADY_INITIALIZED:case to.aq.TIMEOUT:return"Git Error";default:return"Unknown Error"}}(t)})]}),(0,U.tZ)(V.xv,{css:rP.errorType,multiline:!1,children:t.type})]}),(0,U.tZ)(H.G,{css:rP.body,children:(0,U.tZ)(rG,{error:t})})]})}var rL=(0,z.X)({errorList:[{pointerEvents:"none"},{transition:"background-color 100ms"},J.l0.position.absolute,J.l0.top(0),J.l0.bottom(0),J.l0.left(0),J.l0.right(0),J.l0.p(8),J.l0.colWithGap(16),J.l0.zIndex(10)]});function rN(){var e=(0,nZ.Dv)(n_,{store:nk()});return(0,U.tZ)(H.G,{style:{backgroundColor:e.length>0?"rgba(0, 0, 0, 0.25)":"transparent"},css:rL.errorList,children:e.map(function(e){return(0,U.tZ)(rA,{error:e},e.id)})})}function rO(){return(0,U.BX)(H.G,{children:[(0,U.tZ)(V.xv,{multiline:!1,children:"Unsupported state: you are applying a mailbox patch."}),(0,U.tZ)(V.xv,{multiline:!1,children:"Please finish the patch manually."})]})}function rU(){return(0,U.BX)(H.G,{children:[(0,U.tZ)(V.xv,{multiline:!1,children:"Unsupported state: you are in the middle of a bisect."}),(0,U.tZ)(V.xv,{multiline:!1,children:"Please finish the bisect manually."})]})}var rX=n(58532),rM=n(4733),rF=n(14116),rW=n(379);function rV(){var e=(0,eK._)(["\n  query PushBranchButtonIsProjectRepl($id: String!) {\n    repl(id: $id) {\n      __typename\n      ... on Repl {\n        id\n        project {\n          id\n        }\n      }\n    }\n  }\n"]);return rV=function(){return e},e}var rH={},rz=(0,eQ.Ps)(rV()),rj=function(e){return"repl-".concat(e)},rq=function(e){var t=e.replId,n=e.branch;return"repl-".concat(t,"/").concat(n)},rJ=(a=(0,tM._)(function(e){var t,n,r,i,o,a,l,c;return(0,tF.Jh)(this,function(s){switch(s.label){case 0:return t=e.git,r=rj(n=e.replId),i="".concat(n,"@ssh.v1.replit.dev:."),[4,t.getRemotes()];case 1:if((o=s.sent()).error)return[2,o];if(!o.remotes.has(r))return[3,4];if(!((null===(a=o.remotes.get(r))||void 0===a?void 0:a.fetch)!==i))return[3,3];return[4,t.setRemoteURL({remote:r,url:i})];case 2:if((l=s.sent()).error)return[2,l];s.label=3;case 3:return[2,{error:null,remote:{name:r,url:i}}];case 4:return[4,t.addRemote({name:r,url:i,fetch:!0})];case 5:if((c=s.sent()).error&&c.error!==to.aq.REMOTE_ALREADY_EXISTS)return[2,c];return[2,{error:null,remote:{name:r,url:i}}]}})}),function(e){return a.apply(this,arguments)}),rY=n(43627),r$=n(69792),rK=(0,z.X)({modalContainer:[J.l0.colWithGap(24)],statusText:[J.l0.display.flex,J.l0.flex.row,J.l0.textAlign.left],settingsButton:[J.l0.reset.button,J.l0.linkStyle,J.l0.fontWeight.medium,J.l0.textAlign.left,J.l0.ml(4)]}),rQ=function(e){var t=e.onViewSettingsClick;return(0,U.tZ)("button",{css:rK.settingsButton,onClick:t,children:"Settings view."})};function r0(e){var t,n,r,i,o,a,l=e.branch,c=e.onViewSettingsClick,s=e.performPaneOperation,u=(0,N._)((0,ee.useState)(!1),2),d=u[0],f=u[1],h=(0,N._)((0,ee.useState)(!1),2),p=h[0],m=h[1],v=(0,N._)((0,ee.useState)(null),2),g=v[0],y=v[1],b=(0,N._)((0,ee.useState)(!1),2),w=b[0],Z=b[1],x=(0,r$.e)({controlName:rY.r}),C=(t={variables:{id:(0,e$.Z)()},skip:!x},n=(0,ep._)({},rH,t),e0.a(rz,n)).data,k=x&&(null==C?void 0:null===(i=C.repl)||void 0===i?void 0:i.__typename)==="Repl"&&(null===(o=C.repl.project)||void 0===o?void 0:o.id)||!1,S=nE(),_=(0,Y.Z)().git,E=(0,tW.Z)((r=(0,tM._)(function(e){var t,n,r,i,o,a,l;return(0,tF.Jh)(this,function(c){switch(c.label){case 0:return[4,e.isInitialized()];case 1:if((t=c.sent()).error)return S(t.error),tH({context:"publish-branch-button-initialized",gitService:e,result:t}),[2,{remote:null,error:t.error}];if(!t.initialized)return[2,{remote:null,error:null}];return[4,e.getRemotes()];case 2:if((n=c.sent()).error)return tH({context:"publish-branch-button-get-remotes",gitService:e,result:n}),S(n.error),[2,n];return r=function(e){if(!e||!e.size)return null;if(e.has("origin"))return"origin";var t=!0,n=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=(0,N._)(i.value,2),l=a[0];if(!({url:a[1].fetch}).url.endsWith(".replit.dev:."))return l}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return null}(n.remotes),[4,e.status()];case 3:if((i=c.sent()).error)return S(i.error),tH({context:"publish-branch-button-status",gitService:e,result:i}),[2,i];if(!(i.branch&&r))return[3,5];return o=(0,to.C)(i.branch),a="refs/remotes/".concat(r,"/").concat(o),[4,e.branchExists(a)];case 4:(l=c.sent()).error?(tH({context:"publish-branch-button-branch-exists",gitService:e,result:l,data:{upstream:o,fullRemoteRef:a}}),S(l.error)):l.exists&&y("".concat(r,"/").concat(o)),c.label=5;case 5:return[2,{remote:r,error:null}]}})}),function(e){return r.apply(this,arguments)}),[S],{keepStaleResult:!1});if((0,ee.useEffect)(function(){function e(){return(e=(0,tM._)(function(){var e;return(0,tF.Jh)(this,function(t){switch(t.label){case 0:if(!(w&&g))return[3,2];return[4,_.setBranchUpstream({upstream:g})];case 1:(e=t.sent()).error&&(tH({context:"publish-branch-button-set-branch-upstream",gitService:_,result:e,data:{upstream:g}}),S(e.error)),Z(!1),y(null),t.label=2;case 2:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[_,S,w,g]),null==E?void 0:E.error)return null;var T=E?E.remote:null,R=null===E,D=l.type!==to.HO.LOCAL||!T||w;function I(){return(I=(0,tM._)(function(){var e;return(0,tF.Jh)(this,function(t){switch(t.label){case 0:if(!T||d)return[2];if(g)return m(!0),[2];return f(!0),[4,_.push({publish:{remote:T}})];case 1:return(e=t.sent()).error?(f(!1),S(e.error),tH({context:"publish-branch-button-push",gitService:_,result:e,data:{remote:T}})):(_.forceRefresh(),(0,nq.J)("branch-published-to-remote")),[2]}})})).apply(this,arguments)}var B="".concat(T,"/").concat(l.name);return(a=d?"Pushing to '".concat(B,"'..."):l.type!==to.HO.LOCAL?"Branch has already been pushed to '".concat(B,"'"):R?"Checking if branch ".concat(l.name," can be pushed..."):T?"Push branch as '".concat(B,"'"):"No remotes to push to",k&&E&&!T)?(0,U.BX)(U.HY,{children:[(0,U.tZ)(eb.zx,{iconLeft:(0,U.tZ)(rW.D,{text:"Beta",variant:"outline",colorway:"blue"}),text:"Collaborate in the Project pane",onClick:function(){s({operation:"open",pane:{type:"project"}})},iconRight:(0,U.tZ)(rF.Z,{})}),(0,U.tZ)(V.xv,{color:"dimmer",children:"Use the Project pane to merge your changes between repls and collaborate with your teammates. You've received early access to this feature with your Replit Teams subscription."})]}):(0,U.BX)(U.HY,{children:[g?(0,U.tZ)(rX.u,{isOpen:p,onRequestClose:function(){return m(!1)},children:(0,U.BX)(H.G,{css:rK.modalContainer,children:[(0,U.tZ)(V.xv,{variant:"headerDefault",children:"Branch already exists"}),(0,U.tZ)(V.xv,{children:"Upstream branch '".concat(g,"' already exists.\n          To push the branch, please confirm you would like to set upstream branch to it.")}),(0,U.tZ)(eb.zx,{text:"Set upstream to '".concat(g,"'"),onClick:function(){g&&(Z(!0),m(!1))}})]})}):null,R||T?null:(0,U.tZ)(e6.E,{text:(0,U.tZ)(H.G,{css:rK.statusText,children:(0,U.BX)("span",{children:["No remote repositories configured. To push your changes, add a remote repository in the",(0,U.tZ)(rQ,{onViewSettingsClick:c})]})}),colorway:"warning",closable:!1}),(0,U.tZ)(eb.zx,{text:a,iconLeft:R||d?(0,U.tZ)(q.Z,{}):(0,U.tZ)(rM.Z,{}),onClick:function(){return I.apply(this,arguments)},loading:R||d,disabled:D})]})}var r1=n(27060),r2=(0,z.X)({remoteUrl:[{border:"none"},J.l0.height("auto"),J.l0.py(4),J.l0.px(8)]});function r3(e){var t=e.branch,n=e.remotes,r=(0,N._)((0,ee.useMemo)(function(){if(t.type===to.HO.LOCAL)return[null,null,null];var e=n.get(t.remote);if(!e)return[null,null,null];var r=rR(e),i=rD(e),o=rE(r);return[r,i,o]},[t,n]),3),i=r[0],o=r[1],a=r[2];return i&&o?(0,U.tZ)(ec.Z,{css:r2.remoteUrl,text:o,href:i,target:"_blank",iconLeft:a?(0,U.tZ)(rx.Z,{}):void 0,iconRight:(0,U.tZ)(r1.Z,{}),variant:"outlined",size:"small"}):null}var r4=n(84680),r8=n(78421),r6=(0,z.X)({warning:[J.l0.align.start],header:[J.l0.fontWeight.bold]});function r5(){return(0,U.BX)(U.HY,{children:[(0,U.tZ)(e6.E,{css:r6.warning,icon:(0,U.tZ)(rg.Z,{}),colorway:"warning",text:(0,U.BX)(U.HY,{children:[(0,U.tZ)("span",{css:r6.header,children:"Can't push or pull from GitHub"}),(0,U.tZ)("br",{}),(0,U.tZ)("span",{children:"This Repl has a GitHub repository as a remote, but you are not connected to GitHub."})]})}),(0,U.tZ)(rS,{})]})}var r7=n(2447),r9=(0,z.X)({text:[J.l0.flex.shrink(1)]});function ie(e){var t=e.date,n=(0,N._)((0,ee.useState)(null),2),r=n[0],i=n[1];return((0,ee.useEffect)(function(){if(t){var e=function(){var e=new Date,n="just now";e.getTime()-t.getTime()>6e4&&(n=(0,r7.Z)(t,e,{addSuffix:!0})),i(n=n.replace(/minutes?/,"min"))};e();var n=setInterval(e,6e4);return function(){clearInterval(n),i(null)}}},[t]),r)?(0,U.BX)(V.xv,{css:r9.text,color:"dimmest",variant:"small",multiline:!1,children:["last fetched ",r]}):null}function it(e){var t=e.hasRemoteMergeConflict,n=e.hasUnpulledCommits,r=e.hasUnpushedCommits,i=e.workTreeDirty,o=[];return i&&n&&o.push("Can't pull: you have uncommitted changes"),t&&(n||r)&&(n&&r?(i||o.push("Warning: pulling will start a merge with conflicts"),o.push("Can't push: unpulled changes must be merged first")):n?i||o.push("Warning: pulling will start a merge with conflicts"):r&&o.push("Can't push: merge conflict with remote")),o.length?(0,U.tZ)(U.HY,{children:o.map(function(e){return(0,U.tZ)(e6.E,{text:e,colorway:"warning",icon:(0,U.tZ)(rg.Z,{})},e)})}):null}var ir=(0,z.X)({divider:[J.l0.mx(8)]});function ii(e){var t=e.ahead,n=e.behind;if(!t&&!n)return(0,U.tZ)(V.xv,{color:"dimmest",multiline:!1,children:"Nothing to pull or push"});var r=null,i=null;if(n){var o=(0,eH.Z)("commit",n);r="".concat(n," ").concat(o," to pull")}if(t){var a=(0,eH.Z)("commit",t);i="".concat(t," ").concat(a," to push")}return(0,U.BX)(V.xv,{color:"dimmer",variant:"small",multiline:!1,children:[r?(0,U.tZ)("span",{children:r}):null,r&&i?(0,U.tZ)("span",{css:ir.divider,children:""}):null,i?(0,U.tZ)("span",{children:i}):null]})}var io=(0,z.X)({container:[J.l0.flex.grow(1)],branch:[J.l0.mr(4),J.l0.color.foregroundDefault,J.l0.fontWeight.medium,{"&:hover":{textDecoration:"underline"}}],divider:[J.l0.color.foregroundDimmest],text:[J.l0.ml(4),J.l0.color.foregroundDimmest]});function ia(e){var t=e.upstream,n=e.remotes,r=(0,ee.useMemo)(function(){return function(e,t){var n=null,r=null;if(e instanceof Map){var i=(0,to.Tg)(t),o=i[0];if(n=i[1],!o||!n)return null;var a=e.get(o);if(!a)return null;r=rR(a)}else n=t,r=rR(e);return r&&rE(r)?"".concat(r,"/tree/").concat(n):null}(n,t)},[t,n]);return(0,U.BX)(V.xv,{css:io.container,variant:"small",multiline:!1,children:[r?(0,U.tZ)("a",{css:io.branch,href:r,target:"_blank",children:t}):(0,U.tZ)("span",{css:io.branch,children:t}),(0,U.tZ)("span",{css:io.divider,children:""}),(0,U.tZ)("span",{css:io.text,children:"upstream"})]})}function il(e){return ic.apply(this,arguments)}function ic(){return(ic=(0,tM._)(function(e){var t,n;return(0,tF.Jh)(this,function(r){switch(r.label){case 0:return t=null,[4,Promise.race([e,new Promise(function(e){return t=setTimeout(function(){tV.$e(function(e){e.setTag("gitPane",!0),tV.Tb(Error("Remote update operation timed out"))}),e({error:to.aq.TIMEOUT})},9e4)})])];case 1:return n=r.sent(),t&&clearTimeout(t),[2,n]}})})).apply(this,arguments)}var is=(0,z.X)({container:[J.l0.borderRadius(8)],loading:[J.l0.height(64),ez.p.backgroundPulse(),J.l0.borderRadius(8)],header:[J.l0.py(4),J.l0.px(8),J.l0.rowWithGap(8),J.l0.align.center,J.l0.flex.shrink(1),J.l0.border({color:J.TV.outlineDimmer,direction:"bottom"})],fetch:{border:"none"},body:[J.l0.px(8),J.l0.pt(8),J.l0.pb(12),J.l0.colWithGap(8)],buttons:[J.l0.rowWithGap(8),J.l0.flex.grow(1)],sync:[J.l0.flex.grow(1)],pullPush:[J.l0.flex.row],pull:[J.l0.pr(12),J.l0.borderRadius(8,0,0,8),J.l0.border({color:J.TV.outlineDefault,direction:"right"})],push:[J.l0.borderRadius(0,8,8,0)]});function iu(e){var t=e.remotes,n=e.gotoPendingState,r=nE(),i=function(e){var t,n=e.onError,r=e.onPullConflicts,i=(0,N._)((0,ee.useState)(!1),2),o=i[0],a=i[1],l=(0,N._)((0,ee.useState)(!1),2),c=l[0],s=l[1],u=(0,N._)((0,ee.useState)(!1),2),d=u[0],f=u[1],h=(0,N._)((0,ee.useState)(!1),2),p=h[0],m=h[1],v=(0,Y.Z)().git,g=(0,tW.Z)((t=(0,tM._)(function(e){var t,n,r,i,o,a,l,c,s,u,d,f,h,p,m,v,g,y;return(0,tF.Jh)(this,function(b){switch(b.label){case 0:return i={upstream:null,hasUnpulledCommits:!1,hasUnpushedCommits:!1,hasRemoteMergeConflict:!1,pullMode:to.Tt.FF_ONLY,canPull:!1,canPush:!1,workTreeDirty:!1,needGitHubConnection:!1,ahead:0,behind:0,lastFetched:null},[4,e.getRepositoryState()];case 1:if((o=b.sent()).error)return[2,o];if(a=o.state,o.type!==to.y5.NORMAL)return[2,{error:to.aq.INVALID_STATE}];return(a===to.yG.DIRTY_WORKTREE||a===to.yG.DIRTY_INDEX)&&(i.workTreeDirty=!0),[4,e.status()];case 2:if((l=b.sent()).error)return[2,l];if(c=l.branch,s=null===(t=l.upstream)||void 0===t?void 0:t.branch,d=null!==(u=null===(n=l.upstream)||void 0===n?void 0:n.ahead)&&void 0!==u?u:0,h=null!==(f=null===(r=l.upstream)||void 0===r?void 0:r.behind)&&void 0!==f?f:0,!c)return[2,{error:to.aq.HEAD_DETACHED}];if(i.ahead=d,i.behind=h,!s)return[3,7];return i.upstream=s,i.hasUnpulledCommits=h>0,i.hasUnpushedCommits=d>0,[4,e.lastFetched()];case 3:if((p=b.sent()).error)return[2,p];return i.lastFetched=p.lastFetched,[4,e.canMergeBranches(c,s)];case 4:if((m=b.sent()).error)return[2,m];if(m.canMerge||(i.hasRemoteMergeConflict=!0),e.hasProfile(to.rG.GITHUB))return[3,6];if(!(v=(0,to.CH)(s)))return[2,{error:to.aq.INVALID_REFERENCE}];return[4,e.getRemotes()];case 5:if((g=b.sent()).error)return[2,g];if(!(y=g.remotes.get(v)))return[2,{error:to.aq.INVALID_REFERENCE}];rE(y)&&(i.needGitHubConnection=!0),b.label=6;case 6:i.workTreeDirty||i.needGitHubConnection||(i.canPull=!0),!i.hasUnpushedCommits||i.hasUnpulledCommits||i.needGitHubConnection||(i.canPush=!0),d>0&&(i.pullMode=i.hasRemoteMergeConflict?to.Tt.MERGE:to.Tt.REBASE),b.label=7;case 7:return[2,(0,em._)((0,ep._)({},i),{error:null})]}})}),function(e){return t.apply(this,arguments)}));if(!g)return{type:"loading"};if(g.error||!g.upstream)return{type:"error",error:g.error};if(!g.upstream)return{type:"noUpstream"};var y=g.upstream,b=g.hasUnpulledCommits,w=g.hasUnpushedCommits,Z=g.hasRemoteMergeConflict,x=g.pullMode,C=g.canPull,k=g.canPush,S=g.workTreeDirty,_=g.needGitHubConnection,E=g.ahead,T=g.behind,R=g.lastFetched;if(_)return{type:"needGitHubConnection",upstream:y};var D=o||c||d||p,I=!y||_||D,B=!C||D,G=!k||D,P=!C&&!k||Z||D;function A(){return(A=(0,tM._)(function(){var e;return(0,tF.Jh)(this,function(t){switch(t.label){case 0:if(I)return[2];return a(!0),[4,il(v.fetch())];case 1:return e=t.sent(),v.forceRefresh(),a(!1),e.error?n(e.error):(0,nq.J)("remote-fetched"),[2]}})})).apply(this,arguments)}function L(){return(L=(0,tM._)(function(){var e;return(0,tF.Jh)(this,function(t){switch(t.label){case 0:if(B)return[2];return s(!0),[4,il(v.pull({mode:x,allowConflicts:!0}))];case 1:return e=t.sent(),s(!1),e.error?n(e.error):(e.hasConflicts&&r(),v.forceRefresh(),(0,nq.J)("upstream-pulled")),[2]}})})).apply(this,arguments)}function O(){return(O=(0,tM._)(function(){var e;return(0,tF.Jh)(this,function(t){switch(t.label){case 0:if(G)return[2];return f(!0),[4,il(v.push())];case 1:return e=t.sent(),v.forceRefresh(),f(!1),e.error?n(e.error):(0,nq.J)("upstream-pushed"),[2]}})})).apply(this,arguments)}function U(){return(U=(0,tM._)(function(){var e,t;return(0,tF.Jh)(this,function(r){switch(r.label){case 0:if(P)return[2];if(m(!0),!C)return[3,2];return[4,il(v.pull({mode:x}))];case 1:if((e=r.sent()).error)return n(e.error),m(!1),[2];(0,nq.J)("upstream-pulled"),r.label=2;case 2:if(!k)return[3,4];return[4,v.push()];case 3:if((t=r.sent()).error)return n(t.error),m(!1),[2];(0,nq.J)("upstream-pushed"),r.label=4;case 4:return v.forceRefresh(),m(!1),[2]}})})).apply(this,arguments)}return{type:"remote",fetch:function(){return A.apply(this,arguments)},fetching:o,fetchDisabled:I,lastFetched:R,pull:function(){return L.apply(this,arguments)},pulling:c,pullDisabled:B,pullMode:x,canPull:C,push:function(){return O.apply(this,arguments)},pushing:d,pushDisabled:G,canPush:k,sync:function(){return U.apply(this,arguments)},syncing:p,syncDisabled:P,upstream:y,hasUnpulledCommits:b,hasUnpushedCommits:w,hasRemoteMergeConflict:Z,workTreeDirty:S,ahead:E,behind:T}}({onError:r,onPullConflicts:n}),o="error"===i.type?i.error:null;return((0,ee.useEffect)(function(){o&&r(o)},[o,r]),"loading"===i.type)?(0,U.tZ)(ew.Tg,{css:is.loading,elevated:!0}):"error"===i.type||"noUpstream"===i.type?null:"needGitHubConnection"===i.type?(0,U.BX)(ew.Tg,{css:is.container,elevated:!0,children:[(0,U.BX)(H.G,{css:is.header,children:[(0,U.tZ)(ia,{upstream:i.upstream,remotes:t}),(0,U.tZ)(eb.zx,{css:is.fetch,text:"Fetch",iconLeft:(0,U.tZ)(rr.Z,{}),disabled:!0,variant:"outlined",size:"small"})]}),(0,U.tZ)(H.G,{css:is.body,children:(0,U.tZ)(r5,{})})]}):(0,U.BX)(ew.Tg,{css:is.container,elevated:!0,children:[(0,U.BX)(H.G,{css:is.header,children:[(0,U.tZ)(ia,{upstream:i.upstream,remotes:t}),(0,U.tZ)(ie,{date:i.lastFetched}),(0,U.tZ)(eb.zx,{css:is.fetch,text:"Fetch",iconLeft:i.fetching?(0,U.tZ)(q.Z,{}):(0,U.tZ)(rr.Z,{}),onClick:i.fetch,loading:i.fetching,disabled:i.fetchDisabled,variant:"outlined",size:"small"})]}),(0,U.BX)(H.G,{css:is.body,children:[(0,U.tZ)(it,{hasRemoteMergeConflict:i.hasRemoteMergeConflict,hasUnpulledCommits:i.hasUnpulledCommits,hasUnpushedCommits:i.hasUnpushedCommits,workTreeDirty:i.workTreeDirty}),(0,U.tZ)(ii,{ahead:i.ahead,behind:i.behind}),(0,U.BX)(H.G,{css:is.buttons,children:[(0,U.tZ)("div",{css:is.sync,children:(0,U.tZ)(tU.u,{tooltip:"Pull & push the latest changes",children:(0,U.tZ)(eb.zx,{css:is.sync,text:"Sync with Remote",iconLeft:i.syncing?(0,U.tZ)(q.Z,{}):(0,U.tZ)(r4.Z,{rotate:90}),onClick:i.sync,loading:i.syncing,disabled:i.syncDisabled,size:"small"})})}),(0,U.BX)(H.G,{css:is.pullPush,children:[(0,U.tZ)(eb.zx,{css:is.pull,text:"Pull",iconLeft:i.pulling?(0,U.tZ)(q.Z,{}):(0,U.tZ)(j.Z,{}),onClick:i.pull,loading:i.pulling,disabled:i.pullDisabled,size:"small"}),(0,U.tZ)(eb.zx,{css:is.push,text:"Push",iconLeft:i.pushing?(0,U.tZ)(q.Z,{}):(0,U.tZ)(r8.Z,{}),onClick:i.push,loading:i.pushing,disabled:i.pushDisabled,size:"small"})]})]})]})]})}var id=function(e,t,n){var r=new Set,i=!0,o=!1,a=void 0;try{for(var l,c=t[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;r.add(s.hash)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}var u=!0,d=!1,f=void 0;try{for(var h,p=n[Symbol.iterator]();!(u=(h=p.next()).done);u=!0){var m=h.value;r.add(m.hash)}}catch(e){d=!0,f=e}finally{try{u||null==p.return||p.return()}finally{if(d)throw f}}return e.filter(function(e){return!r.has(e.hash)})},ih=n(84e3),ip=n(918),im=(0,z.X)({path:[J.l0.rowWithGap(8),J.l0.flex.growAndShrink(1),J.l0.align.center],source:[J.l0.color.foregroundDimmest],sourceArrow:[J.l0.mx(8)]});function iv(e){var t=e.path,n=e.prefix,r=e.source,i=e.onClick;return(0,U.BX)(H.G,{css:im.path,children:[(0,U.tZ)(W.Z,{path:t}),(0,U.BX)(V.xv,{multiline:!1,children:[(0,U.tZ)(nJ.yx,{path:t,prefix:n,onClick:i}),r?(0,U.BX)("span",{css:im.source,children:[(0,U.tZ)("span",{css:im.sourceArrow,children:""}),(0,U.tZ)(nJ.yx,{path:r})]}):null]})]})}var ig=(0,z.X)({container:[J.l0.colWithGap(8)],buttons:[J.l0.rowWithGap(8),J.l0.justify.end],restoringBoth:[J.l0.colWithGap(12)],listContainer:[J.l0.colWithGap(4)],list:[J.l0.px(4),J.l0.colWithGap(2)]});function iy(e){var t=e.show,n=e.files,r=e.pathMap,i=e.callback,o=(0,tb.Z)(i),a=(0,ee.useCallback)(function(){var e;null===(e=o.current)||void 0===e||e.call(o,!0)},[o]),l=(0,ee.useCallback)(function(){var e;null===(e=o.current)||void 0===e||e.call(o,!1)},[o]);return(0,U.tZ)(rX.u,{isOpen:t,onRequestClose:l,children:t?(0,U.BX)(H.G,{css:ig.container,children:[(0,U.BX)(V.h4,{level:2,children:["Discard ",(0,eH.Z)("Change",n.length)]}),(0,U.tZ)(ib,{files:n,pathMap:r}),(0,U.BX)(H.G,{css:ig.buttons,children:[(0,U.tZ)(eb.zx,{text:"Cancel",iconLeft:(0,U.tZ)(ih.Z,{}),onClick:l}),(0,U.tZ)(eb.zx,{text:"Discard ".concat((0,eH.Z)("Change",n.length)),iconLeft:(0,U.tZ)(ip.Z,{}),colorway:"negative",onClick:a})]})]}):null})}function ib(e){var t=e.files,n=e.pathMap,r=[],i=[],o=!0,a=!1,l=void 0;try{for(var c,s=t[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value;u.type.worktree===to.hF.UNTRACKED?i.push(u):r.push(u)}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return!r.length&&i.length?(0,U.BX)(H.G,{css:ig.listContainer,children:[(0,U.tZ)(V.xv,{children:1===i.length?"Do you want to permanently delete this file?":"Do you want to permanently delete these files?"}),(0,U.tZ)(iw,{files:i,pathMap:n})]}):r.length&&!i.length?(0,U.BX)(H.G,{css:ig.listContainer,children:[(0,U.tZ)(V.xv,{children:1===r.length?"Do you want to undo the changes to this file?":"Do you want to undo the changes to these files?"}),(0,U.tZ)(iw,{files:r,pathMap:n})]}):(0,U.BX)(H.G,{css:ig.restoringBoth,children:[r.length?(0,U.BX)(H.G,{css:ig.listContainer,children:[(0,U.BX)(V.h4,{level:3,children:["Tracked ",(0,eH.Z)("File",r.length)]}),(0,U.tZ)(V.xv,{multiline:!1,children:1===r.length?"This file will have its changes undone.":"These files will have their changes undone."}),(0,U.tZ)(iw,{files:r,pathMap:n})]}):null,i.length?(0,U.BX)(H.G,{css:ig.listContainer,children:[(0,U.BX)(V.h4,{level:3,children:["Untracked ",(0,eH.Z)("File",i.length)]}),(0,U.tZ)(V.xv,{multiline:!1,children:1===i.length?"This file will be permanently deleted.":"These files will be permanently deleted."}),(0,U.tZ)(iw,{files:i,pathMap:n})]}):null]})}function iw(e){var t=e.files,n=e.pathMap,r=(0,ee.useMemo)(function(){return t.length>20?t.slice(0,20):t},[t]);return(0,U.tZ)(H.G,{children:(0,U.BX)("ul",{css:ig.list,children:[r.map(function(e){var t;return(0,U.tZ)("li",{children:(0,U.tZ)(iv,{path:e.path,prefix:n.get(e.path),source:null===(t=e.source)||void 0===t?void 0:t.path})},e.path)}),t.length<=20?null:(0,U.tZ)("li",{children:(0,U.BX)(V.xv,{color:"dimmer",children:["... ",t.length-20," more"," ",(0,eH.Z)("file",t.length-20)]})})]})})}function iZ(e){var t=(0,N._)((0,ee.useState)(function(){return{show:!1,files:[]}}),2),n=t[0],r=t[1];return{openRestoreConfirmationModal:(0,ee.useCallback)(function(e){return new Promise(function(t){0===e.length&&t(!1),r({show:!0,files:e,callback:function(e){r({show:!1,files:[],callback:void 0}),t(e)}})})},[]),restoreConfirmationModal:(0,ee.useMemo)(function(){return(0,U.tZ)(iy,(0,em._)((0,ep._)({},n),{pathMap:e}))},[n,e])}}var ix=n(6696),iC=(0,z.X)({actionsIndex:[J.l0.height(24),J.l0.align.center,J.l0.borderRadius(4)],actionsWorktree:[J.l0.height(24),J.l0.flex.row,J.l0.align.center,J.l0.borderRadius(4)],unstage:[J.l0.height(24),J.l0.width(24),J.l0.borderRadius(2)],stage:[J.l0.px(12),J.l0.height(24),J.l0.width(24),J.l0.borderRadius(2)],discard:[J.l0.pl(16),J.l0.pr(12),J.l0.height(24),J.l0.width(24),J.l0.borderRadius(2)],discardIcon:{transform:"scale(0.85)"},divider:[J.l0.height("75%"),J.l0.width(1),J.l0.backgroundColor.outlineStronger]});function ik(e){var t=e.file,n=e.list,r=e.stageFiles,i=e.restoreFiles,o=e.disabled,a=void 0!==o&&o,l=(0,N._)((0,ee.useState)(!1),2),c=l[0],s=l[1],u=(0,N._)((0,ee.useState)(!1),2),d=u[0],f=u[1];function h(){return(h=(0,tM._)(function(){return(0,tF.Jh)(this,function(e){switch(e.label){case 0:if(a)return[2];return s(!0),[4,r({reset:[t.path]})];case 1:return e.sent(),s(!1),[2]}})})).apply(this,arguments)}function p(){return(p=(0,tM._)(function(){return(0,tF.Jh)(this,function(e){switch(e.label){case 0:if(a)return[2];return s(!0),[4,r({add:[t.path]})];case 1:return e.sent(),s(!1),[2]}})})).apply(this,arguments)}function m(){return(m=(0,tM._)(function(){return(0,tF.Jh)(this,function(e){switch(e.label){case 0:if(a||"worktree"!==n)return[2];return f(!0),[4,i(t.path)];case 1:return e.sent(),f(!1),[2]}})})).apply(this,arguments)}return a=a||d||c,"index"===n?(0,U.tZ)(ew.Tg,{elevated:!0,css:iC.actionsIndex,children:(0,U.tZ)(F.hU,{css:iC.unstage,alt:"Unstage changes",size:18,tooltipDelay:"long",onClick:function(){return h.apply(this,arguments)},disabled:a,children:c?(0,U.tZ)(q.Z,{}):(0,U.tZ)(ix.Z,{})})}):(0,U.BX)(ew.Tg,{elevated:!0,css:iC.actionsWorktree,children:[(0,U.tZ)(F.hU,{css:iC.discard,alt:"Discard changes",size:18,tooltipDelay:"long",onClick:function(){return m.apply(this,arguments)},disabled:a,children:d?(0,U.tZ)(q.Z,{}):(0,U.tZ)(ip.Z,{css:iC.discardIcon})}),(0,U.tZ)("div",{css:iC.divider}),(0,U.tZ)(F.hU,{css:iC.stage,alt:"Stage changes",size:18,tooltipDelay:"long",onClick:function(){return p.apply(this,arguments)},disabled:a,children:c?(0,U.tZ)(q.Z,{}):(0,U.tZ)(nA.Z,{})})]})}var iS=(0,z.X)({modifiedFile:[J.l0.py(2),J.l0.rowWithGap(4),J.l0.align.center]});function i_(e){var t,n=e.file,r=e.list,i=e.stageFiles,o=e.restoreFiles,a=e.pathMap,l=e.disabled,c=e.onFilePathClick,s=null==a?void 0:a.get(n.path),u=null===(t=n.source)||void 0===t?void 0:t.path,d="index"===r?n.type.index:n.type.worktree,f=(0,eh.Z)(function(){if(d!==to.hF.DELETED)return function(){return c({path:n.path})}},[n.path,c,d]);return(0,U.BX)(H.G,{css:iS.modifiedFile,children:[(0,U.tZ)(iv,{path:n.path,prefix:s,source:u,onClick:f}),(0,U.tZ)(tE,{type:d}),(0,U.tZ)(ik,{file:n,list:r,stageFiles:i,restoreFiles:o,disabled:void 0!==l&&l})]})}var iE=(0,z.X)({actions:[J.l0.rowWithGap(2),J.l0.backgroundColor.backgroundHighest,J.l0.borderRadius(8)],buttonDiscard:[J.l0.borderRadius(8,0,0,8)],buttonStage:[J.l0.borderRadius(0,8,8,0)],divider:[J.l0.my(8),J.l0.width(1),J.l0.backgroundColor.outlineStronger]});function iT(e){var t=e.type,n=e.stageFiles,r=e.restoreFiles,i=e.disabled,o=void 0!==i&&i,a=(0,N._)((0,ee.useState)(!1),2),l=a[0],c=a[1],s=(0,N._)((0,ee.useState)(!1),2),u=s[0],d=s[1];function f(){return h.apply(this,arguments)}function h(){return(h=(0,tM._)(function(){return(0,tF.Jh)(this,function(e){switch(e.label){case 0:if(o)return[2];return c(!0),[4,n({all:"index"!==t})];case 1:return e.sent(),c(!1),[2]}})})).apply(this,arguments)}function p(){return(p=(0,tM._)(function(){return(0,tF.Jh)(this,function(e){switch(e.label){case 0:if(o||"worktree"!==t)return[2];return d(!0),[4,r(!0)];case 1:return e.sent(),d(!1),[2]}})})).apply(this,arguments)}return o=o||u||l,"index"===t?(0,U.tZ)(eb.zx,{text:"Unstage All",iconLeft:l?(0,U.tZ)(q.Z,{}):(0,U.tZ)(ix.Z,{}),onClick:f,disabled:o,loading:l,size:"small"}):(0,U.BX)(H.G,{css:iE.actions,children:[(0,U.tZ)(eb.zx,{css:iE.buttonDiscard,text:"Discard All",iconLeft:u?(0,U.tZ)(q.Z,{}):(0,U.tZ)(ip.Z,{}),onClick:function(){return p.apply(this,arguments)},disabled:o,loading:u,size:"small"}),(0,U.tZ)("div",{css:iE.divider}),(0,U.tZ)(eb.zx,{css:iE.buttonStage,text:"Stage All",iconLeft:l?(0,U.tZ)(q.Z,{}):(0,U.tZ)(nA.Z,{}),onClick:f,disabled:o,loading:l,size:"small"})]})}var iR=(0,z.X)({list:[J.l0.pt(4),J.l0.pb(8),J.l0.colWithGap(4)],listFolded:[J.l0.py(4)],header:[J.l0.px(8),J.l0.rowWithGap(4),J.l0.align.center],headerFoldable:[J.l0.py(4),J.l0.pl(4),J.l0.pr(8),J.l0.rowWithGap(4),J.l0.align.center],headerText:[J.l0.flex.grow(1)],body:[J.l0.px(8),J.l0.maxHeight("25vh"),J.l0.overflowY("auto")]});function iD(e){var t,n=e.files,r=e.type,i=e.stageFiles,o=e.restoreFiles,a=e.onFilePathClick,l=e.pathMap,c=e.foldable,s=void 0!==c&&c,u=e.disabled,d=void 0!==u&&u,f=(0,N._)((0,ee.useState)(!1),2),h=f[0],p=f[1],m=(0,ee.useRef)(null),v=(0,ee.useRef)(null),g=(0,nR.MG)({count:n.length,getScrollElement:function(){return v.current},getItemKey:function(e){return n[e].path},estimateSize:function(){return 28},overscan:20}),y=g.getVirtualItems();return s&&h?(0,U.tZ)(H.G,{css:iR.listFolded,children:(0,U.BX)(H.G,{css:s?iR.headerFoldable:iR.header,children:[(0,U.tZ)(iI,{files:n,type:r,setFolded:p,foldable:!0,folded:!0}),(0,U.tZ)(iT,{type:r,stageFiles:i,restoreFiles:o,disabled:d})]})}):(0,U.BX)(H.G,{innerRef:m,css:iR.list,children:[(0,U.BX)(H.G,{css:s?iR.headerFoldable:iR.header,children:[(0,U.tZ)(iI,{files:n,type:r,setFolded:p,foldable:s}),(0,U.tZ)(iT,{type:r,stageFiles:i,restoreFiles:o,disabled:d})]}),(0,U.tZ)(H.K.div,{ref:v,css:iR.body,children:(0,U.tZ)("div",{style:{minHeight:g.getTotalSize()},children:(0,U.tZ)("div",{style:{transform:"translateY(".concat(null===(t=y[0])||void 0===t?void 0:t.start,"px)"),willChange:"transform"},children:y.map(function(e){var t=n[e.index];return(0,U.tZ)("div",{"data-index":e.index,children:(0,U.tZ)(i_,{file:t,list:r,stageFiles:i,restoreFiles:o,onFilePathClick:a,pathMap:l,disabled:d},t.path)},e.key)})})})})]})}function iI(e){var t=e.files,n=e.type,r=e.setFolded,i=e.foldable,o=void 0!==i&&i,a=e.folded,l=(0,eH.Z)("file",t.length),c="".concat(t.length," ").concat("index"===n?"staged":"changed"," ").concat(l);return o&&void 0!==a&&a?(0,U.BX)(U.HY,{children:[(0,U.tZ)(F.hU,{alt:"Show list",onClick:function(){return r(!1)},children:(0,U.tZ)(tk.Z,{})}),(0,U.tZ)(V.xv,{css:iR.headerText,multiline:!1,children:c})]}):(0,U.BX)(U.HY,{children:[o?(0,U.tZ)(F.hU,{alt:"Hide list",onClick:function(){return r(!0)},children:(0,U.tZ)(tS.Z,{color:J.TV.foregroundDimmest})}):null,(0,U.tZ)(V.xv,{css:iR.headerText,color:"dimmest",multiline:!1,children:c})]})}var iB=n(73551),iG=[{"& > span:first-child":[J.l0.flex.grow(1),J.l0.textAlign.left]},{"& > span":[J.l0.flex.shrink(1)]}],iP=(0,z.X)({buttonFolded:[iG,J.l0.height("auto"),J.l0.py(8),J.l0.fontWeight.medium],buttonUnfolded:[iG,J.l0.height("auto"),J.l0.py(8),J.l0.fontWeight.medium,J.l0.border({color:J.TV.outlineDimmer,direction:"bottom"}),J.l0.borderRadius(8,8,0,0)],container:[J.l0.flex.grow(1),J.l0.borderRadius(8)],lists:[J.l0.borderRadius(0,0,8,8)],divider:[J.l0.height(1),J.l0.minHeight(1),J.l0.width("100%"),J.l0.backgroundColor.outlineDimmer],autoStageMessage:[J.l0.pt(4),J.l0.pb(8),J.l0.px(4),J.l0.center],noChangesMessage:[J.l0.py(16),J.l0.px(4),J.l0.center],buttonText:[J.l0.flex.grow(1)],details:[J.l0.rowWithGap(4),J.l0.fontWeight.normal,J.l0.color.foregroundDimmest]});function iA(e){var t,n,r=e.status,i=e.stageFiles,o=e.restoreFiles,a=e.onStagedFileClick,l=e.disabled,c=void 0!==l&&l,s=(0,N._)((0,ee.useState)(!1),2),u=s[0],d=s[1],f=(0,N._)((0,ee.useState)(!1),2),h=f[0],p=f[1],m=(0,N._)((0,ee.useState)(!1),2),v=m[0],g=m[1],y=(0,ee.useMemo)(function(){return(0,iB.w)(r.changes.map(function(e){return e.path}))},[r]),b=(0,N._)((0,ee.useMemo)(function(){var e=[],t=[],n=!0,i=!1,o=void 0;try{for(var a,l=r.changes[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=a.value;c.staged&&e.push(c),c.type.worktree!==to.hF.UNMODIFIED&&t.push(c)}}catch(e){i=!0,o=e}finally{try{n||null==l.return||l.return()}finally{if(i)throw o}}return[e,t]},[r.changes]),2),w=b[0],Z=b[1],x=w.length>0&&Z.length>0,C=iZ(y),k=C.openRestoreConfirmationModal,S=C.restoreConfirmationModal,_=(0,ee.useCallback)((t=(0,tM._)(function(e){return(0,tF.Jh)(this,function(t){switch(t.label){case 0:if(!("all"in e))return[3,2];return p(!0),[4,i(e)];case 1:return t.sent(),p(!1),[3,4];case 2:return[4,i(e)];case 3:t.sent(),t.label=4;case 4:return[2]}})}),function(e){return t.apply(this,arguments)}),[i]),E=(0,ee.useCallback)((n=(0,tM._)(function(e){var t,n;return(0,tF.Jh)(this,function(r){switch(r.label){case 0:if(!0!==e)return[3,4];return g(!0),[4,k(Z)];case 1:if(!r.sent())return[3,3];return[4,o(e)];case 2:r.sent(),r.label=3;case 3:return g(!1),[3,8];case 4:if("string"==typeof e){if(!(n=Z.find(function(t){return t.path===e})))throw g(!1),Error("Could not find file in worktree list");t=[n]}else t=Z.filter(function(t){return e.includes(t.path)});return[4,k(t)];case 5:if(!r.sent())return[3,7];return[4,o(e)];case 6:r.sent(),r.label=7;case 7:g(!1),r.label=8;case 8:return[2]}})}),function(e){return n.apply(this,arguments)}),[k,o,Z]);return u?(0,U.tZ)(iL,{setFolded:d,changeCount:Z.length,stagedCount:w.length,disabled:c,folded:!0}):0===w.length&&0===Z.length?(0,U.BX)(H.G,{style:{opacity:c?.725:void 0},css:iP.container,children:[(0,U.tZ)(iL,{setFolded:d,changeCount:Z.length,stagedCount:w.length,disabled:c}),(0,U.tZ)(ew.Tg,{css:iP.lists,elevated:!0,children:(0,U.tZ)(H.G,{css:iP.noChangesMessage,children:(0,U.tZ)(V.xv,{color:"dimmest",multiline:!1,children:"No changed or staged files."})})})]}):(0,U.BX)(U.HY,{children:[(0,U.BX)(H.G,{style:{opacity:c?.725:void 0},css:iP.container,children:[(0,U.tZ)(iL,{setFolded:d,changeCount:Z.length,stagedCount:w.length,disabled:c}),(0,U.BX)(ew.Tg,{css:iP.lists,elevated:!0,children:[0===w.length?null:(0,U.tZ)(iD,{type:"index",files:w,stageFiles:_,restoreFiles:E,onFilePathClick:a,pathMap:y,foldable:x,disabled:c||h||v}),x?(0,U.tZ)("div",{css:iP.divider}):null,0===Z.length?null:(0,U.BX)(U.HY,{children:[(0,U.tZ)(iD,{type:"worktree",files:Z,stageFiles:_,restoreFiles:E,onFilePathClick:a,pathMap:y,foldable:x,disabled:c||h||v}),x?null:(0,U.tZ)(H.G,{css:iP.autoStageMessage,children:(0,U.tZ)(V.xv,{variant:"small",color:"dimmest",multiline:!1,children:"Committing will automatically stage your changes."})})]})]})]}),S]})}function iL(e){var t=e.folded,n=void 0!==t&&t,r=e.setFolded,i=e.changeCount,o=e.stagedCount,a=e.disabled;return(0,U.tZ)(eb.zx,{css:n?iP.buttonFolded:iP.buttonUnfolded,text:"Review Changes",secondaryText:(0,U.tZ)(iN,{folded:n,changeCount:i,stagedCount:o}),onClick:function(){return r(!n)},iconRight:n?(0,U.tZ)(tk.Z,{}):(0,U.tZ)(tS.Z,{}),disabled:void 0!==a&&a,size:"small"})}function iN(e){var t=e.folded,n=e.changeCount,r=e.stagedCount;if(!t)return null;var i=n>0,o=r>0;return i||o?(0,U.BX)("span",{css:iP.details,children:[i?(0,U.BX)("span",{children:[n," ",(0,eH.Z)("change",n)]}):null,i&&o?(0,U.tZ)("span",{children:"/"}):null,o?(0,U.BX)("span",{children:[r," staged"]}):null]}):(0,U.tZ)("span",{css:iP.details,children:(0,U.tZ)("span",{children:"no changes"})})}var iO=n(90169),iU=n(28949),iX=n(97432),iM=n(14074),iF=n(23271),iW=n(85551),iV=n(41844),iH=n(31252),iz=n(10126),ij={height:32,width:"100%",resize:"none",border:"none"},iq={width:"100%",resize:"none",border:"none"},iJ=(0,z.X)({surface:[J.l0.p(8),J.l0.colWithGap(12),J.l0.borderRadius(0,0,8,8)],button:[J.l0.height("auto"),J.l0.py(8),J.l0.fontWeight.medium,J.l0.borderRadius(8,8,0,0),J.l0.justify.start,J.l0.border({color:J.TV.outlineDimmer,direction:"bottom"}),{"> span:first-child":{flexGrow:1,textAlign:"start"}}],requiredText:[J.l0.display.inlineFlex,J.l0.rowWithGap(4)],subjectField:[J.l0.colWithGap(8)],subjectFieldHeader:[J.l0.flex.row,J.l0.center,J.l0.justify.spaceBetween],bodyField:[J.l0.colWithGap(8)],subjectInput:ij,bodyInput:iq,subjectInputDisabled:[ij,{opacity:.5}],bodyInputDisabled:[iq,{opacity:.5}],required:[J.l0.color.accentNegativeStronger],keyCombo:[J.l0.display.inlineFlex,J.l0.rowWithGap(4),J.l0.flex.grow(1),J.l0.align.center],keyComboText:[J.l0.fontWeight.normal,J.l0.color.foregroundDimmest]});function iY(e){var t=e.message,n=e.disabled,r=void 0!==n&&n,i=e.onMessageChange,o=e.onCommitShortcut,a=(0,N._)((0,ee.useState)(!0),2),l=a[0],c=a[1],s=(0,N._)((0,ee.useState)(!1),2),u=s[0],d=s[1],f=(0,N._)((0,ee.useState)(!1),2),h=f[0],p=f[1],m=(0,ee.useRef)(null),v=(0,ee.useRef)(null),g=(0,ev._)(t.split("\n\n")),y=g[0],b=void 0===y?"":y,w=g.slice(1).join("\n\n"),Z=(0,iX.d)();function x(e,t){i((e=e.replaceAll("\n"," "))+(t?"\n\n"+t:""))}var C=(0,iH.gf)(iV.CN.gitCommit.id);return(0,iz.ow)(iV.CT,h),(0,iH.Il)(function(){return[iV.CN.gitCommit.id,{run:function(){null==o||o()},scope:iV.CT,bubble:!1}]},[o]),(0,U.BX)(H.G,{children:[(0,U.tZ)(eb.zx,{css:iJ.button,text:(0,U.BX)("span",{css:iJ.requiredText,children:[(0,U.tZ)("span",{children:"Message"}),l?(0,U.tZ)(iQ,{}):null]}),secondaryText:Z||!C?void 0:(0,U.BX)("span",{css:iJ.keyCombo,children:[(0,U.tZ)("span",{css:iJ.keyComboText,children:"Commit:"}),(0,U.tZ)(iH.bM,{keyCombo:C,small:!0})]}),iconRight:l?(0,U.tZ)(tk.Z,{}):(0,U.tZ)(tS.Z,{}),onClick:function(){return c(function(e){return!e})},size:"small"}),(0,U.BX)(ew.Tg,{css:iJ.surface,elevated:!0,children:[(0,U.tZ)(i$,{ref:m,value:b,compact:l,disabled:r,onChange:function(e){x(e,w)},onNewline:function(){if(l)c(!1),d(!0);else{if(!v.current)return;v.current.focus(),v.current.setSelectionRange(0,0)}},onFocus:function(){p(!0)},onBlur:function(){p(!1)}}),l&&!w?null:(0,U.tZ)(iK,{ref:v,value:w,compact:l,disabled:r,onChange:function(e){if(x(b,e),l&&!e){var t;null===(t=m.current)||void 0===t||t.focus()}else l&&c(!1)},onBackspaceWhenEmpty:function(){m.current&&m.current.focus()},onFocus:function(){u&&d(!1),p(!0)},onBlur:function(){p(!1)},autoFocus:u})]})]})}var i$=(0,ee.forwardRef)(function(e,t){var n=e.value,r=e.compact,i=void 0!==r&&r,o=e.disabled,a=void 0!==o&&o,l=e.onChange,c=e.onNewline,s=e.onFocus,u=e.onBlur,d=(0,iO.Un)(),f=(0,Y.Z)().container,h=(0,iO.sg)({onResponse:function(e){var t;null==l||l(e||""),null===(t=v.current)||void 0===t||t.focus()}}),p=h.sendMessage,m=h.loading,v=(0,ee.useRef)(null),g=(0,iU.Z)().ref;function y(){return(y=(0,tM._)(function(){return(0,tF.Jh)(this,function(e){switch(e.label){case 0:return[4,f.exec("git","diff")];case 1:return[2,e.sent().output||""]}})})).apply(this,arguments)}function b(){return(b=(0,tM._)(function(){var e;return(0,tF.Jh)(this,function(t){switch(t.label){case 0:if(!d)return[2];return[4,function(){return y.apply(this,arguments)}()];case 1:return e=t.sent(),p("You are a helpful robot that conducts code reviews","Based on this diff: ".concat(e," can you write a helpful summary of changes in this commit? Only write two sentences.")),[2]}})})).apply(this,arguments)}return(0,U.BX)(H.G,{css:iJ.subjectField,children:[i?null:(0,U.BX)(H.G,{css:iJ.subjectFieldHeader,children:[(0,U.tZ)(V.xv,{variant:"small",color:"dimmer",multiline:!1,children:(0,U.BX)("span",{css:iJ.requiredText,children:[(0,U.tZ)("span",{children:"Summary"}),(0,U.tZ)(iQ,{})]})}),(0,U.tZ)(iF.T,{iconLeft:m?(0,U.tZ)(q.Z,{}):(0,U.tZ)(iW.Z,{}),text:"Summarize with AI",onClick:function(){return b.apply(this,arguments)}})]}),(0,U.tZ)(eg.B,{ref:i?t:(0,iM.l)(t,g,v),css:a?iJ.subjectInputDisabled:iJ.subjectInput,placeholder:"Summary of your commit...",value:n,disabled:a,onChange:function(e){return null==l?void 0:l(e.currentTarget.value)},onKeyDown:function(e){"Enter"!==e.key||e.defaultPrevented||(e.preventDefault(),e.stopPropagation(),null==c||c())},onFocus:s,onBlur:u})]})}),iK=(0,ee.forwardRef)(function(e,t){var n=e.value,r=e.compact,i=void 0!==r&&r,o=e.disabled,a=void 0!==o&&o,l=e.autoFocus,c=e.onChange,s=e.onBackspaceWhenEmpty,u=e.onFocus,d=e.onBlur,f=(0,iU.Z)().ref;return(0,U.BX)(H.G,{css:iJ.bodyField,children:[i?null:(0,U.tZ)(V.xv,{variant:"small",color:"dimmer",multiline:!1,children:"Description"}),(0,U.tZ)(eg.B,{ref:i?t:(0,iM.l)(t,f),css:a?iJ.bodyInputDisabled:iJ.bodyInput,placeholder:"Description of your commit...",value:n,disabled:a,onChange:function(e){return null==c?void 0:c(e.currentTarget.value)},onKeyDown:function(e){"Backspace"===e.key&&""===n&&(e.preventDefault(),e.stopPropagation(),null==s||s())},onFocus:u,onBlur:d,autoFocus:void 0!==l&&l})]})});function iQ(){return(0,U.tZ)(tU.u,{tooltip:"This field is required.",placement:"top",children:(0,U.tZ)("span",{css:iJ.required,children:"*"})})}var i0=(0,z.X)({commitArea:[J.l0.colWithGap(8)]});function i1(e){var t=e.status,n=e.onStagedFileClick,r=e.defaultMessage,i=(0,N._)((0,ee.useState)(t),2),o=i[0],a=i[1],l=(0,N._)((0,ee.useState)(null!=r?r:""),2),c=l[0],s=l[1],u=(0,N._)((0,ee.useState)(0),2),d=u[0],f=u[1],h=(0,N._)((0,ee.useState)(!1),2),p=h[0],m=h[1],v=nE();(0,ee.useEffect)(function(){return a(t)},[t]);var g=(0,Y.Z)().git;if(!o||!o.changes.length)return(0,U.tZ)(H.G,{css:i0.commitArea,children:(0,U.tZ)(V.xv,{color:"dimmest",multiline:!1,children:"There are no changes to commit."})});var y=o.changes.length,b=o.changes.filter(function(e){return e.staged}).length;function w(){return(w=(0,tM._)(function(e){var t,n;return(0,tF.Jh)(this,function(r){switch(r.label){case 0:if(p)return[2];return f(function(e){return e+1}),[4,g.stageFiles(e)];case 1:if((t=r.sent()).error)return[3,3];return[4,g.status()];case 2:return(n=r.sent()).error?(tH({context:"commit-area-status",gitService:g,result:n,data:{opts:e}}),v(n.error)):a(n),g.forceRefresh(),[3,4];case 3:v(t.error),tH({context:"commit-area-stage-files",gitService:g,result:t,data:{opts:e}}),r.label=4;case 4:return f(function(e){return e-1}),[2]}})})).apply(this,arguments)}function Z(){return(Z=(0,tM._)(function(e){var t,n;return(0,tF.Jh)(this,function(r){switch(r.label){case 0:if(p)return[2];return f(function(e){return e+1}),[4,g.restoreFiles(e)];case 1:if((t=r.sent()).error)return[3,3];return[4,g.status()];case 2:return(n=r.sent()).error?(tH({context:"commit-area-status",gitService:g,result:n,data:{files:e}}),v(n.error)):a(n),g.forceRefresh(),[3,4];case 3:tH({context:"commit-area-restore-files",gitService:g,result:t,data:{files:e}}),v(t.error),r.label=4;case 4:return f(function(e){return e-1}),[2]}})})).apply(this,arguments)}function x(){return C.apply(this,arguments)}function C(){return(C=(0,tM._)(function(){var e,t;return(0,tF.Jh)(this,function(n){switch(n.label){case 0:if(""===c||p||0===y||d>0)return[2];if(m(!0),0!==b)return[3,2];return[4,g.stageFiles({all:!0})];case 1:n.sent(),n.label=2;case 2:return[4,g.commit({message:c})];case 3:if(!(e=n.sent()).error)return[3,4];return m(!1),v(e.error),tH({context:"commit-area-commit",gitService:g,result:e,data:{message:c}}),[3,6];case 4:return(0,nq.J)("commit-created",{hasDescription:-1!==c.trim().indexOf("\n\n")}),[4,g.status()];case 5:t=n.sent(),m(!1),t.error?(v(t.error),tH({context:"commit-area-status",gitService:g,result:t,data:{message:c}})):(s(""),a(t)),g.forceRefresh(),n.label=6;case 6:return[2]}})})).apply(this,arguments)}var k="Nothing to commit";if(p)k="Committing...";else if(b>0&&b<y){var S=(0,eH.Z)("change",b);k="Commit ".concat(b," staged ").concat(S)}else y>0&&(k="Stage and commit all changes");var _=!c||0===y||d>0||p;return(0,U.BX)(H.G,{css:i0.commitArea,children:[(0,U.tZ)(iY,{message:c,disabled:p,onMessageChange:s,onCommitShortcut:x}),(0,U.tZ)(iA,{status:o,stageFiles:function(e){return w.apply(this,arguments)},restoreFiles:function(e){return Z.apply(this,arguments)},onStagedFileClick:n,disabled:p}),_?(0,U.tZ)(tU.u,{tooltip:d>0?"Changes in progress":0===y?"There are no changes to commit.":"You must enter a commit message before you can commit.",children:(0,U.tZ)(eb.zx,{text:k,onClick:x,disabled:_,loading:p,colorway:"primary",iconLeft:(0,U.tZ)(rZ.Z,{}),stretch:!0})}):(0,U.tZ)(eb.zx,{text:k,onClick:x,disabled:_,loading:p,colorway:"primary",iconLeft:(0,U.tZ)(rZ.Z,{}),stretch:!0})]})}var i2=/\s\(#(\d+)\)$/,i3=/^Revert "(.+)"/,i4=/^This reverts commit ([a-f0-9]+)(?:, reversing changes made to ([a-f0-9]+))?\./;function i8(e){var t=i3.exec(e.subject),n=i4.exec(e.body);if(t&&n){var r,i=n[1],o=t[1],a=i2.exec(o);return a&&(r=parseInt(a[1],10)),{hash:i,subject:o,pr:r}}return null}var i6=/\B#\d+\b/g,i5=/^Merged? pull request (#\d+\b)/,i7=/^Merge branch '(.+)'/,i9=/into (.+)$/;function oe(e){if("GitHub"===e.committer.name&&"noreply@github.com"===e.committer.email){var t=e.subject.match(i6);if(t){var n,r=parseInt(t[t.length-1].slice(1),10);if(r)return i2.test(e.subject)&&(n=e.subject.replace(i2,"").trim()),!n&&i5.test(e.subject)&&e.body&&-1===e.body.indexOf("\n")&&(n=e.body),{type:"pull-request",id:r,subject:n,reverts:i8(e)}}}if(i5.test(e.subject)){var i,o=i5.exec(e.subject);if(o)return e.body&&-1===e.body.indexOf("\n")&&(i=e.body),{type:"pull-request",id:parseInt(o[1].slice(1),10),subject:i,reverts:i8(e)}}if(i7.test(e.subject)){var a=i7.exec(e.subject);if(a){var l=i9.exec(e.subject);return{type:"branch",source:a[1],target:l?l[1]:null}}}return e.parents&&e.parents.length>2?{type:"octopus",parents:e.parents}:e.parents&&e.parents.length>1?{type:"simple",a:e.parents[0],b:e.parents[1]}:null}var ot=n(59140),on={position:"absolute",top:0,height:9,width:9,border:"1px solid ".concat(J.TV.purpleStrongest),borderRadius:"50%"},or=(0,z.X)({markerContainer:[J.l0.display.flex,J.l0.align.center,J.l0.justify.center,J.l0.minHeight(20),J.l0.minWidth(20)],commitMarker:[J.l0.height(4),J.l0.width(4),J.l0.backgroundColor.foregroundDefault,J.l0.borderRadius("full")],collapsedMarkerIconDot:[J.l0.height(3),J.l0.width(3),J.l0.backgroundColor.foregroundDimmer,J.l0.borderRadius("full")],collapsedMarkerIconContainer:[J.l0.display.flex,J.l0.align.center,J.l0.justify.center,{"div + div":{marginLeft:1}}],collapsedMarker:[J.l0.display.flex,J.l0.align.center,J.l0.justify.center,J.l0.height(20),J.l0.width(20),J.l0.backgroundColor.backgroundHighest,J.l0.borderRadius("full")],revertMarker:[J.l0.display.flex,J.l0.height(20),J.l0.width(20),J.l0.backgroundColor.orangeDimmest,J.l0.borderRadius("full"),J.l0.align.center,J.l0.justify.center],mergeMarker:[J.l0.display.flex,J.l0.height(20),J.l0.width(20),J.l0.backgroundColor.purpleDimmest,J.l0.borderRadius("full"),J.l0.align.center,J.l0.justify.center],mergeMarkerIconContainer:[J.l0.position.relative,J.l0.height(9),J.l0.width(13)],mergeMarkerIconLeft:[(0,ep._)({},on),J.l0.left(0)],mergeMarkerIconRight:[(0,ep._)({},on),J.l0.right(0)],boundaryMarker:[J.l0.height(6),J.l0.width(6),J.l0.backgroundColor.backgroundDefault,J.l0.borderRadius("full"),{border:"1px solid ".concat(J.TV.backgroundHighest)}]});function oi(e){var t=function(e){switch(e){case"none":default:return null;case"commit":return(0,U.tZ)(oo,{});case"revert":return(0,U.tZ)(oa,{});case"merge":return(0,U.tZ)(ol,{});case"boundary":return(0,U.tZ)(oc,{});case"collapsed":return(0,U.tZ)(os,{})}}(e.type);return t?(0,U.tZ)("div",{css:or.markerContainer,children:t}):null}function oo(){return(0,U.tZ)("div",{css:or.commitMarker})}function oa(){return(0,U.tZ)("div",{css:or.revertMarker,children:(0,U.tZ)(ip.Z,{size:12,color:J.TV.orangeStrongest})})}function ol(){return(0,U.tZ)("div",{css:or.mergeMarker,children:(0,U.BX)("div",{css:or.mergeMarkerIconContainer,children:[(0,U.tZ)("div",{css:or.mergeMarkerIconLeft}),(0,U.tZ)("div",{css:or.mergeMarkerIconRight})]})})}function oc(){return(0,U.tZ)("div",{css:or.boundaryMarker})}function os(){return(0,U.tZ)("div",{css:or.collapsedMarker,children:(0,U.BX)("div",{css:or.collapsedMarkerIconContainer,children:[(0,U.tZ)("div",{css:or.collapsedMarkerIconDot}),(0,U.tZ)("div",{css:or.collapsedMarkerIconDot}),(0,U.tZ)("div",{css:or.collapsedMarkerIconDot})]})})}var ou=[J.l0.position.absolute,J.l0.left(0),J.l0.width(18)],od=(0,z.X)({connectorSegmentBorderSolid:[ou,{borderRight:"1px solid ".concat(J.TV.outlineDimmest)}],connectorSegmentBorderDashed:[ou,{borderRight:"1px dashed ".concat(J.TV.outlineDimmest)}]});function of(e){var t=e.boundaryTop,n=void 0!==t&&t,r=e.boundaryBottom,i=void 0!==r&&r,o=e.joint,a=void 0===o?"top":o,l=e.hideTop,c=void 0!==l&&l,s=e.hideBottom,u=void 0!==s&&s;if(c&&u)return null;if(n===i&&!c&&!u)return(0,U.tZ)(op,{top:0,bottom:0,dashed:n&&i});var d=c?null:(0,U.tZ)(oh,{start:"top",joint:a,dashed:n}),f=u?null:(0,U.tZ)(oh,{start:"bottom",joint:a,dashed:i});return(0,U.BX)(U.HY,{children:[d,f]})}function oh(e){var t,n,r=e.start,i=e.joint,o=e.dashed,a="center"===i?(t={},(0,ti._)(t,r,0),(0,ti._)(t,"height","50%"),t):(n={},(0,ti._)(n,r,0),(0,ti._)(n,r===i?"height":i,8),n);return(0,U.tZ)(op,(0,em._)((0,ep._)({},a),{dashed:void 0!==o&&o}))}function op(e){var t=e.top,n=e.bottom,r=e.height,i=e.dashed;return(0,U.tZ)("div",{css:void 0!==i&&i?od.connectorSegmentBorderDashed:od.connectorSegmentBorderSolid,style:{top:t,bottom:n,height:r}})}var om=(0,z.X)({container:{position:"relative",marginLeft:30,marginRight:4,paddingLeft:6,userSelect:"none"},containerInteractive:[nI.gU.nofill,{position:"relative",marginLeft:30,marginRight:4,paddingLeft:6,userSelect:"none"}],nodeFoldedIconContainer:{position:"absolute",top:"50%",transform:"translateY(-50%)",right:8,zIndex:1,opacity:0,"div:hover > &":{transition:"opacity 120ms ease-out",opacity:1}},nodeUnFoldedIconContainer:{position:"absolute",top:"50%",transform:"translateY(-50%)",right:8,zIndex:1},nodeContentContainer:[J.l0.colWithGap(4),{position:"relative",paddingTop:8,paddingBottom:8,paddingRight:8}],nodeHeader:{display:"block",height:20},nodeUnfoldedContentSurface:[J.l0.mt(4),J.l0.mb(8),J.l0.p(8),J.l0.borderRadius(8),{marginLeft:36,marginRight:8,overflowX:"hidden"}],unfoldedContentContainer:[J.l0.position.relative]});function ov(e){var t=e.boundaryTop,n=e.boundaryBottom,r=void 0!==n&&n,i=e.hideConnectorTop,o=e.hideConnectorBottom,a=void 0!==o&&o,l=e.joint,c=void 0===l?"top":l,s=e.marker,u=e.header,d=e.unfoldedContent,f=e.children,h=e.className,p=(0,N._)((0,ee.useState)(!0),2),m=p[0],v=p[1];return(0,U.BX)(H.G,{className:h,css:J.l0.position.relative,children:[(0,U.tZ)(of,{boundaryTop:void 0!==t&&t,boundaryBottom:r,joint:c,hideTop:void 0!==i&&i,hideBottom:a}),s?(0,U.tZ)(oy,{joint:c,children:s}):null,d?(0,U.BX)(H.G,{css:om.containerInteractive,role:"button",tabIndex:0,onClick:function(){v(!m)},onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&v(!m)},children:[m?(0,U.tZ)("div",{css:om.nodeFoldedIconContainer,children:(0,U.tZ)(tk.Z,{})}):(0,U.tZ)("div",{css:om.nodeUnFoldedIconContainer,children:(0,U.tZ)(tS.Z,{})}),(0,U.BX)(H.G,{css:om.nodeContentContainer,children:[u?(0,U.tZ)(H.G,{css:om.nodeHeader,children:u}):null,f?(0,U.tZ)(H.G,{children:f}):null]})]}):(0,U.tZ)(H.G,{css:om.container,children:(0,U.BX)(H.G,{css:om.nodeContentContainer,children:[u?(0,U.tZ)(H.G,{css:om.nodeHeader,children:u}):null,f?(0,U.tZ)(H.G,{children:f}):null]})}),!d||m?null:(0,U.BX)(H.G,{css:om.unfoldedContentContainer,children:[a?null:(0,U.tZ)(op,{top:0,bottom:0,dashed:r}),(0,U.tZ)(ew.Tg,{css:om.nodeUnfoldedContentSurface,elevated:!0,children:d})]})]})}var og=(0,z.X)({top:{position:"absolute",top:8,left:18,transform:"translateX(-50%)"},bottom:{position:"absolute",bottom:8,left:18,transform:"translateX(-50%)"},center:{position:"absolute",top:"50%",left:18,transform:"translateX(-50%) translateY(-50%)"}});function oy(e){var t=e.joint,n=e.children;return(0,U.tZ)("div",{css:og[void 0===t?"top":t],children:n})}var ob=(0,z.X)({container:[J.l0.rowWithGap(8),J.l0.align.center,J.l0.justify.spaceBetween,J.l0.height("100%")],textContainer:[J.l0.rowWithGap(4),J.l0.center],text:[J.l0.flex.shrink(0)]});function ow(e){var t=e.text,n=(0,tc._)(e,["text"]);return(0,U.tZ)(ov,(0,ep._)({marker:(0,U.tZ)(oi,{type:"boundary"}),joint:"center",header:(0,U.BX)(H.G,{css:ob.container,children:[(0,U.tZ)(nD.R,{}),(0,U.BX)(H.G,{css:ob.textContainer,children:[(0,U.tZ)(ot.Z,{size:12,color:J.TV.foregroundDimmest}),(0,U.tZ)(V.xv,{css:ob.text,variant:"small",color:"dimmest",multiline:!1,children:t})]}),(0,U.tZ)(nD.R,{})]})},n))}var oZ=(0,z.X)({definitionList:{display:"grid",gridTemplateColumns:"auto 1fr",paddingLeft:J.TV.space4,"> dt":{display:"flex",alignItems:"center",paddingBottom:J.TV.space2},"> dd":{marginLeft:J.TV.space12,paddingBottom:J.TV.space2}},listHeader:[J.l0.fontWeight.medium],content:[J.l0.colWithGap(8)],description:[J.l0.colWithGap(8)],commitList:[J.l0.colWithGap(2),J.l0.pl(4)]}),ox=function(e,t){var n=!e.body,r=null,i=null;return t&&"type"in t?(r=t,"pull-request"===t.type&&(t.reverts&&(i=t.reverts),t.subject&&(n=!0))):t&&(i=t),{hideBody:n,merge:r,revert:i}},oC=function(e){var t=e.hash;return(0,U.tZ)(tC.q,{size:"small",iconLeft:(0,U.tZ)(ex.Z,{}),textToCopy:t,text:t.slice(0,7),tooltipSuccessText:"Hash copied!"})},ok=function(e){var t=e.onClick,n=e.text,r=e.loading;return(0,U.tZ)(tU.u,{tooltip:"Discard current changes and restore files to time of commit",children:(0,U.tZ)(eb.zx,{text:n,onClick:t,size:"small",iconLeft:void 0!==r&&r?(0,U.tZ)(q.Z,{}):(0,U.tZ)(ip.Z,{})})})},oS=function(e,t){return!(e.name===t.name&&e.email===t.email)},o_=function(e,t){return!(6e4>Math.abs(e-t))};function oE(e){var t=e.commit,n=e.info,r=oS(t.committer,t.author),i=o_(t.author.date,t.committer.date),o=ox(t,void 0===n?null:n),a=o.hideBody,l=o.merge,c=o.revert;return(0,U.BX)(H.G,{css:oZ.content,children:[a?null:(0,U.BX)(H.G,{css:oZ.description,children:[(0,U.tZ)(V.xv,{children:(0,U.tZ)(nJ.uJ,{body:t.body})}),(0,U.tZ)(nD.R,{css:J.l0.backgroundColor.outlineDimmer})]}),(0,U.BX)(H.G,{children:[(0,U.tZ)(V.xv,{css:oZ.listHeader,multiline:!1,children:"Author"}),(0,U.BX)("dl",{css:oZ.definitionList,children:[(0,U.tZ)("dt",{children:"Name:"}),(0,U.tZ)("dd",{children:t.author.name}),(0,U.tZ)("dt",{children:"Email:"}),(0,U.tZ)("dd",{children:t.author.email})]})]}),r?(0,U.BX)(H.G,{children:[(0,U.tZ)(V.xv,{css:oZ.listHeader,multiline:!1,children:"Committer"}),(0,U.BX)("dl",{css:oZ.definitionList,children:[(0,U.tZ)("dt",{children:"Name:"}),(0,U.tZ)("dd",{children:t.committer.name}),(0,U.tZ)("dt",{children:"Email:"}),(0,U.tZ)("dd",{children:t.committer.email})]})]}):null,(0,U.BX)(H.G,{children:[(0,U.tZ)(V.xv,{css:oZ.listHeader,multiline:!1,children:"Commit"}),(0,U.BX)("dl",{css:oZ.definitionList,children:[i?(0,U.BX)(U.HY,{children:[(0,U.tZ)("dt",{children:"Authored:"}),(0,U.tZ)("dd",{children:(0,U.tZ)(nP.EK,{date:t.author.date,dateFormat:"absolute"})}),(0,U.tZ)("dt",{children:"Committed:"}),(0,U.tZ)("dd",{children:(0,U.tZ)(nP.EK,{date:t.committer.date,dateFormat:"absolute"})})]}):(0,U.BX)(U.HY,{children:[(0,U.tZ)("dt",{children:"Date:"}),(0,U.tZ)("dd",{children:(0,U.tZ)(nP.EK,{date:t.author.date,dateFormat:"absolute"})})]}),(0,U.tZ)("dt",{children:"Hash:"}),(0,U.tZ)("dd",{children:(0,U.tZ)(oC,{hash:t.hash})}),l&&"pull-request"===l.type?(0,U.BX)(U.HY,{children:[(0,U.tZ)("dt",{children:"PR:"}),(0,U.BX)("dd",{children:["#",l.id]})]}):null,l&&"branch"===l.type?(0,U.BX)(U.HY,{children:[(0,U.tZ)("dt",{children:"Merged:"}),(0,U.tZ)("dd",{children:l.source}),l.target?(0,U.BX)(U.HY,{children:[(0,U.tZ)("dt",{children:"Into:"}),(0,U.tZ)("dd",{children:l.target})]}):null]}):null,c?(0,U.BX)(U.HY,{children:[(0,U.tZ)("dt",{children:"Reverted:"}),(0,U.tZ)("dd",{children:c.hash})]}):null]})]}),l&&"simple"===l.type?(0,U.BX)(H.G,{children:[(0,U.tZ)(V.xv,{css:oZ.listHeader,multiline:!1,children:"Merged"}),(0,U.BX)(H.G,{css:oZ.commitList,children:[(0,U.tZ)(V.xv,{multiline:!1,children:l.a}),(0,U.tZ)(V.xv,{multiline:!1,children:l.b})]})]}):null,l&&"octopus"===l.type?(0,U.BX)(H.G,{children:[(0,U.tZ)(V.xv,{css:oZ.listHeader,multiline:!1,children:"Merged"}),(0,U.tZ)(H.G,{css:oZ.commitList,children:l.parents.map(function(e,t){return(0,U.tZ)(V.xv,{multiline:!1,children:e},t)})})]}):null]})}var oT=(0,z.X)({authorContainer:[J.l0.rowWithGap(8),J.l0.align.center],headerText:[J.l0.rowWithGap(4),J.l0.flex.row,J.l0.align.stretch,J.l0.fontWeight.medium,J.l0.flex.wrap],headerContainer:[J.l0.colWithGap(4),J.l0.align.start,J.l0.justify.start],button:[J.l0.reset.button,J.l0.linkStyle,J.l0.color.foregroundDefault,J.l0.fontWeight.medium,{display:"block",width:"100%",textAlign:"left"}]}),oR=function(e){var t=e.author;return(0,U.BX)(H.G,{css:oT.authorContainer,children:[(0,U.tZ)(nz,{name:t.name,email:t.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),(0,U.tZ)(nP.EK,{date:t.date,textColor:"dimmest",textVariant:"small"})]})},oD=function(e){var t=e.children;return(0,U.tZ)(V.xv,{css:oT.headerText,multiline:!1,maxLines:1,children:t})},oI=function(e){var t=e.commit,n=e.onViewCommitClick,r=e.children;return(0,U.tZ)(H.G,{css:oT.headerContainer,children:(0,U.tZ)(tU.u,{tooltip:"View ".concat(t.hash.slice(0,7)),children:(0,U.tZ)("button",{css:oT.button,onClick:function(){return n(t.hash)},children:r})})})};function oB(e){var t=e.commit,n=(0,tc._)(e,["commit"]);return(0,U.tZ)(ov,(0,em._)((0,ep._)({marker:(0,U.tZ)(oi,{type:"commit"}),header:(0,U.tZ)(oD,{children:(0,U.tZ)(nJ.Zr,{subject:t.subject})}),unfoldedContent:(0,U.tZ)(oE,{commit:t})},n),{children:(0,U.tZ)(oR,{author:t.author})}))}var oG=function(e){var t=e.commit,n=e.onViewCommitClick,r=(0,tc._)(e,["commit","onViewCommitClick"]);return(0,U.tZ)(ov,(0,em._)((0,ep._)({marker:(0,U.tZ)(oi,{type:"commit"}),header:(0,U.tZ)(oI,{commit:t,onViewCommitClick:function(){return n(t.hash)},children:(0,U.tZ)(oD,{children:(0,U.tZ)(nJ.Zr,{subject:t.subject})})})},r),{children:(0,U.tZ)(oR,{author:t.author})}))};function oP(e){var t,n=e.commit,r=e.info,i=(0,tc._)(e,["commit","info"]);return"branch"!==r.type&&(t="pull-request"===r.type&&r.subject?r.subject:n.subject),(0,U.tZ)(ov,(0,em._)((0,ep._)({marker:(0,U.tZ)(oi,{type:"merge"}),header:(0,U.BX)(oD,{children:[(0,U.tZ)(nJ.ST,{text:"merged"}),(0,U.tZ)(oL,{info:r,hash:n.hash,subject:n.subject})]}),unfoldedContent:(0,U.tZ)(oE,{commit:n,info:r})},i),{children:(0,U.BX)(H.G,{css:[J.l0.colWithGap(8)],children:[t?(0,U.tZ)(V.xv,{color:"dimmer",variant:"small",multiline:!1,children:(0,U.tZ)(nJ.Zr,{subject:t})}):null,(0,U.tZ)(oR,{author:n.author})]})}))}var oA=function(e){var t,n=e.commit,r=e.info,i=e.onViewCommitClick,o=(0,tc._)(e,["commit","info","onViewCommitClick"]);return"branch"!==r.type&&(t="pull-request"===r.type&&r.subject?r.subject:n.subject),(0,U.tZ)(ov,(0,em._)((0,ep._)({marker:(0,U.tZ)(oi,{type:"merge"}),header:(0,U.tZ)(oI,{commit:n,onViewCommitClick:function(){return i(n.hash)},children:(0,U.BX)(oD,{children:[(0,U.tZ)(nJ.ST,{text:"merged"}),(0,U.tZ)(oL,{info:r,hash:n.hash,subject:n.subject})]})})},o),{children:(0,U.BX)(H.G,{css:[J.l0.colWithGap(8)],children:[t?(0,U.tZ)(V.xv,{color:"dimmer",variant:"small",multiline:!1,children:(0,U.tZ)(nJ.Zr,{subject:t})}):null,(0,U.tZ)(oR,{author:n.author})]})}))};function oL(e){var t=e.info,n=e.hash,r=e.subject,i=(0,U.tZ)("span",{css:J.l0.fontWeight.medium,children:r});switch(t.type){case"pull-request":return(0,U.BX)(U.HY,{children:[(0,U.tZ)("span",{children:"pull request"}),(0,U.tZ)(nJ.$8,{id:t.id}),t.reverts&&t.reverts.pr?(0,U.BX)(U.HY,{children:[(0,U.tZ)("span",{children:"-"}),(0,U.tZ)(nJ.po,{text:"reverts"}),(0,U.tZ)(nJ.$8,{id:t.reverts.pr})]}):null]});case"branch":if(!t.target)return(0,U.BX)(U.HY,{children:[(0,U.tZ)("span",{children:"branch"}),(0,U.tZ)(nJ.Lr,{name:t.source})]});return(0,U.BX)(U.HY,{children:[(0,U.tZ)(nJ.Lr,{name:t.source}),(0,U.tZ)("span",{children:"into"}),(0,U.tZ)(nJ.Lr,{name:t.target})]});case"simple":return(0,U.BX)(U.HY,{children:[(0,U.tZ)(nJ.kb,{hash:t.a}),(0,U.tZ)(r4.Z,{css:{alignSelf:"center"},size:12}),(0,U.tZ)(nJ.kb,{hash:t.b})]});case"octopus":return(0,U.BX)(U.HY,{children:[(0,U.tZ)("span",{children:"commit"}),(0,U.tZ)(nJ.kb,{hash:n}),(0,U.BX)("span",{children:["(",t.parents.length," parents)"]})]});default:return i}}function oN(e){var t=e.commit,n=e.info,r=(0,tc._)(e,["commit","info"]);return(0,U.tZ)(ov,(0,em._)((0,ep._)({marker:(0,U.tZ)(oi,{type:"revert"}),header:(0,U.BX)(oD,{children:[(0,U.tZ)(nJ.po,{text:"reverted"}),(0,U.tZ)(nJ.kb,{hash:n.hash}),(0,U.tZ)(nJ.Zr,{subject:n.subject,quoted:!0})]}),unfoldedContent:(0,U.tZ)(oE,{commit:t,info:n})},r),{children:(0,U.tZ)(oR,{author:t.author})}))}var oO=function(e){var t=e.commit,n=e.info,r=e.onViewCommitClick,i=(0,tc._)(e,["commit","info","onViewCommitClick"]);return(0,U.tZ)(ov,(0,em._)((0,ep._)({marker:(0,U.tZ)(oi,{type:"revert"}),header:(0,U.tZ)(oI,{commit:t,onViewCommitClick:function(){return r(t.hash)},children:(0,U.BX)(oD,{children:[(0,U.tZ)(nJ.po,{text:"reverted"}),(0,U.tZ)(nJ.kb,{hash:n.hash}),(0,U.tZ)(nJ.Zr,{subject:n.subject,quoted:!0})]})})},i),{children:(0,U.tZ)(oR,{author:t.author})}))},oU=(0,z.X)({body:[J.l0.flex.growAndShrink(1)],virtualItem:[J.l0.position.absolute,J.l0.top(0),J.l0.left(0),J.l0.width("100%"),J.l0.overflow("hidden")],virtualList:[J.l0.position.relative]}),oX=function(){return 60};function oM(e){var t=e.items,n=(0,ee.useRef)(null),r=(0,nR.MG)({overscan:10,count:t.length,getScrollElement:function(){return n.current},estimateSize:oX});return(0,U.tZ)("div",{ref:n,css:oU.body,children:(0,U.tZ)("div",{css:oU.virtualList,style:{height:"".concat(r.getTotalSize(),"px")},children:r.getVirtualItems().map(function(e){return(0,U.tZ)("div",{css:oU.virtualItem,style:{transform:"translateY(".concat(e.start,"px)")},"data-index":e.index,ref:r.measureElement,children:(0,U.tZ)(oF,{items:t,index:e.index})},e.key)})})})}function oF(e){var t=e.items,n=e.index,r=t[n],i=0===n,o=n===t.length-1;if("boundary"===r.type)return(0,U.tZ)(ow,{text:r.text,hideConnectorTop:i,hideConnectorBottom:o,boundaryTop:!0,boundaryBottom:!0},r.text);var a=t[n-1]?t[n-1].type:null,l=t[n+1]?t[n+1].type:null;return(0,U.tZ)(oW,{commit:r.commit,hideConnectorTop:i,hideConnectorBottom:o,boundaryTop:"commit"!==a,boundaryBottom:"commit"!==l,onViewCommitClick:r.onViewCommitClick},r.commit.hash)}function oW(e){var t=e.commit,n=e.onViewCommitClick,r=(0,tc._)(e,["commit","onViewCommitClick"]),i=oe(t);if(i)return n?(0,U.tZ)(oA,(0,ep._)({info:i,commit:t,onViewCommitClick:n},r)):(0,U.tZ)(oP,(0,ep._)({info:i,commit:t},r));var o=i8(t);return o?n?(0,U.tZ)(oO,(0,ep._)({info:o,commit:t,onViewCommitClick:n},r)):(0,U.tZ)(oN,(0,ep._)({info:o,commit:t},r)):n?(0,U.tZ)(oG,(0,ep._)({commit:t,onViewCommitClick:n},r)):(0,U.tZ)(oB,(0,ep._)({commit:t},r))}var oV=(0,eV.F4)({from:{opacity:0},to:{opacity:1}}),oH=(0,z.X)({loadingView:[{animation:"".concat(oV," 0.125s 0.25s linear backwards")},J.l0.flex.grow(1),J.l0.display.flex,J.l0.center]});function oz(){return(0,U.tZ)(H.G,{css:oH.loadingView,children:(0,U.tZ)(q.Z,{size:48})})}var oj=(0,z.X)({view:[J.l0.pt(4),J.l0.pb(8),J.l0.px(4),J.l0.colWithGap(8),J.l0.flex.grow(1)],sectionContainer:[J.l0.colWithGap(8)],section:[J.l0.pt(8),J.l0.pb(16),J.l0.px(8),J.l0.colWithGap(8),J.l0.border({color:J.TV.outlineDimmest,direction:"bottom"})],remoteUpdatesHeader:[J.l0.rowWithGap(8),J.l0.align.center,J.l0.justify.spaceBetween],reviewChangesHeader:[J.l0.rowWithGap(8),J.l0.align.center],headerText:[J.l0.fontWeight.medium],replMergingHeader:[J.l0.rowWithGap(8),J.l0.align.center],switchToBranch:[J.l0.p(4),J.l0.flex.row,J.l0.align.center,J.l0.justify.spaceBetween,J.l0.mt(0),J.l0.mb(0)]});function oq(e){var t,n,r,i,o,a=e.status,l=e.remotes,c=e.branch,s=e.onStagedFileClick,u=e.onViewCommitClick,d=e.onViewSettingsClick,f=e.gotoPendingState,h=e.current,p=void 0!==h&&h,m=e.performPaneOperation,v=p?null==a?void 0:null===(i=a.upstream)||void 0===i?void 0:i.behind:void 0,g=p?null==a?void 0:null===(o=a.upstream)||void 0===o?void 0:o.ahead:void 0,y=(t=nE(),r=(0,tW.Z)((n=(0,tM._)(function(e){var t,n,r,i,o,a,l,s,u;return(0,tF.Jh)(this,function(d){switch(d.label){case 0:return[4,e.isInitialized()];case 1:if((t=d.sent()).error)return tH({context:"use-branch-commits",gitService:e,result:t}),[2,{error:t.error}];if(!t.initialized)return[2,{log:[],onlyRemote:[],onlyLocal:[],error:null}];if(!c)return[2,{error:null}];if(!(!c.tracking||0===v&&0===g))return[3,3];return n=(0,to.bF)(c,!0),[4,e.log({max:100,revRange:n})];case 2:if((r=d.sent()).error)return tH({context:"use-branch-commits",gitService:e,result:r,data:{branch:c,behind:v,ahead:g,revision:n}}),[2,r];return[2,{log:r.commits,error:null}];case 3:return i=(0,to.bF)(c),[4,Promise.all([e.log({max:100,revRange:c.name}),e.log({max:100,revRange:"".concat(c.name,"..").concat(i)}),e.log({max:100,revRange:"".concat(i,"..").concat(c.name)})])];case 4:if(o=d.sent(),l=(a=(0,N._)(o,3))[0],s=a[1],u=a[2],l.error)return tH({context:"use-branch-commits-log",gitService:e,result:l,data:{branch:c,behind:v,ahead:g,remoteBranch:i}}),[2,{error:l.error}];if(s.error)return tH({context:"use-branch-commits-only-remote",gitService:e,result:s,data:{branch:c,behind:v,ahead:g,remoteBranch:i}}),[2,{error:s.error}];if(u.error)return tH({context:"use-branch-commits-only-local",gitService:e,result:u,data:{branch:c,behind:v,ahead:g,remoteBranch:i}}),[2,{error:u.error}];return[2,{log:l.commits,onlyRemote:s.commits,onlyLocal:u.commits,error:null}]}})}),function(e){return n.apply(this,arguments)}),[c,v,g]),(0,ee.useMemo)(function(){if(!r)return null;if(r.error)return t(r.error),{error:r.error};var e=r.log,n=r.onlyRemote,i=r.onlyLocal;return n||i?(e&&(e=id(e,null!=n?n:[],null!=i?i:[])),{log:e,onlyRemote:n,onlyLocal:i,error:null}):{log:e,error:null}},[t,r])),b=!!l&&l.size>0,w=(null==c?void 0:c.type)===to.HO.LOCAL,Z=(0,ee.useMemo)(function(){if(!y||y.error)return[];var e=[],t=y.log,n=void 0===t?[]:t,r=y.onlyRemote,i=void 0===r?[]:r,o=y.onlyLocal,a=void 0===o?[]:o,l=n.length>0,c=i.length>0,s=a.length>0;return c&&(e.push({type:"boundary",text:"Not pulled from remote"}),e.push.apply(e,(0,O._)(oJ(i,u)))),s&&(e.push({type:"boundary",text:"Not pushed to remote"}),e.push.apply(e,(0,O._)(oJ(a,u)))),l&&((c||s)&&e.push({type:"boundary",text:"Up to date with remote"}),e.push.apply(e,(0,O._)(oJ(n,u)))),e},[y,u]);return c?(0,U.BX)(H.G,{css:oj.view,children:[(0,U.BX)(H.G,{css:oj.sectionContainer,children:[w?(0,U.tZ)(H.G,{css:oj.section,children:(0,U.tZ)(r0,{performPaneOperation:m,branch:c,onViewSettingsClick:d})}):null,p&&!w&&l&&b?(0,U.BX)(H.G,{css:oj.section,children:[(0,U.BX)(H.G,{css:oj.remoteUpdatesHeader,children:[(0,U.tZ)(V.xv,{css:oj.headerText,multiline:!1,children:"Remote Updates"}),(0,U.tZ)(r3,{branch:c,remotes:l})]}),(0,U.tZ)(iu,{remotes:l,gotoPendingState:f})]}):null,p&&a?(0,U.BX)(H.G,{css:oj.section,children:[(0,U.tZ)(H.G,{css:oj.reviewChangesHeader,children:(0,U.tZ)(V.xv,{css:oj.headerText,multiline:!1,children:"Commit"})}),(0,U.tZ)(i1,{status:a,onStagedFileClick:s})]}):null]}),y?(0,U.tZ)(oM,{items:Z}):(0,U.tZ)(oz,{})]}):(0,U.tZ)("div",{children:"No branch"})}function oJ(e,t){return e.map(function(e){return{type:"commit",commit:e,onViewCommitClick:t}})}function oY(){return(0,U.BX)(H.G,{children:[(0,U.tZ)(V.xv,{multiline:!1,children:"Unsupported state: you are in the middle of a cherry-pick."}),(0,U.tZ)(V.xv,{multiline:!1,children:"Please finish the cherry-pick manually."})]})}var o$=(0,z.X)({branch:[nI.gU.nofill,J.l0.py(12),J.l0.px(8),J.l0.colWithGap(2),J.l0.justify.center,J.l0.borderRadius(8),J.l0.flex.shrink(1)],branchMetadata:[J.l0.rowWithGap(8),J.l0.align.center,J.l0.flex.shrink(1)]});function oK(e){var t=e.branch,n=e.current,r=e.onClick;return(0,U.BX)(H.G,{css:o$.branch,tabIndex:0,role:"button","aria-label":"Switch to branch ".concat((0,to.bF)(t,!0)),onClick:r,onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&(null==r||r())},children:[(0,U.tZ)(V.xv,{multiline:!1,children:(0,U.tZ)(nJ.Lr,{name:t.name,remote:t.type===to.HO.REMOTE?t.remote:null,current:void 0!==n&&n,onClick:r,icon:!0})}),(0,U.tZ)(oQ,{branch:t})]})}function oQ(e){var t=e.branch;return(0,U.BX)(H.G,{css:o$.branchMetadata,children:[(0,U.tZ)(nz,{name:t.commit.author.name,email:t.commit.author.email,color:"dimmest",allowPlaceholderAvatar:!0}),(0,U.tZ)(nP.EK,{date:t.commit.author.date,textColor:"dimmest",textVariant:"small"})]})}var o0=(0,z.X)({expandButton:[{verticalAlign:"middle"},J.l0.justify.spaceBetween],branchListContainer:[J.l0.display.flex],topRow:[J.l0.p(4),J.l0.flex.row,J.l0.align.center,J.l0.justify.spaceBetween],topRowInteractive:[{verticalAlign:"middle"},J.l0.justify.spaceBetween,J.l0.borderRadius(8,8,0,0)],branchList:[J.l0.borderRadius(8)],branchListFoldable:[J.l0.borderRadius(0,0,8,8)]});function o1(e){var t=e.name,n=e.branches,r=e.current,i=void 0===r?null:r,o=e.foldable,a=void 0!==o&&o,l=e.folded,c=e.switchBranch,s=(0,N._)((0,ee.useState)(!!a&&void 0!==l&&l),2),u=s[0],d=s[1],f=(0,ee.useMemo)(function(){return n.map(function(e){return(0,U.tZ)(oK,{branch:e,current:(0,to.p3)(e,i),onClick:function(){return c(e)}},(0,to.Qj)(e))})},[n,i,c]);return u?(0,U.tZ)(eb.zx,{css:o0.expandButton,text:t,iconRight:(0,U.tZ)(tk.Z,{}),onClick:function(){return d(!1)},size:"big"}):a?(0,U.BX)(H.G,{css:o0.branchListContainer,children:[(0,U.tZ)(eb.zx,{css:o0.topRowInteractive,text:t,iconRight:(0,U.tZ)(tS.Z,{}),onClick:function(){return d(!0)},size:"big"}),(0,U.tZ)(ew.Tg,{css:o0.branchListFoldable,elevated:!0,children:f})]}):(0,U.BX)(H.G,{css:o0.branchListContainer,children:[(0,U.tZ)(H.G,{css:o0.topRow,children:(0,U.tZ)(V.xv,{variant:"subheadDefault",multiline:!1,children:t})}),(0,U.tZ)(ew.Tg,{css:o0.branchList,elevated:!0,children:f})]})}var o2=(0,z.X)({container:[J.l0.p(8),J.l0.colWithGap(8),J.l0.borderRadius(8)],buttonContainer:[J.l0.rowWithGap(4)],button:[J.l0.flex.grow(1)],inputDisabled:[{opacity:.75}]});function o3(){var e=(0,N._)((0,ee.useState)(!0),2),t=e[0],n=e[1],r=(0,N._)((0,ee.useState)(""),2),i=r[0],o=r[1],a=(0,N._)((0,ee.useState)(!1),2),l=a[0],c=a[1],s=nE(),u=(0,Y.Z)().git;function d(){n(!0),o("")}function f(){return h.apply(this,arguments)}function h(){return(h=(0,tM._)(function(){var e;return(0,tF.Jh)(this,function(r){switch(r.label){case 0:if(t||!i||l)return[2];return c(!0),[4,u.createBranch({name:i,checkout:!0})];case 1:return(e=r.sent()).error?(s(e.error),c(!1)):(u.forceRefresh(),c(!1),o(""),n(!0),(0,nq.J)("branch-created")),[2]}})})).apply(this,arguments)}if(t)return(0,U.tZ)(eb.zx,{text:"Create Branch",iconLeft:(0,U.tZ)(nA.Z,{}),onClick:function(){return n(!1)}});var p=!i||!(0,to.Dc)(i);return(0,U.BX)(ew.Tg,{css:o2.container,elevated:!0,children:[(0,U.tZ)(o4,{value:i,onChange:o,onSubmit:f,onCancel:d,disabled:l}),(0,U.BX)(H.G,{css:o2.buttonContainer,children:[(0,U.tZ)(eb.zx,{css:o2.button,text:"Cancel",onClick:d,disabled:l}),(0,U.tZ)(eb.zx,{css:o2.button,text:"Create Branch",colorway:"primary",iconLeft:(0,U.tZ)(nA.Z,{}),onClick:f,loading:l,disabled:p})]})]})}function o4(e){var t=e.value,n=e.disabled,r=e.onChange,i=e.onSubmit,o=e.onCancel;function a(e){(0,to.dC)(e)&&(null==r||r(e))}return(0,U.tZ)(eg.II,{value:t,css:n?o2.inputDisabled:void 0,disabled:n,placeholder:"Enter a name for your new branch",onChange:function(e){return a(e.currentTarget.value)},onKeyDown:function(e){return function(e,n){switch(e){case"Enter":null==i||i(),n();break;case"Escape":null==o||o(),n();break;case" ":if(""===t){n();break}a(t+"-"),n()}}(e.key,function(){return e.preventDefault()})},onBlur:function(){""===t&&(null==o||o())},autoFocus:!0})}function o8(e){var t,n,r=e.currentBranch,i=e.switchMode,o=nE(),a=(0,Y.Z)().git,l=(0,N._)((0,ee.useState)(null),2),c=l[0],s=l[1],u=(0,tW.Z)((t=(0,tM._)(function(e){var t,n,r,i,a,l,c,s,u,d,f,h,p,m,v,g,y,b,w;return(0,tF.Jh)(this,function(Z){switch(Z.label){case 0:return[4,e.listBranches()];case 1:if((t=Z.sent()).error)return o(t.error),tH({context:"dashboard-view",gitService:e,result:t}),[2,t];return[4,e.findDefaultBranches()];case 2:if((n=Z.sent()).error)return o(n.error),[2,n];r=t.branches,i=new Set,a=!0,l=!1,c=void 0;try{for(s=function(){var e=d.value,t=r.find(function(t){return(0,to.Pi)(t,e)});t&&i.add(t)},u=n.refs[Symbol.iterator]();!(a=(d=u.next()).done);a=!0)s()}catch(e){l=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}f=Date.now()-5184e6,h=[],p=[],m=!0,v=!1,g=void 0;try{for(y=r[Symbol.iterator]();!(m=(b=y.next()).done);m=!0)w=b.value,i.has(w)||(w.commit.author.date>f?h.push(w):p.push(w))}catch(e){v=!0,g=e}finally{try{m||null==y.return||y.return()}finally{if(v)throw g}}return[2,{active:h,stale:p,important:Array.from(i),error:null}]}})}),function(e){return t.apply(this,arguments)}),[o]),d=(n=(0,tM._)(function(e){var t;return(0,tF.Jh)(this,function(n){switch(n.label){case 0:if(null!==c)return[2];return(0,to.Pi)(r,e)&&i({mode:w.CURRENT_BRANCH}),s(e),[4,a.switchBranch(e)];case 1:return(t=n.sent()).error?(o(t.error),tH({context:"dashboard-view",gitService:a,result:t,data:{branch:e.name}}),s(null)):(a.forceRefresh(),(0,nq.J)("branch-switched")),[2]}})}),function(e){return n.apply(this,arguments)});if((0,ee.useEffect)(function(){null!==c&&(0,to.Pi)(r,c)&&(s(null),i({mode:w.CURRENT_BRANCH}))},[r,c,i]),!u||null!==c)return(0,U.tZ)(oz,{});if(u.error)return(0,U.tZ)("div",{children:u.error});var f=u.active,h=u.stale,p=u.important;return(0,U.tZ)(H.G,{css:[J.l0.colWithGap(8)],children:(0,U.BX)(H.G,{css:[J.l0.pb(8),J.l0.px(8),J.l0.colWithGap(16)],children:[r?(0,U.BX)(H.G,{css:J.l0.colWithGap(8),children:[(0,U.tZ)(o1,{branches:[r],current:r,name:"Current Branch",switchBranch:d}),(0,U.tZ)(o3,{})]}):null,(0,U.tZ)(V.xv,{variant:"subheadDefault",multiline:!1,css:oj.switchToBranch,children:"Switch Branch"}),0===p.length?null:(0,U.tZ)(o1,{branches:p,current:r,name:"Important",switchBranch:d,foldable:!0}),0===f.length?null:(0,U.tZ)(o1,{branches:f,current:r,name:"Active",switchBranch:d,foldable:!0}),0===h.length?null:(0,U.tZ)(o1,{branches:h,current:r,name:"Stale",switchBranch:d,foldable:!0,folded:!0})]})})}function o6(){return(0,U.BX)(H.G,{children:[(0,U.tZ)(V.xv,{multiline:!1,children:"Unsupported state: your HEAD is currently detached."}),(0,U.tZ)(V.xv,{multiline:!1,children:"Please checkout a branch."})]})}function o5(){return(0,U.BX)(H.G,{children:[(0,U.tZ)(V.xv,{multiline:!1,children:"Unsupported state: you are in the middle of a rebase."}),(0,U.tZ)(V.xv,{multiline:!1,children:"Please finish the rebase manually."})]})}function o7(){return(0,U.BX)(H.G,{children:[(0,U.tZ)(V.xv,{multiline:!1,children:"Unsupported state: you are in the middle of a revert."}),(0,U.tZ)(V.xv,{multiline:!1,children:"Please finish the revert manually."})]})}var o9=(0,z.X)({container:[J.l0.colWithGap(16),J.l0.p(8),J.l0.pt(16)],fakePaneHeader:[J.l0.px(8),J.l0.py(4),J.l0.rowWithGap(8),J.l0.backgroundColor.backgroundDefault,J.l0.align.center,{borderBottom:"1px solid ".concat(J.TV.outlineDimmer)}]});function ae(e){var t=e.onFileClick,n=e.status;return(0,U.BX)(H.G,{children:[(0,U.tZ)(at,{}),(0,U.BX)(H.G,{css:o9.container,children:[(0,U.tZ)(e6.E,{colorway:"orange",icon:(0,U.tZ)(rg.Z,{}),text:"Your current branch doesn't have any commits. You need to make an initial commit before continuing."}),(0,U.BX)(H.G,{css:oj.section,children:[(0,U.tZ)(H.G,{css:oj.reviewChangesHeader,children:(0,U.tZ)(V.xv,{css:oj.headerText,multiline:!1,children:"Commit"})}),(0,U.tZ)(i1,{status:n,onStagedFileClick:t,defaultMessage:"Initial commit"})]})]})]})}function at(){var e,t=nE(),n=(0,tW.Z)((e=(0,tM._)(function(e){var n;return(0,tF.Jh)(this,function(r){switch(r.label){case 0:return[4,e.status()];case 1:return(n=r.sent()).error&&(tH({context:"unborn-branch-view-status",gitService:e,result:n}),t(n.error)),[2,n]}})}),function(t){return e.apply(this,arguments)}),[t]);return(null==n?void 0:n.error)?null:(0,U.tZ)(H.G,{css:o9.fakePaneHeader,children:(null==n?void 0:n.branch)?(0,U.tZ)(nJ.Lr,{name:n.branch,current:!0,heading:!0}):null})}var an=function(e){var t,n=(0,tW.Z)((t=(0,tM._)(function(t){var n,r,i;return(0,tF.Jh)(this,function(o){switch(o.label){case 0:return[4,t.isInitialized()];case 1:if((n=o.sent()).error)return[2,{error:n.error}];if(!n.initialized)return[2,{error:to.aq.NOT_INITIALIZED}];return[4,t.log({max:1,revRange:e})];case 2:if((r=o.sent()).error)return[2,{error:r.error}];if(0===r.commits.length)return[2,{error:to.aq.NO_COMMITS}];return[2,{commit:null!==(i=r.commits[0])&&void 0!==i?i:null,error:null}]}})}),function(e){return t.apply(this,arguments)}),[e]);return(0,ee.useMemo)(function(){return n?n.error?{error:n.error}:n:null},[n])},ar=n(90632),ai=n(16865),ao=[{"& > span:first-child":[J.l0.flex.grow(1),J.l0.textAlign.left]},{"& > span":[J.l0.flex.shrink(1)]}],aa=(0,z.X)({container:[J.l0.colWithGap(16)],splitOrUnisonContainer:[J.l0.colWithGap(8),J.l0.display.flex,J.l0.flex.row,J.l0.flex.wrap,J.l0.align.center,J.l0.justify.spaceBetween],emphasizedText:[J.l0.fontWeight.medium],buttonFolded:[ao,J.l0.height("auto"),J.l0.py(8),J.l0.fontWeight.medium],buttonUnfolded:[ao,J.l0.height("auto"),J.l0.py(8),J.l0.fontWeight.medium,J.l0.borderRadius(8,8,0,0)],buttonGroupItem:[J.l0.width(64),J.l0.height(32)],textContainer:[J.l0.mt(8),J.l0.overflow("break-all")]}),al=function(e){var t=e.children;return(0,U.tZ)(H.G,{css:aa.splitOrUnisonContainer,children:t})},ac=function(e){var t=e.value,n=e.onChange;return(0,U.BX)(tx.hE,{name:"SplitOrUnifiedDiff",value:t,onChange:n,row:!0,children:[(0,U.tZ)(H.G,{css:aa.buttonGroupItem,children:(0,U.tZ)(tx.rK,{value:"Unified",text:"Unified",id:"SplitOrUnifiedDiffUnified"})}),(0,U.tZ)(H.G,{css:aa.buttonGroupItem,children:(0,U.tZ)(tx.rK,{value:"Split",text:"Split",id:"SplitOrUnifiedDiffSplit"})})]})},as=function(e){var t=e.value,n=e.onChange;return(0,U.tZ)(F.hU,{alt:"Markdown"===t?"View Source":"View Markdown",onClick:function(){return n("Markdown"===t?"Source":"Markdown")},children:"Markdown"===t?(0,U.tZ)(ar.Z,{}):(0,U.tZ)(ai.Z,{})})},au=function(e){var t=e.files,n=e.totalFiles;return t===n?(0,U.BX)(V.xv,{css:aa.textContainer,children:["Showing"," ",(0,U.BX)("span",{css:aa.emphasizedText,children:[n," changed ",(0,eH.Z)("file",n),"."]})]}):(0,U.BX)(V.xv,{css:aa.textContainer,children:["Showing"," ",(0,U.BX)("span",{css:aa.emphasizedText,children:[t," of ",n," changed ",(0,eH.Z)("file",n),"."]})]})},ad=function(e){var t=e.query,n=e.setQuery,r=e.totalDiffs,i=e.diffs,o=e.splitOrUnified,a=e.setSplitOrUnified,l=e.folded,c=e.setFolded,s=(0,ee.useMemo)(function(){return i.filter(function(e){var n="".concat(e.final.path,"/").concat(e.final.filename),r="".concat(e.initial.path,"/").concat(e.initial.filename);return n.toLowerCase().includes(t.toLowerCase())||r.toLowerCase().includes(t.toLowerCase())})},[t,i]);return(0,U.BX)(H.G,{css:aa.container,children:[(0,U.tZ)(nG.E,{value:t,onChange:function(e){n(e.target.value)},onClear:function(){n("")},loading:!1,placeholder:"Filter changed files"}),(0,U.BX)(al,{children:[(0,U.tZ)(au,{files:s.length,totalFiles:r}),i.length>0?(0,U.tZ)(ac,{value:o,onChange:function(e){return a(e)}}):null]}),s.map(function(e){var t;return(0,U.tZ)(tO,{folded:null===(t=l[e.id])||void 0===t||t,setFolded:function(t){return c(e.id,t)},diff:e,splitOrUnified:o},e.id)})]})},af=(0,z.X)({metaContainer:[J.l0.rowWithGap(4),J.l0.align.center,J.l0.flex.wrap]}),ah=function(e){var t=e.author,n=e.committer,r=oS(n,t),i=o_(n.date,t.date);return(0,U.BX)(H.G,{css:af.metaContainer,children:[r&&i?(0,U.BX)(U.HY,{children:[(0,U.tZ)(nz,{name:t.name,email:t.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),(0,U.tZ)(V.xv,{variant:"small",children:"authored"}),(0,U.tZ)(nP.EK,{date:t.date,textColor:"dimmest",textVariant:"small"}),(0,U.tZ)(V.xv,{variant:"small",children:"and"})]}):null,r&&!i?(0,U.BX)(U.HY,{children:[(0,U.tZ)(nz,{name:t.name,email:t.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),(0,U.tZ)(V.xv,{variant:"small",children:"authored"}),(0,U.tZ)(V.xv,{variant:"small",children:"and"})]}):null,(0,U.tZ)(nz,{name:n.name,email:n.email,color:"dimmer",allowPlaceholderAvatar:!0,small:!0}),!r&&i?(0,U.BX)(U.HY,{children:[(0,U.tZ)(V.xv,{variant:"small",children:"authored "}),(0,U.tZ)(nP.EK,{date:t.date,textColor:"dimmest",textVariant:"small"}),(0,U.tZ)(V.xv,{variant:"small",children:"and "})]}):null,(0,U.tZ)(V.xv,{variant:"small",children:"committed"}),(0,U.tZ)(nP.EK,{date:n.date,textColor:"dimmest",textVariant:"small"})]})},ap=(0,z.X)({dullText:[J.l0.color.foregroundDimmest],tooltipContainer:[J.l0.display.inlineBlock]}),am=function(e){var t=e.onViewCommitClick,n=e.hash;return(0,U.tZ)("span",{css:ap.tooltipContainer,children:(0,U.tZ)(tU.u,{tooltip:"View commit",children:(0,U.tZ)("button",{css:[J.l0.reset.button,J.l0.linkStyle,J.l0.fontWeight.medium],onClick:function(){return t(n)},children:n.slice(0,7)})})})},av=function(e){var t=e.parents,n=e.grafted,r=e.onViewCommitClick;return(0,U.BX)(V.xv,{variant:"small",children:[(0,U.BX)("span",{css:ap.dullText,children:[n?"Grafted with ":null,t.length," ",(0,eH.Z)("parent",t.length)," "]}),0===t.length?null:t.map(function(e,n){return(0,U.BX)(ee.Fragment,{children:[(0,U.tZ)(am,{hash:e,onViewCommitClick:r}),n===t.length-1?"":(0,U.tZ)("span",{css:ap.dullText,children:", "})]},e)})]})},ag=function(e){var t=e.source,n=e.target;return n?(0,U.BX)(U.HY,{children:[(0,U.tZ)("span",{children:"branch"}),(0,U.tZ)(nJ.Lr,{name:t}),(0,U.tZ)("span",{children:" into "}),(0,U.tZ)(nJ.Lr,{name:n})]}):(0,U.BX)(U.HY,{children:[(0,U.tZ)("span",{children:"branch"}),(0,U.tZ)(nJ.Lr,{name:t})]})},ay="gitCommitSubject",ab=(0,eV.iv)([J.l0.display.inline,{fontSize:"inherit",fontWeight:"inherit",lineHeight:"inherit"}]),aw=(0,z.X)({header:[(Z={},(0,ti._)(Z,"& .".concat(ay),ab),(0,ti._)(Z,"& .".concat(ay," > div"),ab),(0,ti._)(Z,"& .".concat(ay," p"),ab),Z)],markerContainer:[J.l0.display.inlineFlex,J.l0.mr(4)],mergeContainer:[J.l0.rowWithGap(4),J.l0.flex.row,J.l0.flex.wrap,J.l0.align.stretch,J.l0.flex.shrink(0)]}),aZ=function(e){var t=e.merge,n=e.revert,r=e.subject,i=e.remotes,o=e.onViewCommitClick,a=(0,ee.useMemo)(function(){var e,r=null;if((null==t?void 0:t.type)==="pull-request"?r=t.id:n&&(null==n?void 0:n.pr)&&(r=n.pr),r&&i){var o=i.get("origin");if(!o){var a=Array.from(i.values());if(1!==a.length)return;o=a[0]}return null!==(e=rD(o))&&void 0!==e?e:void 0}},[t,i,n]);return(0,U.BX)(V.h4,{level:2,variant:"subheadDefault",multiline:!0,css:aw.header,children:[t?(0,U.BX)("span",{css:aw.mergeContainer,children:[(0,U.tZ)("span",{css:aw.markerContainer,children:(0,U.tZ)(oi,{type:"merge"})}),(0,U.tZ)(nJ.ST,{text:"merged"}),(null==t?void 0:t.type)==="pull-request"?(0,U.BX)(U.HY,{children:["PR ",(0,U.tZ)(nJ.$8,{id:t.id,hash:!0}),(null==n?void 0:n.pr)?(0,U.BX)(U.HY,{children:[(0,U.tZ)(nJ.po,{text:"reverts"})," ",(0,U.tZ)(nJ.$8,{id:n.pr,hash:!0})]}):null]}):null,(null==t?void 0:t.type)==="branch"?(0,U.tZ)(U.HY,{children:(0,U.tZ)(ag,{source:t.source,target:t.target})}):null]}):null,n&&!t?(0,U.BX)(U.HY,{children:[(0,U.tZ)("span",{css:aw.markerContainer,children:(0,U.tZ)(oi,{type:"revert"})}),(0,U.tZ)(nJ.po,{text:"reverted"})," ",(0,U.tZ)("button",{css:[J.l0.reset.button,J.l0.linkStyle,J.l0.fontWeight.medium],onClick:function(){(null==n?void 0:n.hash)!==void 0&&o(n.hash)},children:n.hash.slice(0,7)})," - "]}):null,(0,U.tZ)(nJ.Zr,{className:ay,subject:r,remoteName:a})]})},ax=n(99595),aC=function(e){var t,n=nE(),r=(0,tW.Z)((t=(0,tM._)(function(t){var n,r,i,o,a,l;return(0,tF.Jh)(this,function(c){switch(c.label){case 0:return i=e.hash,[4,t.getFilesForCommit(i)];case 1:if(null==(o=c.sent())?void 0:o.error)return tH({context:"use-commit-diffs",gitService:t,result:o,data:{commit:e}}),[2,{error:o.error,diffs:[]}];return a=(null==o?void 0:null===(n=o.files)||void 0===n?void 0:n.filter(function(e){return["ADDED","MODIFIED","COPIED","RENAMED","TYPE_CHANGED"].includes(e.type)}))||[],l=(null==o?void 0:null===(r=o.files)||void 0===r?void 0:r.filter(function(e){return["DELETED","MODIFIED","COPIED","RENAMED","TYPE_CHANGED"].includes(e.type)}))||[],[2,{error:null,diffs:Array.from(new Set((0,O._)(a).concat((0,O._)(l)))).map(function(e){var t,n;return{id:(0,nt.v4)(),status:e.type,loading:!1,initial:{filename:(0,et.UO)(null!==(t=e.originalPath)&&void 0!==t?t:e.path),path:(0,et.Il)(null!==(n=e.originalPath)&&void 0!==n?n:e.path),content:""},final:{filename:(0,et.UO)(e.path),path:(0,et.Il)(e.path),content:""}}})}]}})}),function(e){return t.apply(this,arguments)}),[e]);return(0,ee.useMemo)(function(){return r?r.error?(n(r.error),null):r:null},[n,r])},ak=(l=(0,tM._)(function(e,t,n,r){var i,o,a;return(0,tF.Jh)(this,function(l){switch(l.label){case 0:return i=""===t?n:"".concat(t,"/").concat(n),[4,e.getFileContents({path:i,revision:r,convertToBase64:(0,et.T3)(i)})];case 1:if((o=l.sent()).error)throw o.error;return[2,null!==(a=null==o?void 0:o.content)&&void 0!==a?a:""]}})}),function(e,t,n,r){return l.apply(this,arguments)}),aS=(c=(0,tM._)(function(e,t,n){var r,i,o,a;return(0,tF.Jh)(this,function(l){switch(l.label){case 0:return i=t.hash,[4,ak(e,n.final.path,n.final.filename,i)];case 1:if(o=l.sent(),a="",!(!t.grafted&&(null===(r=t.parents)||void 0===r?void 0:r.length)))return[3,3];return[4,ak(e,n.initial.path,n.initial.filename,"".concat(i,"^"))];case 2:a=l.sent(),l.label=3;case 3:return[2,(0,em._)((0,ep._)({},n),{loading:!1,initial:(0,em._)((0,ep._)({},n.initial),{content:a}),final:(0,em._)((0,ep._)({},n.final),{content:o})})]}})}),function(e,t,n){return c.apply(this,arguments)}),a_=(0,z.X)({content:[J.l0.colWithGap(16),J.l0.p(16)],splitContainer:[J.l0.display.flex,J.l0.flex.row,J.l0.flex.shrink(1),J.l0.flex.wrap,J.l0.justify.spaceBetween,J.l0.maxWidth("100%"),J.l0.border({color:J.TV.outlineDimmest,direction:"bottom"}),J.l0.pb(16)]}),aE=function(e){var t,n,r=e.git,i=e.commit,o=e.info,a=e.onViewCommitClick,l=void 0===a?function(){}:a,c=e.remotes,s=e.status,u=(0,ee.useMemo)(function(){return(0,iB.w)(s?s.changes.map(function(e){return e.path}):[])},[s]),d=(0,ee.useMemo)(function(){if(!s)return[];var e=[],t=!0,n=!1,r=void 0;try{for(var i,o=s.changes[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;a.type.worktree!==to.hF.UNMODIFIED&&e.push(a)}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return e},[s]),f=(0,ax.Z)().showConfirm,h=nE(),p=(0,N._)((0,ee.useState)(!1),2),m=p[0],v=p[1],g=(0,N._)((0,ee.useState)(""),2),y=g[0],b=g[1],w=(0,N._)((0,ee.useState)("Split"),2),Z=w[0],x=w[1],C=(0,N._)((0,ee.useState)("Markdown"),2),k=C[0],S=C[1],_=(0,N._)((0,ee.useState)({}),2),E=_[0],T=_[1],R=(0,N._)((0,ee.useState)([]),2),D=R[0],I=R[1],B=ox(i,o),G=B.hideBody,P=B.merge,A=B.revert,L=i.hash,X=i.subject,M=i.body,F=i.committer,W=i.author,z=i.grafted,j=null!==(n=i.parents)&&void 0!==n?n:[],q=aC(i),Y=(0,ee.useCallback)((0,tM._)(function(){var e,t,n,o=arguments;return(0,tF.Jh)(this,function(a){switch(a.label){case 0:return e=!(o.length>0)||void 0===o[0]||o[0],[4,r.restoreFiles(e,i.hash)];case 1:if((t=a.sent()).error)return[3,3];return[4,r.status()];case 2:return(n=a.sent()).error?(h(n.error),tH({context:"commit-view",gitService:r,result:n,data:{files:e,commit:i.hash}})):f("Restored commit!"),r.forceRefresh(),[3,4];case 3:h(t.error),tH({context:"commit-view",gitService:r,result:t,data:{files:e,commit:i.hash}}),a.label=4;case 4:return[2]}})}),[i.hash,r,h,f]),$=iZ(u),K=$.openRestoreConfirmationModal,Q=$.restoreConfirmationModal,et=(0,ee.useCallback)((0,tM._)(function(){var e,t,n,r=arguments;return(0,tF.Jh)(this,function(i){switch(i.label){case 0:if(!0!==(e=!(r.length>0)||void 0===r[0]||r[0]))return[3,6];if(v(!0),0!==d.length)return[3,2];return[4,Y()];case 1:return i.sent(),v(!1),[2];case 2:return[4,K(d)];case 3:if(!i.sent())return[3,5];return[4,Y()];case 4:i.sent(),i.label=5;case 5:return v(!1),[3,10];case 6:if("string"==typeof e){if(!(n=d.find(function(t){return t.path===e})))throw v(!1),Error("Could not find file in worktree list");t=[n]}else t=d.filter(function(t){return e.includes(t.path)});return[4,K(t)];case 7:if(!i.sent())return[3,9];return[4,Y(e)];case 8:i.sent(),i.label=9;case 9:v(!1),i.label=10;case 10:return[2]}})}),[K,Y,d]);(0,ee.useEffect)(function(){var e;I(null!==(e=null==q?void 0:q.diffs.map(function(e){return(0,em._)((0,ep._)({},e),{loading:!0})}))&&void 0!==e?e:[])},[q]),(0,ee.useEffect)(function(){null!==q&&q.error&&h(q.error)},[q,h]);var en=(t=(0,tM._)(function(e,t){var n,o,a;return(0,tF.Jh)(this,function(l){switch(l.label){case 0:if(T(function(n){var r=(0,ep._)({},n);return r[e]=t,r}),!(n=D.find(function(t){return t.id===e})))return h(to.aq.INVALID_STATE),tH({context:"commit-view",gitService:r,result:{error:to.aq.INVALID_STATE},data:{diffId:e}}),[2];if(!(!t&&n.loading))return[3,4];l.label=1;case 1:return l.trys.push([1,3,,4]),[4,aS(r,i,n)];case 2:return o=l.sent(),I(function(t){var n=(0,O._)(t),r=n.findIndex(function(t){return t.id===e});return n[r]=o,n}),[3,4];case 3:return tH({context:"commit-view",gitService:r,result:a=l.sent(),data:{diffId:e}}),h(a),[2];case 4:return[2]}})}),function(e,n){return t.apply(this,arguments)});return(0,U.BX)(H.G,{css:a_.content,children:[(0,U.tZ)(aZ,{remotes:c,merge:P,revert:A,subject:X,onViewCommitClick:l}),(0,U.BX)(al,{children:[(0,U.BX)(H.G,{css:[J.l0.rowWithGap(8),J.l0.align.start,J.l0.flex.shrink(1)],children:[(0,U.tZ)(oC,{hash:L}),(0,U.tZ)(ok,{onClick:function(){return et()},text:"Restore All",loading:m})]}),G?null:(0,U.tZ)(as,{value:k,onChange:function(e){S(e)}})]}),G?null:(0,U.tZ)(nJ.uJ,{body:M,view:k}),(0,U.BX)(H.G,{css:a_.splitContainer,children:[(0,U.tZ)(ah,{author:W,committer:F}),(0,U.tZ)(av,{parents:j,grafted:z,onViewCommitClick:l})]}),null!==P?(0,U.tZ)(V.xv,{variant:"small",color:"dimmest",children:"There is more than one parent, diffing against the first parent."}):null,null===q?(0,U.tZ)(oz,{}):(0,U.tZ)(ad,{query:y,setQuery:b,totalDiffs:q.diffs.length,diffs:D,splitOrUnified:Z,setSplitOrUnified:x,folded:E,setFolded:en}),Q]})};function aT(e){var t=e.hash,n=e.remotes,r=e.onViewCommitClick,i=e.switchMode,o=e.status,a=(0,Y.Z)().git,l=nE(),c=an(null!=t?t:"");if(null===c)return(0,U.tZ)(oz,{});if(c.error)return c.error===to.aq.NOT_INITIALIZED?i({mode:w.CURRENT_BRANCH}):(l(c.error),(c.error===to.aq.UNKNOWN||c.error===to.aq.UNKNOWN_NOT_GIT)&&tH({context:"commit-view",gitService:a,result:c,data:{hash:t}})),null;if(null===c.commit)return l(to.aq.UNKNOWN),null;var s=c.commit,u=oe(s)||i8(s);return(0,U.tZ)(aE,{git:a,commit:s,info:u,onViewCommitClick:r,remotes:n,status:o})}var aR=n(29907),aD=(0,z.X)({container:[J.l0.colWithGap(4)],file:[J.l0.rowWithGap(8),J.l0.align.center],fileLeft:[J.l0.rowWithGap(8),J.l0.flex.grow(1),J.l0.align.center],filePrefix:[J.l0.color.foregroundDimmest]});function aI(e){var t=e.files,n=e.uniquePathMap,r=e.onFileClick,i=[];if(t instanceof Map){var o=!0,a=!1,l=void 0;try{for(var c,s=t[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=(0,N._)(c.value,2),d=u[0],f=u[1],h=n.get(d);i.push({path:d,prefix:h,resolved:f})}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}}else{var p=!0,m=!1,v=void 0;try{for(var g,y=t[Symbol.iterator]();!(p=(g=y.next()).done);p=!0){var b=g.value,w=n.get(b);i.push({path:b,prefix:w,resolved:!0})}}catch(e){m=!0,v=e}finally{try{p||null==y.return||y.return()}finally{if(m)throw v}}}return(0,U.tZ)(H.G,{css:aD.container,children:i.map(function(e){var t=e.path,n=e.prefix,i=e.resolved;return(0,U.BX)(H.G,{css:aD.file,children:[(0,U.BX)(H.G,{css:aD.fileLeft,children:[(0,U.tZ)(W.Z,{path:t}),(0,U.tZ)(V.xv,{multiline:!1,children:(0,U.tZ)(nJ.yx,{path:t,prefix:n,onClick:function(){return r({path:t,type:"conflict"})}})})]}),i?(0,U.tZ)(rZ.Z,{color:J.TV.greenStronger}):(0,U.tZ)(rg.Z,{color:J.TV.orangeStronger})]},t)})})}function aB(e){var t=e.hasConflicts?(0,U.BX)(U.HY,{children:[(0,U.tZ)("span",{css:J.l0.fontWeight.medium,children:"Resolve all conflicts to complete merge."}),(0,U.tZ)("br",{}),(0,U.tZ)("span",{children:"You can't do anything else until the merge has been completed or aborted."})]}):(0,U.BX)(U.HY,{children:[(0,U.tZ)("span",{css:J.l0.fontWeight.medium,children:"You are in the middle of a merge."}),(0,U.tZ)("br",{}),(0,U.tZ)("span",{children:"You can't do anything else until the merge has been completed or aborted. You have no conflicts to resolve, so the merge can be completed without any further action."})]});return(0,U.tZ)(e6.E,{colorway:"warning",icon:(0,U.tZ)(rg.Z,{}),text:t})}var aG=(0,z.X)({container:[J.l0.rowWithGap(4),J.l0.align.center,J.l0.justify.spaceBetween],left:[{flexBasis:0,flexGrow:1},J.l0.colWithGap(8)],right:{flexBasis:0,flexGrow:1},branch:[J.l0.p(8),J.l0.rowWithGap(4),J.l0.flex.grow(1),J.l0.center,J.l0.borderRadius(8)]});function aP(e){var t,n=e.branch,r=e.refs,i=e.refsAreBranches,o=e.isUpstreamPull;if(!r.length)return null;if(o){var a=(0,N._)((0,to.Tg)(r[0]),2),l=a[0],c=a[1];l&&c&&(t=(0,U.tZ)(ew.Tg,{css:aG.branch,elevated:!0,children:(0,U.tZ)(nJ.Lr,{remote:l,name:c,icon:!0,heading:!0})}))}return t||(t=r.map(function(e){return(0,U.tZ)(ew.Tg,{css:aG.branch,elevated:!0,children:(0,U.tZ)(nJ.Lr,{name:e,icon:!!i||(0,U.tZ)(tX.Z,{size:16}),heading:!0})},e)})),(0,U.BX)(H.G,{css:aG.container,children:[(0,U.tZ)(H.G,{css:aG.left,children:t}),(0,U.tZ)(eZ.Z,{size:24,color:J.TV.foregroundDimmest}),(0,U.tZ)(H.G,{css:aG.right,children:(0,U.tZ)(ew.Tg,{css:aG.branch,elevated:!0,children:(0,U.tZ)(nJ.Lr,{name:n,icon:!0,current:!0,heading:!0})})})]})}var aA=(0,z.X)({container:[J.l0.colWithGap(12),J.l0.pt(16),J.l0.pb(8),J.l0.px(8)],fakePaneHeader:[J.l0.p(8),J.l0.rowWithGap(8),J.l0.backgroundColor.backgroundDefault,J.l0.align.center,{borderBottom:"1px solid ".concat(J.TV.outlineDimmer)}],conflictResolution:[J.l0.colWithGap(16)],listContainer:[J.l0.p(8),J.l0.colWithGap(8),J.l0.borderRadius(8)],list:[J.l0.pb(8),J.l0.colWithGap(8)],listDisabled:[{opacity:.5},J.l0.pb(8),J.l0.colWithGap(8)],listHeader:[J.l0.pb(4),J.l0.flex.grow(1),J.l0.border({color:J.TV.outlineDimmer,direction:"bottom"})],listFiles:[J.l0.px(8)],includeOtherFiles:[{cursor:"pointer",maxWidth:"max-content",userSelect:"none"},J.l0.rowWithGap(8)],buttons:[J.l0.colWithGap(8)]});function aL(e){var t,n=e.onFileClick,r=e.gotoPendingState,i=(0,N._)((0,ee.useState)(!0),2),o=i[0],a=i[1],l=(0,N._)((0,ee.useState)(!1),2),c=l[0],s=l[1],u=(0,N._)((0,ee.useState)(!1),2),d=u[0],f=u[1],h=c||d,p=nE(),m=(0,Y.Z)().git,v=(0,ee.useId)(),g=(0,tW.Z)((t=(0,tM._)(function(e){var t,n,r,i,o,a,l,c,s,u,d,f,h,p,m,v,g,y,b,w;return(0,tF.Jh)(this,function(Z){switch(Z.label){case 0:return[4,e.status()];case 1:if((t=Z.sent()).error)return tH({context:"use-merging-view-state-status",gitService:e,result:t}),[2,t];if(!(n=t.branch))return[2,{error:to.aq.HEAD_DETACHED}];return[4,e.getConflictingFiles()];case 2:if((r=Z.sent()).error)return[2,r];return i=r.files,[4,e.getMergingRefs()];case 3:if((o=Z.sent()).error)return tH({context:"use-merging-view-state-merging-refs",gitService:e,result:o,data:{status:t,conflictingFiles:i}}),[2,o];a=o.commits,s=(c=(l=o.branches).length>0)?l:a,u=t.changes.filter(function(e){return!e.unmerged}).map(function(e){return e.path}),d=!0,f=!0,h=!1,p=void 0;try{for(m=i[Symbol.iterator]();!(f=(v=m.next()).done);f=!0)if(!(0,N._)(v.value,2)[1]){d=!1;break}}catch(e){h=!0,p=e}finally{try{f||null==m.return||m.return()}finally{if(h)throw p}}return g=(0,iB.w)(t.changes.map(function(e){return e.path})),y=i.size>0,b=u.length>0,w=null!==t.upstream&&1===l.length&&l[0]===t.upstream.branch,[2,{refs:s,branch:n,conflictingFiles:i,otherChangedFiles:u,refsAreBranches:c,allIsResolved:d,uniquePathMap:g,hasConflicts:y,hasOtherChanges:b,isUpstreamPull:w,error:null}]}})}),function(e){return t.apply(this,arguments)}));if((0,ee.useEffect)(function(){(null==g?void 0:g.error)&&p(g.error)},[null==g?void 0:g.error,p]),!g)return(0,U.tZ)(oz,{});if(g.error)return null;var y=g.refs,b=g.branch,w=g.conflictingFiles,Z=g.otherChangedFiles,x=g.refsAreBranches,C=g.allIsResolved,k=g.uniquePathMap,S=g.hasConflicts,_=g.hasOtherChanges,E=g.isUpstreamPull;function T(){return(T=(0,tM._)(function(){var e,t,n,i,a,l,c,u,d,f,v;return(0,tF.Jh)(this,function(g){switch(g.label){case 0:if(!C||h)return[2];s(!0),e=[],t=!0,n=!1,i=void 0;try{for(a=w.keys()[Symbol.iterator]();!(t=(l=a.next()).done);t=!0)c=l.value,e.push(c)}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return o&&(u=e).push.apply(u,(0,O._)(Z)),[4,m.stageFiles({all:!1})];case 1:if((d=g.sent()).error)return p(d.error),s(!1),[2];return[4,m.stageFiles({add:e})];case 2:if((f=g.sent()).error)return p(f.error),s(!1),[2];return[4,m.mergeContinue()];case 3:if(!(v=g.sent()).error)return[3,5];return[4,m.stageFiles({all:!1})];case 4:return g.sent(),p(v.error),s(!1),[3,6];case 5:r(),m.forceRefresh(),g.label=6;case 6:return[2]}})})).apply(this,arguments)}function R(){return(R=(0,tM._)(function(){var e;return(0,tF.Jh)(this,function(t){switch(t.label){case 0:if(h)return[2];return f(!0),[4,m.mergeAbort()];case 1:return(e=t.sent()).error?(p(e.error),f(!1),tH({context:"merging-view-abort",gitService:m,result:e,data:{branch:b}})):(r(),m.forceRefresh()),[2]}})})).apply(this,arguments)}var D=E?"Complete in-progress pull":"Complete in-progress merge";return S&&(D=E?"Resolve pull conflicts":"Resolve merge conflicts"),(0,U.BX)(H.G,{children:[(0,U.BX)(H.G,{css:aA.fakePaneHeader,children:[(0,U.tZ)(aR.Z,{}),(0,U.tZ)(V.xv,{variant:"subheadDefault",multiline:!1,children:D})]}),(0,U.BX)(H.G,{css:aA.container,children:[(0,U.tZ)(aP,{branch:b,refs:y,refsAreBranches:x,isUpstreamPull:E}),(0,U.tZ)(aB,{hasConflicts:S}),(0,U.BX)(ew.Tg,{css:aA.listContainer,elevated:!0,children:[(0,U.BX)(H.G,{css:aA.list,children:[(0,U.tZ)(H.G,{css:aA.listHeader,children:(0,U.tZ)(V.xv,{css:J.l0.fontWeight.medium,multiline:!1,children:"Conflicting Files"})}),(0,U.tZ)(H.G,{css:aA.listFiles,children:S?(0,U.tZ)(aI,{files:w,uniquePathMap:k,onFileClick:n}):(0,U.tZ)(V.xv,{variant:"small",color:"dimmest",multiline:!1,children:"There are no conflicting files in this merge."})})]}),_?(0,U.BX)(H.G,{css:o?aA.list:aA.listDisabled,children:[(0,U.tZ)(H.G,{css:aA.listHeader,children:(0,U.tZ)(V.xv,{css:J.l0.fontWeight.medium,multiline:!1,children:"Other Changed Files"})}),(0,U.tZ)(H.G,{css:aA.listFiles,children:(0,U.tZ)(aI,{files:Z,uniquePathMap:k,onFileClick:n})})]}):null]}),(0,U.BX)(H.G,{css:aA.includeOtherFiles,tag:"label",children:[(0,U.tZ)(rp.X,{id:v,checked:o,onChange:function(e){return a(e)}}),(0,U.tZ)(V.xv,{multiline:!1,children:"Include other changed files in commit"})]}),(0,U.BX)(H.G,{css:aA.buttons,children:[(0,U.tZ)(eb.zx,{text:E?"Complete pull":"Complete merge and commit",colorway:"primary",iconLeft:c?(0,U.tZ)(q.Z,{}):(0,U.tZ)(aR.Z,{}),disabled:!C||h,loading:c,onClick:function(){return T.apply(this,arguments)}}),(0,U.tZ)(eb.zx,{text:E?"Abort pull":"Abort merge",colorway:"negative",iconLeft:d?(0,U.tZ)(q.Z,{}):(0,U.tZ)(ih.Z,{}),disabled:h,loading:d,onClick:function(){return R.apply(this,arguments)}})]})]})]})}var aN=(0,z.X)({container:[J.l0.colWithGap(12),J.l0.pt(16),J.l0.pb(8),J.l0.px(8)],fakePaneHeader:[J.l0.p(8),J.l0.rowWithGap(8),J.l0.backgroundColor.backgroundDefault,J.l0.align.center,{borderBottom:"1px solid ".concat(J.TV.outlineDimmer)}],conflictResolution:[J.l0.colWithGap(16)],listContainer:[J.l0.p(8),J.l0.colWithGap(8),J.l0.borderRadius(8)],list:[J.l0.pb(8),J.l0.colWithGap(8)],listDisabled:[{opacity:.5},J.l0.pb(8),J.l0.colWithGap(8)],listHeader:[J.l0.pb(4),J.l0.flex.grow(1),J.l0.border({color:J.TV.outlineDimmer,direction:"bottom"})],listFiles:[J.l0.px(8)],includeOtherFiles:[{cursor:"pointer",maxWidth:"max-content",userSelect:"none"},J.l0.rowWithGap(8)],buttons:[J.l0.colWithGap(8)]});function aO(e){var t,n=e.onFileClick,r=e.gotoPendingState,i=(0,N._)((0,ee.useState)(!0),2),o=i[0],a=i[1],l=(0,N._)((0,ee.useState)(!1),2),c=l[0],s=l[1],u=(0,N._)((0,ee.useState)(!1),2),d=u[0],f=u[1],h=c||d,p=nE(),m=(0,Y.Z)().git,v=(0,ee.useId)(),g=(0,tW.Z)((t=(0,tM._)(function(e){var t,n,r,i,o,a,l,c,s,u,d,f,h,p;return(0,tF.Jh)(this,function(m){switch(m.label){case 0:return[4,e.status()];case 1:if((t=m.sent()).error)return tH({context:"use-rebasing-view-state-status",gitService:e,result:t}),[2,t];if(!(n=t.branch))return[2,{error:to.aq.HEAD_DETACHED}];return[4,e.getConflictingFiles()];case 2:if((r=m.sent()).error)return[2,r];i=r.files,o=t.changes.filter(function(e){return!e.unmerged}).map(function(e){return e.path}),a=!0,l=!0,c=!1,s=void 0;try{for(u=i[Symbol.iterator]();!(l=(d=u.next()).done);l=!0)if(!(0,N._)(d.value,2)[1]){a=!1;break}}catch(e){c=!0,s=e}finally{try{l||null==u.return||u.return()}finally{if(c)throw s}}return f=(0,iB.w)(t.changes.map(function(e){return e.path})),h=i.size>0,p=o.length>0,[2,{branch:n,conflictingFiles:i,otherChangedFiles:o,allIsResolved:a,uniquePathMap:f,hasConflicts:h,hasOtherChanges:p,error:null}]}})}),function(e){return t.apply(this,arguments)}));if((0,ee.useEffect)(function(){(null==g?void 0:g.error)&&p(g.error)},[null==g?void 0:g.error,p]),!g)return(0,U.tZ)(oz,{});if(g.error)return null;var y=g.branch,b=g.conflictingFiles,w=g.otherChangedFiles,Z=g.allIsResolved,x=g.uniquePathMap,C=g.hasConflicts,k=g.hasOtherChanges;function S(){return(S=(0,tM._)(function(){var e,t,n,i,a,l,c,u,d,f,v;return(0,tF.Jh)(this,function(g){switch(g.label){case 0:if(!Z||h)return[2];s(!0),e=[],t=!0,n=!1,i=void 0;try{for(a=b.keys()[Symbol.iterator]();!(t=(l=a.next()).done);t=!0)c=l.value,e.push(c)}catch(e){n=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}return o&&(u=e).push.apply(u,(0,O._)(w)),[4,m.stageFiles({all:!1})];case 1:if((d=g.sent()).error)return p(d.error),s(!1),[2];return[4,m.stageFiles({add:e})];case 2:if((f=g.sent()).error)return p(f.error),s(!1),[2];return[4,m.escapeHatchGitExecWrite("git rebase --continue")];case 3:if(!(v=g.sent()).error)return[3,5];return[4,m.stageFiles({all:!1})];case 4:return g.sent(),p(v.error),s(!1),[3,6];case 5:r(),m.forceRefresh(),g.label=6;case 6:return[2]}})})).apply(this,arguments)}function _(){return(_=(0,tM._)(function(){var e;return(0,tF.Jh)(this,function(t){switch(t.label){case 0:if(h)return[2];return f(!0),[4,m.escapeHatchGitExecWrite("git rebase --abort")];case 1:return(e=t.sent()).error?(p(e.error),f(!1),tH({context:"rebasing-view-abort",gitService:m,result:e,data:{branch:y}})):(r(),m.forceRefresh()),[2]}})})).apply(this,arguments)}var E="Complete in-progress rebase";return C&&(E="Resolve conflicts"),(0,U.BX)(H.G,{children:[(0,U.BX)(H.G,{css:aN.fakePaneHeader,children:[(0,U.tZ)(aR.Z,{}),(0,U.tZ)(V.xv,{variant:"subheadDefault",multiline:!1,children:E})]}),(0,U.BX)(H.G,{css:aN.container,children:[(0,U.tZ)(aB,{hasConflicts:C}),(0,U.BX)(ew.Tg,{css:aN.listContainer,elevated:!0,children:[(0,U.BX)(H.G,{css:aN.list,children:[(0,U.tZ)(H.G,{css:aN.listHeader,children:(0,U.tZ)(V.xv,{css:J.l0.fontWeight.medium,multiline:!1,children:"Conflicting Files"})}),(0,U.tZ)(H.G,{css:aN.listFiles,children:C?(0,U.tZ)(aI,{files:b,uniquePathMap:x,onFileClick:n}):(0,U.tZ)(V.xv,{variant:"small",color:"dimmest",multiline:!1,children:"There are no conflicting files in this step."})})]}),k?(0,U.BX)(H.G,{css:o?aN.list:aN.listDisabled,children:[(0,U.tZ)(H.G,{css:aN.listHeader,children:(0,U.tZ)(V.xv,{css:J.l0.fontWeight.medium,multiline:!1,children:"Other Changed Files"})}),(0,U.tZ)(H.G,{css:aN.listFiles,children:(0,U.tZ)(aI,{files:w,uniquePathMap:x,onFileClick:n})})]}):null]}),(0,U.BX)(H.G,{css:aN.includeOtherFiles,tag:"label",children:[(0,U.tZ)(rp.X,{id:v,checked:o,onChange:function(e){return a(e)}}),(0,U.tZ)(V.xv,{multiline:!1,children:"Include other changed files in commit"})]}),(0,U.BX)(H.G,{css:aN.buttons,children:[(0,U.tZ)(eb.zx,{text:"commit and continue rebase",colorway:"primary",iconLeft:c?(0,U.tZ)(q.Z,{}):(0,U.tZ)(aR.Z,{}),disabled:!Z||h,loading:c,onClick:function(){return S.apply(this,arguments)}}),(0,U.tZ)(eb.zx,{text:"Abort rebase",colorway:"negative",iconLeft:d?(0,U.tZ)(q.Z,{}):(0,U.tZ)(ih.Z,{}),disabled:h,loading:d,onClick:function(){return _.apply(this,arguments)}})]})]})]})}var aU=n(94201),aX=n(42965),aM=n(3615),aF=n(7391),aW=(0,z.X)({gitProfileTitle:[J.l0.rowWithGap(8),J.l0.align.center]});function aV(e){var t=e.username,n=e.avatar;return(0,U.BX)(H.G,{css:aW.gitProfileTitle,children:[(0,U.tZ)(nN.q,{src:null!=n?n:"/images/evalbot/evalbot_24",username:t}),(0,U.tZ)(V.xv,{variant:"subheadDefault",multiline:!1,children:t})]})}var aH=(0,z.X)({list:{"> div:first-child":J.l0.borderRadius(8,8,0,0),"> div:last-child":[J.l0.borderRadius(0,0,8,8),{border:"none"}]},profile:[nI.gU.filled,J.l0.flex.row,J.l0.justify.spaceBetween,J.l0.p(12),J.l0.borderRadius(0),J.l0.border({color:J.TV.outlineDefault,direction:"bottom"})],information:[J.l0.colWithGap(4),J.l0.flex.shrink(1)],informationRow:[J.l0.rowWithGap(8),J.l0.align.center],email:[J.l0.flex.shrink(1)],connectToGithubContainer:[J.l0.colWithGap(4),J.l0.p(12),J.l0.backgroundColor.backgroundHigher],divider:[J.l0.backgroundColor.outlineDefault],connectToGitHubTitle:[J.l0.rowWithGap(4),J.l0.align.center],notConnectedText:[J.l0.pb(4)],settingsButton:{background:"transparent",border:"none","&:hover":{textDecoration:"underline"}},radio:{pointerEvents:"none"}});function az(e){var t=e.profiles,n=e.current,r=e.showConnectToGithub,i=e.onSelectProvider,o=(0,aF.useRouter)(),a=(0,aX.Gv)(o),l=(0,ee.useId)();return(0,U.BX)(aM.E,{name:l,css:aH.list,value:null!=n?n:"",children:[t.map(function(e){t=e.provider===to.rG.GITHUB?"GitHub":"Default Profile";var t,r=void 0;return e.provider===to.rG.GITHUB&&(r=a?"/mobile/auth/github/app_permissions":"/auth/github/app_permissions?close=1"),(0,U.tZ)(aj,{profile:e,providerName:t,current:e.provider===n,onSelectProvider:i,settingsURL:r},e.provider)}),r?(0,U.BX)(H.G,{css:aH.connectToGithubContainer,children:[(0,U.tZ)(H.G,{css:aH.connectToGitHubTitle,children:(0,U.tZ)(aV,{username:"GitHub Account"})}),(0,U.tZ)(V.xv,{color:"dimmest",css:aH.notConnectedText,multiline:!1,children:"Your GitHub account is not connected."}),(0,U.tZ)(rS,{})]}):null]})}function aj(e){var t=e.profile,n=e.current,r=e.providerName,i=e.settingsURL,o=e.onSelectProvider,a=t.provider,l=t.name,c=t.username,s=t.email,u=t.avatar,d=(0,ee.useId)();return(0,U.BX)(H.G,{onClick:function(){return o(a)},css:aH.profile,children:[(0,U.BX)(H.G,{css:aH.information,children:[(0,U.BX)(H.G,{css:aH.informationRow,children:[(0,U.tZ)(aV,{username:c,avatar:u}),i?(0,U.tZ)(ec.Z,{css:aH.settingsButton,text:"".concat(r," Settings"),iconRight:(0,U.tZ)(r1.Z,{}),href:i,target:"_blank",variant:"outlined",size:"small"}):(0,U.tZ)(V.xv,{color:"dimmest",variant:"small",multiline:!1,children:r})]}),(0,U.BX)(V.xv,{color:"dimmest",css:aH.email,multiline:!1,children:[l," <",s,">"]})]}),(0,U.tZ)(aM.Y,{css:aH.radio,id:d,checked:n,value:a})]})}var aq=(0,z.X)({profileContainer:[J.l0.flex.column]});function aJ(){var e,t=(0,Y.Z)().git,n=(0,tW.Z)((e=(0,tM._)(function(e){var t,n;return(0,tF.Jh)(this,function(r){return t=e.getCurrentProfile(),[2,{profiles:e.getProfiles(),current:null!==(n=null==t?void 0:t.provider)&&void 0!==n?n:null,hasGitHub:!e.hasProfile(to.rG.GITHUB),error:null}]})}),function(t){return e.apply(this,arguments)}));if(!n)return null;if(null!==n.error)return tH({context:"git-profiles",gitService:t,result:{error:n.error}}),null;var r=n.profiles,i=n.current,o=n.hasGitHub;return(0,U.tZ)(H.G,{css:aq.profileContainer,children:(0,U.tZ)(az,{profiles:r,current:i,showConnectToGithub:o,onSelectProvider:function(e){t.setCurrentProfile(e),e===to.rG.REPLIT_DEFAULT?(0,nq.J)("profile-changed",{profile:"replit"}):e===to.rG.GITHUB&&(0,nq.J)("profile-changed",{profile:"github"})}})})}var aY=n(34030),a$=n(31089),aK=n(85983),aQ=n(82303);function a0(){var e=(0,eK._)(["\n  query GithubRemoteConfigRepl($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        description\n        isPrivate\n        slug\n        url\n      }\n    }\n  }\n"]);return a0=function(){return e},e}function a1(){var e=(0,eK._)(["\n  query GithubRemoteConfigUser {\n    currentUser {\n      ... on CurrentUser {\n        id\n        gitHubInfo {\n          accessToken\n        }\n      }\n    }\n  }\n"]);return a1=function(){return e},e}function a2(){var e=(0,eK._)(["\n  mutation GithubRemoteConfigCreateGithubRepo($input: CreateGithubRepoInput!) {\n    createGithubRepo(input: $input) {\n      ... on CreateGithubRepoResult {\n        remoteUrl\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return a2=function(){return e},e}var a3={},a4=(0,eQ.Ps)(a0());a1();var a8=(0,eQ.Ps)(a2()),a6=(0,z.X)({errorText:[J.l0.color.accentNegativeStronger,J.l0.pl(4)]});function a5(e){var t,n,r,i,o=e.remoteName,a=e.updateRemote,l=(0,ax.Z)().showConfirm,c=(0,Y.Z)().git,s=(0,t4.Z)(),u=rC(),d=(0,a$.U)(),f=(0,e$.Z)(),h=(0,ee.useRef)(null),p=(0,ee.useRef)(null),m=(0,N._)((0,ee.useState)(),2),v=m[0],g=m[1],y=(t=(0,ep._)({},a3,{variables:{replId:f}}),e0.a(a4,t)).data,b=(null==y?void 0:y.repl.__typename)==="Repl"?y.repl:{slug:void 0,description:void 0,isPrivate:void 0,url:void 0},w=b.slug,Z=b.description,x=b.isPrivate,C=b.url,k=(0,N._)((n=(0,ep._)({},a3,void 0),aQ.D(a8,n)),2),S=k[0],_=k[1].loading,E=(0,rw.v)({onAuth:function(){(0,nq.J)("github-user-connected")}}),T=(0,N._)((0,ee.useState)(null==x||x),2),R=T[0],D=T[1],I=(0,N._)((0,ee.useState)(w),2),B=I[0],G=I[1],P=(0,N._)((0,ee.useState)(),2),A=P[0],L=P[1],O=(0,N._)((0,ee.useState)(null!=Z?Z:C&&"Repository for https://replit.com".concat(C)),2),X=O[0],M=O[1],F=(0,N._)((0,ee.useState)(),2),W=F[0],z=F[1],j=function(){L(void 0),z(void 0),g(void 0)},q=(r=(0,tM._)(function(e){var t,n,r;return(0,tF.Jh)(this,function(i){switch(i.label){case 0:return[4,c.getRemotes()];case 1:if((t=i.sent()).error)return g("Error finding current remotes, ".concat(t.error)),[2];if(!t.remotes.has(o))return[3,3];return[4,c.setRemoteURL({remote:o,url:e})];case 2:if((n=i.sent()).error)return g("Error (".concat(n.error,") setting ").concat(o," to use ").concat(e," as a remote.")),[2];return a(e),(0,nq.J)("remote-edited"),[2];case 3:return[4,c.addRemote({name:o,url:e})];case 4:if((r=i.sent()).error)return g("Error (".concat(r.error,") adding ").concat(o," ").concat(e," as a remote.")),[2];return a(e),(0,nq.J)("remote-added"),[2]}})}),function(e){return r.apply(this,arguments)}),$=(i=(0,tM._)(function(){var e,t,n,r;return(0,tF.Jh)(this,function(i){switch(i.label){case 0:if(j(),!B)return[2];if(!(0,to.GE)(B))return L("Invalid remote name."),[2];return[4,S({variables:{input:{name:B,description:null!=Z?Z:null,homepage:"replit.com".concat(C),isPrivate:R,ownerType:aK.xJ.User}}})];case 1:if((null===(e=(r=i.sent()).data)||void 0===e?void 0:e.createGithubRepo.__typename)==="UnauthorizedError"||(null===(t=r.data)||void 0===t?void 0:t.createGithubRepo.__typename)==="UserError")return g(r.data.createGithubRepo.message),[2];return(null===(n=r.data)||void 0===n?void 0:n.createGithubRepo.__typename)==="CreateGithubRepoResult"&&(q(r.data.createGithubRepo.remoteUrl),(0,nq.J)("github-repository-published"),l("Created repository on Github")),[2]}})}),function(){return i.apply(this,arguments)});return u?(0,U.BX)(H.G,{children:[(0,U.tZ)(V.xv,{color:"dimmest",multiline:!1,children:"Repository name"}),(0,U.tZ)(eg.II,{ref:h,placeholder:"Enter repository name",value:B,onChange:function(e){L(void 0),G(e.target.value)},onKeyDown:function(e){if("Enter"===e.key){var t;e.preventDefault(),null===(t=p.current)||void 0===t||t.focus()}}}),(0,U.tZ)(V.xv,{css:a6.errorText,multiline:!1,children:A}),(0,U.tZ)(aU.Z,{height:1}),(0,U.tZ)(V.xv,{color:"dimmest",multiline:!1,children:"Repository description"}),(0,U.tZ)(eg.B,{ref:p,maxLength:350,name:"Repository description",placeholder:"Enter repository description",value:null!=X?X:void 0,onChange:function(e){z(void 0),M(e.target.value)}}),(0,U.tZ)(V.xv,{css:a6.errorText,multiline:!1,children:W}),(0,U.tZ)(aU.Z,{height:1}),(0,U.tZ)(V.xv,{color:"dimmest",multiline:!1,children:"Privacy"}),(0,U.BX)(tx.hE,{tag:"fieldset",id:d("privacy"),name:d("privacy"),value:R,onChange:function(e){return D(e)},row:!0,css:[J.l0.width("100%")],children:[(0,U.tZ)(tx.rK,{id:d("false"),value:!1,text:"Public",icon:(0,U.tZ)(aY.Z,{})}),(0,U.tZ)(tx.rK,{id:d("true"),value:!0,text:"Private",icon:(0,U.tZ)(nm.Z,{})})]}),(0,U.tZ)(aU.Z,{height:2}),(0,U.tZ)(eb.zx,{text:_?"Creating Repository on GitHub":"Create Repository on GitHub",colorway:"primary",iconLeft:(0,U.tZ)(rx.Z,{}),onClick:$,loading:_}),v?(0,U.tZ)(V.xv,{css:a6.errorText,maxLines:2,multiline:!1,children:v}):null]}):s?(0,U.tZ)(H.G,{children:(0,U.tZ)(eb.zx,{colorway:"primary",iconLeft:(0,U.tZ)(rx.Z,{}),text:"Open Account page to connect to GitHub",onClick:function(){rb.X.openExternalUrl("/account#connected-services")}})}):(0,U.tZ)(H.G,{children:(0,U.tZ)(eb.zx,{colorway:"primary",iconLeft:(0,U.tZ)(rx.Z,{}),text:"Connect to GitHub",onClick:E})})}var a7=(0,eV.iv)(J.l0.border({width:1,color:J.TV.outlineDimmer}),J.l0.borderRadius(8)),a9=(0,eV.iv)(nI.gU.filled,J.l0.flex.row,J.l0.justify.spaceBetween,J.l0.align.center,J.l0.px(8),J.l0.py(4),J.l0.borderRadius(8,8,0,0)),le=(0,eV.iv)(J.l0.borderRadius(8,8,0,0)),lt=(0,eV.iv)(J.l0.borderRadius(8)),ln=(0,eV.iv)(J.l0.p(8)),lr=(0,eV.iv)(J.l0.flex.growAndShrink(1));function li(e){var t=e.title,n=e.expanded,r=e.content,i=e.onClick;return(0,U.BX)(H.G,{css:a7,children:[(0,U.BX)(H.G,{css:[a9,n?le:lt],onClick:i,children:[(0,U.tZ)(H.G,{css:lr,children:(0,U.tZ)(V.xv,{variant:"subheadDefault",multiline:!1,children:t})}),n?(0,U.tZ)(tS.Z,{size:20}):(0,U.tZ)(tk.Z,{size:20})]}),n?(0,U.tZ)(H.G,{css:ln,children:r}):null]})}var lo=(0,eV.iv)(J.l0.rowWithGap(4)),la=(0,eV.iv)(J.l0.flex.growAndShrink(1)),ll=(0,eV.iv)(J.l0.color.accentNegativeStronger,J.l0.pl(4));function lc(e){var t,n=e.initialRemoteUrl,r=e.remoteName,i=e.updateRemote,o=(0,Y.Z)().git,a=(0,N._)((0,ee.useState)(),2),l=a[0],c=a[1];(0,ee.useEffect)(function(){c(void 0)},[n]);var s=(0,N._)((0,ee.useState)(),2),u=s[0],d=s[1],f=(0,N._)((0,ee.useState)(!1),2),h=f[0],p=f[1],m=(t=(0,tM._)(function(){var e,t,n;return(0,tF.Jh)(this,function(a){switch(a.label){case 0:if(a.trys.push([0,5,6,7]),!l)return[2];if(p(!0),!(0,to.LY)(l))throw Error("Invalid remote url.");return[4,o.getRemotes()];case 1:if((e=a.sent()).error)throw Error("Error finding current remotes, ".concat(e.error));if(!e.remotes.has(r))return[3,3];return[4,o.setRemoteURL({remote:r,url:l})];case 2:if((t=a.sent()).error)throw tH({context:"remote-input",gitService:o,result:t,data:{remote:r,url:l}}),Error("Error (".concat(t.error,") setting ").concat(r," to use ").concat(l," as a remote."));return(0,nq.J)("remote-edited"),i(l),[2];case 3:return[4,o.addRemote({name:r,url:l})];case 4:if((n=a.sent()).error)throw tH({context:"remote-input",gitService:o,result:n,data:{remote:r,url:l}}),Error("Error (".concat(n.error,") adding ").concat(r," ").concat(l," as a remote."));return(0,nq.J)("remote-added"),[3,7];case 5:return d(a.sent().message),[3,7];case 6:return p(!1),[7];case 7:return[2]}})}),function(){return t.apply(this,arguments)});return(0,U.BX)(H.G,{children:[(0,U.tZ)(eg.II,{name:"Remote URL",placeholder:"Enter Remote URL",value:null!=l?l:n,autoComplete:"off",autoCorrect:"off",onChange:function(e){d(void 0),c(e.target.value)},inputMode:"url","aria-label":"Remote URL",onKeyDown:function(e){"Enter"===e.key&&m()}}),u?(0,U.tZ)(V.xv,{variant:"small",css:ll,multiline:!1,children:u}):null,l&&l!==n?(0,U.BX)(U.HY,{children:[(0,U.tZ)(aU.Z,{height:1}),(0,U.BX)(H.G,{css:lo,children:[(0,U.tZ)(eb.zx,{css:la,text:"Cancel",iconLeft:(0,U.tZ)(ry.Z,{}),onClick:function(){return c(void 0)}}),(0,U.tZ)(eb.zx,{css:la,text:h?"Saving":"Save",loading:h,colorway:"primary",iconLeft:(0,U.tZ)(rZ.Z,{}),onClick:m})]})]}):null]})}var ls="origin";function lu(){var e,t=(0,tW.Z)((e=(0,tM._)(function(e){var t,n,r,i;return(0,tF.Jh)(this,function(o){switch(o.label){case 0:return[4,e.getRemotes()];case 1:if((t=o.sent()).error)return tH({context:"remote-config",gitService:e,result:t}),[2,{url:void 0,name:ls,error:t.error}];if(!(r=(0,N._)(null!==(n=t.remotes.values())&&void 0!==n?n:void 0,1)[0]))return[2,{url:void 0,name:ls,error:null}];return[2,{url:r.push||r.fetch,name:null!==(i=r.name)&&void 0!==i?i:ls,error:null}]}})}),function(t){return e.apply(this,arguments)}));return null==t?(0,U.BX)(H.G,{css:J.l0.center,children:[(0,U.tZ)(V.xv,{color:"dimmest",multiline:!1,children:"Loading remote information."}),(0,U.tZ)(oz,{})]}):(null==t?void 0:t.error)?null:(0,U.tZ)(ld,{initialRemoteUrl:null==t?void 0:t.url,remoteName:null==t?void 0:t.name})}function ld(e){var t=e.initialRemoteUrl,n=e.remoteName,r=(0,N._)((0,ee.useState)(t),2),i=r[0],o=r[1],a=(0,N._)((0,ee.useState)(""===t||void 0===t?0:void 0),2),l=a[0],c=a[1],s=function(e){o(e)};return(0,U.BX)(H.G,{children:[(0,U.tZ)(V.xv,{variant:"subheadDefault",multiline:!1,children:"Remote"}),(0,U.tZ)(aU.Z,{height:1}),(0,U.tZ)(lc,{remoteName:n,initialRemoteUrl:i,updateRemote:s}),(0,U.tZ)(aU.Z,{height:2}),(0,U.tZ)(li,{title:"GitHub",expanded:0===l,onClick:function(){return c(function(e){return 0===e?void 0:0})},content:(0,U.tZ)(a5,{remoteName:n,updateRemote:s})})]})}(s=x||(x={}))[s.GitHub=0]="GitHub";var lf=(0,eV.iv)(J.l0.px(16));function lh(){return(0,U.BX)(H.G,{css:lf,children:[(0,U.tZ)(aU.Z,{height:2}),(0,U.tZ)(lu,{}),(0,U.tZ)(aU.Z,{height:2}),(0,U.tZ)(lp,{})]})}function lp(){return(0,U.BX)(H.G,{children:[(0,U.tZ)(V.xv,{variant:"subheadDefault",multiline:!1,children:"Commit author"}),(0,U.tZ)(aU.Z,{height:1}),(0,U.tZ)(aJ,{})]})}var lm=(0,z.X)({gitPane:[J.l0.position.relative,J.l0.display.flex,J.l0.minHeight("100%")],gitPaneContent:[J.l0.flex.growAndShrink(1),J.l0.overflow("auto")]});function lv(e){var t,n=e.isActive,r=e.performPaneOperation,i=(0,nw.P5)({controlName:"flag-git-commit-view",logFlagToAnalytics:!1}),o=(0,ee.useRef)(),a=(0,N._)((0,ee.useState)(w.CURRENT_BRANCH),2),l=a[0],c=a[1],s=(0,N._)((0,ee.useState)(null),2),u=s[0],d=s[1],f=(0,N._)((0,ee.useState)(null),2),h=f[0],p=f[1],m=(0,N._)((0,ee.useState)(!1),2),v=m[0],g=m[1];lw(void 0!==n&&n);var y=(0,tW.Z)((t=(0,tM._)(function(e){var t,n,r,i,o,a,l,c,s,u;return(0,tF.Jh)(this,function(d){switch(d.label){case 0:return[4,e.getRepositoryState()];case 1:if((t=d.sent()).error)return[2,t];if(n=t.state,r=t.type,i=null,o=null,a=null,!(r!==to.y5.INITIALIZING))return[3,6];return[4,e.status()];case 2:if((l=d.sent()).error)return tH({context:"git-pane-status",gitService:e,result:l,data:{state:n,type:r}}),[2,l];return i=l,[4,e.getRemotes()];case 3:if((c=d.sent()).error)return tH({context:"git-pane-remotes",gitService:e,result:c,data:{state:n,type:r}}),[2,c];if(o=c.remotes,!i.branch)return[3,5];return[4,e.getBranch(i.branch)];case 4:if((s=d.sent()).error)return tH({context:"git-pane-branch",gitService:e,result:s,data:{state:n,type:r}}),[2,s];a=s.branch,d.label=5;case 5:return[3,8];case 6:return[4,e.status()];case 7:if((u=d.sent()).error)return tH({context:"git-pane-status-initializing",gitService:e,result:u,data:{state:n,type:r}}),[2,{state:n,type:r,status:i,remotes:o,currentBranch:a,error:null}];i=u,d.label=8;case 8:return[2,{state:n,type:r,status:i,remotes:o,currentBranch:a,error:null}]}})}),function(e){return t.apply(this,arguments)})),b=!y||y.error?null:y.currentBranch,Z=(0,ee.useCallback)(function(e){switch(c(e),e){case w.DASHBOARD:(0,nq.J)("pane-mode-changed",{mode:"dashboard"});break;case w.BRANCH:(0,nq.J)("pane-mode-changed",{mode:"branch"});break;case w.CURRENT_BRANCH:(0,nq.J)("pane-mode-changed",{mode:"current-branch"});break;case w.SETTINGS:(0,nq.J)("pane-mode-changed",{mode:"settings"})}},[]),x=(0,ee.useCallback)(function(){o.current?(Z(o.current),o.current=void 0):Z(w.CURRENT_BRANCH)},[Z]),C=(0,ee.useCallback)(function(e){var t=function(e){o.current=l,Z(e)};switch(e.mode){case w.DASHBOARD:t(w.DASHBOARD);break;case w.BRANCH:if((0,to.p3)(e.branch,b)){t(w.CURRENT_BRANCH);break}p(e.branch),t(w.BRANCH);break;case w.CURRENT_BRANCH:t(w.CURRENT_BRANCH);break;case w.SETTINGS:t(w.SETTINGS);break;case w.COMMIT:d(e.hash),t(w.COMMIT)}},[Z,l,b]),k=(0,ee.useCallback)(function(e){var t=e.path,n=e.type,i=(0,K.Dp)({path:t});if("codeEditor"!==i){r({operation:"open",pane:{type:i,data:{path:t}},secondary:!0});return}"conflict"===(void 0===n?"change":n)?r({operation:"open",pane:{type:"codeEditor",data:{path:t}},secondary:!0}):r({operation:"open",pane:{type:"diff",data:{left:{path:t,data:{type:"git",revision:"HEAD"}},right:{path:t,data:{type:"fs"}}}},secondary:!0})},[r]),S=(0,ee.useCallback)(function(e){C({mode:w.COMMIT,hash:e})},[C]),_=(0,ee.useCallback)(function(){g(!0)},[]);if(l===w.BRANCH&&(0,to.p3)(h,b)&&Z(w.CURRENT_BRANCH),(0,ee.useEffect)(function(){return g(!1)},[y]),v||!y||y.error)return(0,U.tZ)(lg,{children:(null==y?void 0:y.error)?(0,U.tZ)(eu.Z,{pane:{type:"git"},headerText:"Git pane is unavailable.",bodyText:(0,U.BX)(U.HY,{children:["Something went wrong. Error: ",(0,U.tZ)("code",{children:y.error})]}),asciiArt:"Computer"}):(0,U.tZ)(oz,{})});switch(y.type){case to.y5.INITIALIZING:case to.y5.INTERMEDIATE:case to.y5.DETACHED_HEAD:return(0,U.tZ)(lg,{children:(0,U.tZ)(ly,{state:y.state,status:y.status,onFileClick:k,gotoPendingState:_})});case to.y5.NORMAL:if(l===w.BRANCH&&!h||l===w.CURRENT_BRANCH&&!b)return(0,U.tZ)(lg,{header:(0,U.tZ)(ru,{mode:w.DASHBOARD,branch:null,switchMode:C,onBack:x}),children:(0,U.tZ)(o8,{currentBranch:null,switchMode:C})});return(0,U.tZ)(lg,{header:(0,U.tZ)(ru,{mode:l,branch:l===w.CURRENT_BRANCH?b:h,switchMode:C,onBack:x}),children:(0,U.tZ)(lb,{performPaneOperation:r,mode:l,status:y.status,remotes:y.remotes,previewBranch:h,previewCommit:u,currentBranch:b,switchMode:C,onStagedFileClick:k,onViewCommitClick:i?S:void 0,onViewSettingsClick:function(){return C({mode:w.SETTINGS})},gotoPendingState:_})})}}function lg(e){var t=e.header,n=e.children,r=(0,N._)((0,ee.useState)(function(){return(0,nx.MT)()}),1)[0];return(0,U.tZ)(nC.Provider,{value:r,children:(0,U.BX)(H.G,{css:lm.gitPane,children:[(0,U.tZ)(rN,{}),t,(0,U.tZ)(H.G,{css:lm.gitPaneContent,children:n})]})})}function ly(e){var t=e.state,n=e.status,r=e.onFileClick,i=e.gotoPendingState,o=(0,nw.P5)({controlName:"flag-new-rebase-editor",logFlagToAnalytics:!1,default:!1});switch(t){case to.yG.NOT_INITIALIZED:return(0,U.tZ)(eu.Z,{pane:{type:"git"},action:(0,U.tZ)(rv,{})});case to.yG.ON_UNBORN_BRANCH:return(0,U.tZ)(ae,{onFileClick:r,status:n});case to.yG.MERGING:return(0,U.tZ)(aL,{onFileClick:r,gotoPendingState:i});case to.yG.REBASING:return o?(0,U.tZ)(aO,{gotoPendingState:i,onFileClick:r}):(0,U.tZ)(o5,{});case to.yG.REVERTING:return(0,U.tZ)(o7,{});case to.yG.CHERRY_PICKING:return(0,U.tZ)(oY,{});case to.yG.APPLYING_MAILBOX:return(0,U.tZ)(rO,{});case to.yG.BISECTING:return(0,U.tZ)(rU,{});case to.yG.DETACHED_HEAD:return(0,U.tZ)(o6,{});default:return null}}function lb(e){var t=e.mode,n=e.status,r=e.remotes,i=e.previewBranch,o=e.previewCommit,a=e.currentBranch,l=e.switchMode,c=e.onStagedFileClick,s=e.onViewCommitClick,u=e.onViewSettingsClick,d=e.gotoPendingState,f=e.performPaneOperation;switch(t){case w.DASHBOARD:return(0,U.tZ)(o8,{currentBranch:a,switchMode:l});case w.BRANCH:return(0,U.tZ)(oq,{performPaneOperation:f,status:n,branch:i,remotes:r,onStagedFileClick:c,onViewCommitClick:s,onViewSettingsClick:u,gotoPendingState:d});case w.CURRENT_BRANCH:return(0,U.tZ)(oq,{performPaneOperation:f,status:n,remotes:r,branch:a,onStagedFileClick:c,onViewCommitClick:s,onViewSettingsClick:u,gotoPendingState:d,current:!0});case w.SETTINGS:return(0,U.tZ)(lh,{});case w.COMMIT:return(0,U.tZ)(aT,{status:n,remotes:r,onViewCommitClick:s,hash:o,switchMode:l});default:(0,nT.Z)(t)}}function lw(e){var t=(0,Y.Z)().git;(0,ee.useEffect)(function(){e&&t.forceRefresh()},[e,t])}var lZ=X.Dy.Object({type:X.Dy.Literal("git")}),lx={Content:function(e){var t=e.options,n=t.isActive,r=t.performPaneOperation;return(0,U.tZ)(lv,{isActive:n,performPaneOperation:r})},Icon:function(e){var t=e.size;return(0,U.tZ)(te.Pd.Provider,{value:{color:tt.TV.greenStrongest,size:t},children:(0,U.tZ)(nb.Z,{})})},getTitle:function(){return"Git"},description:"Version control for your Repl",category:K.hc.WorkspaceFeatures,decode:function(e){return M.B4.Decode(lZ,e)}},lC=n(37968),lk=n(96949),lS=n(76881),l_=n(52589),lE=n(49719);function lT(){var e=(0,lS.uV)();return(0,ee.useCallback)(function(t,n,r){e({origin:"History2: useHistoryBSOD",error:t,tags:{source:"ws-history2",type:n},extras:(0,ep._)({state:lE.BI.current()},r)})},[e])}function lR(e){(0,lk.j)(l_.U3.HISTORY_USED,{action:e,which:"ws"})}function lD(e){var t=e.onClose;return(0,U.tZ)(eb.zx,{text:"Cancel",onClick:function(){lR("historyExplicitlyClosed"),t()}})}var lI=n(92234),lB=(0,eV.iv)({filter:"grayscale(100%) opacity(0.5)",pointerEvents:"none"});function lG(){var e,t="/replEnvironmentMobile"===(0,aF.useRouter)().pathname,n=(0,lE.bA)(),r=(0,lE._Z)(),i=(0,a$.U)(),o=!n||0===n.count;return(0,U.BX)(H.G,{css:[J.l0.rowWithGap(8),J.l0.align.center,o?lB:null],children:[(0,U.tZ)(lI.Z,{id:i("diffButton"),isOn:null!==(e=null==n?void 0:n.comparing)&&void 0!==e&&e,onChange:function(e){o||r({comparing:e.target.checked})}}),(0,U.tZ)("label",{css:[{cursor:"pointer",userSelect:"none"},J.l0.flex.column,J.l0.align.center],htmlFor:i("diffButton"),children:(0,U.tZ)(V.xv,{multiline:!1,children:t?"Compare":"Compare Latest"})})]})}function lP(){var e=(0,lE.bA)();if(!e||0===e.count)return null;var t=e.changes[e.version].timestamp;return(0,U.tZ)(nP.EK,{textColor:"dimmer",dateFormat:"switch",date:t})}var lA=n(66598);function lL(e){var t=e.reversed,n=void 0!==t&&t,r=e.hideName,i=void 0!==r&&r,o=e.color,a=void 0===o?"default":o,l=(0,lE.bA)(),c=(0,ee.useMemo)(function(){return[n?J.l0.rowReverseWithGap(4):J.l0.rowWithGap(4),J.l0.align.center]},[n]);if(!l)return null;if(0===l.count)return(0,U.BX)(H.G,{css:c,children:[(0,U.tZ)(lA.Z,{size:24}),(0,U.tZ)(V.xv,{color:a,multiline:!1,children:"Server Authored"})]});var s=l.changes[l.version];if(!l.users)return(0,U.BX)(H.G,{css:c,children:[(0,U.tZ)(nN.q,{size:24,src:"/public/images/ghost.svg",username:"Unknown"}),i?null:(0,U.tZ)(V.xv,{color:a,multiline:!1,children:"Unknown"})]});var u=l.users[s.userId];return u?(0,U.BX)(H.G,{css:c,children:[(0,U.tZ)(nN.q,{size:24,src:u.image,username:u.username}),i?null:(0,U.tZ)(V.xv,{color:a,multiline:!1,children:u.username})]}):s.timestamp>16546464e5?(0,U.BX)(H.G,{css:c,children:[(0,U.tZ)(lA.Z,{size:24}),i?null:(0,U.tZ)(V.xv,{color:a,multiline:!1,children:"Server Authored"})]}):(0,U.BX)(H.G,{css:c,children:[(0,U.tZ)(nN.q,{size:24,src:"/public/images/ghost.svg",username:"Unknown"}),i?null:(0,U.tZ)(V.xv,{color:a,multiline:!1,children:"Unknown"})]})}var lN=n(39031),lO=n(12285),lU=n(4955),lX=n(14105),lM=n(9670),lF=function(e){"use strict";(0,lU._)(n,e);var t=(0,lM._)(n);function n(e){var r;return(0,lO._)(this,n),(r=t.call(this,e)).name="UserError",r}return n}((0,lX._)(Error)),lW=n(2553);function lV(){var e=(0,eK._)(["\n  query WorkspaceHistory2Users($ids: [Int!]!) {\n    currentUser {\n      id\n      username\n      image\n    }\n    usersByIds(ids: $ids) {\n      id\n      username\n      image\n    }\n  }\n"]);return lV=function(){return e},e}function lH(){var e=(0,eK._)(["\n  query WorkspaceHistory2CurrentUserDate {\n    currentUser {\n      id\n      timeCreated\n    }\n  }\n"]);return lH=function(){return e},e}var lz=(0,eQ.Ps)(lV());function lj(e,t,n){return new Promise(function(r,i){try{var o,a=e.watchTextFile(t,{onReady:(o=(0,tM._)(function(e){var t,o;return(0,tF.Jh)(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,n(e)];case 1:return t=l.sent(),r(t),[3,3];case 2:return o=l.sent(),i(o),[3,3];case 3:return a(),[2]}})}),function(e){return o.apply(this,arguments)})})}catch(e){i(e)}})}lH();var lq=lW.I;function lJ(){return(lJ=(0,tM._)(function(e,t){var n,r,i,o,a,l,c,s,u,d,f,h,p,m,v,g,y,b;return(0,tF.Jh)(this,function(w){switch(w.label){case 0:n=new Set,r=!0,i=!1,o=void 0;try{for(a=t[Symbol.iterator]();!(r=(l=a.next()).done);r=!0)(c=l.value).userId&&n.add(c.userId)}catch(e){i=!0,o=e}finally{try{r||null==a.return||a.return()}finally{if(i)throw o}}if(0===n.size)return[2,{}];if(n.size>=lq)return[2,"too_many_users"];return[4,e.query({query:lz,variables:{ids:Array.from(n)}})];case 1:if(u=(s=w.sent()).data,d=s.error)throw d;f=u.currentUser?[u.currentUser].concat((0,O._)(u.usersByIds)):u.usersByIds,h={},p=!0,m=!1,v=void 0;try{for(g=f[Symbol.iterator]();!(p=(y=g.next()).done);p=!0)h[(b=y.value).id]={id:b.id,username:b.username,image:b.image}}catch(e){m=!0,v=e}finally{try{p||null==g.return||g.return()}finally{if(m)throw v}}return[2,h]}})})).apply(this,arguments)}function lY(){return(lY=(0,tM._)(function(e,t,n){var r,i,o;return(0,tF.Jh)(this,function(a){switch(a.label){case 0:var l;return[4,lj(e,n,(l=(0,tM._)(function(e){var t,n;return(0,tF.Jh)(this,function(r){return(t=e.fetchChanges,0===(n=e.version))?[2,{isDisposed:!1,result:[]}]:[2,t(1,n,"")]})}),function(e){return l.apply(this,arguments)}))];case 1:if((r=a.sent()).isDisposed)return[2,{data:null,handledError:"File deleted or removed."}];return[4,function(e,t){return lJ.apply(this,arguments)}(t,i=r.result)];case 2:if("too_many_users"===(o=a.sent()))return[2,{data:{changes:i,users:null},handledError:null}];return[2,{data:{changes:i,users:o},handledError:null}]}})})).apply(this,arguments)}(C||(C={})).TooManyUsersRequestedError="too_many_users";var l$=n(58988),lK=(0,eV.iv)({display:"grid",gridTemplateColumns:"auto 1fr",rowGap:"0.5rem",columnGap:"1rem","> dt":{display:"flex",alignItems:"center",fontWeight:"bold"}});function lQ(e){var t=e.onCloseHistory,n=(0,ax.Z)().showError,r=(0,N._)((0,ee.useState)(!1),2),i=r[0],o=r[1],a=(0,N._)((0,ee.useState)(!1),2),l=a[0],c=a[1],s=(0,Y.Z)().fs,u=(0,lE.bA)(),d=lT(),f=(0,nw.P5)({controlName:"flag-draft-buffers"}),h=(0,l$.Qk)(),p="Reset",m=!0;function v(){return(v=(0,tM._)(function(){var e,r;return(0,tF.Jh)(this,function(i){switch(i.label){case 0:if(!u||!s||l)return[2];i.label=1;case 1:var a,p;return i.trys.push([1,3,4,5]),c(!0),lR("versionRestored"),e=u.filePath,[4,(a=u.version+1,lj(s,e,(p=(0,tM._)(function(t){var n,r,i,o,l,c,u,d;return(0,tF.Jh)(this,function(p){switch(p.label){case 0:if(n=t.fetchChanges,r=t.writeChange,a>(i=t.version))throw Error("Cannot reset to a version that does not exist");if(a===i)return[2];o=null,p.label=1;case 1:return p.trys.push([1,3,,4]),[4,n(1,i,"")];case 2:if((l=p.sent()).isDisposed)throw new lF("File deleted or removed.");return o=l.result,[3,4];case 3:throw p.sent(),new lF("Something went wrong while resetting the file. It is possible that a bad connection is to blame. Please try again.");case 4:u=(c=(0,ev._)(o.slice(a,o.length).reverse()))[0],d=c.slice(1).reduce(function(e,t){return e.compose(t.invertedChanges)},u.invertedChanges);try{r(d)}catch(e){throw tV.Tb(e),new lF("Something went wrong while resetting the file. Maybe the file changed while you were restoring it? Please try again.")}if(!(!f||h))return[3,6];return[4,s.flush(new Set([e]))];case 5:p.sent(),p.label=6;case 6:return[2]}})}),function(e){return p.apply(this,arguments)})))];case 2:return i.sent(),t(),[3,5];case 3:if((r=i.sent())instanceof lF)return n(r.message),[2];return d(r,"restore"),[3,5];case 4:return o(!1),c(!1),[7];case 5:return[2]}})})).apply(this,arguments)}return u?0===u.count?(p="No history",m=!0):l||i?(p="Resetting...",m=!0):u.playing?(p="Playing...",m=!0):u.version===u.count-1?(p="Viewing latest",m=!0):(p="Reset editor to here",m=!1):(p="Loading...",m=!0),(0,U.BX)(U.HY,{children:[(0,U.tZ)(eb.zx,{text:p,disabled:m,onClick:function(){return o(!0)},colorway:"primary",iconLeft:(0,U.tZ)(lC.Z,{})}),u&&0!==u.count&&(0,U.tZ)(rX.u,{isOpen:i,onRequestClose:function(){l||o(!1)},children:(0,U.BX)(H.G,{css:J.l0.colWithGap(24),children:[(0,U.tZ)(V.h4,{variant:"headerDefault",level:2,children:"Reset file version"}),(0,U.tZ)(ew.Tg,{elevated:!0,css:[J.l0.px(16),J.l0.py(12),J.l0.borderRadius(8)],children:(0,U.BX)("dl",{css:lK,children:[(0,U.tZ)("dt",{children:"File"}),(0,U.tZ)("dd",{children:u.filePath}),(0,U.tZ)("dt",{children:"Version"}),(0,U.BX)("dd",{children:[u.version+1,(0,U.BX)("span",{css:[J.l0.color.foregroundDimmest],children:[(0,U.tZ)("span",{css:J.l0.mx(8),children:"/"}),u.count]})]}),(0,U.tZ)("dt",{children:"Date"}),(0,U.tZ)("dd",{children:(0,U.tZ)(nP.EK,{date:u.changes[u.version].timestamp,dateFormat:"absolute"})}),(0,U.tZ)("dt",{children:"Author"}),(0,U.tZ)("dd",{children:(0,U.tZ)(lL,{})})]})}),(0,U.tZ)(e6.E,{icon:(0,U.tZ)(lN.Z,{}),colorway:"positive",text:"Resetting is non-destructive. The reset content will become a new version at the end of history. You can always go back to the version you just had."}),(0,U.BX)(H.G,{css:[J.l0.rowWithGap(8),J.l0.justify.end],children:[(0,U.tZ)(eb.zx,{text:"Cancel",disabled:l,onClick:function(){return o(!1)}}),(0,U.tZ)(eb.zx,{text:l?"Resetting Version...":"Reset Version",disabled:l,colorway:"primary",onClick:function(){return v.apply(this,arguments)},iconLeft:(0,U.tZ)(lC.Z,{})})]})]})})]})}var l0=n(67790),l1=(0,ee.forwardRef)(function(e,t){var n=(0,lE.bA)(),r=(0,ee.useRef)(null);(0,ee.useImperativeHandle)(t,function(){return r.current}),n&&r.current&&(r.current.setAttribute("aria-valuemin","1"),r.current.setAttribute("aria-valuemax",String(n.count)),r.current.setAttribute("aria-valuenow",String(n.version+1)));var i=(0,ee.useMemo)(function(){return(0,U.tZ)("div",{ref:r,role:"slider",tabIndex:0,css:{position:"absolute",top:"0",left:"calc((100% - 16px) * var(--scrubber-progress, 0))",width:"16px",height:"16px",backgroundColor:J.TV.accentPrimaryDefault,borderRadius:"100%",outline:"none",cursor:"pointer",transition:"left var(--scrubber-transition-time, 100ms) ease-out",willChange:"left, transition",":focus":{boxShadow:"0 0 0 1px ".concat(J.TV.foregroundDefault," inset")}}})},[]);return n&&n.count>1?i:null}),l2=(0,ee.forwardRef)(function(e,t){var n=(0,lE.bA)(),r=(0,ee.useMemo)(function(){return(0,U.BX)(U.HY,{children:[(0,U.tZ)("div",{ref:t,"aria-hidden":!0,css:{position:"relative",top:"0",width:"100%",height:"16px",margin:"0",cursor:"pointer"}}),(0,U.tZ)("div",{"aria-hidden":!0,css:{position:"absolute",top:"6px",left:"0",width:"100%",height:"4px",margin:"0",overflow:"hidden",pointerEvents:"none",backgroundColor:J.TV.backgroundHighest,borderRadius:"2px"},children:(0,U.tZ)("div",{"aria-hidden":!0,css:{position:"absolute",top:"0",left:"0",width:"100%",height:"4px",margin:"0",pointerEvents:"none",backgroundColor:J.TV.accentPrimaryDefault,transformOrigin:"left",transform:"scaleX(var(--scrubber-progress, 0))",transition:"transform var(--scrubber-transition-time, 100ms) ease-out",willChange:"transform, transition"}})})]})},[t]),i=(0,ee.useMemo)(function(){return(0,U.tZ)("div",{ref:t,"aria-hidden":!0,css:{width:"100%",height:"16px",pointerEvents:"none"},children:(0,U.tZ)("div",{css:{position:"absolute",width:"100%",height:"4px",top:"6px",left:"0",backgroundColor:J.TV.backgroundHighest,borderRadius:"2px"}})})},[t]);return n&&n.count>1?r:i}),l3=["ArrowLeft","ArrowRight","Home","End"];function l4(){var e=(0,lE.bA)(),t=(0,lE._Z)(),n=(0,N._)((0,ee.useState)(!1),2),r=n[0],i=n[1],o=(0,ee.useRef)(null),a=(0,ee.useRef)(null),l=(0,ee.useRef)(null),c=function(e){(0,l0.A)(o,"--scrubber-transition-time",e)},s=function(e){(0,l0.A)(o,"--scrubber-progress",e.toString())};return e&&!r&&(s(e.version/(e.count-1)),e.playing?c("50ms"):c("100ms")),(0,ee.useEffect)(function(){if(e&&a.current&&l.current&&!r){var n=a.current,o=l.current,u=function(r){if(0===r.button){i(!0),o.focus();var a=n.getBoundingClientRect(),l=o.getBoundingClientRect(),u=a.width,d=l.width,f=r.target===n?d/2:r.clientX-l.left,h=null,p=function(n){var r=Math.max(0,Math.min(1,(n-a.left-f)/(u-d)));r!==h&&(h=r,s(r),t({version:Math.round(r*(e.count-1)),playing:!1}))};p(r.clientX);var m=function(e){c("0ms"),p(e.clientX),e.preventDefault(),e.stopPropagation()},v=function(){window.removeEventListener("pointermove",m),window.removeEventListener("pointerup",v),window.removeEventListener("pointercancel",v),c("100ms"),i(!1)};window.addEventListener("pointermove",m),window.addEventListener("pointerup",v),window.addEventListener("pointercancel",v),r.preventDefault(),r.stopPropagation()}};return n.addEventListener("pointerdown",u),o.addEventListener("pointerdown",u),function(){n.removeEventListener("pointerdown",u),o.removeEventListener("pointerdown",u)}}},[e,t,r]),(0,ee.useEffect)(function(){if(e&&l.current&&!r){var n=l.current,i=function(n){if(e&&l3.includes(n.key)){var r=n.shiftKey?10:1,i=e.version,o=e.count-1,a=null;switch(n.key){case"ArrowLeft":a=Math.max(0,i-r);break;case"ArrowRight":a=Math.min(o,i+r);break;case"Home":a=0;break;case"End":a=o}null!==a&&(t({version:a,playing:!1}),n.preventDefault(),n.stopPropagation())}};return n.addEventListener("keydown",i),function(){n.removeEventListener("keydown",i)}}},[e,t,r]),(0,ee.useMemo)(function(){return(0,U.BX)(H.G,{innerRef:o,css:{position:"relative",height:"16px",width:"100%",touchAction:"none","--scrubber-progress":1,"--scrubber-transition-time":"100ms",":hover, :focus-within":{filter:"brightness(1.1)"},":hover:focus-within":{filter:"brightness(1.2)"}},children:[(0,U.tZ)(l2,{ref:a}),(0,U.tZ)(l1,{ref:l})]})},[])}var l8=n(33323);function l6(){var e=(0,lE.bA)(),t=0,n=0;return e&&0!==e.count&&(t=e.version+1,n=e.count),(0,U.BX)(H.G,{css:[J.l0.rowWithGap(4),J.l0.justify.spaceBetween],children:[(0,U.tZ)(V.xv,{css:{minWidth:"2ch",textAlign:"right"},color:e?"default":"dimmer",multiline:!1,children:t}),(0,U.tZ)(V.xv,{css:{width:"1ch",textAlign:"center"},color:"dimmer",multiline:!1,children:"/"}),(0,U.tZ)(V.xv,{css:{minWidth:"2ch",textAlign:"left"},color:"dimmer",multiline:!1,children:n})]})}var l5=n(30286),l7=n(81253);function l9(e){if(e<0)throw Error('Require at least zero ops to compute pace, got "'+e+'"');return 1/Math.log(e+2)*100}function ce(){var e,t,n,r,i=(0,lE.bA)(),o=(0,lE._Z)(),a=(null!==(t=null==i?void 0:null===(e=i.changes)||void 0===e?void 0:e.length)&&void 0!==t?t:1)-1,l=null!==(n=null==i?void 0:i.version)&&void 0!==n?n:0,c=null!==(r=null==i?void 0:i.playing)&&void 0!==r&&r,s=!i||0===i.count,u=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l9,i=(0,N._)((0,ee.useState)(!1),2),o=i[0],a=i[1],l=(0,ee.useCallback)(function(){t(1)},[t]),c=(0,ee.useCallback)(function(){if(e+1>n){a(!1);return}t(e+1)},[t,e,n]);return(0,ee.useEffect)(function(){if(o){var e=setTimeout(function(){c()},r(n));return function(){return clearTimeout(e)}}},[o,c,r,n]),{isPlaying:o,start:function(){a(!0)},stop:function(){a(!1)},reset:l}}(l,function(e){return o({version:e})},a),d=u.isPlaying,f=u.start,h=u.stop;(0,ee.useEffect)(function(){d&&!c?h():!d&&c&&f()},[c,d,f,h]);var p="Loading...";return i&&(d?p="Pause":i.version===i.count-1?p="Play file history from beginning":0===i.version?p="Play file history":i.version>0&&(p="Play file history from here")),(0,U.tZ)(F.hU,{alt:p,size:24,disabled:s,onClick:function(){l===a?o({version:0,playing:!0}):o({playing:!c})},children:d?(0,U.tZ)(l5.Z,{}):(0,U.tZ)(l7.Z,{})})}function ct(){return(0,U.BX)(H.G,{css:[J.l0.rowWithGap(4),J.l0.align.center],children:[(0,U.tZ)(ce,{}),(0,U.tZ)(cn,{}),(0,U.tZ)(l6,{}),(0,U.tZ)(cr,{})]})}function cn(){var e=(0,lE.bA)(),t=(0,lE._Z)(),n=!e||0===e.version||0===e.count;return(0,U.tZ)(F.hU,{alt:"Move backwards one version",size:24,disabled:n,onClick:function(){e&&e.version>0&&t({version:e.version-1})},children:(0,U.tZ)(re.Z,{})})}function cr(){var e=(0,lE.bA)(),t=(0,lE._Z)(),n=!e||e.version===e.count-1||0===e.count;return(0,U.tZ)(F.hU,{alt:"Move forwards one version",size:24,disabled:n,onClick:function(){e&&e.version<e.count-1&&t({version:e.version+1})},children:(0,U.tZ)(l8.Z,{})})}var ci=n(83989);function co(e){var t,n,r,i,o,a=e.filePath,l=e.onCloseHistory,c="/replEnvironmentMobile"===(0,aF.useRouter)().pathname,s=c?J.l0.borderRadius(0):J.l0.borderRadius(0,0,8,8),u=(0,lE.bA)(),d=(0,lE._Z)(),f=(0,lE.Ai)(),h=lT(),p=(n=(t=(0,N._)((0,ee.useState)({data:null,loading:!0,error:null,handledError:null}),2))[0],r=t[1],i=(0,Y.Z)().fs,o=(0,ci.x)(),(0,ee.useEffect)(function(){if(!a){r({data:null,loading:!1,error:null,handledError:null});return}r({data:null,loading:!0,error:null,handledError:null});var e=!1;return(function(e,t,n){return lY.apply(this,arguments)})(i,o,a).then(function(t){var n=t.data,i=t.handledError;if(!e){if(i){r({data:null,loading:!1,error:null,handledError:i});return}r({data:n,loading:!1,error:null,handledError:null})}}).catch(function(t){e||(t instanceof Error||(t=Error(t)),r({data:null,loading:!1,error:t,handledError:null}))}),function(){e=!0}},[a,i,o]),n),m=p.data,v=p.loading,g=p.error;return(0,ee.useEffect)(function(){if(g){h(g,"history2-index",{filePath:a});return}if(m&&!v)return d({filePath:a,changes:m.changes,users:m.users}),lR("historyLoaded"),function(){f()}},[a,m,v,g,h,d,f]),(0,U.BX)(H.G,{css:[J.l0.colWithGap(8),J.l0.p(8),J.l0.zIndex(3),J.l0.overflow("hidden"),s,J.l0.backgroundColor.backgroundDefault,{borderTop:"2px solid ".concat(J.TV.backgroundHigher),boxShadow:"rgba(2, 2, 3, 0.125) 0px -16px 32px 0px"}],children:[(0,U.BX)(ew.Tg,{css:[J.l0.position.relative,J.l0.colWithGap(4),J.l0.px(12),J.l0.pt(8),J.l0.pb(8),J.l0.align.center,J.l0.borderRadius(8),J.l0.overflow("hidden")],elevated:!0,children:[(0,U.tZ)(l4,{}),(0,U.BX)(H.G,{css:[J.l0.display.flex,J.l0.flex.row,J.l0.align.center,J.l0.justify.spaceBetween,J.l0.width("100%")],children:[(0,U.tZ)(ct,{}),u&&u.count>0?(0,U.BX)(H.G,{css:[J.l0.rowWithGap(4),J.l0.align.center],children:[(0,U.tZ)(lP,{}),v||c?null:(0,U.tZ)(V.xv,{color:"dimmer",multiline:!1,children:""}),(0,U.tZ)(lL,{color:"dimmer",hideName:c,reversed:!0})]}):null]})]}),(0,U.BX)(H.G,{css:[J.l0.display.flex,J.l0.flex.row],children:[(0,U.tZ)(ca,{justify:"flex-start",children:(0,U.tZ)(lG,{})}),(0,U.BX)(ca,{justify:"flex-end",children:[(0,U.tZ)(lD,{onClose:l}),(0,U.tZ)(lQ,{onCloseHistory:l})]})]})]})}function ca(e){var t=e.children,n=e.justify;return(0,U.tZ)("div",{css:{display:"flex",flexGrow:1,flexBasis:0,alignItems:"center",justifyContent:n,columnGap:J.TV.space8,minWidth:0},children:t})}var cl=n(33083),cc=n(41691),cs=n(38158),cu=n(25907),cd=(0,cs.B)();function cf(e){if(!(e instanceof ta.YW))return{compareTo:e.field(cd.state,!1),changed:!1};var t=e.state.field(cd.state,!1),n=e.startState.field(cd.state,!1)!==t;return{compareTo:t,changed:n}}function ch(e,t){e.state.field(cd.state,!1)!==t&&e.dispatch({effects:cd.effect.of(t)})}var cp=ta.QQ.define({create:function(){return null},update:function(e,t){var n=cf(t),r=n.compareTo,i=n.changed;if(!r)return null;if(!t.docChanged&&!i)return e;var o=t.state.doc.toString();return new cu.PO(o,r)}}),cm=null!==(k=globalThis.requestIdleCallback)&&void 0!==k?k:globalThis.requestAnimationFrame,cv=null!==(S=globalThis.cancelIdleCallback)&&void 0!==S?S:globalThis.cancelAnimationFrame,cg=tu.p.line({class:"cm-diff-deleted"}),cy=function(e){"use strict";(0,lU._)(n,e);var t=(0,lM._)(n);function n(e,r){var i;return(0,lO._)(this,n),(i=t.call(this)).insertion=e,i.highlight=r,i}var r=n.prototype;return r.destroy=function(){this.pendingHighlight&&cv(this.pendingHighlight)},r.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-inserted cm-line",this.updateDOM(e),e},r.eq=function(e){return!e.pendingHighlight&&this.insertion===e.insertion},r.updateDOM=function(e){var t=this;return this.pendingHighlight&&(cv(this.pendingHighlight),this.pendingHighlight=null),this.insertion.length?e.textContent=this.insertion:e.innerHTML="&nbsp;",this.highlight&&this.insertion.length&&(this.pendingHighlight=cm(function(){if(t.highlight){t.pendingHighlight=null;try{var n=t.highlight();e.innerHTML="",e.append(n)}catch(e){}}})),!0},n}(tu.l9),cb=ta.QQ.define({create:function(){return tu.p.none},update:function(e,t){var n=t.state.field(cp,!1);if(!n)return tu.p.none;var r=cf(t).changed;if(!t.docChanged&&!r)return e.map(t.changes);var i=[],o=function(e,t){i.push({from:e,to:e,value:t})},a=n.startInsertions();if(a){var l=!0,c=!1,s=void 0;try{for(var u,d=a[Symbol.iterator]();!(l=(u=d.next()).done);l=!0)!function(){var e=u.value,n=new cy(e.content,function(){return cw(t.state,e.content)});o(0,tu.p.widget({widget:n,side:-1,block:!0}))}()}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}}var f=!0,h=!1,p=void 0;try{for(var m,v=n.lines()[Symbol.iterator]();!(f=(m=v.next()).done);f=!0)!function(){var e=m.value;if(e.isDeleted&&o(e.from,cg),e.insertions){var n=!0,r=!1,i=void 0;try{for(var a,l=e.insertions[Symbol.iterator]();!(n=(a=l.next()).done);n=!0)!function(){var n=a.value,r=new cy(n.content,function(){return cw(t.state,n.content)});o(e.to,tu.p.widget({widget:r,side:1,block:!0}))}()}catch(e){r=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}}}()}catch(e){h=!0,p=e}finally{try{f||null==v.return||v.return()}finally{if(h)throw p}}return tu.p.set(i,!0)},provide:function(e){return tu.tk.decorations.from(e)}});function cw(e,t){var n,r=document.createDocumentFragment(),i=null===(n=e.facet(cl.dK))||void 0===n?void 0:n.parser;if(!i){var o=document.createElement("span");return o.textContent=t,r.append(o),r}var a=i.parse(t),l=0;if((0,cc.bW)(a,{style:function(t){return(0,cl.QN)(e,t)}},function(e,n,i){if(e>l){var o=document.createElement("span");o.textContent=t.slice(l,e),r.append(o)}var a=document.createElement("span");a.className=i,a.textContent=t.slice(e,n),r.append(a),l=n}),l<t.length){var c=document.createElement("span");c.textContent=t.slice(l),r.append(c)}return r}var cZ=function(e){"use strict";(0,lU._)(n,e);var t=(0,lM._)(n);function n(e){var r;return(0,lO._)(this,n),(r=t.call(this)).line=e,r}var r=n.prototype;return r.eq=function(e){return this.line===e.line},r.toDOM=function(){var e=document.createElement("div");return e.className="cm-diff-gutter-element-fallback",e.innerText=this.line.toString(),e},n}(tu.SJ),cx=function(e){"use strict";(0,lU._)(n,e);var t=(0,lM._)(n);function n(e,r){var i;return(0,lO._)(this,n),(i=t.call(this)).elementClass="cm-diff-gutter-block",i.lines=e,r&&(i.preceding=r),i}var r=n.prototype;return r.eq=function(e){var t,n,r,i;if((null===(t=this.lines)||void 0===t?void 0:t.length)!==(null==e?void 0:null===(n=e.lines)||void 0===n?void 0:n.length)||(null===(r=this.preceding)||void 0===r?void 0:r.length)!==(null==e?void 0:null===(i=e.preceding)||void 0===i?void 0:i.length))return!1;if(this.preceding&&e.preceding)for(var o=0;o<this.preceding.length;o++){var a=this.preceding[o],l=e.preceding[o];if(a.height!==l.height||a.left!==l.left||a.right!==l.right)return!1}if(this.lines&&e.lines)for(var c=0;c<this.lines.length;c++){var s=this.lines[c],u=e.lines[c];if(s.height!==u.height||s.left!==u.left||s.right!==u.right)return!1}return!0},r.toDOM=function(){var e=this,t=document.createElement("div");if(this.preceding){var n=this.preceding.slice().reverse(),r=0,i=!0,o=!1,a=void 0;try{for(var l,c=n[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;r+=s.height;var u=this.piece(s);u.style.position="absolute",u.style.top="-".concat(r,"px"),t.prepend(u)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}}var d=this.lines.map(function(t){return e.piece(t)});return t.append.apply(t,(0,O._)(d)),t},r.piece=function(e){var t=e.height,n=e.left,r=e.right,i=document.createElement("span");i.className="cm-diff-gutter-part",null!==n&&(i.innerText=n.toString());var o=document.createElement("span");o.className="cm-diff-gutter-part",null!==r&&(o.innerText=r.toString());var a=document.createElement("div");return a.className="cm-diff-gutter-element",a.style.height="".concat(t,"px"),a.append(i,o),(null===n||null===r)&&(null===r&&a.classList.add("cm-diff-gutter-deleted"),null===n&&a.classList.add("cm-diff-gutter-inserted")),a},n}(tu.SJ),cC=(0,tu.v5)({class:"cm-lineNumbers cm-diff-gutter",markers:function(e){var t=e.viewportLineBlocks,n=[],r=cf(e.state).compareTo,i=e.state.field(cp,!1),o=function(e,t){n.push({from:e,to:e,value:t})};if(!r||!i){var a=!0,l=!1,c=void 0;try{for(var s,u=t[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value,f=e.state.doc.lineAt(d.from).number;if(d.type===tu.kH.Text)o(d.from,new cZ(f));else if(Array.isArray(d.type)){var h=!0,p=!1,m=void 0;try{for(var v,g=d.type[Symbol.iterator]();!(h=(v=g.next()).done);h=!0){var y=v.value;if(y.type===tu.kH.Text){o(y.from,new cZ(f));break}}}catch(e){p=!0,m=e}finally{try{h||null==g.return||g.return()}finally{if(p)throw m}}}}}catch(e){l=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}return ta.Xs.of(n,!0)}var b=!0,w=!1,Z=void 0;try{for(var x,C=t[Symbol.iterator]();!(b=(x=C.next()).done);b=!0){var k=x.value,S=[],_=e.state.doc.lineAt(k.from).number,E=i.line(_);if(E){var T=e.defaultLineHeight,R=E.offset,D=E.isDeleted,I=E.insertions,B=1===_?i.startInsertions():null,G=B?B.length:0,P=B?[]:null;if(!(Array.isArray(k.type)&&k.type.length>=G+(null!==(O=null==I?void 0:I.length)&&void 0!==O?O:0)+1)){if(B&&P){var A=!0,L=!1,N=void 0;try{for(var O,U,X=B[Symbol.iterator]();!(A=(U=X.next()).done);A=!0){var M=U.value;P.push({height:T,left:null,right:M.number})}}catch(e){L=!0,N=e}finally{try{A||null==X.return||X.return()}finally{if(L)throw N}}}if(S.push({height:k.height,left:_,right:D?null:_+R}),I){var F=!0,W=!1,V=void 0;try{for(var H,z=I[Symbol.iterator]();!(F=(H=z.next()).done);F=!0){var j=H.value;S.push({height:T,left:null,right:j.number})}}catch(e){W=!0,V=e}finally{try{F||null==z.return||z.return()}finally{if(W)throw V}}}o(k.from,new cx(S,P));continue}for(var q=0;q<k.type.length;q++){var J=k.type[q];if((null==J?void 0:J.type)===tu.kH.Text){if(B&&P)for(var Y=0;Y<B.length;Y++){var $,K=B[Y],Q=k.type[q-Y-1];P.push({height:null!==($=null==Q?void 0:Q.height)&&void 0!==$?$:T,left:null,right:K.number})}if(S.push({height:J.height,left:_,right:D?null:_+R}),I)for(var ee=0;ee<I.length;ee++){var et,en=I[ee],er=k.type[q+ee+1];S.push({height:null!==(et=null==er?void 0:er.height)&&void 0!==et?et:T,left:null,right:en.number})}break}}o(k.from,new cx(S,P))}}}catch(e){w=!0,Z=e}finally{try{b||null==C.return||C.return()}finally{if(w)throw Z}}return ta.Xs.of(n,!0)},lineMarkerChange:function(e){if(e.docChanged)return!0;var t=!0,n=!1,r=void 0;try{for(var i,o=e.transactions[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value;if(cf(a).changed)return!0}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return!1},initialSpacer:function(e){return new cZ(e.state.doc.lines)},updateSpacer:function(e,t){var n=t.state.doc.lines;return cf(t.state).compareTo?new cx([{height:0,left:n,right:n}]):new cZ(n)}}),ck="#0053A644",cS="#c93c3733",c_=[tu.tk.theme({".cm-diff-inserted":{backgroundColor:ck},".cm-diff-deleted":{backgroundColor:cS},".cm-diff-gutter .cm-diff-gutter-block":{position:"relative",padding:"0"},".cm-diff-gutter-element":{display:"flex",width:"100%",alignItems:"center",columnGap:"8px",padding:"0 6px",borderLeft:"4px solid transparent"},".cm-diff-gutter-part":{display:"inline-block",height:"100%",width:"50%",textAlign:"center"},".cm-diff-gutter-inserted":{backgroundColor:ck,borderLeftColor:"#0053A6"},".cm-diff-gutter-deleted":{backgroundColor:cS,borderLeftColor:"#c93c37"},".cm-diff-gutter + .cm-foldGutter":{width:"0",transform:"translateX(-12px)",overflow:"visible"},".cm-diff-gutter .cm-diff-gutter-element":{paddingRight:"16px"},".cm-diff-gutter .cm-diff-gutter-element-fallback":{paddingRight:"12px"}}),cd.state,cp,cb,cC,(0,cl.mi)({openText:"",closedText:""})],cE=n(4384),cT=function(){"use strict";function e(t){var n=this;(0,lO._)(this,e),this.view=t,this.overlay=document.createElement("div"),this.overlay.className="cm-overlay-generic",this.overlay.style.pointerEvents="none",this.overlay.style.contain="size style",this.overlay.setAttribute("aria-hidden","true"),this.view.scrollDOM.appendChild(this.overlay),this.elements=new Map,this.measureRequest={key:this,read:function(){var e=[],t=n.view.scrollDOM.getBoundingClientRect(),r=n.view.scrollDOM.scrollTop,i=n.view.scrollDOM.scrollLeft,o=!0,a=!1,l=void 0;try{for(var c,s=n.elements.values()[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value,d=u.dom,f=u.pos,h=u.offsetX,p=u.offsetY,m=n.view.coordsAtPos(f),v=n.view.lineBlockAt(f);if(!m){e.push({dom:d,x:null,y:null});continue}var g=v.top-r+t.top+n.view.documentPadding.top,y=Math.round((m.top-g)/n.view.defaultLineHeight)*n.view.defaultLineHeight+g,b=i+m.left-t.left+h,w=r+y-t.top+p;e.push({dom:d,x:b,y:w})}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return e},write:function(e){var t=!0,n=!1,r=void 0;try{for(var i,o=e[Symbol.iterator]();!(t=(i=o.next()).done);t=!0)!function(){var e=i.value,t=e.dom,n=e.x,r=e.y;if(null===n||null===r)return t.style.visibility="hidden",t.style.transition="none";t.style.visibility="",t.style.transform="translate(".concat(n,"px, ").concat(r,"px)"),t.style.transition.startsWith("none")&&requestAnimationFrame(function(){t.style.transition=""})}()}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}}}}var t=e.prototype;return t.destroy=function(){this.view.scrollDOM.removeChild(this.overlay)},t.map=function(e){if(e.geometryChanged||e.viewportChanged){if(e.docChanged){var t=Array.from(this.elements.values()),n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value,c=e.changes.mapPos(l.pos,-1,ta.gc.TrackDel);if(!c){this.removeElement(l.dom);continue}l.pos=c}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}this.view.requestMeasure(this.measureRequest)}},t.addElement=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!this.elements.has(e)){var i={dom:e,pos:t,offsetX:n,offsetY:r};return this.elements.set(e,i),this.overlay.appendChild(e),e.style.visibility="hidden",e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.willChange="transform",e.style.transition="none",this.view.requestMeasure(this.measureRequest),i}},t.removeElement=function(e){this.elements.has(e)&&(this.elements.delete(e),e.parentNode===this.overlay&&this.overlay.removeChild(e))},t.updateElement=function(e,t){var n=t.pos,r=t.offsetX,i=t.offsetY,o=this.elements.get(e);o&&(void 0!==n&&(o.pos=n),void 0!==r&&(o.offsetX=r),void 0!==i&&(o.offsetY=i),this.view.requestMeasure(this.measureRequest))},t.clear=function(){this.elements.clear(),this.overlay.innerHTML=""},e}();(u=_||(_={}))[u.Insertion=0]="Insertion",u[u.Deletion=1]="Deletion";var cR=function(){"use strict";function e(t){(0,lO._)(this,e),this.map=new Map,this.duration=t}var t=e.prototype;return t.set=function(e,t,n,r,i){var o=this.map.get(e);o||(o=new Map,this.map.set(e,o)),o.set(t,{from:e,to:t,time:n,type:r,cursor:i})},t.get=function(e,t){var n=this.map.get(e);if(n)return n.get(t)},t.update=function(t){var n=Date.now(),r=new e(this.duration),i=!0,o=!1,a=void 0;try{for(var l,c=this[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;if(!(n-s.time>this.duration)){var u=t.changes.mapPos(s.from,-1,ta.gc.TrackDel),d=t.changes.mapPos(s.to,-1,ta.gc.TrackDel);if(null!==u&&null!==d){var f=s.cursor;t.docChanged&&(f=!1),r.set(u,d,s.time,s.type,f)}}}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return t.changes.iterChangedRanges(function(e,t,i,o){r.set(i,o,n,i!==o?0:1,!0)},!0),r},t.cursors=function(){var e,t,n,r,i,o,a;return(0,tF.Jh)(this,function(l){switch(l.label){case 0:e=!0,t=!1,n=void 0,l.label=1;case 1:l.trys.push([1,6,7,8]),r=this[Symbol.iterator](),l.label=2;case 2:if(e=(i=r.next()).done)return[3,5];if(!(o=i.value).cursor)return[3,4];return[4,{type:o.type,pos:o.to}];case 3:l.sent(),l.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return a=l.sent(),t=!0,n=a,[3,8];case 7:try{e||null==r.return||r.return()}finally{if(t)throw n}return[7];case 8:return[2]}})},t[Symbol.iterator]=function(){var e=[],t=!0,n=!1,r=void 0;try{for(var i,o=this.map.values()[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var a=i.value,l=!0,c=!1,s=void 0;try{for(var u,d=a.values()[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var f=u.value;e.push(f)}}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}}}catch(e){n=!0,r=e}finally{try{t||null==o.return||o.return()}finally{if(n)throw r}}return e[Symbol.iterator]()},e}(),cD="cm-flash-insertion",cI="cm-flash-deletion",cB="cm-flash-element",cG=tu.tk.theme((0,ti._)({},".".concat(cD,", .").concat(cI),{display:"inline-block"})),cP=function(e){"use strict";(0,lU._)(n,e);var t=(0,lM._)(n);function n(){return(0,lO._)(this,n),t.apply(this,arguments)}var r=n.prototype;return r.isNested=function(){for(var e=this.parentElement;e&&!e.classList.contains("cm-line");){if(e instanceof n&&e.type===this.type)return!0;e=e.parentElement}return!1},r.stop=function(){var e,t;null===(t=this.animation)||void 0===t||null===(e=t.cancel)||void 0===e||e.call(t)},r.play=function(){var e=this.isPlaying;if(this.stop(),!this.isNested()){var t=Date.now()-parseInt(this.getAttribute("data-time")||"0",10);if(!(t>1e3)){var n=this.type===_.Insertion?"rgba(100, 255, 0, 0.3)":"rgba(255, 32, 32, 0.25)";this.animate&&(this.animation=this.animate({backgroundColor:e?[n,n,"transparent"]:["transparent",n,"transparent"],offset:[0,.05,1]},{id:"cm-flash-anim",duration:1e3,easing:"ease-in-out",delay:-t}))}}},r.connectedCallback=function(){this.play()},r.attributeChangedCallback=function(e,t,n){"data-time"===e&&n&&this.play()},(0,cE._)(n,[{key:"type",get:function(){return this.classList.contains(cD)?_.Insertion:_.Deletion}},{key:"isPlaying",get:function(){var e;return(null===(e=this.animation)||void 0===e?void 0:e.playState)==="running"}}],[{key:"observedAttributes",get:function(){return["data-time"]}}]),n}((0,lX._)(HTMLElement));customElements.get(cB)||customElements.define(cB,cP);var cA=function(){"use strict";function e(t){(0,lO._)(this,e),this.view=t,this.prevFlashes=new cR(1e3),this.decorations=tu.p.set([]),this.hasRenderedOnce=!1,this.overlay=new cT(t)}var t=e.prototype;return t.destroy=function(){this.overlay.destroy()},t.update=function(e){if(!this.hasRenderedOnce){e.docChanged&&(this.hasRenderedOnce=!0);return}var t=this.prevFlashes.update(e),n=[],r=!0,i=!1,o=void 0;try{for(var a,l=t[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;switch(c.type){case _.Insertion:n.push({from:c.from,to:c.to,value:(s=c.time,tu.p.mark({class:cD,tagName:cB,attributes:{"data-time":s.toString()}}))});break;case _.Deletion:var s,u,d=e.state.wordAt(c.from);d&&n.push({from:d.from,to:c.to,value:(u=c.time,tu.p.mark({class:cI,tagName:cB,attributes:{"data-time":u.toString()}}))})}}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}this.overlay.clear();var f=this.view.defaultLineHeight.toString()+"px",h=!0,p=!1,m=void 0;try{for(var v,g=t.cursors()[Symbol.iterator]();!(h=(v=g.next()).done);h=!0){var y=v.value,b=y.type,w=y.pos,Z=function(e,t){var n=e===_.Insertion?"rgba(0, 100, 255, 1)":"rgba(255, 32, 32, 1)",r=document.createElement("div");return r.style.width="3px",r.style.height=t,r.style.borderRadius="1px",r.style.backgroundColor=n,r.animate&&r.animate({opacity:[1,0]},{duration:500,delay:400,fill:"forwards"}),r}(b,f);this.overlay.addElement(Z,w)}}catch(e){p=!0,m=e}finally{try{h||null==g.return||g.return()}finally{if(p)throw m}}this.prevFlashes=t,this.decorations=tu.p.set(n,!0)},e}(),cL=tu.lg.fromClass(cA,{decorations:function(e){return e.decorations}}),cN=ta.Wl.lowest([cG,cL]),cO=n(11515),cU=n(42305),cX=n(28365),cM=n(43561),cF=function(){"use strict";function e(t){(0,lO._)(this,e),this.changes=[],this.forward=[],this.inverted=[],this.locations=[];var n=!0,r=!1,i=void 0;try{for(var o,a=this,l=t[Symbol.iterator]();!(n=(o=l.next()).done);n=!0)!function(){var e=o.value,t=e.changes,n=e.invertedChanges,r=null,i=!1;t.iterChangedRanges(function(e,t,n,o){i||(r||(r=o),n===o||(i=!0))}),a.forward.push(t),a.inverted.push(n),a.locations.push(r)}()}catch(e){r=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw i}}}var t=e.prototype;return t.slice=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;if(t>this.length||n>this.length||t<0||n<0)throw Error("Invalid version range");if(t===n){if(0===this.length)return[ta.as.empty(0),null];var r=this.forward[t].newLength;return[ta.as.empty(r),null]}var i=t<n?cW(this.forward.slice(t,n)):cW(this.inverted.slice(n,t).reverse()),o=t<n?t:n-1,a=null!==(e=this.locations[o])&&void 0!==e?e:null;return null!==a&&a>i.newLength&&(a=i.newLength),[i,a]},t.get=function(e){if(e>this.length||e<0)throw Error("Invalid version");return this.changes[e]},t.documentFor=function(e){if(e>this.length||e<0)throw Error("Invalid version");if(0===this.length)return"";var t=(0,N._)(this.slice(0,e),1)[0],n=ta.xv.of([""]);return t.apply(n).sliceString(0)},(0,cE._)(e,[{key:"length",get:function(){return this.forward.length}}]),e}();function cW(e){if(0===e.length)return ta.as.empty(0);if(1===e.length)return e[0];var t=(0,ev._)(e),n=t[0],r=t.slice(1),i=n,o=!0,a=!1,l=void 0;try{for(var c,s=r[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value;i=i.compose(u)}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}return i}var cV=new cU.j(function(){return(0,tu.CT)()}),cH=[cN,c_];function cz(e){var t,n,r,i=e.filePath,o=(0,lE.bA)(),a=(0,cO.Z)(),l=a.ref,c=a.view;(0,cX.VD)(c),(0,lE._H)(c);var s=lT();t=(0,ee.useMemo)(function(){return(null==o?void 0:o.changes)?new cF(o.changes):null},[null==o?void 0:o.changes]),n=(0,ee.useMemo)(function(){return t?t.documentFor(t.length):null},[t]),r=(0,ee.useRef)({current:-1,next:0,pending:!1}),(0,ee.useEffect)(function(){if(c)return function(){r.current.pending=!1,r.current={current:-1,next:0,pending:!1}}},[c]),(0,ee.useEffect)(function(){if(c&&o&&t){o.comparing?ch(c,n):ch(c,null);var e=r.current;e.next=o.version,e.pending||e.current===e.next||(e.pending=!0,requestAnimationFrame(function(){!1!==e.pending&&(e.pending=!1,c&&t&&e.current!==e.next&&(function(e,t,n,r){var i=(0,N._)(t.slice(n+1,r+1),2),o=i[0],a=i[1];if(o.length!==e.state.doc.length){var l=(0,N._)(t.slice(0,r+1),1)[0];if(l.length!==e.state.doc.length)throw Error("Unresolvable mismatch between changes and document");e.dispatch({changes:{from:0,to:e.state.doc.length}}),e.dispatch({changes:l});return}e.dispatch({changes:o,effects:a?tu.tk.scrollIntoView(a,{yMargin:10}):void 0})}(c,t,e.current,e.next),e.current=e.next))}))}},[c,o,t,n]);var u=cV.use();return(0,U.tZ)("div",{css:cM.ev,children:(0,U.tZ)("div",{css:cM.ac,children:o&&0===o.count?(0,U.tZ)(cj,{}):(0,U.tZ)("div",{css:cM.ac,children:(0,U.tZ)(tg.ZP,{ref:l,css:cM.Mp,filePath:i,extensions:[u,cH],initializing:!o,onException:function(e){s(e,"viewer-codemirror")},readOnly:!0,noHistory:!0,hideGutter:!0})})})})}function cj(){return(0,U.tZ)("div",{css:[cM.ac,{display:"flex",alignItems:"center",justifyContent:"center"}],children:(0,U.tZ)("span",{children:"This file has no history."})})}var cq=X.Dy.Object({type:X.Dy.Literal("history"),data:X.Dy.Object({path:X.Dy.Union([X.Dy.String(),X.Dy.Null()])})}),cJ={Content:function(e){var t=e.pane,n=e.options;return(0,U.tZ)(cY,(0,em._)((0,ep._)({},t.data),{performPaneOperation:n.performPaneOperation}))},Icon:function(e){var t=e.size;return(0,U.tZ)(lC.Z,{size:t})},getTitle:function(e){return e.data.path?"History - ".concat((0,et.UO)(e.data.path)):"History - no file open"},category:K.hc.WorkspaceFeatures,decode:function(e){return M.B4.Decode(cq,e)}};function cY(e){var t=e.path,n=e.performPaneOperation,r=(0,N._)((0,ee.useState)(function(){return(0,nx.MT)()}),1)[0],i=(0,N._)((0,ee.useState)(function(){return(0,nx.MT)()}),1)[0],o=(0,$.Mp)({path:t,performPaneOperation:n});(0,Q.L5)(function(){if(o)return{commands:o}},[o]);var a=(0,eh.Z)(function(){return function(){n({operation:"replace",pane:{type:"codeEditor",data:{path:t}}})}},[t,n]);return t?(0,U.tZ)(cX.Cl.Provider,{value:r,children:(0,U.tZ)(lE.ox.Provider,{value:i,children:(0,U.BX)("div",{css:{position:"relative",display:"flex",flexDirection:"column",overflowY:"hidden",height:"100%",width:"100%"},children:[(0,U.tZ)($.HK,{path:t,performPaneOperation:n}),(0,U.tZ)(cz,{filePath:t}),(0,U.tZ)(co,{filePath:t,onCloseHistory:a})]})})}):null}var c$=n(56466),cK=n(2047),cQ=n(37862),c0=n(75710),c1=n(79484),c2=n(73220),c3=n(30446),c4=n(30826),c8=n.n(c4),c6=n(90831),c5=n(73878),c7=n(572),c9=n(83918),se=n(6843),st=(0,ee.memo)(c2.Z),sn=(0,z.X)({bodyRoot:[J.l0.flex.growAndShrink(1),J.l0.overflowY("auto")],contentRoot:[J.l0.colWithGap(8),J.l0.height("100%"),J.l0.width("100%"),J.l0.overflow("auto"),J.l0.zIndex(2),J.l0.align.center,J.l0.py(16),J.l0.px(16),J.l0.borderRadius(8),(0,ti._)({margin:"0 auto"},"@media only screen and (min-width: ".concat(c0.j.tabletMin,"px)"),J.l0.px(32))],emptyState:[J.l0.colWithGap(4),J.l0.align.center,{"& button":[{color:J.TV.foregroundDimmer}]}],header:[J.l0.rowWithGap(4),J.l0.height(30),J.l0.width("100%"),J.l0.align.center],markdownContainer:[J.l0.width("100%"),{"& .rendered-markdown":[J.l0.flex.column,J.l0.center],"& .rendered-markdown > *":[J.l0.maxWidth(840),J.l0.width("100%")],"& .rendered-markdown > table":J.l0.maxWidth("100%")}],paneRoot:[J.l0.position.relative,J.l0.display.flex,J.l0.flex.column,J.l0.overflowY("hidden"),J.l0.height("100%"),J.l0.width("100%")]});function sr(e){var t,n,r=(0,Y.Z)().fs,i=(0,N._)((t=(0,ee.useRef)(!1),n=(0,ee.useRef)(null),[(0,cQ.Z)(function(){t.current=!0,n.current&&clearTimeout(n.current),n.current=setTimeout(function(){t.current=!1},150)},{type:"throttle",wait:37.5}),t]),2),o=i[0],a=i[1],l=(0,ee.useRef)(null),c=(0,cK.T)(),s=e.path,u=e.performPaneOperation,d=(0,ee.useCallback)(function(){u({operation:"replace",pane:{type:"codeEditor",data:{path:s}}}),u({operation:"commit"})},[u,s]);(0,Q.L5)(function(){return{commands:[{match:se.pl,data:{label:"Open in Editor",icon:(0,U.tZ)(ar.Z,{}),type:"action",run:d}}]}},[d]);var f=e.isHidden,h=(0,c7.p5)();(0,ee.useEffect)(function(){if(!f){var e=c8()(function(e){(0,c6.Z)(e,{behavior:c?"auto":"smooth",scrollMode:"if-needed"})},100),t=c8()(function(t){if(s===(null==t?void 0:t.path)&&t&&!a.current){var n=l.current?function(e,t){var n=e.querySelectorAll(".rendered-markdown [data-sourcepos]");if(!(null==n?void 0:n.length))return null;var r=Array.from(n).reverse(),i=t.line,o=t.column,a=!0,l=!1,c=void 0;try{for(var s,u=r[Symbol.iterator]();!(a=(s=u.next()).done);a=!0){var d=s.value,f=d.dataset.sourcepos;if(!f)throw Error("Expected data source pos on selected element");var h=(0,N._)(f.split("-"),2),p=h[0],m=h[1],v=(0,N._)(p.split(":").map(Number),2),g=v[0],y=v[1],b=(0,N._)(m.split(":").map(Number),2),w=b[0],Z=b[1];if(i>=g&&o>=y&&(i<w||i===w&&o<=Z))return d}}catch(e){l=!0,c=e}finally{try{a||null==u.return||u.return()}finally{if(l)throw c}}}(l.current,t.position):null;n&&e(n)}},200),n=h.subscribe(t);return function(){t.cancel(),e.cancel(),n()}}},[h,f,c,s]);var p=(0,N._)((0,ee.useState)(null),2),m=p[0],v=p[1];(0,ee.useEffect)(function(){return v(null),r.watchTextFile(s,{onReady:function(e){v(e.initialContent.toString())},onChange:function(e){v(e.latestContent)},onMoveOrDelete:function(e){e.eventType===c5.kS.Delete&&u({operation:"replace",pane:{type:"commands",data:{autoFocus:!0}}})}})},[s,r,u]);var g=(0,c1.y)(),y=g.isAiCalloutVisible,b=g.handleDismiss;return(0,U.BX)(H.G,{css:sn.paneRoot,children:[y?(0,U.tZ)(c1.Z,{filePath:e.path,onDismiss:b,performPaneOperation:e.performPaneOperation}):null,(0,U.tZ)($.HK,{path:e.path,performPaneOperation:u,children:m&&m.trim().length?(0,U.tZ)(c9.u,{altText:"Open file in editor",buttonText:"Open in Editor",onClick:d,icon:(0,U.tZ)(ar.Z,{})}):null}),(0,U.tZ)(H.G,{css:sn.bodyRoot,children:(0,U.tZ)(si,{ref:o,content:m,fs:r,markdownContainerRef:l,openInEditor:d,path:s})})]})}var si=(0,ee.forwardRef)(function(e,t){var n=e.content,r=e.fs,i=e.markdownContainerRef,o=e.openInEditor,a=e.path;return null===n?(0,U.tZ)(so,{}):(0,U.tZ)(H.G,{css:sn.contentRoot,innerRef:t,children:(0,U.tZ)(H.G,{innerRef:i,css:sn.markdownContainer,children:n.trim().length?(0,U.tZ)(st,{path:a,source:n,fs:r,sourcePos:!0}):(0,U.tZ)("div",{className:"rendered-markdown rendered-markdown-empty",children:(0,U.BX)(H.G,{css:sn.emptyState,innerRef:t,children:[(0,U.tZ)(V.xv,{color:"dimmer",children:(0,U.tZ)("i",{children:"This file is empty"})}),(0,U.tZ)(eb.zx,{text:"Open in Editor",iconLeft:(0,U.tZ)(ar.Z,{}),onClick:o,variant:"nofill"})]})})})})});function so(){var e=(0,N._)((0,ee.useState)(!1),2),t=e[0],n=e[1];return(0,ee.useEffect)(function(){var e=setTimeout(function(){return n(!0)},500);return function(){clearTimeout(e)}},[]),t?(0,U.tZ)(c3.Z,{}):null}var sa=X.Dy.Object({type:X.Dy.Literal("markdown"),data:X.Dy.Object({path:X.Dy.String({minLength:1})})}),sl={Content:function(e){var t=e.pane,n=e.options;return(0,U.tZ)(sr,{path:t.data.path,isHidden:!!n.isHidden,performPaneOperation:n.performPaneOperation})},Icon:function(e){var t=e.size;return(0,U.tZ)(c$.Z,{fill:"currentColor",size:t})},getTitle:function(e){return e.data.path?(0,et.UO)(e.data.path):"Markdown"},category:K.hc.WorkspaceFeatures,decode:function(e){return M.B4.Decode(sa,e)}},sc=X.Dy.Object({type:X.Dy.Literal("media"),data:X.Dy.Object({path:X.Dy.String()})}),ss={Content:function(e){var t=e.pane,n=e.options;return(0,U.tZ)(su,{path:t.data.path,performPaneOperation:n.performPaneOperation})},Icon:function(e){var t=e.pane,n=e.size;return(0,U.tZ)(W.Z,{path:t.data.path,size:n})},getTitle:function(e){return(0,et.UO)(e.data.path)},category:K.hc.WorkspaceFeatures,decode:function(e){return M.B4.Decode(sc,e)}};function su(e){var t=e.path,n=e.performPaneOperation,r=(0,Y.Z)().fs,i=(0,$.Mp)({path:t,performPaneOperation:n}),o=i?(0,O._)(i):[],a=(0,ee.useCallback)(function(){n({operation:"replace",pane:{type:"codeEditor",data:{path:t}}})},[n,t]),l={match:se.pl,data:{label:"Open in Editor",icon:(0,U.tZ)(ar.Z,{}),type:"action",run:function(){a()}}};return(0,et.B4)(t)&&o.push(l),(0,Q.L5)(function(){if(i)return{commands:o}},[i]),(0,U.BX)(U.HY,{children:[(0,U.tZ)($.HK,{path:t,performPaneOperation:n,children:(0,U.tZ)(c9.u,{altText:"Open file in editor",buttonText:"Open in Editor",onClick:a,icon:(0,U.tZ)(ar.Z,{})})}),(0,U.tZ)($.VY,{centered:!0,children:(0,U.tZ)(tR.Z,{filePath:t,fs:r})})]})}var sd=n(59905),sf=n(86201),sh=n(61010),sp=function(e){(0,lk.j)(lk.U3.DATABASE_USED,(0,ep._)({type:"PostgreSQL",provider:"neon"},e))},sm="DATABASE_URL",sv="PGDATABASE",sg="PGHOST",sy="PGPORT",sb="5432",sw="PGUSER",sZ="PGPASSWORD",sx=function(e){var t=e.envVarKey,n=e.envVarValue,r=e.isSecret,i=(0,a$.U)()("db-env-var-".concat(t)),o=(0,N._)((0,ee.useState)(!1),2),a=o[0],l=o[1];return(0,U.BX)(H.G,{css:[J.l0.flex.row,J.l0.flex.wrap,J.l0.align.end,J.l0.pb(8),{gap:J.TV.space8}],children:[(0,U.BX)(H.G,{css:[J.l0.colWithGap(8),{flexBasis:250},J.l0.flex.grow(0),J.l0.flex.shrink(1)],children:[(0,U.tZ)("label",{css:J.l0.color.foregroundDimmer,htmlFor:i,children:t}),(0,U.tZ)(eg.II,{id:i,type:!r||a?"text":"password",readOnly:!0,value:n})]}),(0,U.tZ)(eb.zx,{text:"Copy",iconLeft:(0,U.tZ)(sf.Z,{}),onClick:function(){(0,ey.Z)(n),sp({action:"envVarCopied",envVarKey:t,envVarType:"value"})}}),r?(0,U.tZ)(eb.zx,{text:a?"Hide":"View",iconLeft:a?(0,U.tZ)(sh.Z,{}):(0,U.tZ)(ai.Z,{}),onClick:function(){return l(function(e){return!e})}}):null]})},sC=function(e){var t=e.connectionString,n=e.databaseName,r=new URL(t.replace("postgres://","https://")),i=r.host,o=r.username,a=r.password;return new Map([[sm,t],[sv,n],[sg,i],[sy,sb],[sw,o],[sZ,a]])},sk=function(){var e=(0,Y.Z)().secrets;return(0,ee.useCallback)(function(t){var n=sC({connectionString:t.connectionString,databaseName:t.databaseName});function r(){return(r=(0,tM._)(function(){var t,r,i,o,a,l,c,s,u,d;return(0,tF.Jh)(this,function(f){switch(f.label){case 0:return[4,e.read()];case 1:t=f.sent(),r=new Map,i=!0,o=!1,a=void 0;try{for(l=n[Symbol.iterator]();!(i=(c=l.next()).done);i=!0)u=(s=(0,N._)(c.value,2))[0],d=s[1],t.get(u)!==d&&r.set(u,d)}catch(e){o=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}return r.size>0&&e.addEntries(r),[2]}})})).apply(this,arguments)}!function(){r.apply(this,arguments)}()},[e])},sS=function(e){var t=e.connectionString,n=e.databaseName,r=(0,eh.Z)(function(){return sC({connectionString:t,databaseName:n})},[t,n]),i=r.get(sg),o=r.get(sw),a=r.get(sZ);if("string"!=typeof i||"string"!=typeof o||"string"!=typeof a)throw Error("Expected all envVars to exist");var l=sk();return(0,ee.useEffect)(function(){l({connectionString:t,databaseName:n})},[t,n,l]),(0,U.BX)(H.G,{css:[J.l0.colWithGap(8)],children:[(0,U.tZ)(sx,{envVarKey:sm,envVarValue:t,isSecret:!0}),(0,U.tZ)(sx,{envVarKey:sv,envVarValue:n}),(0,U.tZ)(sx,{envVarKey:sg,envVarValue:i}),(0,U.tZ)(sx,{envVarKey:sy,envVarValue:sb}),(0,U.tZ)(sx,{envVarKey:sw,envVarValue:o}),(0,U.tZ)(sx,{envVarKey:sZ,envVarValue:a,isSecret:!0})]})},s_=n(38935),sE=n(19602),sT=n(52202),sR=n(99059),sD=n(57185),sI=n(48827),sB=n(24374),sG=n(76711),sP=n(5297);function sA(){var e=(0,eK._)(["\n  fragment CurrentUserUsageBasedBillingSummary on CurrentUser {\n    __typename\n    usageBasedBilling {\n      __typename\n      ... on UserUsageBasedBillingSummary {\n        capabilities {\n          canUseUsageBasedBilling\n          explanation\n          hasPaymentMethod\n        }\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n      ... on ServiceUnavailable {\n        message\n      }\n    }\n  }\n"]);return sA=function(){return e},e}function sL(){var e=(0,eK._)(["\n  query CurrentUserUsageBasedBilling {\n    currentUser {\n      id\n      username\n      ...CurrentUserUsageBasedBillingSummary\n    }\n  }\n  ","\n"]);return sL=function(){return e},e}var sN=(0,eQ.Ps)(sA());function sO(){var e=(0,eK._)(["\n  query DatabaseFrozen {\n    currentUser {\n      id\n      userSubscriptionType\n      ...CurrentUserUsageBasedBillingSummary\n    }\n  }\n  ","\n"]);return sO=function(){return e},e}sL();var sU={},sX=(0,eQ.Ps)(sO(),sN);function sM(){var e=(0,eK._)(["\n  mutation CreateNeonDatabase($input: CreateNeonDatabaseInput!) {\n    createNeonDatabase(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on CreateNeonDatabaseResult {\n        databaseId\n        databaseName\n        projectId\n        connectionString\n        isFrozen\n      }\n    }\n  }\n"]);return sM=function(){return e},e}function sF(){var e=(0,eK._)(["\n  mutation DeleteNeonDatabase($input: DeleteNeonDatabaseInput!) {\n    deleteNeonDatabase(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on DeleteNeonDatabaseResult {\n        success\n      }\n    }\n  }\n"]);return sF=function(){return e},e}function sW(){var e=(0,eK._)(["\n  query GetNeonDatabases($input: GetNeonDatabasesInput!) {\n    getNeonDatabases(input: $input) {\n      __typename\n      ... on UserError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on GetNeonDatabasesResult {\n        databases {\n          databaseId\n          databaseName\n          projectId\n          connectionString\n          isFrozen\n        }\n      }\n    }\n  }\n"]);return sW=function(){return e},e}function sV(){var e=(0,eK._)(["\n  mutation UnfreezeNeonDatabase($input: UnfreezeNeonDatabaseInput!) {\n    unfreezeNeonDatabase(input: $input) {\n      ... on UnfreezeNeonDatabaseResult {\n        success\n      }\n    }\n  }\n"]);return sV=function(){return e},e}var sH={},sz=(0,eQ.Ps)(sM()),sj=(0,eQ.Ps)(sF()),sq=(0,eQ.Ps)(sW()),sJ=(0,eQ.Ps)(sV()),sY=(0,z.X)({self:[],title:[J.l0.rowWithGap(8),J.l0.align.center,J.l0.color.foregroundDimmest],status:[J.l0.width(8),J.l0.height(8),J.l0.backgroundColor.foregroundDimmer,J.l0.borderRadius("full")],main:[J.l0.colWithGap(8),J.l0.align.center],icon:J.l0.mt(32),subTitle:J.l0.my(16),cta:[J.l0.width("100%"),J.l0.maxWidth(320),{marginLeft:"auto",marginRight:"auto"}],ctaContainer:[J.l0.colWithGap(8),J.l0.align.center],ctaStatusBanner:[J.l0.textAlign.left],budgetContainer:[J.l0.colWithGap(8),J.l0.border(),J.l0.borderRadius(8),J.l0.p(8)]});function s$(e){var t=e.loading,n=e.ubbExplanation,r=e.hasPaymentMethod,i=e.handleOnUnpause,o=e.refetchUbbCapabilitiesQueryData,a=e.setShowPaymentMethodForm,l=e.showPaymentMethodForm,c=e.setShowSupportForm,s=(0,aX.sG)();return n===aK.Fp.NeedsSubscription||n===aK.Fp.NeedsSubscriptionOrPaymentMethod?s?(0,U.tZ)(e6.E,{text:"You need a subscription to use PostgreSQL databases. Navigate to Account > Billing to upgrade.",colorway:"warning",icon:(0,U.tZ)(rg.Z,{}),css:sY.ctaStatusBanner}):(0,U.BX)(H.G,{css:sY.ctaContainer,children:[(0,U.tZ)(sP.Z,{context:"workspace_hosting_pane",text:"Upgrade your plan to unpause database",css:sY.cta,colorway:"primary",variant:"outlined",disabled:l,onPlanCheckoutComplete:o}),(0,U.tZ)(eb.zx,{variant:"nofill",colorway:"primary",text:"or add a payment method",css:sY.cta,disabled:l,loading:t,iconLeft:(0,U.tZ)(sG.Z,{}),onClick:function(){return a()}})]}):n===aK.Fp.NeedsSmsVerification?(0,U.tZ)(sR.Z,{context:aK.jv.Neon,onSuccess:o}):n===aK.Fp.NeedsPaymentMethod?s?(0,U.tZ)(e6.E,{text:"You have used all free usage for this month. Check your email for more information or contact support.",colorway:"warning",icon:(0,U.tZ)(rg.Z,{}),css:sY.ctaStatusBanner}):(0,U.tZ)(eb.zx,{colorway:"primary",text:"Add a payment method",css:sY.cta,disabled:l,loading:t,iconLeft:(0,U.tZ)(sG.Z,{}),onClick:function(){return a()}}):n===aK.Fp.NeedsUnbanning?(0,U.tZ)(sB.u,{text:"Your account currently has restrictions on use PostgreSQL databases. We're here to help! Please reach out to our support team for assistance.",colorway:"warning",iconLeft:(0,U.tZ)(rg.Z,{}),css:sY.ctaStatusBanner,onClick:function(){return c()}}):n===aK.Fp.InsufficientBudget?(0,U.BX)(U.HY,{children:[(0,U.tZ)(e6.E,{text:"You've reached your monthly usage budget. Increase your budget to unpause your database.",colorway:"warning",icon:(0,U.tZ)(rg.Z,{}),css:sY.ctaStatusBanner}),(0,U.tZ)(H.G,{css:sY.budgetContainer,children:(0,U.tZ)(sI.L,{onUpdateSuccess:o})})]}):(0,U.BX)(U.HY,{children:[(0,U.tZ)(eb.zx,{colorway:"primary",onClick:i,text:"Unpause database",loading:t,css:sY.cta}),!1===r?(0,U.tZ)(sB.u,{text:"Add a payment method to avoid downtime",colorway:"warning",iconLeft:(0,U.tZ)(rg.Z,{}),css:sY.ctaStatusBanner,onClick:function(){return s?null:a()}}):null]})}function sK(e){var t,n,r,i=e.replId,o=e.neonProjectId,a=e.onDatabaseUnfreezed,l=(0,N._)((0,ee.useState)(!1),2),c=l[0],s=l[1],u=(0,N._)((0,ee.useState)(!1),2),d=u[0],f=u[1],h=(0,ax.Z)().showError,p=(t=(0,ep._)({},sU,{notifyOnNetworkStatusChange:!0,onError:function(e){h(e.message)}}),e0.a(sX,t)),m=p.loading,v=p.data,g=p.refetch,y=(0,N._)((n=(0,ep._)({},sH,{onError:function(e){h("Error when unfreezing Neon database: ".concat(e.message)),sp({action:"unfreeze",success:!1})},onCompleted:function(e){if((null==e?void 0:e.unfreezeNeonDatabase.__typename)!=="UnfreezeNeonDatabaseResult"){h("Error: Unfreezes Neon Database failed."),sp({action:"unfreeze",success:!1});return}(null==e?void 0:e.unfreezeNeonDatabase.success)?(a(),sp({action:"unfreeze",success:!0})):(h("Error: Unfreezes Neon Database failed."),sp({action:"unfreeze",success:!1}))}}),aQ.D(sJ,n)),2),b=y[0],w=y[1].loading,Z=(null==v?void 0:null===(r=v.currentUser)||void 0===r?void 0:r.usageBasedBilling.__typename)==="UserUsageBasedBillingSummary"?v.currentUser.usageBasedBilling.capabilities:null;return(0,U.BX)(H.G,{css:sY.self,children:[(0,U.tZ)(rX.u,{isOpen:d,onRequestClose:function(){return f(!1)},children:(0,U.tZ)(sD.Z,{onRequestClose:function(){return f(!1)}})}),(0,U.BX)(H.G,{css:sY.title,children:[(0,U.tZ)(H.G,{css:sY.status}),(0,U.tZ)(V.xv,{css:[J.l0.color.foregroundDimmest],multiline:!1,children:"Database paused"})]}),(0,U.BX)(H.G,{css:sY.main,children:[(0,U.tZ)(nm.Z,{size:32,fill:tt.TV.foregroundDimmest,css:sY.icon}),(0,U.tZ)(V.xv,{variant:"subheadDefault",css:sY.subTitle,multiline:!1,children:"Your Database is paused."}),(0,U.tZ)(s$,{loading:m||w,ubbExplanation:null==Z?void 0:Z.explanation,hasPaymentMethod:null==Z?void 0:Z.hasPaymentMethod,handleOnUnpause:function(){b({variables:{input:{replId:i,neonProjectId:o}}})},refetchUbbCapabilitiesQueryData:g,setShowPaymentMethodForm:function(){return s(!0)},showPaymentMethodForm:c,setShowSupportForm:function(){return f(!0)}})]})]})}var sQ=function(e){var t=e.title,n=e.children,r=e.isAccordion,i=e.sectionStyles;return(0,U.tZ)(H.G,{css:[J.l0.colWithGap(8),J.l0.pt(8),{borderTopWidth:1,borderTopStyle:"solid",borderTopColor:J.TV.outlineDefault},i],children:r?(0,U.tZ)(eM.Q,{headerContent:(0,U.tZ)(H.G,{css:[J.l0.rowWithGap(8),J.l0.align.center],children:(0,U.tZ)(V.xv,{variant:"subheadDefault",multiline:!1,children:t})}),children:(0,U.tZ)(H.G,{css:[J.l0.p(12),J.l0.colWithGap(8),J.l0.height("100%")],children:n})}):(0,U.BX)(U.HY,{children:[(0,U.tZ)(V.xv,{multiline:!1,css:[J.l0.fontSize(J.TV.fontSizeSubheadDefault),J.l0.fontWeight.medium],children:t}),n]})})},s0=n(54994);function s1(e){var t=e.title,n=e.doWarnAtom,r=e.inactive,i=(0,nZ.Dv)(n);return(0,U.BX)(H.G,{css:[J.l0.rowWithGap(4),J.l0.align.center],children:[(0,U.tZ)(V.xv,{variant:"small",css:J.l0.color.foregroundDimmer,multiline:!1,children:void 0!==r&&r?t+" last run":t}),i?(0,U.tZ)(rg.Z,{color:J.TV.orangeStronger}):null]})}function s2(e){var t=e.title,n=e.totalAtom,r=e.currentAtom,i=e.countAtom,o=e.measure,a=e.limitText,l=e.inactive,c=void 0!==l&&l,s=(0,eh.Z)(function(){return(0,nx.cn)(function(e){return s4(e(r),e(n))})},[r,n]),u=(0,eh.Z)(function(){return(0,nx.cn)(function(e){var t,l,c,u;return a||(t=e(s),l=e(r),c=e(n),u=i&&e(i),"empty"===t||void 0===l?void 0:"vCPU"===o?s8(100*Math.min(1,l/c))+"% of "+u+" vCPUs":s8(l).toLocaleString()+"/"+s8(c).toLocaleString()+" "+o)})},[a,s,r,n,i,o]),d=(0,eh.Z)(function(){return(0,nx.cn)(function(e){var t=e(s);return"At limit"===t||"Close to limit"===t})},[s]);return(0,U.BX)(H.G,{css:[J.l0.colWithGap(4),J.l0.flex.growAndShrink(2),{flexBasis:32}],children:[t?(0,U.tZ)(s1,{title:t,doWarnAtom:d,inactive:c}):null,(0,U.tZ)(s3,{currentAtom:r,totalAtom:n,inactive:c,limitTextAtom:u,mini:!0})]})}function s3(e){var t=e.currentAtom,n=e.totalAtom,r=e.limitTextAtom,i=e.inactive,o=e.mini,a=(0,nZ.Dv)(n),l=(0,nZ.Dv)(t),c=(0,nZ.Dv)(r),s=function(e){switch(e){case"empty":case"fine":default:return;case"At limit":return J.TV.accentNegativeDefault;case"Close to limit":return J.TV.orangeDefault}}(s4(l,a));return(0,U.tZ)(ej.J,{css:o&&J.l0.height(8),total:a,current:l,color:s,disabled:i,tooltip:c})}function s4(e,t){if(void 0===e)return"empty";var n=e/t;return n>=1?"At limit":n>=.9?"Close to limit":"fine"}function s8(e){return Math.round((e+Number.EPSILON)*100)/100}var s6=n(9834),s5=n.n(s6),s7=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],s9=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];function ue(e,t){var n,r=t||{},i=r.signed,o=r.digitsNumber,a=r.isKib,l=r.isKibNotation;if(n=void 0!==i&&i?e<0?"-":"+":"",0===e)return"".concat(n,"0B");var c=void 0===a||a?1024:1e3,s=Math.floor(Math.log(Math.abs(e))/Math.log(c));return"".concat(n).concat(parseFloat(Math.abs(e/Math.pow(c,s)).toFixed(void 0===o?2:o))).concat((void 0!==l&&l?s7:s9)[s])}var ut=n(48155),un=n(49673),ur=n(91394),ui=n(11092),uo=n(26464),ua=n(99399),ul=n(6921),uc=n(11659),us=n(11432),uu=n(33938),ud=n(13851),uf=n(23350),uh=n(84710),up=n(41805),um=n(78355),uv={"td,th":{border:"1px solid "+J.TV.outlineDefault}},ug={"td,th":{paddingLeft:8,paddingTop:8,paddingBottom:8,paddingRight:8,whiteSpace:"nowrap"},"td:first-of-type,th:first-of-type":{paddingLeft:8}},uy={outline:"2px solid ".concat(J.TV.accentPrimaryDefault),outlineOffset:"-2px"},ub=(0,eV.iv)({":focus:focus-visible":uy}),uw=(0,eV.iv)(uy),uZ=(0,eV.iv)([ug,uv,ub]),ux=(0,eV.iv)([J.l0.fontWeight.medium,ug,uv,ub]),uC=(0,eV.iv)({"tbody > tr:hover":{backgroundColor:J.TV.backgroundHigher,cursor:"pointer"}});function uk(e){var t=e.type,n=e.style,r=e.children,i=(0,un.LA)().rowGroupProps;return(0,U.tZ)(t,(0,em._)((0,ep._)({},i),{style:n,children:r}))}function uS(e){var t=e.item,n=e.state,r=e.children,i=(0,ee.useRef)(null),o=(0,ur.Q)({node:t},n,i).rowProps;return(0,U.tZ)("tr",(0,em._)((0,ep._)({css:ux},o),{ref:i,children:r}))}function u_(e){var t,n=e.column,r=e.state,i=(0,ee.useRef)(null),o=(0,ui.W)({node:n},r,i).columnHeaderProps,a=(0,uo.F)(),l=a.isFocusVisible,c=a.focusProps;return(0,U.tZ)("th",(0,em._)((0,ep._)({},(0,ua.d)(o,c)),{css:[l&&uw,ub],colSpan:n.colspan,style:{textAlign:(null!==(t=n.colspan)&&void 0!==t?t:1)>1?"center":"left"},ref:i,children:n.rendered}))}function uE(e){var t=e.item,n=e.children,r=e.state,i=(0,ee.useRef)(null),o=(0,ul.U)({node:t},r,i).rowProps,a=(0,uo.F)(),l=a.isFocusVisible,c=a.focusProps;return(0,U.tZ)("tr",(0,em._)((0,ep._)({css:[l&&uw,uZ]},(0,ua.d)(o,c)),{ref:i,children:n}))}function uT(e){var t=e.cell,n=e.state,r=(0,ee.useRef)(null),i=(0,uc.f)({node:t},n,r).gridCellProps,o=(0,uo.F)(),a=o.isFocusVisible,l=o.focusProps;return(0,U.tZ)("td",(0,em._)((0,ep._)({},(0,ua.d)(i,l)),{css:[a&&uw,ub],ref:r,children:t.rendered}))}function uR(e){var t=e.selectionMode,n=e.selectionBehavior,r=(0,uu.o)((0,em._)((0,ep._)({},e),{showSelectionCheckboxes:"multiple"===t&&"replace"!==n})),i=(0,ee.useRef)(null),o=r.collection,a=(0,us.x)(e,r,i).gridProps;return(0,U.BX)("table",(0,em._)((0,ep._)({},a),{ref:i,css:[(null==e?void 0:e.onRowAction)&&uC],style:{borderCollapse:"collapse"},children:[(0,U.tZ)(uk,{type:"thead",children:o.headerRows.map(function(e){return(0,U.tZ)(uS,{item:e,state:r,children:(0,O._)(e.childNodes).map(function(e){return(0,U.tZ)(u_,{column:e,state:r},e.key)})},e.key)})}),(0,U.tZ)(uk,{type:"tbody",children:(0,O._)(o.body.childNodes).map(function(e){return(0,U.tZ)(uE,{item:e,state:r,children:(0,O._)(e.childNodes).map(function(e){return(0,U.tZ)(uT,{cell:e,state:r},e.key)})},e.key)})})]}))}var uD=function(e){var t=e.ariaTableProps,n=e.rows,r=e.columns;return(0,U.BX)(uR,(0,em._)((0,ep._)({},t),{children:[(0,U.tZ)(ud.x,{columns:r,children:function(e){return(0,U.tZ)(uf.s,{children:e.value})}}),(0,U.tZ)(uh.R,{items:n,children:function(e){return(0,U.tZ)(up.X,{children:function(t){return(0,U.tZ)(um.b,{children:e[t]})}})}})]}))};function uI(e){var t=e.headerColumns,n=e.bodyData,r=e.ariaLabel,i=e.scrollRef,o=e.onRowAction,a=t.map(function(e,t){return{key:"string"==typeof e?e:"".concat(t),value:e}}),l=n.map(function(e,n){for(var r={id:n},i=0;i<e.length;i++){var o=t[i];r["string"==typeof o?o:"".concat(i)]=e[i]}return r});return(0,U.tZ)(uD,{ariaTableProps:{selectionMode:"none","aria-label":void 0===r?"Database Table":r,onRowAction:o,scrollRef:i},columns:a,rows:l})}var uB=(0,nx.cn)(["databaseManager"]),uG=(0,nx.cn)(null,function(e,t,n){var r=e(uB);t(uB,(0,O._)(r).concat([n])),sp({action:"pageNav",databasePage:n})}),uP=(0,nx.cn)(null,function(e,t){var n=e(uB);t(uB,n.slice(0,n.length-1))}),uA=(0,nx.cn)(function(e){var t=e(uB);return t[t.length-1]}),uL=function(){return(0,nZ.b9)(uG)},uN=function(){return(0,nZ.b9)(uP)},uO=function(e,t){var n,r=(0,Y.Z)().psql,i=(0,N._)((0,ee.useState)(),2),o=i[0],a=i[1],l=(0,N._)((0,ee.useState)(!1),2),c=l[0],s=l[1],u=(0,ee.useCallback)((n=(0,tM._)(function(){return(0,tF.Jh)(this,function(n){switch(n.label){case 0:if(!e)return[2];n.label=1;case 1:return n.trys.push([1,,3,4]),s(!0),[4,r.run({query:e,connectionString:t})];case 2:return a(n.sent()),[3,4];case 3:return s(!1),[7];case 4:return[2]}})}),function(){return n.apply(this,arguments)}),[t,r,e]);return(0,ee.useEffect)(function(){u()},[t,r,e,u]),{data:o,loading:c,refetch:u}},uU=function(e){var t=e.rows,n=e.columns;return!Array.isArray(t)||t.length<1?null:{headerColumns:null!=n?n:[],bodyData:t.map(function(e){return Object.values(e)})}},uX=function(e){return uO("SELECT n.nspname as \"Schema\",\n  c.relname as \"Name\",\n  CASE c.relkind WHEN 'r' THEN 'table' WHEN 'v' THEN 'view' WHEN 'm' THEN 'materialized view' WHEN 'i' THEN 'index' WHEN 'S' THEN 'sequence' WHEN 's' THEN 'special' WHEN 'f' THEN 'foreign table' WHEN 'p' THEN 'partitioned table' WHEN 'I' THEN 'partitioned index' END as \"Type\",\n  pg_catalog.pg_get_userbyid(c.relowner) as \"Owner\",\n  pg_catalog.pg_size_pretty(pg_catalog.pg_total_relation_size(c.oid)) as \"Size\",\n  pg_catalog.obj_description(c.oid, 'pg_class') as \"Description\"\nFROM pg_catalog.pg_class c\n     LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace\nWHERE c.relkind IN ('r','p','v','m','S','f','')\n      AND n.nspname <> 'pg_catalog'\n      AND n.nspname <> 'information_schema'\n      AND n.nspname !~ '^pg_toast'\n  AND pg_catalog.pg_table_is_visible(c.oid)\nORDER BY 1,2;",e.connectionString)},uM=(0,nx.cn)(void 0),uF=(0,nx.cn)(function(e){var t=e(uM);return null==t?void 0:t.rows.reduce(function(e,t){var n=t.table_name,r=t.column_name;return e[n]||(e[n]=[]),e[n].push(r),e},{})}),uW=function(e){var t=uO("SELECT table_name, column_name, data_type FROM information_schema.columns WHERE table_schema = 'public';",e.connectionString).data,n=(0,nZ.b9)(uM);(0,ee.useEffect)(function(){n(t)},[t,n])},uV=function(e){var t=e.tableName,n=e.connectionString;return uO("SELECT table_name, column_name, data_type FROM information_schema.columns WHERE table_schema = 'public' AND table_name = '".concat(t.replace(/"/g,'""'),"';"),n).data},uH=function(e){var t=e.tableData,n=e.scrollRef,r=t.headerColumns,i=t.bodyData,o=uL(),a=(0,ee.useCallback)(function(e){var t=parseInt(String(e),10);if(!isNaN(t)){var n=i[t][r.indexOf("Name")];o("table/".concat(n))}},[o,r,i]);return(0,U.tZ)(uI,{headerColumns:r,bodyData:i,onRowAction:a,scrollRef:n})},uz=function(e){var t=e.psqlQueryResult,n=e.scrollRef,r=t.data;if(t.loading)return(0,U.tZ)(H.G,{css:[J.l0.flex.row,J.l0.justify.center,J.l0.p(32)],children:(0,U.tZ)(q.Z,{})});if(null==r?void 0:r.error)return(0,U.tZ)(H.G,{css:[J.l0.flex.row,J.l0.justify.center,J.l0.p(32)],children:(0,U.tZ)(V.xv,{css:[J.l0.color.accentNegativeDefault,J.l0.maxWidth("100%")],children:null==r?void 0:r.error})});var i=r?uU(r):null;return i?(0,U.tZ)(uH,{tableData:i,scrollRef:n}):(0,U.tZ)(H.G,{css:[J.l0.flex.row,J.l0.justify.center,J.l0.p(32)],children:(0,U.tZ)(V.xv,{css:[J.l0.color.accentPositiveDefault,J.l0.maxWidth("100%")],children:"No tables found"})})},uj=function(e){var t=e.connectionString,n=uN(),r=(0,ee.useRef)(null),i=uX({connectionString:t}),o=i.refetch;return(0,U.BX)(H.G,{css:[J.l0.flex.column,J.l0.height("100%")],children:[(0,U.BX)(H.G,{css:[J.l0.flex.row,J.l0.py(16),J.l0.px(8),J.l0.align.center],children:[(0,U.tZ)(F.hU,{alt:"Go back",size:28,type:"button",onClick:n,children:(0,U.tZ)(ut.Z,{})}),(0,U.tZ)(H.G,{css:[J.l0.flex.growAndShrink(1)],children:(0,U.tZ)(V.xv,{css:[J.l0.fontSize(16),J.l0.ml(8)],multiline:!1,children:"All tables"})}),(0,U.tZ)(F.hU,{alt:"Refresh",size:24,type:"button",onClick:o,children:(0,U.tZ)(rr.Z,{})})]}),(0,U.tZ)(H.G,{css:[J.l0.flex.growAndShrink(1),J.l0.overflow("auto"),J.l0.px(8)],innerRef:r,children:(0,U.tZ)(uz,{psqlQueryResult:i,scrollRef:r})})]})},uq="1px solid "+J.TV.outlineDefault,uJ=(0,eV.iv)([J.l0.p(8),J.l0.backgroundColor.backgroundDefault,J.l0.align.center,J.l0.borderRadius(0),{borderLeft:uq,borderRight:uq,borderBottom:uq},{":not([disabled])":{":focus":{boxShadow:"none",outline:"2px solid ".concat(J.TV.accentPrimaryDefault),outlineOffset:"-2px"},":hover":{backgroundColor:J.TV.backgroundHigher}}}]),uY=function(e){var t=uX({connectionString:e.connectionString}),n=t.data,r=t.loading,i=(0,N._)((0,ee.useState)(!1),2),o=i[0],a=i[1],l=(0,ee.useCallback)(function(){a(!0)},[]),c=n?uU(n):null,s=(0,ee.useRef)(null);if(!c||r)return null;var u=c.bodyData.length,d=c.headerColumns,f=c.bodyData;return(0,U.tZ)(U.HY,{children:(0,U.BX)(H.G,{css:[J.l0.overflow("auto"),J.l0.display.grid],innerRef:s,children:[(0,U.tZ)(uH,{tableData:{headerColumns:d,bodyData:o?f:f.slice(0,5)},scrollRef:s}),u-5>0&&!o?(0,U.tZ)(eb.zx,{text:"".concat(u-5," more"),css:uJ,onClick:l}):null]})})},u$="https://docs.replit.com/cloud-services/storage-and-databases/postgresql-on-replit",uK="https://docs.replit.com/replit-core/about-usage-based-billing#1-postgresql-usage-metrics",uQ=n(3569),u0=n(56091),u1=function(e){var t=e.dbSize,n=e.totalSize,r=ue(t),i=ue(n),o=(0,eh.Z)(function(){return(0,nx.cn)(t)},[t]),a=(0,eh.Z)(function(){return(0,nx.cn)(n)},[n]);return(0,U.BX)(U.HY,{children:[(0,U.BX)(V.xv,{css:J.l0.color.foregroundDimmer,multiline:!1,children:[r,"/",i]}),(0,U.tZ)(s2,{totalAtom:a,currentAtom:o,limitText:"".concat(r," / ").concat(i),inactive:!1,measure:"MB"})]})},u2=function(e){var t,n,r=e.connectionString,i=uO("SELECT sum(pg_database_size(datname)) FROM pg_database;",r),o=i.data,a=i.loading,l=uO("SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' ORDER BY table_name;",r),c=l.data,s=l.loading,u=parseInt(null!==(n=null==o?void 0:null===(t=o.rows[0])||void 0===t?void 0:t.sum)&&void 0!==n?n:"0",10),d=null==c?void 0:c.rows.length;return(0,U.BX)(H.G,{css:J.l0.rowWithGap(8),children:[s?null:(0,U.BX)(V.xv,{multiline:!1,children:[d," ",1===d?"table":"tables"]}),a?null:(0,U.tZ)(u1,{dbSize:u,totalSize:10737418240})]})},u3=function(e){var t=e.connectionString,n=e.onOpenDatabaseViewerClick,r=e.showUsageLink,i=(0,u0.$y)(window.location.pathname),o=i.id,a=i.slug,l=(0,uQ._Q)({id:o,slug:a}),c=o===ef.x0?"/usage#postgres-storage":"".concat(l.usage.href,"#postgres-storage");return(0,U.BX)(H.G,{css:[J.l0.colWithGap(8)],children:[(0,U.BX)(H.G,{children:[(0,U.tZ)(u2,{connectionString:t}),r?(0,U.tZ)(s5(),{legacyBehavior:!0,href:c,passHref:!0,children:(0,U.tZ)("a",{css:J.l0.hover(J.l0.color.accentPrimaryStrongest),children:(0,U.tZ)(V.xv,{children:"See all usage"})})}):null]}),(0,U.tZ)(uY,{connectionString:t}),(0,U.tZ)(eb.zx,{text:"See Database Contents",iconLeft:(0,U.tZ)(s0.Z,{}),onClick:n})]})},u4=function(e){var t=e.psqlQueryResult,n=e.tableName,r=e.connectionString,i=e.scrollRef,o=t.data,a=t.loading,l=uV({tableName:n,connectionString:r});if(a)return(0,U.tZ)(H.G,{css:[J.l0.flex.row,J.l0.justify.center,J.l0.p(32)],children:(0,U.tZ)(q.Z,{})});if(null==o?void 0:o.error)return(0,U.tZ)(H.G,{css:[J.l0.flex.row,J.l0.justify.center,J.l0.p(32)],children:(0,U.tZ)(V.xv,{css:[J.l0.color.accentNegativeDefault,J.l0.maxWidth("100%")],children:null==o?void 0:o.error})});var c=o?uU(o):null;if(!c)return(0,U.tZ)(H.G,{css:[J.l0.flex.row,J.l0.justify.center,J.l0.p(32)],children:(0,U.tZ)(V.xv,{css:[J.l0.color.accentPositiveDefault,J.l0.maxWidth("100%")],children:"No rows"})});var s=c.headerColumns,u=c.bodyData;return(0,U.tZ)(uI,{headerColumns:s.map(function(e,t){var n,r=null==l?void 0:null===(n=l.rows)||void 0===n?void 0:n.find(function(t){return t.column_name===e}),i=null==r?void 0:r.data_type,o=i?(0,U.tZ)(rW.D,{text:i}):null;return(0,U.BX)(H.G,{css:[J.l0.rowWithGap(8),J.l0.align.center],children:[(0,U.tZ)(V.xv,{multiline:!1,children:e}),o]},t)}),bodyData:u,scrollRef:i})},u8=function(e){var t=e.tableName,n=e.connectionString,r=uN(),i=(0,ee.useRef)(null),o=uO('SELECT * FROM "'.concat(t.replace(/"/g,'""'),'" LIMIT ').concat(500),n),a=o.refetch;return(0,U.BX)(H.G,{css:[J.l0.flex.column,J.l0.height("100%")],children:[(0,U.BX)(H.G,{css:[J.l0.flex.row,J.l0.py(16),J.l0.px(8),J.l0.align.center],children:[(0,U.tZ)(F.hU,{alt:"Go back",size:28,type:"button",onClick:r,children:(0,U.tZ)(ut.Z,{})}),(0,U.tZ)(H.G,{css:[J.l0.flex.growAndShrink(1)],children:(0,U.tZ)(V.xv,{css:[J.l0.fontSize(16),J.l0.ml(8)],multiline:!1,children:t})}),(0,U.tZ)(F.hU,{alt:"Refresh",size:24,type:"button",onClick:a,children:(0,U.tZ)(rr.Z,{})})]}),(0,U.tZ)(H.G,{css:[J.l0.flex.growAndShrink(1),J.l0.overflow("auto"),J.l0.px(8)],innerRef:i,children:(0,U.tZ)(u4,{psqlQueryResult:o,tableName:t,connectionString:n,scrollRef:i})})]})},u6=function(e){var t=e.size;return(0,U.BX)("svg",{viewBox:"0 0 128 36",preserveAspectRatio:"xMidYMin",height:void 0===t?16:t,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,U.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 6.207A6.207 6.207 0 0 1 6.207 0h23.586A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36H6.207A6.207 6.207 0 0 1 0 29.793V6.207Zm6.207-1.241c-.686 0-1.241.555-1.241 1.24v23.587c0 .686.555 1.242 1.24 1.242h10.925c.343 0 .434-.278.434-.621V16.18c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V6.207c0-.686.064-1.241-.621-1.241H6.207Z",fill:"#12FFF7"}),(0,U.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 6.207A6.207 6.207 0 0 1 6.207 0h23.586A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36H6.207A6.207 6.207 0 0 1 0 29.793V6.207Zm6.207-1.241c-.686 0-1.241.555-1.241 1.24v23.587c0 .686.555 1.242 1.24 1.242h10.925c.343 0 .434-.278.434-.621V16.18c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V6.207c0-.686.064-1.241-.621-1.241H6.207Z",fill:"url(#a)"}),(0,U.tZ)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 6.207A6.207 6.207 0 0 1 6.207 0h23.586A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36H6.207A6.207 6.207 0 0 1 0 29.793V6.207Zm6.207-1.241c-.686 0-1.241.555-1.241 1.24v23.587c0 .686.555 1.242 1.24 1.242h10.925c.343 0 .434-.278.434-.621V16.18c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V6.207c0-.686.064-1.241-.621-1.241H6.207Z",fill:"url(#b)"}),(0,U.tZ)("path",{d:"M29.793 0A6.207 6.207 0 0 1 36 6.207v20.06c0 3.546-4.488 5.085-6.664 2.286l-6.805-8.754v10.615A5.586 5.586 0 0 1 16.945 36a.62.62 0 0 0 .62-.62v-19.2c0-3.547 4.488-5.086 6.665-2.286l6.805 8.753V1.241C31.035.556 30.479 0 29.793 0Z",fill:"#B9FFB3"}),(0,U.tZ)("path",{d:"M60.686 10.6v9.416l-9.13-9.416h-4.752V26h4.334V15.88L61.082 26h3.938V10.6h-4.334ZM73.054 22.568V19.84h9.702v-3.278h-9.702v-2.53h11.77V10.6H68.632V26h16.434v-3.432H73.054ZM96.583 26.506c6.094 0 10.054-2.992 10.054-8.206 0-5.214-3.96-8.206-10.054-8.206S86.551 13.086 86.551 18.3c0 5.214 3.938 8.206 10.032 8.206Zm0-3.652c-3.388 0-5.478-1.65-5.478-4.554 0-2.904 2.112-4.554 5.478-4.554 3.388 0 5.478 1.65 5.478 4.554 0 2.904-2.09 4.554-5.478 4.554ZM123.249 10.6v9.416l-9.13-9.416h-4.752V26h4.334V15.88L123.645 26h3.938V10.6h-4.334Z",fill:"currentColor"}),(0,U.BX)("defs",{children:[(0,U.BX)("linearGradient",{id:"a",x1:"36",y1:"36",x2:"4.345",y2:"0",gradientUnits:"userSpaceOnUse",children:[(0,U.tZ)("stop",{stopColor:"#B9FFB3"}),(0,U.tZ)("stop",{offset:"1",stopColor:"#B9FFB3",stopOpacity:"0"})]}),(0,U.BX)("linearGradient",{id:"b",x1:"36",y1:"36",x2:"14.617",y2:"27.683",gradientUnits:"userSpaceOnUse",children:[(0,U.tZ)("stop",{stopColor:"#1A1A1A",stopOpacity:".9"}),(0,U.tZ)("stop",{offset:"1",stopColor:"#1A1A1A",stopOpacity:"0"})]})]})]})},u5=(0,eV.iv)([J.l0.color.foregroundDimmest,{textDecoration:"underline"}]),u7=function(){return(0,U.tZ)(H.G,{css:[J.l0.colWithGap(8),J.l0.py(8),J.l0.width("100%")],children:(0,U.BX)(H.G,{css:[J.l0.rowWithGap(8),J.l0.align.center,J.l0.justify.spaceBetween],children:[(0,U.tZ)("a",{target:"_blank",href:u$,css:u5,children:"Docs"}),(0,U.BX)(H.G,{css:[J.l0.rowWithGap(8),J.l0.align.center],children:[(0,U.tZ)(V.xv,{css:[J.l0.fontSize(14)],multiline:!1,children:"Powered by"}),(0,U.tZ)(u6,{})]})]})})},u9=n(67546),de=n(64988),dt=n(1076),dn=n(48096),dr=n(52927),di=n(71484),da=n(32230),dl=n(90333),dc=n(69967),ds=n(42354),du=n(12467),dd=function(e){var t=e.headerTitle,n=e.onGoBack,r=e.children;return(0,U.BX)(H.G,{css:[J.l0.flex.column,J.l0.height("100%")],children:[(0,U.BX)(H.G,{css:[J.l0.flex.row,J.l0.py(16),J.l0.px(8),J.l0.align.center],children:[(0,U.tZ)(F.hU,{alt:"Go back",size:28,type:"button",onClick:n,children:(0,U.tZ)(ut.Z,{})}),(0,U.tZ)(V.xv,{css:[J.l0.fontSize(16),J.l0.ml(8)],multiline:!1,children:t})]}),(0,U.tZ)(H.G,{css:[J.l0.overflow("auto"),J.l0.height("calc(100% - 60px)")],children:r})]})},df=(0,nx.cn)(""),dh=(0,nx.cn)(null),dp=(0,nx.cn)(null,function(e,t,n){var r=n.query;r&&t(df,r);var i=e(dh);i&&i.dispatch({changes:{from:0,to:i.state.doc.length,insert:r}})}),dm=n(85234),dv=n.n(dm),dg=n(41974),dy=n(80951),db=n(21962),dw=(0,dy.O4)("replDatabasesQueryHistory",[]),dZ=function(e,t){return!e.isPinned&&t.isPinned?1:e.isPinned&&!t.isPinned?-1:"number"==typeof e.pinnedTimestamp&&"number"==typeof t.pinnedTimestamp?e.pinnedTimestamp-t.pinnedTimestamp:t.timestamp-e.timestamp},dx=function(e,t){var n=e.findIndex(function(e){return!e.isPinned&&e.data===t.data});-1!==n?e.splice(n,1,t):e.push(t),e.sort(dZ);var r=e.filter(function(e){return!e.isPinned}).length;if(r>=5){var i=r-5;e.splice(e.length-i,i)}},dC=function(e){var t=e.id,n=e.data,r=e.isPinned,i=(0,db.lV)((0,ee.useCallback)(function(e,n){var r=e(dw).find(function(e){return e.id===t}),i=(null==r?void 0:r.data)||"";i&&(n(dp,{query:i}),sp({action:"queryHistoryItemSelected"}))},[t])),o=(0,db.lV)((0,ee.useCallback)(function(e,n){var r=e(dw);n(dw,(0,dg.Uy)(r,function(e){var n=e.find(function(e){return e.id===t});n&&(n.isPinned=!n.isPinned,n.isPinned?n.pinnedTimestamp=Date.now():n.pinnedTimestamp=void 0),e.sort(dZ)})),sp({action:"queryHistoryItemPinned"})},[t]));return(0,U.BX)(H.G,{css:[{borderTop:"1px solid ".concat(J.TV.outlineDefault),":hover":{background:J.TV.backgroundHigher}},J.l0.flex.row,J.l0.p(8),J.l0.color.foregroundDimmer,J.l0.align.center,J.l0.cursor.pointer],onClick:i,children:[(0,U.tZ)(V.xv,{css:[J.l0.flex.growAndShrink(1)],multiline:!1,children:n}),(0,U.tZ)(F.hU,{alt:"Pin query",onClick:o,children:r?(0,U.tZ)(da.Z,{fill:J.TV.accentPrimaryDefault}):(0,U.tZ)(di.Z,{})})]})},dk=function(e){var t=e.onExpand,n=(0,nZ.Dv)(dw);return(0,U.tZ)(eM.Q,{onClick:t,headerContent:(0,U.BX)(H.G,{css:[J.l0.rowWithGap(8),J.l0.align.center,J.l0.p(2)],children:[(0,U.tZ)(lC.Z,{}),(0,U.tZ)(V.xv,{css:[J.l0.color.foregroundDimmest],multiline:!1,children:"Query History"})]}),children:(0,U.tZ)(H.G,{css:[J.l0.colWithGap(8),J.l0.height("100%")],children:0===n.length?(0,U.tZ)(H.G,{css:[J.l0.p(8)],children:(0,U.tZ)(V.xv,{css:[J.l0.color.foregroundDimmer],multiline:!1,children:"No query history"})}):(0,U.tZ)(H.G,{children:n.map(function(e){return(0,U.tZ)(dC,(0,ep._)({},e),e.id)})})})})},dS=new de.Rh(function(){return(0,tu.W$)((0,dr.V)((0,U.tZ)("div",{css:[{fontFamily:J.TV.fontFamilyCode},J.l0.color.foregroundDimmest],children:"Type PostgreSQL queries here to use the database."})))}),d_=new cU.j(function(e){return ta.Wl.high((0,u9.sql)((0,ep._)({dialect:u9.PostgreSQL},e)))}),dE=function(e){var t=e.queryResult,n=e.scrollRef;if(null==t?void 0:t.error)return(0,U.tZ)(H.G,{css:J.l0.px(8),children:(0,U.tZ)(V.xv,{css:[J.l0.color.accentNegativeDefault],children:null==t?void 0:t.error})});if(!(null==t?void 0:t.rows))return null;var r=uU(t);if(!r)return(0,U.tZ)(H.G,{css:J.l0.px(8),children:(0,U.tZ)(V.xv,{css:[J.l0.color.accentPositiveDefault],children:"Query successful, no rows returned"})});var i=r.headerColumns,o=r.bodyData;return(0,U.tZ)(H.G,{css:J.l0.px(8),children:(0,U.tZ)(uI,{headerColumns:i,bodyData:o,scrollRef:n})})},dT=(0,eV.iv)([J.l0.height("100%"),J.l0.position.relative,J.l0.overflow("auto")]),dR=(0,eV.iv)([J.l0.position.sticky,J.l0.top(0),J.l0.left(0),J.l0.zIndex(1),J.l0.backgroundColor.backgroundDefault]),dD=function(e){var t=e.connectionString,n=e.performPaneOperation,r=(0,N._)((0,nZ.KO)(df),2),i=r[0],o=r[1],a=(0,cO.Z)(),l=a.ref,c=a.view,s=(0,N._)((0,ee.useState)(!1),2),u=s[0],d=s[1];(0,ee.useEffect)(function(){return function(){var e;o(null!==(e=null==c?void 0:c.state.doc.toString())&&void 0!==e?e:"")}},[o,null==c?void 0:c.state.doc]);var f=(0,nZ.b9)(dh);(0,ee.useEffect)(function(){f(c)},[f,c]),uW({connectionString:t});var h=(0,nZ.Dv)(uF),p=du.q,m=(0,dt.Z)({filePath:p}),v=(0,Y.Z)().psql,g=(0,N._)((0,ee.useState)(),2),y=g[0],b=g[1],w=(0,N._)((0,ee.useState)(!1),2),Z=w[0],x=w[1],C=(0,db.lV)((0,ee.useCallback)(function(e,t,n){if(n){var r={id:dv()(),data:n,timestamp:Date.now()},i=e(dw);t(dw,(0,dg.Uy)(i,function(e){dx(e,r)}))}},[])),k=(0,ee.useCallback)(function(){function e(){return(e=(0,tM._)(function(){var e;return(0,tF.Jh)(this,function(n){switch(n.label){case 0:if(!c)return[2];n.label=1;case 1:return n.trys.push([1,,3,4]),x(!0),C(e=null==c?void 0:c.state.doc.toString()),[4,v.run({query:e,connectionString:t})];case 2:return b(n.sent()),sp({action:"queryRan"}),[3,4];case 3:return x(!1),[7];case 4:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[t,v,C,c]),S=uL(),_=(0,ee.useCallback)(function(){S("databaseManager")},[S]),E=(0,ee.useCallback)(function(){S("tableSchemas")},[S]),T=(0,ee.useRef)(null),R=d_.use({schema:h}),D=(0,nw.P5)({controlName:"flag-postgresql-pane-inline-ai"}),I=(0,aX.T3)(),B=(0,dl.Ls)({path:p}),G=(0,dl.jg)({path:p}),P=(0,dl.fD)({path:p}),A=(0,ds.W)({generateCode:B,editCode:G,explainCode:P,onMoreClick:void 0}),L=(0,ee.useCallback)(function(){c&&B(c,"unknown")},[c,B]),O=(0,ee.useCallback)(function(e){return n({operation:"open",pane:e,secondary:!0})},[n]),X=(0,ee.useCallback)(function(){O({type:"ghostwriterChat"})},[O]),M=(0,dn.W)({onGenerateCode:L,onReplyInChat:X}),F=(0,dc.u)({isMobile:I,generateCode:B,filePath:p});return(0,U.tZ)(dd,{headerTitle:"Database Contents",onGoBack:_,children:(0,U.BX)(H.G,{css:[J.l0.colWithGap(8),dT],innerRef:T,children:[(0,U.BX)(H.G,{css:[J.l0.colWithGap(8),J.l0.px(8),J.l0.pb(8),u?null:dR],children:[(0,U.BX)(H.G,{css:[{border:"1px solid ".concat(J.TV.outlineDefault)},J.l0.borderRadius(2)],children:[(0,U.tZ)(tg.ZP,{ref:l,filePath:p,css:[cM.Mp,J.l0.backgroundColor.backgroundDefault,J.l0.borderRadius(8),J.l0.overflow("auto"),J.l0.minHeight(100),J.l0.maxHeight(500),{".cm-panel":{zIndex:1}}],initialDoc:i,extensions:[D?[]:dS,R,m,D&&!I?A:[],D?M:[],D?F:[]]}),(0,U.tZ)(dk,{expanded:u,onExpand:function(){d(function(e){return!e})}})]}),(0,U.tZ)(eb.zx,{text:"Run Query",iconLeft:Z?(0,U.tZ)(q.Z,{}):(0,U.tZ)(rZ.Z,{}),onClick:k,disabled:Z})]}),(0,U.tZ)(dE,{queryResult:y,scrollRef:T}),(0,U.tZ)(H.G,{css:[J.l0.colWithGap(8),J.l0.px(8),J.l0.py(8)],children:(0,U.tZ)(eb.zx,{css:J.l0.backgroundColor.backgroundDefault,text:"Show All Contents",iconLeft:(0,U.tZ)(s0.Z,{}),onClick:E})})]})})},dI=(0,nx.cn)(null),dB=(0,nx.cn)(null),dG=function(){var e=(0,nZ.b9)(dI),t=(0,nZ.b9)(dB);return(0,ee.useCallback)(function(n){if(!n){e(null),t(null);return}e({connectionString:n,databaseId:-1,databaseName:"Admin Override",isFrozen:!1,projectId:"mock-project-id-does-not-exist",__typename:"NeonDatabase"}),t(n)},[t,e])},dP=(0,z.X)({self:[J.l0.colWithGap(0),J.l0.height("100%"),J.l0.p(8)],main:[J.l0.colWithGap(16),J.l0.flex.grow(1),J.l0.flex.shrink(0)],header:[J.l0.rowWithGap(8),J.l0.align.center],status:[J.l0.width(8),J.l0.height(8),J.l0.backgroundColor.accentPositiveStronger,J.l0.borderRadius("full"),{filter:"drop-shadow(0 0 6px ".concat(J.TV.accentPositiveStronger,")")}],title:[J.l0.color.accentPositiveStronger],docs:[sT.Z,J.l0.maxWidth("100%")],footer:[J.l0.pt(16)],remove:[J.l0.py(8)],removeConfirm:[J.l0.p(8),J.l0.colWithGap(8)]}),dA=function(e){var t,n=e.neonDatabases,r=e.onDatabaseDeleted,i=e.onDatabaseUnfreezed,o=e.performPaneOperation,a=n[0],l=(0,ax.Z)().showError,c=(0,e$.Z)(),s=(0,nZ.Dv)(uA),u=uL(),d=(0,ee.useCallback)(function(){u("queryEditor")},[u]),f=(0,N._)((t=(0,ep._)({},sH,void 0),aQ.D(sj,t)),2),h=f[0],p=f[1].loading,m=(0,ee.useCallback)(function(){b(!0)},[]),v=(0,ee.useCallback)((0,tM._)(function(){var e,t,n;return(0,tF.Jh)(this,function(i){switch(i.label){case 0:return[4,h({variables:{input:{replId:c,databaseId:a.databaseId}}})];case 1:if(t=(e=i.sent()).data,n=e.errors,b(!1),n&&n.length>0)return l("Error when deleting Neon database: ".concat(null==n?void 0:n.join())),sp({action:"removed",success:!1}),[2];if((null==t?void 0:t.deleteNeonDatabase.__typename)!=="DeleteNeonDatabaseResult")return l("Error: ".concat(null==t?void 0:t.deleteNeonDatabase.message)),sp({action:"removed",success:!1}),[2];return(null==t?void 0:t.deleteNeonDatabase.success)?(r(),sp({action:"removed",success:!0})):(l("Error: Delete Neon Database failed."),sp({action:"removed",success:!1})),[2]}})}),[h,a.databaseId,r,c,l]),g=(0,N._)((0,ee.useState)(!1),2),y=g[0],b=g[1],w=(0,ee.useCallback)(function(){b(!1)},[]),Z=(0,nZ.Dv)(dB),x=sC({connectionString:a.connectionString,databaseName:a.databaseName}).get(sg);if("string"!=typeof x)throw Error("Expected host to be set");var C=x.split(".")[0],k=Z||"".concat(a.connectionString,"/").concat(a.databaseName,"?sslmode=require&options=project%3D").concat(C);if("queryEditor"===s)return(0,U.tZ)(dD,{connectionString:k,performPaneOperation:o});if("tableSchemas"===s)return(0,U.tZ)(uj,{connectionString:k});if(s.startsWith("table/")){var S=s.slice(s.indexOf("/")+1);return(0,U.tZ)(u8,{tableName:S,connectionString:k})}return(0,U.BX)(H.G,{css:dP.self,children:[(0,U.tZ)(H.G,{css:dP.main,children:a.isFrozen?(0,U.tZ)(sK,{replId:c,neonProjectId:a.projectId,onDatabaseUnfreezed:i}):(0,U.BX)(U.HY,{children:[(0,U.BX)(H.G,{css:dP.header,children:[(0,U.tZ)(H.G,{css:dP.status}),(0,U.tZ)(V.xv,{css:dP.title,multiline:!1,children:"Database connected"})]}),(0,U.tZ)(sQ,{title:"Database Info",children:(0,U.tZ)(u3,{connectionString:k,onOpenDatabaseViewerClick:d,showUsageLink:!0})}),(0,U.tZ)(sQ,{title:"Using the database",isAccordion:!0,children:(0,U.tZ)(s_.ZP,{css:dP.docs,children:"\nPostgreSQL is a powerful open source relational database system that is widely used in web applications and other software development projects. You can easily create a production-ready PostgreSQL database directly within Replit. For more information on PostgreSQL, visit the [official documentation](https://www.postgresql.org/docs/). Repls use PostgreSQL version 15.\n\nHere is some information to help you get started:\n\n1. Replit databases are backed by [Neon](https://neon.tech/). The [Neon documentation](https://neon.tech/docs/connect/connect-from-any-app#connection-examples) provides guides on how to connect various frameworks, such as Django, to your PostgreSQL database.\n\n1. Environment Variables: We provided environment variables `DATABASE_URL`, `PGDATABASE`, `PGHOST`, `PGHOST`, `PGPORT`, `PGUSER`, `PGPASSWORD`. Provide these values to your framework of choice to connect to your database.\n\n1. Connection pooling: If you need to enable connection pooling for any reason, contact us at support@repl.it.\n\n1. Compute lifecycle: Neon databases go to sleep after 5 minutes of inactivity. You may experience disconnects or reconnects depending on your client.\n"})}),(0,U.tZ)(sQ,{title:"Environment variables",isAccordion:!0,children:(0,U.tZ)(sS,{connectionString:k,databaseName:a.databaseName})})]})}),(0,U.tZ)(H.G,{css:dP.footer,children:y||p?(0,U.BX)(ew.Tg,{css:dP.removeConfirm,elevated:!0,children:[(0,U.tZ)(V.xv,{children:"Removing this database will remove access to the data for this Repl."}),(0,U.tZ)(e6.E,{icon:(0,U.tZ)(rg.Z,{}),colorway:"warning",text:"This action cannot be undone."}),(0,U.tZ)(eb.zx,{text:"Yes, Remove Database",colorway:"negative",disabled:p,iconLeft:(0,U.tZ)(sE.Z,{}),onClick:v}),(0,U.tZ)(eb.zx,{text:"Cancel",disabled:p,onClick:w})]}):(0,U.tZ)(eb.zx,{css:dP.remove,text:"Remove Database",disabled:p,iconLeft:(0,U.tZ)(sE.Z,{}),onClick:m})}),(0,U.tZ)(u7,{})]})},dL=n(14769),dN=n(21602);function dO(){var e=(0,eK._)(["\n  query NeonStartPage($replId: String!) {\n    currentUser {\n      id\n      usageInterval {\n        ... on UsageInterval {\n          resources {\n            neonComputeTime {\n              allotment\n              usage\n            }\n            neonDataStorage {\n              allotment\n              usage\n            }\n          }\n        }\n      }\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        authorizations {\n          createDatabase {\n            isAuthorized\n            code\n            message\n          }\n        }\n      }\n    }\n  }\n"]);return dO=function(){return e},e}var dU={},dX=(0,eQ.Ps)(dO()),dM=n(87387),dF=n(50366),dW=(0,z.X)({cta:[J.l0.width("100%"),J.l0.maxWidth(320),{marginLeft:"auto",marginRight:"auto"}],ctaContainer:[J.l0.colWithGap(8),J.l0.align.center],ctaStatusBanner:[J.l0.textAlign.left],payment:[J.l0.p(16),J.l0.borderRadius(12),J.l0.textAlign.left,J.l0.shadow(2)],budgetContainer:[J.l0.colWithGap(8),J.l0.border(),J.l0.borderRadius(8),J.l0.p(8)],details:[J.l0.colWithGap(16)],detailsItem:[J.l0.display.grid,J.l0.gap(16),{gridTemplateColumns:"56px auto",gap:16}],detailsText:[J.l0.flex.growAndShrink(1),J.l0.textAlign.left],actionsContainer:[J.l0.colWithGap(8)]});function dV(e){var t=e.loading,n=e.createDatabaseAuthz,r=e.handleOnCreate,i=e.refetchUbbCapabilitiesQueryData,o=e.setShowPaymentMethodForm,a=e.showPaymentMethodForm,l=e.setShowSupportForm,c=(0,aX.sG)();if(!n)return(0,U.tZ)(H.G,{css:dW.ctaContainer,children:(0,U.tZ)(q.Z,{})});if(!n.isAuthorized&&c)return(0,U.tZ)(e6.E,{text:n.message,colorway:"warning",icon:(0,U.tZ)(rg.Z,{}),css:dW.ctaStatusBanner});switch(n.code){case aK.RO.RequiresPaymentMethodOrSubscription:case aK.RO.RequiresActiveSubscription:return(0,U.BX)(H.G,{css:dW.ctaContainer,children:[(0,U.tZ)(sP.Z,{context:"workspace_hosting_pane",text:"Upgrade your plan to create a database",css:dW.cta,colorway:"primary",variant:"outlined",disabled:a,onPlanCheckoutComplete:i}),(0,U.tZ)(eb.zx,{variant:"nofill",colorway:"primary",text:"or add a payment method",css:dW.cta,disabled:a,loading:t,iconLeft:(0,U.tZ)(sG.Z,{}),onClick:function(){return o()}})]});case aK.RO.RequiresSmsVerification:return(0,U.tZ)(sR.Z,{context:aK.jv.Neon,onSuccess:i});case aK.RO.RequiresPaymentMethod:return(0,U.tZ)(eb.zx,{colorway:"primary",text:"Add a payment method",css:dW.cta,disabled:a,loading:t,iconLeft:(0,U.tZ)(sG.Z,{}),onClick:function(){return o()}});case aK.RO.RequiresUnbanning:return(0,U.tZ)(sB.u,{text:"Your account currently has restrictions on creating a database. We're here to help! Please reach out to our support team for assistance.",colorway:"warning",iconLeft:(0,U.tZ)(rg.Z,{}),css:dW.ctaStatusBanner,onClick:function(){return l()}});case aK.RO.InsufficientBudget:return(0,U.BX)(U.HY,{children:[(0,U.tZ)(e6.E,{text:"You've reached your monthly usage budget. Increase your budget to create a database.",colorway:"warning",icon:(0,U.tZ)(rg.Z,{}),css:dW.ctaStatusBanner}),(0,U.tZ)(H.G,{css:dW.budgetContainer,children:(0,U.tZ)(sI.L,{onUpdateSuccess:i})})]});case aK.RO.FeatureDisabled:case aK.RO.FeatureUnsupportedForReplitTeams:case aK.RO.FeatureUnsupportedForTeamsEdu:case aK.RO.FeatureUnsupportedForTeamsFree:case aK.RO.FeatureUnsupportedForTeamsPro:case aK.RO.InsufficientPermissions:case aK.RO.InsufficientQuota:case aK.RO.RequiresEmailVerification:return(0,U.tZ)(e6.E,{text:n.message,colorway:"warning",icon:(0,U.tZ)(rg.Z,{}),css:dW.ctaStatusBanner});case aK.RO.Authorized:case aK.RO.AuthorizedQuota:return(0,U.tZ)(eb.zx,{colorway:"primary",onClick:r,css:dW.cta,text:t?"":"Create a database",iconLeft:t?(0,U.tZ)(q.Z,{}):(0,U.tZ)(U.HY,{}),loading:t});default:(0,nT.Z)(n.code)}}var dH=function(e){var t,n,r=e.onDatabaseCreated,i=(0,N._)((0,ee.useState)(!1),2),o=i[0],a=i[1],l=(0,N._)((0,ee.useState)(!1),2),c=l[0],s=l[1],u=(0,e$.Z)(),d=(0,ax.Z)().showError,f=(t=(0,ep._)({},dU,{notifyOnNetworkStatusChange:!0,variables:{replId:u},onError:function(e){d(e.message)}}),e0.a(dX,t)),h=f.loading,p=f.data,m=f.refetch,v=(0,N._)((n=(0,ep._)({},sH,{onError:function(e){d("Error when creating Neon database: ".concat(e.message)),sp({action:"created",success:!1})},onCompleted:function(e){if((null==e?void 0:e.createNeonDatabase.__typename)==="CreateNeonDatabaseResult"){var t=e.createNeonDatabase;r({__typename:"NeonDatabase",databaseId:t.databaseId,databaseName:t.databaseName,connectionString:t.connectionString,projectId:t.projectId,isFrozen:t.isFrozen}),sp({action:"created",success:!0})}else{d("Error: ".concat(null==e?void 0:e.createNeonDatabase.message)),sp({action:"created",success:!1});return}}}),aQ.D(sz,n)),2),g=v[0],y=v[1].loading,b=(null==p?void 0:p.repl.__typename)==="Repl"?p.repl.authorizations.createDatabase:void 0;return(0,U.BX)(U.HY,{children:[(0,U.tZ)(rX.u,{isOpen:c,onRequestClose:function(){return s(!1)},children:(0,U.tZ)(sD.Z,{onRequestClose:function(){return s(!1)}})}),(0,U.tZ)(eu.Z,{pane:{type:"neon"},maxWidth:450,body:(0,U.BX)(H.G,{css:dW.details,children:[(0,U.BX)(H.G,{css:dW.detailsItem,children:[(0,U.tZ)(dL.lt,{}),(0,U.BX)(V.xv,{css:dW.detailsText,children:["Get charged for what you use across compute time and storage (",(0,U.tZ)("a",{href:uK,target:"_blank",rel:"noopener",children:"see pricing"}),")."]})]}),(0,U.BX)(H.G,{css:dW.detailsItem,children:[(0,U.tZ)(dL.fG,{}),(0,U.BX)(V.xv,{css:dW.detailsText,children:["Replit ",dM.we," members receive $",dF.QP,"/month in credits to offset expenses (",(0,U.tZ)("a",{href:uK,target:"_blank",rel:"noopener",children:"see allocations"}),")."]})]})]}),action:(0,U.BX)(H.G,{css:dW.actionsContainer,children:[(0,U.tZ)(ec.Z,{href:u$,variant:"nofill",target:"_blank",rel:"noopener",iconLeft:(0,U.tZ)(es.Z,{}),text:"Learn more"}),(0,U.tZ)(dV,{loading:h||y,createDatabaseAuthz:b,handleOnCreate:function(){g({variables:{input:{replId:u}}})},refetchUbbCapabilitiesQueryData:m,setShowPaymentMethodForm:function(){return a(!0)},showPaymentMethodForm:o,setShowSupportForm:function(){return s(!0)}}),o?(0,U.tZ)(ew.Tg,{elevated:!0,css:dW.payment,children:(0,U.tZ)(dN.q,{onSuccess:(0,tM._)(function(){return(0,tF.Jh)(this,function(e){switch(e.label){case 0:return a(!1),[4,m()];case 1:return e.sent(),[2]}})}),context:"workspace_hosting_pane"})}):null]})})]})},dz=function(e){var t,n,r=e.performPaneOperation,i=(0,e$.Z)(),o=(0,ax.Z)().showError,a=(0,Y.Z)().psql,l=(0,N._)((0,ee.useState)([]),2),c=l[0],s=l[1],u=(t=(0,ep._)({},sH,{variables:{input:{replId:i}},fetchPolicy:"no-cache",notifyOnNetworkStatusChange:!0,onCompleted:function(e){if("GetNeonDatabasesResult"===e.getNeonDatabases.__typename){s(e.getNeonDatabases.databases);return}o("Error: ".concat(e.getNeonDatabases.message))}}),e0.a(sq,t)),d=u.loading,f=u.refetch,h=sk(),p=(0,ee.useCallback)((n=(0,tM._)(function(e){var t;return(0,tF.Jh)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),s([e]),[4,a.ensureNixPsqlPackageInstalled(!0)];case 1:return n.sent(),h({connectionString:e.connectionString,databaseName:e.databaseName}),[3,3];case 2:return t=n.sent(),o("Error: ".concat(t.message)),[3,3];case 3:return[2]}})}),function(e){return n.apply(this,arguments)}),[a,h,o]),m=(0,nZ.Dv)(dI);return m?(0,U.tZ)(dA,{neonDatabases:[m],onDatabaseDeleted:f,onDatabaseUnfreezed:f,performPaneOperation:r}):d?(0,U.tZ)(eu.Z,{pane:{type:"neon"},maxWidth:450,loading:!0}):c.length>0?(0,U.tZ)(dA,{neonDatabases:c,onDatabaseDeleted:f,onDatabaseUnfreezed:f,performPaneOperation:r}):(0,U.tZ)(dH,{onDatabaseCreated:p})},dj=X.Dy.Object({type:X.Dy.Literal("neon")}),dq={Content:function(e){var t=e.options;return(0,U.tZ)(dz,{performPaneOperation:t.performPaneOperation})},Icon:function(e){var t=e.size;return(0,U.tZ)(te.Pd.Provider,{value:{color:tt.TV.blueStrongest,size:t},children:(0,U.tZ)(sd.Z,{})})},getTitle:function(){return"PostgreSQL"},description:"Fully-managed, usage-based PostgreSQL database with 10GB of fast read/write storage",category:K.hc.CloudServices,decode:function(e){return M.B4.Decode(dj,e)}},dJ=n(78719),dY=n(54129),d$=n(17601),dK=n(36259),dQ=n(31940),d0=n(70145),d1=n(39268),d2=n(22630),d3=(0,z.X)({self:[J.l0.p(12),J.l0.colWithGap(16)],devUrl:[J.l0.rowWithGap(4),J.l0.align.center],url:[J.l0.color.accentPositiveStronger,J.l0.fontSize("small"),J.l0.focusRing,{"&:hover":[J.l0.cursor.pointer,J.l0.color.accentPositiveStrongest]}],secondaryUrl:[J.l0.color.foregroundDimmest,J.l0.fontSize("small"),J.l0.focusRing,{"&:hover":[J.l0.cursor.pointer,J.l0.color.accentPrimaryStrongest]}],section:[J.l0.colWithGap(4)],portHeader:[J.l0.rowWithGap(8),J.l0.align.baseline],openPort:[J.l0.color.accentPositiveStronger],localPortIcon:[J.l0.color.foregroundDefault,J.l0.px(4),{flex:"0 0 auto",marginLeft:"auto"}],internalMessage:[J.l0.flex.shrink(1),{marginLeft:"auto",span:J.l0.color.foregroundDimmest}],portStatus:[J.l0.py(0),J.l0.px(4)],newPort:[J.l0.color.foregroundDefault,J.l0.rowWithGap(4),J.l0.align.center,J.l0.my(1),J.l0.borderRadius(16),J.l0.height(20)],externalPortButton:[{"&":[J.l0.height(20),J.l0.borderRadius(16),J.l0.color.foregroundDefault]}],externalPortPopup:[{"&":[J.l0.height(20),J.l0.p(6),J.l0.borderRadius(16),J.l0.color.foregroundDefault],"& > span":[J.l0.fontSize(12)],"& > svg":[J.l0.mr(4)]}],textButton:[J.l0.cursor.pointer,J.l0.reset.button,J.l0.color.accentPrimaryStronger,J.l0.focusRing,J.l0.hover(J.l0.color.accentPrimaryStrongest),{lineHeight:1.2,":not([disabled])":{cursor:"pointer"}}],newPortInput:[J.l0.height(20),J.l0.my(1)],newPortClose:J.l0.mr(4),portActionItem:[J.l0.fontSize(J.TV.fontSizeDefault),J.l0.viewStyle,J.l0.height(32),J.l0.px(16),J.l0.py(8),J.l0.flex.row,J.l0.align.center,J.l0.color.foregroundDefault,J.l0.backgroundColor.backgroundDefault,nI.gU.listItem,{":not([disabled])":{":hover":{backgroundColor:J.TV.backgroundHigher}}}]});function d4(e){var t,n,r,i=e.localPort,o=e.externalPort,a=e.isLocalhost,l=e.onPortChange,c=(0,Y.Z)().ports.updateDotReplitPortsMapping,s=(t=(0,Y.Z)().ports,n=(0,dY.Z)(t.portsState),r=new Set(null==n?void 0:n.map(function(e){var t;return null!==(t=(0,d0.OD)(e.configuration))&&void 0!==t&&t}).filter(Boolean)),Array.from(d0.UK).sort(function(e,t){return e-t}).map(function(e){return{isAvailable:!r.has(e),externalPort:e}}));return(0,U.tZ)(H.G,{css:J.l0.flex.row,children:void 0!==o&&0!==o?(0,U.tZ)(eb.zx,{css:d3.externalPortButton,iconRight:(0,U.tZ)(ry.Z,{}),text:":".concat(o),size:"small",onClick:function(){i&&(c(i,void 0,a),null==l||l())}}):(0,U.tZ)(d$.ZE,{cssProps:[d3.externalPortPopup],label:"Set external port",onAction:function(e){if(i){var t=s.find(function(t){return String(t.externalPort)===e});t&&t.isAvailable&&(c(i,t.externalPort,a),null==l||l())}},children:s.map(function(e){var t=e.isAvailable,n=e.externalPort;return(0,U.tZ)(d$.ck,{"aria-label":String(n),children:(0,U.BX)(H.G,{css:t?J.l0.color.foregroundDefault:J.l0.color.foregroundDimmest,children:[":",n]})},String(n))})})})}function d8(e){var t=e.portState,n=null;switch(t.configuration.type){case d0.DL.MISCONFIGURED:n=(0,U.tZ)(tU.u,{tooltip:"Port misconfigured",delay:"default",children:(0,U.tZ)(rg.Z,{})});break;case d0.DL.CONFIG_MISSING:n=(0,U.tZ)(tU.u,{tooltip:"Configuration missing",delay:"default",children:(0,U.tZ)(rg.Z,{})});break;case d0.DL.NO_MORE_EXTERNAL_PORTS_AVAILABLE:n=(0,U.tZ)(rg.Z,{});break;case d0.DL.FORWARDED:n=(0,U.tZ)(eZ.Z,{});case d0.DL.INTERNAL_ONLY:}return(0,U.tZ)("span",{css:d3.localPortIcon,children:n})}function d6(e){var t=e.portState,n=e.width,r=(0,d0.VZ)(t.configuration)?"localhost":"0.0.0.0";return(0,U.BX)(d1.sg,{width:n||130,children:[(0,U.BX)(V.xv,{css:t.isOpen&&d3.openPort,children:[r,":",t.configuration.localPort]}),(0,U.tZ)(d8,{portState:t})]})}function d5(e){var t=e.portState,n=e.openWebview,r=e.openVncOutput,i=e.width;if(t.configuration.type===d0.DL.NO_MORE_EXTERNAL_PORTS_AVAILABLE)return(0,U.tZ)(d1.sg,{width:i||180,children:(0,U.tZ)(e6.E,{css:d3.portStatus,icon:(0,U.tZ)(rg.Z,{}),text:"No ports available"})});var o=!!n&&t.isOpen&&t.configuration.type===d0.DL.FORWARDED,a=!!r&&t.configuration.isVnc;return(0,U.BX)(d1.sg,{width:i||180,children:[t.configuration.isVnc?(0,U.tZ)(e6.E,{css:d3.portStatus,icon:(0,U.tZ)(lN.Z,{}),text:"VNC Ports do not require external port"}):(0,U.tZ)(d4,{localPort:t.configuration.localPort,externalPort:(0,d0.OD)(t.configuration),isLocalhost:(0,d0.VZ)(t.configuration)}),o?(0,U.tZ)(F.hU,{alt:"Open in Webview",onClick:n,css:J.l0.color.foregroundDefault,children:(0,U.tZ)(dK.Z,{})}):null,a?(0,U.tZ)(F.hU,{alt:"View VNC output",onClick:r,css:J.l0.color.foregroundDefault,children:(0,U.tZ)(dK.Z,{})}):null]})}function d7(e){var t,n=e.portState;return n.isOpen?(0,U.BX)(U.HY,{children:[(0,U.tZ)(d1.sg,{width:100,children:(t=n.processInfo.cmdline[0].split("/"))[t.length-1]}),(0,U.tZ)(d1.sg,{width:100,children:n.processInfo.pid})]}):(0,U.tZ)(d1.sg,{width:100})}function d9(e){var t=e.portState,n=e.onAction,r=[{label:"Open external link",key:"EXTERNAL_LINK",icon:(0,U.tZ)(r1.Z,{})},{label:"Remove port config",key:"REMOVE",icon:(0,U.tZ)(sE.Z,{})}];return t.configuration.isVnc?r.unshift({label:"View VNC output",key:"OPEN_VNC_OUTPUT",icon:(0,U.tZ)(dK.Z,{})}):r.unshift({label:"Open webview",key:"OPEN_WEBVIEW",icon:(0,U.tZ)(dK.Z,{})}),(0,U.tZ)(d1.sg,{width:30,last:!0,children:(0,U.tZ)(d$.ZE,{cssProps:[J.l0.height(22),J.l0.width(22),J.l0.color.foregroundDefault,{background:"transparent"}],menuCssProps:[{li:[J.l0.p(0)],"li > div":[J.l0.pl(6),J.l0.rowWithGap(4),J.l0.align.center]}],items:r,icon:(0,U.tZ)(dQ.Z,{}),onAction:function(e){switch(e){case"OPEN_WEBVIEW":case"OPEN_VNC_OUTPUT":case"EXTERNAL_LINK":case"REMOVE":n({type:e,payload:{portState:t}})}},children:r.map(function(e){return(0,U.tZ)(d$.ck,{children:(0,U.BX)(H.G,{css:d3.portActionItem,children:[e.icon?e.icon:(0,U.tZ)(H.G,{css:[J.l0.width(16)]}),(0,U.tZ)(V.xv,{multiline:!1,children:e.label})]})},e.key)})})})}function fe(e){var t=e.portState,n=e.portAction;return(0,U.BX)(d1.X2,{children:[(0,U.tZ)(d6,{portState:t}),(0,U.tZ)(d5,{portState:t,openWebview:function(){n({type:"OPEN_WEBVIEW",payload:{portState:t}})},openVncOutput:function(){n({type:"OPEN_VNC_OUTPUT",payload:{portState:t}})}}),(0,U.tZ)(d7,{portState:t}),(0,U.tZ)(d9,{portState:t,onAction:n})]},t.configuration.localPort)}(d=E||(E={})).OPEN_WEBVIEW="OPEN_WEBVIEW",d.OPEN_VNC_OUTPUT="OPEN_VNC_OUTPUT",d.EXTERNAL_LINK="EXTERNAL_LINK",d.REMOVE="REMOVE";var ft=function(e){var t=e.text,n=e.onClick;return(0,U.tZ)("button",{css:d3.textButton,onClick:n,children:t})};function fn(e){var t,n=e.openDotReplit,r=(0,N._)((0,ee.useState)(!1),2),i=r[0],o=r[1],a=(0,N._)((0,ee.useState)(),2),l=a[0],c=a[1],s=null===(t=(0,Y.Z)().ports.portsState.current)||void 0===t?void 0:t.some(function(e){return e.configuration.localPort===l});return i?(0,U.BX)(d1.X2,{children:[(0,U.BX)(d1.sg,{width:130,children:[(0,U.tZ)(F.hU,{css:d3.newPortClose,alt:"Close",onClick:function(){return o(!1)},size:18,children:(0,U.tZ)(ry.Z,{})}),(0,U.tZ)(eg.II,{css:d3.newPortInput,value:(null==l?void 0:l.toString())||"",onChange:function(e){return c(e.target.value?parseInt(e.target.value,10):void 0)}})]}),(0,U.tZ)(d1.sg,{children:s?(0,U.tZ)(e6.E,{css:d3.portStatus,colorway:"warning",text:"Local port already exists"}):(0,U.tZ)(d4,{localPort:l,isLocalhost:!1,onPortChange:function(){return o(!1)}})})]}):(0,U.BX)(d1.X2,{children:[(0,U.tZ)(d1.sg,{width:130,children:(0,U.tZ)(eb.zx,{css:d3.newPort,iconLeft:(0,U.tZ)(nA.Z,{size:12}),text:"New port",size:"small",onClick:function(){return o(!0)}})}),(0,U.tZ)(d1.sg,{children:(0,U.BX)(V.xv,{variant:"small",children:["This port config is saved in the"," ",(0,U.tZ)(ft,{text:".replit file",onClick:n}),"."," "]})})]})}function fr(e){var t,n=e.openDotReplit,r=e.openWebview,i=e.openVncOutput,o=e.ports,a=e.container,l=(0,e$.Z)(),c=(0,d2.J_)({replId:l,container:a,ports:o}),s=(0,ax.Z)().showError,u=(0,Y.Z)().ports,d=u.portsState,f=u.removeDotReplitPortsMapping,h=function(e){switch(e.type){case"OPEN_WEBVIEW":r(e.payload.portState.configuration.localPort);break;case"OPEN_VNC_OUTPUT":i();break;case"EXTERNAL_LINK":var t=(0,d0.OD)(e.payload.portState.configuration);if(!(null==c?void 0:c.presentationUrl)){s("URL not available.");return}var n=(0,d2.hw)(null==c?void 0:c.presentationUrl,t).toString();window.open(n,"_blank");break;case"REMOVE":f(e.payload.portState.configuration.localPort,(0,d0.OD)(e.payload.portState.configuration))}};return(0,U.BX)(H.G,{css:d3.self,children:[(null==c?void 0:c.presentationUrl)?(0,U.BX)(U.HY,{children:[(0,U.BX)(H.G,{css:d3.section,children:[(0,U.tZ)(V.xv,{children:"Dev URL:"}),(0,U.BX)(H.G,{css:d3.devUrl,children:[(0,U.tZ)(s5(),{legacyBehavior:!0,href:c.presentationUrl,passHref:!0,children:(0,U.tZ)("a",{css:d3.url,target:"_blank",children:c.presentationUrl})}),(0,U.tZ)(tC.m,{textToCopy:c.presentationUrl})]})]}),(0,U.tZ)(nD.R,{})]}):null,(0,U.BX)(H.G,{css:d3.section,children:[(0,U.BX)(H.G,{css:d3.portHeader,children:[(0,U.tZ)(V.xv,{children:"Ports"}),(0,U.tZ)(s5(),{legacyBehavior:!0,href:"https://docs.replit.com/replit-workspace/workspace-features/webview",passHref:!0,children:(0,U.tZ)("a",{css:d3.secondaryUrl,target:"_blank",children:"Learn more"})})]}),(0,U.BX)(d1.iA,{children:[(0,U.BX)(d1.X2,{children:[(0,U.tZ)(d1.sg,{header:!0,width:130,children:"Internal Port"}),(0,U.tZ)(d1.sg,{header:!0,width:180,children:"External Port"}),(0,U.tZ)(d1.sg,{header:!0,width:100,children:"Name"}),(0,U.tZ)(d1.sg,{header:!0,width:100,children:"Pid"})]}),d.current&&(null===(t=d.current)||void 0===t?void 0:t.length)>0?d.current.map(function(e){return(0,U.tZ)(fe,{portState:e,portAction:h},e.configuration.localPort)}):null,(0,U.tZ)(fn,{openDotReplit:n})]})]})]})}var fi=X.Dy.Object({type:X.Dy.Literal("networking")}),fo={Content:function(e){var t,n=e.options.performPaneOperation,r=(0,ax.Z)().showError,i=(0,Y.Z)(),o=i.fs,a=i.container,l=i.ports;return(0,U.tZ)(fr,{openDotReplit:(0,tM._)(function(){return(0,tF.Jh)(this,function(e){switch(e.label){case 0:return[4,o.stat(".replit")];case 1:if(!e.sent().exists)return r("Could not find .replit configuration file."),[2];return n({operation:"open",secondary:!0,pane:{type:"codeEditor",data:{path:".replit"}}}),[2]}})}),openWebview:(t=(0,tM._)(function(e){return(0,tF.Jh)(this,function(t){return n({operation:"open",pane:{type:"webview",data:e?{portType:"local",port:e}:void 0},secondary:!0}),[2]})}),function(e){return t.apply(this,arguments)}),openVncOutput:(0,tM._)(function(){return(0,tF.Jh)(this,function(e){return n({operation:"open",pane:{type:"vnc"},secondary:!0}),[2]})}),container:a,ports:l})},Icon:function(e){var t=e.size;return(0,U.tZ)(dJ.Z,{size:t})},getTitle:function(){return"Networking"},description:"Configure web server ports for your Repl",category:K.hc.WorkspaceFeatures,decode:function(e){return M.B4.Decode(fi,e)}},fa=n(13),fl=n(4251),fc=n(9164),fs=n(94622),fu=n(89774),fd=n(77631),ff=n(83960),fh=n(97221);function fp(){var e=(0,eK._)(["\n  fragment ObjectStorageBucket on Bucket {\n    id\n    externalId\n    name\n  }\n"]);return fp=function(){return e},e}function fm(){var e=(0,eK._)(["\n  query ObjectStoragePane(\n    $replId: String!\n    $bucketsAfter: String\n    $bucketsCount: Int\n  ) {\n    currentUser {\n      id\n    }\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        authorizations {\n          createObjectBucket {\n            isAuthorized\n            code\n            message\n          }\n          editObjectBucket {\n            isAuthorized\n            code\n            message\n          }\n        }\n        buckets(after: $bucketsAfter, count: $bucketsCount) {\n          ... on BucketConnection {\n            __typename\n            items {\n              ...ObjectStorageBucket\n            }\n            pageInfo {\n              nextCursor\n            }\n          }\n          ... on UnauthorizedError {\n            __typename\n            message\n          }\n        }\n        defaultBucket {\n          ... on Bucket {\n            ...ObjectStorageBucket\n          }\n          ... on Error {\n            message\n          }\n          ... on NotFoundError {\n            message\n          }\n          ... on UnauthorizedError {\n            message\n          }\n          ... on UserError {\n            message\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return fm=function(){return e},e}var fv={},fg=(0,eQ.Ps)(fp()),fy=(0,eQ.Ps)(fm(),fg);function fb(){var e=(0,eK._)(["\n  mutation ObjectStoragePaneCreateBucketModal($input: CreateBucketInput!) {\n    createBucket(input: $input) {\n      ... on Bucket {\n        ...ObjectStorageBucket\n      }\n      ... on Error {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return fb=function(){return e},e}var fw={},fZ=(0,eQ.Ps)(fb(),fg);function fx(){var e=(0,eK._)(["\n  query CreateBucketName($teamId: Int, $name: String) {\n    bucketName: replTitle(teamId: $teamId, title: $name)\n  }\n"]);return fx=function(){return e},e}var fC={},fk=(0,eQ.Ps)(fx()),fS=(0,z.X)({createBucketButton:[J.l0.flex.growAndShrink(1),J.l0.justify.center,J.l0.textAlign.center],form:[J.l0.px(4)],labeledInput:[J.l0.colWithGap(8),J.l0.flex.growAndShrink(1),J.l0.textAlign.left],row:[J.l0.flex.growAndShrink(1),J.l0.pt(16),J.l0.rowWithGap(16),{flexBasis:"300px"}],wrapper:[J.l0.flex.row,J.l0.flex.wrap]});function f_(e){var t,n,r,i,o,a,l,c,s,u,d,f,h,p,m=e.isOpen,v=e.onBucketCreated,g=e.onError,y=e.onRequestClose,b=(n=(t={}).preferredName,r=t.teamId,o=(i=(0,N._)((0,ee.useState)(""),2))[0],a=i[1],l=(0,ee.useRef)(null),c=(0,ee.useRef)(!1),d=(s=(0,ep._)({},fC,{variables:{name:n,teamId:r},fetchPolicy:"network-only",nextFetchPolicy:"cache-first",ssr:!1}),u=e0.a(fk,s)).data,f=u.previousData,h=(null==d?void 0:d.bucketName)||(null==f?void 0:f.bucketName),(0,ee.useEffect)(function(){h&&!c.current&&a(h)},[h]),{name:o,setName:(0,ee.useCallback)(function(e){c.current=!0,a(e.slice(0,60))},[]),nameInputRef:l}),w=b.name,Z=b.setName,x=b.nameInputRef,C=(0,e$.Z)(),k=(0,N._)((p=(0,ep._)({},fw,{variables:{input:{name:w,replId:C}}}),aQ.D(fZ,p)),2),S=k[0],_=k[1].loading;return(0,U.tZ)(H.G,{children:(0,U.tZ)(rX.u,{fitContent:!0,isOpen:m,onRequestClose:y,children:(0,U.BX)(ew.Tg,{children:[(0,U.tZ)(V.h4,{level:1,variant:"subheadBig",children:"Create a Bucket"}),(0,U.BX)(H.G,{css:fS.wrapper,children:[(0,U.tZ)(H.G,{css:fS.row,children:(0,U.tZ)(fE,{name:w,setName:Z,nameInputRef:x,disabled:_})}),(0,U.tZ)(H.G,{css:fS.row,children:(0,U.tZ)(eb.zx,{css:fS.createBucketButton,text:_?"Creating bucket...":"Create bucket",onClick:function(){S({onCompleted:function(e){var t="Bucket"===e.createBucket.__typename?e.createBucket:null;if(!t){g(Error("Failed to create bucket"));return}v(t)},onError:g})},colorway:"primary",iconLeft:_?(0,U.tZ)(q.Z,{}):(0,U.tZ)(nA.Z,{}),disabled:_})})]})]})})})}function fE(e){var t=e.name,n=e.setName,r=e.nameInputRef,i=e.disabled,o=(0,a$.U)();return(0,U.BX)(H.G,{css:fS.labeledInput,children:[(0,U.tZ)(fh._,{htmlFor:o("bucketName"),children:"Name"}),(0,U.tZ)(eg.II,{spellCheck:!1,id:o("bucketName"),disabled:i,onChange:function(e){n(e.currentTarget.value)},value:t,ref:r,placeholder:"Name your Bucket"})]})}var fT=n(49115),fR=X.Dy.Object({id:X.Dy.String(),name:X.Dy.String(),contentType:X.Dy.Optional(X.Dy.String()),timeCreated:X.Dy.String(),size:X.Dy.String()}),fD=X.Dy.Array(fR),fI={FILE:"file"},fB=n(42121);function fG(e){return"".concat(e.status," - ").concat(e.statusText)}function fP(){return(fP=(0,tM._)(function(e){var t,n,r,i;return(0,tF.Jh)(this,function(o){switch(o.label){case 0:return t=e.bucketExternalId,[4,fetch("/object-storage/storage/v1/b/".concat(t,"/o"),{method:"GET",credentials:"same-origin"})];case 1:if(!(n=o.sent()).ok)throw Error("Failed to get objects: ".concat(fG(n)));return[4,n.json()];case 2:if(i=null!==(r=o.sent().items)&&void 0!==r?r:[],!M.B4.Check(fD,i))throw(0,fB.ZA)(fD,i);return[2,i]}})})).apply(this,arguments)}function fA(e){return fL.apply(this,arguments)}function fL(){return(fL=(0,tM._)(function(e){var t,n,r,i;return(0,tF.Jh)(this,function(o){switch(t=e.bucketExternalId,n=e.objectName,r=e.file,void 0===(i=e.uploadMethod)?1:i){case 1:return[2,function(e){return fN.apply(this,arguments)}({bucketExternalId:t,objectName:n,file:r})];case 2:return[2,function(e){return fM.apply(this,arguments)}({bucketExternalId:t,objectName:n,file:r})]}return[2]})})).apply(this,arguments)}function fN(){return(fN=(0,tM._)(function(e){var t,n,r,i,o;return(0,tF.Jh)(this,function(a){switch(a.label){case 0:return t=e.bucketExternalId,n=e.objectName,r=e.file,i=encodeURIComponent(n),[4,fetch("/object-storage/upload/storage/v1/b/".concat(t,"/o?uploadType=media&name=").concat(i),{method:"POST",credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"},body:r})];case 1:if(!(o=a.sent()).ok)throw Error("Failed to upload object: ".concat(fG(o)));return[2]}})})).apply(this,arguments)}function fO(){return(fO=(0,tM._)(function(e){var t,n,r,i,o,a;return(0,tF.Jh)(this,function(l){switch(l.label){case 0:return t=e.bucketExternalId,n=e.objectName,r=e.file,[4,fetch("/object-storage/".concat(t,"/").concat(n,"?uploads"),{method:"POST",credentials:"same-origin",headers:{"Content-Length":"0","Content-Type":r.type,"X-Requested-With":"XMLHttpRequest"}})];case 1:if(!(i=l.sent()).ok)throw Error("Failed to initiate multipart upload: ".concat(fG(i)));return[4,i.text()];case 2:if(o=l.sent(),!(a=new DOMParser().parseFromString(o,"text/xml").getElementsByTagName("UploadId")[0].textContent))throw Error("Failed to initiate multipart upload: missing UploadId");return[2,a]}})})).apply(this,arguments)}function fU(){return(fU=(0,tM._)(function(e){var t,n,r,i,o,a,l;return(0,tF.Jh)(this,function(c){switch(c.label){case 0:return t=e.bucketExternalId,n=e.objectName,r=e.partNumber,i=e.uploadId,o=e.chunk,[4,fetch("/object-storage/".concat(t,"/").concat(n,"?partNumber=").concat(r,"&uploadId=").concat(i),{method:"PUT",credentials:"same-origin",headers:{"Content-Length":o.length.toString(),"Content-Type":"text/xml","X-Requested-With":"XMLHttpRequest"},body:o})];case 1:if(!(a=c.sent()).ok)throw Error("Failed to upload chunk: ".concat(fG(a)));if(!(l=a.headers.get("x-upload-etag")))throw Error("Failed to upload chunk: missing x-upload-etag");return[2,{partNumber:r,etag:l}]}})})).apply(this,arguments)}function fX(){return(fX=(0,tM._)(function(e){var t,n,r,i,o,a,l,c;return(0,tF.Jh)(this,function(s){switch(s.label){case 0:return t=e.bucketExternalId,n=e.objectName,r=e.uploadId,i=e.parts,a=(o=document.implementation.createDocument("","",null)).createElement("CompleteMultipartUpload"),i.forEach(function(e){var t=o.createElement("Part"),n=o.createElement("PartNumber");n.textContent=e.partNumber.toString(),t.appendChild(n);var r=o.createElement("ETag");r.textContent=e.etag,t.appendChild(r),a.appendChild(t)}),o.appendChild(a),l=new XMLSerializer().serializeToString(o),[4,fetch("/object-storage/".concat(t,"/").concat(n,"?uploadId=").concat(r),{method:"POST",credentials:"same-origin",headers:{"Content-Length":l.length.toString(),"Content-Type":"application/xml","X-Requested-With":"XMLHttpRequest"},body:l})];case 1:if(!(c=s.sent()).ok)throw Error("Failed to complete multipart upload: ".concat(fG(c)));return[2]}})})).apply(this,arguments)}function fM(){return(fM=(0,tM._)(function(e){var t,n,r,i,o,a,l,c;return(0,tF.Jh)(this,function(s){switch(s.label){case 0:return t=e.bucketExternalId,n=e.objectName,r=e.file,[4,(0,fT.pV)(r)];case 1:return i=s.sent(),a=(o=ne.Z.from(i)).toBuffer(),[4,function(e){return fO.apply(this,arguments)}({bucketExternalId:t,objectName:n,file:r})];case 2:return l=s.sent(),[4,Promise.all(Array(Math.ceil(o.length/8388608)).fill(0).map(function(e,r){var i=a.subarray(8388608*r,(r+1)*8388608);return function(e){return fU.apply(this,arguments)}({bucketExternalId:t,objectName:n,partNumber:r+1,uploadId:l,chunk:i})}))];case 3:return c=s.sent(),[4,function(e){return fX.apply(this,arguments)}({bucketExternalId:t,objectName:n,uploadId:l,parts:c})];case 4:return s.sent(),[2]}})})).apply(this,arguments)}function fF(e){return fW.apply(this,arguments)}function fW(){return(fW=(0,tM._)(function(e){var t,n,r;return(0,tF.Jh)(this,function(i){switch(i.label){case 0:return t=e.bucketExternalId,n=e.objectName,[4,fetch("/object-storage/storage/v1/b/".concat(t,"/o/").concat(n.replaceAll("/","%2F")),{method:"DELETE",credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"}})];case 1:if(!(r=i.sent()).ok)throw Error("Failed to delete object: ".concat(fG(r)));return[2]}})})).apply(this,arguments)}function fV(){return(fV=(0,tM._)(function(e){var t,n,r,i,o,a,l;return(0,tF.Jh)(this,function(c){switch(c.label){case 0:return t=e.sourceBucketExternalId,n=e.destinationBucketExternalId,r=e.sourceObjectName,i=e.destinationObjectName,o=encodeURIComponent(r),a=encodeURIComponent(i),[4,fetch("/object-storage/storage/v1/b/".concat(t,"/o/").concat(o,"/copyTo/b/").concat(n,"/o/").concat(a),{method:"POST",credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"}})];case 1:if(!(l=c.sent()).ok)throw Error("Failed to copy object: ".concat(fG(l)));return[2]}})})).apply(this,arguments)}(f=T||(T={}))[f.Direct=1]="Direct",f[f.Multipart=2]="Multipart";var fH=(0,nx.cn)(new Map),fz=(0,nx.cn)(null,function(e,t,n){var r=n.bucketExternalId,i=n.objects;t(fH,function(e){return(0,dg.Uy)(e,function(e){e.set(r,i)})})}),fj=(0,nx.cn)(null,function(e,t,n){var r=n.bucketExternalId,i=n.name,o=n.contentType,a=n.size,l={id:"optimistic-"+nn()(),name:i,contentType:o,size:a,timeCreated:new Date().toISOString(),optimisticallyInserted:!0};t(fH,function(e){return(0,dg.Uy)(e,function(e){var t=e.get(r);if(!t){e.set(r,[l]);return}var n=t.find(function(e){return e.name===i});n?Object.assign(n,l):t.push(l)})})}),fq=(0,nx.cn)(null,function(e,t,n){var r=n.name,i=n.bucketExternalId,o=n.isPendingDeletion,a=n.isOptimisticallyInserted;t(fH,function(e){return(0,dg.Uy)(e,function(e){var t=e.get(i);if(!t)throw Error("Bucket not found when updating object");var n=t.findIndex(function(e){return e.name===r});if(-1===n)throw Error("Bucket not found when updating object");void 0!==o&&(t[n].isPendingDeletion=o),void 0!==a&&(t[n].optimisticallyInserted=a)})})}),fJ=(0,nx.cn)(null,function(e,t,n){var r=n.name,i=n.bucketExternalId;t(fH,function(e){return(0,dg.Uy)(e,function(e){var t=e.get(i);if(!t)throw Error("Bucket not found when removing object");e.set(i,t.filter(function(e){return e.name!==r}))})})}),fY=new Intl.Collator;function f$(e){return e.sort(function(e,t){return fY.compare(e.displayName,t.displayName)})}function fK(e){var t=e.bucketExternalId;return(0,nZ.Dv)(fH).get(t)}function fQ(){var e,t=(0,N._)((0,ee.useState)(!1),2),n=t[0],r=t[1],i=(0,nZ.Dv)(fH),o=(0,nZ.b9)(fz);return{loading:n,fetchObjects:(0,ee.useCallback)((e=(0,tM._)(function(e){var t,n,a,l,c,s;return(0,tF.Jh)(this,function(u){switch(u.label){case 0:if(t=e.bucketExternalId,n=e.isNewBucket,a=e.onError,l=e.skipIfLoaded,n)return o({bucketExternalId:t,objects:[]}),[2];if(l&&i.has(t))return[2];r(!0),u.label=1;case 1:return u.trys.push([1,3,,4]),[4,function(e){return fP.apply(this,arguments)}({bucketExternalId:t})];case 2:return c=u.sent(),o({bucketExternalId:t,objects:c}),[3,4];case 3:return s=u.sent(),null==a||a(s),[3,4];case 4:return r(!1),[2]}})}),function(t){return e.apply(this,arguments)}),[i,o])}}function f0(){var e=(0,N._)((0,ee.useState)(!1),2),t=e[0],n=e[1],r=(0,nZ.b9)(fj),i=(0,nZ.b9)(fJ),o=(0,nZ.b9)(fq);function a(){return(a=(0,tM._)(function(e){var t,a,l,c,s;return(0,tF.Jh)(this,function(u){switch(u.label){case 0:t=e.bucketExternalId,a=e.files,l=e.targetFolder,c=e.onError,n(!0),u.label=1;case 1:var d;return u.trys.push([1,3,,4]),[4,Promise.all(a.map((d=(0,tM._)(function(e){var n,a;return(0,tF.Jh)(this,function(c){switch(c.label){case 0:n=l+(e.webkitRelativePath||e.dirPath||e.name),r({bucketExternalId:t,name:n,contentType:e.type,size:null==e?void 0:e.size.toString()}),a=e.size>31457280?T.Multipart:T.Direct,c.label=1;case 1:return c.trys.push([1,3,,4]),[4,fA({bucketExternalId:t,objectName:n,file:e,uploadMethod:a})];case 2:return c.sent(),o({bucketExternalId:t,name:n,isOptimisticallyInserted:!1}),[3,4];case 3:return c.sent(),i({bucketExternalId:t,name:n}),[3,4];case 4:return[2]}})}),function(e){return d.apply(this,arguments)})))];case 2:return u.sent(),[3,4];case 3:return s=u.sent(),null==c||c(s),[3,4];case 4:return n(!1),[2]}})})).apply(this,arguments)}return{uploadFiles:function(e){return a.apply(this,arguments)},loading:t}}function f1(){var e=(0,eK._)(["\n  query UserBuckets($input: CurrentUserBucketsInput!) {\n    currentUser {\n      id\n      buckets(input: $input) {\n        ... on BucketConnection {\n          __typename\n          items {\n            ...ObjectStorageBucket\n          }\n          pageInfo {\n            hasNextPage\n            nextCursor\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return f1=function(){return e},e}function f2(){var e=(0,eK._)(["\n  query OrgBuckets($orgId: String!, $input: OrgBucketsInput!) {\n    currentUser {\n      id\n      org(orgId: $orgId) {\n        ... on Org {\n          id\n          buckets(input: $input) {\n            ... on BucketConnection {\n              __typename\n              items {\n                ...ObjectStorageBucket\n              }\n              pageInfo {\n                hasNextPage\n                nextCursor\n              }\n            }\n            ... on Error {\n              message\n            }\n          }\n        }\n        ... on Error {\n          message\n        }\n      }\n    }\n  }\n  ","\n"]);return f2=function(){return e},e}function f3(){var e=(0,eK._)(["\n  mutation AddReplBucket($input: AddReplBucketInput!) {\n    addReplBucket(input: $input) {\n      __typename\n      ... on Bucket {\n        ...ObjectStorageBucket\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return f3=function(){return e},e}var f4={},f8=(0,eQ.Ps)(f1(),fg),f6=(0,eQ.Ps)(f2(),fg),f5=(0,eQ.Ps)(f3(),fg),f7=n(47136),f9=n(21882),he=n(44794),ht=n(47483),hn=(0,z.X)({self:[J.l0.flex.growAndShrink(1)],error:[J.l0.color.accentNegativeStronger],button:[J.l0.reset.button,J.l0.viewStyle,nI.gU.nofill,J.l0.display.inlineFlex,{borderColor:nI.gU.outlined.borderColor},J.l0.flex.growAndShrink(1)],select:[J.l0.display.flex,J.l0.flex.growAndShrink(1)],selectDisabled:[{backgroundColor:J.TV.backgroundHigher}],popover:[J.l0.width("max-content"),J.l0.overflow("auto"),J.l0.p(1),J.l0.minWidth(240)],labeledInput:[J.l0.colWithGap(8),J.l0.flex.growAndShrink(1),J.l0.minWidth(250)],listbox:[J.l0.maxHeight(300),J.l0.minWidth(300),J.l0.overflow("auto")],dropdownItemAndContainer:[J.l0.flex.row,J.l0.align.center,nI.gU.listItem,J.l0.px(8),J.l0.py(4)],selectedItemAndContainer:[J.l0.px(8),J.l0.py(4),J.l0.justify.spaceBetween,J.l0.align.center,J.l0.rowWithGap(8)],selectedBucketName:[J.l0.align.center,J.l0.textAlign.left,J.l0.rowWithGap(8)],bucketName:[J.l0.align.center,J.l0.textAlign.left,J.l0.rowWithGap(8)],selectedCheckIcon:[J.l0.align.center,J.l0.flex.row,J.l0.pl(8)],header:[J.l0.pt(8),J.l0.px(8),J.l0.pb(4),J.l0.flex.growAndShrink(1),{borderBottom:"1px solid ".concat(J.TV.outlineDimmest)}],loading:[J.l0.minWidth(200),J.l0.display.flex,J.l0.flex.grow(1),ez.p.backgroundPulse(J.TV.backgroundHighest,J.TV.backgroundHigher)]});function hr(e){var t=e.buckets,n=e.error,r=e.loading,i=e.onChange,o=e.onLoadMore,a=e.selectedBucketId,l=(0,ee.useId)();return(0,U.BX)(H.G,{css:hn.self,children:[(0,U.tZ)(hc,{buckets:t,loading:r,selectedBucketId:a,onLoadMore:o,onSelectionChange:function(e){"string"==typeof e&&i(e)}}),n?(0,U.tZ)(H.G,{css:hn.error,"aria-live":"polite","aria-atomic":"true",id:l,children:(0,U.tZ)("span",{children:n})}):null]})}var hi=(0,z.X)({self:[hn.dropdownItemAndContainer,J.l0.justify.spaceBetween,{backgroundColor:nI.vb.interactiveBackground}]});function ho(){return(0,U.tZ)(H.G,{css:hn.selectDisabled,children:(0,U.tZ)(H.G,{css:hn.selectedItemAndContainer,children:(0,U.tZ)(H.G,{css:hn.selectedBucketName,children:(0,U.tZ)(V.xv,{color:"dimmer",variant:"text",children:"No buckets available to add"})})})})}function ha(e){var t=e.title;return(0,U.BX)(H.G,{css:hn.selectedItemAndContainer,children:[(0,U.tZ)(H.G,{css:hn.selectedBucketName,children:(0,U.tZ)(V.xv,{variant:"text",children:t})}),(0,U.tZ)(tk.Z,{})]})}function hl(e){var t=e.bucketName,n=e.selected;return(0,U.BX)(H.G,{css:n?hi.self:hn.dropdownItemAndContainer,children:[(0,U.tZ)(H.G,{css:hn.bucketName,children:(0,U.tZ)(V.xv,{variant:"text",color:n?"default":"dimmer",children:t})}),(0,U.tZ)(H.G,{css:hn.selectedCheckIcon,children:n?(0,U.tZ)(rZ.Z,{}):null})]})}function hc(e){var t=e.buckets,n=e.loading,r=e.selectedBucketId,i=e.onLoadMore,o=e.onSelectionChange,a=(0,a$.U)(),l=(0,ee.useMemo)(function(){return t.find(function(e){return e.id===r})},[t,r]);return(0,U.BX)(H.G,{css:hn.labeledInput,children:[(0,U.tZ)(fh._,{htmlFor:a("bucket"),children:"Bucket"}),n?(0,U.tZ)(eg.II,{css:hn.loading,disabled:!0}):(0,U.BX)(f9.Ph,{css:hn.select,id:a("bucket"),onSelectionChange:o,"aria-label":"Bucket Select",children:[(0,U.tZ)(he.z,{css:hn.button,isDisabled:!l,children:l?(0,U.tZ)(ha,{title:l.name}):(0,U.tZ)(ho,{})}),(0,U.tZ)(nB.Bf,{noArrow:!0,css:hn.popover,background:"default",placement:"bottom left",children:(0,U.tZ)(f7.wb,{css:hn.listbox,onLoadMore:i,children:t.map(function(e){var t=e.id,n=e.name;return(0,U.tZ)(ht.m9,{id:t,textValue:n,children:(0,U.tZ)(hl,{bucketName:n,selected:t===r})},t)})})})]})]})}var hs=(0,z.X)({addBucketButton:[J.l0.flex.growAndShrink(1),J.l0.justify.center,J.l0.textAlign.center],form:[J.l0.px(4)],labeledInput:[J.l0.colWithGap(8),J.l0.flex.growAndShrink(1),J.l0.textAlign.left],row:[J.l0.flex.growAndShrink(1),J.l0.pt(16),J.l0.rowWithGap(16),{flexBasis:"300px"}],wrapper:[J.l0.flex.row,J.l0.flex.wrap]});function hu(e){var t,n,r,i,o,a,l,c,s,u,d,f,h,p,m,v,g,y,b,w,Z,x,C=e.excludeBucketIds,k=e.isOpen,S=e.onBucketAdded,_=e.onError,E=e.onRequestClose,T=e.orgId,R=(0,N._)((0,ee.useState)(),2),D=R[0],I=R[1],B=(0,e$.Z)(),G=(l=(t={onError:_,orgId:T}).orgId,c=t.onError,u=(n=(0,ep._)({},f4,{fetchPolicy:"network-only",onError:c,skip:void 0!==l,ssr:!1,variables:{input:hd}}),s=e0.a(f8,n)).data,d=s.fetchMore,f=s.loading,h=(0,ee.useCallback)(function(){var e,t,n;d({variables:{input:(0,em._)((0,ep._)({},hd),{after:null==u?void 0:null===(n=u.currentUser)||void 0===n?void 0:null===(t=n.buckets)||void 0===t?void 0:null===(e=t.pageInfo)||void 0===e?void 0:e.nextCursor})},updateQuery:function(e,t){if(!(null===(o=t.fetchMoreResult)||void 0===o?void 0:null===(i=o.currentUser)||void 0===i?void 0:null===(r=i.buckets)||void 0===r?void 0:r.items))return e;var n=(0,ep._)({},t.fetchMoreResult);if(null===(a=n.currentUser)||void 0===a?void 0:a.buckets){var r,i,o,a,l,c,s,u=null!==(s=null==e?void 0:null===(c=e.currentUser)||void 0===c?void 0:null===(l=c.buckets)||void 0===l?void 0:l.items)&&void 0!==s?s:[],d=n.currentUser.buckets.items;n.currentUser.buckets.items=(0,O._)(d).concat((0,O._)(u))}return n}})},[d,u]),m=(r=(0,ep._)({},f4,{fetchPolicy:"network-only",onError:c,skip:void 0===l,ssr:!1,variables:{input:hd,orgId:l||""}}),p=e0.a(f6,r)).data,v=p.fetchMore,g=p.loading,b=(null==(y=(null==m?void 0:null===(i=m.currentUser)||void 0===i?void 0:i.org.__typename)==="Org"?null==m?void 0:null===(o=m.currentUser)||void 0===o?void 0:o.org:void 0)?void 0:y.buckets.__typename)==="BucketConnection"?null==y?void 0:y.buckets:void 0,w=(0,ee.useCallback)(function(){v({variables:{input:(0,em._)((0,ep._)({},hd),{after:null==b?void 0:b.pageInfo.nextCursor})},updateQuery:function(e,t){var n,r,i=t.fetchMoreResult,o=null==i?void 0:i.currentUser;if((null==o?void 0:o.__typename)!=="CurrentUser")return e;var a=null==i?void 0:null===(n=i.currentUser)||void 0===n?void 0:n.org;if((null==a?void 0:a.__typename)!=="Org")return e;var l=a.buckets;if("BucketConnection"!==l.__typename)return e;var c=null==e?void 0:null===(r=e.currentUser)||void 0===r?void 0:r.org;if((null==c?void 0:c.__typename)!=="Org")return i;var s=c.buckets;return"BucketConnection"!==s.__typename?i:(0,em._)((0,ep._)({},i),{currentUser:(0,em._)((0,ep._)({},o),{__typename:"CurrentUser",org:(0,em._)((0,ep._)({},a),{__typename:"Org",buckets:(0,em._)((0,ep._)({},l),{__typename:"BucketConnection",items:(0,O._)(l.items).concat((0,O._)(s.items))})})})})}})},[v,b]),Z=(0,ee.useCallback)(function(){l?w():h()},[l,w,h]),{buckets:l?null==b?void 0:b.items:null==u?void 0:null===(a=u.currentUser)||void 0===a?void 0:a.buckets.items,fetchMore:Z,loading:g||f}),P=G.buckets,A=G.fetchMore,L=G.loading;(0,ee.useEffect)(function(){!D&&P&&P.length>1&&I(P[0].id)},[D,P]);var X=(0,ee.useMemo)(function(){return P?P.filter(function(e){return!(null!=C?C:[]).includes(e.id)}):[]},[P,C]);(0,ee.useEffect)(function(){!D&&X&&X.length>0&&I(X[0].id)},[X,D]);var M=(0,N._)((x=(0,ep._)({},f4,{variables:{input:{bucketId:null!=D?D:"",replId:B}}}),aQ.D(f5,x)),2),F=M[0],W=M[1].loading;return(0,U.tZ)(H.G,{children:(0,U.tZ)(rX.u,{fitContent:!0,isOpen:k,onRequestClose:E,children:(0,U.BX)(ew.Tg,{children:[(0,U.tZ)(V.h4,{level:1,variant:"subheadBig",children:"Choose a Bucket"}),(0,U.BX)(H.G,{css:hs.wrapper,children:[(0,U.tZ)(H.G,{css:hs.row,children:(0,U.tZ)(hr,{buckets:X,loading:L,onChange:I,onLoadMore:A,selectedBucketId:D})}),(0,U.tZ)(H.G,{css:hs.row,children:(0,U.tZ)(eb.zx,{css:hs.addBucketButton,text:W?"Adding Bucket to Repl...":"Add Bucket to Repl",onClick:function(){F({onCompleted:function(e){var t="Bucket"===e.addReplBucket.__typename?e.addReplBucket:null;if(!t){_(Error("Failed to create bucket"));return}S(t)},onError:_})},colorway:"primary",iconLeft:W||L?(0,U.tZ)(q.Z,{}):(0,U.tZ)(nA.Z,{}),disabled:W||!D})})]})]})})})}var hd={count:10},hf=n(45077),hh=n(12623),hp=n(19699),hm=n(43849),hv=n(96214),hg=n(59978),hy=n(77049),hb=[{icon:(0,U.tZ)(hp.Z,{}),title:"JavaScript",value:"js"},{icon:(0,U.tZ)(hm.Z,{}),title:"Python",value:"py"},{icon:(0,U.tZ)(ar.Z,{}),title:"All other languages",value:"other"}],hw={js:{packagerConfigLanguage:"nodejs",description:(0,U.tZ)(s_.ZP,{components:{code:function(e){return(0,U.tZ)(hh.Z,(0,ep._)({language:"json"},e))}},children:"This library supports Bun, Deno, and Node.js. It is not recommended for browser-based applications.\n  \nFor more information, see the [SDK Reference](https://docs.replit.com/cloud-services/storage-and-databases/object-storage/typescript-api-reference/)."}),packageName:"@replit/object-storage",commands:[{label:"Import Object Store Library",code:"const { Client } = require('@replit/object-storage');\nconst client = new Client();\n"},{label:"Download an object as text (i.e. JSON)",code:"const { ok, value: textValue, error } = await client.downloadAsText('file.json');\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Download an object as its raw byte representation (i.e. images)",code:"const { ok, value: bytesValue, error } = await client.downloadAsBytes('file.png');\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Download an object by streaming the object's contents (i.e. streaming data over an API)",code:"const { ok, value: stream, error } = await client.downloadAsStream('file.json');\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Download an object to the filesystem",code:"const { ok, error } = await client.downloadToFilename('file.json', destFilename);\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"List the objects in the bucket",code:"const { ok, value, error } = await client.list();\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Upload an object from text (i.e. JSON)",code:"const { ok, error } = await client.uploadFromText('file.json', data);\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Upload an object from its byte representation (i.e. images)",code:"const { ok, error } = await client.uploadFromBytes('file.png', data);\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Upload an object from the filesystem",code:"const { ok, error } = await client.uploadFromFilename('file.json', srcFilename);\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Upload an object from a stream (i.e. streaming data over an API)",code:"const { ok, error } = await client.uploadFromStream('file.json', stream);\nif (!ok) {\n    // ... handle error ...\n}\n"},{label:"Delete an object from the bucket",code:"const { ok, error } = await client.delete('file.json');\nif (!ok) {\n    // ... handle error ...\n}\n"}]},py:{packagerConfigLanguage:"python3",description:(0,U.tZ)(s_.ZP,{components:{code:function(e){return(0,U.tZ)(hh.Z,(0,ep._)({language:"json"},e))}},children:"For more information, see the [SDK Reference](https://docs.replit.com/cloud-services/storage-and-databases/object-storage/python-api-reference/)."}),packageName:"replit-object-storage",commands:[{label:"Import Object Store Library",code:"from replit.object_storage import Client\nclient = Client()"},{label:"Download an object as text (i.e. JSON)",code:'client.download_as_text("file.json")'},{label:"Download an object as its raw byte representation (i.e. images)",code:'client.download_as_bytes("file.png")'},{label:"Download an object to the filesystem",code:'client.download_to_filename("file.json", dest_filename)'},{label:"List the objects in the bucket",code:"client.list()"},{label:"Upload an object from text (i.e. JSON)",code:'client.upload_from_text("file.json", data)'},{label:"Upload an object from its byte representation (i.e. images)",code:'client.upload_from_bytes("file.png", data)'},{label:"Upload an object from the filesystem",code:'client.upload_from_filename("file.json", src_filename)'},{label:"Delete an object from the bucket",code:'client.delete("file.json")'}]},other:{description:(0,U.tZ)(s_.ZP,{components:{code:function(e){return(0,U.tZ)(hh.Z,(0,ep._)({language:"json"},e))}},children:'\nYou can use the [Google Cloud client libraries](https://cloud.google.com/storage/docs/reference/libraries#use) to interact with your bucket in any of the supported languages.\n\nIf there isn\'t a client library for your language of choice, you can use the [JSON API](https://cloud.google.com/storage/docs/json_api).\n\nWith both the client libraries and the JSON API, only blob/file/object APIs are authorized.\n\n## Authorization\n\n### Client libraries\n\n1. Create a JSON file with these contents in your project root directory, `google_application_credentials.json`\n\n```\n{\n  "type": "external_account",\n  "audience": "replit",\n  "credential_source": {\n    "url": "http://127.0.0.1:1106/credential"\n  },\n  "token_url": "http://127.0.0.1:1106/token"\n}\n```\n\n2. Set the `GOOGLE_APPLICATION_CREDENTIALS` environment variable to `"google_application_credentials.json"`\n3. Set the `GCLOUD_PROJECT` environment variable to `""`\n\n### JSON API\n\n1. Issue a `POST` request to `http://127.0.0.1:1106/token`\n\n## Bucket Selection\nUsing Google Cloud APIs or libraries directly requires a bucket name parameter to be specified on all requests. This field is interchangeable with your bucket\'s ID within Replit Object Storage.\n\nTo get the ID of the default bucket for your Repl or Deployment, issue a `GET` request to `http://127.0.0.1:1106/object-storage/default-bucket`\n'}),commands:[]}},hZ=(0,z.X)({wrapper:[J.l0.colWithGap(16)],section:[J.l0.colWithGap(6)],selectWrapper:[J.l0.rowWithGap(0)],statusBanner:[J.l0.maxWidth("fit-content")]});function hx(e){var t=e.onError,n=(0,N._)((0,ee.useState)("js"),2),r=n[0],i=n[1],o=(0,ax.Z)().showConfirm,a=(0,Y.Z)().packager,l=(0,hg.I)().configs,c=(0,hy.z9)(),s=(0,N._)((0,ee.useState)(!1),2),u=s[0],d=s[1],f=l.find(function(e){return e.language===hw[r].packagerConfigLanguage}),h=!!(hw[r].packagerConfigLanguage&&hw[r].packageName&&f),p=!!(f&&c(f.id).some(function(e){return e.name===hw[r].packageName})),m=(0,N._)((0,ee.useState)(!1),2),v=m[0],g=m[1];function y(){return(y=(0,tM._)(function(){return(0,tF.Jh)(this,function(e){switch(e.label){case 0:if(!h)return t(Error("Package not available for selected language")),[2];return d(!0),[4,a.addPackages([{name:hw[r].packageName}])];case 1:return e.sent()?(o("Installed ".concat(hw[r].packageName," package")),g(!0)):t(Error("Failed to install ".concat(hw[r].packageName," package"))),[2]}})})).apply(this,arguments)}var b=hb.find(function(e){return e.value===r}),w=v||p;return(0,ee.useLayoutEffect)(function(){var e=!0,t=!1,n=void 0;try{for(var r,o=hb[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var a=function(){var e=r.value;if(hw[e.value].packagerConfigLanguage&&l.find(function(t){return t.language===hw[e.value].packagerConfigLanguage}))return i(e.value),{v:void 0}}();if("object"===(0,hf._)(a))return a.v}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}i("other")},[]),(0,U.BX)(H.G,{css:hZ.wrapper,children:[(0,U.tZ)(H.G,{css:hZ.selectWrapper,children:(0,U.tZ)(hv.P,{items:hb,selectedItem:b,initialSelectedItem:hb[0],onChange:function(e){g(!1),i(e.value)}})}),hw[r].description?hw[r].description:null,!w&&h?(0,U.tZ)(eb.zx,{onClick:function(){return y.apply(this,arguments)},text:"Install ".concat(hw[r].packageName," package"),colorway:"primary",loading:u}):null,b&&w?(0,U.tZ)(e6.E,{text:"Package installed",colorway:"positive",css:hZ.statusBanner}):null,hw[r].commands.map(function(e){return(0,U.BX)(H.G,{css:hZ.section,children:[(0,U.tZ)(V.xv,{children:e.label}),(0,U.tZ)(s_.ZP,{components:{code:function(e){return(0,U.tZ)(hh.Z,(0,ep._)({language:r},e))}},children:"```\n".concat(e.code)})]},e.label)})]})}var hC=n(11782),hk=(0,z.X)({wrapper:[J.l0.colWithGap(8)],ctaStatusBanner:[J.l0.textAlign.left],ctaContainer:[J.l0.colWithGap(8),J.l0.align.center],cta:[J.l0.width("100%"),J.l0.maxWidth(320),{marginLeft:"auto",marginRight:"auto"}],budgetContainer:[J.l0.colWithGap(8),J.l0.border(),J.l0.borderRadius(8),J.l0.p(8)],payment:[J.l0.p(16),J.l0.borderRadius(12),J.l0.textAlign.left,J.l0.shadow(2)]});function hS(e){var t=e.children,n=e.createBucketAuthz,r=e.actionDescription,i=e.refetchAuthzQueryData,o=e.loading,a=(0,N._)((0,ee.useState)(!1),2),l=a[0],c=a[1],s=(0,N._)((0,ee.useState)(!1),2),u=s[0],d=s[1];return(0,U.BX)(U.HY,{children:[(0,U.BX)(H.G,{css:hk.wrapper,children:[(0,U.tZ)(h_,{mainActionCTA:t,showPaymentMethodForm:l,setShowPaymentMethodForm:function(){return c(!0)},setShowSupportForm:function(){return d(!0)},createBucketAuthz:n,actionDescription:r,refetchAuthzQueryData:i,loading:o}),l?(0,U.tZ)(ew.Tg,{elevated:!0,css:hk.payment,children:(0,U.tZ)(dN.q,{onSuccess:(0,tM._)(function(){return(0,tF.Jh)(this,function(e){switch(e.label){case 0:return c(!1),[4,i()];case 1:return e.sent(),[2]}})}),context:"workspace_hosting_pane"})}):null]}),(0,U.tZ)(rX.u,{isOpen:u,onRequestClose:function(){return d(!1)},children:(0,U.tZ)(sD.Z,{onRequestClose:function(){return d(!1)}})})]})}function h_(e){var t=e.mainActionCTA,n=e.showPaymentMethodForm,r=e.setShowPaymentMethodForm,i=e.setShowSupportForm,o=e.createBucketAuthz,a=e.actionDescription,l=e.refetchAuthzQueryData,c=e.loading,s=(0,aX.sG)();if(!o)return null;if(!o.isAuthorized&&s)return(0,U.tZ)(e6.E,{text:o.message,colorway:"warning",icon:(0,U.tZ)(rg.Z,{}),css:hk.ctaStatusBanner});switch(o.code){case aK.RO.RequiresActiveSubscription:case aK.RO.RequiresPaymentMethodOrSubscription:return(0,U.BX)(H.G,{css:hk.ctaContainer,children:[(0,U.tZ)(sP.Z,{context:"workspace_hosting_pane",text:"Upgrade your plan to ".concat(a,"."),css:hk.cta,colorway:"primary",variant:"default",disabled:n,onPlanCheckoutComplete:l}),(0,U.tZ)(eb.zx,{variant:"nofill",colorway:"primary",text:"or add a payment method",css:hk.cta,disabled:n,loading:c,iconLeft:(0,U.tZ)(sG.Z,{}),onClick:function(){return r()}})]});case aK.RO.RequiresSmsVerification:return(0,U.tZ)(sR.Z,{context:aK.jv.ObjectStorage,onSuccess:l});case aK.RO.RequiresPaymentMethod:return(0,U.tZ)(eb.zx,{colorway:"primary",text:"Add a payment method",css:hk.cta,disabled:n,loading:c,iconLeft:(0,U.tZ)(sG.Z,{}),onClick:function(){return r()}});case aK.RO.RequiresUnbanning:return(0,U.tZ)(sB.u,{text:"Your account is not currently allowed to ".concat(a,". We're here to help! Please reach out to our support team for assistance."),colorway:"warning",iconLeft:(0,U.tZ)(rg.Z,{}),css:hk.ctaStatusBanner,onClick:function(){return i()}});case aK.RO.InsufficientBudget:return(0,U.BX)(U.HY,{children:[(0,U.tZ)(e6.E,{text:"You've reached your monthly usage budget. Increase your budget to ".concat(a,"."),colorway:"warning",icon:(0,U.tZ)(rg.Z,{}),css:hk.ctaStatusBanner}),(0,U.tZ)(H.G,{css:hk.budgetContainer,children:(0,U.tZ)(sI.L,{onUpdateSuccess:l})})]});case aK.RO.FeatureDisabled:case aK.RO.FeatureUnsupportedForReplitTeams:case aK.RO.FeatureUnsupportedForTeamsEdu:case aK.RO.FeatureUnsupportedForTeamsFree:case aK.RO.FeatureUnsupportedForTeamsPro:case aK.RO.InsufficientPermissions:case aK.RO.InsufficientQuota:case aK.RO.RequiresEmailVerification:return(0,U.tZ)(e6.E,{text:o.message,colorway:"warning",icon:(0,U.tZ)(rg.Z,{}),css:hk.ctaStatusBanner});case aK.RO.Authorized:case aK.RO.AuthorizedQuota:return(0,U.tZ)(U.HY,{children:t});default:(0,nT.Z)(o.code)}}function hE(){var e=(0,eK._)(["\n  mutation ObjectStoragePaneIntroCreateBucket($input: CreateBucketInput!) {\n    createBucket(input: $input) {\n      ... on Bucket {\n        ...ObjectStorageBucket\n      }\n      ... on Error {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return hE=function(){return e},e}var hT={},hR=(0,eQ.Ps)(hE(),fg),hD=[{imageUrl:"/public/images/object-storage/objects-in-bucket.svg",text:"Store immutable files, like photos and documents, in writable buckets (databases for unstructured files).",altText:"An image and a file going into a bucket"},{imageUrl:"/public/images/object-storage/upload-to-cloud.svg",text:"Deploy apps that handle variable sets of files added by your users, like an upload-based photo gallery.",altText:"Images being uploaded to a cloud"},{imageUrl:"/public/images/object-storage/share-same-bucket.svg",text:"Buckets are automatically shared between development and production, so you can easily pass files to your users directly from the Workspace.",altText:"Development icon and deployment icon sharing a bucket"}],hI=(0,z.X)({action:[J.l0.width("100%"),J.l0.maxWidth(320),J.l0.px(32),{marginLeft:"auto",marginRight:"auto"}],row:[J.l0.rowWithGap(16)],rowText:[J.l0.flex.growAndShrink(1),J.l0.textAlign.left]});function hB(e){var t,n,r=e.createBucketAuthz,i=e.editBucketAuthz,o=e.refetchAuthzQueryData,a=e.onBucketAdded,l=e.onError,c=(0,nw.P5)({controlName:fd.Cd,default:!1,type:"boolean",logFlagToAnalytics:!1}),s=(0,N._)((0,ee.useState)(!1),2),u=s[0],d=s[1],f=(0,ee.useCallback)(function(){return d(!1)},[]),h=(0,ee.useCallback)(function(){return d(!0)},[]),p=(0,N._)((0,ee.useState)(!1),2),m=p[0],v=p[1],g=(0,ee.useCallback)(function(){return v(!1)},[]),y=(0,ee.useCallback)(function(){return v(!0)},[]),b=(0,e$.Z)(),w=(0,N._)((t=(0,ep._)({},hT,{variables:{input:{replId:b}}}),aQ.D(hR,t)),2),Z=w[0],x=w[1].loading;return(0,U.BX)(U.HY,{children:[(0,U.tZ)(hu,{isOpen:u,onBucketAdded:a,onError:l,onRequestClose:f}),c?(0,U.tZ)(f_,{isOpen:m,onBucketCreated:a,onError:l,onRequestClose:g}):null,(0,U.tZ)(eu.Z,{pane:{type:"objectStorage"},maxWidth:450,body:hD.map(function(e,t){return(0,U.BX)(H.G,{css:hI.row,children:[(0,U.tZ)(H.G,{children:(0,U.tZ)(hC.Z,{src:e.imageUrl,width:44,height:44,alt:e.altText})}),(0,U.tZ)(V.xv,{css:hI.rowText,children:e.text})]},t)}),action:(0,U.BX)(hS,{createBucketAuthz:r,actionDescription:"create a bucket",refetchAuthzQueryData:o,loading:x,children:[(0,U.tZ)(eb.zx,{css:hI.action,text:x?"Creating bucket...":"Create new bucket",onClick:c?y:function(){Z({onCompleted:function(e){var t="Bucket"===e.createBucket.__typename?e.createBucket:null;if(!t){l(Error("Failed to create bucket"));return}a(t)},onError:l})},colorway:"primary",iconLeft:x?(0,U.tZ)(q.Z,{}):(0,U.tZ)(nA.Z,{}),disabled:x}),c?(0,U.tZ)(H.G,{children:(0,U.tZ)(tU.u,{isDisabled:null==i?void 0:i.isAuthorized,tooltip:null!==(n=null==i?void 0:i.message)&&void 0!==n?n:"You are not authorized to edit buckets",delay:"default",placement:"bottom-start",children:(0,U.tZ)(eb.zx,{css:hI.action,text:"Use an existing bucket",onClick:h,iconLeft:(0,U.tZ)(fu.Z,{}),disabled:x||!(null==i?void 0:i.isAuthorized)})})}):null]})})]})}var hG=n(65697),hP=n(84238),hA=n(22192),hL=n(41513),hN=n(93158),hO=n(35680),hU=n(82383),hX=n(26978),hM=n(79718),hF=n(89882),hW=n(78649),hV=n(97676),hH=n(47495),hz=n(6191),hj=function(e){var t=e.folderPath,n=e.onDropNativeFiles,r=(0,N._)((0,hH.L)(function(){return{accept:[fI.FILE,hz.FILE],drop:function(e){return"files"in e&&n(e.files),{name:t}},collect:function(e){return{isOver:!!e.isOver()}}}}),2);return{isDraggedOver:r[0].isOver,drop:r[1]}},hq=function(e){var t=e.currentFolder,n=e.onDropNativeFiles,r=(0,N._)((0,hH.L)(function(){return{accept:[hz.FILE],drop:function(e,t){t.didDrop()||e.dirContent.then(function(e){n(e)})},collect:function(e){return{isOverCurrent:e.isOver({shallow:!0})}}}},[t]),2);return{isOverCurrent:r[0].isOverCurrent,drop:r[1]}},hJ=n(36670),hY="1px dashed ".concat(J.TV.accentPrimaryDefault),h$=J.nC.min(500),hK=(0,hA.$)(["bodyOutline"]),hQ=hK.cssVars,h0=hK.styleTokens,h1=(0,z.X)({wrapper:[J.l0.flex.grow(1)],buttons:[J.l0.colWithGap(8),(0,ti._)({},h$,[J.l0.rowWithGap(8)])],primaryButtons:[J.l0.rowWithGap(8)],secondaryButtons:[J.l0.rowWithGap(8),J.l0.justify.spaceBetween,J.l0.flex.grow(1)],tableWrapper:[J.l0.flex.growAndShrink(1),J.l0.borderRadius(4),{outline:h0.bodyOutline}],tableHeaderMainColumn:[J.l0.textAlign.left,J.l0.p(4),J.l0.width("50%")],tableHeader:[J.l0.textAlign.left,J.l0.p(4),J.l0.width("25%")]});function h2(e){var t=e.bucketExternalId,n=e.onOpenCommandsTab,r=e.onError,i=fK({bucketExternalId:t}),o=(0,N._)((0,ee.useState)(""),2),a=o[0],l=o[1],c=function(e){var t=e.objects,n=e.currentFolder,r=[],i=new Map,o=!0,a=!1,l=void 0;try{for(var c,s=t[Symbol.iterator]();!(o=(c=s.next()).done);o=!0){var u=c.value;if(u.name.startsWith(n)&&u.name!==n){var d=u.name.slice(n.length);if(!d.includes("/")){r.push((0,em._)((0,ep._)({},u),{isFolder:!1,displayName:d}));continue}var f=d.split("/")[0];if(i.get(f)||i.set(f,{isFolder:!0,name:n+f+"/",displayName:f}),u.name===n+f+"/"){var h=i.get(f);if(!h)throw Error("Folder should have been added to map");h.optimisticallyInserted=u.optimisticallyInserted,h.isPendingDeletion=u.isPendingDeletion}}}}catch(e){a=!0,l=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw l}}var p=f$(Array.from(i.values())),m=f$(r);return(0,O._)(p).concat((0,O._)(m))}({currentFolder:a,objects:null!=i?i:[]}),s=fQ(),u=s.fetchObjects,d=s.loading,f=function(){var e=(0,N._)((0,ee.useState)(!1),2),t=e[0],n=e[1],r=(0,nZ.b9)(fj),i=(0,nZ.b9)(fq),o=(0,nZ.b9)(fJ);function a(){return(a=(0,tM._)(function(e){var t,a,l,c,s,u,d;return(0,tF.Jh)(this,function(f){switch(f.label){case 0:if(t=e.bucketExternalId,a=e.folderName,l=e.currentFolder,c=e.onError,a.includes("/"))return null==c||c(Error("Folder name cannot contain a forward slash")),[2];n(!0),r({bucketExternalId:t,name:s=l+a+"/",contentType:"text/plain",size:"0"}),u=new File([""],a,{type:"text/plain"}),f.label=1;case 1:return f.trys.push([1,3,,4]),[4,fA({bucketExternalId:t,objectName:s,file:u})];case 2:return f.sent(),i({bucketExternalId:t,name:s,isOptimisticallyInserted:!1}),[3,4];case 3:return d=f.sent(),null==c||c(d),o({bucketExternalId:t,name:s}),[3,4];case 4:return n(!1),[2]}})})).apply(this,arguments)}return{createFolder:function(e){return a.apply(this,arguments)},loading:t}}().createFolder,h=f0().uploadFiles,p=(0,ee.useRef)(null),m=(0,ee.useRef)(null),v=(0,N._)((0,ee.useState)(!1),2),g=v[0],y=v[1],b=(0,N._)((0,ee.useState)(null),2),w=b[0],Z=b[1],x=hq({currentFolder:a,onDropNativeFiles:function(e){h({bucketExternalId:t,files:e,targetFolder:a,onError:r})}}),C=x.isOverCurrent,k=x.drop;return(0,U.BX)(U.HY,{children:[(0,U.BX)(H.G,{css:h1.wrapper,children:[(0,U.BX)(H.G,{css:h1.buttons,children:[(0,U.BX)(H.G,{css:h1.primaryButtons,children:[(0,U.tZ)(eb.zx,{onClick:function(){p.current&&p.current.click()},text:"Upload files",colorway:"primary",iconLeft:(0,U.tZ)(hO.Z,{})}),(0,U.tZ)(eb.zx,{onClick:function(){m.current&&m.current.click()},text:"Upload folder",colorway:"primary",iconLeft:(0,U.tZ)(hM.Z,{})})]}),(0,U.BX)(H.G,{css:h1.secondaryButtons,children:[(0,U.tZ)(eb.zx,{onClick:function(){return y(!0)},text:"Create folder",iconLeft:(0,U.tZ)(hX.Z,{})}),(0,U.tZ)(eb.zx,{onClick:function(){return u({bucketExternalId:t})},text:"Refresh",loading:d,iconLeft:(0,U.tZ)(rr.Z,{})})]})]}),(0,U.tZ)(pl,{currentFolder:a,bucketExternalId:t,setCurrentFolder:l,onError:r}),(0,U.tZ)(H.G,{innerRef:k,css:h1.tableWrapper,style:(0,ti._)({},hQ.bodyOutline,C?hY:void 0),children:i&&i.length||g?(0,U.BX)("table",{children:[(0,U.tZ)("thead",{children:(0,U.BX)("tr",{children:[(0,U.tZ)("th",{css:h1.tableHeaderMainColumn,children:"Name"}),(0,U.tZ)("th",{css:h1.tableHeader,children:"Added"}),(0,U.tZ)("th",{css:h1.tableHeader,children:"Size"})]})}),(0,U.BX)("tbody",{children:[g?(0,U.tZ)(pu,{onCreateFolder:function(e){y(!1),f({bucketExternalId:t,folderName:e,currentFolder:a,onError:r})},onCanceled:function(){return y(!1)}}):null,c.map(function(e){return e.isFolder?(0,U.tZ)(h6,{item:e,setCurrentFolder:l,onDeleteClick:Z,bucketExternalId:t,onError:r},e.name):(0,U.tZ)(h5,{item:e,bucketExternalId:t,onDeleteClick:Z,onError:r},e.name)})]})]}):(0,U.tZ)(pp,{onOpenCommandsTab:n})}),(0,U.tZ)(hJ.Q,{fileUploadInputRef:p,dirUploadInputRef:m,uploadFiles:function(e){return h({bucketExternalId:t,files:e.files,targetFolder:a,onError:r})}})]}),(0,U.tZ)(pf,{bucketExternalId:t,requestedDeleteItem:w,onRequestClose:function(){return Z(null)},onError:r})]})}var h3=(0,hA.$)(["rowOutline","rowOpacity","rowTextDecoration","rowCursor"]),h4=h3.cssVars,h8=h3.styleTokens;function h6(e){var t,n=e.item,r=e.bucketExternalId,i=e.setCurrentFolder,o=e.onDeleteClick,a=e.onError,l=f0().uploadFiles,c=(0,ax.Z)().showConfirm,s=hj({folderPath:n.name,onDropNativeFiles:function(e){c('Uploading files to "'.concat(n.name,'"')),l({bucketExternalId:r,files:e,targetFolder:n.name,onError:a})}}),u=s.isDraggedOver,d=s.drop;return(0,U.tZ)(pt,{item:n,ref:d,onDeleteClick:function(){return o(n)},icon:(0,U.tZ)(hU.Z,{}),timeCreatedCell:"-",sizeCell:"-",style:(t={},(0,ti._)(t,h4.rowOutline,u?hY:void 0),(0,ti._)(t,h4.rowCursor,"pointer"),t),onClick:function(){return i(n.name)},onKeyDown:function(e){"Enter"===e.key&&i(n.name)}})}function h5(e){var t,n,r,i,o,a=e.item,l=e.bucketExternalId,c=e.onDeleteClick,s=e.onError,u="/object-storage/storage/v1/b/".concat(l,"/o/").concat(a.name.replace("/","%2F"),"?alt=media"),d=!!(a.optimisticallyInserted||a.isPendingDeletion),f=function(){var e=(0,N._)((0,ee.useState)(!1),2),t=e[0],n=e[1],r=(0,nZ.b9)(fq),i=(0,nZ.b9)(fj),o=(0,nZ.b9)(fJ);function a(){return(a=(0,tM._)(function(e){var t,a,l,c,s,u,d;return(0,tF.Jh)(this,function(f){switch(f.label){case 0:t=e.bucketExternalId,a=e.object,l=e.destinationFolder,c=e.onError,s=e.onSuccess,n(!0),u=l+a.name.split("/").pop(),r({bucketExternalId:t,name:a.name,isPendingDeletion:!0}),i({bucketExternalId:t,name:u,contentType:a.contentType,size:a.size}),f.label=1;case 1:return f.trys.push([1,4,,5]),[4,function(e){return fV.apply(this,arguments)}({destinationBucketExternalId:t,sourceBucketExternalId:t,sourceObjectName:a.name,destinationObjectName:u})];case 2:return f.sent(),[4,fF({bucketExternalId:t,objectName:a.name})];case 3:return f.sent(),o({bucketExternalId:t,name:a.name}),r({bucketExternalId:t,name:u,isOptimisticallyInserted:!1}),null==s||s(),[3,5];case 4:return d=f.sent(),null==c||c(d),r({bucketExternalId:t,name:a.name,isPendingDeletion:!1}),o({bucketExternalId:t,name:u}),[3,5];case 5:return n(!1),[2]}})})).apply(this,arguments)}return{loading:t,moveObject:function(e){return a.apply(this,arguments)}}}().moveObject,h=(0,ax.Z)().showConfirm,p=(n=(t={item:a,disableDrag:d,onDropOverFolder:function(e){return f({bucketExternalId:l,object:a,destinationFolder:e,onSuccess:function(){h('Moved "'.concat(a.name,'" to "').concat(e,'"'))},onError:s})}}).item,r=t.disableDrag,i=t.onDropOverFolder,{isDragging:(o=(0,N._)((0,hV.c)(function(){return{type:fI.FILE,canDrag:!r,item:function(){return{name:n.name,type:fI.FILE}},collect:function(e){return{isDragging:!!e.isDragging()}},end:function(e,t){var n=t.getDropResult();n&&n&&i(n.name)}}},[r]),2))[0].isDragging,drag:o[1]}),m=p.isDragging,v=p.drag;return(0,U.tZ)(pt,{item:a,ref:v,onDeleteClick:function(){return c(a)},icon:(0,U.tZ)(pd,{contentType:a.contentType}),timeCreatedCell:(0,U.tZ)(nP.EK,{date:a.timeCreated}),sizeCell:ue(Number(a.size),{isKib:!0,isKibNotation:!0}),style:(0,ti._)({},h4.rowOpacity,m?.5:void 0),additionalActionButtons:(0,U.tZ)(U.HY,{children:(0,U.tZ)(F.hU,{alt:"Download",css:h9.rowActionButton,children:(0,U.tZ)("a",{download:a.displayName,href:u,css:J.l0.color.foregroundDefault,children:(0,U.tZ)(j.Z,{})})})})})}var h7=(0,z.X)({row:[J.l0.position.relative,J.l0.borderRadius(4),{outline:h8.rowOutline,outlineOffset:-1,opacity:h8.rowOpacity,cursor:h8.rowCursor,":nth-of-type(even)":{background:"color-mix(in srgb, ".concat(J.TV.backgroundDefault," 60%, ").concat(J.TV.backgroundRoot,")")},":hover":{background:J.TV.backgroundHigher},":hover #action-buttons":{display:"flex"},":focus":{outline:"2px solid ".concat(J.TV.accentPrimaryDefault)}}],text:[J.l0.flex.shrink(1)]}),h9=(0,z.X)({row:[h7.row],pendingRow:[h7.row,J.l0.color.foregroundDimmest],tableData:[J.l0.p(4),{":first-of-type":{borderTopLeftRadius:4,borderBottomLeftRadius:4},":last-of-type, :nth-last-of-type(2)":{borderTopRightRadius:4,borderBottomRightRadius:4}}],objectIconAndName:[J.l0.rowWithGap(8),J.l0.align.center],text:h7.text,strikeThroughText:[h7.text,{textDecoration:"line-through"}],actionButtonTableData:[J.l0.position.relative],rowActionButtonGroup:[J.l0.px(4),J.l0.position.absolute,J.l0.right(0),J.l0.top(0),J.l0.bottom(0),J.l0.rowWithGap(4),J.l0.align.center,J.l0.backgroundColor.backgroundHigher,{display:"none",borderTopRightRadius:4,borderBottomRightRadius:4}],rowActionButton:[nI.gU.filled],loadingTableData:[J.l0.position.relative],loadingIconWrapper:[J.l0.position.absolute,J.l0.right(4),J.l0.top(0),J.l0.bottom(0),J.l0.justify.center],loadingIcon:[{borderRadius:"50%"},J.l0.backgroundColor.backgroundDefault]}),pe=function(){var e=(0,N._)((0,ee.useState)(!1),2),t=e[0],n=e[1],r=(0,N._)((0,ee.useState)(null),2),i=r[0],o=r[1];return(0,ee.useEffect)(function(){if(null!==i){var e=function(){n(i.offsetWidth<i.scrollWidth||i.offsetHeight<i.scrollHeight)};e();var t=new ResizeObserver(e);return t.observe(i),function(){return t.disconnect()}}},[i]),{attachObserver:o,isOverflowing:t}},pt=ee.forwardRef(function(e,t){var n=e.item,r=e.onDeleteClick,i=e.icon,o=e.timeCreatedCell,a=e.sizeCell,l=e.style,c=e.onClick,s=e.onKeyDown,u=e.additionalActionButtons,d=n.isPendingDeletion?h9.strikeThroughText:h9.text,f=n.optimisticallyInserted||n.isPendingDeletion,h=pe(),p=h.attachObserver,m=h.isOverflowing;return(0,U.BX)("tr",{ref:t,tabIndex:0,css:f?h9.pendingRow:h9.row,style:l,onClick:c,onKeyDown:s,children:[(0,U.tZ)("td",{css:h9.tableData,children:(0,U.tZ)(tU.u,{isDisabled:!m,tooltip:n.displayName,children:(0,U.BX)(H.G,{css:h9.objectIconAndName,children:[i,(0,U.tZ)(V.xv,{multiline:!0,maxLines:1,css:d,ref:p,children:n.displayName})]})})}),(0,U.tZ)("td",{css:h9.tableData,children:(0,U.tZ)(V.xv,{multiline:!0,maxLines:1,css:d,children:o})}),(0,U.tZ)("td",{css:h9.tableData,children:(0,U.tZ)(V.xv,{multiline:!0,maxLines:1,css:d,children:a})}),f?null:(0,U.tZ)("td",{css:h9.actionButtonTableData,children:(0,U.BX)(H.G,{css:h9.rowActionButtonGroup,id:"action-buttons",children:[u,(0,U.tZ)(F.hU,{onClick:r,alt:"Delete",css:h9.rowActionButton,children:(0,U.tZ)(sE.Z,{color:J.TV.accentNegativeDefault})})]})}),f?(0,U.tZ)("td",{css:h9.loadingTableData,children:(0,U.tZ)(H.G,{css:h9.loadingIconWrapper,children:(0,U.tZ)(q.Z,{size:24,css:h9.loadingIcon})})}):null]})}),pn=(0,hA.$)(["breadcrumbOutline","breadcrumbTextColor"]),pr=pn.cssVars,pi=pn.styleTokens,po=(0,z.X)({wrapper:[J.l0.rowWithGap(2),J.l0.align.center,J.l0.pt(12),J.l0.pb(4)],breadcrumb:[{color:pi.breadcrumbTextColor,outline:pi.breadcrumbOutline}]}),pa=function(e){var t=e.split("/").filter(function(e){return""!==e}),n=t.map(function(e,n){return{folderName:e,path:t.slice(0,n+1).join("/")+"/"}});return[{folderName:"Objects",path:""}].concat((0,O._)(n))};function pl(e){var t=e.currentFolder,n=e.bucketExternalId,r=e.setCurrentFolder,i=e.onError,o=pa(t);return(0,U.tZ)(H.G,{css:po.wrapper,children:o.map(function(e,t){var a=e.folderName,l=e.path,c=t===o.length-1;return(0,U.BX)(ee.Fragment,{children:[(0,U.tZ)(pc,{folderPath:l,folderName:a,bucketExternalId:n,onClick:function(){return r(l)},isLastBreadcrumb:c,onError:i}),c?null:(0,U.tZ)(V.xv,{color:"dimmest",children:"/"})]},l)})})}function pc(e){var t,n=e.folderPath,r=e.folderName,i=e.bucketExternalId,o=e.onClick,a=e.isLastBreadcrumb,l=e.onError,c=f0().uploadFiles,s=hj({folderPath:n,onDropNativeFiles:function(e){return c({bucketExternalId:i,files:e,targetFolder:n,onError:l})}}),u=s.isDraggedOver,d=s.drop;return(0,U.tZ)(eb.zx,{ref:d,text:r,variant:"nofill",onClick:o,iconLeft:(0,U.tZ)(hU.Z,{}),size:"small",disabled:a,style:(t={},(0,ti._)(t,pr.breadcrumbTextColor,a?J.TV.foregroundDefault:void 0),(0,ti._)(t,pr.breadcrumbOutline,u?hY:void 0),t),css:po.breadcrumb})}var ps=(0,z.X)({row:[J.l0.rowWithGap(8),J.l0.align.center],icon:[J.l0.height(24),J.l0.width(24),J.l0.center]});function pu(e){var t=e.onCreateFolder,n=e.onCanceled,r=(0,N._)((0,ee.useState)(""),2),i=r[0],o=r[1],a=(0,hP.Z)(n,[]);return(0,U.tZ)("tr",{children:(0,U.tZ)("td",{colSpan:3,children:(0,U.BX)(H.G,{innerRef:a,css:ps.row,children:[(0,U.tZ)(H.G,{css:ps.icon,children:(0,U.tZ)(hU.Z,{})}),(0,U.tZ)(eg.II,{value:i,autoFocus:!0,onChange:function(e){return o(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&(t(i),o("")),"Escape"===e.key&&n()},autoCapitalize:"off",autoComplete:"off",autoCorrect:"off"})]})})})}function pd(e){var t=e.contentType;return t?t.startsWith("image/")?(0,U.tZ)(hF.Z,{}):t.startsWith("video/")?(0,U.tZ)(hL.Z,{}):t.startsWith("audio/")?(0,U.tZ)(hW.Z,{}):(0,U.tZ)(hN.Z,{}):(0,U.tZ)(hN.Z,{})}function pf(e){var t,n=e.bucketExternalId,r=e.requestedDeleteItem,i=e.onRequestClose,o=e.onError,a=function(){var e=(0,N._)((0,ee.useState)(!1),2),t=e[0],n=e[1],r=(0,nZ.b9)(fq),i=(0,nZ.b9)(fJ);function o(){return(o=(0,tM._)(function(e){var t,o,a,l;return(0,tF.Jh)(this,function(c){switch(c.label){case 0:t=e.bucketExternalId,o=e.objectName,a=e.onError,n(!0),r({bucketExternalId:t,name:o,isPendingDeletion:!0}),c.label=1;case 1:return c.trys.push([1,3,,4]),[4,fF({bucketExternalId:t,objectName:o})];case 2:return c.sent(),i({bucketExternalId:t,name:o}),[3,4];case 3:return l=c.sent(),null==a||a(l),r({bucketExternalId:t,name:o,isPendingDeletion:!1}),[3,4];case 4:return n(!1),[2]}})})).apply(this,arguments)}return{loading:t,deleteObject:function(e){return o.apply(this,arguments)}}}().deleteObject,l=function(){var e=(0,N._)((0,ee.useState)(!1),2),t=e[0],n=e[1],r=(0,nZ.b9)(fq),i=(0,nZ.b9)(fJ),o=(0,nZ.Dv)(fH);function a(){return(a=(0,tM._)(function(e){var t,a,l,c,s,u;return(0,tF.Jh)(this,function(d){switch(d.label){case 0:t=e.bucketExternalId,a=e.folderPath,l=e.onError,n(!0),s=(null!==(c=o.get(t))&&void 0!==c?c:[]).filter(function(e){return e.name.startsWith(a)}),d.label=1;case 1:var f;return d.trys.push([1,3,,4]),[4,Promise.all(s.map((f=(0,tM._)(function(e){return(0,tF.Jh)(this,function(n){switch(n.label){case 0:r({bucketExternalId:t,name:e.name,isPendingDeletion:!0}),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,fF({bucketExternalId:t,objectName:e.name})];case 2:return n.sent(),i({bucketExternalId:t,name:e.name}),[3,4];case 3:return n.sent(),r({bucketExternalId:t,name:e.name,isPendingDeletion:!1}),[3,4];case 4:return[2]}})}),function(e){return f.apply(this,arguments)})))];case 2:return d.sent(),[3,4];case 3:return u=d.sent(),null==l||l(u),[3,4];case 4:return n(!1),[2]}})})).apply(this,arguments)}return{loading:t,deleteFolder:function(e){return a.apply(this,arguments)}}}().deleteFolder,c=(t=(0,tM._)(function(){return(0,tF.Jh)(this,function(e){switch(e.label){case 0:if(!(null==r?void 0:r.isFolder))return[3,2];return[4,l({bucketExternalId:n,folderPath:r.name,onError:o})];case 1:return e.sent(),i(),[2];case 2:if(!r)return[3,4];return[4,a({bucketExternalId:n,objectName:r.name,onError:o})];case 3:e.sent(),i(),e.label=4;case 4:return[2]}})}),function(){return t.apply(this,arguments)});return(0,U.tZ)(rX.u,{isOpen:!!r,onRequestClose:i,children:r?(0,U.tZ)(hG.Z,{name:r.displayName,description:'"'.concat(r.displayName,'" ').concat(r.isFolder?" and all its contents":""),entityType:r.isFolder?"folder":"file",hideModal:i,delete:c}):null})}var ph=(0,z.X)({wrapper:[J.l0.center,J.l0.colWithGap(16),J.l0.flex.grow(1),J.l0.justify.center,J.l0.borderRadius(4),{outline:h0.bodyOutline}],textWrapper:[J.l0.center,J.l0.colWithGap(4)],text:[J.l0.center],textRow:[J.l0.rowWithGap(4),J.l0.align.center],textButton:[J.l0.color.accentPrimaryStronger]});function pp(e){var t=e.onOpenCommandsTab;return(0,U.tZ)(H.G,{css:ph.wrapper,style:(0,ti._)({},hQ.bodyOutline,"1px dashed ".concat(J.TV.outlineDefault)),children:(0,U.BX)(H.G,{css:ph.textWrapper,children:[(0,U.tZ)(V.xv,{variant:"subheadBig",children:"No objects"}),(0,U.BX)(H.G,{css:ph.text,children:[(0,U.tZ)(V.xv,{children:"Drag and drop or click to upload,"}),(0,U.BX)(H.G,{css:ph.textRow,children:[(0,U.tZ)(V.xv,{children:"or"}),(0,U.tZ)(eb.zx,{variant:"underlinedOnHover",colorway:"primary",onClick:t,text:"upload using commands",css:ph.textButton})]})]})]})})}var pm=n(35040);function pv(){var e=(0,eK._)(["\n  mutation ObjectStorageSettingsDeleteBucket($input: DeleteBucketInput!) {\n    deleteBucket(input: $input) {\n      ... on Bucket {\n        id\n      }\n      ... on Error {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n"]);return pv=function(){return e},e}function pg(){var e=(0,eK._)(["\n  mutation ObjectStorageSettingsRemoveReplBucket(\n    $input: RemoveReplBucketInput!\n  ) {\n    removeReplBucket(input: $input) {\n      __typename\n      ... on Bucket {\n        ...ObjectStorageBucket\n      }\n      ... on NotFoundError {\n        message\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on UserError {\n        message\n      }\n    }\n  }\n  ","\n"]);return pg=function(){return e},e}var py={},pb=(0,eQ.Ps)(pv()),pw=(0,eQ.Ps)(pg(),fg),pZ=(0,z.X)({wrapper:[J.l0.colWithGap(32)],section:[J.l0.colWithGap(12)],subsection:[J.l0.colWithGap(6)]});function px(e){var t,n,r=e.bucketId,i=e.bucketExternalId,o=e.onSettingsUpdate,a=e.onError,l=(0,e$.Z)(),c=(0,nw.P5)({controlName:fd.Cd,default:!1,type:"boolean",logFlagToAnalytics:!1}),s=(0,N._)((0,ee.useState)(!1),2),u=s[0],d=s[1],f=function(){return d(!1)},h=(0,N._)((0,ee.useState)(!1),2),p=h[0],m=h[1],v=function(){return m(!1)},g=(0,N._)((t=(0,ep._)({},py,void 0),aQ.D(pb,t)),2),y=g[0],b=g[1].loading,w=(0,N._)((n=(0,ep._)({},py,void 0),aQ.D(pw,n)),2),Z=w[0],x=w[1].loading;return(0,U.BX)(U.HY,{children:[(0,U.BX)(H.G,{css:pZ.wrapper,children:[(0,U.tZ)(H.G,{css:pZ.section,children:(0,U.BX)(H.G,{css:pZ.subsection,children:[(0,U.tZ)(V.xv,{variant:"subheadDefault",children:"Bucket ID"}),(0,U.tZ)(s_.ZP,{children:"```\n".concat(i)})]})}),(0,U.BX)(H.G,{css:pZ.section,children:[c?(0,U.BX)(H.G,{css:pZ.subsection,children:[(0,U.tZ)(eb.zx,{text:x?"Removing Bucket from Repl...":"Remove Bucket from Repl",loading:x,css:J.l0.color.accentNegativeStronger,onClick:function(){return m(!0)}}),(0,U.tZ)(V.xv,{color:"dimmest",children:"Your Repl will no longer be able to access this bucket. No data will be deleted and you can re-add this bucket at any time."})]}):null,(0,U.BX)(H.G,{css:pZ.subsection,children:[(0,U.tZ)(eb.zx,{text:b?"Deleting":"Delete Bucket",loading:b,iconLeft:(0,U.tZ)(sE.Z,{color:J.TV.accentNegativeStronger}),css:J.l0.color.accentNegativeStronger,onClick:function(){return d(!0)}}),(0,U.tZ)(V.xv,{color:"dimmest",children:"You cannot undo this action."})]})]})]}),(0,U.tZ)(rX.u,{isOpen:p,onRequestClose:v,children:(0,U.tZ)(pm.Z,{prompt:"Remove Bucket?",desc:"This action will revoke this Repl's access to this bucket.",onCancel:v,confirmText:"Remove Bucket",icon:(0,U.tZ)(ry.Z,{}),onConfirm:function(){Z({variables:{input:{bucketId:r,replId:l}},onError:a,onCompleted:function(e){"Bucket"===e.removeReplBucket.__typename?o({type:"removeBucket",data:{bucketId:r}}):a(Error("Failed to remove bucket: "+e.removeReplBucket.message))}}),v()}})}),(0,U.tZ)(rX.u,{isOpen:u,onRequestClose:f,children:(0,U.tZ)(hG.Z,{name:"bucket",description:"this bucket and all its contents",entityType:"bucket",hideModal:f,delete:function(){return y({variables:{input:{bucketId:r}},onError:a,onCompleted:function(e){"Bucket"===e.deleteBucket.__typename?o({type:"deleteBucket",data:{bucketId:r}}):a(Error("Failed to delete bucket: "+e.deleteBucket.message))}})}})})]})}var pC=[{icon:(0,U.tZ)(fa.Z,{}),title:"Objects",value:"objects"},{icon:(0,U.tZ)(ar.Z,{}),title:"Commands",value:"commands"},{icon:(0,U.tZ)(rn.Z,{}),title:"Settings",value:"settings"}],pk=(0,z.X)({bucketSelector:[J.l0.flex.row,J.l0.flex.shrink(1),J.l0.p(16)],controls:[J.l0.align.center,J.l0.flex.row,J.l0.px(8),J.l0.py(4)],controlSeparator:[J.l0.color.outlineDefault,J.l0.px(8)],errorWrapper:[J.l0.p(16)],wrapper:[J.l0.flex.column,J.l0.flex.grow(1)],tabList:[J.l0.px(12),J.l0.py(4),J.l0.flex.grow(0)],tabPanels:[J.l0.flex.column,J.l0.px(8),J.l0.py(12),J.l0.flex.grow(1)],objectTabPanel:[J.l0.flex.column,J.l0.flex.grow(1)],panels:[J.l0.flex.column,J.l0.px(8),J.l0.py(12),J.l0.flex.grow(1)]});function pS(e){var t=e.buckets,n=e.onRequestAddBucket,r=e.onRequestCreateBucket,i=e.onSelect,o=e.selectedBucketId,a=(0,ee.useMemo)(function(){if(t&&o)return t.find(function(e){return e.id===o})},[t,o]);return a&&t?(0,U.tZ)(H.G,{children:(0,U.BX)(fc.ZE,{label:a.name,items:t,trigger:(0,U.tZ)(eb.zx,{size:"default",variant:"nofill",text:a.name,iconRight:(0,U.tZ)(tk.Z,{size:12})}),children:[t.map(function(e){return(0,U.tZ)(fc.sN,{icon:(0,U.tZ)(rZ.Z,{visibility:e.id===a.id?"visible":"hidden"}),id:e.id,label:e.name,onAction:e.id!==a.id?function(){i(e)}:void 0},e.id)}),(0,U.tZ)(fc.Z0,{}),(0,U.tZ)(fc.sN,{icon:(0,U.tZ)(nA.Z,{}),id:"create-new",label:"Create new bucket",onAction:r},"create-new"),(0,U.tZ)(fc.sN,{icon:(0,U.tZ)(fu.Z,{}),id:"add-existing",label:"Add an existing bucket",onAction:n},"add-existing")]})}):(0,U.tZ)(H.G,{children:(0,U.tZ)(eb.zx,{size:"default",variant:"nofill",text:"Loading...",iconRight:(0,U.tZ)(tk.Z,{size:12})})})}function p_(e){var t=e.onSelect,n=e.selectedView,r=(0,ee.useMemo)(function(){return pC.find(function(e){return e.value===n})},[n]);return r?(0,U.tZ)(H.G,{children:(0,U.tZ)(fc.ZE,{onAction:function(e){var n=pC.find(function(t){return t.value===e});n&&t(n.value)},label:r.title,items:pC,trigger:(0,U.tZ)(eb.zx,{size:"default",variant:"nofill",text:r.title,iconLeft:r.icon,iconRight:(0,U.tZ)(tk.Z,{size:12})}),children:function(e){return(0,U.tZ)(fc.sN,{icon:e.icon,id:e.value,label:e.title},e.value)}})}):null}var pE=X.Dy.Object({type:X.Dy.Literal("objectStorage")}),pT={Content:function(){var e,t,n,r,i,o=(0,nw.P5)({controlName:fd.Cd,default:!1,type:"boolean",logFlagToAnalytics:!1}),a=(0,N._)((0,ee.useState)(),2),l=a[0],c=a[1],s=(0,ee.useMemo)(function(){return null==l?void 0:l.map(function(e){return e.id})},[l]),u=(0,N._)((0,ee.useState)(),2),d=u[0],f=u[1],h=(0,N._)((0,ee.useState)("objects"),2),p=h[0],m=h[1],v=(0,N._)((0,ee.useState)(0),2),g=v[0],y=v[1],b=(0,N._)((0,ee.useState)(!1),2),w=b[0],Z=b[1],x=(0,ee.useCallback)(function(){return Z(!1)},[]),C=(0,ee.useCallback)(function(){return Z(!0)},[]),k=(0,N._)((0,ee.useState)(!1),2),S=k[0],_=k[1],E=(0,ee.useCallback)(function(){return _(!1)},[]),T=(0,ee.useCallback)(function(){return _(!0)},[]),R=fK({bucketExternalId:null!==(r=null==d?void 0:d.externalId)&&void 0!==r?r:""}),D=fQ(),I=D.fetchObjects,B=D.loading,G=(0,ee.useCallback)(function(e){f(e),m("objects"),I({bucketExternalId:e.externalId,skipIfLoaded:!0})},[I]),P=(0,Y.Z)().dotReplit,A=(0,ax.Z)(),L=A.showConfirm,X=A.showError,M=function(e){var t;X(e.message),tV.$e(function(n){n.setTag("object-storage-pane",!0),t&&n.setExtras(t),tV.Tb(e)})},F=(e={variables:{replId:(0,e$.Z)(),bucketsCount:10},fetchPolicy:"network-only",ssr:!1,onCompleted:function(e){if("Repl"!==e.repl.__typename){X("Failed to fetch bucket data");return}try{var t,n,r=function(e){if("Repl"!==e.__typename)throw Error("Failed to fetch bucket data");var t,n=e.buckets;if(n&&"BucketConnection"!==n.__typename)throw Error(n.message);var r=null!==(t=null==n?void 0:n.items)&&void 0!==t?t:[];if(!r.length)return{buckets:r};var i=e.defaultBucket;if(i){if("Bucket"===i.__typename)return{initialBucket:i,buckets:r};throw Error(i.message)}return{initialBucket:r[0],buckets:r}}(e.repl);t=r.buckets,n=r.initialBucket}catch(e){M(e);return}c(t),!d&&n&&(f(n),I({bucketExternalId:null==n?void 0:n.externalId,skipIfLoaded:!0}))}},t=(0,ep._)({},fv,e),e0.a(fy,t)),W=F.data,z=F.loading,j=F.error,q=F.refetch,J=(0,ee.useCallback)(function(e){c(function(t){return t?[e].concat((0,O._)(t)):[e]}),f(e),q(),I({bucketExternalId:e.externalId,isNewBucket:!0})},[I,q]),$=(0,ee.useCallback)(function(e){c(function(t){return(null!=t?t:[]).filter(function(t){return t.id!==e})}),f((null!=l?l:[]).find(function(t){return t.id!==e})),m("objects"),q()},[q,l]),K=(null==W?void 0:W.repl.__typename)==="Repl"?W.repl.authorizations.createObjectBucket:void 0,Q=(null==W?void 0:W.repl.__typename)==="Repl"?W.repl.authorizations.editObjectBucket:void 0;if(j)return(0,U.tZ)(H.G,{css:pk.errorWrapper,children:(0,U.tZ)(e6.E,{text:'Error: "'.concat(j.message,'". The issue has been logged and the Replit team will look into it.'),colorway:"negative"})});if(z&&!l)return(0,U.tZ)(eu.Z,{pane:{type:"objectStorage"},maxWidth:450,loading:!0});if(!d)return(0,U.tZ)(hB,{createBucketAuthz:K,editBucketAuthz:Q,refetchAuthzQueryData:q,onBucketAdded:(n=(0,tM._)(function(e){return(0,tF.Jh)(this,function(t){switch(t.label){case 0:return J(e),[4,P.updateDotReplit([(0,ff.pp)(e.externalId)])];case 1:return t.sent(),[2]}})}),function(e){return n.apply(this,arguments)}),onError:M});if(o){switch(p){case"objects":i=B&&void 0===R?(0,U.tZ)(c3.Z,{}):(0,U.tZ)(H.G,{css:pk.objectTabPanel,children:(0,U.tZ)(fl.Z,{children:(0,U.tZ)(h2,{bucketExternalId:d.externalId,onOpenCommandsTab:function(){y(pC.findIndex(function(e){return"commands"===e.value}))},onError:M})})});break;case"commands":i=(0,U.tZ)(H.G,{children:(0,U.tZ)(hx,{onError:M})});break;case"settings":i=(0,U.tZ)(H.G,{children:(0,U.tZ)(px,{bucketId:d.id,bucketExternalId:d.externalId,onSettingsUpdate:function(e){("deleteBucket"===e.type||"removeBucket"===e.type)&&$(e.data.bucketId),"deleteBucket"===e.type&&L("Bucket deleted successfully"),"removeBucket"===e.type&&L("Bucket removed from Repl successfully")},onError:M})})}return(0,U.BX)(U.HY,{children:[(0,U.tZ)(hu,{excludeBucketIds:null!=s?s:[],isOpen:w,onBucketAdded:function(e){x(),J(e),L("Bucket added to Repl successfully")},onError:M,onRequestClose:x}),(0,U.tZ)(f_,{isOpen:S,onBucketCreated:function(e){E(),J(e),L("Bucket created successfully")},onError:M,onRequestClose:E}),(0,U.BX)(H.G,{css:pk.controls,children:[(0,U.tZ)(pS,{buckets:l,onRequestAddBucket:C,onRequestCreateBucket:T,onSelect:G,selectedBucketId:null==d?void 0:d.id}),(0,U.tZ)(V.xv,{css:pk.controlSeparator,variant:"small",children:"/"}),(0,U.tZ)(p_,{onSelect:m,selectedView:p})]}),(0,U.tZ)(nD.R,{}),(0,U.tZ)(H.G,{css:pk.panels,children:i})]})}return(0,U.BX)(fs.mQ,{css:pk.wrapper,selectedIndex:g,onSelectionChange:function(e){return y(e)},children:[(0,U.tZ)(fs.td,{withDividers:!1,css:pk.tabList,children:pC.map(function(e){return(0,U.tZ)(fs.OK,{iconLeft:e.icon,children:e.title},e.value)})}),(0,U.BX)(fs.nP,{css:pk.tabPanels,children:[(0,U.tZ)(fs.x4,{css:pk.objectTabPanel,children:B&&void 0===R?(0,U.tZ)(c3.Z,{}):(0,U.tZ)(fl.Z,{children:(0,U.tZ)(h2,{bucketExternalId:d.externalId,onOpenCommandsTab:function(){y(pC.findIndex(function(e){return"commands"===e.value}))},onError:M})})}),(0,U.tZ)(fs.x4,{children:(0,U.tZ)(hx,{onError:M})}),(0,U.tZ)(fs.x4,{children:(0,U.tZ)(px,{bucketId:d.id,bucketExternalId:d.externalId,onSettingsUpdate:function(e){"deleteBucket"===e.type&&f(void 0)},onError:M})})]})]})},Icon:function(e){var t=e.size;return(0,U.tZ)(te.Pd.Provider,{value:{color:tt.TV.tealStrongest,size:t},children:(0,U.tZ)(fa.Z,{})})},getTitle:function(){return"Object Storage"},description:"Persistent, shared file storage which can be accessed programmatically in your Repl",category:K.hc.CloudServices,decode:function(e){return M.B4.Decode(pE,e)}},pR=n(89313),pD=n(32681),pI=n.n(pD),pB=n(71724),pG=n(93503),pP=(0,z.X)({create:[J.l0.colWithGap(8),J.l0.p(8)],pedit:{width:"100%",height:"100%"},canvas:{width:"100%",height:"100%",outline:"none",position:"absolute",top:0,left:0},upgradeButton:[J.l0.position.absolute,J.l0.top(8),J.l0.left("50%"),{transform:"translateX(-50%)"}]});function pA(e){var t=e.data,n=e.onSave,r=(0,ee.useRef)(null),i=(0,ee.useRef)(null),o=(0,Y.Z)().fs,a=(0,ax.Z)(),l=a.showError,c=a.showConfirm,s=(0,N._)((0,ee.useState)(!1),2),u=s[0],d=s[1],f=(0,cQ.Z)(function(){var e=r.current;if(!e)return null;e.width=e.offsetWidth,e.height=e.offsetHeight;var t=e.getContext("2d");t&&(t.imageSmoothingEnabled=!1)},{type:"debounce",wait:100});return(0,ee.useEffect)(function(){var e=r.current;if(e){e.width=e.offsetWidth,e.height=e.offsetHeight;var o=pI()({canvas:e,data:t}),a=function(){return n(o.save())};return o.on("change",a),o.on("save",a),o.on("export",function(){return d(!0)}),i.current=o,e.focus(),function(){o&&o.cleanUp(),i.current&&(i.current=null)}}},[t,n,r]),(0,U.BX)(U.HY,{children:[(0,U.tZ)("canvas",{css:pP.canvas,ref:function(e){r.current=e,f(e)},tabIndex:0}),(0,U.tZ)(rX.u,{isOpen:u,onRequestClose:function(){return d(!1)},children:(0,U.tZ)(pB.Z,{prompt:"Export",desc:"What name to give to the exported file?",placeholder:"filename",type:"text",onCancel:function(){return d(!1)},onConfirm:function(e){if(!i.current){d(!1);return}var t="".concat(e,".png"),n=i.current.curFrame().toPNG();o.writeFile(t,ne.Z.from(n)).then(function(e){if(e.error){l("Failed to write to file ".concat(t));return}c("Successfully exported to ".concat(t)),d(!1)})}})})]})}function pL(e){var t,n=e.activeFile,r=(0,Y.Z)().fs,i=(0,N._)((0,ee.useState)(!0),2),o=i[0],a=i[1],l=(0,N._)((0,ee.useState)(null),2),c=l[0],s=l[1],u=(0,ax.Z)().showError,d=n.endsWith(".kbmsprite");(0,ee.useEffect)(function(){var e=!1;function t(){return(t=(0,tM._)(function(){var t,i,o;return(0,tF.Jh)(this,function(l){switch(l.label){case 0:return[4,r.readFile(n)];case 1:if(t=l.sent(),a(!1),e)return[2];if(t.error)return u("failed to read ".concat(n)),[2];return o=(i=t.content.toString())&&JSON.parse(i),s(d?(0,pG.C)(o):o),[2]}})})).apply(this,arguments)}return!function(){t.apply(this,arguments)}(),function(){e=!0}},[r,n,u,d]);var f=(0,ee.useCallback)((t=(0,tM._)(function(e){return(0,tF.Jh)(this,function(t){switch(t.label){case 0:if(!d)return[3,2];return[4,(0,pG.u)(e)];case 1:e=t.sent(),t.label=2;case 2:return[4,r.writeFile(n,ne.Z.from(JSON.stringify(e)))];case 3:return t.sent().error&&u("Failed to save ".concat(n,", please try again")),[2]}})}),function(e){return t.apply(this,arguments)}),[r,n,u,d]);return o?(0,U.tZ)(q.Z,{}):c?(0,U.tZ)(pA,{data:c,onSave:f}):(0,U.tZ)(pN,{onCreate:function(e){return s(e)}})}function pN(e){var t=e.onCreate,n=(0,N._)((0,ee.useState)(""),2),r=n[0],i=n[1],o=(0,N._)((0,ee.useState)(""),2),a=o[0],l=o[1],c=Number(r),s=Number(a);return(0,U.BX)(H.G,{css:pP.create,children:[(0,U.tZ)(V.xv,{variant:"subheadDefault",multiline:!1,children:"Create a Pedit file"}),(0,U.tZ)(eg.II,{placeholder:"width",value:r,onChange:function(e){return i(e.target.value)}}),(0,U.tZ)(eg.II,{placeholder:"height",value:a,onChange:function(e){return l(e.target.value)}}),(0,U.tZ)(eb.zx,{text:"Create",disabled:!(c>0&&s>0),onClick:function(){t({width:Math.ceil(c),height:Math.ceil(s)})}})]})}var pO=X.Dy.Object({type:X.Dy.Literal("pedit"),data:X.Dy.Object({path:X.Dy.String()})}),pU={Content:function(e){var t=e.pane,n=e.options.performPaneOperation;return(0,U.tZ)(pX,{path:t.data.path,performPaneOperation:n})},Icon:function(e){var t=e.size;return(0,U.tZ)(pR.Z,{size:t})},getTitle:function(e){return(0,et.UO)(e.data.path)},category:K.hc.WorkspaceFeatures,decode:function(e){return M.B4.Decode(pO,e)}};function pX(e){var t=e.path,n=e.performPaneOperation,r=(0,$.Mp)({path:t,performPaneOperation:n});return(0,Q.L5)(function(){if(r)return{commands:r}},[r]),(0,U.BX)(U.HY,{children:[(0,U.tZ)($.HK,{path:t,performPaneOperation:n}),(0,U.tZ)($.VY,{children:(0,U.tZ)(pL,{activeFile:t})})]})}var pM=n(62667),pF=n(64771),pW=n(65559),pV=(0,z.X)({badge:[J.l0.backgroundColor.backgroundHighest,J.l0.borderRadius(4),{padding:"0 0.35em"}],container:[J.l0.p(8),J.l0.colWithGap(8)],header:[J.l0.rowWithGap(8),J.l0.align.center,J.l0.py(4),J.l0.justify.spaceBetween,J.l0.flex.grow(1),J.l0.pr(16),J.l0.height(24)],result:[J.l0.borderRadius(4),J.l0.overflow("hidden")],problems:[J.l0.px(6),J.l0.py(6)],item:[nI.gU.listItem,J.l0.reset.button,J.l0.justify.spaceBetween,J.l0.px(8),J.l0.py(4),J.l0.overflow("hidden"),J.l0.cursor.pointer,J.l0.borderRadius(4),{"&:focus-visible":[J.l0.focusRing],"&:hover, &:focus-visible":[J.l0.backgroundColor.backgroundHighest]}],itemMain:[J.l0.flex.growAndShrink(1)],itemSecondary:[J.l0.color.foregroundDimmest],flex:[J.l0.rowWithGap(8),J.l0.align.center],message:[J.l0.flex.shrink(1),J.l0.overflowX("hidden"),{textOverflow:"ellipsis",whiteSpace:"nowrap"}]});function pH(e){var t=e.isActive,n=e.performPaneOperation,r=(0,N._)((0,ee.useState)({}),2),i=r[0],o=r[1],a=(0,pW.nC)(),l=(0,Q.dr)(),c=(0,ee.useCallback)(function(){var e=!0,t=!1,n=void 0;try{for(var r,i=a()[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)!function(){var e,t=r.value;if("codeEditor"===t[1].type){var n=l(t[0]);if(n&&"codeEditor"===n.type){var i=t[1].data.path,a=null===(e=n.fetchProblems)||void 0===e?void 0:e.call(n);i&&a&&o(function(e){return(0,em._)((0,ep._)({},e),(0,ti._)({},i,a))})}}}()}catch(e){t=!0,n=e}finally{try{e||null==i.return||i.return()}finally{if(t)throw n}}},[l,a]);return((0,ee.useEffect)(function(){t&&c()},[t,c]),(0,Q.L5)(function(){return{type:"problems",updateProblems:function(e,t){o(function(n){return(0,em._)((0,ep._)({},n),(0,ti._)({},e,t))})}}},[o]),Object.values(i).some(function(e){return e.length>0}))?(0,U.tZ)(H.G,{css:pV.container,children:Object.keys(i).map(function(e){return 0===i[e].length?null:(0,U.tZ)(ew.Tg,{elevated:!0,css:pV.result,children:(0,U.tZ)(eM.Q,{chevron:"end",defaultExpanded:!0,headerContent:(0,U.BX)(H.G,{css:pV.header,children:[(0,U.BX)(H.G,{css:pV.flex,children:[(0,U.tZ)(W.Z,{path:e}),(0,U.tZ)(V.xv,{children:e})]}),(0,U.tZ)(H.G,{css:pV.badge,children:i[e].length>99?"99+":i[e].length})]}),children:(0,U.tZ)(H.G,{css:pV.problems,children:i[e].map(function(t,r){var i=t.range.start.line+1,o=t.range.start.character;return(0,U.tZ)(pF.Z,{problem:t,onClick:function(){n({operation:"open",pane:{type:"codeEditor",data:{path:e,line:i,col:o}},secondary:!0})}},"".concat(i,"-").concat(o,"-").concat(r))})})},e)},e)})}):(0,U.tZ)(eu.Z,{pane:{type:"problems"},maxWidth:450,bodyText:"No problems found in your workspace \uD83C\uDF89"})}var pz=X.Dy.Object({type:X.Dy.Literal("problems")}),pj={Content:function(e){var t=e.options,n=t.isActive,r=t.performPaneOperation;return(0,U.tZ)(pH,{isActive:n,performPaneOperation:r})},Icon:function(e){var t=e.size;return(0,U.tZ)(pM.Z,{size:t})},getTitle:function(){return"Problems"},description:"View problems in your code detected by static analysis tools like type checkers and linters",category:K.hc.WorkspaceFeatures,decode:function(e){return M.B4.Decode(pz,e)}},pq=n(18454),pJ=n(98514),pY=n(1567),p$=n(21885),pK=(0,eV.iv)([J.l0.focusRing,J.l0.display.flex,J.l0.center,J.l0.borderRadius(4),J.l0.backgroundColor.backgroundRoot,J.l0.color.foregroundDefault,J.l0.cursor.pointer,J.l0.p(4),(R={transition:"background-color 0.2s",border:"none"},(0,ti._)(R,J.wl.hover,[J.l0.backgroundColor.backgroundHigher]),(0,ti._)(R,":focus",{outline:"none"}),R)]),pQ=function(e){var t=e.onClick;return(0,U.tZ)(tU.u,{tooltip:"Search",placement:"bottom-start",children:(0,U.tZ)("button",{"aria-label":"Search",onClick:t,css:pK,children:(0,U.tZ)(fu.Z,{size:16})})})},p0=n(16642),p1=n(29574),p2=n(12666),p3=n(44629),p4=n(78371),p8=n(13502),p6=n(71049),p5=(0,nx.cn)(0),p7=(0,nx.cn)(function(e){return e(p5)<=p6.Bk?"compact":"normal"}),p9={CURSOR_SAVE:"\x1b[s",CURSOR_RESTORE:"\x1b[u",ERASE_TO_END_OF_SCREEN:"\x1b[0J",COLOR_RESET:"\x1b[0m",COLOR_BRIGHT_BLACK:"\x1b[0;90m"},me=(0,eV.iv)([J.l0.position.absolute,J.l0.left(8),J.l0.right(0),J.l0.zIndex(5)]);function mt(e){var t=e.lineNumber,n=e.paneHeight,r=e.shell,i=e.sendToShellChannel,o=e.onClose,a=(0,ee.useMemo)(function(){return null==r?void 0:r._term},[r]),l=(0,ee.useMemo)(function(){var e,t=null==a?void 0:a._core;return null!==(e=null==t?void 0:t._renderService.dimensions.css.cell)&&void 0!==e?e:{width:0,height:0}},[a]),c=(0,ee.useRef)(""),s=(0,ee.useRef)(!1),u=(0,ee.useRef)(null),d=(0,N._)((0,ee.useState)(64),2),f=d[0],h=d[1],p=(0,ee.useRef)(null),m=(0,ee.useCallback)(function(e){return h(e.height)},[h]),v=(0,iO.WR)({onCode:function(e){if(null===e){c.current="";return}c.current!==e&&(s.current&&(r.write(p9.CURSOR_RESTORE),r.write(p9.ERASE_TO_END_OF_SCREEN)),r.write(p9.CURSOR_SAVE),r.write(p9.COLOR_BRIGHT_BLACK),r.write(e.replaceAll("\n","\r\n")),r.write(p9.COLOR_RESET),s.current=!0,c.current=e)}}),g=v.sendMessage,y=v.stopMessage,b=v.getCode,w=v.loading,Z=v.completed,x=v.error,C=v.clearError,k=(0,ee.useCallback)(function(){(0,lk.j)(lk.U3.AI_INLINE_EVENT,{action:"generation_stopped",intent_type:"generate",source:"shell"}),y(),s.current&&(r.write(p9.CURSOR_RESTORE),r.write(p9.ERASE_TO_END_OF_SCREEN),r.write(p9.COLOR_RESET)),o()},[r,y,o]);(0,ee.useEffect)(function(){return r.onData(function(){y(),o()}).dispose},[r,y,o]);var S=(0,p6.U1)({id:dv()(),inputRef:p,loading:w,onSubmit:function(){I?D():((0,lk.j)(lk.U3.AI_INLINE_EVENT,{action:"message_sent",intent_type:"generate",source:"shell",message_content:_}),B())},onClose:k}),_=S.value,E=S.setValue,T=S.onKeyDown,R=S.escPressed,D=(0,ee.useCallback)(function(){var e,t=null===(e=b())||void 0===e?void 0:e.code;if(!s.current||!t){k();return}r.write(p9.CURSOR_RESTORE),r.write(p9.ERASE_TO_END_OF_SCREEN),r.write(p9.COLOR_RESET),i(t),(0,lk.j)(lk.U3.AI_INLINE_EVENT,{action:"suggestion_accepted",intent_type:"generate",source:"shell"}),o()},[r,b,o,k,i]),I=Z&&u.current===_,B=(0,ee.useCallback)(function(){u.current=_,(0,lk.j)(lk.U3.AI_INLINE_EVENT,{action:"message_sent",intent_type:"generate",source:"shell",message_content:_}),g({message:_})},[g,_]),G=l.height*(t+1)+8,P="top";G+f>n&&(P="bottom",G=n-l.height*(t+1)+4);var A=(0,iO.Un)(),L=(0,N._)((0,ee.useState)(function(){return(0,nx.MT)()}),1)[0],O=(0,nZ.b9)(p5,{store:L}),X=(0,nZ.Dv)(p7,{store:L}),M=(0,cQ.Z)(function(e){return O(e.width)});return(0,U.tZ)(H.G,{css:me,style:{top:"top"===P?G:void 0,bottom:"bottom"===P?G:void 0},children:(0,U.BX)(p6.If,{requestMeasure:m,type:"generateCode",isCodeMirrorPocket:!1,error:x,clearError:C,innerRef:M,children:[(0,U.tZ)(p6.II,{value:_,inputRef:p,onChange:function(e){return E(e.currentTarget.value)},placeholder:"Enter a prompt to generate a shell command",onKeyDown:T,autoFocus:!0}),(0,U.BX)(p6.$_,{children:[(0,U.BX)(U.HY,{children:[(0,U.tZ)(p6.Xs,{type:"generateCode"}),Z?(0,U.tZ)(F.hU,{alt:"Rerun the same prompt",onClick:function(){return B()},size:12,colorway:"grey",children:(0,U.tZ)(rr.Z,{})}):null]}),I?(0,U.BX)(U.HY,{children:[(0,U.tZ)(eb.zx,{variant:"outlined",size:"small",text:"Reject",onClick:function(){(0,lk.j)(lk.U3.AI_INLINE_EVENT,{action:"suggestion_rejected",intent_type:"generate",source:"shell"}),k()}}),(0,U.tZ)(eb.zx,{size:"small",text:"Accept",colorway:"blurple",onClick:D,dataCy:"ghostwriter-inline-accept-suggestion"})]}):(0,U.tZ)(p6.k4,{escPressed:R,connecting:!A,loading:w,disabled:!_||!_.trim(),promptPresentation:"normal"===X,onClick:function(){w?((0,lk.j)(lk.U3.AI_INLINE_EVENT,{action:"generation_stopped",intent_type:"generate",source:"shell",message_content:_}),y()):((0,lk.j)(lk.U3.AI_INLINE_EVENT,{action:"message_sent",intent_type:"generate",source:"shell",message_content:_}),B())}})]})]})})}var mn=n(75982);function mr(e){var t=e.portsOpenedByThisShell,n=e.performPaneOperation,r=e.onClose,i=(0,Y.Z)().ports,o=(0,ee.useCallback)(function(e){i.updateDotReplitPortsMapping(e,void 0)},[i]),a=(0,ee.useCallback)(function(e){i.tryExposingPortAutomatically(e)},[i]);return(0,U.tZ)(mn.ms,{configurations:t.map(function(e){return e.configuration}),openWebview:function(){n({operation:"open",secondary:!0,pane:{type:"webview",data:t.length>0?{portType:"local",port:t[0].configuration.localPort}:void 0}})},openNetworkingTool:function(){n({operation:"open",secondary:!0,pane:{type:"networking"}})},onClose:function(){null==r||r()},onDontExposePort:function(){1===t.length&&o(t[0].configuration.localPort)},onDoExposePort:function(){1===t.length&&a(t[0].configuration.localPort)}})}var mi=n(28754),mo=n(24810),ma=n(73660),ml=n(56738),mc="\x1b[200~",ms="\x1b[201~",mu=n(42310),md=(0,eV.iv)([J.l0.height("100%"),J.l0.overflow("hidden"),{"& .xterm":[J.l0.pl(8),J.l0.pt(8),J.l0.pb(4),J.l0.height("100%")]}]),mf=(0,z.X)({container:[J.l0.height("100%"),{"&:focus-within .controls":{opacity:1}}],xterm:md,xtermWithBorderRadius:[md,{"& .xterm-viewport":[J.l0.borderRadius(0,0,8,8)]}]}),mh=(0,eV.iv)([J.l0.position.absolute,J.l0.flex.row,J.l0.top(8),J.l0.right(8),J.l0.height(30),J.l0.align.center,J.l0.zIndex(8),{opacity:0}]);function mp(e){var t,n,r=e.shell,i=e.shellMetadata,o=e.sendToShellChannel,a=e.shellRef,l=e.className,c=e.openSearchAndReplace,s=e.openAIWithMessage,u=e.performPaneOperation,d=e.isGeneratePromptVisible,f=e.currentPromptLineNumber,h=e.onOpenGeneratePrompt,p=e.onCloseGeneratePrompt,m=e.searchState,v=e.setSearchState,g=(0,p1.Gn)("accessibleTerminal").preferences.accessibleTerminal,y=(0,nw.P5)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1}),b=(0,nw.P5)({controlName:"flag-ai-in-the-shell",logFlagToAnalytics:!1}),w=!y&&b,Z=(0,p2.dF)(null!==(t=null==i?void 0:i.cgroup)&&void 0!==t?t:void 0);r&&m.isSearching&&(n=(0,U.tZ)(p0.R,{searchValue:m.searchText,setSearchValue:function(e){v({isSearching:!0,searchText:e})},findPrevious:r.findPrevious,findNext:r.findNext,exit:function(){return v({isSearching:!1})}})),!r||m.isSearching||w||(n=(0,U.tZ)(pQ,{onClick:function(){return v({isSearching:!1})}}));var x=(0,aX.T3)(),C=(0,p4.av)().onContextMenu,k=(0,p8.j)({xterm:r,isOutputsTerminal:!1,openAIWithMessage:s,openShellSearch:function(e){v({isSearching:!0,searchText:e})},openSearchAndReplace:c,openGeneratePrompt:h});(0,ee.useEffect)(function(){null==r||r.fit()},[r,Z]);var S=(0,N._)((0,ee.useState)(0),2),_=S[0],E=S[1],T=(0,cQ.Z)(function(e){E(e.height)},{type:"throttle",wait:200});return(0,U.BX)(H.G,{className:l,innerRef:T,css:mf.container,onKeyDown:function(e){"f"===e.key&&(0,pY.jh)(e)&&(v({isSearching:!0,searchText:""}),e.preventDefault())},children:[!g&&(0,U.tZ)(p3.T,{children:'Enable "Accessible Terminal" in Workspace Settings to use a screen reader with the shell.'}),(0,U.BX)(H.G,{css:[J.l0.coverContainer,J.l0.flex.column],onClick:function(){d&&(p(),null==r||r.focus())},children:[(0,U.tZ)(H.G,{css:[x?mf.xterm:mf.xtermWithBorderRadius,J.l0.flex.growAndShrink(1),w&&d?{pointerEvents:"none",filter:"opacity(0.75)"}:null],innerRef:a,onContextMenu:function(e){return C(e,{command:k})}}),(0,U.tZ)(mr,{portsOpenedByThisShell:Z,performPaneOperation:u,onClose:function(){null==r||r.focus(),null==r||r.fit()}})]}),w&&r&&d?(0,U.tZ)(mt,{lineNumber:f,paneHeight:_,shell:r,sendToShellChannel:o,onClose:function(){p(),r.focus()}}):null,r?(0,U.BX)(H.G,{className:"controls",css:mh,children:[n,w?null:(0,U.tZ)(p$.Z,{onClick:r.clear})]}):null,r?null:(0,U.tZ)("code",{css:[J.l0.color.foregroundDimmest,J.l0.coverContainer,J.l0.p(8),J.l0.font.code],children:"Loading..."})]})}var mm=n(31417),mv=n(40703),mg=n(92943),my=n(67827),mb=(0,eV.iv)([J.l0.position.relative,J.l0.height("100%")]),mw=new TextEncoder;function mZ(e){var t,n,r,i,o=e.shellId,a=e.paneId,l=e.performPaneOperation,c=e.emitPaneMetrics,s=e.isActive,u=e.currentUser,d=e.onExit,f=(0,nw.P5)({controlName:"flag-pid2-shell-muxed",logFlagToAnalytics:!1}),h=(0,mg.Z)(),p=(0,Y.Z)().fs,m=(0,tb.Z)(o),v=(0,ee.useRef)(!1),g=(0,ee.useRef)(null),y=(0,N._)((0,ee.useState)("loading"),2),b=y[0],w=y[1],Z=(0,N._)((0,ee.useState)(void 0),2),x=Z[0],C=Z[1],k=(0,N._)((0,ee.useState)(0),2),S=k[0],_=k[1],E=(0,N._)((0,ee.useState)(!1),2),T=E[0],R=E[1],D=(0,ee.useRef)(!1),I=(0,tb.Z)(b),B=u.id,G=(0,ee.useCallback)(function(e){l({operation:"open",secondary:!0,pane:{type:(0,K.Dp)(e),data:e}})},[l]),P=(0,ee.useCallback)(function(e,t){l({operation:"open",secondary:!0,pane:{type:"webview",data:{portType:"local",path:e,port:t}}})},[l]),A=(0,ee.useCallback)(function(e){l({operation:"open",secondary:!0,pane:{type:"searchReplace",data:{initialQuery:e}}})},[l]),L=(0,iO.bD)({onSession:function(e){l({operation:"open",secondary:!0,pane:{type:"ghostwriterChat",data:{sessionId:e}}})}}).sendMessage,O=(0,N._)((0,iO.Ni)(),1)[0],X=(0,ee.useCallback)((t=(0,tM._)(function(e){return(0,tF.Jh)(this,function(t){return(0,lk.j)(lk.U3.AI_CHAT_EVENT,{action:"message_sent",intent_type:"explain",model:O,user_model_selection:O,message_content:e,message_source:"shell"}),L({kind:"message",message:e,intent:iO.$h.EXPLAIN,model:"advanced"===O?iO.BY.ADVANCED:iO.BY.BASIC}),[2]})}),function(e){return t.apply(this,arguments)}),[O,L]),M=(0,ma.K)(),F=(0,ee.useRef)(null),W=(0,ee.useRef)(""),V=(0,mu.bW)({onFTCSState:function(e){var t=e.state;t===mu.qj.CommandExecuted&&(D.current=!0),t===mu.qj.CommandFinished&&(D.current=!1),F.current=t},onOpenGeneratePrompt:function(){D.current||R(!0)},onUpdateCurrentPromptLineNumber:_}),z=(0,ee.useCallback)(function(e,t){if(t.startsWith("A")){var n=t.replace(/^A;/,"");M("user:shell:exec",{command:n}),(0,lk.j)(lk.U3.SHELL_COMMAND_EVALED,{context:n,replId:null==h?void 0:h.id,api:"pid2",pwd:W.current})}if(t.startsWith("B")){var r=t.replace(/^B;/,"");W.current=r}},[M,h,W]),j=(0,N._)((0,ml.Z)({openFile:G,listFiles:p.listFiles,openWebview:P,onInBandOSCMessages:(i={},(0,ti._)(i,mu.Ch,V),(0,ti._)(i,82,z),i),performPaneOperation:l,emitPaneMetrics:c}),2),q=j[0],J=j[1],$=(0,ee.useId)(),et="scope-shell-".concat($);(0,iz.ow)(et,s),(0,iH.Il)(function(){return[mu.CH.id,{run:function(){D.current||R(!0)},scope:et,bubble:!1}]},[R]),(0,Q.Wk)(function(){return q},[q]);var en=(0,my.U)(function(e){var t;return t=(0,tM._)(function(t){return(0,tF.Jh)(this,function(n){return e.shellExec.resize.rpc({id:m.current,userId:B,processViewId:a,size:t}),[2]})}),function(e){return t.apply(this,arguments)}},[m,B,a]);(0,mv.C)((n=(0,tM._)(function(e,t){var n,r,i,o,l,c,s,u,d,f,h,p,v;return(0,tF.Jh)(this,function(y){switch(y.label){case 0:if(n=t.addCleanup,!q)return[2];return[4,e.shellExec.connect.stream({id:m.current,userId:B,processViewId:a})];case 1:i=(r=N._.apply(void 0,[y.sent(),3]))[0],o=r[1],l=r[2],n(l),c=q.getSize(),null==en||en(c),g.current=i,s=!1,u=!1,y.label=2;case 2:y.trys.push([2,7,8,13]),f=(0,mm._)(o),y.label=3;case 3:return[4,f.next()];case 4:if(!(s=!(h=y.sent()).done))return[3,6];if(!(p=h.value).ok){if("UNEXPECTED_DISCONNECT"===p.payload.code)return q.clear(),[3,6];if("NO_PROCESS_MATCHING_ID"===p.payload.code||"PROCESS_IS_NOT_RUNNING"===p.payload.code)return[3,6];throw Error("[".concat(p.payload.code,"]: ").concat(p.payload.message))}"output"===p.payload.$kind&&q.write(p.payload.output),y.label=5;case 5:return s=!1,[3,3];case 6:return[3,13];case 7:return v=y.sent(),u=!0,d=v,[3,13];case 8:if(y.trys.push([8,,11,12]),!(s&&null!=f.return))return[3,10];return[4,f.return()];case 9:y.sent(),y.label=10;case 10:return[3,12];case 11:if(u)throw d;return[7];case 12:return[7];case 13:return[2]}})}),function(e,t){return n.apply(this,arguments)}),[q,m,en,B,a]),(0,mv.C)((r=(0,tM._)(function(e,t){var n,r,i,o,a,l,c,s,u,h,p,g,y;return(0,tF.Jh)(this,function(b){switch(b.label){case 0:return n=t.addCleanup,[4,e.shellExec.monitor.subscribe({id:m.current})];case 1:i=(r=N._.apply(void 0,[b.sent(),2]))[0],o=r[1],n(o),a=!1,l=!1,b.label=2;case 2:b.trys.push([2,10,11,16]),s=(0,mm._)(i),b.label=3;case 3:return[4,s.next()];case 4:if(!(a=!(u=b.sent()).done))return[3,9];if(!(h=u.value).ok){if("UNEXPECTED_DISCONNECT"===h.payload.code)return[3,9];if("NO_PROCESS_MATCHING_ID"===h.payload.code)return[3,8];throw Error("[".concat(h.payload.code,"]: ").concat(h.payload.message))}if(w("Loading"!==(p=h.payload).state?"ready":"loading"),"NotStarted"!==p.state&&p.cgroupPath&&C({cgroup:p.cgroupPath}),!("Finished"===p.state&&!1===v.current))return[3,8];if(v.current=!0,o(),f)return[3,6];return d(),[4,e.shellExec.cleanStoredState.rpc({id:m.current})];case 5:b.sent(),b.label=6;case 6:if(!(f&&1===Object.keys(null!==(g=p.userIdsToProcessViewIds)&&void 0!==g?g:{}).length))return[3,8];return d(),[4,e.shellExec.cleanStoredState.rpc({id:m.current})];case 7:b.sent(),b.label=8;case 8:return a=!1,[3,3];case 9:return[3,16];case 10:return y=b.sent(),l=!0,c=y,[3,16];case 11:if(b.trys.push([11,,14,15]),!(a&&null!=s.return))return[3,13];return[4,s.return()];case 12:b.sent(),b.label=13;case 13:return[3,15];case 14:if(l)throw c;return[7];case 15:return[7];case 16:return[2]}})}),function(e,t){return r.apply(this,arguments)}),[m,d,f]);var er=(0,my.U)(function(e){var t;return t=(0,tM._)(function(t){var n;return(0,tF.Jh)(this,function(r){switch(r.label){case 0:return n=t.id,[4,e.shellExec.disconnect.rpc({id:n,processViewId:a,userId:B})];case 1:if(r.sent(),!(!f&&"ready"===I.current))return[3,4];return v.current=!0,[4,e.shellExec.kill.rpc({id:n})];case 2:return r.sent(),[4,e.shellExec.cleanStoredState.rpc({id:n})];case 3:r.sent(),r.label=4;case 4:return[2]}})}),function(e){return t.apply(this,arguments)}},[f,I,a,B]),ei=(0,tb.Z)(er);(0,ee.useEffect)(function(){function e(){return(e=(0,tM._)(function(){var e;return(0,tF.Jh)(this,function(t){switch(t.label){case 0:return[4,null===(e=ei.current)||void 0===e?void 0:e.call(ei,{id:m.current})];case 1:return t.sent(),[2]}})})).apply(this,arguments)}return function(){!function(){e.apply(this,arguments)}()}},[ei,m]),(0,ee.useEffect)(function(){if(q){var e=q.onData(function(e){var t,n=mw.encode(e);null===(t=g.current)||void 0===t||t.push({$kind:"stdin",stdin:n})}),t=q.onResize(function(e){null==en||en(e)});return function(){e.dispose(),t.dispose()}}},[q,a,en]),(0,ee.useEffect)(function(){return function(){g.current=null}},[]);var eo=(0,ee.useCallback)(function(e){if(!g.current)return!1;var t=mw.encode(e);return g.current.push({$kind:"stdin",stdin:t}),!0},[]);(0,mo.Z)({sendInput:eo,paste:function(e){return!!q&&(q.paste(e),!0)}});var ea=(0,N._)((0,ee.useState)({isSearching:!1}),2),el=ea[0],ec=ea[1],es=(0,ee.useMemo)(function(){return[{match:se.pl,data:{type:"action",label:"Clear Shell",icon:(0,U.tZ)(sE.Z,{}),run:function(){return null==q?void 0:q.clear()}}},{match:se.pl,data:{type:"action",label:"Find in Shell",icon:(0,U.tZ)(fu.Z,{}),run:function(){var e;ec({isSearching:!0,searchText:null!==(e=null==q?void 0:q._term.getSelection())&&void 0!==e?e:""})}}}]},[q]);return(0,Q.L5)(function(){return{commands:es,type:"shell"}},[es]),(0,U.tZ)(H.G,{css:mb,children:(0,U.tZ)(mp,{shell:q,shellMetadata:x,shellRef:J,performPaneOperation:l,currentPromptLineNumber:S,isGeneratePromptVisible:T,sendToShellChannel:eo,openSearchAndReplace:A,openAIWithMessage:X,onOpenGeneratePrompt:function(){D.current||((0,lk.j)(lk.U3.AI_SHELL_CONTEXT_MENU_GENERATE_CLICKED),R(!0))},onCloseGeneratePrompt:function(){return R(!1)},searchState:el,setSearchState:ec})})}var mx=n(28670),mC=n(93632),mk=n(6829),mS=n(64888),m_=n(53941),mE=(0,z.X)({wrapper:[J.l0.height("100%"),J.l0.flex.column],headerWrapper:[J.l0.flex.growAndShrink(0),J.l0.align.center,J.l0.justify.spaceBetween,J.l0.rowWithGap(4),J.l0.px(4),J.l0.border({direction:"bottom",color:J.TV.outlineDimmest}),J.l0.height(28)],headerGroupLeft:[J.l0.rowWithGap(4),J.l0.align.center,J.l0.flex.grow(1),J.l0.flex.shrink(1)],headerGroupRight:[J.l0.rowWithGap(4),J.l0.align.center,J.l0.flex.shrink(0)],failureWrapper:[J.l0.p(8),J.l0.color.accentNegativeStronger],avatarWrapper:[J.l0.flex.growAndShrink(0),J.l0.rowWithGap(4),J.l0.align.center],terminalWrapper:[J.l0.height("100%"),J.l0.flex.growAndShrink(1)],shellListButton:[J.l0.viewStyle,J.l0.reset.button,J.l0.p(2),J.l0.height(22),J.l0.rowWithGap(4),J.l0.width("100%"),J.l0.maxWidth(600),J.l0.align.center,nI.gU.nofill,{transitionProperty:"background-color, box-shadow, opacity",opacity:.8}],shellListButtonText:[J.l0.font.code,J.l0.flex.shrink(1),{fontSize:J.TV.fontSizeSmall,whiteSpace:"nowrap",overflow:"hidden"}],shellListItem:[J.l0.display.flex,J.l0.borderRadius(),J.l0.px(8),J.l0.py(2),J.l0.align.center,J.l0.rowWithGap(4),J.l0.color.foregroundDefault,J.l0.cursor.pointer,J.l0.maxWidth(600),{transitionProperty:"background-color, box-shadow",backgroundColor:"transparent",borderWidth:1,borderStyle:"solid",borderColor:"transparent",outline:"2px solid ".concat(J.TV.accentPrimaryDefault),outlineOffset:"-2px",outlineColor:"transparent"},{"&[data-hovered],&[data-focused]":{backgroundColor:nI.vb.interactiveBackground},"&[data-selected]":{backgroundColor:nI.vb.interactiveBackgroundActive},"&[aria-disabled]":{color:J.TV.foregroundDimmest,cursor:"not-allowed"}}],shellListItemText:[J.l0.width("100%"),{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}]});function mT(e){if("Running"!==e.state)return"";var t=e.cwd,n=e.command,r="";return t&&(r+=t.replace(/^\/home\/runner/,"~")),n&&(t&&(r+=": "),r+=n),r}function mR(e){var t,n=(0,nw.P5)({controlName:"flag-pid2-shell-muxed",logFlagToAnalytics:!1}),r=(0,mk.x)(),i=(0,N._)((0,ee.useState)({state:"loading"}),2),o=i[0],a=i[1],l=(0,tb.Z)(o),c=(0,ee.useRef)(!1),s=(0,N._)((0,ee.useState)(null),2),u=s[0],d=s[1],f=(0,ee.useRef)(!1),h=(0,my.U)(function(e){var t;return t=(0,tM._)(function(t){var n;return(0,tF.Jh)(this,function(r){switch(r.label){case 0:if(f.current)return[2];return f.current=!0,[4,e.shellExec.spawn.rpc((0,ep._)({cmd:"bash",cwd:null==t?void 0:t.cwd},(null==t?void 0:t.initialCmd)?{initialCmd:t.initialCmd}:void 0))];case 1:return(n=r.sent()).ok?(a({state:"connected",id:n.payload.id}),c.current=!0):(tV.$e(function(e){e.setTag("service","pid2-shell"),tV.Tb(n.payload)}),a({state:"errored"})),f.current=!1,[2]}})}),function(e){return t.apply(this,arguments)}},[]);(0,mv.C)((t=(0,tM._)(function(t,r){var i,o,s,u,f,p,m,v,g,y,b,w;return(0,tF.Jh)(this,function(Z){switch(Z.label){case 0:if(i=r.addCleanup,!h)return[2];return[4,t.shellExec.monitorAll.subscribe({})];case 1:s=(o=N._.apply(void 0,[Z.sent(),2]))[0],u=o[1],i(u),f=!1,p=!1,Z.label=2;case 2:Z.trys.push([2,7,8,13]),v=function(){var t=y.value;if(!t.ok){if("UNEXPECTED_DISCONNECT"===t.payload.code)return"break";throw Error("[".concat(t.payload.code,"]: ").concat(t.payload.message))}var r=t.payload.processes;if(d(r),!n&&"exiting"===l.current.state)return{v:void 0};if("connected"===l.current.state){var i=l.current.id;r.find(function(e){return e.id===i})||h()}if(n||"loading"!==l.current.state||h({cwd:e.initialPwd,initialCmd:e.initialCmd}),n&&"connected"!==l.current.state){if(!1===c.current&&(void 0!==e.initialPwd||void 0!==e.initialCmd))return h({cwd:e.initialPwd,initialCmd:e.initialCmd}),{v:void 0};var o=r.filter(function(e){var t;return"NotStarted"!==e.state&&0===Object.keys(null!==(t=e.userIdsToProcessViewIds)&&void 0!==t?t:{}).length});0===o.length?h():a({state:"connected",id:o[0].id})}},g=(0,mm._)(s),Z.label=3;case 3:return[4,g.next()];case 4:if(!(f=!(y=Z.sent()).done))return[3,6];if(b=v(),"object"===(0,hf._)(b))return[2,b.v];if("break"===b)return[3,6];Z.label=5;case 5:return f=!1,[3,3];case 6:return[3,13];case 7:return w=Z.sent(),p=!0,m=w,[3,13];case 8:if(Z.trys.push([8,,11,12]),!(f&&null!=g.return))return[3,10];return[4,g.return()];case 9:Z.sent(),Z.label=10;case 10:return[3,12];case 11:if(p)throw m;return[7];case 12:return[7];case 13:return[2]}})}),function(e,n){return t.apply(this,arguments)}),[n,l,h,e.initialPwd,e.initialCmd]);var p=(0,ee.useMemo)(function(){var e;if("connected"===o.state)return null!==(e=null==u?void 0:u.find(function(e){return e.id===o.id}))&&void 0!==e?e:void 0},[u,o]),m=(0,ee.useCallback)(function(){a({state:"exiting"}),n||e.performPaneOperation({operation:"remove",pane:{id:e.paneId}})},[n,e]),v=(0,my.U)(function(e){return(0,tM._)(function(){var t;return(0,tF.Jh)(this,function(n){switch(n.label){case 0:if(!(t=null==p?void 0:p.id))return[3,3];return[4,e.shellExec.kill.rpc({id:t})];case 1:return n.sent(),[4,e.shellExec.cleanStoredState.rpc({id:t})];case 2:n.sent(),n.label=3;case 3:return[2]}})})},[null==p?void 0:p.id]);return(0,U.BX)(H.G,{css:mE.wrapper,children:[n?(0,U.BX)(H.G,{css:mE.headerWrapper,children:[(0,U.tZ)(H.G,{css:mE.headerGroupLeft,children:u&&u.length>0?(0,U.tZ)(fc.ZE,{onAction:function(e){a({state:"connected",id:e})},trigger:(0,U.BX)(he.z,{css:mE.shellListButton,children:[(0,U.tZ)(tk.Z,{size:12}),(0,U.tZ)(H.G,{css:mE.shellListButtonText,children:p?mT(p):"Shells"}),(0,U.tZ)(mD,{userIdsToProcessViewIds:p&&"NotStarted"!==p.state?p.userIdsToProcessViewIds:void 0})]}),items:u,children:function(e){return(0,U.BX)(mS.sN,{id:e.id,css:mE.shellListItem,children:[(0,U.tZ)(V.xv,{css:mE.shellListItemText,children:mT(e)}),(0,U.tZ)(mD,{userIdsToProcessViewIds:e&&"NotStarted"!==e.state?e.userIdsToProcessViewIds:void 0})]})}}):null}),(0,U.BX)(H.G,{css:mE.headerGroupRight,children:[(0,U.tZ)(F.hU,{alt:"New Shell",onClick:function(){null==h||h()},children:(0,U.tZ)(nA.Z,{color:J.TV.foregroundDimmest})}),(0,U.tZ)(F.hU,{alt:"Kill Shell",disabled:void 0===p,onClick:function(){null==v||v()},children:(0,U.tZ)(m_.Z,{color:J.TV.foregroundDimmest})}),p&&"Running"===p.state&&!1===p.isHealthy?(0,U.tZ)(tU.u,{tooltip:"The nix environment failed to build. Check if your replit.nix is configured properly. For more information look into /run/replit/env/error.",children:(0,U.tZ)(rg.Z,{color:J.TV.accentNegativeDefault})}):null]})]}):null,(0,U.BX)(H.G,{css:mE.terminalWrapper,children:["loading"===o.state?(0,U.tZ)(mC.Z,{}):null,r&&"connected"===o.state?(0,U.tZ)(mZ,(0,em._)((0,ep._)({},e),{shellId:o.id,currentUser:r,onExit:m}),o.id):null,"errored"===o.state?(0,U.tZ)(H.G,{css:mE.failureWrapper,children:"Failed to load the Shell."}):null]})]})}function mD(e){var t=e.userIdsToProcessViewIds,n=(0,ed.aG)(),r=(0,ee.useMemo)(function(){var e;return null!==(e=Object.keys(null!=t?t:{}).map(function(e){return parseInt(e,10)}).map(function(e){return n.find(function(t){return t.id===e})}).filter(Boolean))&&void 0!==e?e:[]},[t,n]);return 0===r.length?null:(0,U.tZ)(H.G,{css:mE.avatarWrapper,children:r.map(function(e){return(0,U.tZ)(mx.Z,{user:e,size:16},e.id)})})}var mI=n(37475),mB=X.Dy.Object({type:X.Dy.Literal("shell"),data:X.Dy.Optional(X.Dy.Object({initialPwd:X.Dy.Optional(X.Dy.String()),initialCmd:X.Dy.Optional(X.Dy.String())}))}),mG={Content:function(e){var t,n,r,i=e.pane,o=e.options,a=(0,mI.iM)(),l=(0,nw.P5)({controlName:"flag-pid2-shell-muxed",logFlagToAnalytics:!1}),c=(0,nw.P5)({controlName:"flag-pid2-shell",logFlagToAnalytics:!1});return a&&(l||c)?(0,U.tZ)(mR,{paneId:o.paneId,isActive:o.isActive,initialPwd:null===(n=i.data)||void 0===n?void 0:n.initialPwd,initialCmd:null===(r=i.data)||void 0===r?void 0:r.initialCmd,performPaneOperation:o.performPaneOperation,emitPaneMetrics:o.emitPaneMetrics}):(0,U.tZ)(mP,{isActive:o.isActive,initialPwd:null===(t=i.data)||void 0===t?void 0:t.initialPwd,performPaneOperation:o.performPaneOperation,emitPaneMetrics:o.emitPaneMetrics})},Icon:function(e){var t=e.size;return(0,U.tZ)(te.Pd.Provider,{value:{color:tt.TV.blueStrongest,size:t},children:(0,U.tZ)(pJ.Z,{})})},getTitle:function(){return"Shell"},description:"Directly access your Repl through a command line interface (CLI)",category:K.hc.WorkspaceFeatures,decode:function(e){return M.B4.Decode(mB,e)}};function mP(e){var t,n,r,i,o,a,l,c,s,u,d,f,h,p,m,v,g,y,b,w,Z,x,C,k,S,_,E,T,R=e.isActive,D=e.initialPwd,I=e.performPaneOperation,B=e.emitPaneMetrics,G=(0,Y.Z)(),P=G.container,A=G.fs,L=(0,N._)((0,ee.useState)(!1),2),O=L[0],X=L[1],M=(0,N._)((0,ee.useState)(void 0),2),F=M[0],W=M[1],V=(0,ee.useCallback)(function(e){I({operation:"open",secondary:!0,pane:{type:(0,K.Dp)(e),data:e}})},[I]),H=(0,ee.useCallback)(function(e){I({operation:"open",secondary:!0,pane:{type:"searchReplace",data:{initialQuery:e}}})},[I]),z=(0,iO.bD)({onSession:function(e){I({operation:"open",secondary:!0,pane:{type:"ghostwriterChat",data:{sessionId:e}}})}}).sendMessage,j=(0,N._)((0,iO.Ni)(),1)[0],q=(0,ee.useCallback)((t=(0,tM._)(function(e){return(0,tF.Jh)(this,function(t){return(0,lk.j)(lk.U3.AI_CHAT_EVENT,{action:"message_sent",intent_type:"explain",model:j,user_model_selection:j,message_content:e,message_source:"shell"}),z({kind:"message",message:e,intent:iO.$h.EXPLAIN,model:"advanced"===j?iO.BY.ADVANCED:iO.BY.BASIC}),[2]})}),function(e){return t.apply(this,arguments)}),[j,z]),J=(0,ee.useCallback)(function(e,t){I({operation:"open",secondary:!0,pane:{type:"webview",data:{portType:"local",path:e,port:t}}})},[I]),$=(0,N._)((0,ee.useState)(0),2),et=$[0],en=$[1],er=(0,N._)((0,ee.useState)(!1),2),ei=er[0],eo=er[1],ea=(0,N._)((r=(n={container:P,initialPwd:D,onOutput:(0,ee.useCallback)(function(){X(!0)},[X]),onShellMetadata:W,openFile:V,performPaneOperation:I,emitPaneMetrics:B,listFiles:A.listFiles,openWebview:J,onOpenGeneratePrompt:function(){(0,lk.j)(lk.U3.AI_INLINE_EVENT,{action:"inline_textbox_opened",intent_type:"generate",source:"shell",message_content:null}),eo(!0)},onUpdateCurrentPromptLineNumber:function(e){en(e)}}).onShellKey,i=n.onOutput,o=n.onShellMetadata,a=n.container,l=n.initialPwd,c=n.openFile,s=n.performPaneOperation,u=n.emitPaneMetrics,d=n.listFiles,f=n.openWebview,h=n.onOpenGeneratePrompt,p=n.onUpdateCurrentPromptLineNumber,m=(0,mu.bW)({onOpenGeneratePrompt:h,onUpdateCurrentPromptLineNumber:p}),g=(v=(0,N._)((0,ml.Z)({openFile:c,listFiles:d,openWebview:f,onInBandOSCMessages:(0,ti._)({},mu.Ch,m),performPaneOperation:s,emitPaneMetrics:u}),2))[0],y=v[1],w=(b=(0,N._)((0,ee.useState)(null),2))[0],Z=b[1],x=(0,tb.Z)(o),(0,ee.useEffect)(function(){return a.openChannel({service:"shell"},function(e){var t=e.channel;return Z(t),t.onCommand(function(e){if(e.shellMetadata){var t;null===(t=x.current)||void 0===t||t.call(x,e.shellMetadata)}}),function(){Z(null)}})},[a,x]),C=(0,ma.K)({channelId:null==w?void 0:w.id}),k=(0,ee.useRef)(!1),S="",_="",E="",T=(0,ee.useCallback)(function(e){if(!w||!g)return!1;var t=a.client();if(!w||"open"!==w.status||t.getConnectionState()!==mi.em.CONNECTED)return!1;var n=e.startsWith(mc)&&e.endsWith(ms)?e.slice(mc.length,e.length-ms.length):e;return w.send({input:n}),!0},[g,w,a]),(0,mo.Z)({sendInput:T,paste:function(e){return!!g&&(g.paste(e),!0)}}),(0,ee.useEffect)(function(){if(w&&g){var e=g.onKey(function(e){var t=e.key,n=e.domEvent;if("\r"===t){var i=_;_.endsWith(S)&&S.length>0&&(i=_.slice(0,-S.length)),C("user:shell:output:clean",{output:i,command:E}),C("user:shell:exec",{command:S}),C("user:shell:output",{output:_}),E=S,S="",_=""}else S+=t;r&&r(n)}),t=a.client(),n=g.onData(function(e){T(e)});w.onCommand(function(e){e.hint?g.write("\x1b[0m\x1b[33m".concat(e.hint.text,"\x1b[0m\r\n")):e.output&&(g.write(e.output),null==i||i(e.output),_+=e.output)});var o=function(){w&&"open"===w.status&&t.getConnectionState()===mi.em.CONNECTED&&w.send({resizeTerm:g.getSize()})};if(l&&!k.current){var c=l.replace(/"/g,'\\"');w.send({input:'cd "'.concat(c,'"\n')}),k.current=!0}var s=g.onResize(o);return o(),function(){e.dispose(),n.dispose(),s.dispose()}}},[w,g,r,i,o,a,T,l]),[g,y,T]),3),el=ea[0],ec=ea[1],es=ea[2],eu=(0,ee.useMemo)(function(){return[{type:"action",label:"Clear Shell",icon:(0,U.tZ)(sE.Z,{}),run:function(){return null==el?void 0:el.clear()}},{type:"action",label:"Find in Shell",icon:(0,U.tZ)(fu.Z,{}),run:function(){var e;em({isSearching:!0,searchText:null!==(e=null==el?void 0:el._term.getSelection())&&void 0!==e?e:""})}}]},[el]);(0,Q.Wk)(function(){return el},[el]),(0,Q.L5)(function(){if(el&&O)return{actions:eu,type:"shell",exec:function(e){es(e+"\n")}}},[el,es,O,eu]);var ed=(0,ee.useId)(),ef="scope-shell-".concat(ed);(0,iz.ow)(ef,R),(0,iH.Il)(function(){return[mu.CH.id,{run:function(){(0,lk.j)(lk.U3.AI_INLINE_EVENT,{action:"inline_textbox_opened",intent_type:"generate",source:"shell",message_content:null}),eo(!0)},scope:ef,bubble:!1}]},[eo]);var eh=(0,N._)((0,ee.useState)({isSearching:!1}),2),ep=eh[0],em=eh[1];return(0,U.tZ)(mp,{shell:el,shellMetadata:F,sendToShellChannel:es,shellRef:ec,performPaneOperation:I,openSearchAndReplace:H,openAIWithMessage:q,currentPromptLineNumber:et,isGeneratePromptVisible:ei,onOpenGeneratePrompt:function(){(0,lk.j)(lk.U3.AI_INLINE_EVENT,{action:"inline_textbox_opened",intent_type:"generate",source:"shell"}),eo(!0)},onCloseGeneratePrompt:function(){return eo(!1)},searchState:ep,setSearchState:em})}var mA=n(73950),mL=(0,z.X)({container:[J.l0.p(8),K.F3]}),mN=X.Dy.Object({type:X.Dy.Literal("unitTests")}),mO={Content:function(e){var t=e.options,n=(0,pW.nC)(),r=(0,Q.dr)();function i(){var e=n().find(function(e){var t=(0,N._)(e,2);return"runnerOutput"===(t[0],t[1].type)});if(e)return e[0]}return(0,U.tZ)(H.G,{css:mL.container,children:(0,U.tZ)(mA.Z,{getRunnerOutput:function(){var e=i();if(e||t.performPaneOperation({operation:"open",secondary:!0,pane:{type:"runnerOutput"}}),e=i()){var n=r(e);if((null==n?void 0:n.type)==="runnerOutput")return n}}})})},Icon:function(e){var t=e.size;return(0,U.tZ)(te.Pd.Provider,{value:{color:J.TV.greenStrongest,size:t},children:(0,U.tZ)(rZ.Z,{})})},getTitle:function(){return"Unit Tests"},description:"Write and run code-driven tests to verify expected behavior",category:K.hc.WorkspaceFeatures,decode:function(e){return M.B4.Decode(mN,e)}},mU=n(47),mX=n(77537),mM=n(57997),mF=(0,z.X)({toolButton:[J.l0.display.inlineBlock],actionContent:[J.l0.width(450),J.l0.maxWidth("100%"),J.l0.colWithGap(16)],diagnosisContent:[J.l0.p(8),J.l0.colWithGap(8)]});function mW(e){var t=e.vncUrl,n=e.onRetry,r=e.openNetworkingTool,i=null!=(0,p2.vU)(mM.Y8),o=(0,U.tZ)(eb.zx,{iconLeft:(0,U.tZ)(rr.Z,{}),text:"Refresh connection",onClick:n});return i?(0,U.tZ)(eu.Z,{pane:{type:"vnc"},action:(0,U.BX)(H.G,{css:mF.actionContent,children:[(0,U.tZ)(e6.E,{colorway:"warning",text:(0,U.BX)(U.HY,{children:["There was an error connecting to the server",t?(0,U.BX)(U.HY,{children:[" at ",(0,U.tZ)("br",{}),t]}):""]})}),t?(0,U.tZ)(eM.Q,{headerContent:"Diagnosis",children:(0,U.tZ)(H.G,{css:mF.diagnosisContent,children:(0,U.tZ)(s_.ZP,{children:"If you see a connection error, it's possible that your internet service provider (ISP) has security settings blocking the URL shown above.\n\nPlease contact your ISP and ask them to unblock the URL. Here are the support links for common ISPs:\n\n- [Xfinity](https://www.xfinity.com/support/articles/report-blocked-website)\n- [Spectrum.net](https://www.spectrum.net/support/forms/unblock_site)\n      "})})}):null,o]})}):(0,U.tZ)(eu.Z,{pane:{type:"vnc"},bodyText:(0,U.BX)(V.xv,{multiline:!0,children:["No VNC server is currently running with compatible ports available to view. Try running your Repl, and check the"," ",(0,U.tZ)(eb.zx,{css:mF.toolButton,text:"Networking tool",iconLeft:(0,U.tZ)(dJ.Z,{}),size:"small",onClick:r})," ","to ensure ports are being forwarded correctly."]}),action:o})}(h=D||(D={})).Connecting="Connecting",h.Connected="Connected",h.Disconnected="Disconnected",h.Errored="Errored";var mV=(0,z.X)({root:[J.l0.position.relative,J.l0.height("100%"),J.l0.width("100%")],target:[J.l0.height("100%"),J.l0.width("100%")],overlay:[J.l0.coverContainer,J.l0.backgroundColor.backgroundDefault,{"&:empty":[J.l0.display.none]}],audio:[J.l0.position.absolute,J.l0.bottom(0),J.l0.right(0),{padding:"0.2em"}]});function mH(e){var t,r,i,o,a=e.fs,l=e.secrets,c=e.container,s=e.openNetworkingTool,u=(0,N._)((0,ee.useState)(null),2),d=u[0],f=u[1],h=(0,N._)((0,ee.useState)(void 0),2),p=h[0],m=h[1],v=(0,N._)((0,ee.useState)(!1),2),g=v[0],y=v[1],b=(0,N._)((0,ee.useState)("Connecting"),2),w=b[0],Z=b[1],x=(0,N._)((0,ee.useState)(null),2),C=x[0],k=x[1],S=(0,N._)((0,ee.useState)(!1),2),_=S[0],E=S[1],T=(0,N._)((0,ee.useState)(!1),2),R=T[0],D=T[1],I=(0,ee.useRef)(0),B=(0,ee.useRef)(!1),G=(r=(t=(0,N._)((0,ee.useState)(null),2))[0],i=t[1],o=(0,mX.Z)(c),(0,ee.useEffect)(function(){if(!r){if(c.getConnectionState()===mM.em.CONNECTED){if(!o)return;i((0,d2.hw)(o.replace("http","ws"),mM.Y8).toString());return}return c.onConnectionStateChanged(function(e){e===mM.em.CONNECTED&&o&&i((0,d2.hw)(o.replace("http","ws"),mM.Y8).toString())})}},[o,r,c]),{vncUrl:r}).vncUrl;(0,lk.j)(lk.U3.VNC_OPENED),(0,ee.useEffect)(function(){return B.current=!0,function(){B.current=!1}},[]);var P=(0,N._)((0,ee.useState)(null),2),A=P[0],L=P[1],O=(0,ee.useRef)(function(){return null});(0,ee.useEffect)(function(){O.current()},[A]);var X=(0,cQ.Z)(function(e){return L(e.width&&e.height?{width:e.width,height:e.height}:null)},{type:"throttle",wait:100}),M=(0,ee.useRef)(function(e){});(0,ee.useEffect)(function(){M.current(R)},[R]),(0,ee.useEffect)(function(){if(!d){var e=!1;return n.e(994).then(n.bind(n,30994)).then(function(t){e||f(t)}),function(){e=!0}}},[d]),(0,ee.useEffect)(function(){"Disconnected"===w&&setTimeout(function(){Z("Connecting")},Math.random()*(Math.pow(2,I.current)-1)*1e3)},[w]),(0,ee.useEffect)(function(){if("Disconnected"===w){var e=setTimeout(function(){Z("Connecting")},Math.random()*(Math.pow(2,I.current)-1)*1e3);return function(){clearTimeout(e)}}},[w]);var F=(0,e$.Z)();return(0,ee.useEffect)(function(){if(G&&C&&d&&"Connecting"===w){I.current++;var e=d.default,t=c.getConnectionMetadata(),n={credentials:{username:null==t?void 0:t.token,password:null!=p?p:""}};(0,lk.j)(lk.U3.VNC_CONNECTED);var r=new e(C,G,n);r.scaleViewport=!0,r.resizeSession=!0;var i=function(){I.current=0,Z("Connected")},o=function(e){var t=e.detail.capabilities.audio;E(void 0!==window.MediaSource&&!!t)},a=function(e){if(O.current=function(){return null},M.current=function(e){},r.removeEventListener("securityfailure",s),r.removeEventListener("disconnect",a),r.removeEventListener("capabilities",o),r.removeEventListener("connect",i),!e.detail.clean){var t=c.getConnectionMetadata(),n=t?(0,mU.he)(t.token):null;(0,lk.j)(lk.U3.VNC_ERRORED,{vncUrl:G,replId:F,cluster:null==n?void 0:n.cluster}),Z("Errored");return}Z("Disconnected")},s=function(){var e,t=function(){y(!0)};(e=(0,tM._)(function(){var e;return(0,tF.Jh)(this,function(n){switch(n.label){case 0:return[4,l.read()];case 1:if(!(e=n.sent().get("VNC_PASSWORD")))return t(),[2];return m(e),[2]}})}),function(){return e.apply(this,arguments)})().catch(function(e){return tV.Tb(e)})};return r.addEventListener("connect",i),r.addEventListener("capabilities",o),r.addEventListener("disconnect",a),r.addEventListener("securityfailure",s),O.current=function(){return r._windowResize()},E(!1),D(!1),M.current=function(t){t?((0,lk.j)(lk.U3.VNC_AUDIO_ENABLED),r.enableAudio(2,window.MediaSource.isTypeSupported("audio/webm;codecs=opus")?e.audioCodecs.OpusWebM:e.audioCodecs.MP3,32768)):r.disableAudio()},function(){B.current||(O.current=function(){return null},M.current=function(e){},r.removeEventListener("securityfailure",s),r.removeEventListener("disconnect",a),r.removeEventListener("capabilities",o),r.removeEventListener("connect",i),r.disconnect())}}},[d,C,c,G,a,p,w,F,l]),(0,U.BX)("div",{"data-cy":"vnc",css:mV.root,children:[_?(0,U.BX)("label",{css:mV.audio,children:["\uD83C\uDFA7"," ",(0,U.tZ)("input",{type:"checkbox",checked:R,onChange:function(e){return D(e.target.checked)}})]}):null,(0,U.tZ)("div",{ref:function(e){X(e),k(e)},css:mV.target,"data-cy":"vnc-output-".concat(w.toLowerCase())}),(0,U.BX)("div",{css:mV.overlay,children:["Connecting"===w?(0,U.tZ)(eu.Z,{pane:{type:"vnc"},loading:!0}):null,"Disconnected"===w?(0,U.tZ)(eu.Z,{pane:{type:"vnc"},bodyText:"Disconnected"}):null,"Errored"===w?(0,U.tZ)(mW,{vncUrl:G,onRetry:function(){return Z("Connecting")},openNetworkingTool:s}):null]}),(0,U.tZ)(rX.u,{isOpen:g,onRequestClose:function(){return y(!1)},children:(0,U.tZ)(pB.Z,{prompt:"Password",desc:"The output is password protected, please input it",placeholder:"password",type:"text",onCancel:function(){return y(!1)},onConfirm:function(e){m(e),y(!1)}})})]})}var mz=X.Dy.Object({type:X.Dy.Literal("vnc")}),mj=(0,z.X)({container:[J.l0.flex.growAndShrink(1)]}),mq={Content:function(e){var t=e.options.performPaneOperation,n=(0,Y.Z)(),r=n.fs,i=n.container,o=n.secrets,a=(0,ee.useCallback)(function(){return t({operation:"open",secondary:!0,pane:{type:"networking"}})},[t]);return(0,U.tZ)(H.G,{css:mj.container,children:(0,U.tZ)(mH,{fs:r,container:i,secrets:o,openNetworkingTool:a})})},Icon:function(e){var t=e.size;return(0,U.tZ)(dK.Z,{size:t})},getTitle:function(){return"Output"},description:"View your Repl's desktop screen output",category:K.hc.WorkspaceFeatures,decode:function(e){return M.B4.Decode(mz,e)}},mJ=n(237),mY=n(96601),m$=n(13556),mK=n(53250),mQ=n(68220),m0=n(54108);function m1(){var e=(0,eK._)(["\n  query AdminPanelGitView {\n    currentUser {\n      id\n      gitHubInfo {\n        accessToken\n        installations {\n          id\n          type\n          avatarUrl\n          name\n        }\n        userInfo {\n          name\n          email\n          avatarUrl\n        }\n      }\n    }\n  }\n"]);return m1=function(){return e},e}var m2={},m3=(0,eQ.Ps)(m1());function m4(e){var t=e.event,n=t.input,r=t.output,i=t.error,o=t.start,a=t.end,l=t.cached,c=(0,N._)((0,ee.useState)(!0),2),s=c[0],u=c[1],d=(0,ee.useCallback)(function(){return u(function(e){return!e})},[]),f="bash"===n[0]&&"-c"===n[1]?n.slice(2).join(" "):n.join(" "),h=r.trimEnd();return(0,U.BX)(H.G,{css:[(0,mQ.ec)(i?"negative":"positive"),l?{opacity:.75}:void 0,J.l0.borderRadius(8)],children:[(0,U.BX)(H.G,{onClick:d,onKeyDown:function(e){("Enter"===e.key||" "===e.key)&&d()},tabIndex:0,css:[J.l0.rowWithGap(4),J.l0.justify.spaceBetween,J.l0.py(4),J.l0.px(8),J.l0.font.code,J.l0.cursor.pointer],children:[(0,U.BX)("span",{css:{whiteSpace:"pre-wrap",wordBreak:"break-word"},children:["$ ",f]}),(0,U.BX)("span",{css:[J.l0.color.foregroundDimmer,J.l0.flex.shrink(0)],children:[i?(0,U.tZ)("span",{css:[J.l0.mr(16)],children:i}):null,l?(0,U.tZ)("span",{children:"CACHED"}):(0,U.BX)("span",{children:[a-o," ms"]})]})]}),s?null:(0,U.tZ)(H.G,{css:[J.l0.px(2),J.l0.pb(2),J.l0.borderRadius(0,0,8,8)],children:(0,U.tZ)(ew.Tg,{elevated:!0,css:[J.l0.p(8),J.l0.borderRadius(8)],children:(0,U.tZ)(mK.Z,{code:h})})})]})}var m8=n(44134),m6=n(63483),m5=n(69746);function m7(e){var t=e.t,n=e.children;return(0,U.BX)("span",{css:{display:"flex",alignItems:"flex-start",columnGap:"0.5rem"},children:[(0,U.BX)(V.xv,{css:{minWidth:"8em"},multiline:!1,children:[t,":"," "]}),(0,U.tZ)("span",{children:n})]})}var m9=n(70624),ve=n(59855),vt=(0,z.X)({container:[J.l0.colWithGap(8),J.l0.height("100%"),J.l0.position.relative],controls:[J.l0.colWithGap(8),J.l0.px(4),J.l0.pb(8),J.l0.backgroundColor.backgroundDefault],filters:[J.l0.rowWithGap(4),J.l0.justify.spaceBetween]}),vn=(0,z.X)({in:[J.l0.color.greenStrongest],out:[J.l0.color.redStrongest],error:[J.l0.color.magentaStrongest]}),vr=[J.l0.flex.row,J.l0.rowWithGap(4),{"&:hover":{cursor:"pointer",".link":{textDecoration:"underline"}}}],vi=(0,z.X)({clickable:(0,O._)(vr),clickableHighlighted:(0,O._)(vr).concat([J.l0.backgroundColor.accentPositiveDimmer]),inner:[J.l0.flex.grow(1),J.l0.rowWithGap(4),J.l0.maxWidth("100%")],log:[J.l0.flex.growAndShrink(1),{opacity:.5}],row:[J.l0.my(4),J.l0.mx(4)],timestamp:[J.l0.fontSize(13),{cursor:"pointer"}]});function vo(e){var t,n=e.log,r=e.filters,i=e.timeRef,o=e.setTimeRef,a=(0,ee.useMemo)(function(){return r.highlightOnly&&(0,ve.cF)(n,r)},[r,n]),l=null!==(t=n.cmd.channel)&&void 0!==t?t:0,c=(0,ee.useMemo)(function(){var e=(0,ep._)({},n.cmd);return delete e.channel,{cleaned:e,formatted:JSON.stringify(e,null,2)}},[n]),s=i?n.timestamp-i:n.timestamp,u=(0,N._)((0,m5.Z)(!0),2),d=u[0],f=u[1];return(0,U.BX)(H.G,{css:vi.row,children:[(0,U.tZ)(H.G,{role:"button",onClick:f,onKeyDown:f,tabIndex:0,css:a?vi.clickableHighlighted:vi.clickable,children:(0,U.BX)(H.G,{css:vi.inner,children:[(0,U.tZ)(V.xv,{className:"icon",multiline:!1,children:"in"===n.dir?(0,U.tZ)(H.G,{css:vn.in,children:""}):"out"===n.dir?(0,U.tZ)(H.G,{css:vn.out,children:""}):(0,U.tZ)(H.G,{css:vn.error,children:""})}),(0,U.tZ)(V.xv,{className:"link",multiline:!1,children:(0,U.BX)("code",{children:["#",l," - ",n.channel.service,n.channel.name?"::".concat(n.channel.name):""]})}),(0,U.tZ)(V.xv,{css:vi.log,multiline:!1,children:(0,U.tZ)("code",{style:{overflow:"hidden",textOverflow:"ellipsis"},children:c.formatted})}),null!=s&&(0,U.tZ)(H.G,{style:{opacity:.5},onClick:function(){o(n.timestamp)},children:(0,U.tZ)(V.xv,{css:vi.timestamp,multiline:!1,children:n.timestamp===i?"(reference)":(0,U.BX)(U.HY,{children:[s.toFixed(0)," ms"]})})})]})}),!d&&(0,U.tZ)(U.HY,{children:void 0!==c.cleaned&&(0,U.tZ)(m9.g,{name:"cmd",src:c.cleaned})})]})}var va=(0,z.X)({listContainer:[J.l0.position.relative,J.l0.height("100%")],listScroller:[J.l0.overflow("auto"),J.l0.coverContainer],listBox:[J.l0.width("100%"),J.l0.position.relative],listItem:[J.l0.position.absolute,J.l0.top(0),J.l0.left(0),J.l0.width("100%")]}),vl=(0,ee.memo)(function(e){var t=e.logs,n=e.filters,r=e.timeRef,i=e.setTimeRef,o=(0,ee.useRef)(null),a=(0,nR.MG)({count:t.length,getScrollElement:function(){return o.current},getItemKey:function(e){return t[e].id},estimateSize:function(){return 30},overscan:10});return(0,U.tZ)("div",{css:va.listContainer,children:(0,U.BX)("div",{ref:o,css:va.listScroller,children:[(0,U.tZ)("div",{css:va.listBox,style:{height:"".concat(a.getTotalSize(),"px")},children:a.getVirtualItems().map(function(e){var o=e.index,l=e.key,c=e.start,s=t[o];return s?(0,U.tZ)("div",{"data-index":o,ref:a.measureElement,css:va.listItem,style:{transform:"translateY(".concat(c,"px)")},children:(0,U.tZ)(vo,{log:s,filters:n,timeRef:r,setTimeRef:i})},l):null})}),(0,U.tZ)("div",{className:"bottom-anchor"})]})})}),vc=function(e){var t=e.filters,n=e.updateFilters;return(0,U.BX)(H.G,{css:J.l0.colWithGap(4),children:[(0,U.tZ)(V.xv,{variant:"subheadDefault",multiline:!1,children:"Regex (regex,flags):"}),(0,U.tZ)(eg.II,{id:"regex",onChange:function(e){var t=null;if(e.currentTarget.value){var r=(0,N._)(e.currentTarget.value.split(","),2),i=r[0],o=r[1];try{t=new RegExp(i,o)}catch(e){}}n({regexp:t})},placeholder:"\\w+,gi"}),(0,U.tZ)(V.xv,{variant:"subheadDefault",multiline:!1,children:"Channel (comma separated ids, clear to reset)"}),(0,U.tZ)(eg.II,{id:"channels",onChange:function(e){n({channels:e.currentTarget.value.split(",").map(function(e){return e.trim()}).map(Number).filter(function(e){return!isNaN(e)})})},placeholder:"1,2,3"}),(0,U.tZ)(V.xv,{variant:"subheadDefault",multiline:!1,children:"Directions:"}),(0,U.tZ)(aM.E,{css:J.l0.rowWithGap(16),name:"direction",value:t.direction,onChange:function(e){var t=e.target.value;n({direction:"in"===t||"out"===t||""===t?t:""})},children:[{val:"",text:"Both"},{val:"in",text:"In"},{val:"out",text:"Out"}].map(function(e){return(0,U.BX)(H.G,{css:[J.l0.rowWithGap(8)],children:[(0,U.tZ)(aM.Y,{id:e.val,value:e.val}),(0,U.tZ)("label",{htmlFor:e.val,children:e.text})]},e.val)})}),(0,U.tZ)(V.xv,{variant:"subheadDefault",multiline:!1,children:"Filter style:"}),(0,U.tZ)(aM.E,{css:J.l0.rowWithGap(16),name:"filter-style",value:t.highlightOnly?"highlight":"filter",onChange:function(e){return n({highlightOnly:"highlight"===e.target.value})},children:[{val:"highlight",text:"Highlight"},{val:"filter",text:"Filter"}].map(function(e){return(0,U.BX)(H.G,{css:[J.l0.rowWithGap(8)],children:[(0,U.tZ)(aM.Y,{id:e.val,value:e.val}),(0,U.tZ)("label",{htmlFor:e.val,children:e.text})]},e.val)})})]})},vs=n(65117),vu=(0,z.X)({root:{height:"100%",overflow:"auto",padding:10,pre:{whiteSpace:"pre-wrap",wordWrap:"break-word"}},command:[J.l0.flex.shrink(1)],copyable:[J.l0.rowWithGap(2)]}),vd=n(82973),vf=n(93539),vh=n(7420),vp=n(26726),vm=n(6069),vv=n(67887);function vg(){var e=(0,eK._)(["\n  fragment AdminPanelRepl on Repl {\n    id\n    title\n    description\n    isProject\n    isPrivate\n    timeCreated\n    timeUpdated\n    slug\n    url\n    language\n    user {\n      id\n    }\n    config {\n      isServer\n      isVnc\n    }\n    isRenamed\n    isProjectFork\n    folderId\n    isOwner\n    origin {\n      id\n    }\n    source {\n      release {\n        id\n        repl {\n          id\n          url\n          templateLabel\n        }\n      }\n    }\n  }\n"]);return vg=function(){return e},e}function vy(){var e=(0,eK._)(["\n  query AdminPanelReplView($replId: String!) {\n    repl(id: $replId) {\n      ...AdminPanelRepl\n    }\n  }\n  ","\n"]);return vy=function(){return e},e}var vb={},vw=(0,eQ.Ps)(vg()),vZ=(0,eQ.Ps)(vy(),vw),vx=(0,eV.iv)([J.l0.colWithGap(16),J.l0.p(4),{pre:{whiteSpace:"pre-wrap",wordWrap:"break-word"}}]),vC=n(47726),vk=n(10777);function vS(e){var t=e.sessionId,n=(0,N._)((0,ee.useState)(!1),2),r=n[0],i=n[1],o=(0,N._)((0,ee.useState)(""),2),a=o[0],l=o[1],c=(0,N._)((0,ee.useState)(!1),2),s=c[0],u=c[1],d=(0,ax.Z)().showConfirm,f=(0,a$.U)();return null==t?(0,U.tZ)(H.G,{children:(0,U.tZ)(V.xv,{multiline:!1,children:"Something went wrong... no RUM session found... Try refreshing the page"})}):(0,U.BX)(H.G,{css:[J.l0.colWithGap(8)],children:[(0,U.BX)(V.xv,{variant:"small",multiline:!1,children:["RUM Session ID: ",t]}),(0,U.tZ)(V.xv,{variant:"headerDefault",multiline:!1,children:"Submit an Issue"}),(0,U.BX)(H.G,{css:[J.l0.colWithGap(16)],children:[(0,U.tZ)(eg.B,{id:f("message"),placeholder:"What can we do better?",value:a,onChange:function(e){return l(e.target.value)},disabled:r}),(0,U.BX)(H.G,{css:[J.l0.rowWithGap(8)],children:[(0,U.tZ)(rp.X,{id:f("issueInRecording"),checked:s,onChange:function(e){return u(e)}}),(0,U.tZ)("label",{htmlFor:f("issueInRecording"),children:(0,U.tZ)(V.xv,{multiline:!1,children:"Issue is demoed in recording"})})]}),(0,U.tZ)(eb.zx,{onClick:function(){var e=dv()();i(!0),(0,vk.fc)({name:"replitOnReplit:issue",context:{message:a,issueInRecording:s,customEventId:e}}),d("Issue submitted! Have a cookie \uD83C\uDF6A",5e3),setTimeout(function(){i(!1),l(""),u(!1)},5e3)},text:"Submit",disabled:r||0===a.trim().length,colorway:"primary"})]})]})}var v_=n(86283),vE={"Session state":function(){var e=(0,iO.aV)();return(0,U.tZ)(vm.Z,{json:e})},"File context":function(){var e=(0,iO.Tt)(),t=(0,pW.AA)(),n=(0,N._)((0,iO.Ni)(),1)[0],r=(0,iO.Bk)(),i=(0,Y.Z)(),o=i.fs,a=i.dotReplit,l=(0,v_.G)(o,a),c=(0,N._)((0,ee.useState)(null),2),s=c[0],u=c[1];return(0,ee.useEffect)(function(){var i=!1;function o(){return(o=(0,tM._)(function(){var o;return(0,tF.Jh)(this,function(a){switch(a.label){case 0:return[4,l({model:"advanced"===n&&r()?iO.BY.ADVANCED:iO.BY.BASIC,filePreferences:e,recentFiles:t()})];case 1:if(o=a.sent(),i)return[2];return u(o),[2]}})})).apply(this,arguments)}return function(){o.apply(this,arguments)}(),function(){i=!0}},[t,e,n,r,l]),(0,U.tZ)(vm.Z,{json:s})}},vT=n(2763),vR=n(49500),vD=(0,z.X)({view:[J.l0.pt(16),J.l0.px(12),J.l0.colWithGap(12)],uploadMessage:[J.l0.flex.growAndShrink(1),J.l0.width("100%")]}),vI=n(42401),vB=(0,z.X)({container:[J.l0.py(8),J.l0.px(12),J.l0.colWithGap(12)],toggleRow:[J.l0.rowWithGap(8)]}),vG=n(24006),vP=n(41086);function vA(e){var t,n,r,i,o,a,l=(0,N._)((0,ee.useState)(null),2),c=l[0],s=l[1],u=(t=e.logs,n=(0,N._)((0,ee.useState)(),2)[1],i=(r=(0,ee.useMemo)(function(){if(!t)return{subscribe:function(){return function(){}},getSnapshot:function(){return null}};var e=vP.y$.from(t);return{subscribe:function(t){return e.subscribe({next:t,error:function(e){n(function(){throw e})}})},getSnapshot:function(){return t.current}}},[t])).subscribe,o=r.getSnapshot,a=(0,ee.useSyncExternalStore)(i,o,o),t?a:void 0),d=null!==c?u[u.length-c-1]:null,f=(0,cO.Z)(),h=f.ref,p=f.view;(0,ee.useEffect)(function(){p&&p.dispatch({changes:{from:0,to:p.state.doc.length,insert:d?d.data:""}})},[d,p]);var m=(0,ee.useRef)(c);return(0,ee.useEffect)(function(){m.current=c},[c]),(0,ee.useEffect)(function(){return e.logs.subscribe(function(e){var t=m.current;(null===t||e.length-2===t)&&s(e.length-1)})},[e.logs]),(0,U.BX)(H.G,{css:vV.outputs,children:[(0,U.BX)(H.G,{css:vV.outputsL,children:[(0,U.tZ)(H.G,{css:vV.logHeader,children:d?null==d?void 0:d.name:null}),(0,U.tZ)(H.G,{css:vV.logData,children:(0,U.tZ)(tg.ZP,{ref:h,language:"json",readOnly:!0})})]}),(0,U.BX)(H.G,{css:vV.outputsR,children:[(0,U.tZ)(H.G,{css:vV.logsHeader,children:(0,U.tZ)(eb.zx,{size:"small",text:"Clear",disabled:!u.length,onClick:e.onClear})}),(0,U.tZ)(H.G,{css:vV.logsList,children:u.map(function(e,t){var n=u.length-t-1;return(0,U.tZ)("code",{role:"button",tabIndex:0,className:c===n?"selected":void 0,onClick:function(){s(n)},onKeyDown:function(e){"Enter"===e.key&&s(n)},children:e.name},n)})})]})]})}var vL=ta.Py.define(),vN=ta.Py.define(),vO=ta.Py.define(),vU=tu.tk.theme({"&":{border:"1px solid ".concat(J.TV.outlineDefault),height:"225px"},"& .cm-panels":{backgroundColor:"unset"},"& .cm-panels.cm-panels-bottom":{borderTop:"1px solid ".concat(J.TV.outlineDefault)}}),vX=new cU.j(function(e,t){return[vU,ta.QQ.define({create:function(){return null},update:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,a=t.effects[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;l.is(vL)&&(e=l.value),l.is(vO)&&(e=null)}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return e},provide:function(n){return[tu.lg.define(function(){var n,r,i=void 0;return{update:(n=(0,tM._)(function(n){var o,a,l,c,s,u,d,f,h,p,m,v,g,y,b,w,Z,x,C,k,S,_,E,T,R,D,I,B,G,P,A,L,O,U,X,M,F,W,V;return(0,tF.Jh)(this,function(H){switch(H.label){case 0:if(!e)return[2];o=void 0,a=!0,l=!1,c=void 0;try{for(s=n.transactions[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){d=u.value,f=!0,h=!1,p=void 0;try{for(m=d.effects[Symbol.iterator]();!(f=(v=m.next()).done);f=!0){var z;(g=v.value).is(vL)&&g.value&&(o=g.value),g.is(vN)&&(null==r||r.push((z=g.value,JSON.parse(z,function(e,t){return"object"==typeof t&&"Uint8Array"===t.type&&void 0!==t.data?new Uint8Array(t.data):t})))),g.is(vO)&&(null==i||i())}}catch(e){h=!0,p=e}finally{try{f||null==m.return||m.return()}finally{if(h)throw p}}}}catch(e){l=!0,c=e}finally{try{a||null==s.return||s.return()}finally{if(l)throw c}}if(!o)return[2];switch(y=o.service,b=o.procedure,w=o.type,Z=e.client[y][b][w],x=void 0,C=1,o.type){case"rpc":return[3,1];case"stream":return[3,3];case"subscribe":return[3,5];case"upload":return[3,7]}return[3,9];case 1:case 5:return[4,Z(o.input)];case 2:return k=H.sent(),t({name:"".concat(y,".").concat(b,".").concat(w,".").concat(C),data:vM(k)}),n.view.dispatch({effects:vO.of(null)}),[3,9];case 3:return[4,Z(null!==(S=o.input)&&void 0!==S?S:void 0)];case 4:return E=(_=N._.apply(void 0,[H.sent(),3]))[0],T=_[1],R=_[2],r=E,x=T,i=R,[3,9];case 6:return I=(D=N._.apply(void 0,[H.sent(),2]))[0],B=D[1],x=I,i=B,[3,9];case 7:return[4,Z(null!==(G=o.input)&&void 0!==G?G:void 0)];case 8:return A=(P=N._.apply(void 0,[H.sent(),2]))[0],L=P[1],r=A,i=L,[3,9];case 9:if(!x)return[3,22];O=!1,U=!1,H.label=10;case 10:H.trys.push([10,15,16,21]),M=(0,mm._)(x),H.label=11;case 11:return[4,M.next()];case 12:if(!(O=!(F=H.sent()).done))return[3,14];W=F.value,t({name:"".concat(y,".").concat(b,".").concat(w,".").concat(C),data:vM(W)}),C++,H.label=13;case 13:return O=!1,[3,11];case 14:return[3,21];case 15:return V=H.sent(),U=!0,X=V,[3,21];case 16:if(H.trys.push([16,,19,20]),!(O&&null!=M.return))return[3,18];return[4,M.return()];case 17:H.sent(),H.label=18;case 18:return[3,20];case 19:if(U)throw X;return[7];case 20:return[7];case 21:n.view.dispatch({effects:vO.of(null)}),H.label=22;case 22:return r=void 0,x=void 0,i=void 0,[2]}})}),function(e){return n.apply(this,arguments)})}}),tu.tk.editable.from(n,function(e){return(null==e?void 0:e.type)!=="rpc"&&(null==e?void 0:e.type)!=="subscribe"}),vG.V.compute([n,"doc"],function(e){var t,r;return e.doc.length?null:(null===(t=e.field(n))||void 0===t?void 0:t.type)==="stream"||(null===(r=e.field(n))||void 0===r?void 0:r.type)==="upload"?{from:0,insert:"{\n   # ... input data\n}"}:{from:0,insert:'{\n  "service_name": {\n    "procedure_name": {\n      "rpc" | "stream" | "subscribe" | "upload": {\n        # ... init/input data\n      }\n    }\n  }\n}'}}),tu.$f.of([{key:"Tab",run:function(e){var t;return!e.state.doc.length&&(e.dispatch({changes:null!==(t=e.state.facet(vG.V)[0])&&void 0!==t?t:void 0}),!0)}}]),tu.mH.of(function(t){var r=function(){if(e){var n=vW(t.state.doc.toString());if(n){var r=n.type,i=n.service,o=n.procedure,a=n.input;r&&i&&o&&t.dispatch({effects:vL.of({type:r,service:i,procedure:o,input:a}),changes:"stream"===r||"upload"===r?{from:0,to:t.state.doc.length,insert:""}:void 0})}}},i=function(){t.dispatch({effects:vN.of(t.state.doc.toString()),changes:{from:0,to:t.state.doc.length,insert:""}})},o=function(){var r,i=t.state.field(n),o=new Set,a=t.state.doc.toString();return e&&i&&"rpc"!==i.type&&(o.add("Close"),("stream"===i.type||"upload"===i.type)&&a.startsWith("{")&&a.endsWith("}")&&o.add("Send")),e&&!i&&a.length&&(o.add("Clear"),(null===(r=vW(a))||void 0===r?void 0:r.type)&&o.add("Send")),o},a=vz.create({enabled:o(),onSend:function(){null==t.state.field(n)?r():i(),t.focus()},onClose:function(){t.dispatch({effects:[vO.of(null),vL.of(null)],changes:{from:0,to:t.state.doc.length,insert:""}})},onClear:function(){t.dispatch({changes:{from:0,to:t.state.doc.length,insert:""}}),t.focus()}});return{dom:a,top:!1,update:function(e){if((0,de.aU)(e,n,"doc")){var t=e.state.field(n);vz.update(a,function(e){return(0,em._)((0,ep._)({},e),{enabled:o(),inProgress:t?"".concat(t.type,": ").concat(t.service,".").concat(t.procedure):void 0})})}}}})]}})]});function vM(e){return JSON.stringify(e,function(e,t){return t instanceof Uint8Array?Array.from(t):t},2)}var vF=["rpc","stream","subscribe","upload"];function vW(e){try{t=JSON.parse(e)}catch(e){return null}var t,n=0,r=null,i=null,o=null;try{for(;n<3;){var a=Object.keys(t)[0];if(void 0===a)throw Error("expected key");if(0===n&&(r=a),1===n&&(i=a),2===n){if(vF.includes(a))o=a;else throw Error("expected procedure type")}t=t[a],n++}return{type:o,service:r,procedure:i,input:t}}catch(e){return{type:o,service:r,procedure:i,input:null}}}var vV=(0,z.X)({buttons:[J.l0.p(4),J.l0.rowWithGap(4)],status:[J.l0.p(4),J.l0.pb(0)],outputs:[J.l0.rowWithGap(0),J.l0.flex.growAndShrink(1),J.l0.border({width:1,color:J.TV.outlineDefault}),{marginTop:"4px"}],logHeader:[J.l0.align.start,J.l0.justify.center,J.l0.height("37px"),J.l0.display.flex,J.l0.p(4),J.l0.border({width:1,color:J.TV.outlineDefault,direction:"bottom"})],logData:[J.l0.display.block,J.l0.flex.growAndShrink(1),{overflowY:"auto"}],logsHeader:[J.l0.display.flex,J.l0.align.end,J.l0.p(4),J.l0.border({width:1,color:J.TV.outlineDefault,direction:"bottom"})],logsList:[J.l0.display.block,J.l0.flex.growAndShrink(1),{overflowY:"auto"}],outputsL:[J.l0.display.flex,J.l0.flex.growAndShrink(1),{overflowY:"auto"}],outputsR:[J.l0.display.flex,J.l0.border({width:1,color:J.TV.outlineDefault,direction:"left"}),J.l0.width("40%"),J.l0.maxWidth("250px"),{overflowY:"auto","& code":{display:"block",cursor:"pointer",padding:"4px",borderBottom:"1px solid ".concat(J.TV.outlineDimmer),overflowX:"hidden",textOverflow:"ellipsis"},"& code.selected":{backgroundColor:J.TV.accentPrimaryDimmer},"& code:last-of-type":{borderBottom:"unset"}}]}),vH=["Send","Close","Clear"],vz=new dr.J(function(e){return(0,U.BX)(H.G,{children:[(0,U.tZ)(H.G,{css:vV.status,children:(0,U.BX)(V.xv,{variant:"small",color:"dimmer",children:["Status:"," ",e.inProgress?(0,U.BX)(U.HY,{children:["In progress - ",e.inProgress]}):null]})}),(0,U.tZ)(H.G,{css:vV.buttons,children:Object.values(vH).map(function(t){return(0,U.tZ)(eb.zx,{size:"small",disabled:!e.enabled.has(t),text:t,onClick:function(){switch(t){case"Send":e.onSend();break;case"Close":e.onClose();break;case"Clear":e.onClear()}}},t)})})]})}),vj=n(65034),vq=n(76848),vJ=n(21781),vY=(0,z.X)({wrapper:[J.l0.p(4)],list:[J.l0.colWithGap(4)],runningWorkflowListItem:[J.l0.rowWithGap(4),J.l0.align.center]});(p=I||(I={})).Repl="repl",p.Pid2="pid2",p.Pid2Repl="pid2Repl",p.Logs="logs",p.LSP="lsp",p.AI="ai",p.GhostwriterChat="aiChat",p.Git="git",p.History2="history2",p.Metadata="metadata",p.Override="override",p.DDRum="rum",p.CommandBar="commandBar",p.Workflows="workflows";var v$=(B={},(0,ti._)(B,"repl",function(){var e,t,n,r,i,o,a,l,c,s=(0,e$.Z)(),u=(e=(0,ep._)({},vb,{variables:{replId:s}}),e0.a(vZ,e)).data,d=(null==u?void 0:u.repl.__typename)==="Repl"?JSON.parse(JSON.stringify(u.repl)):void 0;return d&&(delete d.__typename,null===(t=d.user)||void 0===t||delete t.__typename,null===(n=d.origin)||void 0===n||delete n.__typename,delete d.config.__typename,null===(r=d.source)||void 0===r||delete r.__typename,null===(o=d.source)||void 0===o||null===(i=o.release)||void 0===i||delete i.__typename,null===(c=d.source)||void 0===c||null===(l=c.release)||void 0===l||null===(a=l.repl)||void 0===a||delete a.__typename),(0,U.BX)(H.G,{css:vx,children:[(0,U.tZ)(vv.Z,{replId:s}),(0,U.tZ)("div",{children:d?(0,U.tZ)(vm.Z,{json:d}):null})]})}),(0,ti._)(B,"pid2",function(){var e,t=(0,Y.Z)(),n=t.fs,r=t.container,i=null===(e=r.getContext())||void 0===e?void 0:e.repl,o=(0,mI.r9)(),a=(0,N._)((0,ee.useState)("unknown"),2),l=a[0],c=a[1],s=(0,N._)((0,ee.useState)(null),2),u=s[0],d=s[1],f=(0,N._)((0,ee.useState)(null),2),h=f[0],p=f[1],m=(0,my.U)(function(e){return function(){c("loading");var t=setTimeout(function(){c("unhealthy")},5e3);e.healthCheck.ping.rpc({}).then(function(e){d(e.payload),clearTimeout(t),e.ok?c("ok"):c("unhealthy")}).catch(function(){clearTimeout(t),c("unhealthy")})}});return(0,U.BX)(H.G,{css:vD.view,children:[(0,U.BX)(V.h4,{level:3,children:["Is pid2 enabled? ",o?"Yes":"No"]}),(0,U.tZ)(eb.zx,{text:"Ping pid2 (state: ".concat(l,")"),colorway:"ok"===l?"green":"unhealthy"===l?"red":"grey",disabled:!m,onClick:function(){null==m||m()}}),u?(0,U.tZ)("code",{children:JSON.stringify(u,null,2)}):null,(0,U.tZ)(eb.zx,{colorway:"purple",text:"Upload pid2 to Repl",onClick:(0,tM._)(function(){var e;return(0,tF.Jh)(this,function(t){switch(t.label){case 0:if(!i)return[2];return e="",[4,(0,vT.w)(i,r,n,function(t){p(e+=t+"\n")})];case 1:return t.sent(),[2]}})})}),h?(0,U.tZ)("pre",{css:vD.uploadMessage,children:h}):null,(0,U.tZ)(eb.zx,{text:"Assign pid2 client to window for testing",onClick:function(){window.pid2=o,vR.log("window.pid2: ",o)}})]})}),(0,ti._)(B,"pid2Repl",function(){var e=(0,N._)((0,ee.useState)(function(){return new vP.vU([])}),1)[0],t=(0,ee.useCallback)(function(t){return e.update(function(e){return[t].concat((0,O._)(e))})},[e]),n=(0,N._)((0,ee.useState)(null),2),r=n[0],i=n[1];(0,mv.C)(function(e){return i({client:e}),function(){return i(null)}},[]);var o=vX.use(r,t);return(0,U.BX)(U.HY,{children:[(0,U.tZ)(tg.ZP,{language:"json",hideGutter:!0,extensions:o}),(0,U.tZ)(vA,{logs:e,onClear:function(){return e.set([])}})]})}),(0,ti._)(B,"logs",function(e){var t=e.isHidden,n=(0,N._)((0,m5.Z)(!1),2),r=n[0],i=n[1],o=(0,N._)((0,ee.useState)(null),2),a=o[0],l=o[1],c=(0,ve.gd)(),s=(0,ve.qc)(),u=(0,ve.$G)(),d=(0,ve.mN)(),f=(0,ve.Ay)(),h=(0,ve._t)();return t?null:(0,U.BX)(H.G,{css:vt.container,children:[(0,U.BX)(H.G,{css:vt.controls,children:[(0,U.tZ)(eb.zx,{colorway:s?void 0:"positive",onClick:u,text:s?"Stop logging goval":"Start logging goval"}),(0,U.BX)(H.G,{css:vt.filters,children:[(0,U.tZ)(eb.zx,{onClick:i,text:r?"Hide filters":"Show filters"}),a?(0,U.tZ)(eb.zx,{onClick:function(){return l(null)},text:"Reset Time Ref"}):null,(0,U.tZ)(F.hU,{alt:"Download as JSON",onClick:function(){var e="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(c)),t=document.createElement("a");t.setAttribute("href",e);var n=new Date().toISOString();t.setAttribute("download","logs-".concat(n.slice(0,n.indexOf(".")).replaceAll("-","").replaceAll(":",""),".json")),t.click()},size:32,children:(0,U.tZ)(j.Z,{})}),(0,U.tZ)(eb.zx,{colorway:"negative",onClick:function(){return h()},text:"Clear logs"})]}),r?(0,U.tZ)(vc,{filters:d,updateFilters:function(e){f((0,ep._)({},d,e))}}):null]}),(0,U.tZ)(vl,{logs:c,filters:d,timeRef:a,setTimeRef:l})]})}),(0,ti._)(B,"lsp",m9.L),(0,ti._)(B,"ai",m$.ho),(0,ti._)(B,"aiChat",function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).isHidden;return e?null:(0,U.tZ)(H.G,{children:(0,U.BX)(fs.mQ,{children:[(0,U.tZ)(fs.td,{"aria-label":"Tabs",children:Object.keys(vE).map(function(e){return(0,U.tZ)(fs.OK,{children:e},e)})}),(0,U.tZ)(fs.nP,{children:Object.entries(vE).map(function(e){var t=(0,N._)(e,2),n=t[0],r=t[1];return(0,U.tZ)(fs.x4,{children:(0,U.tZ)(r,{})},n)})})]})})}),(0,ti._)(B,"git",function(){var e,t=(0,N._)((0,ee.useState)([]),2),n=t[0],r=t[1],i=(e=(0,ep._)({},m2,void 0),e0.a(m3,e)).data,o=(0,dY.Z)(m0.e);return(0,ee.useEffect)(function(){o&&r(function(e){return e.length&&e[0].key===o.key?e:[o].concat((0,O._)(e)).slice(0,100)})},[o]),(0,U.BX)(H.G,{css:[J.l0.p(8)],children:[(0,U.BX)(ew.Tg,{elevated:!0,css:[J.l0.borderRadius(8),J.l0.p(8),J.l0.mb(8)],children:[(0,U.tZ)("span",{children:"Git Service Connection Info"}),(0,U.tZ)("pre",{children:(null==i?void 0:i.currentUser)?JSON.stringify(i,function(e,t){return"accessToken"===e?"censored":t},2):"No gitHubInfo"})]}),(0,U.tZ)(H.G,{css:[J.l0.colWithGap(4)],children:n.length?n.map(function(e){return(0,U.tZ)(m4,{event:e},e.key)}):"No events yet..."})]})}),(0,ti._)(B,"history2",function(){var e=(0,a$.U)()("toggleIsShowingChanges"),t=(0,dY.Z)(lE.BI)(),n=(0,dY.Z)(lE.Jp)(),r=(0,N._)((0,m5.Z)(!1),2),i=r[0],o=r[1];if(!t)return null;var a=t.filePath,l=t.changes,c=t.users,s=t.version,u=t.playing,d=t.count,f=l[s];if(!f)return(0,U.BX)(H.G,{children:[(0,U.BX)("div",{children:["Change at ",s," not found. Here's the state"]}),(0,U.tZ)("pre",{children:JSON.stringify(t,null,2)})]});var h=null==c?void 0:c[f.userId],p=f.timestamp,m=i&&n?function(e,t){try{return(0,m6.ed)(e,t).op}catch(e){return e}}(f.changes,n.state.doc.sliceString(0)):null;return(0,U.BX)(H.G,{css:[J.l0.colWithGap(16),J.l0.p(4)],children:[(0,U.BX)(H.G,{css:[J.l0.colWithGap(4)],children:[(0,U.tZ)(m7,{t:"File",children:(0,U.tZ)("pre",{children:a})}),(0,U.BX)(m7,{t:"Version",children:[s," / ",d-1]}),(0,U.tZ)(m7,{t:"Playing",children:(0,U.tZ)(m8.Z,{children:u?"true":"false"})}),(0,U.tZ)(m7,{t:"Date",children:(0,U.tZ)(nP.EK,{date:p})})]}),h?(0,U.BX)(H.G,{children:[(0,U.tZ)(m7,{t:"Author",children:h.username}),(0,U.BX)(H.G,{css:[J.l0.pl(8),J.l0.colWithGap(4)],children:[(0,U.tZ)(m7,{t:"ID",children:h.id}),(0,U.tZ)(m7,{t:"Name",children:h.username}),(0,U.tZ)(m7,{t:"Image",children:(0,U.tZ)("a",{href:h.image,children:h.image})})]})]}):null,(0,U.BX)(H.G,{css:[J.l0.rowWithGap(8),{alignItems:"center"}],children:[(0,U.tZ)(lI.Z,{id:e,isOn:i,onChange:o}),(0,U.tZ)("label",{htmlFor:e,children:"Changes"})]}),f?null:"No changes",i&&f?(0,U.tZ)(U.HY,{children:(0,U.BX)(H.G,{children:[(0,U.tZ)(m7,{t:"Changeset",children:(0,U.tZ)("pre",{children:JSON.stringify(f,null,2)})}),n?(0,U.tZ)(U.HY,{children:(0,U.BX)(H.G,{css:[J.l0.mt(4)],children:[(0,U.tZ)(m7,{t:"OT",children:(0,U.tZ)("pre",{children:JSON.stringify(m,null,2)})}),(0,U.tZ)("p",{children:(0,U.BX)("small",{children:["Note that the OT value is translated ",(0,U.tZ)("em",{children:"back"})," to an operational transformation from the CodeMirror changeset."]})})]})}):null]})}):null]})}),(0,ti._)(B,"metadata",function(){var e=(0,Y.Z)().container;(0,vs.Z)(e);var t=e.getConnectionMetadata();if(!t)return(0,U.tZ)("div",{children:"no token yet, wait for connection"});var n=t.token,r=new URL(t.conmanURL).host,i='./conman-repl -t "'.concat(n,'" -u ').concat(r);return(0,U.BX)("div",{css:vu.root,children:[(0,U.BX)(H.G,{css:vu.copyable,children:[(0,U.BX)(V.xv,{css:vu.command,multiline:!1,children:["conman Repl command: ",(0,U.tZ)(m8.Z,{children:i})]}),(0,U.tZ)(F.hU,{alt:"Copy to clipboard",onClick:function(){return(0,ey.Z)(i)},children:(0,U.tZ)(sf.Z,{})})]}),(0,U.BX)("div",{children:["metadata:",(0,U.tZ)("pre",{children:JSON.stringify(t,null,2)})]}),(0,U.tZ)("br",{}),(0,U.tZ)("br",{}),(0,U.BX)("div",{children:["parsed token:",(0,U.tZ)("pre",{children:JSON.stringify((0,mU.he)(t.token),null,2)})]}),(0,U.tZ)("br",{}),(0,U.tZ)("br",{})]})}),(0,ti._)(B,"override",function(){var e=(0,N._)((0,ee.useState)(vd.Z.get("gurl","string")||""),2),t=e[0],n=e[1],r=(0,N._)((0,ee.useState)(""),2),i=r[0],o=r[1],a=dG(),l=""===t?"null":JSON.stringify((0,vf.t)(t),null,2);return(0,U.BX)(H.G,{css:[J.l0.pt(16),J.l0.px(12),J.l0.colWithGap(12)],children:[(0,U.BX)(H.G,{css:[J.l0.colWithGap(12)],children:[(0,U.tZ)(vp.ZP,{label:"Custom gurl",placeholder:"ws://localhost:".concat(4560),value:t,onChange:function(e){return n(e.currentTarget.value)}}),(0,U.BX)("pre",{children:["metadata override preview:",l]}),(0,U.BX)(H.G,{css:[J.l0.rowWithGap(12)],children:[(0,U.tZ)(vh.Z,{color:"positive",onClick:function(){vd.Z.set("gurl",t),window.location.reload()},children:"Set gurl and reload"}),(0,U.tZ)(vh.Z,{color:"yellow",onClick:function(){vd.Z.set("gurl","wss://eval.canary.replit.com"),window.location.reload()},children:"Switch to canary & reload"}),(0,U.tZ)(vh.Z,{color:"orange",onClick:function(){vd.Z.remove("gurl"),window.location.reload()},children:"Unset gurl and reload"}),(0,U.tZ)(vh.Z,{color:"red",onClick:function(){vd.Z.set("gurl","ws://localhost:4560"),window.location.reload()},children:"Switch to localhost & reload"})]}),(0,U.tZ)("div",{children:vd.Z.get("gurl","string")?"currently in localStorage: ".concat(vd.Z.get("gurl","string")):'No gurl set in local storage, using default gurl for this user, check "Token" tab for details'}),(0,U.tZ)("p",{children:"Gurl order of precedence:"}),(0,U.BX)("ol",{style:{margin:12},children:[(0,U.tZ)("li",{children:"gurl in localStorage (set above)"}),(0,U.BX)("li",{children:["If in development webapp and a theres a response from",(0,U.tZ)("code",{children:"https://localhost:4563"})," or",(0,U.BX)("code",{children:["http://localhost:",4560]}),", then it will use that."]}),(0,U.BX)("li",{children:["default is ",(0,U.tZ)("code",{children:"wss://eval.<usercluster>.replit.com"})]})]})]}),(0,U.tZ)("hr",{css:[J.l0.my(16),{borderColor:J.TV.outlineDefault}]}),(0,U.BX)(H.G,{css:[J.l0.colWithGap(12)],children:[(0,U.tZ)(V.xv,{multiline:!1,children:"Override Database"}),(0,U.tZ)(vp.ZP,{type:"text",value:i,onChange:function(e){o(e.target.value)}}),(0,U.tZ)(H.G,{css:[J.l0.rowWithGap(8)],children:(0,U.tZ)(vh.Z,{color:"positive",onClick:function(){a(i)},children:"Override Postgres connection string"})})]})]})}),(0,ti._)(B,"rum",function(){var e,t=null===(e=vC.v.getInternalContext())||void 0===e?void 0:e.session_id,n=vC.v.getInitConfiguration(),r=null!=n&&100===n.sampleRate,i=(0,N._)((0,ee.useState)(null!=t),2),o=i[0],a=i[1];return(0,U.tZ)(H.G,{css:[J.l0.colWithGap(16),J.l0.p(4)],children:r?(0,U.BX)(U.HY,{children:[(0,U.tZ)(eb.zx,{onClick:o?function(){vC.v.stopSessionReplayRecording(),document.cookie="_dd_s=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",window.location.href=window.location.href.split("?")[0]}:function(){(0,vk.Oo)({name:"replitOnReplit"}),setTimeout(function(){a(!0)},1e3)},text:o?"\uD83D\uDD34 Recording... Click to stop and reload page":"Start Recording",colorway:o?void 0:"primary",css:(0,ep._)({},o&&ez.p.backgroundPulse(J.TV.redDimmest,J.TV.redDimmer))}),o?(0,U.tZ)(vS,{sessionId:t}):null]}):(0,U.tZ)(eb.zx,{onClick:function(){window.location.href=window.location.href.split("?")[0].split("#")[0]+"?rum=1"},text:"Click to reload and start recording",colorway:"primary"})})}),(0,ti._)(B,"commandBar",function(){var e=(0,vI.v)(),t=(0,vI.O)();return(0,U.tZ)(H.G,{css:vB.container,children:(0,U.BX)(H.G,{css:vB.toggleRow,children:[(0,U.tZ)(lI.Z,{id:"toggleCommandBarMatchScoresVisiblity",isOn:e,onChange:t}),(0,U.tZ)(V.xv,{children:"Show match scores in Command Bar"})]})})}),(0,ti._)(B,"workflows",function(){var e=(0,N._)((0,ee.useState)([]),2),t=e[0],n=e[1],r=(0,N._)((0,ee.useState)(void 0),2),i=r[0],o=r[1],a=(0,vq.Oo)(),l=(0,vq.D)(),c=(0,vq.QF)();(0,ee.useEffect)(function(){var e,t,r=null!==(t=null==l?void 0:l.map(function(e){return{id:e.name}}))&&void 0!==t?t:[];n(r),o(null===(e=r[0])||void 0===e?void 0:e.id)},[l]);var s=(0,my.U)(function(e){return function(t){var n=t.workflowId;return e.workflows.runWorkflow.rpc({workflowId:n})}},[]),u=(0,my.U)(function(e){return function(t){var n=t.runId;e.workflows.stopRun.rpc({runId:n})}},[]);return(0,U.BX)(H.G,{css:vY.wrapper,children:[(0,U.BX)(H.G,{children:[(0,U.tZ)(vj.P,{"aria-label":"Workflow",onSelectionChange:function(e){o(e)},selectedKey:i,items:t,children:function(e){return(0,U.tZ)(f7.m9,{label:e.id},e.id)}}),(0,U.tZ)(eb.zx,{onClick:(0,tM._)(function(){return(0,tF.Jh)(this,function(e){switch(e.label){case 0:if(!i||!s)return[2];return[4,s({workflowId:i})];case 1:return e.sent(),[2]}})}),text:"Run",disabled:!i})]}),c?(0,U.tZ)(H.G,{children:Object.entries(c).map(function(e){var t=(0,N._)(e,2),n=t[0],r=t[1];return(0,U.BX)(H.G,{css:vY.runningWorkflowListItem,children:[n," step: ",r.step,r.step===vJ.KX.RUNNING?(0,U.tZ)(eb.zx,{text:"Stop",onClick:function(){null==u||u({runId:n})}}):null]},n)})}):null,(0,U.BX)(H.G,{children:[(0,U.tZ)(V.xv,{children:"Run State"}),(0,U.tZ)(vm.Z,{json:c})]}),(0,U.BX)(H.G,{children:[(0,U.tZ)(V.xv,{children:"Config"}),(0,U.tZ)(vm.Z,{json:a})]})]})}),B),vK=Object.values(I),vQ=(0,z.X)({surface:[J.l0.colWithGap(8),J.l0.p(4),J.l0.height("100%")],tabs:[{flexWrap:"wrap",flexDirection:"row",gap:"4px"}],tab:[J.l0.flex.growAndShrink(1),J.l0.overflow("auto")],content:[J.l0.flex.growAndShrink(1),J.l0.height("100%")]});function v0(e){var t=e.paneOptions,n=(0,N._)((0,ee.useState)("repl"),2),r=n[0],i=n[1],o=vK.map(function(e){return(0,U.tZ)(eb.zx,{colorway:e===r?"primary":void 0,onClick:function(){return i(e)},text:e},e)});return(0,U.BX)(ew.Tg,{background:"default",css:vQ.surface,children:[(0,U.tZ)(H.G,{css:vQ.tabs,children:o}),(0,U.tZ)(H.G,{css:vQ.tab,children:Object.entries(v$).map(function(e){var n=(0,N._)(e,2),i=n[0],o=n[1];return(0,U.tZ)(H.G,{css:vQ.content,style:{display:i!==r?"none":"inherit"},children:"override"===i&&"override"!==r?null:(0,U.tZ)(o,{isHidden:t.isHidden||r!==i})},i)})})]})}var v1=X.Dy.Object({type:X.Dy.Literal("adminPanel")}),v2={Content:function(e){var t=e.options;return(0,U.tZ)(v0,{paneOptions:t})},Icon:function(e){var t=e.size;return(0,U.tZ)(te.Pd.Provider,{value:{color:tt.TV.redStronger,size:t},children:(0,U.tZ)(mY.Z,{})})},getTitle:function(){return"Debug"},getTitlePill:function(){return{text:"Staff-only",colorway:"warning"}},description:"Replit developer debugging tools",category:K.hc.Other,decode:function(e){return M.B4.Decode(v1,e)}},v3=n(10482),v4=n(53904),v8=n(27069),v6=n(45151),v5=n(21460),v7=n(23261),v9=n(33790),ge=n(34648),gt=n(88300),gn=n(46261),gr=new Map,gi=(0,z.X)({shadow:{position:"absolute",'&[data-position="top"], &[data-position="bottom"]':{left:0,right:0,height:12},'&[data-position="left"], &[data-position="right"]':{top:0,bottom:0,height:12},'&[data-position="top"]':{top:0,backgroundImage:"linear-gradient(to top, transparent, var(--shadow-color))"},'&[data-position="bottom"]':{bottom:0,backgroundImage:"linear-gradient(to bottom, transparent, var(--shadow-color))"},'&[data-position="left"]':{left:0,backgroundImage:"linear-gradient(to left, transparent, var(--shadow-color))"},'&[data-position="right"]':{right:0,backgroundImage:"linear-gradient(to right, transparent, var(--shadow-color))"}}});function go(e){var t=e.scrolledAmount,n=e.scrollableAmount,r=e.orientation,i=void 0===r?"vertical":r,o=e.hideEnd,a=e.shadowColor,l=void 0===a?"rgba(2, 2, 3, 0.32)":a;return(0,U.BX)(U.HY,{children:[t>0&&(0,U.tZ)("div",{css:gi.shadow,"data-position":"vertical"===i?"top":"left",style:{"--shadow-color":l}}),!(void 0!==o&&o)&&t<n&&(0,U.tZ)("div",{css:gi.shadow,"data-position":"vertical"===i?"bottom":"right",style:{"--shadow-color":l}})]})}var ga=n(38799),gl=n(15179),gc=n(27598),gs=(0,z.X)({root:[J.l0.colWithGap(8)],header:[J.l0.flex.row,J.l0.justify.spaceBetween,J.l0.height(36)],description:[J.l0.flex.column,J.l0.gap(8)],divider:[J.l0.backgroundColor.outlineDimmer],package:[J.l0.p(4),J.l0.flex.row,J.l0.align.center,J.l0.border({color:"transparent"}),J.l0.justify.spaceBetween,{"&:hover":{backgroundColor:J.TV.backgroundHighest}}],packageList:[J.l0.maxHeight(220),J.l0.overflowY("auto")],packageMetadata:[J.l0.flex.row,J.l0.flex.growAndShrink(1),J.l0.align.center,J.l0.overflow("hidden"),J.l0.mr(8)],packageName:[J.l0.truncate,J.l0.flex.growAndShrink(1),J.l0.mx(8),{"> a":[J.l0.ml(4),{color:"currentColor",lineHeight:0}]}],packagerRoot:[J.l0.flex.column,J.l0.gap(8)],packager:[J.l0.backgroundColor.backgroundHigher,J.l0.borderRadius(4),J.l0.overflow("hidden")],packagerHeader:[J.l0.pl(4),J.l0.flex.row,J.l0.justify.spaceBetween,J.l0.flex.growAndShrink(1)],packagerHeaderTitle:[J.l0.truncate,J.l0.flex.shrink(1)],packagerEmptyState:[J.l0.p(8),J.l0.align.center,J.l0.backgroundColor.backgroundOverlay,J.l0.borderRadius(0,0,4,4),J.l0.color.foregroundDimmest],shadow:{position:"absolute",left:0,width:"100%",height:10,'&[data-position="top"]':{top:0,backgroundImage:"linear-gradient(to top, transparent, rgba(2, 2, 3, 0.32))"},'&[data-position="bottom"]':{bottom:0,backgroundImage:"linear-gradient(to bottom, transparent, rgba(2, 2, 3, 0.32))"}}});function gu(e){var t,n,r,i,o,a,l=e.pkg,c=e.uninstall,s=(0,gt.ZR)(),u=(n=(0,gt.ZR)(),r=(0,Y.Z)(),o=(i=(0,N._)((0,ee.useState)(null!==(t=gr.get("".concat(null==n?void 0:n.id,":").concat(l.name)))&&void 0!==t?t:null),2))[0],a=i[1],(0,ee.useEffect)(function(){if((null==n?void 0:n.id)&&l.name){var e,t=l.name;if(!gr.has(t)){var i=(0,gn.C)(n.id),o=!1;return(e=(0,tM._)(function(){var e;return(0,tF.Jh)(this,function(l){switch(l.label){case 0:return[4,i.getPackageInfo({id:n.id,name:t,services:r})];case 1:if((e=l.sent())&&"string"!=typeof(null==e?void 0:e.homepageURL)&&delete e.homepageURL,o)return[2];return gr.set("".concat(n.id,":").concat(t),null!=e?e:null),a(null!=e?e:null),[2]}})}),function(){return e.apply(this,arguments)})(),function(){o=!0}}}},[null==n?void 0:n.id,l.name]),o),d=(0,ee.useMemo)(function(){var e=(null==u?void 0:u.description)||l.description;if(e&&/<[^>]+>|<\/[^>]+>/.test(e)){var t=document.createElement("DIV");return t.innerHTML=e,(t.textContent||t.innerText||"").trim()}return e},[null==u?void 0:u.description,l.description]),f=(0,ge.Z)((null==u?void 0:u.license)||l.license),h=(0,ee.useMemo)(function(){if(u){var e;return(0,em._)((0,ep._)({},u),{version:null!==(e=null==u?void 0:u.version)&&void 0!==e?e:l.spec,name:(null==s?void 0:s.id)==="nix"&&(null==u?void 0:u.prettyName)||l.name,license:f,description:d})}return l},[null==s?void 0:s.id,d,u,f,l]),p=(0,hy.cW)(),m=(0,hy.B2)(),v=(0,ee.useMemo)(function(){return p.some(function(e){return e.pkgs.some(function(e){return e.name===l.name})})},[l.name,p]),g=(0,ee.useMemo)(function(){return!!(null!==m&&m.pkgs.find(function(e){return e.name===l.name}))},[m]);return(0,U.BX)(H.G,{css:gs.package,tag:"li",children:[(0,U.BX)(H.G,{css:gs.packageMetadata,children:[(0,U.tZ)(v5.Z,{}),(0,U.BX)(V.xv,{css:gs.packageName,children:[h.name,h.homepageURL?(0,U.tZ)("a",{href:h.homepageURL,target:"_blank",children:(0,U.tZ)(r1.Z,{})}):null]}),h.version?(0,U.tZ)(V.xv,{color:"dimmer",children:h.version}):null]}),(0,U.BX)(H.G,{css:[J.l0.flex.row,J.l0.gap(4),J.l0.align.center],children:[h.description||h.license?(0,U.tZ)(tU.u,{tooltip:(0,U.BX)("div",{children:[(0,U.tZ)("div",{children:h.description}),h.license?(0,U.tZ)(V.xv,{variant:"small",color:"dimmer",children:h.license}):null]}),children:(0,U.tZ)(lN.Z,{})}):null,(0,U.tZ)(F.hU,{alt:"Uninstall",disabled:g||v,onClick:function(){c()},children:(0,U.tZ)(sE.Z,{})})]})]})}function gd(e){var t=e.onAddPackage,n=e.name,r=e.id,i=e.addText;return(0,U.BX)(H.G,{css:gs.packagerHeader,children:[(0,U.tZ)(V.xv,{css:gs.packagerHeaderTitle,id:r,children:n}),(0,U.tZ)(F.hU,{alt:i,onClick:t,children:(0,U.tZ)(nA.Z,{})})]})}function gf(e){var t=e.packages,n=e.labelId,r=(0,gt.ZR)(),i=(0,hy.Wx)(),o=(0,ee.useRef)(null),a=(0,nR.MG)({count:t.length,getScrollElement:function(){return o.current},estimateSize:function(){return 34},overscan:15,measureElement:function(e){return e.getBoundingClientRect().height}}),l=(0,N._)((0,ee.useState)(0),2),c=l[0],s=l[1],u=(0,N._)((0,ee.useState)(0),2),d=u[0],f=u[1],h=a.getTotalSize();return r?(0,U.tZ)(H.G,{css:J.l0.position.relative,innerRef:function(e){e&&f(e.offsetHeight)},children:(0,U.BX)(H.G,{innerRef:o,css:gs.packageList,onScroll:function(e){s(e.target.scrollTop)},children:[(0,U.tZ)(go,{scrolledAmount:c,scrollableAmount:h-d,hideEnd:!0}),(0,U.tZ)(H.G,{style:{height:h},tag:"ul","aria-labelledby":n,children:a.getVirtualItems().map(function(e){var n=t[e.index];return(0,U.tZ)(gu,{pkg:n,uninstall:function(){i({id:r.id,pkg:n})}},n.name)})})]})}):null}var gh=new Map;function gp(e){var t=e.onAddPackage,n=e.openFile,r=(0,gt.ZR)(),i=(0,hy.te)(null==r?void 0:r.id),o=(0,ee.useMemo)(function(){return i.filter(function(e){return e.name}).sort(function(e,t){return e.name&&t.name?e.name.localeCompare(t.name):0})},[i]),a=(0,ee.useId)(),l=(0,ee.useCallback)(function(){t(null==r?void 0:r.id)},[t,null==r?void 0:r.id]),c=(null==r?void 0:r.id)==="nix",s=(0,ee.useMemo)(function(){return null==r?void 0:r.packagerFiles.filter(function(e){return!e.includes("lock")&&!e.endsWith("/")})},[null==r?void 0:r.packagerFiles]),u=(0,gc.XZ)(),d=(0,N._)((0,ee.useState)(r?gh.get(r.id):void 0),2),f=d[0],h=d[1];return((0,ee.useEffect)(function(){function e(){return(e=(0,tM._)(function(){var e,t,n,i,o,a,l;return(0,tF.Jh)(this,function(c){switch(c.label){case 0:if(!s||!r)return[2];e=!0,t=!1,n=void 0,c.label=1;case 1:c.trys.push([1,6,7,8]),i=s[Symbol.iterator](),c.label=2;case 2:if(e=(o=i.next()).done)return[3,5];return a=o.value,[4,u.readFile(a)];case 3:if("content"in c.sent())return gh.set(r.id,a),h(a),[3,5];c.label=4;case 4:return e=!0,[3,2];case 5:return[3,8];case 6:return l=c.sent(),t=!0,n=l,[3,8];case 7:try{e||null==i.return||i.return()}finally{if(t)throw n}return[7];case 8:return[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[r,u,s]),r)?(0,U.BX)(H.G,{css:gs.packagerRoot,children:[(0,U.tZ)(H.G,{css:gs.packager,children:(0,U.tZ)(eM.Q,{defaultExpanded:!0,headerContent:(0,U.tZ)(gd,{id:a,name:r.name,addText:"Add new ".concat(c?"dependency":"package"),onAddPackage:l}),children:(0,U.BX)(U.HY,{children:[(0,U.tZ)(gl.iz,{css:gs.divider}),o.length>0?(0,U.tZ)(gf,{packages:o,labelId:a}):(0,U.BX)(H.G,{css:gs.packagerEmptyState,children:["No ",c?"dependencies":"packages"," found"]})]})})}),(0,U.tZ)(eb.zx,{colorway:"primary",variant:"outlined",text:"Add new ".concat(c?"dependency":"package"),iconLeft:(0,U.tZ)(nA.Z,{}),onClick:l}),f?(0,U.tZ)(eb.zx,{variant:"nofill",text:"Open ".concat(f),iconLeft:(0,U.tZ)(v5.Z,{}),onClick:function(){(0,lk.j)(l_.U3.DEPENDENCIES_PACKAGER_FILE_OPENED,{packagerId:r.id,file:f}),n({path:f})}}):null]}):null}function gm(e){var t=e.configs,n=e.description,r=e.title,i=e.openFile,o=(0,tc._)(e,["configs","description","title","openFile"]);return(0,U.BX)(H.G,{children:[(0,U.tZ)(H.G,{css:gs.header,children:(0,U.tZ)(V.h4,{variant:"subheadDefault",level:2,children:r})}),(0,U.BX)(H.G,{css:gs.root,children:[(0,U.tZ)(ga.M,{color:"dimmer",css:gs.description,children:n}),t.length>0?t.map(function(e){return(0,U.tZ)(v9.Z,{config:e,children:(0,U.tZ)(gp,(0,ep._)({openFile:i},o))},e.id)}):null]})]})}function gv(e){var t=(0,hg.I)().configs,n=(0,ee.useMemo)(function(){return t.find(function(e){return"nix"===e.id})},[t]);return n?(0,U.tZ)(gm,(0,em._)((0,ep._)({title:"System Dependencies",description:(0,U.BX)("span",{children:["Add additional support to your environment with"," ",(0,U.tZ)("a",{href:"https://search.nixos.org/packages",target:"_blank",children:"Nix packages"}),"."]})},e),{configs:[n]})):null}var gg=n(74158),gy=n(16832);function gb(e){var t=e.openFile,n=e.openConsole,r=e.openNixTab,i=(0,hg.I)().configs,o=(0,ee.useMemo)(function(){return i.filter(function(e){return"nix"!==e.id})},[i]),a=(0,N._)((0,ee.useState)({mode:"Overview"}),2),l=a[0],c=a[1];switch((0,v7.D)(l_.U3.DEPENDENCIES_TAB_VIEWED,{tab:"import"}),l.mode){case"Overview":return(0,U.tZ)(gy._,{children:(0,U.tZ)(gm,{title:"Manage Imports",configs:o,openFile:t,onAddPackage:function(e){c({mode:"Search",initialPackager:e})},description:(0,U.BX)(U.HY,{children:[(0,U.tZ)(V.xv,{children:"Packagers manage language-specific dependencies for your project. These can be imported directly from your codebase."}),(0,U.tZ)(V.xv,{color:"dimmest",children:(0,U.BX)("p",{children:["You don't currently have any packagers. Add language support by"," ",(0,U.tZ)("a",{href:"",onClick:function(e){e.preventDefault(),r()},children:"adding a System Module"}),"."]})})]})})});case"Search":return(0,U.tZ)(gg.o,{onBack:function(){return c({mode:"Overview"})},initialCategory:l.initialPackager,openConsole:n})}}var gw=n(5272),gZ=(0,z.X)({systemModules:[J.l0.flex.column,J.l0.gap(8)],sectionHeader:[J.l0.flex.row,J.l0.justify.spaceBetween,J.l0.height(36)]});function gx(e){var t=e.openFile,n=e.openConsole,r=(0,v4._)().modules,i=(0,N._)((0,ee.useState)({mode:"Overview"}),2),o=i[0],a=i[1];if((0,v7.D)(l_.U3.DEPENDENCIES_TAB_VIEWED,{tab:"nix"}),!r)return null;switch(o.mode){case"Overview":return(0,U.BX)(gy._,{children:[(0,U.BX)(H.G,{children:[(0,U.tZ)(H.G,{css:gZ.sectionHeader,children:(0,U.tZ)(V.h4,{variant:"subheadDefault",level:2,children:"System Modules"})}),(0,U.BX)(H.G,{css:gZ.systemModules,children:[(0,U.tZ)(ga.M,{color:"dimmer",children:"Modules combine support for programming languages, formatters, and packagers. These provide the foundation for your Repl."}),(0,U.tZ)(gw.Z,{modules:r}),(0,U.tZ)(eb.zx,{text:"Add new module",variant:r.length>0?"outlined":"default",colorway:"primary",iconLeft:(0,U.tZ)(nA.Z,{}),onClick:function(){a({mode:"Search",initialCategory:"Modules"})}}),(0,U.tZ)(eb.zx,{text:"Open .replit",variant:"nofill",iconLeft:(0,U.tZ)(lA.Z,{}),onClick:function(){t({path:".replit"})}})]})]}),(0,U.tZ)(gv,{onAddPackage:function(){a({mode:"Search",initialCategory:"Packages"})},openFile:t}),(0,U.tZ)(ec.Z,{href:ef.TT.DEPENDENCY_MANAGEMENT,target:"_blank",rel:"noopener",variant:"underlinedOnHover",colorway:"primary",iconRight:(0,U.tZ)(r1.Z,{}),text:"Learn more about Nix and .replit configuration"})]});case"Search":return(0,U.tZ)(gg.z,{onBack:function(){return a({mode:"Overview"})},initialCategory:o.initialCategory,openConsole:n})}}var gC=n(27843);(m=G||(G={})).Import="import",m.Nix="nix";var gk=(0,z.X)({root:[J.l0.overflow("hidden"),J.l0.flex.growAndShrink(1)],systemModules:[J.l0.flex.column,J.l0.gap(8)],sectionHeader:[J.l0.flex.row,J.l0.justify.spaceBetween,J.l0.height(36)],loading:[J.l0.center,J.l0.flex.growAndShrink(1)],content:[J.l0.flex.growAndShrink(1)]});function gS(e){var t,n=e.openFile,r=e.openConsole,i=e.initialTab,o=(0,hg.I)(),a=o.configs,l=o.loading,c=(0,v4._)(),s=c.modules,u=c.configs,d=(0,v8.Z)(),f=(0,ee.useMemo)(function(){return a.filter(function(e){return"nix"!==e.id})},[a]).length>0,h=(0,N._)((0,ee.useState)(f?void 0===i?"import":i:"nix"),2),p=h[0],m=h[1];return((0,ee.useEffect)(function(){f||m("nix")},[f,l]),a&&s&&u&&d&&!l)?("import"===p?t=(0,U.tZ)(gb,{openFile:n,openConsole:r,openNixTab:function(){return m("nix")}}):"nix"===p&&(t=(0,U.tZ)(gx,{openFile:n,openConsole:r})),(0,U.BX)(H.G,{css:gk.root,children:[(0,U.tZ)(v6.g,{tabs:[{value:"import",label:"Imports",icon:(0,U.tZ)(v5.Z,{})},{value:"nix",label:"System (Advanced)",icon:(0,U.tZ)(gC.Z,{})}],value:p,onClick:function(e){m(e.value)}}),(0,U.tZ)(H.G,{css:gk.content,children:t})]})):(0,U.tZ)(gy.Gu,{})}var g_=n(30116),gE=X.Dy.Object({type:X.Dy.Literal("dependencies"),initialTab:X.Dy.Optional(X.Dy.Union([X.Dy.Literal("import"),X.Dy.Literal("nix")]))}),gT={Content:function(e){var t=e.options.performPaneOperation,n=e.pane.initialTab,r=(0,ee.useCallback)(function(e){return t({operation:"open",secondary:!0,pane:{type:"codeEditor",data:e}})},[t]),i=(0,ee.useCallback)(function(){t({operation:"open",secondary:!0,pane:{type:"runnerOutput"}})},[t]);return(0,U.tZ)(gS,{openFile:r,openConsole:i,initialTab:n})},Icon:function(e){var t=e.size;return(0,U.tZ)(v3.Z,{size:t})},getTitle:function(){return"Dependencies"},description:"Install, upgrade, and manage dependencies for your environment, build system, and application runtime",category:g_.h.WorkspaceFeatures,decode:function(e){return M.B4.Decode(gE,e)}},gR=n(64521),gD=n(57785),gI=n(86908),gB=n(47423),gG=n(36608),gP=n(37701),gA=n(25414),gL=n(22961),gN=n(26996),gO=n(23802),gU=n(68417),gX=n(381),gM=function(e){return"color-mix(in srgb, ".concat(tt.TV.blurpleDefault," ").concat(100*e,"%, transparent)")},gF=J.nC.min(440),gW=(0,eV.F4)({"0%":{opacity:0},"100%":{opacity:1}}),gV=(0,hA.$)(["animationDelay"]),gH=gV.styleTokens,gz=gV.cssVars,gj=(0,z.X)({root:[J.l0.reset.button,nI.gU.filled,J.l0.borderRadius(4),J.l0.align.center,J.l0.p(6),J.l0.color.blurpleDefault,J.l0.cursor.pointer,J.l0.align.start,(P={},(0,ti._)(P,gF,[J.l0.rowWithGap(4),J.l0.align.center]),(0,ti._)(P,nI.dj.interactiveBackground,gM(.1)),(0,ti._)(P,nI.dj.interactiveBackgroundActive,gM(.2)),(0,ti._)(P,"opacity",0),(0,ti._)(P,"animationName",gW),(0,ti._)(P,"animationDuration","800ms"),(0,ti._)(P,"animationFillMode","forwards"),(0,ti._)(P,"animationTimingFunction","ease-out"),(0,ti._)(P,"animationDelay",gH.animationDelay),P)],iconText:J.l0.rowWithGap(4)});function gq(e){return(0,U.BX)(H.G,{css:gj.root,onClick:e.onClick,style:(0,ti._)({},gz.animationDelay,20*e.index+"ms"),children:[(0,U.BX)(H.G,{css:gj.iconText,children:[(0,ee.cloneElement)(e.icon,{size:16,color:tt.TV.blurpleDefault}),(0,U.tZ)(V.xv,{variant:"small",children:e.text})]}),(0,U.tZ)(V.xv,{variant:"small",color:"dimmer",children:e.description})]})}var gJ=(0,z.X)({root:[J.l0.flex.growAndShrink(1),J.l0.position.relative,J.l0.overflow("auto"),J.l0.display.block],content:[J.l0.py(32),J.l0.px(32),J.l0.center,J.l0.colWithGap(12),J.l0.minHeight("100%")],header:[J.l0.colWithGap(8),J.l0.align.center,J.l0.maxWidth(370),J.l0.textAlign.center],buttons:[J.l0.colWithGap(8),(0,ti._)({},gF,[J.l0.align.center])],mobileWrapper:[J.l0.p(48),J.l0.center],mobileText:[J.l0.textAlign.center],titleWrapper:[J.l0.rowWithGap(4),J.l0.align.center]});function gY(e){var t,n,r,i=e.onPromptClick,o=(t=(0,N._)((0,pW.Bx)(),1)[0],n=(0,nw.P5)({controlName:"flag-porygon-button",logFlagToAnalytics:!1}),r=(0,ed.Lx)(),(0,ee.useMemo)(function(){var e,i=t?gL.$R.from(t):null,o=null!=t?t:"index.js",a=[{icon:(0,U.tZ)(gO.Z,{}),title:"Generate",description:"Create a personal assistant chatbot",action:"GENERATE"},{icon:(0,U.tZ)(mY.Z,{}),title:"Debug",description:t?"Find bugs in ".concat(t):"Fix the price updating logic",action:"DEBUG"},{icon:(0,U.tZ)(gN.Z,{}),title:"Explain",description:"How does ".concat(o," work?"),action:"EXPLAIN",promptToFill:"How does ".concat(o," work?")},{icon:(0,U.tZ)(gN.Z,{}),title:"Ask replit.com",description:"How do I deploy a ".concat(null!==(e=null==i?void 0:i.name)&&void 0!==e?e:"python"," project?"),action:"REPLIT_DOCS"}];return n&&r?[{icon:(0,U.tZ)(iW.Z,{}),title:"Agent Mode",description:"Let the agent work for you",action:"AGENT",promptToFill:""}]:n?(0,O._)(a).concat([{icon:(0,U.tZ)(iW.Z,{}),title:"Agent Mode",description:"Let the agent work for you",action:"AGENT",promptToFill:""}]):a},[n,t,r])),a=(0,aF.useRouter)(),l=(0,aX.S7)(a,"hideChatInput");return i?l?(0,U.tZ)(H.G,{css:gJ.mobileWrapper,children:(0,U.tZ)(V.xv,{css:gJ.mobileText,children:"Ask AI below for help setting up new projects, answering questions about your code, and assisting your thinking."})}):(0,U.tZ)(H.G,{css:gJ.root,children:(0,U.BX)(H.G,{css:gJ.content,children:[(0,U.BX)(H.G,{css:gJ.header,children:[(0,U.tZ)(gU.R,{advanced:!0,showUsername:!1}),(0,U.BX)(H.G,{css:gJ.titleWrapper,children:[(0,U.tZ)(V.xv,{variant:"subheadBig",children:"Replit AI"}),(0,U.tZ)(gX.C,{})]}),(0,U.tZ)(V.xv,{color:"dimmest",children:"Use Replit AI to set up new projects, answer questions about your code, and assist your thinking."})]}),(0,U.tZ)(H.G,{css:gJ.buttons,children:o.map(function(e,t){return(0,U.tZ)(gq,{index:t,icon:e.icon,text:e.title,description:e.description,onClick:function(){var t,n=null!==(t=e.promptToFill)&&void 0!==t?t:e.description;(0,lk.j)(lk.U3.GHOSTWRITER_CHAT_EXAMPLE_CLICKED,{title:e.title}),i({intent:e.action,value:n})}},e.action)})})]})}):null}var g$=n(76399),gK=n(43769),gQ=X.Dy.Object({type:X.Dy.Literal("ghostwriterChat"),data:X.Dy.Optional(X.Dy.Object({sessionId:X.Dy.Optional(X.Dy.String())}))}),g0=(0,z.X)({root:[J.l0.center,J.l0.flex.growAndShrink(1),J.l0.p(16)]});function g1(){return(0,U.tZ)(H.G,{css:g0.root,children:(0,U.tZ)(V.xv,{children:"AI is disabled for this team"})})}var g2={Content:function(e){var t,n,r,i,o,a=e.pane.data,l=e.options,c=(0,nw.P5)({controlName:"flag-killswitch-ghostwriter-chat",logFlagToAnalytics:!1}),s=l.performPaneOperation,u=(0,ee.useCallback)(function(e){s({operation:"open",pane:"string"==typeof e?(0,$.$E)(e):{type:(0,K.Dp)(e),data:e},secondary:!0})},[s]),d=(0,Y.Z)(),f=d.fs,h=d.dotReplit,p=(t=(0,pW.AA)(),n=(0,gI.T)(),(0,ee.useCallback)((r=(0,tM._)(function(e){var r,i,o,a,l;return(0,tF.Jh)(this,function(c){switch(c.label){case 0:return[4,f.listFiles()];case 1:if((r=c.sent()).error||!r.files)return[2,{error:null!==(i=r.error)&&void 0!==i?i:"Something went wrong",files:null}];if(o=r.files.filter(function(e){return!n(e)}),!e)return[3,3];return[4,(0,gB.Rz)(e,o)];case 2:return l=c.sent(),[3,4];case 3:l=(0,gD.Z)(o,{existing:t(),getKey:function(e){return e}}).map(function(e){return{path:e}}),c.label=4;case 4:return a=l,[2,{total:o.length,files:a,error:null}]}})}),function(e){return r.apply(this,arguments)}),[f,n,t])),m=(0,v_.G)(f,h),v=(0,pW._3)(),g=(0,gA.Ds)(),y=(0,ed.Lx)(),b=(0,e$.Z)(),w=(0,ee.useMemo)(function(){return{openFile:u,listFiles:f.listFiles,findFiles:p,getFileContext:m,codeInsertObservable:g}},[u,p,m,g,f]),Z=(0,N._)((0,ee.useState)(null),2),x=Z[0],C=Z[1],k=(i=(0,aF.useRouter)().query.aiPaneSessionId)&&"string"==typeof i?i:null,S=(0,ee.useRef)(null!==(o=null==a?void 0:a.sessionId)&&void 0!==o?o:k),_=(0,ee.useRef)(null);S.current&&(_.current=S.current===gK.Bg?{type:"mostRecent"}:{type:"session",id:S.current}),(0,Q.Wk)(function(){return x},[x]);var E=(0,nw.P5)({controlName:"flag-porygon-button",logFlagToAnalytics:!1}),T=(0,ee.useCallback)(function(){s({operation:"special",type:"agent-mode"})},[s]),R=(0,tb.Z)(null==a?void 0:a.sessionId),D=(0,ee.useCallback)(function(e){R.current!==e&&s({operation:"replace",pane:{type:"ghostwriterChat",data:e?{sessionId:e}:void 0}})},[s,R]);return(0,gP.v)().isTeamWithAiDisabled?(0,U.tZ)(g1,{}):c?(0,U.tZ)(gG.Z,{textVariant:"headerDefault",showImage:!0}):(0,U.BX)(U.HY,{children:[(0,U.tZ)(gR.S,{inputRef:C,initialSession:_.current,recentFilesObservable:v,workspace:w,replId:b,hideHeader:y,hideModelSelector:y,hideRagCheckbox:y,inputVariant:y?"compact":void 0,renderEmptyState:function(e){return(0,U.tZ)(gY,(0,ep._)({},e))},onEnterAgentMode:E?T:void 0,analyticsMessageSurface:"workspace_ai_pane",onSessionChange:D}),(0,U.tZ)(g$.Z,{})]})},Icon:function(e){var t=e.size;return(0,U.tZ)(te.Pd.Provider,{value:{color:J.TV.blurpleStrongest,size:t},children:(0,U.tZ)(iW.Z,{})})},getTitle:function(){return"AI"},description:"Use Replit AI to set up your Repl, answer questions about your code, and assist your thinking",category:K.hc.WorkspaceFeatures,decode:function(e){return M.B4.Decode(gQ,e)}},g3=n(91372),g4=n(63411),g8=n(51619),g6=n(27099),g5=n(97801),g7=n(41520),g9=n(46142),ye=n(69896),yt=n(41968),yn=n(18898),yr=n(46867),yi=n(30582),yo=n(56729),ya=n(85995),yl=n(21390),yc=n(32373);function ys(){var e=(0,eK._)(["\n  query SshPane($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        authorizations {\n          connectUsingSsh {\n            isAuthorized\n            message\n            code\n          }\n        }\n        org {\n          id\n          type\n        }\n      }\n      ... on ReplRedirect {\n        replUrl\n      }\n      ... on SubscriptionExpiredError {\n        replId\n      }\n    }\n  }\n"]);return ys=function(){return e},e}function yu(){var e=(0,eK._)(["\n  query SshPaneCurrentUser {\n    currentUser {\n      id\n      __typename\n      publicSshKeys {\n        ... on PublicSshKeysOutput {\n          keys {\n            id\n            key\n            label\n            timeCreated\n          }\n        }\n        ... on UnauthorizedError {\n          message\n        }\n      }\n    }\n  }\n"]);return yu=function(){return e},e}var yd={},yf=(0,eQ.Ps)(ys()),yh=(0,eQ.Ps)(yu());function yp(e){var t=e.disabled,n=(0,yi.Z)(),r=n.openInVSCode,i=n.onConfirmConfig,o=n.isConfigModalOpen,a=n.closeConfigModal;return(0,U.BX)(ew.Tg,{css:yg.connectInstructions,elevated:!0,children:[(0,U.BX)(H.G,{css:yg.connectHeader,children:[(0,U.tZ)(V.h4,{level:3,children:"Connect to VS Code"}),(0,U.tZ)(V.xv,{color:"dimmer",children:"One-click SSH setup will launch VS Code and configure keys for you."})]}),(0,U.tZ)(eb.zx,{text:t?"SSH Key Setup Required":"Launch VS Code",iconLeft:(0,U.tZ)(g6.Z,{}),css:yg.launchVSCodeButton,disabled:t,onClick:function(){(0,lk.j)(lk.U3.OPEN_IN_VSCODE_CLICKED,{source:"ssh_pane"}),r()}}),(0,U.tZ)(rX.u,{isOpen:o,onRequestClose:a,centered:!0,children:(0,U.tZ)(g7.Z,{onConfirm:i})})]})}function ym(e){var t=e.sshHostname,n=e.sshUser,r=e.sshPort,i=(0,yr.Z)(),o="ssh -i ".concat(i,"/.ssh/replit -p ").concat(r," ").concat(n,"@").concat(t);return(0,U.BX)(ew.Tg,{css:yg.connectInstructions,elevated:!0,children:[(0,U.BX)(H.G,{css:yg.connectHeader,children:[(0,U.tZ)(V.h4,{level:3,children:"Connect manually"}),(0,U.tZ)(V.xv,{color:"dimmer",children:"Use the command below to connect via CLI or another IDE."})]}),(0,U.tZ)(g9.Z,{code:o,header:"Shell command",multiline:!1,onCopy:function(){(0,lk.j)(lk.U3.COPY_SSH_KEY_COMMAND_CLICKED,{source:"ssh_pane"})}})]})}function yv(e){var t=e.onPurchaseComplete,n=e.org,r=e.sshAuthz,i=(0,N._)((0,ee.useState)(!1),2),o=i[0],a=i[1];return r.code===aK.RO.RequiresActiveSubscription&&(null==n?void 0:n.type)!==aK.a4.Team?(0,U.BX)(H.G,{css:yg.requireSubscription,children:[(0,U.BX)(V.h4,{level:3,variant:"subheadDefault",children:["SSH is only available to Replit ",dM.we," Members."]}),(0,U.BX)(V.xv,{children:["With SSH, you can access your Repl's shell remotely. SSH enables workflows like easy file transfer or using your favorite local IDE to edit your code on Replit."," ",(0,U.tZ)("a",{href:"https://docs.replit.com/replit-workspace/ssh",target:"_blank",children:"Learn more here"})]}),(0,U.tZ)(eb.zx,{onClick:function(){return a(!0)},text:"Join Replit ".concat(dM.we),iconLeft:(0,U.tZ)(g4.Z,{}),colorway:"blurple"}),(0,U.tZ)(ya.Z,{isOpen:o,onClose:function(){return a(!1)},type:"purchase",onPurchaseComplete:t,analyticsContext:{upgrade:{context:"cycles_page"}}})]}):(0,U.tZ)(e6.E,{colorway:"warning",text:r.message})}var yg=(0,z.X)({manageKeys:[J.l0.flex.row,J.l0.justify.spaceBetween],tabContainer:[J.l0.colWithGap(8),J.l0.p(8)],requireSubscription:[J.l0.colWithGap(16)],connectEmptyState:[J.l0.colWithGap(8),J.l0.center,J.l0.border({color:J.TV.outlineDefault,width:1,style:"dashed"}),J.l0.borderRadius(4),J.l0.py(24),J.l0.px(12)],connectHeader:[J.l0.colWithGap(4)],connectInstructions:[J.l0.colWithGap(12),J.l0.p(8),J.l0.borderRadius(4)],connectContainer:[J.l0.colWithGap(16),J.l0.py(8)],launchVSCodeButton:[J.l0.borderRadius(8)]});function yy(e){var t=e.legacyKeys,n=e.openFile,r=(0,e$.Z)(),i="legacy-ssh-keys-warning-".concat(r),o=(0,N._)((0,ee.useState)(function(){return!vd.Z.get(i,"boolean")}),2),a=o[0],l=o[1],c=(0,ee.useRef)(!1);return((0,ee.useEffect)(function(){return vd.Z.get(i,"boolean")||l(!0),function(){c.current&&vd.Z.set(i,!0)}},[i]),t&&0!==t.length&&a)?(0,U.tZ)(H.G,{children:(0,U.tZ)(sB.u,{colorway:"warning",iconLeft:(0,U.tZ)(rg.Z,{}),text:"Don't see your SSH keys here? We're moving from Repl-level keys to user-level keys. Click here to view your existing keys and re-add them using the 'New SSH Key' button above.",onClick:function(){n(yn.J),c.current=!0}})}):null}function yb(e){var t,n,r,i,o,a,l=(o=(0,ep._)({},yd,void 0),e0.a(yh,o)),c=l.data,s=l.loading,u=(0,N._)((0,ee.useState)(!1),2),d=u[0],f=u[1],h=(0,N._)((0,ee.useState)(0),2),p=h[0],m=h[1],v=(n=(t=(0,N._)((0,ee.useState)(null),2))[0],r=t[1],i=(0,Y.Z)().fs,(0,ee.useEffect)(function(){function e(){return(e=(0,tM._)(function(){var e;return(0,tF.Jh)(this,function(t){switch(t.label){case 0:return[4,i.readFile(yn.J)];case 1:if((e=t.sent()).error===c5.Df.NotFound||e.error===c5.Df.IsDirectory)return[2];if(e.error)throw Error("Unexpected error reading authorized keys");return r(e.content.toString().split("\n").map(function(e){return e.startsWith("#")||(0,yc.Z)(e)?null:e}).filter(Boolean)),[2]}})})).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[i]),n),g=(0,yo.Z)();if(s||!g)return(0,U.tZ)(eu.Z,{pane:{type:"ssh"},loading:!0,maxWidth:450});var y=g.sshHostname,b=g.sshUser,w=g.sshPort,Z=c&&(null===(a=c.currentUser)||void 0===a?void 0:a.__typename)==="CurrentUser"&&"PublicSshKeysOutput"===c.currentUser.publicSshKeys.__typename?c.currentUser.publicSshKeys.keys:[],x=Z.length>=yl.R,C=0===Z.length;return(0,U.BX)(fs.mQ,{selectedIndex:p,onSelectionChange:m,children:[(0,U.BX)(fs.td,{children:[(0,U.tZ)(fs.OK,{iconLeft:(0,U.tZ)(g4.Z,{}),children:"Connect"}),(0,U.tZ)(fs.OK,{iconLeft:(0,U.tZ)(g8.Z,{}),children:"Keys"})]}),(0,U.BX)(fs.nP,{children:[(0,U.tZ)(fs.x4,{children:(0,U.BX)(H.G,{css:yg.tabContainer,children:[(0,U.tZ)(V.h4,{variant:"subheadDefault",level:2,children:"Use Replit with another editor"}),(0,U.tZ)(V.xv,{color:"dimmer",children:"SSH allows you to connect to a Repl from another machine or IDE."}),(0,U.BX)(H.G,{css:yg.connectContainer,children:[(0,U.tZ)(yp,{disabled:C}),C?(0,U.BX)(H.G,{css:yg.connectEmptyState,children:[(0,U.tZ)(g8.Z,{size:24,color:J.TV.foregroundDimmest}),(0,U.tZ)(V.xv,{color:"dimmer",children:"You need to add an SSH key to your account before connecting"}),(0,U.tZ)(eb.zx,{text:"Manage SSH keys",colorway:"primary",size:"small",onClick:function(){m(1)}})]}):(0,U.tZ)(ym,{sshHostname:y,sshPort:w,sshUser:b})]}),(0,U.tZ)(ye.s,{})]})}),(0,U.tZ)(fs.x4,{children:(0,U.BX)(H.G,{css:yg.tabContainer,children:[(0,U.BX)(H.G,{css:yg.manageKeys,children:[(0,U.tZ)(V.h4,{variant:"subheadDefault",level:2,children:"Manage SSH Keys"}),(0,U.tZ)(tU.u,{tooltip:"You are over the SSH key limit. Please remove some of your keys to add more.",isDisabled:!x,children:(0,U.tZ)(eb.zx,{text:"Add SSH key",colorway:"primary",size:"small",disabled:x,iconLeft:(0,U.tZ)(nA.Z,{}),onClick:function(){return f(!0)}})})]}),(0,U.tZ)(V.xv,{color:"dimmer",children:"Add authorized keys to configure SSH access to this Repl."}),(0,U.tZ)(yy,{legacyKeys:v,openFile:e.openFile}),(0,U.tZ)(yt.A,{keys:Z}),(0,U.tZ)(rX.u,{isOpen:d,onRequestClose:function(){return f(!1)},centered:!0,children:(0,U.tZ)(g5.r,{onConfirm:function(){return f(!1)}})})]})})]})]})}function yw(e){var t,n,r,i=(n={variables:{replId:(0,e$.Z)()}},r=(0,ep._)({},yd,n),e0.a(yf,r)),o=i.data,a=i.loading,l=i.refetch;if(!o||a)return(0,U.tZ)(eu.Z,{pane:{type:"ssh"},loading:!0,maxWidth:450});if("ReplRedirect"===o.repl.__typename)throw Error("Got repl redirect for replId query");if("SubscriptionExpiredError"===o.repl.__typename)return(0,U.tZ)(H.G,{children:(0,U.tZ)(V.xv,{children:"This Repl is private and your subscription expired. Please reload for further action."})});var c=o.repl.authorizations.connectUsingSsh;return c.isAuthorized?(0,U.tZ)(yb,(0,ep._)({},e)):(0,U.tZ)(yv,{sshAuthz:c,org:null!==(t=o.repl.org)&&void 0!==t?t:void 0,onPurchaseComplete:function(){l()}})}var yZ=X.Dy.Object({type:X.Dy.Literal("ssh")}),yx=(0,z.X)({root:[J.l0.height("100%"),J.l0.overflowY("auto"),K.F3],header:[J.l0.rowWithGap(8)],container:[J.l0.colWithGap(8),J.l0.flex.grow(1)],wrapper:[J.l0.flex.grow(1),J.l0.py(8),J.l0.position.relative]}),yC={Content:function(e){var t=e.options;return(0,U.tZ)(H.G,{css:yx.root,children:(0,U.tZ)(H.G,{css:yx.container,children:(0,U.tZ)(H.G,{css:yx.wrapper,children:(0,U.tZ)(yw,{openFile:function(e){return t.performPaneOperation({operation:"open",pane:(0,$.$E)(e),secondary:!0})}})})})})},Icon:function(e){var t=e.size;return(0,U.tZ)(te.Pd.Provider,{value:{color:J.TV.yellowStrongest,size:t},children:(0,U.tZ)(g3.Z,{})})},getTitle:function(){return"SSH"},description:"Configure remote access to connect to this Repl from another machine or IDE",category:K.hc.WorkspaceFeatures,decode:function(e){return M.B4.Decode(yZ,e)}},yk=n(78272),yS=n(24126),y_=(0,z.X)({unavailable:[J.l0.p(8)]}),yE=X.Dy.Object({type:X.Dy.Literal("workflows")}),yT={Content:function(e){var t=e.options.isActive;return(0,nw.P5)({controlName:"flag-work-flows",logFlagToAnalytics:!0})?(0,U.tZ)(yS.Z,{isActive:t}):(0,U.tZ)(H.G,{css:y_.unavailable,children:(0,U.tZ)(V.xv,{children:"Workflows is not available."})})},Icon:function(e){var t=e.size;return(0,U.tZ)(yk.Z,{size:t})},getTitle:function(){return"Workflows"},category:K.hc.WorkspaceFeatures,decode:function(e){return M.B4.Decode(yE,e)}},yR=n(97381),yD=n(1716),yI=n(56632),yB=n(63740),yG=function(){var e=(0,N._)((0,ee.useReducer)(function(){return Math.random()},Math.random()),2);return[e[0],e[1]]},yP=function(e){var t,n=e.ours,r=e.theirs,i=(0,N._)(yG(),2),o=i[0],a=i[1],l=(0,tW.Z)((t=(0,tM._)(function(e){var t,i,o,a,l,c,s;return(0,tF.Jh)(this,function(u){switch(u.label){case 0:return[4,Promise.all([e.log({max:100,revRange:n}),null!==r?e.log({max:100,revRange:"".concat(n,"..").concat(r)}):null,null!==r?e.log({max:100,revRange:"".concat(r,"..").concat(n)}):null])];case 1:if(t=u.sent(),o=(i=(0,N._)(t,3))[0],a=i[1],l=i[2],o.error)return[2,o];if(null==a?void 0:a.error)return[2,a];if(null==l?void 0:l.error)return[2,l];return[2,{error:null,both:o.commits,theirs:null!==(c=null==a?void 0:a.commits)&&void 0!==c?c:[],ours:null!==(s=null==l?void 0:l.commits)&&void 0!==s?s:[]}]}})}),function(e){return t.apply(this,arguments)}),[n,r,o]);return[(0,ee.useMemo)(function(){return null===l?{error:null}:l.error?l:{error:null,both:id(l.both,l.theirs,l.ours),theirs:l.theirs,ours:l.ours}},[l]),a]},yA=function(){var e,t=(0,Y.Z)().git,n=(0,N._)((0,ee.useState)({loading:!1,error:null}),2),r=n[0],i=n[1];return[(0,ee.useCallback)((e=(0,tM._)(function(e){var n,r,o,a,l;return(0,tF.Jh)(this,function(c){switch(c.label){case 0:return n=e.remote,r=e.branch,a=void 0!==(o=e.allowConflicts)&&o,i({loading:!0,error:null}),[4,t.pull({mode:to.Tt.MERGE,allowConflicts:a,experimental_override_remote:{name:n,branch:r}})];case 1:return(l=c.sent()).error?i({loading:!1,error:l.error}):(i({loading:!1,error:null}),t.forceRefresh()),[2]}})}),function(t){return e.apply(this,arguments)}),[t]),r]},yL=function(e){var t,n,r,i,o,a,l,c,s,u,d,f,h,p,m,v,g,y,b,w,Z,x=e.selectedReplId,C=(t=null!=x?x:null,(r=(0,tW.Z)((n=(0,tM._)(function(e){var n;return(0,tF.Jh)(this,function(r){switch(r.label){case 0:if(!t)return[2,{hasStarted:!1,error:null,remote:null}];return[4,rJ({git:e,replId:t})];case 1:if((n=r.sent()).error)return[2,{hasStarted:!0,error:n.error}];return[2,{hasStarted:!0,error:null,remote:n.remote}]}})}),function(e){return n.apply(this,arguments)}),[t]))&&r.hasStarted?r.error?{state:"Error",error:r.error}:{state:"Success",error:null,remote:r.remote}:{state:"Loading",error:null}),k=(0,N._)(yA(),2),S=k[0],_=k[1],E=(0,N._)((o=(i=(0,N._)(yG(),2))[0],a=i[1],[(0,tW.Z)((l=(0,tM._)(function(e){var t;return(0,tF.Jh)(this,function(n){switch(n.label){case 0:return[4,e.getRepositoryState()];case 1:return(t=n.sent()).error,[2,t]}})}),function(e){return l.apply(this,arguments)}),[o]),a]),2),T=E[0],R=E[1],D=(0,N._)((s=(c=(0,N._)(yG(),2))[0],u=c[1],[(0,tW.Z)((d=(0,tM._)(function(e){var t;return(0,tF.Jh)(this,function(n){switch(n.label){case 0:return[4,e.status()];case 1:return(t=n.sent()).error,[2,t]}})}),function(e){return d.apply(this,arguments)}),[s]),u]),1)[0],I=(0,N._)(yP({ours:"main",theirs:x?rq({replId:x,branch:"main"}):null}),2),B=I[0],G=I[1],P=(0,N._)((h=(f={remoteName:x?rj(x):null,onCompleted:function(){R(),G()}}).remoteName,p=f.onCompleted,v=(m=(0,N._)((0,ee.useState)(!1),2))[0],g=m[1],b=(y=(0,N._)(yG(),2))[0],w=y[1],(0,tW.Z)((Z=(0,tM._)(function(e){var t;return(0,tF.Jh)(this,function(n){switch(n.label){case 0:if(!h)return[2,{error:null}];return g(!0),[4,e.fetch({remote:h})];case 1:return t=n.sent(),g(!1),null==t.error&&p(),[2,t]}})}),function(e){return Z.apply(this,arguments)}),[h,b]),[v,w]),2);return{state:T,status:D,commits:B,isFetching:P[0],refetch:P[1],remote:C,pull:{state:_,doPull:function(e){"Success"===C.state&&S((0,em._)((0,ep._)({},e),{remote:C.remote.name}))}}}},yN=ee.createContext(null);function yO(){var e=(0,ee.useContext)(yN);if(null===e)throw Error("useProjectGitState must be used inside a ProjectGitStateProvider");return e}var yU=n(37731),yX=n(46954),yM=n(91174);function yF(){var e=(0,eK._)(["\n  fragment ProjectMergeSectionRepl on Repl {\n    id\n    title\n  }\n"]);return yF=function(){return e},e}var yW=(0,eQ.Ps)(yF()),yV=n(22583);function yH(){var e=(0,eK._)(["\n  fragment ReplToReplMergeOrg on Org {\n    id\n    slug\n  }\n"]);return yH=function(){return e},e}function yz(){var e=(0,eK._)(["\n  fragment ReplMergeRelatedRepl on Repl {\n    id\n    url\n    nextPagePathname\n    ...ReplSelectorRepl\n  }\n  ","\n"]);return yz=function(){return e},e}function yj(){var e=(0,eK._)(["\n  fragment ReplToReplMergeProject on Project {\n    id\n    mainRepl {\n      id\n      ...ReplMergeRelatedRepl\n    }\n  }\n  ","\n"]);return yj=function(){return e},e}function yq(){var e=(0,eK._)(["\n  fragment ReplToReplMergeCurrentRepl on Repl {\n    id\n    ...ProjectMergeSectionRepl\n  }\n  ","\n"]);return yq=function(){return e},e}function yJ(){var e=(0,eK._)(["\n  query ReplToReplMergeGetRelatedRepls($id: String!) {\n    repl(id: $id) {\n      __typename\n      ... on Repl {\n        id\n        project {\n          id\n          repls {\n            items {\n              ...ReplMergeRelatedRepl\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return yJ=function(){return e},e}var yY=(0,eQ.Ps)(yH()),y$=(0,eQ.Ps)(yz(),yV.$v),yK=(0,eQ.Ps)(yj(),y$),yQ=(0,eQ.Ps)(yq(),yW);function y0(){var e=(0,eK._)(["\n  fragment ProjectReplsComboBoxRepl on Repl {\n    id\n    ...ReplMergeRelatedRepl\n  }\n  ","\n"]);return y0=function(){return e},e}function y1(){var e=(0,eK._)(["\n  query ProjectReplsComboBox($id: String!, $replsInput: ProjectReplsInput!) {\n    repl(id: $id) {\n      __typename\n      ... on Repl {\n        id\n        project {\n          id\n          mainRepl {\n            ...ProjectReplsComboBoxRepl\n          }\n          repls(input: $replsInput) {\n            items {\n              ...ProjectReplsComboBoxRepl\n            }\n            pageInfo {\n              nextCursor\n              hasNextPage\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return y1=function(){return e},e}yJ();var y2={},y3=(0,eQ.Ps)(y0(),y$),y4=(0,eQ.Ps)(y1(),y3),y8=(0,z.X)({replSelector:[J.l0.minWidth(300)],item:[J.l0.display.grid,J.l0.overflow("hidden"),{gap:4,gridAutoRows:"min-content",gridAutoFlow:"row",whiteSpace:"nowrap",textOverflow:"ellipsis"}],itemDetails:[J.l0.rowWithGap(8),J.l0.align.center]}),y6={username:"Unknown User",image:""},y5=function(e){var t,n,r=e.replId,i=e.onSelect,o=e.selectedReplId,a=(0,tc._)(e,["replId","onSelect","selectedReplId"]),l=(0,N._)((0,ee.useState)(""),2),c=l[0],s=l[1],u=(0,yX.Z)(c,250),d=(0,ax.Z)().showError,f=(0,N._)((0,ee.useState)({options:[],mainRepl:null,nextCursor:null}),2),h=f[0],p=f[1],m=(t=(0,ep._)({},y2,{variables:{id:r,replsInput:{count:10,filters:{title:{search:u}}}},ssr:!1,fetchPolicy:"cache-and-network",notifyOnNetworkStatusChange:!0,onCompleted:function(e){var t,n,r,i=e&&"Repl"===e.repl.__typename&&(null===(t=e.repl.project)||void 0===t?void 0:t.__typename)==="Project"?e.repl.project:null,o=(null==i?void 0:i.repls.__typename)==="ReplConnection"?i.repls:null;i&&o||d("Something went wrong loading Repls - please try again."),p({mainRepl:null!==(n=null==i?void 0:i.mainRepl)&&void 0!==n?n:null,nextCursor:(null==o?void 0:o.pageInfo.hasNextPage)&&o.pageInfo.nextCursor?o.pageInfo.nextCursor:null,options:null!==(r=null==o?void 0:o.items)&&void 0!==r?r:[]})}}),e0.a(y4,t)),v=m.loading,g=m.refetch,y=m.networkStatus,b=(n=(0,tM._)(function(){var e,t,n,i,o,a;return(0,tF.Jh)(this,function(l){switch(l.label){case 0:if(!(h.nextCursor&&y!==yU.I.fetchMore))return[3,2];return t=h.options,[4,g({id:r,replsInput:{count:10,filters:{title:{search:u}},cursor:h.nextCursor}})];case 1:(i=(n=l.sent())&&"Repl"===n.data.repl.__typename&&(null===(e=n.data.repl.project)||void 0===e?void 0:e.__typename)==="Project"&&"ReplConnection"===n.data.repl.project.repls.__typename?n.data.repl.project.repls:null)||d("Something went wrong loading Repls - please try again."),a=null!==(o=null==i?void 0:i.items)&&void 0!==o?o:[],p((0,em._)((0,ep._)({},h),{nextCursor:(null==i?void 0:i.pageInfo.hasNextPage)&&i.pageInfo.nextCursor?i.pageInfo.nextCursor:null,options:t.concat(a)})),l.label=2;case 2:return[2]}})}),function(){return n.apply(this,arguments)}),w=(0,eh.Z)(function(){var e=h.mainRepl,t=h.options.filter(function(e){return e.id!==r});return""===u&&e&&e.id!==r?[e].concat((0,O._)(t.filter(function(t){return t.id!==e.id}))):t},[h,r,u]),Z=(0,N._)((0,ee.useState)(!1),2),x=Z[0],C=Z[1];(0,ee.useEffect)(function(){if(!x){var e=w.find(function(e){return e.id===o});e&&(C(!0),""===c&&s(e.title))}},[x,c,o,w]);var k=(0,tb.Z)(i),S=(0,ee.useCallback)(function(e){var t=w.find(function(t){return t.id===e});t&&(k.current(t),s(t.title))},[w,k]);return(0,U.tZ)(yM.C,(0,em._)((0,ep._)({menuTrigger:"focus",inputValue:c,onInputChange:function(e){s(e)},onSelectionChange:S,items:w,selectedKey:o,css:y8.replSelector,loading:v,allowsEmptyCollection:!0,onLoadMore:b,emptyMessage:"No Repls found",maxHeight:200},a),{children:function(e){var t,n,r,i;return(0,U.BX)(f7.Hx,{textValue:e.title,children:[(0,U.tZ)(nN.q,{src:null!==(r=null===(t=e.owner)||void 0===t?void 0:t.image)&&void 0!==r?r:y6.image,username:null!==(i=null===(n=e.owner)||void 0===n?void 0:n.username)&&void 0!==i?i:y6.username,size:16}),(0,U.BX)(H.G,{css:y8.item,children:[(0,U.tZ)(V.xv,{children:e.title}),(0,U.BX)(H.G,{css:y8.itemDetails,children:[(0,U.tZ)(V.xv,{children:e.owner?"@".concat(e.owner.username):""}),h.mainRepl&&h.mainRepl.id===e.id?(0,U.tZ)(rW.D,{text:"Main Repl",variant:"filled"}):null]})]})]})}}))},y7=n(67839),y9=n(91620).lW,be=[{"& > span:first-child-of-type":[J.l0.flex.grow(1),J.l0.textAlign.left]},{"& > span":[J.l0.flex.shrink(1)]},J.l0.height("auto"),J.l0.p(8),J.l0.fontWeight.medium,J.l0.backgroundColor.backgroundHigher,J.l0.flex.row,J.l0.align.center,J.l0.justify.spaceBetween,J.l0.overflow("hidden"),J.l0.cursor.pointer],bt=(0,z.X)({buttonFolded:[be,J.l0.borderRadius(8)],buttonUnfolded:[be,J.l0.borderRadius(8,8,0,0)],rowContainer:[J.l0.align.center,J.l0.rowWithGap(8),J.l0.position.relative,J.l0.zIndex(1),J.l0.overflow("hidden")],diffContainer:[J.l0.flex.grow(1),J.l0.borderRadius(8)],bodyContainer:[J.l0.borderRadius(0,0,8,8),J.l0.p(8),J.l0.display.flex,J.l0.flex.row,J.l0.flex.wrap,J.l0.align.center,J.l0.justify.center,J.l0.backgroundColor.backgroundDefault,J.l0.border({color:J.TV.outlineDimmer,direction:"bottom"}),J.l0.border({color:J.TV.outlineDimmer,direction:"left"}),J.l0.border({color:J.TV.outlineDimmer,direction:"right"})],bodyLoading:[J.l0.p(8)],noChangesContainer:[J.l0.py(8),J.l0.px(8),J.l0.center,J.l0.width("100%")],innerContainer:[J.l0.display.flex,J.l0.align.center],splitContainer:[J.l0.p(8),J.l0.display.flex,J.l0.flex.row,J.l0.justify.spaceBetween,J.l0.maxWidth("100%"),J.l0.align.center],splitChild:[J.l0.align.center,J.l0.justify.center,{flexBasis:"50%"}],buttonGroupItem:[J.l0.width(64),J.l0.height(32)]}),bn=function(e){var t=e.folded,n=void 0!==t&&t,r=e.setFolded,i=e.diff,o="".concat(i.initial.path,"/").concat(i.initial.filename),a="".concat(i.final.path,"/").concat(i.final.filename);return(0,U.BX)(H.G,{css:n?bt.buttonFolded:bt.buttonUnfolded,onClick:function(){return r(!n)},children:[(0,U.BX)(H.G,{css:[bt.rowContainer,J.l0.flex.shrink(1)],children:["RENAMED"===i.status||"COPIED"===i.status?(0,U.BX)(U.HY,{children:[(0,U.tZ)(W.Z,{path:o}),(0,U.tZ)(V.xv,{multiline:!1,children:i.initial.filename}),""===i.initial.path?null:(0,U.tZ)(V.xv,{multiline:!1,color:"dimmest",css:[J.l0.fontWeight.normal],maxLines:1,children:i.initial.path}),(0,U.tZ)(eZ.Z,{}),(0,U.tZ)(W.Z,{path:a}),(0,U.tZ)(V.xv,{multiline:!1,children:i.final.filename}),""===i.final.path?null:(0,U.tZ)(V.xv,{multiline:!1,color:"dimmest",css:[J.l0.fontWeight.normal],children:i.final.path})]}):(0,U.BX)(U.HY,{children:[(0,U.tZ)(W.Z,{path:a}),(0,U.tZ)(V.xv,{multiline:!1,children:i.final.filename}),""===i.final.path?null:(0,U.tZ)(V.xv,{multiline:!1,color:"dimmest",css:[J.l0.fontWeight.normal],children:i.final.path})]}),(0,U.tZ)(tC.m,{textToCopy:a,tooltipText:"Copy Full Path",tooltipPlacement:"bottom-end"})]}),(0,U.BX)(H.G,{css:bt.rowContainer,children:[(0,U.tZ)(tT,{type:i.status}),(0,U.tZ)(F.hU,{alt:n?"Collapse diff":"Expand diff",onClick:function(){return r(!n)},children:n?(0,U.tZ)(tk.Z,{}):(0,U.tZ)(tS.Z,{})})]})]})},br=function(e){var t=e.diff,n=e.splitOrUnified,r=e.extensions;return"Split"===n?(0,U.tZ)(tw,{a:{filePath:t.initial.filename,doc:t.initial.content},b:{filePath:t.final.filename,doc:t.final.content,extensions:r},collapseUnchanged:{},style:{width:"100%"}}):(0,U.tZ)(tg.ZP,{filePath:t.final.filename,initialDoc:t.final.content,extensions:[tl.p.of(ta.xv.of(t.initial.content.split("\n")))],readOnly:!0,style:{width:"100%"}})},bi=function(e){return(0,et.T3)(e)?"media":(0,et.Mb)(e)?"ot":"binary"},bo=function(e){var t=e.content,n=e.type,r=e.filename,i=e.extensions;switch(n){case"media":return(0,U.tZ)(H.G,{css:[{display:"flex",height:"100%"}],children:(0,U.tZ)(tR.A,{content:t,mime:(0,et.yC)(r)})});case"ot":return(0,U.tZ)(tg.ZP,{filePath:r,initialDoc:t,readOnly:!0,style:{width:"100%"},extensions:i});default:return(0,U.tZ)(V.xv,{color:"dimmest",multiline:!1,children:"This binary file has changed."})}},ba=function(e){var t=e.diff,n=e.splitOrUnified,r=e.extensions;if(t.initial.content===t.final.content)return(0,U.tZ)(H.G,{css:bt.noChangesContainer,children:(0,U.tZ)(V.xv,{color:"dimmest",multiline:!1,children:"There are no changes to show."})});if("DELETED"===t.status)return(0,U.tZ)(H.G,{css:bt.noChangesContainer,children:(0,U.tZ)(V.xv,{color:"dimmest",multiline:!1,children:"This file has been deleted."})});var i=(0,y7.Z)(y9.from(t.initial.content))?"binary":bi(t.initial.filename),o=(0,y7.Z)(y9.from(t.final.content))?"binary":bi(t.final.filename);if("binary"===i||"binary"===o)return(0,U.tZ)(H.G,{css:bt.noChangesContainer,children:(0,U.tZ)(V.xv,{color:"dimmest",multiline:!1,children:"This binary file has changed."})});if("ADDED"===t.status)switch(o){case"media":return(0,U.tZ)(H.G,{css:bt.noChangesContainer,children:(0,U.tZ)(H.G,{css:bt.innerContainer,children:(0,U.tZ)(tR.A,{content:t.final.content,mime:(0,et.yC)(t.final.filename)})})});case"ot":return(0,U.tZ)(H.G,{css:bt.noChangesContainer,children:(0,U.tZ)(tg.ZP,{filePath:t.final.filename,initialDoc:t.final.content,readOnly:!0,style:{width:"100%"},extensions:r})});default:return(0,U.tZ)(H.G,{css:bt.noChangesContainer,children:(0,U.tZ)(V.xv,{color:"dimmest",multiline:!1,children:"This binary file has been added."})})}return"ot"===i&&"ot"===o?(0,U.tZ)(br,{diff:t,splitOrUnified:n,extensions:r}):(0,U.BX)(H.G,{css:bt.splitContainer,children:[(0,U.tZ)(H.G,{css:bt.splitChild,children:(0,U.tZ)(bo,{content:t.initial.content,type:i,filename:t.initial.filename,extensions:r})}),(0,U.tZ)(H.G,{css:bt.splitChild,children:(0,U.tZ)(bo,{content:t.final.content,type:o,filename:t.final.filename,extensions:r})})]})},bl=function(e){var t,n=e.diff,r=e.fetchDiffFileContents,i=e.splitOrUnified,o=(0,N._)((0,ee.useState)({expanded:!1,loading:!1,content:null,error:null}),2),a=o[0],l=o[1],c=(t=(0,tM._)(function(e){var t;return(0,tF.Jh)(this,function(i){switch(i.label){case 0:if(l((0,em._)((0,ep._)({},a),{expanded:!e,loading:null==a.content})),e)return[3,2];return[4,r(n)];case 1:t=i.sent(),l(function(e){return(0,em._)((0,ep._)({},e),{loading:!1,error:t.error?t.error:null,content:null==t.error?{initial:t.content.base,final:t.content.head}:null})}),i.label=2;case 2:return[2]}})}),function(e){return t.apply(this,arguments)});return(0,U.BX)(H.G,{css:bt.diffContainer,children:[(0,U.tZ)(bn,{folded:!a.expanded,setFolded:c,diff:n}),a.expanded?(0,U.BX)(ew.Tg,{css:bt.bodyContainer,elevated:!0,children:[a.error?(0,U.tZ)(e6.E,{colorway:"negative",icon:(0,U.tZ)(rg.Z,{}),text:a.error}):null,a.loading?(0,U.tZ)(H.G,{css:bt.bodyLoading,children:(0,U.tZ)(q.Z,{})}):null,a.content?(0,U.tZ)(ba,{diff:(0,em._)((0,ep._)({},n),{initial:(0,em._)((0,ep._)({},n.initial),{content:a.content.initial}),final:(0,em._)((0,ep._)({},n.final),{content:a.content.final})}),splitOrUnified:i}):null]}):null]},n.id)};function bc(){return(bc=(0,tM._)(function(e){var t,n;return(0,tF.Jh)(this,function(r){switch(r.label){case 0:return t=e.path,[4,e.fs.readFile(t,{fromDisk:!0})];case 1:if((n=r.sent()).error)return[2,{content:null,error:n.error}];return[2,{content:n.content.toString("utf8"),error:null}]}})})).apply(this,arguments)}function bs(e){return bu.apply(this,arguments)}function bu(){return(bu=(0,tM._)(function(e){var t,n,r;return(0,tF.Jh)(this,function(i){switch(i.label){case 0:if(t=e.file,n=e.fs,r=e.git,"Fs"!==t.type)return[3,2];return[4,function(e){return bc.apply(this,arguments)}({path:t.path,fs:n})];case 1:case 3:return[2,i.sent()];case 2:return[4,r.getFileContents({path:t.path,revision:t.revision,convertToBase64:(0,et.T3)(t.path)})]}})})).apply(this,arguments)}function bd(e){return bf.apply(this,arguments)}function bf(){return(bf=(0,tM._)(function(e){var t,n,r,i,o,a,l,c,s,u,d;return(0,tF.Jh)(this,function(f){switch(f.label){case 0:return t=e.fs,n=e.git,r=e.base,i=e.head,c=Promise.all,[4,bs({git:n,fs:t,file:i})];case 1:return s=[f.sent()],[4,bs({git:n,fs:t,file:r})];case 2:return[4,c.apply(Promise,[s.concat([f.sent()])])];case 3:if(a=(o=N._.apply(void 0,[f.sent(),2]))[0],(l=o[1]).error)return[2,{error:"fetchFileContentsForDiff could not fetch base file from ".concat(r.type," for ").concat(r.path),content:null}];if(a.error)return[2,{error:"fetchFileContentsForDiff could not fetch base file from ".concat(i.type," for ").concat(i.path),content:null}];return[2,{error:null,content:{base:null!==(u=l.content)&&void 0!==u?u:"",head:null!==(d=a.content)&&void 0!==d?d:""}}]}})})).apply(this,arguments)}(v=A||(A={})).Git="Git",v.Fs="Fs";var bh={z:!0,findCopies:!0,findCopiesHarder:!0,findRenames:!0,nameStatus:!0},bp={z:"-z",findCopies:"--find-copies",findCopiesHarder:"--find-copies-harder",findRenames:"--find-renames",nameStatus:"--name-status"};function bm(e){switch(e){case to.hF.UNMODIFIED:return null;case to.hF.MODIFIED:return to.yH.MODIFIED;case to.hF.TYPE_CHANGED:return to.yH.TYPE_CHANGED;case to.hF.DELETED:return to.yH.DELETED;case to.hF.RENAMED:return to.yH.RENAMED;case to.hF.COPIED:return to.yH.COPIED;case to.hF.UNTRACKED:case to.hF.UNMERGED:case to.hF.ADDED:return to.yH.ADDED;default:(0,nT.Z)(e)}}var bv=function(e,t){return""===e?t:"".concat(e,"/").concat(t)};function bg(e,t){return t.filter(function(t){var n="".concat(t.final.path,"/").concat(t.final.filename),r="".concat(t.initial.path,"/").concat(t.initial.filename);return n.toLowerCase().includes(e.toLowerCase())||r.toLowerCase().includes(e.toLowerCase())})}var by=(0,z.X)({container:[J.l0.colWithGap(16)],topRow:[J.l0.rowWithGap(8),J.l0.align.center,J.l0.justify.spaceBetween],topRowControls:[J.l0.rowWithGap(8)],diffSections:[J.l0.colWithGap(12)],diffs:[J.l0.colWithGap(8)],noChangesContainer:[J.l0.rowWithGap(4),J.l0.align.center]});function bb(e){var t=e.children,n=e.headerContent;return(0,U.BX)(H.G,{css:by.container,children:[(0,U.BX)(H.G,{css:by.topRow,children:[(0,U.tZ)(V.h4,{level:2,variant:"subheadDefault",children:"Changed Files"}),n]}),t]})}function bw(e){var t,n,r,i,o,a,l,c,s,u=(0,Y.Z)(),d=u.fs,f=u.git,h=(0,N._)((0,ee.useState)(""),2),p=h[0],m=h[1],v=(0,N._)((0,ee.useState)("Split"),2),g=v[0],y=v[1],b=(t={type:"revisionToRevisionDiff",head:e.head,base:e.base},n=(0,em._)((0,ep._)({},t),{flags:(0,em._)((0,ep._)({},bh),{nameStatus:!0})}),i=(0,tW.Z)((r=(0,tM._)(function(e){var t,r;return(0,tF.Jh)(this,function(i){switch(i.label){case 0:return t=function(e){var t,n=e.base,r=null!==(t=e.flags)&&void 0!==t?t:bh,i=["git","diff"];switch(Object.keys(r).forEach(function(e){bp[e]&&i.push(bp[e])}),e.type){case"revisionToRevisionDiff":i.push("".concat(n,"...").concat(e.head));break;case"revisionToIndexDiff":i.push("--staged",n);break;default:(0,nT.Z)(e)}return i}(n),[4,e.escapeHatchGitExecRead(t.join(" "),{serviceMethod:"useGitDiff"})];case 1:if((r=i.sent()).error||null===r.output)return[2,{error:to.aq.UNKNOWN}];return[2,{diff:r.output,error:null}]}})}),function(e){return r.apply(this,arguments)})),o=(0,eh.Z)(function(){return null==i?{loading:!0,error:null,data:null}:i.error?{loading:!1,error:i.error,data:null}:{loading:!1,error:null,data:i.diff}},[i]),(0,eh.Z)(function(){if(null==o||o.loading)return{loading:!0,error:null,data:null};if(o.error)return{loading:!1,error:o.error,data:null};var e,t=null!==(e=o.data)&&void 0!==e?e:"",n=(0,to.qE)(t),r=(0,to.Bi)(t);return{loading:!1,error:null,data:Array.from(new Set((0,O._)(n).concat((0,O._)(r)))).filter(function(e){return["DELETED","ADDED","MODIFIED","COPIED","RENAMED","TYPE_CHANGED"].includes(e.type)}).map(function(e){var t,n;return{id:(0,nt.v4)(),status:e.type,initial:{filename:(0,et.UO)(null!==(t=e.originalPath)&&void 0!==t?t:e.path),path:(0,et.Il)(null!==(n=e.originalPath)&&void 0!==n?n:e.path)},final:{filename:(0,et.UO)(e.path),path:(0,et.Il)(e.path)}}})}},[o])),w=(0,eh.Z)(function(){var e;return bg(p,null!==(e=b.data)&&void 0!==e?e:[])},[p,b]),Z=(a=(0,tM._)(function(t){return(0,tF.Jh)(this,function(n){switch(n.label){case 0:return[4,bd({git:f,fs:d,base:{type:A.Git,revision:e.base,path:bv(t.initial.path,t.initial.filename)},head:{type:A.Git,revision:e.head,path:bv(t.final.path,t.final.filename)}})];case 1:return[2,n.sent()]}})}),function(e){return a.apply(this,arguments)}),x=(l=yO().status,c=(0,eh.Z)(function(){return l&&null==l.error?l.changes:[]},[l]),(0,eh.Z)(function(){return c.map(function(e){var t,n,r,i,o=null!==(r=null!==(n=bm(e.type.worktree))&&void 0!==n?n:bm(e.type.index))&&void 0!==r?r:to.yH.UNKNOWN,a=null!==(i=null===(t=e.source)||void 0===t?void 0:t.path)&&void 0!==i?i:e.path;return{id:(0,nt.v4)(),status:o,initial:{filename:(0,et.UO)(a),path:(0,et.Il)(a)},final:{filename:(0,et.UO)(e.path),path:(0,et.Il)(e.path)}}})},[c])),C=(0,eh.Z)(function(){return bg(p,x)},[p,x]),k=(s=(0,tM._)(function(e){return(0,tF.Jh)(this,function(t){switch(t.label){case 0:return[4,bd({git:f,fs:d,base:{type:A.Git,revision:"HEAD",path:bv(e.initial.path,e.initial.filename)},head:{type:A.Fs,path:bv(e.final.path,e.final.filename)}})];case 1:return[2,t.sent()]}})}),function(e){return s.apply(this,arguments)});return b.loading?(0,U.tZ)(bb,{children:(0,U.tZ)(q.Z,{})}):b.error||null==b.data?(0,U.tZ)(bb,{children:(0,U.tZ)(V.xv,{children:"Something went wrong. Please try another Repl."})}):0===b.data.length&&0===x.length?(0,U.tZ)(bb,{children:(0,U.BX)(H.G,{css:by.noChangesContainer,children:[(0,U.tZ)(yB.Z,{}),(0,U.tZ)(V.xv,{children:"No changes to merge"})]})}):(0,U.tZ)(bb,{headerContent:(0,U.BX)(H.G,{css:by.topRowControls,children:[(0,U.tZ)(tB,{value:g,onChange:y}),(0,U.tZ)(nG.E,{value:p,onChange:function(e){m(e.target.value)},onClear:function(){m("")},loading:!1,placeholder:"Filter changed files"})]}),children:(0,U.BX)(H.G,{css:by.diffSections,children:[C.length?(0,U.BX)(H.G,{css:by.diffs,children:[(0,U.tZ)(V.h4,{level:3,variant:"text",color:"dimmer",children:"Uncommitted Changes"}),C.map(function(e){return(0,U.tZ)(bl,{diff:e,splitOrUnified:g,fetchDiffFileContents:k},e.id)})]}):null,w.length?(0,U.BX)(H.G,{css:by.diffs,children:[(0,U.tZ)(V.h4,{level:3,variant:"text",color:"dimmer",children:"Committed Changes"}),w.map(function(e){return(0,U.tZ)(bl,{diff:e,splitOrUnified:g,fetchDiffFileContents:Z},e.id)})]}):null]})})}var bZ=function(e){var t=e.selectedRepl,n=e.isMainRepl,r=rq({replId:t.id,branch:"main"}),i="HEAD";return(0,U.tZ)(bw,{base:n?i:r,head:n?r:i})};function bx(){var e=(0,N._)((0,ee.useState)(!1),2),t=e[0],n=e[1],r=(0,Y.Z)().fs;return(0,ee.useEffect)(function(){var e=!1,t=r.watchPathStat(".gitignore",{onNewStat:function(t){e||n(!t.exists)},onError:function(){}});return function(){e=!0,t()}},[r]),t?(0,U.tZ)(e6.E,{icon:(0,U.tZ)(lN.Z,{}),text:(0,U.BX)(V.xv,{children:["This project does not have a .gitignore file. It is recommended that all projects have a .gitignore file. You can find templates for .gitignore files for different languages"," ",(0,U.tZ)("a",{href:"https://github.com/github/gitignore",target:"_blank",rel:"noopener noreferrer",children:"here"}),"."]})}):null}var bC=(0,z.X)({self:[J.l0.colWithGap(12)]});function bk(e){var t,n=e.selectedRepl,r=(0,tW.Z)((t=(0,tM._)(function(e){var t;return(0,tF.Jh)(this,function(n){switch(n.label){case 0:return[4,e.getRepositoryState()];case 1:if((t=n.sent()).error)return[2,{error:null,message:"Something went wrong, this Repl's git state could not be read. Please make sure there is still a .git folder."}];if(t.state!==to.yG.CLEAN)return[2,{error:null,message:"This Repl has uncommitted changes. This will prevent any merges. Please undo or commit your changes before leaving the Repl."}];return[2,{error:null,message:null}]}})}),function(e){return t.apply(this,arguments)})),i=null==r?void 0:r.message;return(0,U.BX)(H.G,{css:bC.self,children:[(0,U.tZ)(V.h4,{level:2,variant:"subheadDefault",children:"Main Repl"}),(0,U.BX)(V.xv,{children:["You are in the main Repl for the project. If you want to merge in changes, head to"," ",n?(0,U.tZ)(s5(),(0,em._)((0,ep._)({target:"_blank"},(0,gK.aq)(n,{projectPane:!0})),{children:n.title})):"a fork","."]}),i?(0,U.tZ)(e6.E,{icon:(0,U.tZ)(lN.Z,{}),colorway:"negative",text:i}):null]})}var bS=n(37782),b_=n(62699),bE=n(26151),bT=n(88397),bR=n(71793);function bD(){var e=(0,eK._)(["\n  query PushToRemoteRepl($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        title\n        ...CrosisContextRepl\n      }\n    }\n    currentUser {\n      id\n      ...CrosisContextCurrentUser\n    }\n  }\n  ","\n  ","\n"]);return bD=function(){return e},e}var bI={},bB=(0,eQ.Ps)(bD(),bR.C,bR.D);function bG(){return(bG=(0,tM._)(function(e){var t,n,r;return(0,tF.Jh)(this,function(i){switch(i.label){case 0:return t=e.git,n=e.commitMessage,[4,t.stageFiles({all:!0})];case 1:if(i.sent().error)return[2,{success:!1,error:"Could not commit your changes"}];return[4,t.getRepositoryState()];case 2:if((r=i.sent()).error)return[2,{success:!1,error:"Could not commit your changes"}];if(r.state!==to.yG.DIRTY_INDEX)return[3,4];return[4,t.commit({message:n})];case 3:if(i.sent().error)return[2,{success:!1,error:"Could not commit your changes"}];i.label=4;case 4:return[2,{success:!0,error:null}]}})})).apply(this,arguments)}var bP=(0,z.X)({self:[J.l0.colWithGap(8)],message:[J.l0.rowWithGap(6)],infoIcon:[J.l0.color.foregroundDimmer,{marginTop:3}],infoMessage:{flex:1}});(g=L||(L={})).CannotMerge="CannotMerge",g.NothingToMerge="NothingToMerge",g.OnlyUncommittedChanges="OnlyUncommittedChanges",g.UncommittedAndCommittedChanges="UncommittedAndCommittedChanges",g.OnlyCommittedChanges="OnlyCommittedChanges";var bA=function(){var e,t,n=yO(),r=n.commits,i=n.state;if((null==i?void 0:i.error)!=null||!(null==i?void 0:i.type)||i.type!==to.y5.NORMAL||(null==i?void 0:i.state)==null||null!=r.error||!(null==r?void 0:r.ours))return"CannotMerge";var o=i.state===to.yG.DIRTY_WORKTREE||i.state===to.yG.DIRTY_INDEX,a=!!((null==r?void 0:null===(e=r.ours)||void 0===e?void 0:e.length)&&(null==r?void 0:null===(t=r.ours)||void 0===t?void 0:t.length)>0);return o&&!a?"OnlyUncommittedChanges":o&&a?"UncommittedAndCommittedChanges":!o&&a?"OnlyCommittedChanges":"NothingToMerge"};function bL(e){var t,n,r,i,o,a,l,c,s,u,d,f,h,p,m,v,g,y=e.sourceRepl,b=e.destinationRepl,w=e.projectId,Z=e.mainReplId,x=e.orgId,C=(0,ax.Z)().showError,k=(0,a$.U)()("includeUncommittedChanges"),S=(0,N._)((0,ee.useState)(!1),2),_=S[0],E=S[1],T=(0,N._)((n=(t={destinationReplId:b.id,sourceReplId:y.id,onSuccess:function(e){var t=e.didAutoCommit;(0,yD.u)({action:"merge",orgId:x,projectId:w,autoCommitEnabled:t,sourceReplType:y.id===Z?"mainRepl":"devRepl",destinationReplType:b.id===Z?"mainRepl":"devRepl"})}}).sourceReplId,r=t.destinationReplId,i=t.onSuccess,o=(0,Y.Z)().git,a=(0,ee.useRef)(null),c=(l=(0,N._)((0,ee.useState)(!1),2))[0],s=l[1],d=(u=(0,ax.Z)()).showError,f=u.showConfirm,h=(0,ep._)({},bI,{variables:{id:r}}),p=e0.a(bB,h),m=(0,ee.useCallback)(function(){if(!p.data)return null;var e=p.data,t=e.repl,n=e.currentUser;if(!n||"Repl"!==t.__typename)return null;if(a.current){if(a.current.replId===t.id&&a.current.currentUserId===n.id)return a.current;a.current.container.close()}var r=(0,bS.ZP)({onUnrecoverableError:function(e){tV.Tb(e,{tags:{projects:!0},extra:{replid:t.id}})}});r.connect({context:(0,b_.U)({repl:t,currentUser:n}),getMinimumRetryDelayMs:function(){return 0}});var i=(0,du.Z)({container:r}),o=(0,bE.Z)({container:r,fs:i}),l=(0,bT.ZP)({container:r,fs:i,enableReplspaceSshTokenPassthrough:!0});return a.current={container:r,git:o,fs:i,replspace:l,replId:t.id,currentUserId:n.id},a.current},[p.data]),(0,ee.useEffect)(function(){if(a.current){var e=a.current.container;return function(){e.close()}}},[]),[(0,ee.useCallback)((0,tM._)(function(){var e,t,r,a,l,c,u,h,v,g,y=arguments;return(0,tF.Jh)(this,function(b){switch(b.label){case 0:if(e=(y.length>0&&void 0!==y[0]?y[0]:{autoCommit:!1}).autoCommit,null==(r=(null===(t=p.data)||void 0===t?void 0:t.repl.__typename)==="Repl"?p.data.repl:null))return d("Please try again."),[2];a=r.title,s(!0),b.label=1;case 1:if(b.trys.push([1,7,8,9]),!e)return[3,3];return[4,function(e){return bG.apply(this,arguments)}({git:o,commitMessage:e.message})];case 2:if((l=b.sent()).error)return d(l.error),[2];b.label=3;case 3:if(!(c=m()))return d('Could not merge: the "'.concat(a,'" Repl could not be reached, please try again.')),[2];return[4,(u=c.git).getRepositoryState()];case 4:if((h=b.sent()).error)return d('Could not merge: the "'.concat(a,"\" Repl's git state could not be read, please try again.")),[2];if(h.state!==to.yG.CLEAN)return d('Could not merge: the "'.concat(a,'" Repl has uncommitted changes, please open that repl and commit or reset any changes.')),[2];return[4,rJ({git:u,replId:n})];case 5:if(b.sent().error)return d('Could not merge: the "'.concat(a,'" Repl could not be reached, please try again.')),[2];return[4,u.pull({experimental_override_remote:{name:rj(n),branch:"main"},allowConflicts:!1,mode:to.Tt.REBASE})];case 6:if((v=b.sent()).error){switch(v.error){case to.aq.MERGE_CONFLICT:g="this would result in a merge conflict. Get the latest changes in your repl, then try again.";break;case to.aq.DIRTY_WORKTREE:g='the "'.concat(a,'" Repl has uncommitted changes, please open that repl and commit or reset any changes.');break;case to.aq.HEAD_DETACHED:g='the "'.concat(a,'" Repl is on an unknown branch, please open that repl and checkout a branch before merging.');break;default:g='please check the "'.concat(a,'" Repl or try again.')}return d("Could not merge: ".concat(g)),[2]}return f("Changes pushed!"),o.forceRefresh(),null==i||i({didAutoCommit:!!e}),[3,9];case 7:return b.sent(),d("Could not merge: something went wrong, please try again."),[3,9];case 8:return s(!1),[7];case 9:return[2]}})}),[p,m,n,d,f,o,i]),{loading:c}]),2),R=T[0],D=T[1].loading,I=bA(),B="NothingToMerge"===I||"CannotMerge"===I||D,G="Automatic commit for ".concat(y.title);switch(I){case"NothingToMerge":g="You do not have any commits to merge in yet";break;case"CannotMerge":g="You cannot merge right now";break;case"OnlyUncommittedChanges":case"UncommittedAndCommittedChanges":case"OnlyCommittedChanges":g="Your changes will be pulled into ".concat(b.title);break;default:(0,nT.Z)(I)}var P=(v=(0,tM._)(function(){return(0,tF.Jh)(this,function(e){switch(e.label){case 0:switch(I){case"NothingToMerge":return[3,1];case"CannotMerge":return[3,2];case"OnlyCommittedChanges":return[3,3];case"UncommittedAndCommittedChanges":return[3,5];case"OnlyUncommittedChanges":return[3,7]}return[3,9];case 1:return C("No changes to merge"),[3,10];case 2:return C("You cannot merge right now"),[3,10];case 3:return[4,R({autoCommit:!1})];case 4:case 6:case 8:return e.sent(),[3,10];case 5:return[4,R({autoCommit:!!_&&{message:G}})];case 7:return[4,R({autoCommit:{message:G}})];case 9:(0,nT.Z)(I),e.label=10;case 10:return[2]}})}),function(){return v.apply(this,arguments)});return(0,U.BX)(H.G,{css:bP.self,children:[(0,U.tZ)(tU.u,{tooltip:g,isDisabled:null===g,placement:"top",maxWidth:300,children:(0,U.tZ)(eb.zx,{colorway:"primary",text:"Merge changes into ".concat(b.title),disabled:B,onClick:P,loading:D,iconLeft:D?(0,U.tZ)(q.Z,{}):void 0})}),"OnlyUncommittedChanges"===I?(0,U.BX)(H.G,{css:bP.message,children:[(0,U.tZ)(lN.Z,{css:bP.infoIcon}),(0,U.tZ)(V.xv,{color:"dimmer",css:bP.infoMessage,children:"All changes are uncommitted, so they will be automatically committed when you merge"})]}):null,"UncommittedAndCommittedChanges"===I?(0,U.BX)(H.G,{css:bP.message,children:[(0,U.tZ)(rp.X,{id:k,checked:_,onChange:E}),(0,U.tZ)(fh._,{htmlFor:k,children:(0,U.tZ)(V.xv,{color:"dimmer",children:"Include uncommitted changes in merge"})}),(0,U.tZ)(tU.u,{tooltip:"Any changes you have not committed will be automatically committed and merged",delay:"default",children:(0,U.tZ)(lN.Z,{css:bP.infoIcon})})]}):null]})}var bN=(0,hA.$)(["commit-text-foreground","commit-extended-text-foreground","commit-graph-color","segment-grid-area"]),bO=bN.cssVars,bU=bN.styleTokens,bX=[J.l0.position.absolute,{top:6,left:3,width:10,height:10,borderRadius:"50%"}],bM=(0,z.X)({graph:[J.l0.display.grid,{gridTemplateAreas:'\n        "title-left title-left"\n        "action-left action-left"\n        "left left"\n        "spacer title-right"\n        "spacer action-right"\n        "spacer right"\n        "split-left split-right"\n        "common common"',gridTemplateColumns:"minmax(16px, min-content) 1fr",gridTemplateRows:"min-content ".repeat(8).trim()},(0,ti._)({},J.nC.min("tabletMin"),{gridTemplateAreas:'\n          "title-left title-right"\n          "action-left action-right"\n          "left right" \n          "split-left split-right"  \n          "common common"',gridTemplateColumns:"1fr 1fr",gridTemplateRows:"min-content ".repeat(5).trim()})],segment:[J.l0.flex.column,J.l0.align.start,J.l0.justify.end,{listStyleType:"none",gridArea:bU["segment-grid-area"],minWidth:0,maxWidth:"100%"}],action:[J.l0.flex.row,J.l0.py(4),J.l0.rowWithGap(8),{gridArea:bU["segment-grid-area"]}],title:[{gridArea:bU["segment-grid-area"]}],commit:[J.l0.flex.row,J.l0.align.start,J.l0.justify.start,J.l0.pr(8),{minWidth:0,maxWidth:"100%"},{'&[data-interactive="true"]':[nI.gU.nofill,J.l0.border({width:0})]}],decoration:[J.l0.position.relative,{height:"100%",width:16}],commitDot:[bX,{backgroundColor:bU["commit-graph-color"]}],commitDotUntracked:[bX,{"&:before":[bX,{boxSizing:"border-box",top:-2,left:-2,content:'""',border:"2px dashed ".concat(bU["commit-graph-color"])}],border:"2px solid ".concat(J.TV.accentPrimaryStronger)}],line:[{marginLeft:"auto",marginRight:"auto",position:"absolute",width:"2px",left:"calc(50% - ".concat(1,"px)"),height:"calc(100% - ".concat(8,"px)"),backgroundColor:bU["commit-graph-color"],transform:"translateY(".concat(15,"px)")},{background:"linear-gradient(to top, transparent 0%,  ".concat(bU["commit-graph-color"]," ").concat(10,"px)")},{"li:last-child  &":{height:"calc(100% - ".concat(15,"px)"),background:"none",backgroundColor:bU["commit-graph-color"]}}],commitColumn:[J.l0.viewStyle,J.l0.colWithGap(8),J.l0.minHeight(24),{minWidth:0,maxWidth:"calc(100% - ".concat(16,"px)"),overflow:"hidden"}],commitMessage:[{color:bU["commit-text-foreground"]}],commitDescription:[{color:bU["commit-extended-text-foreground"]}],splitLeft:[{gridArea:"split-left",position:"relative",height:16,width:"100%"}],splitRight:[{gridArea:"split-right",position:"relative",height:16,width:16}],curveRight:[J.l0.position.absolute,{bottom:0,left:7,borderRadius:"100% 0 0 0",borderTop:"2px solid ".concat(bU["commit-graph-color"]),borderLeft:"2px solid ".concat(bU["commit-graph-color"]),height:9,width:9}],curveUp:[J.l0.position.absolute,{top:0,left:0,borderRadius:"0 0 100% 0",borderBottom:"2px solid ".concat(bU["commit-graph-color"]),borderRight:"2px solid ".concat(bU["commit-graph-color"]),height:9,width:9}],fullLine:[{position:"absolute",width:2,height:"100%",left:7,backgroundColor:bU["commit-graph-color"]}],sidewaysLine:[{position:"absolute",width:"calc(100% - ".concat(16,"px)"),height:2,left:16,top:7,backgroundColor:bU["commit-graph-color"]}],compactLine:[J.l0.height("100%"),J.l0.position.relative,{gridArea:"spacer"},(0,ti._)({},J.nC.min("tabletMin"),{display:"none"})]}),bF=function(e){var t=e.children,n=e.hasLeft,r=e.hasRight;return(0,U.BX)(H.G,{css:bM.graph,children:[t,(0,U.tZ)(bz,{hasLeft:n,hasRight:r}),(0,U.tZ)("div",{css:bM.compactLine,children:(0,U.tZ)("div",{css:bM.decoration,children:(0,U.tZ)("div",{css:bM.fullLine,style:n?(0,ti._)({},bO["commit-graph-color"],J.TV.accentPrimaryDefault):{}})})})]})},bW=function(e){var t,n,r=e.children,i=e.area,o=e.title,a=e.action;if(!ee.Children.count(r))return null;var l="common"===i?(t={},(0,ti._)(t,bO["segment-grid-area"],i),(0,ti._)(t,bO["commit-graph-color"],J.TV.outlineDefault),(0,ti._)(t,bO["commit-text-foreground"],J.TV.foregroundDimmer),(0,ti._)(t,bO["commit-extended-text-foreground"],J.TV.foregroundDimmest),t):(n={},(0,ti._)(n,bO["segment-grid-area"],i),(0,ti._)(n,bO["commit-graph-color"],J.TV.accentPrimaryDefault),(0,ti._)(n,bO["commit-text-foreground"],J.TV.accentPrimaryStrongest),(0,ti._)(n,bO["commit-extended-text-foreground"],J.TV.foregroundDimmest),n);return(0,U.BX)(U.HY,{children:["common"===i?null:(0,U.tZ)(bH,{area:i,children:o}),"common"===i?null:(0,U.tZ)(bV,{area:i,children:a}),(0,U.tZ)(H.G,{style:l,tag:"ol",css:bM.segment,"aria-label":i,children:r})]})},bV=function(e){var t=e.children,n=e.area,r=(0,ti._)({},bO["segment-grid-area"],"action-".concat(n));return(0,U.tZ)(H.G,{style:r,css:bM.action,children:t})},bH=function(e){var t=e.children,n=e.area,r=(0,ti._)({},bO["segment-grid-area"],"title-".concat(n));return(0,U.tZ)(H.G,{style:r,css:bM.title,children:"string"==typeof t?(0,U.tZ)(V.h4,{level:3,variant:"subheadDefault",color:"dimmer",children:t}):t})},bz=function(e){var t=e.hasLeft,n=e.hasRight,r=(0,ti._)({},bO["commit-graph-color"],t?J.TV.accentPrimaryDefault:"transparent"),i=(0,ti._)({},bO["commit-graph-color"],n?J.TV.accentPrimaryDefault:"transparent");return t||n?(0,U.BX)(U.HY,{children:[(0,U.BX)("div",{css:bM.splitLeft,children:[(0,U.BX)("div",{css:bM.decoration,children:[(0,U.tZ)("div",{css:bM.line,"data-line":!0,style:r}),(0,U.tZ)("div",{css:bM.fullLine,"data-full-line":!0,style:r})]}),(0,U.tZ)("div",{css:bM.curveRight,style:i}),(0,U.tZ)("div",{css:bM.sidewaysLine,style:i})]}),(0,U.tZ)("div",{css:bM.splitRight,style:i,children:(0,U.tZ)("div",{css:bM.curveUp})})]}):null},bj=function(e){var t=e.onClick,n=e.children,r=e.className;return t?(0,U.tZ)(eb.Yd,{className:r,onPress:t,css:J.l0.reset.button,children:n}):(0,U.tZ)("div",{className:r,children:n})},bq=function(e){var t=e.message,n=e.description,r=e.type,i=e.onClick;return(0,U.BX)(H.G,{tag:"li",css:bM.commit,"data-interactive":!!i,children:[(0,U.BX)("div",{css:bM.decoration,children:[(0,U.tZ)("div",{css:bM.line}),(0,U.tZ)("div",{css:"working"===r?bM.commitDotUntracked:bM.commitDot})]}),(0,U.BX)(bj,{onClick:i,css:bM.commitColumn,children:[(0,U.tZ)(V.xv,{multiline:!1,css:bM.commitMessage,style:"working"===r?(0,ti._)({},bO["commit-text-foreground"],J.TV.accentPrimaryStronger):{},children:t}),n?(0,U.tZ)(V.xv,{css:bM.commitDescription,children:n}):null]})]})},bJ=n(35574),bY=(0,z.X)({input:[J.l0.py(0),J.l0.minHeight(24),J.l0.pl(12)]}),b$=function(){var e,t=(0,Y.Z)().git;return(0,ee.useCallback)((e=(0,tM._)(function(e){return(0,tF.Jh)(this,function(n){switch(n.label){case 0:return[4,t.stageFiles({all:!0})];case 1:return n.sent(),[4,t.commit({message:e,allowEmpty:!1})];case 2:return n.sent(),t.forceRefresh(),[2]}})}),function(t){return e.apply(this,arguments)}),[t])},bK=function(e){var t,n=e.onDone,r=(0,N._)((0,ee.useState)(""),2),i=r[0],o=r[1],a=b$(),l=(0,N._)((0,ee.useState)(!1),2),c=l[0],s=l[1],u=(t=(0,tM._)(function(e){return(0,tF.Jh)(this,function(t){switch(t.label){case 0:if(!("Enter"===e.key&&e.metaKey))return[3,2];return e.stopPropagation(),e.preventDefault(),s(!0),[4,a(i)];case 1:t.sent(),s(!1),t.label=2;case 2:return"Escape"===e.key&&(o(""),n()),[2]}})}),function(e){return t.apply(this,arguments)});return(0,U.tZ)(eg.II,{autoFocus:!0,autoCapitalize:"off","aria-label":"Commit message",placeholder:"cmd+enter to commit",onKeyDown:u,onChange:function(e){o(e.target.value)},disabled:c,onBlur:n,css:bY.input})};function bQ(){var e=(0,eK._)(["\n  query ProjectCommitGraphRemoteRepl($id: String!) {\n    repl(id: $id) {\n      ... on Repl {\n        id\n        title\n      }\n    }\n  }\n"]);return bQ=function(){return e},e}var b0={},b1=(0,eQ.Ps)(bQ()),b2=function(){var e=(0,N._)((0,ee.useState)(!1),2),t=e[0],n=e[1];return t?(0,U.tZ)("li",{children:(0,U.tZ)(bK,{onDone:function(){return n(!1)}})}):(0,U.tZ)(bq,{type:"working",message:"uncommitted changes",onClick:function(){return n(!0)}})},b3=function(e){var t,n,r,i,o,a,l,c,s,u,d,f=(u={variables:{id:e.selectedRepl.id}},d=(0,ep._)({},b0,u),e0.a(b1,d)).data,h=yO(),p=h.state,m=h.commits,v=(null==p?void 0:p.error)?null:null!==(l=null==p?void 0:p.state)&&void 0!==l?l:null,g=(null==p?void 0:p.error)?null:null!==(c=null==p?void 0:p.type)&&void 0!==c?c:null,y=(null==f?void 0:null===(t=f.repl)||void 0===t?void 0:t.__typename)==="Repl"&&f.repl.title||"Remote",b=g===to.y5.NORMAL&&v!==to.yG.CLEAN;if(null==m?void 0:m.error)return(0,U.tZ)(V.xv,{children:m.error});var w=!!(null==m?void 0:null===(n=m.theirs)||void 0===n?void 0:n.length),Z=!!(null==m?void 0:null===(r=m.ours)||void 0===r?void 0:r.length)||b;return(0,U.BX)(bF,{hasLeft:w,hasRight:Z,children:[w?(0,U.tZ)(bW,{area:"left",title:y,children:null==m?void 0:null===(i=m.theirs)||void 0===i?void 0:i.map(function(e){return(0,U.tZ)(bq,{message:e.subject,description:"".concat(e.author.name,", ").concat((0,bJ.F)(e.author.date))},e.hash)})}):null,Z?(0,U.BX)(bW,{area:"right",title:"My workspace",children:[b?(0,U.tZ)(b2,{}):null,null==m?void 0:null===(o=m.ours)||void 0===o?void 0:o.map(function(e){return(0,U.tZ)(bq,{message:e.subject,description:"".concat(e.author.name,", ").concat((0,bJ.F)(e.author.date))},e.hash)})]}):null,(0,U.tZ)(bW,{area:"common",children:null==m?void 0:null===(a=m.both)||void 0===a?void 0:a.map(function(e){return(0,U.tZ)(bq,{message:e.subject,description:"".concat(e.author.name,", ").concat((0,bJ.F)(e.author.date))},e.hash)})})]})},b4=function(e){var t=(0,N._)((0,ee.useState)(function(){return(0,nx.MT)()}),1)[0];return(0,U.BX)(nC.Provider,{value:t,children:[(0,U.tZ)(rN,{}),(0,U.tZ)(b3,(0,ep._)({},e))]})},b8=(0,z.X)({header:[J.l0.p(8),J.l0.rowWithGap(2),J.l0.border({color:J.TV.outlineDimmest,direction:"bottom"})],headerLeft:[J.l0.rowWithGap(8),J.l0.flex.wrap,J.l0.align.center,{flex:1}],comboBoxAndActions:[J.l0.rowWithGap(8),J.l0.flex.wrap,J.l0.flex.shrink(1)],iconButtonSet:[J.l0.rowWithGap(0)],iconButton:[J.l0.height(32),J.l0.width(28),J.l0.color.foregroundDimmer,J.l0.hover(J.l0.color.foregroundDefault)],headerRight:[J.l0.rowWithGap(8)],swapIcon:[J.l0.color.foregroundDimmest,{rotate:"90deg"}],warnings:[J.l0.colWithGap(12),J.l0.p(8),{"&:empty":J.l0.display.none}],toggle:[J.l0.minWidth(123)],loading:[J.l0.rowWithGap(8),J.l0.justify.center,J.l0.p(8)],buttons:[J.l0.rowWithGap(8)],errorView:[J.l0.rowWithGap(8),J.l0.justify.center],viewSection:[J.l0.px(8),J.l0.py(12),{":not(:last-of-type)":J.l0.border({color:J.TV.outlineDimmest,direction:"bottom"})}]}),b6=function(e){var t=e.selectedRepl,n=e.currentRepl,r=e.remoteResult,i=e.tab,o=e.isMainRepl;return t?"Loading"===r.state?(0,U.tZ)(q.Z,{}):"Error"===r.state?(0,U.tZ)(V.xv,{children:"Something went wrong, please try again."}):"changes"===i?(0,U.tZ)(bZ,{selectedRepl:t,isMainRepl:o}):(0,U.tZ)(b4,{selectedRepl:t,currentRepl:n}):(0,U.tZ)(V.xv,{children:"Select a Repl to compare against your current Repl."})};function b5(e){var t,n,r,i,o,a=e.repl,l=e.project,c=e.openGitPane,s=e.org,u=!!l.mainRepl&&a.id===l.mainRepl.id,d=(0,N._)((0,ee.useState)(u?null:null!==(n=l.mainRepl)&&void 0!==n?n:null),2),f=d[0],h=d[1],p=(0,N._)((0,ee.useState)("changes"),2),m=p[0],v=p[1],g=function(){return v("changes"===m?"commits":"changes")};(0,ee.useEffect)(function(){(0,yD.u)({action:"tabOpened",orgId:s.id,projectId:l.id,tab:m,replType:u?"mainRepl":"devRepl"})},[m,l,s,u]);var y=yL({selectedReplId:null!==(r=null==f?void 0:f.id)&&void 0!==r?r:null}),b=y.isFetching,w=y.refetch,Z=y.state,x=y.remote,C=y.pull,k=C.doPull,S=C.state,_=S.error,E=S.loading,T=(null==Z?void 0:Z.error)?null:null!==(i=null==Z?void 0:Z.state)&&void 0!==i?i:null;return(0,U.tZ)(yN.Provider,{value:y,children:(0,U.BX)(H.G,{children:[(0,U.BX)(H.G,{css:b8.header,children:[(0,U.BX)(H.G,{css:b8.headerLeft,children:["changes"===m?(0,U.tZ)(eb.zx,{css:b8.toggle,text:"Changes",iconLeft:(0,U.tZ)(yB.Z,{}),iconRight:(0,U.tZ)(r4.Z,{css:b8.swapIcon}),onClick:g},"toggle"):(0,U.tZ)(eb.zx,{css:b8.toggle,text:"Commits",iconLeft:(0,U.tZ)(tX.Z,{}),iconRight:(0,U.tZ)(r4.Z,{css:b8.swapIcon}),onClick:g},"toggle"),(0,U.tZ)(V.xv,{color:"dimmer",multiline:!0,children:"compared against"}),(0,U.BX)(H.G,{css:b8.comboBoxAndActions,children:[(0,U.tZ)(y5,{"aria-label":"Select a Repl",replId:a.id,selectedReplId:null!==(o=null==f?void 0:f.id)&&void 0!==o?o:null,onSelect:h}),(0,U.BX)(H.G,{css:b8.iconButtonSet,children:[(0,U.tZ)(F.hU,{alt:"Pull",onClick:function(){k({branch:"main"}),(0,yD.u)({action:"pull",orgId:s.id,projectId:l.id,replType:u?"mainRepl":"devRepl"})},disabled:E||u,css:b8.iconButton,children:b?(0,U.tZ)(q.Z,{}):(0,U.tZ)(ot.Z,{})}),f?(0,U.tZ)(yI.I,(0,em._)((0,ep._)({alt:"Go to ".concat(f.title),target:"_blank"},(0,gK.aq)(f,{projectPane:!0})),{css:b8.iconButton,children:(0,U.tZ)(r1.Z,{})})):null]})]})]}),(0,U.tZ)(H.G,{css:b8.headerRight,children:(0,U.tZ)(F.hU,{alt:"Fetch",onClick:w,disabled:"Success"!==x.state,css:b8.iconButton,children:b?(0,U.tZ)(q.Z,{}):(0,U.tZ)(rr.Z,{})})})]}),(0,U.BX)(H.G,{css:b8.warnings,children:[_===to.aq.DIRTY_WORKTREE?(0,U.tZ)(H.G,{css:b8.errorView,children:(0,U.tZ)(e6.E,{colorway:"negative",icon:(0,U.tZ)(rg.Z,{}),text:"You have uncommitted changes. Please commit them before pulling."})}):null,_===to.aq.MERGE_CONFLICT?(0,U.BX)(H.G,{css:b8.errorView,children:[(0,U.tZ)(e6.E,{colorway:"negative",icon:(0,U.tZ)(rg.Z,{}),text:"There were conflicts in the changes you are trying to pull. Click to resolve them."}),(0,U.tZ)(eb.zx,{text:"Resolve Manually",onClick:function(){c(),k({branch:"main",allowConflicts:!0}),(0,yD.u)({projectId:l.id,orgId:s.id,action:"pullWithConflicts",replType:u?"mainRepl":"devRepl"})},colorway:"negative"})]}):null,T===to.yG.MERGING?(0,U.tZ)(e6.E,{colorway:"primary",text:"Merge in progress"}):null,T===to.yG.REBASING?(0,U.tZ)(e6.E,{colorway:"primary",text:"Rebase in progress"}):null,(0,U.tZ)(bx,{})]}),u?(0,U.tZ)(H.G,{css:b8.viewSection,children:(0,U.tZ)(bk,{selectedRepl:null!=f?f:void 0})}):null,!u&&f?(0,U.tZ)(H.G,{css:b8.viewSection,children:(0,U.tZ)(bL,{destinationRepl:f,sourceRepl:a,projectId:l.id,mainReplId:null===(t=l.mainRepl)||void 0===t?void 0:t.id,orgId:s.id})}):null,(0,U.tZ)(H.G,{css:b8.viewSection,children:(0,U.tZ)(b6,{currentRepl:a,selectedRepl:f,remoteResult:x,isMainRepl:u,tab:m})})]})})}function b7(){var e=(0,eK._)(["\n  query ProjectPane($id: String!) {\n    repl(id: $id) {\n      __typename\n      ... on Repl {\n        id\n        ...ReplToReplMergeCurrentRepl\n        project {\n          ...ReplToReplMergeProject\n          org {\n            ...ReplToReplMergeOrg\n          }\n        }\n      }\n    }\n  }\n  ","\n  ","\n  ","\n"]);return b7=function(){return e},e}var b9={},we=(0,eQ.Ps)(b7(),yQ,yK,yY),wt=n(9929),wn=(0,z.X)({container:[J.l0.p(8)],loading:[J.l0.rowWithGap(8),J.l0.justify.center,J.l0.p(16)]});function wr(e){var t,n,r,i=e.isActive,o=e.performPaneOperation,a=(0,e$.Z)(),l=(0,wt.B)(),c=(t=(0,ep._)({},b9,{variables:{id:a}}),e0.a(we,t)),s=c.data,u=c.loading,d=c.error,f=(null==s?void 0:s.repl.__typename)==="Repl"?s.repl:null,h=(null==f?void 0:null===(n=f.project)||void 0===n?void 0:n.__typename)==="Project"?f.project:null,p=(null==h?void 0:null===(r=h.org)||void 0===r?void 0:r.__typename)==="Org"?h.org:null,m=(0,ax.Z)().showError,v="error"===l.state?l.error:null;return((0,ee.useEffect)(function(){v&&m(v)},[m,v]),lw(i),u||"loading"===l.state)?(0,U.tZ)(H.G,{css:wn.loading,children:(0,U.tZ)(q.Z,{})}):p&&h?d||!f?(0,U.tZ)(H.G,{css:wn.container,children:(0,U.tZ)(V.xv,{children:"Something went wrong, please try again."})}):(0,U.tZ)(b5,{repl:f,project:h,org:p,openGitPane:function(){return o({operation:"open",pane:{type:"git"}})}}):(0,U.tZ)(H.G,{css:wn.container,children:(0,U.tZ)(V.xv,{children:"This Repl is not a project!"})})}var wi=X.Dy.Object({type:X.Dy.Literal("project")}),wo={Content:function(e){var t=e.options,n=t.isActive,r=t.performPaneOperation;return(0,U.tZ)(wr,{isActive:n,performPaneOperation:r})},Icon:function(){return(0,U.tZ)(yR.Z,{})},getTitle:function(){return"Project"},description:"Manage changes in your Project and sync or merge changes across Repls in the Project",category:K.hc.WorkspaceFeatures,decode:function(e){return M.B4.Decode(wi,e)}},wa=X.Dy.Object({type:X.Dy.Literal("devdocs")}),wl={Content:function(e){return(0,U.tZ)("iframe",{title:"DevDocs",height:"100%",src:"https://devdocs.io"})},Icon:function(e){var t=e.size;return(0,U.tZ)(te.Pd.Provider,{value:{color:tt.TV.foregroundDimmer,size:t},children:(0,U.tZ)(dK.Z,{})})},getTitle:function(){return"DevDocs"},getTitlePill:function(){return{text:"Staff-only",colorway:"warning"}},description:"Documentation for common software platforms & APIs",category:K.hc.Other,decode:function(e){return M.B4.Decode(wa,e)}},wc=n(21751),ws=n(34860),wu=X.Dy.Object({type:X.Dy.Literal("agentPlan")}),wd={Content:function(e){return(0,U.tZ)(ws.Z,{})},Icon:function(e){var t=e.size;return(0,U.tZ)(te.Pd.Provider,{value:{color:tt.TV.blurpleStrongest,size:t},children:(0,U.tZ)(wc.Z,{})})},getTitle:function(){return"Plan"},category:K.hc.WorkspaceFeatures,decode:function(e){return M.B4.Decode(wu,e)}};function wf(){return{codeEditor:ea.D,webview:mJ.R,media:ss,binary:ei,pedit:pU,vnc:mq,unitTests:mO,adminPanel:v2,runnerOutput:pq.G,shell:mG,dependencies:gT,envEditor:ny,draw:nh,git:lx,diff:t1,history:cJ,database:tr,neon:dq,markdown:sl,ssh:yC,ghostwriterChat:g2,problems:pj,networking:fo,objectStorage:pT,workflows:yT,project:wo,devdocs:wl,agentPlan:wd}}},58988:function(e,t,n){n.d(t,{Qk:function(){return d},el:function(){return u}});var r=n(27387),i=n(96583),o=n(75271),a=n(49853),l=n(6038),c=n(83960),s=(0,a.cn)(!1),u=function(e){var t=(0,l.$X)(s);(0,o.useEffect)(function(){return e.watch(function(e){var n,r;if(e.error){if("NOT_FOUND"===e.error){t(!0);return}t(!1)}t(!(null===(r=e.config)||void 0===r?void 0:null===(n=r.autoSave)||void 0===n?void 0:n.disabled))})},[e,t])},d=function(){return(0,l.Hg)(s)};(0,r._)(function(e,t){return(0,i.Jh)(this,function(n){switch(n.label){case 0:return[4,e.updateDotReplit([(0,c.Bn)(!t)])];case 1:return[2,n.sent()]}})})},50938:function(e,t,n){n.d(t,{T:function(){return o},u:function(){return a}});var r=n(6038),i=(0,n(49853).cn)(null);function o(){return(0,r.$X)(i)}function a(){return(0,r.Hg)(i)}},66610:function(e,t,n){n.d(t,{mK:function(){return s},qm:function(){return l},xx:function(){return c}});var r=n(49853),i=n(75271),o=n(6038),a=(0,r.cn)(!1);function l(){return(0,o.Hg)(a)}function c(){var e=(0,o.$X)(a);return(0,i.useCallback)(function(){return e(!0)},[e])}function s(e){var t=(0,o.$X)(a),n=(0,i.useRef)(!1);(0,i.useEffect)(function(){n.current||(n.current=!0,t(e))},[t,e])}},21289:function(e,t,n){n.d(t,{a9:function(){return a},kM:function(){return l}});var r=n(49853),i=n(6038),o=(0,r.cn)(null);function a(){return(0,i.$X)(o)}function l(){return(0,i.Hg)(o)}},69536:function(e,t,n){n.d(t,{Nd:function(){return U},OY:function(){return N},Li:function(){return M},bB:function(){return O},BV:function(){return L}});var r=n(66626),i=n(63257),o=n(49853),a=n(62537),l=n(65559),c=n(6038),s=n(14118),u=n(16155),d=n(79685),f=n(42965),h=n(59978),p=n(42564),m=n(48424),v=n(93371),g=n(81147),y=n(21285),b=n(43454),w=n(85983),Z=n(7391),x=n(75271),C=n(82098),k=n(41733),S=n(21262),_=n(71440),E=n(9122);function T(){var e=(0,S._)(["\n  fragment WorkspaceToolPanesRepl on Repl {\n    isModelSolution\n    isProject\n    isProjectFork\n    workspaceCta\n    authorizations {\n      editFileContents {\n        isAuthorized\n      }\n      editPermissions {\n        isAuthorized\n      }\n    }\n    authorizations {\n      viewDeploymentConfig {\n        isAuthorized\n      }\n    }\n    config {\n      isServer\n      isVnc\n    }\n  }\n"]);return T=function(){return e},e}function R(){var e=(0,S._)(["\n  query WorkspaceToolPanes($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        ...WorkspaceToolPanesRepl\n      }\n    }\n    currentUser {\n      id\n      isAdmin: hasRole(role: ADMIN)\n    }\n  }\n  ","\n"]);return R=function(){return e},e}var D={},I=(0,_.Ps)(T()),B=(0,_.Ps)(R(),I),G=(0,o.cn)([]),P=["shell","git","diff","envEditor","deployments","database","neon","ghostwriterChat","unitTests","submitEduRepl","preferences","docs","multiplayer","objectStorage","adminPanel","ssh","webview","problems","dependencies","project","workflows"],A=["ghostwriterChat","deployments"];function L(){return(0,c.Hg)(G)}function N(){return(0,c.XD)(G)}function O(){var e,t,n,i,o,l,S,_=(0,c.$X)(G),T=(o=(null==(i=(t={variables:{replId:(0,u.Z)()}},n=(0,k._)({},D,t),E.a(B,n)).data)?void 0:null===(e=i.repl)||void 0===e?void 0:e.__typename)==="Repl"?null==i?void 0:i.repl:null)?{repl:o,currentUser:(null==i?void 0:i.currentUser)||null}:{repl:null,currentUser:null},R=T.repl,I=T.currentUser,L=(0,Z.useRouter)(),N=(0,f.T3)(),O=(0,s.P5)({controlName:"flag-neon-databases",logFlagToAnalytics:!1}),U=(0,s.P5)({controlName:"flag-postgres-db-god-mode",logFlagToAnalytics:!1}),X=!!(null==R?void 0:null===(S=R.authorizations)||void 0===S?void 0:null===(l=S.viewDeploymentConfig)||void 0===l?void 0:l.isAuthorized),M=(0,s.P5)({controlName:"flag-problems-pane",logFlagToAnalytics:!1}),F=(0,s.P5)({controlName:"flag-object-storage-pane"}),W=(0,s.P5)({controlName:"flag-work-flows",logFlagToAnalytics:!0}),V=(0,s.P5)({controlName:"flag-doc-your-devs"}),H=(0,p.J)().hasProject,z=(0,v.cR)(),j=(0,m.Z)().language,q=(0,g.T)(),J=(0,b.Ln)(),Y=(0,y.Z)().isTutorial,$=(0,h.I)().configs.some(function(e){return"nix"!==e.id}),K=(0,C.WG)(),Q=(null==I?void 0:I.isAdmin)||!!L.query.debug,ee=(0,a.Se)(),et=(0,d.T)();(0,x.useEffect)(function(){var e=N&&(null==R?void 0:R.authorizations.editPermissions.isAuthorized)?[{type:"multiplayer"}]:[];if(R&&I){var t=!et,n=R.isProject||R.isProjectFork,i=!et,o=!n&&null!==j,a=U||!et&&O,l=[[{type:"shell"},!0],[{type:"instructions"},J],[{type:"threadInbox"},!0],[{type:"chat"},!0],[{type:"docs",data:{url:null}},!0],[{type:"webview"},!0],[{type:"vnc"},t],[{type:"runnerOutput"},!et],[{type:"git"},!0],[{type:"dependencies"},!0],[{type:"envEditor"},!0],[{type:"debugger"},!0],[{type:"tutorial"},Y],[{type:"database"},i],[{type:"neon"},a],[{type:"replAuth"},$],[{type:"autograder"},n],[{type:"unitTests"},o],[{type:"education"},!!q],[{type:"preferences"},!0],[{type:"adminPanel"},Q],[{type:"deployments"},X],[{type:"ssh"},!0],[{type:"ghostwriterChat"},!0],[{type:"searchReplace"},!0],[{type:"extensionStore",data:{page:"store"}},!0],[{type:"extensionDevtools"},z],[{type:"problems"},M],[{type:"networking"},!0],[{type:"objectStorage"},F],[{type:"workflows"},W],[{type:"project"},H],[{type:"devdocs"},V]];if(N){var c=R.workspaceCta===w.Sy.Submit||R.workspaceCta===w.Sy.Resubmit;l.push([{type:"submitEduRepl"},c])}var s=!0,u=!1,d=void 0;try{for(var f,h=K[Symbol.iterator]();!(s=(f=h.next()).done);s=!0){var p=f.value;l.push([{type:"extension",data:{extensionId:p.extension.extensionId,installationId:p.extension.installationId,name:p.name||p.extension.manifest.name,icon:p.icon||p.extension.manifest.icon,baseUrl:p.extension.baseUrl,path:p.handler}},!0])}}catch(e){u=!0,d=e}finally{try{s||null==h.return||h.return()}finally{if(u)throw d}}var m=!0,v=!1,g=void 0;try{for(var y,b=l[Symbol.iterator]();!(m=(y=b.next()).done);m=!0){var Z=(0,r._)(y.value,2),x=Z[0];Z[1]&&(!N||P.includes(x.type))&&e.push(x)}}catch(e){v=!0,g=e}finally{try{m||null==b.return||b.return()}finally{if(v)throw g}}_(e.map(function(e){return{title:ee.getTitle(e),pane:e}}).sort(function(e,t){return A.includes(e.pane.type)?-1:A.includes(t.pane.type)?1:e.title.localeCompare(t.title)}).map(function(e){return e.pane}))}},[_,N,R,I,$,j,U,O,J,Y,q,Q,X,z,M,K,ee,F,W,et,H,V])}var U=8,X=(0,o.cn)(function(e){var t=Array.from(e(l.Yn).values()).flat(),n=e(l.LX),r=(0,i._)(t).concat((0,i._)(n)).sort(function(e,t){return t.lastActiveAt-e.lastActiveAt}),o=[],c=!0,s=!1,u=void 0;try{for(var d,f=r[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var h=function(){var e=d.value;return o.length===U?"break":(0,a.RX)(e.pane.type)||"commands"===e.pane.type?"continue":void(-1===o.findIndex(function(t){return t.type===e.pane.type})&&o.push(e.pane))}();if("break"===h)break}}catch(e){s=!0,u=e}finally{try{c||null==f.return||f.return()}finally{if(s)throw u}}return o});function M(){return(0,c.yL)(X)}},76848:function(e,t,n){n.d(t,{G8:function(){return D},mj:function(){return B},Fq:function(){return T},am:function(){return E},iM:function(){return H},gG:function(){return F},mh:function(){return eo},nR:function(){return k},IV:function(){return V},IP:function(){return z},uL:function(){return en},Vg:function(){return X},sA:function(){return ei},xI:function(){return _},lP:function(){return R},DW:function(){return M},e8:function(){return O},D:function(){return N},Oo:function(){return x},QF:function(){return P},s2:function(){return ee}});var r=n(27387),i=n(41733),o=n(96583),a=n(21781),l=n(49853),c=n(6038),s=n(75271),u=n(31417),d=n(66626),f=n(40703),h=n(80951),p=n(41974),m=n(29043),v=n(3341),g=n.n(v),y=n(42943),b=n.n(y),w=n(67827),Z=(0,l.cn)(void 0);function x(){return(0,c.Hg)(Z)}var C=(0,l.cn)(function(e){return void 0===e(Z)});function k(){return(0,c.Hg)(C)}var S=(0,l.cn)(null,function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=(0,p.Uy)(e(Z),n);return t(Z,i),r.persist&&e(et).persist(),i});function _(){var e=(0,c.$X)(S);return(0,s.useCallback)(function(t,n){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).persist;return e(function(e){var r,i=null==e?void 0:null===(r=e.workflow)||void 0===r?void 0:r[t];i&&n(i)},{persist:r})},[e])}function E(){var e=(0,c.$X)(S);return(0,s.useCallback)(function(t){return e(function(e){var n;null==e||null===(n=e.workflow)||void 0===n||n.splice(t,1)},{persist:!0})},[e])}function T(){var e=_();return(0,s.useCallback)(function(t){return e(t.workflowIndex,function(e){null==e||e.tasks.splice(t.taskIndex,1)},{persist:!0})},[e])}function R(){var e=_();return(0,s.useCallback)(function(t,n,r){var i=r.persist;return e(t.workflowIndex,function(e){e.tasks[t.taskIndex]=n},{persist:i})},[e])}function D(){var e=_();return(0,s.useCallback)(function(t){return e(t,function(e){var t,n=null!==(t=e.tasks[e.tasks.length-1])&&void 0!==t?t:{};e.tasks.push(n?(0,i._)({},n):{task:"shell.exec",args:"ls"})})},[e])}var I=(0,l.cn)(null,function(e,t,n){var r=t(S,function(e){e.workflow?e.workflow.push(n):e.workflow=[n]},{persist:!0});return b()(null==r?void 0:r.workflow),r.workflow.length-1});function B(){return(0,c.$X)(I)}var G=(0,l.cn)(void 0);function P(){return(0,c.Hg)(G)}var A=(0,l.cn)(function(e){var t,n=e(Z);return null!==(t=null==n?void 0:n.workflow)&&void 0!==t?t:[]}),L=(0,h.kv)(A,function(e){var t;return null!==(t=null==e?void 0:e.map(function(e,t){return t}))&&void 0!==t?t:[]},g());function N(){return(0,c.Hg)(A)}function O(){return(0,c.Hg)(L)}function U(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var a,l=Object.values(e)[Symbol.iterator]();!(r=(a=l.next()).done);r=!0){var c=a.value;c.workflow.name===t&&n.push(c)}}catch(e){i=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(i)throw o}}return n.length?n.sort(function(e,t){return e.startTime-t.startTime}):null}function X(e){var t,n;return(0,c.Hg)((t=e.workflowIndex,n=e.taskIndex,(0,s.useMemo)(function(){return(0,h.kv)(A,function(e){var r;return e?null===(r=e[t])||void 0===r?void 0:r.tasks[n]:null})},[t,n])))}function M(e){return(0,c.Hg)((0,s.useMemo)(function(){return(0,h.kv)(A,function(t){return t?t[e]:null})},[e]))}function F(){return(0,c.XD)(A)}function W(e){var t=(0,s.useMemo)(function(){return(0,l.cn)(function(t){var n,r=null===(n=t(A)[e])||void 0===n?void 0:n.name;if(!r)return null;var i=t(G);return i?U(i,r):null})},[e]);return(0,s.useMemo)(function(){return(0,h.kv)(t,function(e){return e?e[e.length-1]:null})},[t])}function V(e){return(0,c.Hg)(W(e))}function H(e){return(0,c.XD)(W(e))}function z(e){var t;return(0,c.yL)((t=W(e),(0,s.useMemo)(function(){return(0,h.kv)(t,function(e){return(null==e?void 0:e.step)===a.KX.RUNNING})},[t])))}function j(){return(j=(0,r._)(function(e,t){var n;return(0,o.Jh)(this,function(r){switch(r.label){case 0:return[4,e.updateDotReplit([(null===(n=t.workflow)||void 0===n?void 0:n.length)?{path:"workflows",op:"add",value:JSON.stringify(t)}:{path:"workflows",op:"remove",value:""}])];case 1:if(r.sent().error)return[2,(0,m.UG)("Error applying update")];return[2,(0,m.Ok)(null)]}})})).apply(this,arguments)}var q=(0,l.cn)(function(e){var t=e(Z);if(!(null==t?void 0:t.workflow)||!(null==t?void 0:t.runButton))return null;var n=!0,r=!1,i=void 0;try{for(var o,a=t.workflow[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var l=o.value;if(l.name===t.runButton)return l}}catch(e){r=!0,i=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}return null}),J=(0,h.kv)(q,function(e){var t;return null!==(t=null==e?void 0:e.name)&&void 0!==t?t:null}),Y=(0,l.cn)(function(e){var t=e(q);if(!t)return null;var n=e(G);if(!n)return null;var r=U(n,t.name);return(null==r?void 0:r[0])?r:null}),$=(0,h.kv)(Y,function(e){var t;return null!==(t=null==e?void 0:e[e.length-1])&&void 0!==t?t:null}),K=(0,h.kv)($,function(e){var t;return null!==(t=null==e?void 0:e.step)&&void 0!==t?t:null}),Q=(0,h.kv)($,function(e){var t;return null!==(t=null==e?void 0:e.runId)&&void 0!==t?t:null});function ee(){var e=(0,c.XD)(Q),t=(0,c.Hg)(J),n=(0,c.Hg)(K),r=(0,w.U)(function(e){return function(){return!!t&&e.workflows.runWorkflow.rpc({workflowId:t})}},[t]),i=(0,w.U)(function(t){return function(){var n=e();return!!n&&t.workflows.stopRun.rpc({runId:n})}},[e]);return t?{run:r,stop:i,step:n}:null}var et=(0,l.cn)({persist:(0,r._)(function(){return(0,o.Jh)(this,function(e){return[2,(0,m.Ok)(null)]})})});function en(){var e=(0,c.XD)(et);return(0,s.useCallback)(function(){return(0,e().persist)()},[e])}var er=(0,l.cn)(!1);function ei(e){var t=(0,c.$X)(er);(0,s.useEffect)(function(){t(e)},[t,e]),(0,s.useEffect)(function(){return function(){t(!1)}},[t,e])}function eo(e){var t,n,i,a,l=e.dotReplit,h=(0,c.XD)(Z),p=(0,c.$X)(Z),v=(0,c.XD)(er);n=(t={onWorkflowsConfigChange:(0,s.useCallback)(function(e){var t=h();t&&v()||g()(e,t)||p(e||{})},[p,h,v]),onRunStateChange:(0,c.$X)(G)}).onWorkflowsConfigChange,i=t.onRunStateChange,(0,f.C)((a=(0,r._)(function(e,t){var a,l;function c(){return(c=(0,r._)(function(){var t,r,i,a,c,s,f,h,p,m;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return[4,e.workflows.config.subscribe({})];case 1:r=(t=d._.apply(void 0,[o.sent(),2]))[0],i=t[1],l(i),a=!1,c=!1,o.label=2;case 2:o.trys.push([2,7,8,13]),f=(0,u._)(r),o.label=3;case 3:return[4,f.next()];case 4:if(!(a=!(h=o.sent()).done))return[3,6];if(!(p=h.value).ok)return[3,5];n(p.payload.config),o.label=5;case 5:return a=!1,[3,3];case 6:return[3,13];case 7:return m=o.sent(),c=!0,s=m,[3,13];case 8:if(o.trys.push([8,,11,12]),!(a&&null!=f.return))return[3,10];return[4,f.return()];case 9:o.sent(),o.label=10;case 10:return[3,12];case 11:if(c)throw s;return[7];case 12:return[7];case 13:return[2]}})})).apply(this,arguments)}function s(){return(s=(0,r._)(function(){var t,n,r,a,c,s,f,h,p,m;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return[4,e.workflows.runState.subscribe({})];case 1:n=(t=d._.apply(void 0,[o.sent(),2]))[0],r=t[1],l(r),a=!1,c=!1,o.label=2;case 2:o.trys.push([2,7,8,13]),f=(0,u._)(n),o.label=3;case 3:return[4,f.next()];case 4:if(!(a=!(h=o.sent()).done))return[3,6];if(!(p=h.value).ok)return[3,5];i(p.payload.state),o.label=5;case 5:return a=!1,[3,3];case 6:return[3,13];case 7:return m=o.sent(),c=!0,s=m,[3,13];case 8:if(o.trys.push([8,,11,12]),!(a&&null!=f.return))return[3,10];return[4,f.return()];case 9:o.sent(),o.label=10;case 10:return[3,12];case 11:if(c)throw s;return[7];case 12:return[7];case 13:return[2]}})})).apply(this,arguments)}return(0,o.Jh)(this,function(n){switch(n.label){case 0:return a=t.signal,l=t.addCleanup,[4,e.workflows.init.rpc({})];case 1:if(n.sent(),a.aborted)return[2];return[4,Promise.all([function(){return c.apply(this,arguments)}(),function(){return s.apply(this,arguments)}()])];case 2:return n.sent(),[2]}})}),function(e,t){return a.apply(this,arguments)}),[n,i]);var y=(0,c.yL)(Z),b=(0,c.$X)(et);(0,s.useEffect)(function(){b({persist:(0,r._)(function(){var e;return(0,o.Jh)(this,function(t){return(e=y.current)?[2,function(e,t){return j.apply(this,arguments)}(l,e)]:[2,(0,m.UG)("No config found")]})})})},[l,b,y])}},50900:function(e,t,n){n.d(t,{Z:function(){return d},r:function(){return m}});var r=n(27387),i=n(41733),o=n(66626),a=n(96583),l=n(25403);function c(){return(c=(0,r._)(function(e){return(0,a.Jh)(this,function(t){switch(t.label){case 0:return[4,new Promise(function(t){return setTimeout(function(){return t()},e)})];case 1:return t.sent(),[2]}})})).apply(this,arguments)}var s=n(1567),u=new RegExp(/(file:\/\/)?\/home\/runner\/[^/]+\/(.*)/);function d(e,t,n,r){return f.apply(this,arguments)}function f(){return(f=(0,r._)(function(e,t,n,i){var c,u,d;return(0,a.Jh)(this,function(f){switch(f.label){case 0:return u=(c=(0,o._)((0,l.F)(e-1,!1,t),2))[0],d=c[1]+1,[4,m(u,(0,r._)(function(){var e;return(0,a.Jh)(this,function(t){switch(t.label){case 0:return[4,i()];case 1:return[2,null===(e=t.sent())||void 0===e?void 0:e.files]}})}))];case 1:return[2,f.sent().map(function(e){var r=e.from,i=e.to,o=e.file,a=e.line,c=e.col;return{range:(0,l.b)(d,r,i,t),text:o,activate:function(e,t){(0,s.jh)(e)&&n({path:t,line:a,col:c})}}})]}})})).apply(this,arguments)}var h=/[a-zA-Z0-9_\-.[\]$@()]+/,p='", line ';function m(e,t){return v.apply(this,arguments)}function v(){return(v=(0,r._)(function(e,t){var n,r,o,l,s,d,f,m,v;return(0,a.Jh)(this,function(a){switch(a.label){case 0:return[4,Promise.race([t(),(function(e){return c.apply(this,arguments)})(5e3).then(function(){return[]})])];case 1:if(!(n=a.sent())||0===n.length)return[2,[]];for(r=[],o=0,l=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return e[o+t]},s=function(){var t=e[o];return o++,t},d=function(){var t=o;s();for(var n="";/\d/.test(l());)n+=s();if(0===n.length)return o=t,null;if(":"!==l())return{line:parseInt(n,10),col:0};s();for(var r="";o<e.length&&/\d/.test(l());)r+=s();return 0===r.length?(o--,{line:parseInt(n,10),col:0}):{line:parseInt(n,10),col:parseInt(r,10)}},f=function(){for(var t=o,n=0;n<p.length;n++)s();for(var r="";o<e.length&&/\d/.test(l());)r+=s();return 0===r.length?(o=t,null):{line:parseInt(r,10),col:0}},m=function(){var t=o,r="";for("."===l()&&"/"===l(1)&&(r+=s()+s()),("("===l()||"["===l())&&s();o<e.length;){var a=l();if(h.test(a))r+=s();else if("/"===a){if("/"===r[r.length-1])break;r+=s()}else break}var c={line:1,col:0};if(":"===l()){var m=d();m&&(c=m)}else if(e.substring(o,o+p.length)===p){var v=f();v&&(c=v,t--)}(r.startsWith("a/")||r.startsWith("b/"))&&(e.indexOf("diff --git ")>=0||e.indexOf("--- a/")>=0||e.indexOf("+++ b/")>=0)&&n.indexOf(r.substring(2))>=0&&(r=r.substring(2),t+=2);var g=r.replace(u,"$2").replace(/^\.?\//,"").trim();return g&&n.find(function(e){return e===g||e.substring(e.lastIndexOf("/")+1)===g})?(0,i._)({file:g,from:t,to:o},c):null};o<e.length;)(v=m())?r.push(v):s();return[2,r]}})})).apply(this,arguments)}},25403:function(e,t,n){function r(e,t,n,r){var i=n-t;return{start:{x:(t+1)%r.cols,y:e+Math.floor((t+1)/r.cols)},end:{x:(t+i)%r.cols,y:e+Math.floor((t+i)/r.cols)}}}function i(e,t,n){var r,i,o="";do{var a=n.buffer.active.getLine(e);if(!a)break;a.isWrapped&&e--,i=a.isWrapped}while(i);var l=e;do{var c=n.buffer.active.getLine(e+1);r=!!c&&c.isWrapped;var s=n.buffer.active.getLine(e);if(!s)break;o+=s.translateToString(!r&&t).substring(0,n.cols),e++}while(r);return[o,l]}n.d(t,{F:function(){return i},b:function(){return r}})},21781:function(e,t,n){n.d(t,{KX:function(){return o},PX:function(){return a},zY:function(){return D}});var r,i,o,a,l=n(41733),c=n(30509),s=n(74044);(r=o||(o={})).NOT_STARTED="NOT_STARTED",r.RUNNING="RUNNING",r.FINISHED="FINISHED",r.FAILED="FAILED",(i=a||(a={})).NOT_STARTED="NOT_STARTED",i.RUNNING="RUNNING",i.FINISHED="FINISHED",i.FAILED="FAILED",i.ERROR="ERROR";var u=s.Dy.Object({task:s.Dy.Literal("dummy.echo"),args:s.Dy.Optional(s.Dy.String())}),d=s.Dy.Object({task:s.Dy.Literal("dummy.echo")}),f=s.Dy.Object({task:s.Dy.Literal("dummy.print"),args:s.Dy.String()}),h=s.Dy.Object({task:s.Dy.Literal("dummy.print")}),p=s.Dy.Object({task:s.Dy.Literal("dummy.sleep"),args:s.Dy.Optional(s.Dy.Number({minimum:0}))}),m=s.Dy.Object({task:s.Dy.Literal("dummy.sleep")}),v=s.Dy.Object({task:s.Dy.Literal("dummy.pass")}),g=s.Dy.Object({task:s.Dy.Literal("dummy.pass")}),y=s.Dy.Object({task:s.Dy.Literal("dummy.fail")}),b=s.Dy.Object({task:s.Dy.Literal("dummy.fail")}),w=s.Dy.Object({task:s.Dy.Literal("shell.exec"),args:s.Dy.String()}),Z=s.Dy.Object({task:s.Dy.Literal("shell.exec"),cgroupPath:s.Dy.Optional(s.Dy.String())}),x=s.Dy.Object({task:s.Dy.Literal("workspace.openWebview"),args:s.Dy.Number({minimum:0})}),C=s.Dy.Object({task:s.Dy.Literal("workspace.openWebview")}),k=s.Dy.Object({task:s.Dy.Literal("packager.installForLanguage"),args:s.Dy.String()}),S=s.Dy.Object({task:s.Dy.Literal("packager.installForLanguage"),hasUserFacingOutput:s.Dy.Boolean()}),_=s.Dy.Object({task:s.Dy.Literal("packager.installForAll")}),E=s.Dy.Object({task:s.Dy.Literal("packager.installForAll"),hasUserFacingOutput:s.Dy.Boolean()}),T=s.Dy.Object({task:s.Dy.Literal("workflow.run"),args:s.Dy.String()}),R=s.Dy.Object({task:s.Dy.Literal("workflow.run"),runId:s.Dy.String()}),D=s.Dy.Union([u,y,v,f,p,_,k,w,T,x]),I=s.Dy.Union([d,b,g,h,m,E,S,Z,R,C]),B=s.Dy.Union([s.Dy.Literal("parallel"),s.Dy.Literal("sequential")]),G=s.Dy.Object({name:s.Dy.String(),mode:s.Dy.Optional(B),tasks:s.Dy.Array(D),author:s.Dy.Optional(s.Dy.Union([s.Dy.Literal("agent"),s.Dy.Number()]))});s.Dy.Object({workflows:s.Dy.Object({runButton:s.Dy.Optional(s.Dy.String()),workflow:s.Dy.Optional(s.Dy.Array(G))})}),s.Dy.Object({runButton:s.Dy.Optional(s.Dy.String()),workflow:s.Dy.Optional(s.Dy.Array(G))});var P={userIds:s.Dy.Array(s.Dy.Number()),metadata:s.Dy.Optional(I)},A=s.Dy.Union([s.Dy.Object((0,c._)((0,l._)({},P),{state:s.Dy.Literal("NOT_STARTED")})),s.Dy.Object((0,c._)((0,l._)({},P),{state:s.Dy.Literal("RUNNING"),startTime:s.Dy.Number()})),s.Dy.Object((0,c._)((0,l._)({},P),{state:s.Dy.Literal("FAILED"),startTime:s.Dy.Number(),endTime:s.Dy.Number(),result:s.Dy.Optional(s.Dy.Object({message:s.Dy.Optional(s.Dy.String()),exitCode:s.Dy.Optional(s.Dy.Number())}))})),s.Dy.Object((0,c._)((0,l._)({},P),{state:s.Dy.Literal("FINISHED"),startTime:s.Dy.Number(),endTime:s.Dy.Number(),result:s.Dy.Optional(s.Dy.Object({message:s.Dy.Optional(s.Dy.String()),exitCode:s.Dy.Optional(s.Dy.Number())}))})),s.Dy.Object((0,c._)((0,l._)({},P),{state:s.Dy.Literal("ERROR"),startTime:s.Dy.Number(),endTime:s.Dy.Number(),message:s.Dy.String()}))]);s.Dy.Record(s.Dy.String(),s.Dy.Object({runId:s.Dy.String(),startTime:s.Dy.Number(),endTime:s.Dy.Optional(s.Dy.Number()),step:s.Dy.Enum(o),tasks:s.Dy.Array(A),workflow:G}))},93322:function(e,t,n){n.d(t,{OO:function(){return r},Uw:function(){return i},vw:function(){return o}});var r="replit-repltuned-v1-5-3b",i={"replit-repltuned-v1-5-3b":{},"replit-v1-5-3b":{}},o=new Set(Object.keys(i))},49135:function(e,t,n){function r(e){return 15113696===e}function i(e){return 777914===e||r(e)||3944703===e||29762144===e}n.d(t,{v4:function(){return r},xm:function(){return i}})},2553:function(e,t,n){n.d(t,{I:function(){return i},z:function(){return r}});var r=100,i=250},18068:function(e,t,n){n.d(t,{r:function(){return r},u:function(){return i}});var r="flag-ai-modelfarm-usage-gating",i=function(e){return"https://docs.replit.com/replitai/model-farm/".concat(e,"#installation")}},98433:function(e,t,n){n.d(t,{z2:function(){return l}});var r=n(63257),i=n(93322),o=n(3102),a=[{id:"true",editorPreferencesValue:!0,title:"true"},{id:"false",editorPreferencesValue:!1,title:"false"}],l={layout:{id:"layout",name:"Default Layout",description:"Change the layout of the editor.",type:"select",editorPreferencesKey:"isLayoutStacked",options:[{id:"side-by-side",editorPreferencesValue:!1,title:"side-by-side"},{id:"stacked",editorPreferencesValue:!0,title:"stacked"}]},fontSize:{id:"fontSize",name:"Font Size",description:"Change the font size of the editor.",type:"select",editorPreferencesKey:"fontSize",options:[{id:"10",editorPreferencesValue:10,title:"tiny"},{id:"12",editorPreferencesValue:12,title:"small"},{id:"14",editorPreferencesValue:14,title:"normal"},{id:"18",editorPreferencesValue:18,title:"large"},{id:"24",editorPreferencesValue:24,title:"huge"}]},wrapping:{id:"wrapping",name:"Wrapping",description:"Change whether the editor wraps lines or not.",type:"select",editorPreferencesKey:"wrapping",options:[{id:"none",editorPreferencesValue:!1,title:"none"},{id:"soft",editorPreferencesValue:!0,title:"soft wrap"}]},minimap:{id:"minimap",name:"Minimap",description:"Change the minimap display.",type:"select",editorPreferencesKey:"minimapDisplay",options:[{id:"none",editorPreferencesValue:"none",title:"none"},{id:"blocks",editorPreferencesValue:"blocks",title:"blocks"},{id:"characters",editorPreferencesValue:"characters",title:"characters"}]},indentationDetection:{id:"indentDetection",name:"Indentation Detection",description:"Automatically detect indentation settings when opening a file.",type:"boolean",editorPreferencesKey:"indentDetection",options:a},indentFormatPastes:{id:"indentFormatPastes",name:"Format Pasted Text Indentation",description:"Automatically format the indentation of pasted text.",type:"boolean",editorPreferencesKey:"indentFormatPastes",options:a},indentIsSpaces:{id:"indentationCharacter",name:"Indentation Character",description:"The character used for indenting lines.",type:"select",editorPreferencesKey:"indentIsSpaces",options:[{id:"spaces",editorPreferencesValue:!0,title:"spaces"},{id:"tabs",editorPreferencesValue:!1,title:"tabs"}]},keyboardHandler:{id:"keyboardHandler",name:"Keybinds",description:"Use another keyboard mapping",type:"select",editorPreferencesKey:"keyboardHandler",options:[{id:"default",editorPreferencesValue:null,title:"default"},{id:"emacs",editorPreferencesValue:"emacs",title:"emacs"},{id:"vim",editorPreferencesValue:"vim",title:"vim"}]},showFileTreeGitStatus:{id:"showFileTreeGitStatus",name:"Filetree Git Status",description:"Show the Git status of files in the file tree.",type:"boolean",editorPreferencesKey:"showFileTreeGitStatus",options:a},codeIntelligence:{id:"codeIntelligence",name:"Code Intelligence",description:"Code intelligence gives you autocomplete, as well as hints as you type.",type:"boolean",editorPreferencesKey:"codeIntelligence",options:a},semanticTokens:{id:"semanticTokens",name:"Semantic Tokens",description:"Enables enhanced syntax highlighting from language servers.",type:"boolean",editorPreferencesKey:"semanticTokens",options:a},shellBellAudio:{id:"shellBellAudio",name:"Shell Bell Audible Indicator",description:"Play sound in the Shell on issues like a failed tab completion.",type:"boolean",editorPreferencesKey:"shellBellAudio",options:a},accessibleTerminal:{id:"accessibleTerminal",name:"Accessible Terminal Output",description:"Enable this setting to use a screen reader. Warning: this can negatively affect performance.",type:"boolean",editorPreferencesKey:"accessibleTerminal",options:a},webviewAutoOpenOnPortOpened:{id:"webviewAutoOpenOnPortOpened",name:"Automatic Webview",description:"Open a webview automatically when a port is open.",type:"boolean",editorPreferencesKey:"webviewAutoOpenOnPortOpened",options:a},forwardPortsAutomatically:{id:"forwardPortsAutomatically",name:"Forward Opened Ports Automatically",description:"Automatically configure detected newly opened ports.",type:"select",editorPreferencesKey:"forwardPortsAutomatically",options:[{id:"none",editorPreferencesValue:"none",title:"never"},{id:"only-global",editorPreferencesValue:"only-global",title:"all ports except localhost"},{id:"all",editorPreferencesValue:"all",title:"all ports"}]},chatAudioNotification:{id:"chatAudioNotification",name:"Chat Audio Notification",description:"Enables playing a sound when you receive a new chat message.",type:"boolean",editorPreferencesKey:"chatAudioNotification",options:a},multiselectModifierKey:{id:"multiselectModifierKey",name:"Multiselect Modifier Key",description:"Modifier key for selecting multiple items in the filetree.",type:"select",editorPreferencesKey:"multiselectModifierKey",options:[{id:"cmdOrCtrlKey",editorPreferencesValue:"cmdOrCtrlKey",title:"cmdOrCtrlKey"},{id:"altKey",editorPreferencesValue:"altKey",title:"altKey"}]},completeCodeEngine:{id:"completeCodeEngine",name:"AI Code Completion Engine",description:"The engine used for code completion.",type:"select",editorPreferencesKey:"completeCodeEngine",options:[{id:"default",editorPreferencesValue:null,title:"default"}].concat((0,r._)(Array.from(i.vw).map(function(e){return{id:e,editorPreferencesValue:e,title:e}})))},codeSuggestion:{id:"codeSuggestion",name:"AI Code Completion",description:"Code completion provides inline ghost text suggestions while you code.",type:"boolean",editorPreferencesKey:"codeSuggestion",options:a},chatEngine:{id:"chatEngine",name:"AI Chat Engine",description:"The engine used for chat completion.",type:"select",editorPreferencesKey:"chatEngine",options:[{id:"default",editorPreferencesValue:null,title:"default"}].concat((0,r._)(Array.from(o.ce).map(function(e){return{id:e,editorPreferencesValue:e,title:e}})))},ghostwriterUseAdvancedModel:{id:"ghostwriterUseAdvancedModel",name:"Use Advanced AI Model",description:"Advanced models require a lot of power and have usage limits. They're most useful for tasks that are ambiguous or require creativity. This setting can also be changed in AI prompt inputs across the workspace.",type:"boolean",editorPreferencesKey:"ghostwriterUseAdvancedModel",options:a},highlightAiChatInDefaultLayout:{id:"highlightAiChatInDefaultLayout",name:"Highlight AI Chat in Default Layout",description:"Highlight AI chat feature(s) in default workspace layout for new Repls.",type:"boolean",editorPreferencesKey:"highlightAiChatInDefaultLayout",options:a}}},47549:function(e,t,n){n.d(t,{F5:function(){return f},Hk:function(){return s},Kd:function(){return u},N$:function(){return c},Ob:function(){return l},Vl:function(){return a},Vt:function(){return r},ig:function(){return i},jW:function(){return d},lF:function(){return o}});var r=/^([A-Za-z0-9_]{1,15})\/?$/,i=/^([%A-Za-z0-9]+|-)*\/?$/,o=/^([A-Za-z\d](?:[A-Za-z\d]|-){0,38})\/?$/,a=/^https:\/\/(www\.)?youtube\.com(\/(c|channel|user|@(\w)+))*(\/([A-Za-z0-9_-]+))*(\/?)$/,l=/^(.{2,32}#[0-9]{4})$|^([a-zA-Z0-9_.]{2,32})$/,c="https://twitter.com/",s="https://www.linkedin.com/in/",u="https://github.com/",d="https://x.com/",f=/\/$/},11702:function(e,t,n){n.d(t,{p:function(){return r}});function r(e){return(null==e?void 0:e.rootOriginReplUrl)==="/@replit/Blank-Repl"}},1051:function(e,t,n){n.d(t,{Eg:function(){return m},UF:function(){return u},mD:function(){return l},r0:function(){return d},v:function(){return p},xi:function(){return h}});var r=n(41733),i=n(30509),o=n(63257),a=n(4713);function l(e){return e.split(".").pop()}function c(e,t){return e.some(function(e){return e.path===t})}function s(e,t){var n=e.findIndex(function(e){return l(e.path)===l(t)});if(-1===n)return e;var a=(0,i._)((0,r._)({},e[n]),{path:t});return(0,o._)(e.slice(0,n)).concat([a],(0,o._)(e.slice(n+1)))}function u(e){var t=[];return e.forEach(function(e){var n=l(e.path),r=a.ZP.allSupportedByPopularity().find(function(e){return e.ext===n});r&&!t.includes(r.key)&&t.push(r.key)}),t}function d(e){var t=e.files,n=e.language,r=a.ZP.getMainFileName(null!=n?n:"python");if(!r)return t;var i=t;return c(t,r)||(i=s(i,r)),"html"!==n||c(t,"style.css")||(i=s(i,"style.css")),"html"!==n||c(t,"script.js")||(i=s(i,"script.js")),i}var f=["GoogleCloudPlatform","googleapis"];function h(e){return f.includes(e)}var p="b3294059-2b61-4b20-abde-f06b61a9a1b3",m="gcloud"},70593:function(e,t,n){n.d(t,{Z:function(){return u}});var r,i,o=n(27387),a=n(98924),l=n(96583);(r=i||(i={})).CHANNEL_OPENED="CHANNEL_OPENED",r.OUTPUT_RECEIVED="OUTPUT_RECEIVED",r.STDERR_RECEIVED="STDERR_RECEIVED",r.STATE_CHANGED="STATE_CHANGED";var c=n(96082),s=n(36109);function u(e){var t,n=e.container,r=(0,c.ZP)(),u=null,d=!1;function f(){return(f=(0,o._)(function(){return(0,l.Jh)(this,function(e){if(d)throw Error("closed");return u?[2,u]:[2,new Promise(function(e){r.once(i.CHANNEL_OPENED,function(t){e(t)})})]})})).apply(this,arguments)}var h="",p="",m=n.openChannel({service:"exec"},function(e){var t=e.channel,n=!1;return t.onCommand(function(e){if(null!=e.output)h+=e.output,r.emit(i.OUTPUT_RECEIVED,e.output);else if(null!=e.stderr)p+=e.stderr,r.emit(i.STDERR_RECEIVED,e.stderr);else if(null!=e.state){if(!n){n=!0;return}r.emit(i.STATE_CHANGED,{state:e.state,outputBuffer:h,stderrBuffer:p}),e.state===s.api.State.Stopped&&(h="",p="")}}),u=t,r.emit(i.CHANNEL_OPENED,t),function(){u=null}});return{request:(t=(0,o._)(function(e){var t,n,r,i,o,c,u,d,h,p;return(0,l.Jh)(this,function(l){switch(l.label){case 0:return t=e.env,n=e.args,i=void 0===(r=e.lifecycle)?s.api.Exec.Lifecycle.NON_BLOCKING:r,c=void 0!==(o=e.splitStderr)&&o,u=e.noUserEnv,d=(0,a._)(e,["env","args","lifecycle","splitStderr","noUserEnv"]),[4,function(){return f.apply(this,arguments)}()];case 1:return p=(h=l.sent()).request({exec:{env:t,args:n,lifecycle:i,splitStderr:c,noUserEnv:null!=u&&u}}),i===s.api.Exec.Lifecycle.STDIN&&"stdin"in d&&(h.send({input:d.stdin}),h.send({inputClose:{}})),[2,p]}})}),function(e){return t.apply(this,arguments)}),onOutput:function(e){return r.on(i.OUTPUT_RECEIVED,e),function(){r.off(i.OUTPUT_RECEIVED,e)}},onStderr:function(e){return r.on(i.STDERR_RECEIVED,e),function(){r.off(i.STDERR_RECEIVED,e)}},onStateChanged:function(e){return r.on(i.STATE_CHANGED,e),function(){r.off(i.STATE_CHANGED,e)}},getStatus:function(){return u?u.status:"closed"},dispose:function(){d=!0,m(),u=null}}}},55905:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(27387),i=n(96583),o=n(25731),a=n(58997);function l(e){var t=e.container,n=e.dotReplit,l=(0,o.u)(null),c=(0,o.u)(null),s=(0,o.u)(null),u=(0,o.u)(null),d=null;function f(){return u.current?Promise.resolve(u.current):new Promise(function(e){var t=u.subscribe(function(n){n&&(t(),e(n))})})}return t.openChannel({service:"toolchain"},function(e){var t=e.channel;u.set(t);var n=t.onCommand(function(e){if(e.toolchainChanged){if(!e.toolchainChanged.configs)throw Error("Expected toolchain changed configs");l.current=e.toolchainChanged.configs}else if(e.nixModulesChanged){if(!e.nixModulesChanged.modules)throw Error("Expected modules changed modules");c.current=e.nixModulesChanged.modules,s.current=e.nixModulesChanged.modulesV2}});return t.request({toolchainGetRequest:{}}).then(function(e){var t;l.current=(null===(t=e.toolchainGetResponse)||void 0===t?void 0:t.configs)||null}),t.request({nixModulesGetRequest:{}}).then(function(e){var t;c.current=(null===(t=e.nixModulesGetResponse)||void 0===t?void 0:t.modules)||null}),t.request({nixModuleConfigGetRequest:{}}).then(function(e){var t;s.current=(null===(t=e.nixModuleConfigGetResponse)||void 0===t?void 0:t.modules)||null}),function(){n()}}),{configs:l,modules:c,moduleConfig:s,getConfigs:function(){return l.current?Promise.resolve(l.current):new Promise(function(e){var t=l.subscribe(function(n){if(t(),null===n)throw Error("Returned toolchain config should not be null");e(n)})})},getRegistry:function(){return(0,r._)(function(){return(0,i.Jh)(this,function(e){switch(e.label){case 0:if(d)return[2,d];return[4,f()];case 1:return[4,e.sent().request({nixModulesGetRegistryRequest:{}})];case 2:return[2,d=e.sent().nixModulesGetRegistryResponse||null]}})})()},getModuleConfig:function(){return(0,r._)(function(){return(0,i.Jh)(this,function(e){switch(e.label){case 0:return[4,f()];case 1:return[4,e.sent().request({nixModuleConfigGetRequest:{}})];case 2:return[2,e.sent().nixModuleConfigGetResponse||null]}})})()},setModuleConfig:function(e){return(0,r._)(function(){return(0,i.Jh)(this,function(t){switch(t.label){case 0:return[4,f()];case 1:return[4,t.sent().request({nixModuleConfigSetRequest:{modules:e}})];case 2:return[2,t.sent().nixModuleConfigSetResponse||null]}})})()},addModule:function(e){return(0,r._)(function(){var t,r,o;return(0,i.Jh)(this,function(i){switch(i.label){case 0:return r=[],[4,n.getConfig()];case 1:if((o=i.sent()).error&&o.error!==a.Yt.NotFound)throw Error("Failed to read .replit"+o.error);if(-1!==(r=(null===(t=o.config)||void 0===t?void 0:t.modules)||[]).indexOf(e))return[3,3];return r.push(e),[4,n.updateDotReplit([{op:"add",path:"modules",value:JSON.stringify(r)}])];case 2:i.sent(),i.label=3;case 3:return[2]}})})()},removeModule:function(e){return(0,r._)(function(){var t,r,o,l;return(0,i.Jh)(this,function(i){switch(i.label){case 0:return r=[],[4,n.getConfig()];case 1:if((o=i.sent()).error&&o.error!==a.Yt.NotFound)throw Error("Failed to read .replit"+o.error);if((l=(r=(null===(t=o.config)||void 0===t?void 0:t.modules)||[]).filter(function(t){if(e===t)return!1;var n=t.match(/^(.+)\.nix$/);return(n&&n[1])!==e})).length===r.length)return[2];return[4,n.updateDotReplit([{op:"add",path:"modules",value:JSON.stringify(l)}])];case 2:return i.sent(),[2]}})})()},upgradeModule:function(e,t){return(0,r._)(function(){var r,o,l;return(0,i.Jh)(this,function(i){switch(i.label){case 0:return[4,n.getConfig()];case 1:if((o=i.sent()).error&&o.error!==a.Yt.NotFound)throw Error("Failed to read .replit"+o.error);return l=((null===(r=o.config)||void 0===r?void 0:r.modules)||[]).map(function(n){return e===n?t:n}),[4,n.updateDotReplit([{op:"add",path:"modules",value:JSON.stringify(l)}])];case 2:return i.sent(),[2]}})})()},buildModules:function(){return(0,r._)(function(){var e,t;return(0,i.Jh)(this,function(n){switch(n.label){case 0:return e=this,[4,f()];case 1:return t=n.sent(),[2,new Promise(function(n){var r=e.configs.subscribe(function(e){e&&(r(),n(void 0))});t.send({nixModulesBuildRequest:{}})})]}})}).apply(this)}}}}}]);
//# sourceMappingURL=4742-34b713fc23e267ff.js.map