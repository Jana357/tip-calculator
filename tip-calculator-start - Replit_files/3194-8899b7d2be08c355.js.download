!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="866eb48a-6d58-4534-926e-d959f9e1ab5b",e._sentryDebugIdIdentifier="sentry-dbid-866eb48a-6d58-4534-926e-d959f9e1ab5b")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"2e833bf6"};"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3194],{4251:function(e,t,r){r.d(t,{Z:function(){return E}});var n=r(3796),i=r(55992),o=Array.prototype.concat,a=function(e){return{recursive:!!e.recursive,bail:e.bail&&e.bail>0?e.bail:1e3}},u=function(e){return o.apply([],e)},l=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3?arguments[3]:void 0;if(!e||r>=t.bail||!e.isDirectory||!e.createReader)return Promise.resolve([]);var o=null!=n?n:e.name;return new Promise(function(n){e.createReader().readEntries(function(e){return Promise.all(e.map(function(e){var n,a,u,c;return n=e,a=t,u=r,c=o,n.isDirectory?a.recursive?l(n,a,u+1,(0,i.join)(c,n.name)):Promise.resolve([]):new Promise(function(e,t){n.file?n.file(e,t):e(null)}).catch(function(){return null}).then(function(e){return e&&(e.dirPath=(0,i.join)(c,e.name)),e?[e]:[]})})).then(function(e){return n(u(e))})},function(){return n([])})})},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return l("function"==typeof e.getAsEntry?e.getAsEntry():e.webkitGetAsEntry?e.webkitGetAsEntry():null,a(t))},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=a(t),new Promise(function(r){var n,i;(null==e?void 0:null===(n=e.dataTransfer)||void 0===n?void 0:n.items)?Promise.all(u(e.dataTransfer.items).filter(function(e){return"file"===e.kind}).map(function(e){return c(e,t).then(function(t){if(!t.length){var r=e.getAsFile();t=r?[r]:t}return t})})).then(function(e){return r(u(e))}):(null==e?void 0:null===(i=e.dataTransfer)||void 0===i?void 0:i.files)?r(u(e.dataTransfer.files)):r([])})},f=r(24281),d=r(78348);r(75271);var h=r(31114),p=r(21769),v=r(6191),y=r(86498),m=null,g=null;function E(e){var t=function(e){var t=e.isTouchBackend;if(g&&t)return g;if(m&&!t)return m;var r={dragDropManager:(0,d.i)(function(e){var r=t?(0,y.zr)(e,void 0,{delayTouchStart:500}):(0,p.PD)(e),n=r.handleTopDropCapture;return r.handleTopDropCapture=function(e){var t,i=r.monitor.getItemType();i===v.HTML||i===v.TEXT?(r.dropTargetIds=[],null===(t=r.currentNativeSource)||void 0===t||t.loadDataTransfer(e.dataTransfer),r.enterLeaveCounter.reset()):n.call(r,e),r.currentNativeSource&&(r.currentNativeSource.item.dirContent=s(e,{recursive:!0}))},r})};return t?g=r:m=r,r}({isTouchBackend:(0,f.w8)()});return(0,n.tZ)(h.L.Provider,{value:t,children:e.children})}},83619:function(e,t,r){r.d(t,{K:function(){return o}});var n=r(75271),i=r(98314);function o(e){(0,n.useEffect)(function(){e((0,i.r)(),{captureDraggingState:!0})},[e])}},95188:function(e,t,r){r.d(t,{UV:function(){return o},fN:function(){return i}});var n=r(63257);function i(e,t){for(var r=0;r<t.length;r+=1e4)e.push.apply(e,(0,n._)(t.slice(r,r+1e4)))}function o(e){return(0,n._)(Array(e))}},62169:function(e,t,r){r.d(t,{FW:function(){return h},NH:function(){return y}});var n=r(41733),i=r(21262),o=r(71440),a=r(71793),u=r(48574),l=r(9122);function c(){var e=(0,i._)(["\n  fragment PublishReplData on Repl {\n    id\n    url\n    title\n    description\n    iconUrl\n    lastPublishedAt\n    publishedAs\n    imageUrl\n    isRenamed\n    templateInfo {\n      iconUrl\n    }\n    replViewSettings {\n      id\n      defaultView\n      replImage\n      replFile\n    }\n    tags {\n      id\n      isOfficial\n    }\n    authorizations {\n      editMetadata {\n        isAuthorized\n      }\n      editFileContents {\n        isAuthorized\n      }\n      publish {\n        isAuthorized\n      }\n    }\n    ...CrosisContextRepl\n    ...PublishedReplShareInfoReplData\n  }\n  ","\n  ","\n"]);return c=function(){return e},e}function s(){var e=(0,i._)(["\n  fragment PublishCurrentUser on CurrentUser {\n    id\n    image\n    isTemplateDeveloper: hasRole(role: TEMPLATE_DEVELOPER)\n    ...CrosisContextCurrentUser\n  }\n  ","\n"]);return s=function(){return e},e}function f(){var e=(0,i._)(["\n  query PublishCurrentUser {\n    currentUser {\n      id\n      ...PublishCurrentUser\n    }\n  }\n  ","\n"]);return f=function(){return e},e}var d={},h=(0,o.Ps)(c(),a.C,u.B),p=(0,o.Ps)(s(),a.D),v=(0,o.Ps)(f(),p);function y(e){var t=(0,n._)({},d,e);return l.a(v,t)}},48574:function(e,t,r){r.d(t,{B:function(){return o}});var n=r(21262);function i(){var e=(0,n._)(["\n  fragment PublishedReplShareInfoReplData on Repl {\n    id\n    url\n    publishedAs\n    title\n  }\n"]);return i=function(){return e},e}var o=(0,r(71440).Ps)(i())},35328:function(e,t,r){r.d(t,{sI:function(){return a}});var n=r(21262);function i(){var e=(0,n._)(["\n  fragment ReplViewerOutputOverlayRepl on Repl {\n    id\n    title\n    imageUrl\n    lastPublishedAt\n    authorizations {\n      editMetadata {\n        isAuthorized\n      }\n    }\n  }\n"]);return i=function(){return e},e}function o(){var e=(0,n._)(["\n  mutation ReplViewerOutputOverlayUpdateRepl($input: UpdateReplInput!) {\n    updateRepl(input: $input) {\n      repl {\n        id\n        imageUrl\n      }\n    }\n  }\n"]);return o=function(){return e},e}var a=(0,r(71440).Ps)(i());o()},79317:function(e,t,r){r.d(t,{D:function(){return i},V:function(){return a}});var n,i,o=r(35370);function a(e){return(0,o.gK)(e)?"Markdown":(0,o.sL)(e)?"Draw":(0,o.IQ)(e)?"Pedit":(0,o.T3)(e)?"Media":(0,o.hj)(e)?"Binary":"Code"}(n=i||(i={})).Media="Media",n.Binary="Binary",n.Code="Code",n.Markdown="Markdown",n.Draw="Draw",n.Pedit="Pedit"},29193:function(e,t,r){r.d(t,{Z:function(){return b}});var n=r(66626),i=r(3796),o=r(99595),a=r(96949),u=r(79904),l=r(24766),c=r(93245),s=r(61010),f=r(63163),d=r(85983),h=r(41733),p=r(21262),v=r(71440),y=r(32893),m=r(82303);function g(){var e=(0,p._)(["\n  mutation UnpublishReplUnpublish($input: UnpublishReplFromCommunityInput!) {\n    unpublishReplFromCommunity(input: $input) {\n      ... on Repl {\n        id\n        ...ReplViewReplActionsPermissions\n      }\n      ... on UnauthorizedError {\n        message\n      }\n      ... on NotFoundError {\n        message\n      }\n    }\n  }\n  ","\n"]);return g=function(){return e},e}var E={},D=(0,v.Ps)(g(),y.jN),_=c.K.form;function b(e){var t,r,p=e.repl,v=e.source,y=e.onDone,g=(0,o.Z)(),b=g.showConfirm,R=g.showError,T=(0,n._)((t={variables:{input:{replId:p.id}},onCompleted:function(e){if("Repl"===e.unpublishReplFromCommunity.__typename){var t=e.unpublishReplFromCommunity.likeCount;(0,a.j)(a.U3.REPL_UNPUBLISHED,{source:v,numLikes:t,replType:p.publishedAs===d.O2.Template?"template_repl":"regular_repl"}),b("Repl removed from the community.")}else"NotFoundError"===e.unpublishReplFromCommunity.__typename||"UnauthorizedError"===e.unpublishReplFromCommunity.__typename?R(e.unpublishReplFromCommunity.message):R("An unexpected error occurred.");y()},onError:function(){R("Something went wrong. Please try again.")},update:function(e){e.modify({id:e.identify({__typename:"Repl",id:p.id}),fields:{comments:function(e,t){return t.DELETE},tags:function(e,t){return t.DELETE}}})}},r=(0,h._)({},E,t),m.D(D,r)),2),w=T[0],x=T[1].loading;return(0,i.BX)(c.G,{css:[f.l0.colWithGap(24)],children:[(0,i.tZ)(l.xv,{variant:"subheadBig",children:"Unpublish this Repl from the Community"}),(0,i.BX)(_,{onSubmit:function(e){e.preventDefault(),w()},css:[f.l0.colWithGap(32)],children:[(0,i.tZ)(l.xv,{children:"Unpublishing a Repl will remove it from the Community. This action will delete all associated posts and tags. The Repl and all its comments will still be visible in your profile, but will not be shown in the Community or Trending views anymore. You can always re-publish the Repl again later."}),(0,i.BX)(c.G,{css:[f.l0.rowWithGap(8),f.l0.justify.end],children:[(0,i.tZ)(c.G,{children:(0,i.tZ)(u.zx,{type:"button",text:"Cancel",onClick:function(){return y()}})}),(0,i.tZ)(c.G,{children:(0,i.tZ)(u.zx,{disabled:x,colorway:"negative",text:x?"Unpublishing...":"Yes, unpublish this Repl",type:"submit",iconLeft:(0,i.tZ)(s.Z,{})})})]})]})]})}},16197:function(e,t,r){r.d(t,{Z:function(){return g}});var n=r(42516),i=r(41733),o=r(30509),a=r(3796),u=r(6065),l=r(22419),c=r(93245),s=r(22192),f=r(63163),d=r(36809),h=(0,s.$)(["size","fontSize","listGap","iconTextGap","avatarOverlap","tooltipFontSize"]),p=h.styleTokens,v=h.cssVars,y=(0,d.X)({avatarsRow:[f.l0.flex.row,{"& > *":{marginLeft:"calc(-0.4 * ".concat(p.size,")")},"& > *:first-child":{marginLeft:0}}],countCirlce:[f.l0.center,f.l0.overflow("hidden"),f.l0.backgroundColor.backgroundDefault,f.l0.color.foregroundDimmer,f.l0.px(2),{borderRadius:"50%",minWidth:p.size,height:p.size,fontSize:p.fontSize}],tooltop:[{gap:p.listGap,gridTemplateColumns:"repeat(auto-fill, 200px)"}],tooltipRow:[f.l0.rowWithGap(f.TV.space2),f.l0.align.center],tooltipText:[f.l0.flex.growAndShrink(1),f.l0.truncate,f.l0.color.foregroundDimmer,{paddingLeft:p.iconTextGap,fontSize:p.tooltipFontSize}],stackItem:[]}),m={12:{fontSize:8,listGap:2,iconTextGap:2,tooltipAvatarSize:12,tooltipFontSize:8},16:{fontSize:10,listGap:2,iconTextGap:2,tooltipAvatarSize:16,tooltipFontSize:10},24:{fontSize:12,listGap:4,iconTextGap:4,tooltipAvatarSize:16,tooltipFontSize:12},32:{fontSize:14,listGap:4,iconTextGap:4,tooltipAvatarSize:16,tooltipFontSize:14},40:{fontSize:16,listGap:8,iconTextGap:4,tooltipAvatarSize:24,tooltipFontSize:14},48:{fontSize:24,listGap:8,iconTextGap:4,tooltipAvatarSize:24,tooltipFontSize:14}};function g(e){var t,r,s,f,d,h,p,g,E,D=e.activeUsers,_=e.visibleNumOfUsers,b=void 0===_?3:_,R=e.size,T=void 0===R?24:R,w=D.length,x=(E={},(0,n._)(E,v.size,T+"px"),(0,n._)(E,v.fontSize,(null!==(d=null===(t=m[T])||void 0===t?void 0:t.fontSize)&&void 0!==d?d:T)+"px"),(0,n._)(E,v.listGap,(null!==(h=null===(r=m[T])||void 0===r?void 0:r.listGap)&&void 0!==h?h:8)+"px"),(0,n._)(E,v.iconTextGap,(null!==(p=null===(s=m[T])||void 0===s?void 0:s.iconTextGap)&&void 0!==p?p:8)+"px"),(0,n._)(E,v.tooltipFontSize,(null!==(g=null===(f=m[T])||void 0===f?void 0:f.tooltipFontSize)&&void 0!==g?g:14)+"px"),E),I=w>b,N=D.slice(0,I?b-1:b);return(0,a.tZ)(l.u,{tooltip:(0,a.tZ)(c.G,{css:y.tooltop,style:x,children:D.map(function(e){var t;return(0,a.BX)(c.G,{css:y.tooltipRow,children:[(0,a.tZ)(u.q,{size:(null===(t=m[T])||void 0===t?void 0:t.tooltipAvatarSize)||T,src:e.image||null,ringColor:e.color,username:e.username},e.id),(0,a.tZ)(c.G,{css:y.tooltipText,children:e.username})]},e.username)})}),children:function(e,t){return(0,a.BX)(c.G,(0,o._)((0,i._)({},e),{tag:"ul",innerRef:t,css:y.avatarsRow,style:x,children:[N.map(function(e,t){return(0,a.tZ)(c.G,{tag:"li",style:{zIndex:t+1},css:y.stackItem,children:(0,a.tZ)(u.q,{size:T,src:e.image||null,ringColor:e.color,username:e.username})},e.id)}),I?(0,a.tZ)(c.G,{tag:"li",css:y.stackItem,style:{zIndex:N.length},children:(0,a.tZ)(c.G,{css:y.countCirlce,children:(0,a.BX)(c.G,{children:["+",w-b+1]})})}):null]}))}})}},60366:function(e,t,r){r.d(t,{Z:function(){return u}});var n=r(41733),i=r(30509),o=r(3796),a=r(28065);function u(e){return(0,o.tZ)(a.ZP,(0,i._)((0,n._)({},e),{children:(0,o.tZ)("path",{fillRule:"evenodd",d:"M11.47 4.47a.75.75 0 0 1 1.06 0l7 7a.75.75 0 1 1-1.06 1.06l-5.72-5.72V19a.75.75 0 0 1-1.5 0V6.81l-5.72 5.72a.75.75 0 0 1-1.06-1.06l7-7Z",clipRule:"evenodd"})}))}},84e3:function(e,t,r){r.d(t,{Z:function(){return u}});var n=r(41733),i=r(30509),o=r(3796),a=r(28065);function u(e){return(0,o.tZ)(a.ZP,(0,i._)((0,n._)({},e),{children:(0,o.tZ)("path",{fillRule:"evenodd",d:"M4.95 6.011A9.25 9.25 0 0 0 12 21.25a9.213 9.213 0 0 0 5.989-2.2L4.95 6.01Zm1.061-1.06L19.05 17.988A9.213 9.213 0 0 0 21.25 12 9.25 9.25 0 0 0 6.011 4.95ZM1.25 12C1.25 6.063 6.063 1.25 12 1.25S22.75 6.063 22.75 12 17.937 22.75 12 22.75 1.25 17.937 1.25 12Z",clipRule:"evenodd"})}))}},49549:function(e,t,r){r.d(t,{Z:function(){return u}});var n=r(41733),i=r(30509),o=r(3796),a=r(28065);function u(e){return(0,o.tZ)(a.ZP,(0,i._)((0,n._)({},e),{children:(0,o.tZ)("path",{fillRule:"evenodd",d:"M2.25 4.5A2.25 2.25 0 0 1 4.5 2.25h15a2.25 2.25 0 0 1 2.25 2.25v3c0 .576-.217 1.102-.573 1.5.356.398.573.924.573 1.5v3c0 .576-.217 1.102-.573 1.5.356.398.573.924.573 1.5v3a2.25 2.25 0 0 1-2.25 2.25h-11a2.25 2.25 0 0 1-2.25-2.25v-3c0-.576.217-1.102.573-1.5a2.242 2.242 0 0 1-.573-1.5v-3c0-.263.045-.515.128-.75H4.5A2.25 2.25 0 0 1 2.25 7.5v-3ZM19.5 8.25a.75.75 0 0 0 .75-.75v-3a.75.75 0 0 0-.75-.75h-15a.75.75 0 0 0-.75.75v3c0 .414.336.75.75.75h15Zm-11 1.5a.75.75 0 0 0-.75.75v3c0 .414.336.75.75.75h11a.75.75 0 0 0 .75-.75v-3a.75.75 0 0 0-.75-.75h-11Zm11 6h-11a.75.75 0 0 0-.75.75v3c0 .414.336.75.75.75h11a.75.75 0 0 0 .75-.75v-3a.75.75 0 0 0-.75-.75Z",clipRule:"evenodd"})}))}},96134:function(e,t,r){r.d(t,{Z:function(){return u}});var n=r(41733),i=r(30509),o=r(3796),a=r(28065);function u(e){return(0,o.tZ)(a.ZP,(0,i._)((0,n._)({},e),{children:(0,o.tZ)("path",{fillRule:"evenodd",d:"M4 21.75A2.75 2.75 0 0 1 1.25 19V5A2.75 2.75 0 0 1 4 2.25h5a.75.75 0 0 1 .624.334l1.777 2.666H20A2.75 2.75 0 0 1 22.75 8v1.213c.835.559 1.34 1.56 1.2 2.643l-.98 7.5a2.75 2.75 0 0 1-2.726 2.394H4ZM3.116 4.116A1.25 1.25 0 0 1 4 3.75h4.599l1.777 2.666A.75.75 0 0 0 11 6.75h9A1.25 1.25 0 0 1 21.25 8v.75H5.256a2.75 2.75 0 0 0-2.506 1.617V5c0-.332.132-.65.366-.884ZM4.278 20.25h15.966a1.25 1.25 0 0 0 1.24-1.088l.978-7.5a1.25 1.25 0 0 0-1.24-1.412H5.256a1.25 1.25 0 0 0-1.24 1.088l-.978 7.5a1.25 1.25 0 0 0 1.24 1.412Z",clipRule:"evenodd"})}))}},8445:function(e,t,r){r.d(t,{S:function(){return a}});var n=r(52657),i=r(96505),o=r(75271);function a(){var e=(0,i.mC)(),t=(0,n.Z)(e);return(0,o.useCallback)(function(){var e,r;return!Number.isFinite(r=parseInt(null==(e=t.current)?void 0:e.variation("flag-container-retry-minimum-ms",0),10))||r<0?0:r},[t])}},40523:function(e,t,r){r.d(t,{P:function(){return y},n:function(){return v}});var n=r(66626),i=r(74044),o=r(99149),a=r(16155),u=r(83059),l=r(82973),c=r(70657),s=r(75271),f=r(58997),d=i.Dy.Array(i.Dy.String()),h=function(e){return"repl:hiddenFiles:"+e},p={get:function(e){var t=l.Z.get(h(e));return o.B4.Check(d,t)?t:null},set:function(e,t){l.Z.set(h(e),t)}},v=function(e){var t=(0,a.Z)(),r=(0,n._)((0,s.useState)(function(){return p.get(t)}),2),i=r[0],o=r[1];return(0,s.useEffect)(function(){return e.watch(function(e){var r=function(e){p.set(t,e),o(e)};if(e.error){e.error===f.Yt.NotFound&&r([]);return}if(!e.config.hidden){r([]);return}r(e.config.hidden)})},[e,t]),i},y=function(e){var t=v(e);return(0,u.Z)(function(){return null===t?null:t.map(function(e){return(0,c.P)(e)||e})},[t])}},38163:function(e,t,r){r.d(t,{Z:function(){return R}});var n={};r.r(n),r.d(n,{checkAndTrack:function(){return D},ensureTrackedFile:function(){return m},storeOp:function(){return g}});var i=r(96949),o=r(27387),a=r(66626),u=r(96583),l=r(82973),c=r(41733),s={};function f(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.info("ot client dataloss",(0,c._)({case:t,startTime:r.startTime,opsSinceFlush:r.opsSinceFlush,whileReconnecting:r.whileReconnecting,replid:r.replId,filePath:r.filePath},n))}var d=r(70090),h={replsList:function(){return"dataLossRepls"},replFiles:function(e){return"dataLossReplFiles".concat(e)},latestOp:function(e,t){return"dataLossLatestOp--".concat(e,"--").concat(t)},latestFlushedOp:function(e,t){return"dataLossLatestFlushed--".concat(e,"--").concat(t)},latestOwnOp:function(e,t){return"dataLosslatestOwnOp--".concat(e,"--").concat(t)},opsSinceFlush:function(e,t){return"dataLossOpsSinceFlush--".concat(e,"--").concat(t)}};function p(){var e=l.Z.get(h.replsList(),"array");return e||(e=[],l.Z.set(h.replsList(),e)),e}function v(e){var t=l.Z.get(h.replFiles(e),"array");return t||(t=[],l.Z.set(h.replFiles(e),t)),t}function y(e){var t=v(e),r=!0,n=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var u=o.value;"string"==typeof u&&function(e,t){l.Z.remove(h.latestOp(e,t)),l.Z.remove(h.latestFlushedOp(e,t)),l.Z.remove(h.latestOwnOp(e,t));var r=v(e).filter(function(e){return e!==t});l.Z.set(h.replFiles(e),r)}(e,u)}}catch(e){n=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}l.Z.remove(h.replFiles(e));var c=p().filter(function(t){return t!==e});l.Z.set(h.replsList(),c)}function m(e){var t,r=e.replId,n=e.filePath;(t=p()).includes(r)||(t.length>20?(y(t[0]),t[0]=r):t.push(r),l.Z.set(h.replsList(),t));var i=v(r);i.includes(n)||(i.length>20?(y(i[0]),i[0]=n):i.push(n),l.Z.set(h.replFiles(r),i))}function g(e){var t=e.filePath,r=e.replId,n=e.opType,i=e.op;!function(e){var t=e.filePath,r=e.replId,n=e.opType,i=e.logger,o=e.isReconnecting,a=f.bind(null,i),u="".concat(r,"--").concat(t);s[u]||(s[u]={replId:r,filePath:t,timer:null,startTime:null,whileReconnecting:0,opsSinceFlush:0});var l=s[u];if("latestFlushedOp"===n){delete s[u];var c=l.startTime;if(c){var d=Date.now()-c;d>6e4&&a("flush_delay_received",l,{elapsed:d})}var h=l.timer;h&&(clearTimeout(h),l.timer=null)}else{l.opsSinceFlush+=1,o&&(l.whileReconnecting+=1);var p,v=null!==(p=l.startTime)&&void 0!==p?p:Date.now();l.startTime=v,l.timer||(l.timer=setTimeout(function(){a("flush_delay_timeout",l)},6e4)),150===l.opsSinceFlush?a("flush_delay_small",l):1e3===l.opsSinceFlush&&a("flush_delay_large",l)}}({filePath:t,replId:r,opType:n,logger:e.logger,isReconnecting:e.isReconnecting}),l.Z.set(h[n](r,t),i)}var E={};function D(e){return _.apply(this,arguments)}function _(){return(_=(0,o._)(function(e){var t,r,n,i,c,s,f,p;return(0,u.Jh)(this,function(v){var y;return t=e.filePath,r=e.replId,n=e.serverVersion,i=e.serverContent,c=e.fetchOps,s=e.logger,E[t+r]||(E[t+r]=!0,f=function(e,t){var r={latestOp:null,latestFlushedOp:null,latestOwnOp:null},n=Object.keys(r),i=!0,o=!1,a=void 0;try{for(var u,c=n[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){var s=u.value,f=l.Z.get(h[s](e,t),"object");f&&f&&"object"==typeof f&&"number"==typeof f.crc32&&"number"==typeof f.version&&(r[s]=f)}}catch(e){o=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(o)throw a}}return r}(r,t),p=d.str(i)>>>0,Object.keys(f).forEach((y=(0,o._)(function(e){var t,r,i;return(0,u.Jh)(this,function(o){switch(o.label){case 0:if(!(t=f[e]))return[2];if(n<t.version)return s.info("ot client dataloss",{opType:e,case:"server_forgot"}),[2];if(n===t.version)return p!==t.crc32&&s.info("ot client dataloss",{opType:e,case:"crc32_mismatch"}),[2];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,c(t.version,t.version)];case 2:return r=a._.apply(void 0,[o.sent(),1])[0],[3,4];case 3:return i=o.sent(),s.info("ot client dataloss",{opType:e,case:"error_fetching_op",originalError:String(i)}),[2];case 4:if(!r)return s.info("ot client dataloss",{opType:e,case:"op_not_found"}),[2];return r.crc32!==t.crc32&&s.info("ot client dataloss",{opType:e,case:"crc32_mismatch"}),[2]}})}),function(e){return y.apply(this,arguments)}))),[2]})})).apply(this,arguments)}var b=r(12467);function R(e){var t=e.container;return(0,b.Z)({container:t,dataloss:n,track:i.j})}},57865:function(e,t,r){r.d(t,{Z:function(){return u}});var n=r(7391),i=r.n(n),o=r(39121),a=r(49500);function u(e){var t=e.throwBsod,r=e.tags,n=e.extras,u=e.origin,l=e.onNonBsodUnrecoverableError,c=void 0===l?function(){}:l;return function(e){var l=(0,o.ZP)(e);if(l===o.Gs.NotFound){i().push("/home","~/");return}if(l===o.Gs.LanguageTokenDenied){window.location.reload();return}if(l){c(l);return}a.error(e),t({error:e,tags:r,extras:n,origin:u})}}},49424:function(e,t,r){r.d(t,{tr:function(){return L}});var n=r(42516),i=r(66626),o=r(3796),a=r(62279),u=r(29574),l=r(84238),c=r(22192),s=r(86466),f=r(87915),d=r(63062),h=r(14548),p=r(93245),v=r(36809),y=r(33323),m=r(82383),g=r(63163),E=r(23882),D=r(99704),_=r(86908),b=r(75271),R=r(35370),T=r(72106),w=r(73878);function x(e){var t=e.node;return t.type===w.Tv.Directory?(0,o.tZ)(m.Z,{size:16}):(0,o.tZ)(f.Z,{size:16,path:t.path})}var I=(0,c.$)(["menuY","menuX"]),N=I.cssVars,C=I.styleTokens,A=(0,v.X)({root:[g.l0.maxHeight(400),g.l0.position.absolute,g.l0.borderRadius(8),g.l0.shadow(3),{border:"1px solid",borderColor:g.TV.outlineDefault,top:C.menuY,left:C.menuX,"& > div":[g.l0.maxHeight(400)]}]}),S=(0,a.iv)([s.gU.nofill,{transitionProperty:"background-color, box-shadow, opacity",opacity:.8,":focus":{zIndex:1,opacity:1}}]),O={button:(0,a.iv)([g.l0.reset.button,g.l0.p(2),g.l0.rowWithGap(4),g.l0.align.center,S]),text:(0,a.iv)({fontSize:g.TV.fontSizeSmall})},M={opacity:1};function Z(e){var t,r=e.node,a=e.openFile,u=e.expandable,c=void 0===u||u,s=(0,i._)((0,b.useState)(!1),2),f=s[0],v=s[1],y=(0,b.useRef)(null),m=(0,l.Z)(function(e){var t;!f||e.target instanceof HTMLElement&&(null===(t=y.current)||void 0===t?void 0:t.contains(e.target))||v(!1)},[f]),g=(0,b.useId)(),E=(0,b.useId)(),D=(0,R.Il)(r.path)||T.Ql,_=(0,R.UO)(r.path);function w(){var e,t=null===(e=y.current)||void 0===e?void 0:e.getBoundingClientRect();t&&c&&v({x:t.x+"px",y:t.y+t.height+4+"px"})}return(0,o.BX)(o.HY,{children:[(0,o.BX)(p.G,{innerRef:y,tag:"button",id:g,style:f?M:void 0,"aria-haspopup":"true","aria-expanded":!!f,"aria-controls":E,css:O.button,onClick:function(){c&&(f?v(!1):w())},onKeyDown:function(e){switch(e.key){case" ":case"Enter":case"ArrowDown":if(!c)return;w()}},children:[(0,b.cloneElement)((0,o.tZ)(x,{node:r}),{size:12}),(0,o.tZ)(p.G,{css:O.text,children:_})]}),f&&c?(0,o.tZ)(d.h,{children:(0,o.tZ)(h.Tg,{id:E,css:A.root,innerRef:m,style:(t={},(0,n._)(t,N.menuX,f.x),(0,n._)(t,N.menuY,f.y),t),onKeyDown:function(e){if("Escape"===e.key){var t;v(!1),null===(t=y.current)||void 0===t||t.focus()}},children:(0,o.tZ)(P,{openFile:a,parentPath:D,currentPath:r.path})})}):null]})}function P(e){var t=(0,E.Z)().fs,r=(0,u.Gn)("fontSize").preferences,n=(0,_.T)(!0),i=(0,b.useCallback)(function(e){return!n(e.filename)},[n]),a=(0,D.p)({fs:t,filter:i,focusedPath:e.currentPath,fontSize:r.fontSize,root:e.parentPath,manageWidth:!0,onFileSelect:function(t){var r=t.path;e.openFile(r)},alwaysShowCreateRow:!0});return(0,o.tZ)(D.s,{store:a.store})}var F=(0,a.iv)([g.l0.flex.row,g.l0.align.center,g.l0.height("100%"),g.l0.px(2)]),L=(0,b.memo)(function(e){var t,r,n=e.path,i=e.onFileClick,a=e.expandable,u=void 0===a||a,l=e.children,c=(r=(t=n.split("/")).length,t.map(function(e,n){return{type:n===r-1?w.Tv.File:w.Tv.Directory,path:t.slice(0,n+1).join("/")}}));return(0,o.BX)(p.G,{css:F,children:[c.map(function(e){return(0,o.BX)(b.Fragment,{children:[(0,o.tZ)(Z,{node:e,openFile:i,expandable:u}),e.type===w.Tv.Directory?(0,o.tZ)(y.Z,{size:12}):null]},CSS.escape(e.path))}),l||null]})})},99704:function(e,t,r){r.d(t,{s:function(){return nc},p:function(){return nl}});var n,i,o,a,u,l,c,s,f,d,h,p=r(42516),v=r(63257),y=r(3796),m=r(14074),g=r(95281),E=r(93245),D=r(36809),_=r(63163),b=r(75271),R=r(73878),T=r(41733),w=r(30509),x=r(66626),I=r(87915),N=r(16197),C=r(82383),A=r(96134),S=r(10578),O=r(35370),M=r(86466),Z=r(24766),P=r(31940),F=r(54300),L=r(84238),k=r(62466),G={name:"sameWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(e){var t=e.state;t.styles.popper.width="".concat(t.rects.reference.width,"px")},effect:function(e){var t=e.state;t.elements.reference instanceof HTMLElement&&(t.elements.popper.style.width="".concat(t.elements.reference.offsetWidth,"px"))}},H=r(35820),U=r(63062),z=r(14548),B=r(96751),j=r(4573),W=r(52657),V=r(41974),Y=r(80951),K=r(27387),X=r(96583),J=r(49853),$=r(72106),q=r(76539),Q=r(95188),ee=r(55281),et="No files",er="Loading...";function en(e,t){var r=t.fromIndex;if("next"===t.dir){for(var n=r+1;n<e.length;n++){var i=e[n];if(i&&("dir"===i.type||"file"===i.type))return i}return null}for(var o=r-1;o>=0;o--){var a=e[o];if(a&&("dir"===a.type||"file"===a.type))return a}return null}function ei(e,t,r){if(r){var n=q.nh.includes(t.filename),i=q.nh.includes(e.filename);if(n&&!i)return -1;if(!n&&i)return 1;var o=q.uP.includes(t.filename),a=q.uP.includes(e.filename);if(o&&!a)return -1;if(!o&&a)return 1}return t.type===R.Tv.Directory&&e.type!==R.Tv.Directory?1:e.type===R.Tv.Directory&&t.type!==R.Tv.Directory?-1:(0,O.IV)(e.filename,t.filename)}function eo(e){var t=e.row,r=e.baseDepth;return"dir"===t.type||"file"===t.type||"uploadFile"===t.type?t.path===$.Ql?0:(0,O.U$)(t.path)-1-r:t.dir===$.Ql?0:(0,O.U$)(t.dir)-r}var ea=function(e,t){return e===$.Ql?t:e+"/"+t},eu=function(e,t){return e===$.Ql&&1===(0,O.U$)(t)||(0,ee.pC)(e,t)},el=(0,J.cn)(new Map),ec=(0,J.cn)({width:0,height:0}),es=(0,J.cn)(0),ef=(0,J.cn)(null),ed=(0,J.cn)(new Map),eh=(0,J.cn)(function(e){var t;return null!==(t=e(eb).root)&&void 0!==t?t:$.Ql}),ep=(0,J.cn)(null),ev=(0,J.cn)(void 0),ey=(0,J.cn)(null),em=(0,J.cn)(null,function(e,t,r){e(eT)||t(ey,r)}),eg=(0,J.cn)(function(e){var t=e(eb).root,r=void 0===t?$.Ql:t;return r===$.Ql?0:(0,O.U$)(r)}),eE=(0,J.cn)(function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=[],n=0,i=!0,o=!1,a=void 0;try{for(var u,l=(0,v._)(e.values()).sort(function(e,t){return e.index-t.index})[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var c=u.value,s={height:c.height,y:c.y,cols:[]};if(r.push(s),0!==c.depth){var f=c.depth+t;f>n&&(n=f);for(var d="divider"===c.row.type||"error"===c.row.type||"create"===c.row.type||"emptyDir"===c.row.type?c.row.dir:(0,O.Il)(c.row.path),h=d.split("/"),p=0;p<(0,O.U$)(d);p++){var y=h.slice(0,Number(p+1)).join("/");s.cols.push(y)}}}}catch(e){o=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}for(var m=new Map,g=t;g<n;g++){var E=[];m.set(g,E);var D=!0,_=!1,b=void 0;try{for(var R,T=r[Symbol.iterator]();!(D=(R=T.next()).done);D=!0){var w=R.value,I=w.cols[g],N=w.y;if(I){var C=E[E.length-1];C&&C.y+C.height===N?C.height+=w.height:E.push({y:N,height:w.height,dir:I,depth:g-t})}}}catch(e){_=!0,b=e}finally{try{D||null==T.return||T.return()}finally{if(_)throw b}}}var A=[],S=!0,M=!1,Z=void 0;try{for(var P,F=m[Symbol.iterator]();!(S=(P=F.next()).done);S=!0){var L=(0,x._)(P.value,2),k=(L[0],L[1]);A.push.apply(A,(0,v._)(k))}}catch(e){M=!0,Z=e}finally{try{S||null==F.return||F.return()}finally{if(M)throw Z}}return A}(e(ed),e(eg))}),eD=(0,J.cn)(!1),e_=(0,J.cn)(null,function(e,t,r){var n=new Map,i=e(eB),o=e(eg),a=!0,u=!1,l=void 0;try{for(var c,s=r.rows[Symbol.iterator]();!(a=(c=s.next()).done);a=!0){var f=c.value,d=f.key.toString(),h=i[f.index];if(h){var p=Math.max(0,eo({row:h,baseDepth:o}));n.set(f.index,{y:f.start+8,height:f.size,index:f.index,key:d,depth:p,row:h})}}}catch(e){u=!0,l=e}finally{try{a||null==s.return||s.return()}finally{if(u)throw l}}t(ed,n),t(es,r.scrollHeight)}),eb=(0,J.cn)({}),eR=(0,Y.kv)(eb,function(e){var t;return null!==(t=e.onContextMenu)&&void 0!==t?t:null}),eT=(0,J.cn)(function(e){return!!e(eb).readOnly||!e(eD)}),ew=(0,J.cn)(function(e){var t;return null!==(t=e(eb).fontSize)&&void 0!==t?t:14}),ex=function(e,t){if("divider"===t)switch(e){case 10:return 28;case 12:case 13:case 14:return 38;case 18:return 44;default:return 48}switch(e){case 10:return 18;case 12:case 13:return 24;case 14:return 32;case 18:return 38;default:return 40}},eI=(0,J.cn)(function(e){return ex(e(ew),"file")}),eN=function(e){switch(e){case 10:case 12:return 12;case 13:case 14:return 16;case 18:return 20;default:return 24}},eC=(0,J.cn)(function(e){return eN(e(ew))}),eA=(0,J.cn)(function(e){return 14>e(ew)?4:8}),eS=(0,J.cn)(function(e){return 14>=e(ew)?4:8}),eO=(0,J.cn)(function(e){return 13===e(ew)?6:16>e(ew)?4:8}),eM=function(e){switch(e){case 10:return 10;case 12:case 13:case 14:return 12;case 18:return 14;default:return 18}},eZ=function(e){switch(e){case 10:return 12;case 12:case 13:return 16;case 14:return 24;case 18:return 32;default:return 40}},eP=(0,J.cn)(function(e){return eZ(e(ew))}),eF=(0,J.cn)(function(e){return eM(e(ew))}),eL=function(e){switch(e){case 10:case 12:case 13:return 10;case 14:case 18:return 16;default:return 20}},ek=(0,J.cn)(function(e){return eL(e(ew))}),eG=(0,J.cn)(new Map);function eH(e){var t=e.filename;return q.nh.includes(t)?"Config files":q.uP.includes(t)?"Packager files":null}var eU=(0,J.cn)([]),ez=(0,J.cn)([]),eB=(0,J.cn)(function(e){var t,r,n=e(eb),i=n.filter,o=n.alwaysShowCreateRow,a=n.root,u=void 0===a?$.Ql:a,l=n.sort,c=n.readOnly;return function(e){var t=e.root,r=void 0===t?$.Ql:t,n=e.dirInfo,i=e.filter,o=e.sort,a=e.getSection,u=e.readOnly,l=e.pendingUploads,c=e.pendingMoves,s=e.pathBeingRenamed,f=e.alwaysShowCreateRow,d=[],h=(null==l?void 0:l.length)?function(e){var t=new Map,r=!0,n=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var u=o.value,l=(0,O.Il)(u.targetPath)||$.Ql,c=t.get(l),s={filename:(0,O.UO)(u.targetPath),progress:u.progress};c?c.push(s):t.set(l,[s])}}catch(e){n=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}return t}(l):null,p=new Map,y=new Map;if(null==c?void 0:c.length){var m=!0,g=!1,E=void 0;try{for(var D,_=c[Symbol.iterator]();!(m=(D=_.next()).done);m=!0){var b=D.value,T=b.from,w=b.to;p.set(T.path,T.type),y.set(w,T.type)}}catch(e){g=!0,E=e}finally{try{m||null==_.return||_.return()}finally{if(g)throw E}}}return!function e(t){var l=n.get(t);if(!(!l||p.has(t))&&l.expanded){if(t===r&&l.loading&&!l.children){d.push({type:"dir",path:t});return}if(l.error){d.push({type:"error",message:l.error.message,dir:t});return}var c=l.children?(0,v._)(l.children):void 0;c&&p.size>0&&(c=c.filter(function(e){return!p.has(ea(t,e.filename))}));var m=!0,g=!1,E=void 0;try{for(var D,_=y[Symbol.iterator]();!(m=(D=_.next()).done);m=!0)!function(){var e=(0,x._)(D.value,2),r=e[0],n=e[1];if(eu(t,r)){var i=(0,O.UO)(r);(null==c||!c.some(function(e){return e.filename===i}))&&(c||(c=[]),c.push({filename:i,type:n}))}}()}catch(e){g=!0,E=e}finally{try{m||null==_.return||_.return()}finally{if(g)throw E}}var b=null==h?void 0:h.get(t);if(b){c||(c=[]);var T=!0,w=!1,I=void 0;try{for(var N,C=b[Symbol.iterator]();!(T=(N=C.next()).done);T=!0){var A=N.value,S=A.filename,M=A.progress;c.push({filename:S,type:R.Tv.File,progress:M})}}catch(e){w=!0,I=e}finally{try{T||null==C.return||C.return()}finally{if(w)throw I}}}if(c){if(!l.create&&!b&&c&&0===c.length){d.push({type:u?"emptyDir":"create",dir:t});return}var Z=function(e,t){var r=t.getSection,n=[],i=new Map,o=!0,a=!1,u=void 0;try{for(var l,c=e[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var s=l.value,f=r(s),d=s.progress?{type:"upload",progress:s.progress,filename:s.filename}:{type:s.type===R.Tv.File?"file":"dir",filename:s.filename};if(!f){n.push(d);continue}var h=i.get(f);if(h){h.push(d);continue}i.set(f,[d])}}catch(e){a=!0,u=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw u}}var p=!0,v=!1,y=void 0;try{for(var m,g=i[Symbol.iterator]();!(p=(m=g.next()).done);p=!0){var E=(0,x._)(m.value,2),D=E[0],_=E[1];n.push({type:"divider",label:D}),(0,Q.fN)(n,_)}}catch(e){v=!0,y=e}finally{try{p||null==g.return||g.return()}finally{if(v)throw y}}return n}(c.filter(i).sort(function(e,n){return o(e,n,t===r)}),{getSection:t===$.Ql?a:function(){return null}}),P=-1,F=!0,L=!1,k=void 0;try{for(var G,H=Z[Symbol.iterator]();!(F=(G=H.next()).done);F=!0)!function(){var r=G.value;if("error"===r.type||"emptyDir"===r.type)throw Error("Expected dir, file, or divider row");if("divider"===r.type)return -1===P&&(P=d.length),d.push({type:"divider",dir:t,label:r.label});var i=ea(t,r.filename);if("dir"===r.type){var o={type:"dir",path:i};s===i&&(o.rename=!0),y.has(i)&&(o.pending=!0);var a=null==h?void 0:h.get(i);if(a&&(o.uploadProgress=a.map(function(e){return e.progress})),d.push(o),!n.get(i))return;e(i)}else if("upload"===r.type)d.push({type:"uploadFile",path:i,progress:r.progress});else if(!b||!b.some(function(e){return e.filename===r.filename})){var u={type:"file",path:i};s===i&&(u.rename=!0),y.has(i)&&(u.pending=!0),d.push(u)}}()}catch(e){L=!0,k=e}finally{try{F||null==H.return||H.return()}finally{if(L)throw k}}if(l.create||f){var U={type:"create",dir:t,fileType:l.create?l.create:void 0};-1===P?d.push(U):d.splice(P,0,U)}}}}(r),d}({root:u,dirInfo:e(eG),filter:i,sort:void 0===l?ei:l,readOnly:void 0!==c&&c,getSection:eH,pendingUploads:e(eU),pathBeingRenamed:null!==(t=e(ey))&&void 0!==t?t:void 0,pendingMoves:null!==(r=e(ez))&&void 0!==r?r:void 0,alwaysShowCreateRow:o})}),ej=(0,J.cn)(function(e){var t=e(ef);if(!t)return null;var r=e(eB).findIndex(function(e){return("file"===e.type||"dir"===e.type)&&e.path===t});return -1!==r?r:null}),eW=(0,J.cn)(null,function(e,t,r){var n,i=e(ej),o=e(ef);if((null===(n=document.activeElement)||void 0===n?void 0:n.tagName)!=="INPUT"&&null!==i&&null!==o){var a=e(eB);switch(r.key){case"ArrowDown":r.preventDefault();var u=en(a,{dir:"next",fromIndex:i});((null==u?void 0:u.type)==="dir"||(null==u?void 0:u.type)==="file")&&t(ef,u.path);return;case"ArrowUp":r.preventDefault();var l=en(a,{dir:"previous",fromIndex:i});((null==l?void 0:l.type)==="dir"||(null==l?void 0:l.type)==="file")&&t(ef,l.path);return;case"ArrowLeft":case"ArrowRight":r.preventDefault();var c=e(eG).get(o);if(!c)return;"ArrowLeft"===r.key&&c.expanded?t(eK,o):"ArrowRight"!==r.key||c.expanded||t(eJ,o);return;case"Enter":case" ":if("Enter"===r.key&&!e(eT))return;if(e(eG).has(o)){t(e$,o);return}e(eb).onFileSelect({event:r,path:o,type:"keydown"});return}}}),eV=(0,J.cn)(null,function(e,t,r){var n;r.path===(null!==(n=e(eb).root)&&void 0!==n?n:$.Ql)&&t(eD,!0),t(eG,function(e){return(0,V.Uy)(e,function(e){var t=r.path===$.Ql?null:r.path+"/",n=!0,i=!1,o=void 0;try{for(var a,u=r.children[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var l,c=a.value,s=t?t+c.filename:c.filename,f=e.get(s);if(c.type!==R.Tv.Directory){f&&(null===(l=f.disposeWatcher)||void 0===l||l.call(f),e.delete(s));continue}f||e.set(s,{expanded:!1})}}catch(e){i=!0,o=e}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}var d=e.get(r.path);d&&(d.children=r.children,d.loading=!1,d.error=void 0)})})}),eY=(0,J.cn)(null,function(e,t,r){var n;r.path===(null!==(n=e(eb).root)&&void 0!==n?n:$.Ql)&&t(eD,!0),t(eG,function(e){return(0,V.Uy)(e,function(e){var t,n=e.get(r.path);n&&(n.loading=!1,n.error=r.error,null===(t=n.disposeWatcher)||void 0===t||t.call(n),n.disposeWatcher=null)})})}),eK=(0,J.cn)(null,function(e,t,r){var n=Array.isArray(r)?r:[r];t(eG,function(e){return(0,V.Uy)(e,function(e){var t=!0,r=!1,i=void 0;try{for(var o,a=n[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var u=o.value,l=e.get(u);l&&(l.expanded=!1,l.loading=!1,l.disposeWatcher&&(l.disposeWatcher(),l.disposeWatcher=null))}}catch(e){r=!0,i=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw i}}})})}),eX=(0,J.cn)(null,function(e,t,r){t(eG,function(e){return(0,V.Uy)(e,function(e){var t,n=e.get(r);n&&(null===(t=n.disposeWatcher)||void 0===t||t.call(n),e.delete(r))})})}),eJ=(0,J.cn)(null,function(e,t,r){var n=Array.isArray(r)?r:[r],i=e(eb).fs;t(eG,function(e){return(0,V.Uy)(e,function(e){var r=!0,o=!1,a=void 0;try{for(var u,l=n[Symbol.iterator]();!(r=(u=l.next()).done);r=!0)!function(){var r,n=u.value,o=null!==(r=e.get(n))&&void 0!==r?r:{expanded:!0};e.has(n)?o.expanded=!0:e.set(n,o),o.disposeWatcher?o.disposeWatcher():o.loading=!0,o.disposeWatcher=i.watchDir(n,{onError:function(e){return t(eY,{path:n,error:e})},onChange:function(e){return t(eV,{path:n,children:e})},onMoveOrDelete:function(){return t(eX,n)}})}()}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}})})}),e$=(0,J.cn)(null,function(e,t,r){var n=e(eG).get(r);if(!n){t(eG,function(e){return(0,V.Uy)(e,function(e){e.set(r,{expanded:!1})})}),t(eJ,r);return}t(n.expanded?eK:eJ,r)}),eq=(0,J.cn)(function(e){return e(eb).manageWidth?e(eD)?function(e){var t=e.rows,r=e.baseDepth,n=[],i=new Map,o=!0,a=!1,u=void 0;try{for(var l,c=t[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var s=l.value,f=function(e){var t=e.row,r=eo({row:t,baseDepth:e.baseDepth});switch(t.type){case"file":case"dir":case"uploadFile":return{text:(0,O.UO)(t.path),depth:r};case"error":return{text:t.message,depth:r};case"divider":return{text:t.label,depth:r};case"create":case"emptyDir":return{text:et,depth:r}}}({row:s,baseDepth:r}),d=f.depth,h=f.text,p=i.get(d);if(!p){i.set(d,new Map([[s.type,h]]));continue}var v=p.get(s.type);v&&(null==v?void 0:v.length)>h.length||p.set(s.type,h)}}catch(e){a=!0,u=e}finally{try{o||null==c.return||c.return()}finally{if(a)throw u}}var y=!0,m=!1,g=void 0;try{for(var E,D=i[Symbol.iterator]();!(y=(E=D.next()).done);y=!0){var _=(0,x._)(E.value,2),b=_[0],R=_[1],T=!0,w=!1,I=void 0;try{for(var N,C=R[Symbol.iterator]();!(T=(N=C.next()).done);T=!0){var A=(0,x._)(N.value,2),S=A[0],M=A[1];n.push({depth:b,type:S,text:M})}}catch(e){w=!0,I=e}finally{try{T||null==C.return||C.return()}finally{if(w)throw I}}}}catch(e){m=!0,g=e}finally{try{y||null==D.return||D.return()}finally{if(m)throw g}}return n}({rows:e(eB),baseDepth:e(eg)}):[{type:"dir",text:er,depth:1}]:null}),eQ=(0,J.cn)(null,function(e,t,r){var n=e(eb).onCreateStart;if(n){n({parentPath:r.parentPath,fileType:r.fileType});return}t(eJ,r.parentPath),t(eG,function(e){return(0,V.Uy)(e,function(e){var t=e.get(r.parentPath);t&&(t.create=r.fileType)})}),t(ef,null)}),e0=(0,J.cn)(null,function(e,t,r){t(eG,function(e){return(0,V.Uy)(e,function(e){var t=e.get(r);t&&(t.create=void 0)})})}),e1=(0,J.cn)(null,function(e,t,r){var n={path:r.path,type:r.fileType};t(ef,n.path),t(e7,{node:n}),t(eG,function(e){return(0,V.Uy)(e,function(e){var t=e.get(r.parentPath);t&&(t.create=void 0)})}),n.type===R.Tv.Directory&&t(eJ,n.path)}),e2=(0,J.cn)(new Map),e4=(0,J.cn)(null),e5=(0,J.cn)(function(e){var t,r;return null!==(r=null===(t=e(e4))||void 0===t?void 0:t.path)&&void 0!==r?r:null}),e3=(0,J.cn)(!0),e7=(0,J.cn)(null,function(e,t,r){var n=r.node,i=r.mode,o=e(eB),a=e(e4);t(e3,!i),t(e2,function(e){return(0,V.Uy)(e,function(e){!function(e,t){var r=t.node,n=t.rows,i=t.mode,o=t.anchor;if(!i){e.clear(),e.set(r.path,r.type);return}if("multi"===i&&e.has(r.path)){e.delete(r.path);return}if("multi"===i){e.set(r.path,r.type);return}var a=r.type===R.Tv.Directory?"dir":"file",u=n.findIndex(function(e){return e.type===a&&e.path===r.path});if(-1!==u){var l=(null==o?void 0:o.type)===R.Tv.Directory?"dir":"file",c=o?n.findIndex(function(e){return e.type===l&&e.path===o.path}):-1;if(-1!==c){var s=c<u?n.slice(c,u+1):n.slice(u,c+1),f=!0,d=!1,h=void 0;try{for(var p,v=n[Symbol.iterator]();!(f=(p=v.next()).done);f=!0){var y=p.value;("file"===y.type||"dir"===y.type)&&(s.includes(y)?e.set(y.path,"file"===y.type?R.Tv.File:R.Tv.Directory):e.delete(y.path))}}catch(e){d=!0,h=e}finally{try{f||null==v.return||v.return()}finally{if(d)throw h}}}}}(e,{node:n,rows:o,mode:i,anchor:a})})});var u=e(e2);if(!(u.size>1)){var l=!0,c=!1,s=void 0;try{for(var f,d=u[Symbol.iterator]();!(l=(f=d.next()).done);l=!0){var h=(0,x._)(f.value,2),p=h[0],v=h[1];t(e4,{path:p,type:v})}}catch(e){c=!0,s=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw s}}}}),e6=(0,J.cn)(null,function(e,t){t(e2,new Map),t(e3,!0),t(e4,null)}),e9=(0,J.cn)(null,(n=(0,K._)(function(e,t,r){var n,i,o;return(0,X.Jh)(this,function(a){switch(a.label){case 0:var u;return n=e(eb).fs,[4,Promise.all(r.map((u=(0,K._)(function(e){var t;return(0,X.Jh)(this,function(r){switch(r.label){case 0:return[4,n.readDir(e)];case 1:return[2,(t=r.sent()).error?t:{path:e,children:t.children,error:null}]}})}),function(e){return u.apply(this,arguments)})))];case 1:if((o=(i=a.sent()).filter(function(e){return null!==e.error})).length)return[2,{errors:o}];return t(eG,function(e){return(0,V.Uy)(e,function(e){var t=!0,r=!1,n=void 0;try{for(var o,a=i[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var u=o.value;if(u.error)throw Error("Unexpected error");var l=e.get(u.path);if(!l){e.set(u.path,{loading:!1,expanded:!0,children:u.children,error:void 0});continue}l.loading=!1,l.expanded=!0,l.children=u.children,l.error=void 0}}catch(e){r=!0,n=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}})}),[2,{errors:null}]}})}),function(e,t,r){return n.apply(this,arguments)})),e8=(0,J.cn)(null,(i=(0,K._)(function(e,t,r){var n,i,o,a,u,l,c,s,f;return(0,X.Jh)(this,function(d){switch(d.label){case 0:n=e(eG),i=[],o=!0,a=!1,u=void 0;try{var h;for(l=((h=r.path.split("/")).pop(),[$.Ql].concat((0,v._)(h.map(function(e,t){return h.slice(0,t+1).join("/")}))))[Symbol.iterator]();!(o=(c=l.next()).done);o=!0)s=c.value,null!=(f=n.get(s))&&f.expanded||i.push(s)}catch(e){a=!0,u=e}finally{try{o||null==l.return||l.return()}finally{if(a)throw u}}if(!i.length)return[3,2];return[4,t(e9,i)];case 1:d.sent(),d.label=2;case 2:return t(e7,{node:r}),[2]}})}),function(e,t,r){return i.apply(this,arguments)})),te=(0,J.cn)(null),tt=(0,J.cn)(null,function(e,t,r){var n=e(te);if(n)for(var i=e(eB),o=0;o<i.length;o++){var a=i[o];if(("file"===a.type||"dir"===a.type)&&a.path===r&&!(o>n.options.count-1)){n.scrollToIndex(o);break}}}),tr=r(3702),tn=r(80786),ti=r(21962),to=(0,b.createContext)(null);function ta(e){return(0,y.tZ)(to.Provider,{value:e.store,children:e.children})}function tu(){var e=(0,b.useContext)(to);if(!e)throw Error("Expected store in context");return e}function tl(e){return(0,tn.Dv)(e,{store:tu()})}function tc(e){return(0,tr.b)(e,tu())}var ts=function(e){return(0,tn.b9)(e,{store:tu()})};function tf(e){return(0,ti.lV)((0,b.useCallback)(function(t){return t(e)},[e]),{store:tu()})}var td=(0,r(22192).$)(["scrollHeight","fontSize","fontSizeSmall","iconSize","horizontalPadding","borderRadius","gutterWidth","minHeight","iconTextGap","rowWidth","rowHeight","rowLeftIndent","rowY","dropPreviewDepth","dropPreviewHeight","dropPreviewY","dropPreviewOpacity","strokeDashoffset","statusColor","statusBackgroundColor","dirStatusIconSize","nodeBackgroundColor","dragPreviewX","dragPreviewY","contextMenuButtonDisplay","hasUnsavedChangesDisplay"]),th=td.cssVars,tp=td.styleTokens,tv={paddingLeft:tp.horizontalPadding,paddingRight:tp.horizontalPadding},ty={"&& svg":{minWidth:tp.iconSize+" !important",minHeight:tp.iconSize+" !important",width:tp.iconSize+" !important",height:tp.iconSize+" !important"}},tm=[_.l0.truncate,{fontSize:tp.fontSize}],tg=(0,Y.kv)(eb,function(e){return e.autocomplete}),tE=(0,D.X)({icon:[ty,{marginRight:tp.iconTextGap}],item:[tv,_.l0.flex.row,_.l0.align.center,M.gU.listItem,{height:tp.rowHeight}],text:[tm,_.l0.flex.growAndShrink(1)]});function tD(e){var t=e.id,r=e.items,n=e.activeIndex,i=e.onSuggestion,o=e.fileType,a=e.innerRef;return(0,y.tZ)(E.G,{tag:"ul",id:t,"aria-label":"Suggestions",innerRef:a,children:r.map(function(e,t){var r=t===n;return(0,y.BX)(E.G,{id:e.value,tag:"li",role:"option","aria-selected":r,style:{backgroundColor:r?M.vb.interactiveBackground:void 0,color:r?_.TV.foregroundDefault:_.TV.foregroundDimmer},onClick:function(){return i(e.value)},css:tE.item,children:[(0,y.tZ)(E.G,{css:tE.icon,children:o===R.Tv.Directory?(0,y.tZ)(C.Z,{}):(0,y.tZ)(I.Z,{path:e.value})}),(0,y.tZ)(j.x,{css:tE.text,text:e.value,highlight:e.highlight,dimmed:!r})]},e.value)})})}var t_=r(54455),tb=r(58474),tR=r(83059),tT=r(1567),tw=r(48487),tx=r(81202),tI=r.n(tx),tN=r(43257);function tC(e){var t=e.fileName,r=e.parentPath,n=r===$.Ql?"":r+"/",i=n+t,o=i.split("/");return{pathPrefix:n,newFilePath:i,segments:o}}function tA(e){return tS.apply(this,arguments)}function tS(){return(tS=(0,K._)(function(e){var t,r,n,i,o,a,u,l,c,s,f,d,h,p,v,y,m,g,E;return(0,X.Jh)(this,function(D){switch(D.label){case 0:if(t=e.fileName,r=e.parentPath,n=e.fs,t.startsWith("/"))return[2,"File names cannot include forward slashes"];o=(i=tC({fileName:t,parentPath:r})).pathPrefix,a=i.newFilePath,u=i.segments,l=!0,c=!1,s=void 0,D.label=1;case 1:D.trys.push([1,7,8,9]),f=Object.entries(u)[Symbol.iterator](),D.label=2;case 2:if(l=(d=f.next()).done)return[3,6];if(p=(h=(0,x._)(d.value,2))[0],v=h[1],y=Number(p),m=[],y!==u.length-1)return[3,4];return[4,n.stat(a)];case 3:D.sent().exists&&m.push((0,O.UO)(a)),D.label=4;case 4:if(!(g=(0,tw.z)({fileName:v,siblingNames:m,parentPath:o+u.slice(0,y).join("/")})))return[3,5];return[2,g];case 5:return l=!0,[3,2];case 6:return[3,9];case 7:return E=D.sent(),c=!0,s=E,[3,9];case 8:try{l||null==f.return||f.return()}finally{if(c)throw s}return[7];case 9:return[2,null]}})})).apply(this,arguments)}function tO(e){var t=tC({fileName:e.fileName,parentPath:e.parentPath}),r=t.pathPrefix,n=t.segments,i=!0,o=!1,a=void 0;try{for(var u,l=Object.entries(n)[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var c=(0,x._)(u.value,2),s=c[0],f=c[1],d=Number(s),h=(0,tw.z)({fileName:f,siblingNames:[],parentPath:r+n.slice(0,d).join("/")});if(h)return h}}catch(e){o=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}return null}function tM(e,t){return e.shiftKey?"bulk":"altKey"===t&&e.altKey||"cmdOrCtrlKey"===t&&(0,tT.jh)(e)?"multi":void 0}var tZ=(0,J.cn)(null,function(e,t,r){var n=r.event,i=r.path;t(ef,i);var o=e(eb).multiselectModifierKey;t(e7,{node:{path:i,type:R.Tv.Directory},mode:o?tM(n,o):void 0}),t(ef,i),n.shiftKey||n.altKey||(0,tT.jh)(n)||t(e$,i)});function tP(){return{fontSize:tc(ew),fontSizeSmall:tc(eF),iconSize:tc(eC),scrollHeight:tc(es),horizontalPadding:tc(eA),borderRadius:tc(eS),gutterWidth:tc(ek),minHeight:tc(eI),iconTextGap:tc(eO)}}function tF(e){return tl((0,tR.Z)(function(){return(0,Y.kv)(ef,function(t){return t===e?0:-1})},[e]))}function tL(e){return tl((0,tR.Z)(function(){return(0,Y.kv)(ed,function(t){var r,n=t.get(e);return n?{style:(r={},(0,p._)(r,th.rowHeight,n.height+"px"),(0,p._)(r,th.rowY,n.y+"px"),(0,p._)(r,th.rowLeftIndent,"calc(".concat(n.depth," * ").concat(tp.gutterWidth,")")),r),depth:n.depth}:void 0},tI())},[e]))}function tk(e){var t=e.index,r=e.path,n=(0,b.useRef)(null),i=tc(ef);return(0,b.useEffect)(function(){var e=function(e){var t;null===(t=n.current)||void 0===t||t.setAttribute("tabIndex",e.toString())},o=function(n){if(!n){e(0===t?0:-1);return}e(n===r?0:-1)};return o(i.current),i.subscribe(o)},[i,r,t]),(0,b.useEffect)(function(){var e=function(e){null!==t&&clearTimeout(t),e===r&&document.activeElement!==n.current&&(t=setTimeout(function(){var e;null===(e=n.current)||void 0===e||e.focus()},50))},t=null;e(i.current);var o=i.subscribe(e);return function(){null!==t&&clearTimeout(t),o()}},[i,r]),[n,ts(ef)]}var tG=[tp.horizontalPadding,tp.iconSize,tp.iconTextGap].join(" + "),tH=[M.gU.filled,{height:"100%",width:"100%",paddingLeft:"calc(".concat(tG,")"),paddingRight:tp.horizontalPadding,fontSize:tp.fontSize}],tU=(0,D.X)({root:[_.l0.flex.row,tv,{padding:tp.horizontalPadding}],icon:[ty,_.l0.color.accentNegativeDefault,{marginRight:tp.iconTextGap}],text:[{fontSize:tp.fontSize},_.l0.color.foregroundDimmer,_.l0.flex.growAndShrink(1)]});function tz(e){return(0,y.BX)(E.G,{css:tU.root,children:[(0,y.tZ)(E.G,{css:tU.icon,children:(0,y.tZ)(F.Z,{})}),(0,y.tZ)(E.G,{css:tU.text,children:e.message})]})}var tB=(0,D.X)({root:[_.l0.position.relative,_.l0.flex.growAndShrink(1),{height:"100%"}],icon:[ty,_.l0.position.absolute,_.l0.left(tp.horizontalPadding),_.l0.top("50%"),{transform:"translateY(-50%)"}],input:tH,inputLoading:[tH,H.p.backgroundPulse()],menu:[_.l0.overflow("hidden"),{borderRadius:tp.borderRadius,border:"1px solid",borderColor:_.TV.outlineDefault}],label:[_.l0.visuallyHidden]});function tj(e){var t,r,n,i,o,a,u,l,c,s,f,d=(0,b.useId)(),h=(0,b.useId)(),v=(t=(0,b.useRef)(null),r=tP(),(0,g.j)(t,r.fontSize,function(e){return(0,p._)({},th.fontSize,e+"px")}),(0,g.j)(t,r.iconTextGap,function(e){return(0,p._)({},th.iconTextGap,e+"px")}),(0,g.j)(t,r.borderRadius,function(e){return(0,p._)({},th.borderRadius,e+"px")}),(0,g.j)(t,r.horizontalPadding,function(e){return(0,p._)({},th.horizontalPadding,e+"px")}),(0,g.j)(t,r.iconSize,function(e){return(0,p._)({},th.iconSize,e+"px")}),(0,g.j)(t,r.fontSize,function(e){return(0,p._)({},th.rowHeight,ex(e,"file")+"px")}),(0,g.j)(t,r.iconTextGap,function(e){return(0,p._)({},th.iconTextGap,e+"px")}),i=(n=(0,x._)((0,b.useState)(null),2))[0],o=n[1],u=(a=(0,x._)((0,b.useState)(null),2))[0],l=a[1],s=(c=(0,B.D)(i,u,{modifiers:[{name:"offset",options:{offset:[0,4]}},G],placement:"bottom-start"})).styles,f=c.attributes,{menuRef:(0,m.l)(t,l),menuAnchorRef:o,styles:s.popper,attributes:f.popper}),D=function(e){var t=e.onSuggestion,r=e.siblings,n=e.value,i=tl(tg),o=(0,x._)((0,b.useState)({items:[],activeIndex:null}),2),a=o[0],u=o[1],l=(0,W.Z)(r),c=(0,W.Z)(n),s=(0,x._)((0,b.useTransition)(),2)[1],f=i?function(e){s(function(){var t=i(e);u(function(e){return(0,V.Uy)(e,function(e){e.items=t.filter(function(e){return e.value!==c.current&&!l.current.some(function(t){return t.filename===e.value})})})})})}:null;function d(){u({items:[],activeIndex:null})}return{items:a.items.length?a.items:null,activeIndex:a.activeIndex,query:f,onKeyDown:function(e){if("Enter"===e.key){var r=null!==a.activeIndex?a.items[a.activeIndex]:null;if(!r)return;return e.preventDefault(),t(r.value),d(),!0}return"ArrowDown"===e.key?(e.preventDefault(),u(function(e){return(0,V.Uy)(e,function(e){if(null===e.activeIndex||e.activeIndex>e.items.length-1){e.activeIndex=0;return}e.activeIndex++})}),!0):"ArrowUp"===e.key?(e.preventDefault(),u(function(e){return(0,V.Uy)(e,function(e){if(null===e.activeIndex){e.activeIndex=e.items.length-1;return}if(0===e.activeIndex){e.activeIndex=null;return}e.activeIndex--})}),!0):void 0},clear:d}}({onSuggestion:e.onSuggestion,siblings:e.siblings,value:e.value}),_=tf(te),N=(0,x._)((0,b.useState)(!0),2),A=N[0],S=N[1],O=(0,b.useRef)(null);(0,b.useEffect)(function(){if(O.current){var e,t=null===(e=_())||void 0===e?void 0:e.scrollElement;if(t)return(0,k.j)(O.current,function(){return S(!0),function(){return S(!1)}},{root:t})}},[_]);var M=A&&!!(e.error||D.items),Z=D.items&&D.activeIndex?D.items[D.activeIndex]:void 0,P=!e.error&&D.items?D.items:null,F=(0,b.useRef)(null),H=D.clear,j=(0,L.Z)(function(e){var t;null!==(t=F.current)&&void 0!==t&&t.contains(e.target)||H()},[H]),Y=(0,L.Z)(function(t){var r,n,i=e.inputRef.current;!i||(null===(r=F.current)||void 0===r?void 0:r.contains(t.target))||(null===(n=j.current)||void 0===n?void 0:n.contains(t.target))||e.onClickOutside({inputValue:i.value})},[]);return(0,y.BX)(y.HY,{children:[(0,y.tZ)("label",{css:tB.label,htmlFor:d,children:"file name"}),(0,y.BX)(E.G,{css:tB.root,innerRef:(0,m.l)(F,v.menuAnchorRef),children:[(0,y.tZ)(E.G,{css:tB.icon,children:e.fileType===R.Tv.Directory?(0,y.tZ)(C.Z,{}):(0,y.tZ)(I.Z,{path:e.value})}),(0,y.tZ)("input",{spellCheck:!1,"aria-controls":D.query?h:void 0,"aria-expanded":D.items?"true":"false","aria-activedescendant":null==Z?void 0:Z.value,role:D.query?"combobox":void 0,id:d,ref:(0,m.l)(e.inputRef,O,Y),css:e.loading?tB.inputLoading:tB.input,value:e.value,onChange:e.loading?void 0:function(t){var r;e.onChange(t),null===(r=D.query)||void 0===r||r.call(D,{input:t.currentTarget.value,fileType:e.fileType,type:e.type,siblings:e.siblings})},onKeyDown:function(t){D.onKeyDown(t)||e.onKeyDown(t)}})]}),(0,y.tZ)(U.h,{children:(0,y.BX)(z.Tg,(0,w._)((0,T._)({css:tB.menu,elevated:!0,innerRef:v.menuRef,style:(0,w._)((0,T._)({},v.styles),{display:M?"block":"none"})},v.attributes),{children:[e.error?(0,y.tZ)(tz,{message:e.error}):null,P?(0,y.tZ)(tD,{id:h,innerRef:j,items:P,activeIndex:D.activeIndex,onSuggestion:function(t){e.onSuggestion(t),H()},fileType:e.fileType}):null]}))})]})}var tW=(0,D.X)({createFilePicker:[_.l0.align.center,_.l0.rowWithGap(4),{fontSize:tp.fontSize,paddingRight:tp.horizontalPadding,paddingLeft:tp.horizontalPadding}],button:[_.l0.reset.button,_.l0.p(2),M.gU.filled,_.l0.color.foregroundDimmer,{fontSize:"inherit"}],text:[tm,_.l0.color.foregroundDimmest],label:[_.l0.visuallyHidden]});function tV(e){var t,r,n,i,o,a,u,l,c,s,f,d,h,p,v,m,g,E,D,_,T,w=(t=e.dir,n=ts(eQ),i=ts(e0),o=ts(e1),u=(a=(0,x._)((0,b.useState)(""),2))[0],l=a[1],c=tf(eb),f=(s=(0,x._)((0,b.useState)(!1),2))[0],d=s[1],p=(h=(0,x._)((0,b.useState)(null),2))[0],v=h[1],m=(0,tR.Z)(function(){return(0,Y.kv)(eG,function(e){return e.get(t)})},[t]),g=(0,tR.Z)(function(){return(0,Y.kv)(m,function(e){var t;return null!==(t=null==e?void 0:e.create)&&void 0!==t?t:null})},[m]),E=tl((0,tR.Z)(function(){return(0,Y.kv)(m,function(e){var t;return null!==(t=null==e?void 0:e.children)&&void 0!==t?t:null})},[m])),D=tl(g),_=(0,K._)(function(e){var r,n,i,a,u,s,f,h;return(0,X.Jh)(this,function(p){switch(p.label){case 0:if(!D)return[2];if(i=c().fs,a=null,0!==e.length)return[3,1];return a="File names cannot be empty",[3,4];case 1:if(!e.includes("/"))return[3,3];return[4,tA({fileName:e,parentPath:t,fs:i})];case 2:return a=p.sent(),[3,4];case 3:a=(0,tw.z)({fileName:e,siblingNames:null!==(u=null==E?void 0:E.map(function(e){return e.filename}))&&void 0!==u?u:[],parentPath:t}),p.label=4;case 4:if(a)return v(a),[2];if((f=(s=t===$.Ql?null:t+"/")?s+e:e).includes("//")&&(f=f.split("/").filter(function(e){return e.length>0}).join("/")),d(!0),D!==R.Tv.Directory)return[3,6];return[4,i.createDir(f)];case 5:return h=p.sent(),[3,8];case 6:return[4,i.writeFile(f,new tN.Z(""))];case 7:h=p.sent(),p.label=8;case 8:if(h.error)return v("Something went wrong"),[2];return d(!1),l(""),o({parentPath:t,path:f,fileType:D}),null===(r=(n=c()).onCreate)||void 0===r||r.call(n,{path:f,type:D}),[2]}})}),!(T=p)&&u.includes("/")?T=tO({fileName:u,parentPath:t}):T||(T=(0,tw.z)({fileName:u,siblingNames:null!==(r=null==E?void 0:E.map(function(e){return e.filename}))&&void 0!==r?r:[],parentPath:t})),{value:u,setValue:l,fileType:D,create:function(e){return _.apply(this,arguments)},creating:f,error:T,clearError:function(){return v(null)},cancel:(0,tR.Z)(function(){return function(){return i(t)}},[t,i]),start:(0,tR.Z)(function(){return function(e){return n({parentPath:t,fileType:e})}},[t,n]),siblings:E}),I=(0,b.useRef)(null);return((0,b.useEffect)(function(){var e;w.fileType&&(null===(e=I.current)||void 0===e||e.focus())},[w.fileType]),w.fileType)?(0,y.tZ)(tj,{siblings:w.siblings||[],type:"create",inputRef:I,loading:w.creating,error:w.error,value:w.value,fileType:w.fileType,onClickOutside:function(e){var t=e.inputValue;if(""===t){w.cancel();return}w.create(t)},onChange:function(e){w.error&&w.clearError(),w.setValue(e.currentTarget.value)},onKeyDown:function(e){if("Escape"===e.key){w.cancel();return}"Enter"===e.key&&w.create(e.currentTarget.value)},onSuggestion:function(e){w.setValue(e),w.create(e)}}):(0,y.tZ)(tY,{create:w.start})}function tY(e){return(0,y.BX)(E.G,{css:tW.createFilePicker,children:[(0,y.tZ)(E.G,{css:tW.text,children:"Add a"}),(0,y.tZ)(E.G,{tag:"button",css:tW.button,onClick:function(){return e.create(R.Tv.File)},children:"file"}),(0,y.tZ)(E.G,{css:tW.text,children:"or "}),(0,y.tZ)(E.G,{tag:"button",css:tW.button,onClick:function(){return e.create(R.Tv.Directory)},children:"folder"})]})}var tK=(0,D.X)({root:[{marginLeft:"auto",paddingLeft:tp.horizontalPadding}],svg:[{transform:"rotate(-90deg)",transformOrigin:"center center","& .inner-circle":{strokeDashoffset:tp.strokeDashoffset}}]});function tX(e){var t=tl(ew)/2,r=t/2,n=2*r*Math.PI,i=(0,b.useRef)(null);return(0,g.j)(i,e.progress,function(e){return(0,p._)({},th.strokeDashoffset,(n-e*n).toString())}),(0,y.tZ)(E.G,{innerRef:i,css:tK.root,children:(0,y.BX)("svg",{css:tK.svg,height:2*t,width:2*t,children:[(0,y.tZ)("circle",{fill:_.TV.backgroundHigher,r:t,cx:t,cy:t}),(0,y.tZ)("circle",{className:"inner-circle",stroke:_.TV.foregroundDimmest,fill:"transparent",strokeWidth:t,strokeDasharray:n+" "+n,r:r,cx:t,cy:t})]})})}var tJ=function(e){return e.reduce(function(e,t){return e+t.current},0)/e.length};function t$(e){var t,r,n,i,o=tl(ew)/2,a=o/2,u=2*a*Math.PI,l=(t=e.uploadProgress,n=(r=(0,x._)((0,b.useState)(tJ(t)),2))[0],i=r[1],(0,b.useEffect)(function(){var e=[],r=!0,n=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var l=a.value;e.push(l.subscribe(function(){i(tJ(t))}))}}catch(e){n=!0,o=e}finally{try{r||null==u.return||u.return()}finally{if(n)throw o}}return function(){e.map(function(e){return e()})}},[t]),n),c=(0,b.useRef)(null);return(0,y.tZ)(E.G,{innerRef:c,css:tK.root,children:(0,y.BX)("svg",{css:tK.svg,height:2*o,width:2*o,children:[(0,y.tZ)("circle",{fill:_.TV.backgroundHigher,r:o,cx:o,cy:o}),(0,y.tZ)("circle",{className:"inner-circle",style:(0,p._)({},th.strokeDashoffset,(u-l*u).toString()),stroke:_.TV.foregroundDimmest,fill:"transparent",strokeWidth:o,strokeDasharray:u+" "+u,r:a,cx:o,cy:o})]})})}function tq(e){var t,r,n,i,o,a,u,l,c,s,f,d,h,p,v,m,g,E,D,_,T,w=(0,x._)((t={path:e.path,type:e.fileType},n=tf(eb),o=(i=(0,x._)((0,b.useState)(null),2))[0],a=i[1],u=(0,O.Il)(t.path)||$.Ql,l=(0,O.UO)(t.path),c=ts(ey),s=ts(ef),d=(f=(0,x._)((0,b.useState)(l),2))[0],h=f[1],v=(p=(0,x._)((0,b.useState)(!1),2))[0],m=p[1],g=(0,tR.Z)(function(){return(0,Y.kv)(eG,function(e){var t;return null===(t=e.get(u))||void 0===t?void 0:t.children})},[u]),E=d!==l,D=tl(g),_=null,E&&d.includes("/")?_=tO({fileName:d,parentPath:u}):E&&(_=(0,tw.z)({fileName:d,siblingNames:null!==(r=null==D?void 0:D.map(function(e){return e.filename}))&&void 0!==r?r:[],parentPath:u})),T=(0,K._)(function(e){var r,i,o,f,d,h,p,v,y,g;return(0,X.Jh)(this,function(E){switch(E.label){case 0:if(_||!e||e===l)return[2];if(i=(r=n()).fs,o=r.onFileRenameStart,f=r.onFileRenameEnd,d=null,!e.includes("/"))return[3,2];return[4,tA({fileName:e,parentPath:u,fs:i})];case 1:return d=E.sent(),[3,3];case 2:d=(0,tw.z)({fileName:e,siblingNames:null!==(h=null==D?void 0:D.map(function(e){return e.filename}))&&void 0!==h?h:[],parentPath:u}),E.label=3;case 3:if(d)return a(d),[2];if(v=(p=u===$.Ql?null:u+"/")?p+e:e,y=(0,O.Il)(v)||$.Ql,m(!0),null==o||o({from:t.path,to:v}),!(y!==$.Ql))return[3,6];return[4,i.stat(y)];case 4:if(E.sent().exists)return[3,6];return[4,i.createDir(y)];case 5:E.sent(),E.label=6;case 6:if(t.type!==R.Tv.Directory)return[3,8];return[4,i.moveDir(t.path,v)];case 7:return g=E.sent(),[3,10];case 8:return[4,i.moveFile(t.path,v)];case 9:g=E.sent(),E.label=10;case 10:if(g.error)return a("Something went wrong"),m(!1),null==f||f(),[2];return c(null),null==f||f(),s(v),[2]}})}),[{canRename:!!d&&E&&!_,value:d,renaming:v,error:o||_,siblings:D},{setValue:h,rename:function(e){return T.apply(this,arguments)},cancel:function(){var e=n().onFileRenameEnd;c(null),null==e||e(),s(t.path)}}]),2),I=w[0],N=w[1],C=N.setValue,A=N.rename,S=N.cancel,M=(0,b.useRef)(null),Z=(0,b.useRef)(I.value);return(0,b.useEffect)(function(){if(M.current){var e=Z.current;if(e){var t=e.lastIndexOf(".");t<=1&&(t=e.length);var r=e.startsWith(".")?1:0;M.current.focus(),M.current.setSelectionRange(r,t)}}},[]),(0,y.tZ)(tj,{siblings:I.siblings?I.siblings.filter(function(t){return t.filename!==(0,O.UO)(e.path)}):[],type:"rename",inputRef:M,loading:I.renaming,error:I.error,value:I.value,fileType:e.fileType,onClickOutside:function(e){var t=e.inputValue;I.canRename?A(t):I.error||S()},onChange:function(e){C(e.currentTarget.value)},onKeyDown:function(e){if("Escape"===e.key){S();return}"Enter"!==e.key||(I.canRename?A(e.currentTarget.value):I.error||S())},onSuggestion:function(e){C(e),A(e)}})}var tQ=r(42471),t0=(l={},(0,p._)(l,tQ.hF.ADDED,"A"),(0,p._)(l,tQ.hF.UNTRACKED,"A"),(0,p._)(l,tQ.hF.MODIFIED,"M"),(0,p._)(l,tQ.hF.DELETED,"D"),(0,p._)(l,tQ.hF.RENAMED,"R"),(0,p._)(l,tQ.hF.COPIED,"C"),l),t1=(c={},(0,p._)(c,tQ.hF.ADDED,_.TV.greenDimmest),(0,p._)(c,tQ.hF.UNTRACKED,_.TV.greenDimmest),(0,p._)(c,tQ.hF.MODIFIED,_.TV.yellowDimmest),(0,p._)(c,tQ.hF.DELETED,_.TV.redDimmest),(0,p._)(c,tQ.hF.RENAMED,_.TV.tealDimmest),(0,p._)(c,tQ.hF.COPIED,_.TV.limeDimmest),c),t2=(s={},(0,p._)(s,tQ.hF.ADDED,_.TV.greenStrongest),(0,p._)(s,tQ.hF.UNTRACKED,_.TV.greenStrongest),(0,p._)(s,tQ.hF.MODIFIED,_.TV.yellowStrongest),(0,p._)(s,tQ.hF.DELETED,_.TV.redStrongest),(0,p._)(s,tQ.hF.RENAMED,_.TV.tealStrongest),(0,p._)(s,tQ.hF.COPIED,_.TV.limeStrongest),s);function t4(e){return e===tQ.hF.ADDED||e===tQ.hF.UNTRACKED||e===tQ.hF.MODIFIED||e===tQ.hF.DELETED||e===tQ.hF.RENAMED||e===tQ.hF.COPIED}var t5={color:tp.statusColor,fontSize:tp.fontSizeSmall,minWidth:tp.dirStatusIconSize,height:tp.dirStatusIconSize},t3=(0,D.X)({fileIcon:[_.l0.fontWeight.bold,_.l0.px(2),_.l0.center,t5],directoryCountIcon:[_.l0.fontWeight.medium,_.l0.borderRadius(4),_.l0.px(2),_.l0.center,t5,{backgroundColor:tp.statusBackgroundColor}],directoryDraftBufferIndicator:[_.l0.width(8),_.l0.height(8),_.l0.ml(8),_.l0.border({color:_.TV.foregroundDimmer,width:1}),{borderRadius:"50%"}],fileDraftBufferIndicator:[_.l0.width(8),_.l0.height(8),_.l0.backgroundColor.foregroundDimmer,{borderRadius:"50%"}]});function t7(e){return(0,y.tZ)(E.G,{css:t3.fileIcon,children:(0,y.tZ)(E.G,{children:e.text})})}function t6(e){return(0,y.tZ)(E.G,{css:t3.directoryCountIcon,children:(0,y.tZ)(E.G,{children:e.count})})}var t9=r(74044),t8=r(99149),re=r(83619),rt=r(99595),rr=r(2047),rn=r(33024),ri=r.n(rn),ro=r(30826),ra=r.n(ro);function ru(e,t,r){return Math.floor(Math.min(t,Math.max(e,r)))}var rl=r(49115),rc=r(25731);function rs(){return(rs=(0,K._)(function(e){var t,r,n,i,o,a,u,l,c,s,f,d;return(0,X.Jh)(this,function(h){switch(h.label){case 0:var p;if(t=e.parentPath,r=e.overwrite,n=e.fs,i=e.files,o=e.onStart,a=e.onUpload,u=e.onError,l=e.onDone,c=e.envMigrationFlag,i.length>1e6)throw Error("Trying to upload too many files at once.");if(i.reduce(function(e,t){return t.size+e},0)>104857600)throw Error("Total file upload size exceeds maximum limit.");return p=(0,K._)(function(e){var t,i,o,l,s,f,d;return(0,X.Jh)(this,function(h){switch(h.label){case 0:if(t=e.targetPath,i=e.file,o=e.progress,r)return[3,2];return[4,n.stat(t)];case 1:if(h.sent().exists)return u(l={file:i,path:t,error:"ALREADY_EXIST"}),[2,l];h.label=2;case 2:s=null,h.label=3;case 3:return h.trys.push([3,5,,6]),[4,(0,rl.pV)(i)];case 4:return s=h.sent(),[3,6];case 5:return h.sent(),u(f={file:i,path:t,error:"FILE_READ"}),[2,f];case 6:return d=tN.Z.from(s),[4,n.transferFile(t,d,function(e,t){o.current=t/e},c)];case 7:return h.sent(),a({file:i,path:t}),[2,{path:t,file:i}]}})}),s=function(e){return p.apply(this,arguments)},o(f=i.map(function(e){var r=e.dirPath||e.webkitRelativePath||e.name;return{targetPath:t?t+"/"+r:r,progress:(0,rc.u)(0),file:e}})),[4,Promise.all(f.map(s))];case 1:return d=h.sent(),l({parentPath:t,uploads:d.filter(function(e){return!("error"in e)}),errors:d.reduce(function(e,t){return"error"in t?(0,v._)(e).concat([t]):e},[])}),[2]}})})).apply(this,arguments)}(o=f||(f={})).AlreadyExists="ALREADY_EXIST",o.FileRead="FILE_READ",o.Network="NETWORK";var rf=r(47495),rd=r(97676),rh=r(79527),rp=r(6191),rv=r(30967);function ry(e,t){if(t===e.path)return!1;var r=t+"/"+(0,O.UO)(e.path);return!(r===e.path||(0,ee.yr)(e.path,t)||(0,ee.yr)(r,e.path))}var rm=(0,J.cn)(null,(a=(0,K._)(function(e,t,r){var n,i,o,a,u,l,c,s;return(0,X.Jh)(this,function(f){var d,h,p,v,y,m,g,E;switch(f.label){case 0:if(i=null==(n=e(eG).get(r.to))?void 0:n.children)return[3,2];return[4,e(eb).fs.readDir(r.to)];case 1:if((o=f.sent()).error)return[2];i=o.children,f.label=2;case 2:if(!i)throw Error("Expected children");if(d=r.nodes,h=r.to,p=i,a=d.reduce(function(e,t){var r=(0,O.UO)(t.path),n=(0,O.Il)(t.path),i=null==p?void 0:p.find(function(e){return e.filename===r});return i&&(""===n?$.Ql:n)!==h&&e.push({type:i.type,path:h===$.Ql?i.filename:h+"/"+i.filename}),e},[]),v=r.nodes,y=r.to,!(u=(m=(0,O.RQ)(v)).every(function(e){return ry(e,y)})?m.map(function(e){var t=(0,O.UO)(e.path);return{from:e,to:y===$.Ql?t:y+"/"+t}}):null))return[2];if(l=e(eb).fs,!a.length)return[3,4];if(a.some(function(e){return u.some(function(t){var r=t.from;return(0,ee.yr)(e.path,r.path)})}))return[2];if(!r.overwrite)return null==(c=e(eb).onConflicts)||c({type:"move",nodes:r.nodes,to:r.to,conflicts:a}),[2];return[4,Promise.all(a.map((g=(0,K._)(function(e){var t;return(0,X.Jh)(this,function(r){switch(r.label){case 0:return[4,e.type===R.Tv.Directory?l.deleteDir(e.path):l.deleteFile(e.path)];case 1:return[2,(t=r.sent()).error?{error:t.error,node:e}:null]}})}),function(e){return g.apply(this,arguments)})))];case 3:if(f.sent().filter(Boolean).length)return[2];f.label=4;case 4:return t(ez,u),[4,Promise.all(u.map((E=(0,K._)(function(e){var t,r,n;return(0,X.Jh)(this,function(i){switch(i.label){case 0:return t=e.from,r=e.to,[4,t.type===R.Tv.Directory?l.moveDir(t.path,r):l.moveFile(t.path,r)];case 1:return[2,(n=i.sent()).error?{error:n.error,from:t,to:r}:null]}})}),function(e){return E.apply(this,arguments)})))];case 5:if(s=f.sent(),t(ez,[]),s.filter(Boolean).length)return[2];return t(e2,new Map(u.map(function(e){return[e.to,e.from.type]}))),[2]}})}),function(e,t,r){return a.apply(this,arguments)})),rg=r(10777),rE=(0,J.cn)(null,(u=(0,K._)(function(e,t,r){var n,i,o,a,u,l,c,s,f;return(0,X.Jh)(this,function(d){switch(d.label){case 0:if(n=e(eb).fs,i=r.parentPath||$.Ql,a=null==(o=e(eG).get(i))?void 0:o.children,r.files.length>1e6)return r.onError("Trying to upload too many files at once. Please try again with fewer files."),[2];if(r.files.reduce(function(e,t){return t.size+e},0)>104857600)return r.onError("Total file upload size exceeds maximum limit. Please try again with smaller files."),[2];if(a)return[3,2];return[4,n.readDir(i)];case 1:if((u=d.sent()).error)return[2];a=u.children,d.label=2;case 2:var h;if(!a)throw Error("Expected children");if(l=(0,v._)(new Set(r.files.map(function(e){return e.dirPath?e.dirPath.split("/")[0]:e.name}))),(s=(c=a.filter(function(e){return l.some(function(t){return t===e.filename})})).length?c.map(function(e){return{path:i===$.Ql?e.filename:i+"/"+e.filename,type:e.type}}):null)&&!r.overwrite)return null==(f=e(eb).onConflicts)||f({type:"upload",files:r.files,to:i,conflicts:c.map(function(e){return{path:i===$.Ql?e.filename:i+"/"+e.filename,type:e.type}})}),[2];if(!s)return[3,4];return[4,Promise.all(s.map((h=(0,K._)(function(e){var t;return(0,X.Jh)(this,function(r){switch(r.label){case 0:return[4,e.type===R.Tv.Directory?n.deleteDir(e.path):n.deleteFile(e.path)];case 1:return[2,(t=r.sent()).error?{error:t.error,node:e}:null]}})}),function(e){return h.apply(this,arguments)})))];case 3:if(d.sent().filter(Boolean).length)return[2];d.label=4;case 4:return function(e){rs.apply(this,arguments)}({parentPath:r.parentPath,files:r.files,fs:n,onStart:function(e){t(eU,function(t){return(0,V.Uy)(t,function(t){var r=!0,n=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var u=o.value;t.push(u)}}catch(e){n=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(n)throw i}}})})},onUpload:function(e){t(eU,function(t){return(0,V.Uy)(t,function(t){var r=t.findIndex(function(t){return t.targetPath===e.path});-1!==r&&t.splice(r,1)})})},onError:function(e){t(eU,function(t){return(0,V.Uy)(t,function(t){var r=t.findIndex(function(t){return t.targetPath===e.path});-1!==r&&t.splice(r,1)})})},onDone:function(e){var t=e.errors,r=e.parentPath;if(!t.length){rg.kg.info("Successfully uploaded files",{uploadSource:"filetree",parentPath:r});return}}}),[2]}})}),function(e,t,r){return u.apply(this,arguments)})),rD=(0,J.cn)(0),r_=(0,J.cn)(null),rb=(0,J.cn)(function(e){var t=e(r_);if(null===t)return null;var r=e(ed),n=-1!==t?r.get(t):null;return n&&n.depth>0||(null==n?void 0:n.row.type)==="dir"?function(e,t){var r=e.get(t);if(!r)return null;var n=0,i=r.height,o="dir"===r.row.type?r.depth+1:r.depth;if("dir"===r.row.type)o=r.depth+1,n=r.y;else{o=r.depth;for(var a=t-1;a>=0;a--){var u=e.get(a);if(!u)break;if("dir"===u.row.type&&("file"===r.row.type||"uploadFile"===r.row.type?eu(u.row.path,r.row.path):u.row.path===r.row.dir)){i+=u.height,n=u.y;break}u.depth>=r.depth&&(i+=u.height)}}for(var l=t+1;l<e.size;l++){var c=e.get(l);if(!c||c.depth<=("dir"===r.row.type?r.depth:r.depth-1))break;i+=c.height}return{y:n,height:i,depth:o}}(r,t):{y:e(rD),depth:1,height:e(ec).height-8}}),rR="(".concat(tp.dropPreviewDepth," - 1) * ").concat(tp.gutterWidth),rT=(0,D.X)({root:[_.l0.position.absolute,_.l0.top(0),_.l0.left(0),_.l0.borderRadius(8),{pointerEvents:"none",transform:"translate(calc(".concat(rR,"), ").concat(tp.dropPreviewY,")"),width:"calc(100% - ".concat(rR,")"),height:tp.dropPreviewHeight,opacity:tp.dropPreviewOpacity,outline:"1px dashed ".concat(tp.statusColor),outlineOffset:-1}]}),rw=(0,b.memo)(function(){var e=tc(rb),t=tc(rZ),r=tc(rM),n=(0,b.useRef)(null);(0,g.j)(n,e,function(e){var t,r,n,i;return i={},(0,p._)(i,th.dropPreviewY,(null!==(t=null==e?void 0:e.y)&&void 0!==t?t:0)+"px"),(0,p._)(i,th.dropPreviewHeight,(null!==(r=null==e?void 0:e.height)&&void 0!==r?r:0)+"px"),(0,p._)(i,th.dropPreviewDepth,null!==(n=null==e?void 0:e.depth.toString())&&void 0!==n?n:"0"),i}),(0,g.j)(n,r,function(e){return(0,p._)({},th.dropPreviewOpacity,e?"1":"0")}),(0,g.j)(n,t,function(e){return(0,p._)({},th.statusColor,e?_.TV.accentPrimaryDefault:_.TV.accentNegativeDefault)});var i=(0,rr.T)();return(0,y.tZ)(E.G,{style:{transition:i?void 0:"transform 140ms, width 140ms, height 140ms, opacity 140ms ease-out 60ms"},innerRef:n,css:rT.root})}),rx=(0,J.cn)(null,function(e,t,r){if(null!==r){var n=!0,i=!1,o=void 0;try{for(var a,u=e(ed)[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var l=(0,x._)(a.value,2),c=l[0],s=l[1];if(!(r.y<s.y)&&!(r.y>s.y+s.height))return t(r_,c),s}}catch(e){i=!0,o=e}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}t(r_,-1)}}),rI=t9.Dy.Object({type:t9.Dy.Literal("nodes"),width:t9.Dy.Number(),height:t9.Dy.Number(),nodes:t9.Dy.Array(t9.Dy.Object({path:t9.Dy.String(),type:t9.Dy.Enum(R.Tv)}))}),rN=(0,J.cn)(null,function(e,t,r){t(e2,function(e){return(0,V.Uy)(e,function(e){e.set(r.path,r.type)})});var n=[r];if(e(e3))return n;var i=!0,o=!1,a=void 0;try{for(var u,l=e(e2)[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var c=(0,x._)(u.value,2),s=c[0],f=c[1];s!==r.path&&n.push({path:s,type:f})}}catch(e){o=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}return n});function rC(e){var t=ts(r_),r=ts(rN),n=tl(eT),i=(0,b.useRef)(null),o=(0,x._)((0,rd.c)({type:e.type,item:function(){var t,n,o=r(e),a=null!==(n=null===(t=i.current)||void 0===t?void 0:t.getBoundingClientRect())&&void 0!==n?n:{width:160,height:32};return{nodes:o,type:"nodes",width:a.width,height:a.height}},collect:function(t){var r=t.getItem();return{isDragging:!!((null==r?void 0:r.type)==="nodes"&&r.nodes.some(function(t){return t.path===e.path}))}},end:function(){t(null)}}),3),a=o[0],u=o[1],l=o[2],c=a.isDragging;return(0,re.K)(l),{isDragging:c,dragRef:n?void 0:u,sizeRef:i}}var rA=(0,D.X)({root:[_.l0.position.absolute,{left:0,top:0,transform:"translate(".concat(tp.dragPreviewX,", ").concat(tp.dragPreviewY,")"),pointerEvents:"none"}],item:[_.l0.backgroundColor.backgroundHighest,_.l0.flex.row,_.l0.align.center,_.l0.shadow(3),tv,{height:tp.rowHeight,borderRadius:tp.borderRadius}],icon:[ty,{marginRight:tp.iconTextGap}],text:[tm,_.l0.flex.growAndShrink(1),{color:tp.statusColor}],count:[tm,_.l0.backgroundColor.accentPrimaryDimmest,_.l0.color.accentPrimaryStrongest,_.l0.fontWeight.medium,_.l0.position.absolute,_.l0.left("calc(50% - 4px)"),_.l0.top("calc(100% - 4px)"),_.l0.borderRadius("full"),_.l0.px(4),_.l0.center,{fontSize:tp.fontSizeSmall}]}),rS=(0,b.memo)(function(e){var t=(0,b.useRef)(null),r=tP(),n=tc(rO);return(0,g.j)(t,n,function(e){var t;return t={},(0,p._)(t,th.dragPreviewX,(e?e.x:0)+"px"),(0,p._)(t,th.dragPreviewY,(e?e.y:0)+"px"),t}),(0,g.j)(t,r.horizontalPadding,function(e){return(0,p._)({},th.horizontalPadding,e+"px")}),(0,g.j)(t,r.fontSize,function(e){return(0,p._)({},th.fontSize,e+"px")}),(0,g.j)(t,r.fontSizeSmall,function(e){return(0,p._)({},th.fontSizeSmall,e+"px")}),(0,g.j)(t,r.iconSize,function(e){return(0,p._)({},th.iconSize,e+"px")}),(0,g.j)(t,r.iconTextGap,function(e){return(0,p._)({},th.iconTextGap,e+"px")}),(0,g.j)(t,r.borderRadius,function(e){return(0,p._)({},th.borderRadius,e+"px")}),(0,g.j)(t,r.gutterWidth,function(e){return(0,p._)({},th.gutterWidth,e+"px")}),(0,y.tZ)(E.G,{innerRef:t,css:rA.root,children:(0,y.BX)(E.G,{css:rA.item,style:{width:e.width,height:e.height},children:[(0,y.tZ)(E.G,{css:rA.icon,children:e.type===R.Tv.File?(0,y.tZ)(I.Z,{path:e.path}):(0,y.tZ)(C.Z,{})}),(0,y.tZ)(E.G,{css:rA.text,children:(0,O.UO)(e.path)}),e.count>1?(0,y.tZ)(E.G,{css:rA.count,children:e.count}):null]})})}),rO=(0,J.cn)(null);(0,J.cn)(function(e){return null!==e(rO)});var rM=(0,J.cn)(!1),rZ=(0,J.cn)(!1);function rP(){var e=(0,rh.f)(function(e){return{item:e.getItem(),isDragging:e.isDragging(),initialOffset:e.getInitialSourceClientOffset(),currentOffset:e.getSourceClientOffset()}}),t=e.isDragging,r=e.item,n=e.currentOffset,i=ts(rO);if((0,b.useEffect)(function(){i(n?{x:n.x,y:n.y}:null)},[i,n]),!t||!t8.B4.Check(rI,r))return null;var o=r.nodes,a=r.width,u=r.height,l=(0,x._)(o,1)[0];return l?(0,rv.createPortal)((0,y.tZ)(rS,{type:l.type,path:l.path,count:o.length,width:a,height:u}),document.body):null}var rF=[_.l0.position.absolute,_.l0.top(0),_.l0.left(0),{width:"calc(100% - ".concat(tp.rowLeftIndent,")"),height:tp.rowHeight,transform:"translateY(".concat(tp.rowY,")"),marginLeft:tp.rowLeftIndent}],rL=(0,D.X)({divider:(0,v._)(rF).concat([tv,_.l0.flex.growAndShrink(1),_.l0.justify.center]),dividerInner:[{borderTop:"1px dashed",borderColor:_.TV.outlineDimmest,height:"70%",justifyContent:"end"}],dividerText:[_.l0.truncate,_.l0.color.foregroundDimmer,{fontSize:tp.fontSizeSmall}],error:(0,v._)(rF).concat([_.l0.rowWithGap(4),_.l0.align.center,tv]),emptyDir:(0,v._)(rF).concat([tv,_.l0.color.foregroundDimmest,_.l0.justify.center,{paddingLeft:tp.iconSize,paddingRight:tp.horizontalPadding}]),row:(0,v._)(rF).concat([_.l0.flex.growAndShrink(1),_.l0.flex.row,_.l0.align.center,M.gU.nofill,(h={backgroundColor:tp.nodeBackgroundColor,borderRadius:tp.borderRadius,cursor:"pointer","&:focus":{boxShadow:"0 0 0 2px "+_.TV.accentPrimaryDefault,zIndex:1}},(0,p._)(h,th.hasUnsavedChangesDisplay,"flex"),(0,p._)(h,"@media (hover: hover)",(0,p._)({},th.contextMenuButtonDisplay,"none")),(0,p._)(h,"&:hover, &:active, &:focus",(d={},(0,p._)(d,th.contextMenuButtonDisplay,"flex"),(0,p._)(d,th.hasUnsavedChangesDisplay,"none"),d)),(0,p._)(h,"transitionDuration","0ms"),h)]),rowContent:[_.l0.flex.row,_.l0.align.center,_.l0.flex.growAndShrink(1),tv],uploadRow:(0,v._)(rF).concat([_.l0.flex.growAndShrink(1),_.l0.align.center,_.l0.flex.row,_.l0.align.center,tv,_.l0.border({color:"transparent"}),(0,p._)({backgroundColor:tp.nodeBackgroundColor,borderRadius:tp.borderRadius},th.statusColor,_.TV.foregroundDimmer)]),createRow:(0,v._)(rF).concat([_.l0.justify.center]),icon:[ty,{marginRight:tp.iconTextGap}],fileInput:[_.l0.flex.row,_.l0.align.center],text:[tm,_.l0.flex.growAndShrink(1),{color:tp.statusColor}],emptyDirText:[tm,_.l0.display.flex,_.l0.justify.center,_.l0.flex.growAndShrink(1),{color:tp.statusColor}],contextMenuButton:[_.l0.reset.button,_.l0.height("100%"),_.l0.center,_.l0.cursor.pointer,M.gU.filled,ty,{display:tp.contextMenuButtonDisplay,borderRadius:"0 ".concat(tp.borderRadius," ").concat(tp.borderRadius," 0"),transitionDuration:"0ms",backgroundColor:"transparent"}],draftBufferContainer:[{display:tp.hasUnsavedChangesDisplay}]});function rk(e){var t,r=(t=e.path,tl((0,tR.Z)(function(){return(0,J.cn)(function(e){var r;return null!==(r=e(el).get(t))&&void 0!==r?r:null})},[t]))),n=tl(eP);return(null==r?void 0:r.length)?(0,y.tZ)(N.Z,{size:n,activeUsers:r}):null}function rG(e){var t,r=(t=e.path,tl((0,tR.Z)(function(){return(0,J.cn)(function(e){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=e(el)[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var l=(0,x._)(a.value,2),c=l[0],s=l[1];if(!(0,ee.yr)(t,c))return;r.push.apply(r,(0,v._)(s))}}catch(e){i=!0,o=e}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}return r.length?r:null})},[t])));return(null==r?void 0:r.length)?(0,y.tZ)(N.Z,{activeUsers:r}):null}function rH(e){return(0,y.tZ)(E.G,{title:"menu",tag:"button",css:rL.contextMenuButton,onClick:e.onClick,children:(0,y.tZ)(P.Z,{})})}function rU(e,t){var r=tc((0,tR.Z)(function(){return(0,Y.kv)(e2,function(e){return e.has(t)})},[t]));(0,g.j)(e,r,function(e){return(0,p._)({},th.nodeBackgroundColor,e?_.TV.backgroundHigher:"transparent")}),(0,b.useEffect)(function(){var t=function(t){e.current&&e.current.setAttribute("aria-selected",t?"true":"false")};return t(r.current),r.subscribe(t)},[e,r,t])}var rz=(0,b.memo)(function(e){var t,r,n,i,o,a,u,l,c,s,f,d=(0,b.useRef)(null),h=tL(e.index),v=tl((t=e.path,(0,tR.Z)(function(){return(0,Y.kv)(eG,function(e){var r;return!!(null===(r=e.get(t))||void 0===r?void 0:r.expanded)})},[t]))),g=tl((r=e.path,(0,tR.Z)(function(){return(0,Y.kv)(eG,function(e){var t;return!!(null===(t=e.get(r))||void 0===t?void 0:t.loading)})},[r]))),D=(i=(n=(0,x._)((0,b.useState)(g),2))[0],o=n[1],(0,b.useEffect)(function(){if(!g){o(!1);return}var e=setTimeout(function(){return o(!0)},500);return function(){clearTimeout(e)}},[g]),i),I=ts(em),N=tl(eh),M=tF(e.path),Z=(a=e.path,u=ts(tZ),(0,tR.Z)(function(){return function(e){u({event:e,path:a})}},[u,a])),P=(0,x._)(tk({path:e.path,index:e.index}),2),F=P[0],L=P[1],k=e.path===N&&g,G=k?er:(0,O.UO)(e.path),H=rC({path:e.path,type:R.Tv.Directory}),U=H.dragRef,z=H.sizeRef,B=H.isDragging;rU(d,e.path);var j=(l=e.path,tl((0,tR.Z)(function(){return(0,Y.kv)(ep,function(e){return e?function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var l=(0,x._)(a.value,2),c=l[0],s=l[1],f=s.index,d=s.worktree;(0,ee.yr)(t,c)&&r.push({path:c,index:f,worktree:d})}}catch(e){i=!0,o=e}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}if(0===r.length)return null;var h=r.every(function(e){return e.index===tQ.hF.ADDED||e.worktree===tQ.hF.UNTRACKED})?tQ.hF.ADDED:tQ.hF.MODIFIED;if(!t4(h))return null;var p=r.length;return{color:t2[h],backgroundColor:t1[h],count:p}}(e,l):null},tI())},[l]))),W=tl(eR);return(0,y.BX)(E.G,{style:(0,w._)((0,T._)({},null==h?void 0:h.style),(f={},(0,p._)(f,th.statusColor,null!==(c=null==j?void 0:j.color)&&void 0!==c?c:_.TV.foregroundDimmer),(0,p._)(f,th.statusBackgroundColor,null==j?void 0:j.backgroundColor),(0,p._)(f,"opacity",B?.1:void 0),f)),tabIndex:M,role:"treeitem","aria-label":G,"aria-expanded":v,"aria-level":(null!==(s=null==h?void 0:h.depth)&&void 0!==s?s:0)+1,css:rL.row,onFocus:function(){return L(e.path)},innerRef:(0,m.l)(d,F,z,e.pending?void 0:U),onContextMenu:W?function(t){W(t,{path:e.path,type:R.Tv.Directory})}:void 0,onKeyDown:e.pending?void 0:function(t){"Enter"===t.key&&I(e.path)},onClick:e.pending?void 0:function(e){e.currentTarget===e.target&&Z(e)},children:[(0,y.BX)(E.G,{title:e.path,css:rL.rowContent,onClick:e.pending?void 0:Z,children:[(0,y.tZ)(E.G,{css:rL.icon,children:k||D&&!v?(0,y.tZ)(S.Z,{}):(0,y.tZ)(y.HY,{children:v?(0,y.tZ)(A.Z,{color:_.TV.foregroundDimmer}):(0,y.tZ)(C.Z,{color:_.TV.foregroundDimmer})})}),(0,y.tZ)(E.G,{css:rL.text,children:G}),e.uploadProgress?(0,y.tZ)(t$,{uploadProgress:e.uploadProgress}):null,j?(0,y.tZ)(t6,{count:j.count}):null,v?null:(0,y.tZ)(rG,{path:e.path}),null]}),W?(0,y.tZ)(rH,{onClick:function(t){W(t,{path:e.path,type:R.Tv.Directory})}}):null]})}),rB=(0,b.memo)(function(e){var t,r,n,i,o,a,u,l,c=(0,b.useRef)(null),s=tL(e.index),f=(t=e.path,r=tf(eb),n=ts(e7),i=ts(ef),(0,tR.Z)(function(){return{onClick:function(e){var o=r(),a=o.onFileSelect,u=o.multiselectModifierKey,l=u?tM(e,u):void 0;n({node:{path:t,type:R.Tv.File},mode:l}),i(t),l||null==a||a({path:t,event:e,type:"click"})},onDoubleClick:function(e){var n=r().onFileDoubleClick;null==n||n(e,t)}}},[t,r,i,n])),d=f.onClick,h=f.onDoubleClick,v=tF(e.path),g=ts(em),D=(0,x._)(tk({path:e.path,index:e.index}),2),N=D[0],C=D[1],A=(0,O.UO)(e.path),S=rC({path:e.path,type:R.Tv.File}),M=S.dragRef,Z=S.sizeRef,P=S.isDragging;rU(c,e.path);var F=(o=e.path,tl((0,tR.Z)(function(){return(0,Y.kv)(ep,function(e){return e?function(e,t){var r=null==e?void 0:e.get(t);if(!r)return null;var n=null;return r.worktree!==tQ.hF.UNMODIFIED?n=r.worktree:r.index!==tQ.hF.UNMODIFIED&&(n=r.index),n&&t4(n)?{color:t2[n],text:t0[n]}:null}(e,o):null},tI())},[o]))),L=tl(eR);return(0,y.BX)(E.G,{style:(0,w._)((0,T._)({},null==s?void 0:s.style),(l={},(0,p._)(l,th.statusColor,null!==(a=null==F?void 0:F.color)&&void 0!==a?a:_.TV.foregroundDimmer),(0,p._)(l,"opacity",P?.1:void 0),l)),tabIndex:v,dataCy:"filetree-file",css:rL.row,onFocus:function(){return C(e.path)},innerRef:(0,m.l)(c,N,Z,e.pending?void 0:M),role:"treeitem","aria-label":A,"aria-level":(null!==(u=null==s?void 0:s.depth)&&void 0!==u?u:0)+1,onDoubleClick:e.pending?void 0:h,onContextMenu:L?function(t){L(t,{path:e.path,type:R.Tv.File})}:void 0,onKeyDown:e.pending?void 0:function(t){"Enter"===t.key&&g(e.path)},onClick:e.pending?void 0:function(e){e.currentTarget===e.target&&d(e)},children:[(0,y.BX)(E.G,{title:e.path,css:rL.rowContent,onClick:e.pending?void 0:d,children:[(0,y.tZ)(E.G,{css:rL.icon,children:(0,y.tZ)(I.Z,{path:e.path})}),(0,y.tZ)(E.G,{css:rL.text,children:A}),F?(0,y.tZ)(t7,{text:F.text}):null,(0,y.tZ)(rk,{path:e.path}),null]}),L?(0,y.tZ)(rH,{onClick:function(t){L(t,{path:e.path,type:R.Tv.File})}}):null]})}),rj=(0,b.memo)(function(e){var t=tL(e.index);return(0,y.tZ)(E.G,{css:rL.divider,style:null==t?void 0:t.style,role:"treeitem",children:(0,y.tZ)(E.G,{css:rL.dividerInner,children:(0,y.tZ)(E.G,{css:rL.dividerText,children:e.label})})})}),rW=(0,b.memo)(function(e){var t=tL(e.index);return(0,y.BX)(E.G,{css:rL.error,style:null==t?void 0:t.style,role:"treeitem",children:[(0,y.tZ)(F.Z,{}),(0,y.tZ)(Z.xv,{multiline:!1,children:e.message})]})}),rV=(0,b.memo)(function(e){var t=tL(e.index);return(0,y.tZ)(E.G,{css:rL.emptyDir,style:null==t?void 0:t.style,role:"treeitem",children:(0,y.tZ)(E.G,{css:rL.emptyDirText,children:et})})}),rY=(0,b.memo)(function(e){var t=tL(e.index);return(0,y.tZ)(E.G,{css:rL.createRow,style:null==t?void 0:t.style,role:"treeitem",children:(0,y.tZ)(tV,{dir:e.dir})})}),rK=(0,b.memo)(function(e){var t=tL(e.index),r=(0,O.UO)(e.path);return(0,y.tZ)(E.G,{style:null==t?void 0:t.style,css:rL.createRow,role:"treeitem","aria-label":r,children:(0,y.tZ)(tq,{path:e.path,fileType:e.fileType})})}),rX=(0,b.memo)(function(e){var t=tL(e.index),r=(0,O.UO)(e.path);return(0,y.BX)(E.G,{style:null==t?void 0:t.style,css:rL.uploadRow,role:"treeitem","aria-label":r,children:[(0,y.tZ)(E.G,{css:rL.icon,children:(0,y.tZ)(I.Z,{path:e.path})}),(0,y.tZ)(E.G,{css:rL.text,children:r}),(0,y.tZ)(tX,{progress:e.progress})]})}),rJ=(0,b.memo)(function(e){var t,r=tl((t=e.index,(0,tR.Z)(function(){return(0,J.cn)(function(e){var r,n;return null!==(n=null===(r=e(ed).get(t))||void 0===r?void 0:r.row)&&void 0!==n?n:null})},[t])));return r?"error"===r.type?(0,y.tZ)(rW,{index:e.index,message:r.message}):"divider"===r.type?(0,y.tZ)(rj,{index:e.index,label:r.label}):"emptyDir"===r.type?(0,y.tZ)(rV,{index:e.index}):"create"===r.type?(0,y.tZ)(rY,{index:e.index,dir:r.dir}):"uploadFile"===r.type?(0,y.tZ)(rX,{index:e.index,path:r.path,progress:r.progress}):r.rename?(0,y.tZ)(rK,{index:e.index,path:r.path,fileType:"file"===r.type?R.Tv.File:R.Tv.Directory}):"file"===r.type?(0,y.tZ)(rB,{index:e.index,path:r.path,pending:!!r.pending}):(0,y.tZ)(rz,{index:e.index,path:r.path,pending:!!r.pending,uploadProgress:r.uploadProgress}):null}),r$=[tp.horizontalPadding,tp.rowLeftIndent,tp.iconSize,tp.iconTextGap].join(" + "),rq=(0,D.X)({root:[_.l0.overflow("hidden"),_.l0.height(0),{pointerEvents:"none"}],file:[{paddingLeft:"calc(".concat(r$,")"),paddingRight:tp.horizontalPadding}]}),rQ=(0,b.memo)(function(){var e=tl(eq);return e?(0,y.tZ)(E.G,{css:rq.root,children:e.map(function(e){var t=e.type,r=e.text,n=e.depth,i=(0,p._)({},th.rowLeftIndent,"calc(".concat(n," * ").concat(tp.gutterWidth,")")),o=t+n;return"divider"===t?(0,y.tZ)(E.G,{style:i,css:rL.dividerInner,children:(0,y.tZ)(Z.xv,{css:rL.dividerInner,multiline:!1,children:r.toUpperCase()})},o):(0,y.tZ)(E.G,{css:rq.file,style:i,children:"create"===t?(0,y.tZ)(tY,{create:function(){}}):(0,y.tZ)(E.G,{css:rL.text,children:r.toUpperCase()})},o)})}):null}),r0=(0,J.cn)(null),r1=(0,J.cn)(null,function(e,t,r){var n=[r];if(!e(e3)){var i=!0,o=!1,a=void 0;try{for(var u,l=e(e2)[Symbol.iterator]();!(i=(u=l.next()).done);i=!0){var c=(0,x._)(u.value,2),s=c[0],f=c[1];r.path!==s&&n.push({path:s,type:f})}}catch(e){o=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}}t(r0,(0,O.RQ)(n))});function r2(){return(r2=(0,K._)(function(e,t){return(0,X.Jh)(this,function(r){switch(r.label){case 0:return[4,Promise.all(t.map(function(t){return t.type===R.Tv.Directory?e.deleteDir(t.path):e.deleteFile(t.path)}))];case 1:return[2,{error:r.sent().filter(function(e){return e.error}).length?"Something went wrong deleting files":null}]}})})).apply(this,arguments)}var r4=r(82973),r5=r(86763),r3=r.n(r5),r7=t9.Dy.Enum(R.Tv),r6=t9.Dy.Object({filename:t9.Dy.String({minLength:1}),type:r7}),r9=t9.Dy.Object({scrollOffset:t9.Dy.Number({minimum:0}),dirInfo:t9.Dy.Record(t9.Dy.String(),t9.Dy.Object({expanded:t9.Dy.Boolean(),children:t9.Dy.Array(r6)}))});function r8(e){return"repl:workspace:filetree:"+e}var ne=t9.Dy.Array(t9.Dy.String()),nt="repl:workspace:filetree:savedKeys",nr=(0,Y.kv)(eb,function(e){return e.localCacheKey?r8(e.localCacheKey):null}),nn=(0,J.cn)(null,function(e){var t=e(eb),r=t.localCacheKey,n=t.filter;if(r){var i=null!==(f=null===(s=e(te))||void 0===s?void 0:s.scrollOffset)&&void 0!==f?f:0,o=e(eG),a=!1,u=!0,l=!1,c=void 0;try{for(var s,f,d,h=o[Symbol.iterator]();!(u=(d=h.next()).done);u=!0){var p=(0,x._)(d.value,2)[1].children;if(a=!!(null==p?void 0:p.length))break}}catch(e){l=!0,c=e}finally{try{u||null==h.return||h.return()}finally{if(l)throw c}}if(a){var v=function(e,t){var r={dirInfo:Object.create(null),scrollOffset:e.scrollOffset},n=!0,i=!1,o=void 0;try{for(var a,u=e.dirInfo[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var l=(0,x._)(a.value,2),c=l[0],s=l[1],f=s.expanded,d=s.children;if(d){var h=d.filter(t);h.length&&(r.dirInfo[c]={expanded:f,children:h})}}}catch(e){i=!0,o=e}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}return r}({dirInfo:o,scrollOffset:i},n),y=r8(r),m=(R=r4.Z.get(nt),t8.B4.Check(ne,R)?R:null);if(m){var g=m.filter(function(e){return e!==y});g.unshift(y);var E=g.splice(20),D=!0,_=!1,b=void 0;try{for(var R,T,w=E[Symbol.iterator]();!(D=(T=w.next()).done);D=!0){var I=T.value;r4.Z.remove(I)}}catch(e){_=!0,b=e}finally{try{D||null==w.return||w.return()}finally{if(_)throw b}}r4.Z.set(nt,g)}else r4.Z.set(nt,[y]);return r4.Z.set(r8(r),v)}}}),ni=(0,D.X)({content:[_.l0.px(2),_.l0.position.relative,{overflowY:"auto",height:"100%",minHeight:tp.minHeight}],scroll:[{position:"relative",height:tp.scrollHeight}],root:[_.l0.rowWithGap(0),_.l0.align.center],gutter:[_.l0.position.absolute,_.l0.top(0),_.l0.left(0),_.l0.reset.button,_.l0.align.end,_.l0.cursor.pointer,{width:tp.gutterWidth,"& > div":[_.l0.height("100%"),_.l0.width(1),{marginRight:"25%",opacity:.2,backgroundColor:_.TV.foregroundDimmest}],"&:hover > div":{backgroundColor:_.TV.accentPrimaryDefault,opacity:1}}]}),no=(0,b.memo)(function(e){var t,r,n,i,o,a,u,l,c,s,f,d,h,D,_,T,w,I,N,C,A,S,M,Z=tl(ed),P=tP();(0,g.j)(e.scrollRef,P.fontSize,function(e){var t;return t={},(0,p._)(t,th.fontSize,e+"px"),(0,p._)(t,th.dirStatusIconSize,e+"px"),t}),(0,g.j)(e.scrollRef,P.fontSizeSmall,function(e){return(0,p._)({},th.fontSizeSmall,e+"px")}),(0,g.j)(e.scrollRef,P.iconSize,function(e){return(0,p._)({},th.iconSize,e+"px")}),(0,g.j)(e.scrollRef,P.iconTextGap,function(e){return(0,p._)({},th.iconTextGap,e+"px")}),(0,g.j)(e.scrollRef,P.horizontalPadding,function(e){return(0,p._)({},th.horizontalPadding,e+"px")}),(0,g.j)(e.scrollRef,P.borderRadius,function(e){return(0,p._)({},th.borderRadius,e+"px")}),(0,g.j)(e.scrollRef,P.scrollHeight,function(e){return(0,p._)({},th.scrollHeight,e+"px")}),(0,g.j)(e.scrollRef,P.gutterWidth,function(e){return(0,p._)({},th.gutterWidth,e+"px")}),(0,g.j)(e.scrollRef,P.minHeight,function(e){return(0,p._)({},th.minHeight,e+"px")});var F=ts(eW),L=(t=ts(rx),r=ts(r_),n=(0,b.useRef)(null),i=(0,b.useRef)(null),o=(0,b.useRef)(null),a=(0,rt.Z)().showError,u=tf(rD),l=ts(rE),c=ts(rm),s=ts(rZ),f=(0,b.useRef)(null),d=tf(eG),h=tf(eh),D=ts(ec),_=ts(eJ),T=tl(eT),I=(w=(0,x._)((0,rf.L)(function(){return{accept:[R.Tv.File,R.Tv.Directory,rp.FILE],canDrop:function(){return!0},hover:function(e,r){var a=o.current;if(a){i.current&&function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{scrollZoneSize:{w:50,h:50},scrollVelocity:{x:50,y:50},scrollUpdateThrottle:100},n=r.scrollZoneSize,i=r.scrollVelocity,o=r.scrollUpdateThrottle,a=ra()(function(){var r=t.getClientOffset();if(!r)return[0,0];var o=r.x,a=r.y,u=e.getBoundingClientRect(),l=u.x,c=u.y,s=u.width,f=u.height,d=Math.min(s/2,n.w),h=Math.min(f/2,n.h),p=function(e,t){var r=(0,x._)(t,2),n=r[0],i=r[1];return ri()(e,n[0],n[1])?(e-n[1])/(n[1]-n[0]):ri()(e,i[0],i[1])?(e-i[0])/(i[1]-i[0]):0};return[p(o,[[l,l+d],[l+s-d,l+s]])*i.x,p(a,[[c,c+h],[c+f-h,c+f]])*i.y]},o,{trailing:!1})();if(a){var u=(0,x._)(a,2),l=u[0],c=u[1];if(0!==l||0!==c){var s=e.scrollLeft,f=e.scrollTop,d=e.scrollWidth,h=e.scrollHeight,p=e.clientWidth,v=e.clientHeight;requestAnimationFrame(function(){e.scrollTop=ru(0,d-p,s+l),e.scrollTop=ru(0,h-v,f+c)})}}}(i.current,r);var l=r.getClientOffset();if(l){var c=t({x:l.x-a.x,y:l.y-a.y+u()});c?"file"===c.row.type||"uploadFile"===c.row.type?n.current=(0,O.Il)(c.row.path)||$.Ql:"dir"===c.row.type?n.current=c.row.path:n.current=c.row.dir:n.current=h();var p="nodes"!==e.type||(0,O.RQ)(e.nodes).every(function(e){var t;return ry(e,null!==(t=n.current)&&void 0!==t?t:h())});if(s(p),(null==c?void 0:c.row.type)!=="dir"){f.current&&(clearTimeout(f.current.timer),f.current=null);return}var v=c.row.path;if(f.current){if(f.current.dir===v)return;clearTimeout(f.current.timer),f.current=null}if(p){var y=setTimeout(function(){var e;null!==(e=d().get(v))&&void 0!==e&&e.expanded||_(v)},400);f.current={dir:v,timer:y}}}}},drop:function(e,t){var r,i=null!==(r=n.current)&&void 0!==r?r:h();if("nodes"===e.type){c({to:i,nodes:e.nodes}),n.current=null;return}e.dirContent.then(function(e){var t=e.reduce(function(e,t){return t.size+e},0);if(e.length>1e6){a("Trying to upload too many files at once. Please try again with fewer files.");return}if(t>104857600){a("Total file upload size exceeds maximum limit. Please try again with smaller files.");return}l({parentPath:i===$.Ql?void 0:i,files:e.filter(Boolean),onError:a})}),n.current=null},collect:function(e){return{isOver:e.isOver()}}}},[]),2))[0].isOver,N=w[1],C=ts(rM),(0,b.useEffect)(function(){if(C(I),I){var e,t=null===(e=i.current)||void 0===e?void 0:e.getBoundingClientRect();o.current=t?{x:t.x,y:t.y}:null,t&&D({width:t.width,height:t.height});return}f.current&&(clearTimeout(f.current.timer),f.current=null),n.current=null,r(null)},[C,I,r,D]),A=ts(rD),(0,b.useEffect)(function(){var e=i.current;if(e){var t=ra()(function(){A(e.scrollTop)},200);return e.addEventListener("scroll",t),function(){t.cancel(),e.removeEventListener("scroll",t)}}},[A]),{dropRef:T?void 0:N,containerRef:i}),k=L.dropRef,G=L.containerRef,H=ts(e6),U=tl(eR),z=tl(eh);return S=ts(tt),M=tc(e5),(0,b.useEffect)(function(){var e=function(){M.current&&S(M.current)};return e(),M.subscribe(e)},[M,S]),(0,y.BX)(E.G,{css:ni.content,innerRef:(0,m.l)(e.scrollRef,k,G),onKeyDown:F,onContextMenu:U?function(e){e.target===e.currentTarget&&U(e,{type:R.Tv.Directory,path:z})}:void 0,onClick:function(e){e.target===e.currentTarget&&H()},children:[(0,y.tZ)(rQ,{}),(0,y.BX)(E.G,{css:ni.scroll,role:"tree",children:[(0,v._)(Z.values()).map(function(e){var t=e.key,r=e.index;return(0,y.tZ)(rJ,{index:r},t)}),(0,y.tZ)(nu,{}),(0,y.tZ)(rw,{}),(0,y.tZ)(rP,{})]})]})}),na=(0,b.memo)(function(){var e,t,r,n,i,o,a,u,l,c,s,f,d,h,p,m,g,E,D,_,R=(t=(0,b.useRef)(null),r=tl(eB),n=tf(eB),i=tf(ew),o=(0,tR.Z)(function(){return function(e){var t=n()[e];return t?ex(i(),t.type):0}},[n,i]),a=tf(eb),u=tc(ej),l=(0,b.useRef)(tl(ev)),c=(0,t_.MG)({count:r.length,overscan:null!==(e=a().overscan)&&void 0!==e?e:100,getScrollElement:function(){return t.current},getItemKey:function(e){var t=r[e];return t?"error"===t.type?"error:"+t.dir+t.message:"divider"===t.type?"divider:"+t.dir+t.label:"emptyDir"===t.type?"emptyDir:"+t.dir:"create"===t.type?"create:"+t.dir:t.type+":"+t.path:""},estimateSize:o,rangeExtractor:function(e){var t=(0,tb.MK)(e);return null===u.current||t.includes(u.current)||void 0===r[u.current]?t:(0,v._)(t).concat([u.current])}}),(0,b.useEffect)(function(){l.current&&c.scrollToOffset(l.current)},[c,l]),s=ts(e_),f=c.getVirtualItems(),d=c.getTotalSize(),(0,b.useEffect)(function(){s({rows:f,scrollHeight:d})},[s,f,d]),h=tl(eD),(0,b.useEffect)(function(){if(h){var e=function(e){null!==e&&c.getVirtualItems()[e]&&c.scrollToIndex(e,{align:"auto",behavior:"auto"})};return setTimeout(function(){return e(u.current)}),u.subscribe(e)}},[c,u,h]),p=ts(te),(0,b.useEffect)(function(){p(c)},[p,c]),{scrollRef:t,virtualizer:c}).scrollRef;return m=tc(r0),g=tf(eb),(0,b.useEffect)(function(){return m.subscribe(function(e){if(e){var t=g().onDeleteNodes;t&&t({nodes:e,confirm:function(){return function(e,t){return r2.apply(this,arguments)}(g().fs,e)}})}})},[g,m]),E=tl(nr),D=tc(eG),_=ts(nn),(0,b.useEffect)(function(){if(E){var e,t,r=null,n=null!==(e=window.requestIdleCallback)&&void 0!==e?e:window.requestAnimationFrame,i=null!==(t=window.cancelIdleCallback)&&void 0!==t?t:window.cancelAnimationFrame,o=r3()(function(){r&&i(r),r=n(_)},1e3),a=D.subscribe(o);return document.addEventListener("visibilitychange",_),document.addEventListener("beforeunload",_),function(){o.cancel(),r&&i(r),document.removeEventListener("visibilitychange",_),document.removeEventListener("beforeunload",_),a(),_()}}},[E,D,_]),(0,y.tZ)(no,{scrollRef:R})}),nu=(0,b.memo)(function(){var e=tl(eE),t=ts(eK);return(0,y.tZ)(y.HY,{children:e.map(function(e){return(0,y.tZ)(E.G,{tag:"button",onClick:function(){return t(e.dir)},css:ni.gutter,style:{height:e.height,transform:"translate(calc(".concat(e.depth," * ").concat(tp.gutterWidth,"), ").concat(e.y,"px)")},children:(0,y.tZ)(E.G,{})},"gutter"+e.dir+e.depth+e.y)})})});function nl(e){var t,r,n;return t=(0,rt.Z)().showError,r=(0,x._)((0,b.useState)(function(){var r,n,i,o,a=(0,J.MT)();a.set(eb,e);var u=null!==(r=e.root)&&void 0!==r?r:$.Ql,l=e.localCacheKey?(i=e.localCacheKey,o=r4.Z.get(r8(i)),t8.B4.Check(r9,o)?{dirInfo:new Map(Object.entries(o.dirInfo)),scrollOffset:o.scrollOffset}:null):null;l&&a.set(ev,l.scrollOffset);var c=null!==(n=null==l?void 0:l.dirInfo)&&void 0!==n?n:new Map;return c.has(u)||c.set(u,{expanded:!0}),a.set(eG,c),e.focusedPath&&a.set(ef,e.focusedPath),{store:a,create:function(e,t){if(t){a.set(eQ,{parentPath:t,fileType:e});return}var r=u,n=a.get(e4);(null==n?void 0:n.type)===R.Tv.File?r=(0,O.Il)(n.path)||$.Ql:(null==n?void 0:n.type)===R.Tv.Directory&&(r=n.path),a.set(eQ,{parentPath:r,fileType:e})},setPresenceState:function(e){a.set(el,e)},setFileStatus:function(e){a.set(ep,e)},rename:function(e){a.set(em,e)},move:function(e){a.set(rm,e)},upload:function(e){a.set(rE,(0,w._)((0,T._)({},e),{onError:t}))},onLoad:function(t){var r=e.fs.watchDir(u,{onChange:function(){t({error:null}),r()},onError:function(e){t({error:e}),r()}});return r},select:function(e){return null===e?a.set(e6):a.set(e8,e)},scrollToPath:function(e){return a.set(tt,e)},hasLocalCache:!!l,getChildren:function(e){var t,r;return null!==(r=null===(t=a.get(eG).get(e))||void 0===t?void 0:t.children)&&void 0!==r?r:null},getSelectedNode:function(){return a.get(e4)},getSelectedNodes:function(){return a.get(e2)},deleteNodes:function(e){a.set(r1,e)},collapse:function(e){return a.set(eK,e)},getExpandedDirs:function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$.Ql,r=new Set,n=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var l=(0,x._)(a.value,2),c=l[0],s=l[1];c!==t&&s.expanded&&(t===$.Ql||(0,ee.yr)(t,c))&&r.add(c)}}catch(e){i=!0,o=e}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}return 0===r.size?null:r}(a.get(eG),e)}}}),1)[0],(0,b.useEffect)(function(){r.store.set(eb,e)},[r.store,e]),(0,b.useEffect)(function(){var e=!0,t=!1,n=void 0;try{for(var i,o=r.store.get(eG)[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a=(0,x._)(i.value,2),u=a[0];a[1].expanded&&r.store.set(eJ,u)}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}return function(){var e=!0,t=!1,n=void 0;try{for(var i,o=r.store.get(eG)[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var a,u=(0,x._)(i.value,2),l=(u[0],u[1]);null===(a=l.disposeWatcher)||void 0===a||a.call(l)}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}}},[r.store]),n=(0,W.Z)(e.onLoad),(0,b.useEffect)(function(){return r.onLoad(function(e){var t;return null===(t=n.current)||void 0===t?void 0:t.call(n,e)})},[r,n]),r}function nc(e){return(0,y.tZ)(ta,{store:e.store,children:(0,y.tZ)(na,{})})}},73220:function(e,t,r){r.d(t,{Z:function(){return f}});var n=r(41733),i=r(3796),o=r(38935),a=r(46954),u=r(83059),l=r(97242),c=r(84296),s=r(75271).memo(o.ZP);function f(e){var t=e.source,r=e.sourcePos,o=e.fs,f=e.path,d=e.onCodeInsert,h=(0,l.l)(o,f),p=(0,a.Z)(t,100),v=(0,u.Z)(function(){return{img:h,a:function(e){return(0,i.tZ)(c.Z,(0,n._)({filePath:f},e))}}},[h,f]);return(0,i.tZ)(s,{onCodeInsert:d,components:v,sourcePos:r,children:p})}},57025:function(e,t,r){r.d(t,{A:function(){return h},Z:function(){return d}});var n=r(66626),i=r(3796),o=r(9602),a=r(24766),u=r(47874),l=r(10578),c=r(63163),s=r(75271),f=r(35370);function d(e){var t=e.fs,r=e.filePath,d=(0,n._)((0,s.useState)(null),2),p=d[0],v=d[1],y=(0,n._)((0,s.useState)(!0),2),m=y[0],g=y[1];return((0,s.useEffect)(function(){var e=t.watchFile(r,{onChange:function(e){v(e.toString("base64")),g(!1)},onError:function(){v(null),g(!1)},onMoveOrDelete:function(){v(null),g(!1)}});return function(){e(),g(!0),v(null)}},[t,r]),m)?(0,i.tZ)(l.Z,{}):p?(0,i.BX)(i.HY,{children:[(0,i.tZ)(h,{content:p,mime:(0,f.yC)(r)}),(0,i.tZ)(o.hU,{alt:"Download",css:[c.l0.position.absolute,c.l0.bottom(8),c.l0.right(8),c.l0.p(16)],children:(0,i.tZ)("a",{href:"data:text/plain;base64,".concat(p),download:(0,f.UO)(r),css:[c.l0.color.foregroundDimmer],children:(0,i.tZ)(u.Z,{})})})]}):(0,i.tZ)(a.xv,{multiline:!1,children:"Failed to load media file"})}var h=function(e){var t=e.content,r=e.mime,n=void 0===r?"":r;if(n.startsWith("video/"))return(0,i.tZ)("video",{src:"data:".concat(n,";base64,").concat(t),css:{maxHeight:"100%",maxWidth:"100%"},controls:!0});if(n.startsWith("image/"))return(0,i.tZ)("img",{alt:"Preview",src:"data:".concat(n,";base64,").concat(t),css:{width:"80%",height:"80%",objectFit:"contain",imageRendering:"pixelated"}});if(n.startsWith("audio/")){var o=n;return"audio/wave"===o&&(o="audio/wav"),(0,i.tZ)("audio",{src:"data:".concat(o,";base64,").concat(t),css:{maxHeight:"100%",maxWidth:"100%"},controls:!0})}return"application/pdf"===n?(0,i.tZ)("object",{data:"data:".concat(n,";base64,").concat(t),type:"application/pdf",css:{width:"100%",height:"100%",flex:1},children:(0,i.tZ)("embed",{src:"data:".concat(n,";base64,").concat(t),type:"application/pdf",css:{width:"100%",height:"100%"}})}):(0,i.tZ)(a.xv,{multiline:!1,children:"File type not supported."})}},86908:function(e,t,r){r.d(t,{T:function(){return m}});var n=r(16155),i=r(40523),o=r(23882),a=r(42306),u=r(75271),l=r(32581),c=r(42364),s=r(41733),f=r(21262),d=r(71440),h=r(9122);function p(){var e=(0,f._)(["\n  query ShouldHideFileInWorkspace($replId: String!) {\n    repl(id: $replId) {\n      ... on Repl {\n        id\n        isProjectFork\n        isModelSolution\n        isModelSolutionFork\n      }\n    }\n  }\n"]);return p=function(){return e},e}var v={},y=(0,d.Ps)(p()),m=function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=(0,n.Z)(),f=(0,o.Z)().dotReplit,d=(e=(0,s._)({},v,{variables:{replId:r}}),h.a(y,e)),p=d.data,m=d.loading,g=(null==p?void 0:p.repl.__typename)==="Repl"&&(p.repl.isProjectFork||p.repl.isModelSolution||p.repl.isModelSolutionFork),E=(0,i.P)(f),D=(0,a.t9)();return(0,u.useCallback)(function(e){return!!((g||m)&&(0,c.TI)(e)||(0,c.Xl)(e))||!!t&&!D&&((0,c.uC)(e)||(0,l.Ci)(e)||(0,l.cJ)(e)||(0,c.lv)(e,E))},[g,m,D,E,t])}},9583:function(e,t,r){r.d(t,{W:function(){return d}});var n=r(27387),i=r(96583),o=r(66626),a=r(32581),u=r(35370),l=r(72106),c=r(73878);function s(){return(s=(0,n._)(function(e){var t,r,s,f,d,h,p,v,y;function m(){return(m=(0,n._)(function(){var e;return(0,i.Jh)(this,function(r){switch(r.label){case 0:if("function"==typeof t)return[2,t()];return[4,t.getConfig()];case 1:return[2,null===(e=r.sent().config)||void 0===e?void 0:e.entrypoint]}})})).apply(this,arguments)}function g(){return(g=(0,n._)(function(){var e,t;return(0,i.Jh)(this,function(n){switch(n.label){case 0:if(!(e=d))return[2,null];if(!(0,u.Il)(e))return[2,v.includes(e)?e:null];return[4,r.stat(e)];case 1:return[2,(t=n.sent()).exists&&t.type===c.Tv.File?e:null]}})})).apply(this,arguments)}return(0,i.Jh)(this,function(n){switch(n.label){case 0:return t=e.dotReplit,[4,Promise.all([(r=e.fs).readDir(l.Ql),function(){return m.apply(this,arguments)}()])];case 1:if(f=(s=o._.apply(void 0,[n.sent(),2]))[0],d=s[1],!f||f.error)throw Error("Could not read files");return p=(h=f.children).find(function(e){return e.type===c.Tv.File&&e.filename.toLowerCase().endsWith("readme.md")}),v=h.filter(function(e){return e.type===c.Tv.File}).map(function(e){return e.filename}),[4,function(){return g.apply(this,arguments)}()];case 2:var i,E;if(y=n.sent())return[2,{entrypoint:y,readmeFile:null==p?void 0:p.filename}];return[2,{entrypoint:(E=(i=v).find(function(e){return e.toLowerCase().endsWith("readme.md")}))?E:i.includes("Makefile")?"Makefile":i.find(u.gK)||i.find(function(e){return![".replit","replit.nix"].includes(e)&&!(0,a.Ci)(e)&&!(0,a.cJ)(e)}),readmeFile:null==p?void 0:p.filename}]}})})).apply(this,arguments)}var f=r(38242);function d(e){return h.apply(this,arguments)}function h(){return(h=(0,n._)(function(e){return(0,i.Jh)(this,function(t){if(!f.l)throw Error("Expected apollo client");return[2,function(e){return s.apply(this,arguments)}(e)]})})).apply(this,arguments)}},93503:function(e,t,r){function n(e){var t=document.createElement("canvas"),r=t.getContext("2d");if(t.width=e.width,t.height=e.height,!r)throw Error("failed to get canvas ctx");return{version:"1",width:e.width,height:e.height,palette:[[0,0,0,255],[255,255,255,255],[255,255,128,255],[255,128,255,255],[0,128,128,255],[128,0,255,255],[255,0,128,255],[0,255,255,255]],anims:{},frames:e.frames.map(function(n){var i=new window.ImageData(new Uint8ClampedArray(n.pixels),e.width,e.height);return r.putImageData(i,0,0),t.toDataURL()})}}function i(e){return new Promise(function(t,r){var n=new window.Image;n.src=e,n.onload=function(){t(n)},n.onerror=r})}function o(e){return new Promise(function(t,r){Promise.all(e.frames.map(i)).then(function(n){var i=document.createElement("canvas");i.width=e.width,i.height=e.height;var o=i.getContext("2d");if(!o){r(Error("failed to get canvas ctx"));return}t({frames:n.map(function(t){return o.drawImage(t,0,0),{pixels:Array.from(o.getImageData(0,0,e.width,e.height).data),width:e.width,height:e.height}}),preview:e.frames[0],width:e.width,height:e.height})}).catch(r)})}r.d(t,{C:function(){return n},u:function(){return o}})},48487:function(e,t,r){r.d(t,{z:function(){return o}});var n=r(32581),i=r(72106);function o(e){var t=e.siblingNames,r=e.fileName,o=e.initialValue,a=e.parentPath;if(r.includes("/"))return"File names cannot include forward slashes";if("."===r||".."===r)return'File names cannot be "'.concat(r,'"');if(r.match(/^\s/)||r.match(/\s$/))return"File names cannot start or end with whitespace";if(o!==r&&t.includes(r))return"A file or folder with that name already exists";if(r.length>100)return"File names cannot be longer than 100 characters";var u=a===i.Ql?r:a+"/"+r;return(0,n.Ci)(u)?'"'.concat(u,'" is reserved'):null}},42471:function(e,t,r){r.d(t,{HO:function(){return g},yH:function(){return E},aq:function(){return x},dq:function(){return R},rG:function(){return T},Tt:function(){return D},yG:function(){return _},y5:function(){return b},hF:function(){return w},p3:function(){return ej},Ch:function(){return t$},CH:function(){return ev},Bi:function(){return tn},Qj:function(){return ep},bF:function(){return eh},qE:function(){return tr},JE:function(){return em},eo:function(){return ex},QD:function(){return eA},kZ:function(){return eO},ZR:function(){return eF},mB:function(){return q},y1:function(){return ek},P:function(){return ez},Kt:function(){return eK},Qg:function(){return e$},E:function(){return eQ},Mh:function(){return ta},xD:function(){return e3},rp:function(){return e6},Vk:function(){return e4},It:function(){return ts},xT:function(){return td},Tq:function(){return tp},jz:function(){return eV},qu:function(){return tm},TF:function(){return tE},nK:function(){return t_},Fj:function(){return tR},VH:function(){return tw},Ly:function(){return tG},nC:function(){return tU},l6:function(){return tB},Vj:function(){return tW},c1:function(){return eN},AU:function(){return tY},Ni:function(){return tX},JC:function(){return tF},wc:function(){return eZ},dC:function(){return ec},Pi:function(){return ey},Dc:function(){return es},GE:function(){return ef},LY:function(){return ed},C:function(){return en},Tg:function(){return ei}});var n,i,o,a,u,l,c,s,f,d,h,p,v,y,m,g,E,D,_,b,R,T,w,x,I,N,C=r(74044);(n=m||(m={})).HEAD="HEAD",n.REMOTE_HEAD="REMOTE_HEAD",n.BRANCH="BRANCH",n.REMOTE_BRANCH="REMOTE_BRANCH",n.TAG="TAG",C.Dy.Enum(m);var A=C.Dy.Object({type:C.Dy.Literal("BRANCH"),name:C.Dy.String()}),S=C.Dy.Object({type:C.Dy.Literal("HEAD"),name:C.Dy.Literal("HEAD"),detached:C.Dy.Boolean(),ref:C.Dy.Union([A,C.Dy.Null()])}),O=C.Dy.Object({type:C.Dy.Literal("REMOTE_HEAD"),name:C.Dy.Literal("HEAD"),remote:C.Dy.String()}),M=C.Dy.Object({type:C.Dy.Literal("REMOTE_BRANCH"),name:C.Dy.String(),remote:C.Dy.String(),branch:C.Dy.String()}),Z=C.Dy.Object({type:C.Dy.Literal("TAG"),name:C.Dy.String()}),P=C.Dy.Union([S,O,A,M,Z]),F=C.Dy.Object({name:C.Dy.String(),email:C.Dy.String(),date:C.Dy.Number()});(i=g||(g={})).LOCAL="LOCAL",i.REMOTE="REMOTE",i.TRACKED="TRACKED",C.Dy.Enum(g);var L=C.Dy.Object({hash:C.Dy.String(),author:F}),k=C.Dy.Object({type:C.Dy.Literal("LOCAL"),name:C.Dy.String(),push:C.Dy.Union([M,A,C.Dy.Null()]),commit:L,remote:C.Dy.Null(),tracking:C.Dy.Null()}),G=C.Dy.Object({type:C.Dy.Literal("REMOTE"),name:C.Dy.String(),remote:C.Dy.String(),commit:L,push:C.Dy.Null(),tracking:C.Dy.Null()}),H=C.Dy.Object({type:C.Dy.Literal("TRACKED"),name:C.Dy.String(),remote:C.Dy.String(),push:M,tracking:G,commit:L});C.Dy.Union([k,G,H]),C.Dy.Object({refs:C.Dy.Array(P),hash:C.Dy.String(),parents:C.Dy.Union([C.Dy.Null(),C.Dy.Array(C.Dy.String())]),grafted:C.Dy.Boolean(),author:F,committer:F,subject:C.Dy.String(),body:C.Dy.String()}),(o=E||(E={})).ADDED="ADDED",o.COPIED="COPIED",o.DELETED="DELETED",o.MODIFIED="MODIFIED",o.RENAMED="RENAMED",o.TYPE_CHANGED="TYPE_CHANGED",o.UNKNOWN="UNKNOWN",o.BROKEN="BROKEN";var U=C.Dy.Enum(E);C.Dy.Object({path:C.Dy.String(),type:U,originalPath:C.Dy.Optional(C.Dy.String())}),C.Dy.Object({name:C.Dy.String(),push:C.Dy.String(),fetch:C.Dy.String()}),(a=D||(D={})).FF_ONLY="FF_ONLY",a.MERGE="MERGE",a.REBASE="REBASE",C.Dy.Enum(D),(u=_||(_={})).NOT_INITIALIZED="NOT_INITIALIZED",u.ON_UNBORN_BRANCH="ON_UNBORN_BRANCH",u.MERGING="MERGING",u.REBASING="REBASING",u.REVERTING="REVERTING",u.CHERRY_PICKING="CHERRY_PICKING",u.APPLYING_MAILBOX="APPLYING_MAILBOX",u.BISECTING="BISECTING",u.DIRTY_WORKTREE="DIRTY_WORKTREE",u.DIRTY_INDEX="DIRTY_INDEX",u.CLEAN="CLEAN",u.DETACHED_HEAD="DETACHED_HEAD",C.Dy.Enum(_),(l=b||(b={})).INITIALIZING="INITIALIZING",l.INTERMEDIATE="INTERMEDIATE",l.NORMAL="NORMAL",l.DETACHED_HEAD="DETACHED_HEAD",C.Dy.Enum(b),(c=R||(R={})).FS_CHANGE="FS_CHANGE",c.FORCED_REFRESH="FORCED_REFRESH",c.NEW_PROFILE="NEW_PROFILE",c.CHANGED_PROFILE="CHANGED_PROFILE",(s=T||(T={})).REPLIT_DEFAULT="REPLIT_DEFAULT",s.GITHUB="GITHUB",(f=w||(w={})).UNTRACKED="UNTRACKED",f.UNMODIFIED="UNMODIFIED",f.MODIFIED="MODIFIED",f.TYPE_CHANGED="TYPE_CHANGED",f.ADDED="ADDED",f.DELETED="DELETED",f.RENAMED="RENAMED",f.COPIED="COPIED",f.UNMERGED="UNMERGED";var z=C.Dy.Enum(w),B=C.Dy.Object({type:C.Dy.Object({index:z,worktree:z}),path:C.Dy.String(),staged:C.Dy.Boolean(),unmerged:C.Dy.Boolean(),source:C.Dy.Optional(C.Dy.Object({type:C.Dy.Union([C.Dy.Literal("RENAMED"),C.Dy.Literal("COPIED")]),score:C.Dy.Number(),path:C.Dy.String()}))});C.Dy.Object({commit:C.Dy.Union([C.Dy.String(),C.Dy.Null()]),branch:C.Dy.Union([C.Dy.String(),C.Dy.Null()]),upstream:C.Dy.Union([C.Dy.Null(),C.Dy.Object({branch:C.Dy.String(),ahead:C.Dy.Number(),behind:C.Dy.Number()})]),stashes:C.Dy.Number(),changes:C.Dy.Array(B)});var j=r(27387),W=r(63257),V=r(96583);(d=x||(x={})).UNKNOWN_NOT_GIT="UNKNOWN_NOT_GIT",d.UNKNOWN="UNKNOWN",d.TIMEOUT="TIMEOUT",d.CHANNEL_CLOSED="CHANNEL_CLOSED",d.NOT_INITIALIZED="NOT_INITIALIZED",d.UNAUTHENTICATED="UNAUTHENTICATED",d.INDEX_FILE_CORRUPT="INDEX_FILE_CORRUPT",d.UNKNOWN_REMOTE="UNKNOWN_REMOTE",d.INDEX_LOCKED="INDEX_LOCKED",d.NO_COMMITS="NO_COMMITS",d.PATH_MATCHED_NO_FILES="PATH_MATCHED_NO_FILES",d.USER_NOT_CONFIGURED="USER_NOT_CONFIGURED",d.INVALID_REFERENCE="INVALID_REFERENCE",d.BRANCH_ALREADY_EXISTS="BRANCH_ALREADY_EXISTS",d.MERGE_CONFLICT="MERGE_CONFLICT",d.UPSTREAM_NOT_SET="UPSTREAM_NOT_SET",d.HEAD_DETACHED="HEAD_DETACHED",d.DIRTY_WORKTREE="DIRTY_WORKTREE",d.PUSH_REJECTED="PUSH_REJECTED",d.REMOTE_ALREADY_EXISTS="REMOTE_ALREADY_EXISTS",d.ALREADY_INITIALIZED="ALREADY_INITIALIZED",d.INVALID_STATE="INVALID_STATE",d.PROTECTED_BRANCH="PROTECTED_BRANCH",C.Dy.Enum(x);var Y=/^(fatal: |error: |remote: error: |CONFLICT \([^)]+\): )/im,K=/^cat: .*: No such file or directory$/im;function X(e){return RegExp("^fatal: ".concat(e.source),"im")}function J(e){return RegExp("^error: ".concat(e.source),"im")}var $=[{error:"NOT_INITIALIZED",match:[X(/not a git repository/)]},{error:"UNAUTHENTICATED",match:[X(/Authentication failed/),X(/unable to access/),X(/repository \S+ not found/),X(/could not read Username/),X(/could not read Password/),X(/Could not read from remote/)]},{error:"INDEX_FILE_CORRUPT",match:[X(/index file corrupt/),X(/index file smaller than expected/),J(/index file .*?\.idx is too small/)]},{error:"UNKNOWN_REMOTE",match:[X(/No such remote/),J(/No such remote/)]},{error:"INDEX_LOCKED",match:[X(/Unable to create .*?\.git\/index\.lock/),J(/Unable to create .*?\.git\/index\.lock/)]},{error:"NO_COMMITS",match:[X(/your current branch '.*?' does not have any commits yet/)]},{error:"PATH_MATCHED_NO_FILES",match:[X(/pathspec '.*?' did not match any files/),X(/pathspec '.*?' did not match any file\(s\) known to git/),X(/path '.*?' does not exist/),X(/path '.*?' exists on disk, but not in/)]},{error:"USER_NOT_CONFIGURED",match:[X(/unable to auto-detect email address/),X(/unable to auto-detect name/),X(/empty ident name \(for <.*?>\) not allowed/)]},{error:"INVALID_REFERENCE",match:[X(/invalid reference: .*?$/),X(/'.*?' - not a valid ref/)]},{error:"BRANCH_ALREADY_EXISTS",match:[X(/A branch named '.*?' already exists/)]},{error:"MERGE_CONFLICT",match:[X(/Not possible to fast-forward, aborting/),X(/refusing to merge unrelated histories/),X(/Exiting because of an unresolved conflict/),X(/Exiting because of unfinished merge/),J(/Failed to merge in the changes/),RegExp("^CONFLICT \\([^\\)]+\\): ".concat(/Merge conflict in/.source),"im")]},{error:"UPSTREAM_NOT_SET",match:[X(/The current branch \S+ has no upstream branch/),X(/No configured push destination/)]},{error:"HEAD_DETACHED",match:[X(/HEAD does not point to a branch/),X(/ref HEAD is not a symbolic ref/)]},{error:"DIRTY_WORKTREE",match:[J(/Your local changes to the following files would be overwritten/),J(/The following untracked working tree files would be overwritten/),J(/\S+ is not possible because you have unmerged files/),J(/cannot rebase: You have unstaged changes/)]},{error:"PROTECTED_BRANCH",match:[RegExp("^remote: error: ".concat(/.*? Protected branch update failed/.source),"im")]},{error:"PUSH_REJECTED",match:[J(/failed to push some refs to/)]},{error:"REMOTE_ALREADY_EXISTS",match:[X(/remote .*? already exists/),J(/remote .*? already exists/)]},{error:"INVALID_STATE",match:[X(/There is no merge in progress/),X(/There is no merge to abort/),X(/No rebase in progress/)]}];function q(e){if(Y.test(e)){for(var t=0;t<$.length;t++)for(var r=0;r<$[t].match.length;r++)if($[t].match[r].test(e))return $[t].error;return"UNKNOWN"}return K.test(e)?"PATH_MATCHED_NO_FILES":"UNKNOWN_NOT_GIT"}var Q=r(66626),ee=r(78950);function et(e,t){for(var r=[],n=e.split(t),i=0;i<n.length;i++){var o=n[i].trim();""!==o&&r.push(o)}return r}function er(e){return"'".concat(e.replace(/'/g,"'\\''"),"'")}function en(e){return e.replace(/^refs\/(?:heads|remotes)\//,"")}function ei(e){if(-1===e.indexOf("/")||e.startsWith("refs/heads/"))return[null,null];if(e.startsWith("refs/remotes/")){var t=(0,ee._)(e.split("/"));return[t[2],t.slice(3).join("/")]}var r=(0,ee._)(e.split("/"));return[r[0],r.slice(1).join("/")]}function eo(e){return e.replace(/^refs\/remotes\//,"")}var ea=/[~^:?*[\\\0-\x20\x7F]/,eu=/^(([A-Za-z0-9]+@|http(|s):\/\/)|(http(|s):\/\/[A-Za-z0-9]+@))([A-Za-z0-9.]+(:\d+)?)(?::|\/)([\d/\w.-]+?)$/,el=new RegExp([ea,/^$/,/^\//,/\/$/,/\.lock$/,/\/{2,}/,/^\./,/\.$/,/\/\./,/\.\./,/@\{/,/^@$/,/^-/].map(function(e){return"(?:".concat(e.source,")")}).join("|"));function ec(e){return 0===e.length||!ea.test(e)}function es(e){return!el.test(e)}function ef(e){return!el.test(e)}function ed(e){return eu.test(e)}function eh(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"string"==typeof e?en(e):"commit"in e?e.type===g.LOCAL||t&&e.type===g.TRACKED?e.name:"".concat(e.remote,"/").concat(e.name):e.name}function ep(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"==typeof e)return e;if("commit"in e)return e.type===g.LOCAL||t&&e.type===g.TRACKED?"refs/heads/".concat(e.name):"refs/remotes/".concat(e.remote,"/").concat(e.name);if(e.type===m.BRANCH)return"refs/heads/".concat(e.name);if(e.type===m.REMOTE_BRANCH)return"refs/remotes/".concat(e.remote,"/").concat(e.branch);throw Error("Unknown branch object")}function ev(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"==typeof e)return t&&!e.startsWith("refs/remotes/")?null:(0,Q._)(ei(e),1)[0];if("commit"in e)return t&&e.type!==g.REMOTE?null:e.remote;if(e.type===m.BRANCH)return null;if(e.type===m.REMOTE_BRANCH)return e.remote;throw Error("Unknown branch object")}function ey(e,t){return e===t||null!==e&&null!==t&&ep(e)===ep(t)}function em(e,t){return eg.apply(this,arguments)}function eg(){return(eg=(0,j._)(function(e,t){var r,n,i,o,a;return(0,V.Jh)(this,function(u){switch(u.label){case 0:if(r=t.name,n=t.url,o=void 0!==(i=t.fetch)&&i,!ef(r=eo(r)))return[2,{error:x.INVALID_REFERENCE}];return r=er(r),n=er(n),[4,e(["git remote add"].concat((0,W._)(o?["-f"]:[]),[r,n]).join(" "),{serviceMethod:"git-add-remote"})];case 1:if((a=u.sent()).error)return[2,a];return[2,{didFetch:a.output.includes("Updating"),error:null}]}})})).apply(this,arguments)}var eE="HEAD -> ",eD="refs/heads/",e_="refs/remotes/",eb="tag: ",eR="refs/tags/",eT=/^refs\/remotes\/([^/]+)\/HEAD$/;function ew(e){var t;switch("HEAD"===(t=e)||"refs/HEAD"===t||t.startsWith(eE)?m.HEAD:t.startsWith(eD)?m.BRANCH:t.startsWith(e_)?eT.test(t)?m.REMOTE_HEAD:m.REMOTE_BRANCH:t.startsWith(eR)||t.startsWith(eb)?m.TAG:m.BRANCH){case m.HEAD:if(e.startsWith(eE)){if(e.endsWith("(detached)"))return{type:m.HEAD,name:"HEAD",detached:!0,ref:null};return{type:m.HEAD,name:"HEAD",detached:!1,ref:ew(e.slice(eE.length))}}return{type:m.HEAD,name:"HEAD",detached:!1,ref:null};case m.REMOTE_HEAD:var r=e.slice(e_.length),n=(0,Q._)(r.split("/"),1)[0];return{type:m.REMOTE_HEAD,name:"HEAD",remote:n};case m.BRANCH:return{type:m.BRANCH,name:e.startsWith(eD)?e.slice(eD.length):e};case m.REMOTE_BRANCH:var i=e.slice(e_.length),o=(0,ee._)(i.split("/")),a=o[0],u=o.slice(1).join("/");return{type:m.REMOTE_BRANCH,name:i,remote:a,branch:u};case m.TAG:return e.startsWith(eb)&&(e=e.slice(eb.length)),e.startsWith(eR)&&(e=e.slice(eR.length)),{type:m.TAG,name:e}}}function ex(e,t){return eI.apply(this,arguments)}function eI(){return(eI=(0,j._)(function(e,t){var r,n,i,o,a,u;return(0,V.Jh)(this,function(l){switch(l.label){case 0:if(r=(t=ep(t)).startsWith("refs/heads/"),n=t.startsWith("refs/remotes/"),r)return[3,2];return i=n?t:"refs/remotes/".concat(t),[4,e("git show-ref --verify ".concat(i),{serviceMethod:"git-branch-exists"})];case 1:if(!(o=l.sent()).error)return[2,{exists:!0,ref:ew(i),error:null}];if(o.error!==x.INVALID_REFERENCE)return[2,o];l.label=2;case 2:if(n)return[3,4];return a=r?t:"refs/heads/".concat(t),[4,e("git show-ref --verify ".concat(a),{serviceMethod:"git-branch-exists"})];case 3:if(!(u=l.sent()).error)return[2,{exists:!0,ref:ew(a),error:null}];if(u.error!==x.INVALID_REFERENCE)return[2,u];l.label=4;case 4:return[2,{exists:!1,ref:null,error:null}]}})})).apply(this,arguments)}function eN(e,t){return eC.apply(this,arguments)}function eC(){return(eC=(0,j._)(function(e,t){var r,n,i,o;return(0,V.Jh)(this,function(a){switch(a.label){case 0:return r=t.upstream,n=t.branchName,i=["--set-upstream-to",r],n&&i.push(er(n)),[4,e("git branch ".concat(i.join(" ")),{serviceMethod:"git-set-branch-upstream"})];case 1:if((o=a.sent()).error)return[2,o];return[2,{error:null}]}})})).apply(this,arguments)}function eA(e,t,r){return eS.apply(this,arguments)}function eS(){return(eS=(0,j._)(function(e,t,r){var n,i,o;return(0,V.Jh)(this,function(a){switch(a.label){case 0:if(ey(t,r)){if(t=eh(t,!0),r=eh(r),t===r)return[2,{canMerge:!0,error:null}]}else t=eh(t),r=eh(r);return t=er(t),r=er(r),n="git merge-base ".concat(t," ").concat(r),i='git merge-tree "$('.concat(n,')" ').concat(t," ").concat(r),[4,e("set -eo pipefail; (".concat(i," | ").concat("( (grep -q -e '^+<* \\.our$' && echo '1') || echo '0')",") || test $? -eq 141"),{serviceMethod:"git-can-merge-branches"})];case 1:if((o=a.sent()).error)return[2,o];return[2,{canMerge:"0"===o.output,error:null}]}})})).apply(this,arguments)}function eO(e,t){return eM.apply(this,arguments)}function eM(){return(eM=(0,j._)(function(e,t){var r;return(0,V.Jh)(this,function(n){switch(n.label){case 0:var i,o,a,u;return[4,e((i=t.message,o=t.files,a=t.allowEmpty,u=["--allow-empty-message","--cleanup=whitespace","--no-edit","--quiet","-m ".concat(er(i))],(void 0===a||a)&&u.push("--allow-empty"),o&&u.push.apply(u,["--only","--"].concat((0,W._)(o.map(er)))),"git --literal-pathspecs commit ".concat(u.join(" "))),{serviceMethod:"git-commit"})];case 1:if((r=n.sent()).error)return[2,r];return[2,{error:null}]}})})).apply(this,arguments)}function eZ(e,t){return eP.apply(this,arguments)}function eP(){return(eP=(0,j._)(function(e,t){var r,n,i,o,a,u;return(0,V.Jh)(this,function(l){switch(l.label){case 0:return[4,ex(e,t=ep(t,!0))];case 1:if((r=l.sent()).error)return[2,r];if(!r.exists)return[2,{error:x.INVALID_REFERENCE}];if(n=["--quiet","--no-guess"],r.ref.type!==m.REMOTE_BRANCH)return[3,3];return i=r.ref.branch,o=r.ref.name,[4,ex(e,"refs/heads/".concat(i))];case 2:if((a=l.sent()).error)return[2,a];return a.exists?n.push(er(i),"--"):n.push("-t","-b",er(i),er(o),"--"),[3,4];case 3:n.push(er(r.ref.name),"--"),l.label=4;case 4:return[4,e("git checkout ".concat(n.join(" ")),{serviceMethod:"git-switch-branch"})];case 5:if((u=l.sent()).error)return[2,u];return[2,{error:null}]}})})).apply(this,arguments)}function eF(e,t){return eL.apply(this,arguments)}function eL(){return(eL=(0,j._)(function(e,t){var r,n,i,o,a,u,l,c,s,f,d;return(0,V.Jh)(this,function(h){switch(h.label){case 0:return r=t.name,i=void 0===(n=t.startPoint)?"HEAD":n,o=t.track,u=void 0!==(a=t.checkout)&&a,[4,ex(e,r=en(r))];case 1:if((l=h.sent()).error)return[2,l];if(l.exists)return[2,{error:x.BRANCH_ALREADY_EXISTS}];if("HEAD"===i){if(!0===o)return[2,{error:x.INVALID_REFERENCE}];o=!1}if(!(!1!==o))return[3,3];return[4,ex(e,i)];case 2:if((c=h.sent()).error)return[2,c];if(!c.exists&&!0===o)return[2,{error:x.INVALID_REFERENCE}];c.exists&&c.ref.type===m.REMOTE_BRANCH&&void 0===o&&(o=!0),h.label=3;case 3:return s=["--quiet",o?"--track":"--no-track",er(r),er(i)],[4,e("git branch ".concat(s.join(" ")),{serviceMethod:"git-create-branch"})];case 4:if((f=h.sent()).error)return[2,f];if(!u)return[3,6];return[4,eZ(e,r)];case 5:if((d=h.sent()).error)return[2,d];h.label=6;case 6:return[2,{error:null}]}})})).apply(this,arguments)}function ek(e){return eG.apply(this,arguments)}function eG(){return(eG=(0,j._)(function(e){var t,r,n,i,o=arguments;return(0,V.Jh)(this,function(a){switch(a.label){case 0:return t=o.length>1&&void 0!==o[1]?o[1]:{},r=["--quiet"],t.depth&&(n=t.deepen?"--deepen":"--depth",r.push("".concat(n,"=").concat(t.depth))),t.remote?r.push(er(t.remote)):r.push("--all"),[4,e("git fetch ".concat(r.join(" ")),{serviceMethod:"git-fetch"})];case 1:if((i=a.sent()).error)return[2,i];return[2,{error:null}]}})})).apply(this,arguments)}var eH=["main","master","trunk","dev","develop","development","staging","prod","production"].map(function(e){return'if [ $(git rev-parse --verify --quiet "heads/'.concat(e,'") ]; then\n      echo "refs/heads/').concat(e,'"\n    fi')}).join("\n"),eU='\ngit remote | while IFS= read -r remote; do\n  if [ -z "$remote" ]; then continue; fi\n  branch="$('.concat('\nif [ -f ".git/refs/remotes/$remote/HEAD" ]; then\n  echo "$(sed -e "s/^ref: refs\\/remotes\\/$remote\\///" < .git/refs/remotes/$remote/HEAD)"\nelse\n  remote_result="$(git ls-remote --symref "$remote" HEAD)"\n  if [ -z "$remote_result" ]; then\n    echo ""\n  else\n    branch_name="$(\n      echo "$remote_result" | \\\n      head -1 | \\\n      awk \'{print $2}\' | \\\n      sed -e "s/^refs\\/heads\\///"\n    )"\n    git remote set-head "$remote" "$branch_name" >&2\n    echo "$branch_name"\n  fi\nfi\n'.trim(),')"\n  if [ -z "$branch" ]; then continue; fi\n  echo "refs/remotes/$remote/$branch"\n  if [ $(git rev-parse --verify --quiet "heads/$branch") ]; then\n    echo "refs/heads/$branch"\n  fi\ndone\n').concat(eH,"\n").trim();function ez(e){return eB.apply(this,arguments)}function eB(){return(eB=(0,j._)(function(e){var t;return(0,V.Jh)(this,function(r){switch(r.label){case 0:return[4,e(eU,{serviceMethod:"git-find-default-branches"})];case 1:if((t=r.sent()).error)return[2,t];return[2,{refs:(0,W._)(new Set(et(t.output,"\n"))).map(function(e){return ew(e)}),error:null}]}})})).apply(this,arguments)}function ej(e,t){return!!e&&!!t&&(e===t||e.name===t.name&&e.remote===t.remote)}function eW(e){var t=(0,Q._)(e.split("	"),6),r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],u=t[5],l=ew(r),c={hash:i,author:{name:o,email:a.replace(/^<|>$/g,""),date:1e3*parseInt(u,10)}};if(l.type===m.BRANCH){var s=n?ew(n):null,f=s&&(s.type===m.REMOTE_BRANCH||s.type===m.BRANCH)?s:null;return{type:g.LOCAL,name:l.name,push:f,remote:null,tracking:null,commit:c}}return l.type===m.REMOTE_BRANCH?{type:g.REMOTE,name:l.branch,remote:l.remote,push:null,tracking:null,commit:c}:null}function eV(e){return eY.apply(this,arguments)}function eY(){return(eY=(0,j._)(function(e){var t,r,n=arguments;return(0,V.Jh)(this,function(i){switch(i.label){case 0:return[4,e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!1===e.local&&!1===e.remote)throw Error("Cannot specify both local and remote as false");var t=[];if(t.push('--format="%(refname)%09%(push)%09%(objectname)%09%(authorname)%09%(authoremail)%09%(authordate:unix)"'),e.max&&t.push("--count=".concat(e.max)),e.pattern){if("string"==typeof e.pattern)t.push(er(e.pattern));else{var r,n,i=e.pattern.map(function(e){return er(e)});t.push.apply(t,(0,W._)(i))}}else(null===(r=e.local)||void 0===r||r)&&t.push("refs/heads"),(null===(n=e.remote)||void 0===n||n)&&t.push("refs/remotes");return"git for-each-ref ".concat(t.join(" "))}(n.length>1&&void 0!==n[1]?n[1]:{}),{serviceMethod:"git-list-branches"})];case 1:if((t=i.sent()).error)return[2,t];return(r=function(e){var t=[],r=[],n=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done);n=!0){var l=a.value;l.type===g.LOCAL?t.push(l):l.type===g.REMOTE&&r.push(l)}}catch(e){i=!0,o=e}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}var c=new Set,s=[],f=!0,d=!1,h=void 0;try{for(var p,v=r[Symbol.iterator]();!(f=(p=v.next()).done);f=!0)!function(){var e=p.value,r=t.find(function(t){return t.push&&t.push.type===m.REMOTE_BRANCH&&t.push.remote===e.remote&&t.push.branch===e.name&&t.name===e.name});r&&(c.add(e),c.add(r),s.push({type:g.TRACKED,name:r.name,remote:e.remote,push:r.push,tracking:e,commit:r.commit}))}()}catch(e){d=!0,h=e}finally{try{f||null==v.return||v.return()}finally{if(d)throw h}}var y=e.filter(function(e){return!c.has(e)});return(0,W._)(y).concat((0,W._)(s))}(et(t.output,"\n").map(eW).filter(function(e){return null!==e}))).sort(function(e,t){return t.commit.author.date-e.commit.author.date}),[2,{branches:r,error:null}]}})})).apply(this,arguments)}function eK(e,t){return eX.apply(this,arguments)}function eX(){return(eX=(0,j._)(function(e,t){var r,n,i,o,a,u,l,c,s,f,d,h;return(0,V.Jh)(this,function(p){switch(p.label){case 0:if(!es(t=eh(t,!0)))return[2,{error:x.INVALID_REFERENCE}];return r=en(t),i=(n=(0,Q._)(ei(t),2))[0],o=n[1],a=["refs/heads/".concat(r),"refs/remotes/*/".concat(r)],i&&o&&(a.push("refs/heads/".concat(o)),a.push("refs/remotes/".concat(i,"/").concat(o))),[4,eV(e,{pattern:a})];case 1:if((u=p.sent()).error)return[2,u];if(0===u.branches.length)return[2,{error:x.INVALID_REFERENCE}];l=!0,c=!1,s=void 0;try{for(f=u.branches[Symbol.iterator]();!(l=(d=f.next()).done);l=!0)if((h=d.value).type!==g.REMOTE&&h.name===r||i&&o&&h.type!==g.LOCAL&&h.remote===i&&h.name===o)return[2,{branch:h,error:null}]}catch(e){c=!0,s=e}finally{try{l||null==f.return||f.return()}finally{if(c)throw s}}return[2,{error:x.INVALID_REFERENCE}]}})})).apply(this,arguments)}var eJ=["git diff -z --name-only --diff-filter=U","echo -n ".concat("\x1f"),"{ git grep -z -l -E '<{7,}|={7,}|>{7,}' || exit $(( $? == 1 ? 0 : $? )); }"].join(" && ");function e$(e){return eq.apply(this,arguments)}function eq(){return(eq=(0,j._)(function(e){var t,r,n,i,o,a,u,l,c,s,f;return(0,V.Jh)(this,function(d){switch(d.label){case 0:return[4,e(eJ,{serviceMethod:"git-get-conflicting-files"})];case 1:if((t=d.sent()).error)return[2,t];if(n=(r=(0,Q._)(t.output.split("\x1f").map(function(e){return et(e,"\x00")}),2))[0],i=r[1],!n.length)return[2,{files:new Map,error:null}];o=new Map,a=!0,u=!1,l=void 0;try{for(c=n[Symbol.iterator]();!(a=(s=c.next()).done);a=!0)f=s.value,o.set(f,!i.includes(f))}catch(e){u=!0,l=e}finally{try{a||null==c.return||c.return()}finally{if(u)throw l}}return[2,{files:o,error:null}]}})})).apply(this,arguments)}function eQ(e,t){return e0.apply(this,arguments)}function e0(){return(e0=(0,j._)(function(e,t){var r,n,i,o,a,u;return(0,V.Jh)(this,function(l){switch(l.label){case 0:if(r=t.path,n=t.convertToBase64,o=void 0===(i=t.revision)?"HEAD":i,""===r)return[2,{content:null,error:null}];return a=er("".concat(o,":").concat(r)),[4,e(n?"git --no-pager show ".concat(a," | base64"):"git --no-pager show ".concat(a),{verbatim:!0,serviceMethod:"git-get-file-contents"})];case 1:if((u=l.sent()).error){if(u.error===x.PATH_MATCHED_NO_FILES)return[2,{content:null,error:null}];return[2,u]}return[2,{content:u.output,error:null}]}})})).apply(this,arguments)}function e1(e,t){return"{ ".concat(e,"; } > /dev/null 2>&1 && echo -n '").concat(t,"' && exit 0")}var e2=[e1("! git rev-parse --is-inside-work-tree",_.NOT_INITIALIZED),e1('[ "$(! git rev-parse HEAD -- 2>&1)" = "fatal: bad revision \'HEAD\'" ]',_.ON_UNBORN_BRANCH),e1("git rev-parse -q --verify MERGE_HEAD",_.MERGING),e1("[ -d '.git/rebase-apply' ] && [ -f '.git/rebase-apply/applying' ]",_.APPLYING_MAILBOX),e1("[ -d '.git/rebase-apply' ] || [ -d '.git/rebase-merge' ]",_.REBASING),e1("git rev-parse -q --verify REVERT_HEAD",_.REVERTING),e1("git rev-parse -q --verify CHERRY_PICK_HEAD",_.CHERRY_PICKING),e1("[ -f '.git/BISECT_LOG' ]",_.BISECTING),e1("! git symbolic-ref -q HEAD",_.DETACHED_HEAD),"git update-index -q --refresh > /dev/null || exit $?",e1('{ ! git diff-files --quiet; } || [ -n "$(git ls-files --others --exclude-standard)" ]',_.DIRTY_WORKTREE),e1("! git diff-index --cached --quiet HEAD --",_.DIRTY_INDEX),'echo -n "CLEAN"'].join(";");function e4(e){return e5.apply(this,arguments)}function e5(){return(e5=(0,j._)(function(e){var t,r,n;return(0,V.Jh)(this,function(i){switch(i.label){case 0:return[4,e(e2,{serviceMethod:"git-get-repository-state"})];case 1:if((t=i.sent()).error)return[2,t];if(!(t.output in _))return[2,{error:x.UNKNOWN}];return n=function(e){switch(e){case _.NOT_INITIALIZED:case _.ON_UNBORN_BRANCH:return b.INITIALIZING;case _.MERGING:case _.REBASING:case _.REVERTING:case _.CHERRY_PICKING:case _.APPLYING_MAILBOX:case _.BISECTING:return b.INTERMEDIATE;case _.DIRTY_WORKTREE:case _.DIRTY_INDEX:case _.CLEAN:return b.NORMAL;case _.DETACHED_HEAD:return b.DETACHED_HEAD}}(r=t.output),[2,{state:r,type:n,error:null}]}})})).apply(this,arguments)}function e3(e){return e7.apply(this,arguments)}function e7(){return(e7=(0,j._)(function(e){var t,r,n,i,o,a;return(0,V.Jh)(this,function(u){switch(u.label){case 0:return[4,e4(e)];case 1:if((t=u.sent()).error)return[2,t];if(t.state!==_.MERGING)return[2,{error:x.INVALID_STATE}];return[4,e("cat '.git/MERGE_HEAD'",{serviceMethod:"git-get-merging-refs"})];case 2:if((r=u.sent()).error)return[2,r];if(!(n=et(r.output,"\n")).length)return[2,{commits:[],branches:[],error:null}];return i="{ grep -F '".concat(n.join("\n"),"' || exit 0; }"),[4,e("".concat('git for-each-ref --format="%(objectname)	%(refname)" refs/heads/ refs/remotes/'," | ").concat(i),{serviceMethod:"git-get-merging-refs"})];case 3:if((o=u.sent()).error)return[2,o];if(!o.output)return[2,{commits:n,branches:[],error:null}];return a=et(o.output,"\n").map(function(e){return e.split("	")[1]}).map(en),[2,{commits:n,branches:a,error:null}]}})})).apply(this,arguments)}function e6(e){return e9.apply(this,arguments)}function e9(){return(e9=(0,j._)(function(e){var t,r,n,i,o,a,u,l,c,s,f,d,h,p;return(0,V.Jh)(this,function(v){switch(v.label){case 0:return[4,e("git remote -v",{serviceMethod:"git-get-remotes"})];case 1:if((t=v.sent()).error)return[2,t];if(""===t.output)return[2,{remotes:new Map,error:null}];r=new Map,n=!0,i=!1,o=void 0;try{for(a=et(t.output,"\n")[Symbol.iterator]();!(n=(u=a.next()).done);n=!0)l=u.value,s=(c=(0,Q._)(l.split(/\s+/),3))[0],f=c[1],d=c[2],s&&f&&d&&(p=null!==(h=r.get(s))&&void 0!==h?h:{name:s,fetch:"",push:""},"(fetch)"===d?(p.fetch=f,""===p.push&&(p.push=f),r.set(s,p)):"(push)"===d&&(p.push=f,""===p.fetch&&(p.fetch=f),r.set(s,p)))}catch(e){i=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(i)throw o}}return[2,{remotes:r,error:null}]}})})).apply(this,arguments)}function e8(e){switch(e){case"A":return E.ADDED;case"C":return E.COPIED;case"D":return E.DELETED;case"M":return E.MODIFIED;case"R":return E.RENAMED;case"T":return E.TYPE_CHANGED;case"X":default:return E.UNKNOWN;case"B":return E.BROKEN}}var te=(h=(0,j._)(function(e,t){var r;return(0,V.Jh)(this,function(n){switch(n.label){case 0:return[4,e("git log -1 --pretty=%P ".concat(t))];case 1:if((r=n.sent()).error)return[2,!1];return[2,r.output.trim().length>0]}})}),function(e,t){return h.apply(this,arguments)}),tt=(p=(0,j._)(function(e,t){var r,n,i,o,a,u,l,c,s;return(0,V.Jh)(this,function(f){switch(f.label){case 0:return[4,e("git ls-tree --name-only -r ".concat(t),{serviceMethod:"git-get-files-for-commit"})];case 1:if((r=f.sent()).error)return[2,r];n=[],i=r.output.split("\n").filter(Boolean),o=!0,a=!1,u=void 0;try{for(l=i[Symbol.iterator]();!(o=(c=l.next()).done);o=!0)s=c.value,n.push({path:s,type:E.ADDED})}catch(e){a=!0,u=e}finally{try{o||null==l.return||l.return()}finally{if(a)throw u}}return[2,{files:n,error:null}]}})}),function(e,t){return p.apply(this,arguments)});function tr(e){return Array.from(e.matchAll(to)).map(function(e){var t=(0,Q._)(e,4),r=t[1],n=t[2];return{path:t[3],originalPath:n,type:e8(r)}})}function tn(e){return Array.from(e.matchAll(ti)).map(function(e){var t=(0,Q._)(e,3),r=t[1];return{path:t[2],type:e8(r)}})}var ti=/([ADMUXBT])\0([^\0]+)/g,to=/([RC])\d*\0([^\0]+)\0([^\0]+)/g;function ta(e,t){return tu.apply(this,arguments)}function tu(){return(tu=(0,j._)(function(e,t){var r,n,i;return(0,V.Jh)(this,function(o){switch(o.label){case 0:return[4,te(e,t)];case 1:if(!o.sent())return[2,tt(e,t)];return[4,e("git diff-tree --no-commit-id --name-status -z -r -C --find-copies-harder -M ".concat(t),{serviceMethod:"git-get-files-for-commit"})];case 2:if((r=o.sent()).error)return[2,r];return n=tr(r.output),i=tn(r.output),[2,{files:(0,W._)(n).concat((0,W._)(i)),error:null}]}})})).apply(this,arguments)}var tl='git commit --allow-empty --no-edit --quiet -m "Initial commit"',tc='git add -A && git commit --allow-empty --no-edit --quiet -m "Initial commit"';function ts(e){return tf.apply(this,arguments)}function tf(){return(tf=(0,j._)(function(e){var t,r,n,i,o,a,u,l,c,s=arguments;return(0,V.Jh)(this,function(f){switch(f.label){case 0:return n=void 0===(r=(t=s.length>1&&void 0!==s[1]?s[1]:{}).initialCommit)||r,o=void 0===(i=t.includeAllInitialFiles)||i,[4,e4(e)];case 1:if((a=f.sent()).error)return[2,a];if(a.type!==b.INITIALIZING)return[2,{error:x.ALREADY_INITIALIZED}];if(a.state!==_.ON_UNBORN_BRANCH)return[3,4];if(!n)return[3,3];return[4,e(o?tc:tl,{serviceMethod:"git-init"})];case 2:if((u=f.sent()).error)return[2,u];f.label=3;case 3:return[2,{error:null}];case 4:return[4,e(["git init","git checkout -b main"],{serviceMethod:"git-init"})];case 5:if((l=f.sent()).error)return[2,l];if(!n)return[3,7];return[4,e(o?tc:tl,{serviceMethod:"git-init"})];case 6:if((c=f.sent()).error)return[2,c];f.label=7;case 7:return[2,{error:null}]}})})).apply(this,arguments)}function td(e){return th.apply(this,arguments)}function th(){return(th=(0,j._)(function(e){var t;return(0,V.Jh)(this,function(r){switch(r.label){case 0:return[4,e("git rev-parse --is-inside-work-tree",{serviceMethod:"git-is-initialized"})];case 1:if((t=r.sent()).error){if(t.error===x.NOT_INITIALIZED)return[2,{initialized:!1,error:null}];return[2,t]}return[2,{initialized:"true"===t.output,error:null}]}})})).apply(this,arguments)}function tp(e){return tv.apply(this,arguments)}function tv(){return(tv=(0,j._)(function(e){var t,r;return(0,V.Jh)(this,function(n){switch(n.label){case 0:return[4,e("if [ -f '.git/FETCH_HEAD' ]; then stat -c %Y '.git/FETCH_HEAD'; fi",{serviceMethod:"git-last-fetched"})];case 1:if((t=n.sent()).error)return[2,t];if(!t.output||isNaN(r=parseInt(t.output,10)))return[2,{lastFetched:null,error:null}];return[2,{lastFetched:new Date(r*=1e3),error:null}]}})})).apply(this,arguments)}function ty(e){var t=(0,Q._)(e.trimStart().split("\x1f"),11),r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],u=t[5],l=t[6],c=t[7],s=t[8],f=t[9],d=t[10],h=[],p=i?i.split(" "):null,v=!1,y=!0,m=!1,g=void 0;try{for(var E,D=et(r,",")[Symbol.iterator]();!(y=(E=D.next()).done);y=!0){var _=E.value;if("grafted"===_){v=!0;continue}h.push(ew(_))}}catch(e){m=!0,g=e}finally{try{y||null==D.return||D.return()}finally{if(m)throw g}}return{refs:h,hash:n,parents:p,grafted:v,author:{name:o,email:a,date:1e3*parseInt(u,10)},committer:{name:l,email:c,date:1e3*parseInt(s,10)},subject:f?f.trim():"",body:d?d.trim():""}}function tm(e){return tg.apply(this,arguments)}function tg(){return(tg=(0,j._)(function(e){var t,r=arguments;return(0,V.Jh)(this,function(n){switch(n.label){case 0:var i,o,a,u,l,c,s;return[4,e((a=void 0===(o=(i=r.length>1&&void 0!==r[1]?r[1]:{}).max)?25:o,u=i.skip,l=i.revRange,c=i.path,s=["-z","--decorate=full","--full-history",'--format="format:%D%x1f%H%x1f%P%x1f%an%x1f%ae%x1f%at%x1f%cn%x1f%ce%x1f%ct%x1f%s%x1f%b"'],a=Math.max(1,Math.min(a,200)),s.push("-n ".concat(a)),u&&s.push("--skip ".concat(u)),l&&s.push(l),s.push("--"),c&&s.push(c),"git log ".concat(s.join(" "))),{serviceMethod:"git-log"})];case 1:if((t=n.sent()).error){if(t.error===x.NO_COMMITS)return[2,{commits:[],error:null}];return[2,t]}return[2,{commits:et(t.output,"\x00").map(ty),error:null}]}})})).apply(this,arguments)}function tE(e){return tD.apply(this,arguments)}function tD(){return(tD=(0,j._)(function(e){var t,r=arguments;return(0,V.Jh)(this,function(n){switch(n.label){case 0:return[4,e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];return e.cached&&t.push("--cached"),e.deleted&&t.push("--deleted"),e.modified&&t.push("--modified"),e.others&&t.push("--others"),e.ignored&&t.push("--ignored"),e.directory&&t.push("--directory"),e.noEmptyDirectory&&t.push("--no-empty-directory"),"git ls-files ".concat(t.join(" "))}(r.length>1&&void 0!==r[1]?r[1]:{}),{serviceMethod:"git-ls-files"})];case 1:if((t=n.sent()).error)return[2,t];return[2,{files:t.output.split("\n").filter(function(e){return e.length>0}),error:null}]}})})).apply(this,arguments)}function t_(e,t){return tb.apply(this,arguments)}function tb(){return(tb=(0,j._)(function(e,t){var r,n,i,o,a,u,l,c,s;return(0,V.Jh)(this,function(f){switch(f.label){case 0:return r=t.branch,n=t.message,o=void 0!==(i=t.allowConflicts)&&i,[4,e4(e)];case 1:if((a=f.sent()).error)return[2,a];if(u=a.state,a.type!==b.NORMAL||u===_.DIRTY_WORKTREE||u===_.DIRTY_INDEX)return[2,{error:x.INVALID_STATE}];return[4,ex(e,r)];case 2:if((l=f.sent()).error)return[2,l];if(!l.exists)return[2,{error:x.INVALID_REFERENCE}];if(o)return[3,4];return[4,eA(e,r,"HEAD")];case 3:if((c=f.sent()).error)return[2,c];if(!c.canMerge)return[2,{error:x.MERGE_CONFLICT}];f.label=4;case 4:var d,h,p,v;return h=(d={branch:r,message:n}).branch,p=d.message,h=ep(h),v=["--quiet","--no-edit","--no-ff","--overwrite-ignore","--commit"],p&&v.push("-m",er(p)),v.push(er(h)),[4,e("git merge ".concat(v.join(" ")),{serviceMethod:"git-merge"})];case 5:if((s=f.sent()).error!==x.MERGE_CONFLICT)return[3,8];if(o)return[3,7];return[4,e("git merge --abort")];case 6:return f.sent(),[2,s];case 7:return[2,{hasConflicts:!0,error:null}];case 8:if(s.error)return[2,s];return[2,{hasConflicts:!1,error:null}]}})})).apply(this,arguments)}function tR(e){return tT.apply(this,arguments)}function tT(){return(tT=(0,j._)(function(e){var t;return(0,V.Jh)(this,function(r){switch(r.label){case 0:return[4,e("git merge --abort",{serviceMethod:"git-merge-abort"})];case 1:if((t=r.sent()).error)return[2,t];return[2,{error:null}]}})})).apply(this,arguments)}function tw(e){return tx.apply(this,arguments)}function tx(){return(tx=(0,j._)(function(e){var t;return(0,V.Jh)(this,function(r){switch(r.label){case 0:return[4,e("GIT_EDITOR=/bin/true git merge --continue",{serviceMethod:"git-merge-continue"})];case 1:if((t=r.sent()).error)return[2,t];return[2,{error:null}]}})})).apply(this,arguments)}var tI="# branch.oid ",tN="# branch.head ",tC="# branch.upstream ",tA="# branch.ab ",tS="# stash ",tO=/^(\S)(\S) (\S{4}) (\S+) (\S+) (\S+) (\S+) (\S+) (.*)$/,tM=/^([RC])([0-9]+) (.+?)\t(.+)$/,tZ=/^(\S)(\S) (\S{4}) (\S+) (\S+) (\S+) (\S+) (\S+) (\S+) (\S+) (.*)$/,tP=/([RC][0-9]+ .+?)\0(.+?(?:\0|$))/g;function tF(e){return tL.apply(this,arguments)}function tL(){return(tL=(0,j._)(function(e){var t,r,n,i,o,a,u,l,c,s,f,d,h,p,v,y,m,g,E,D,_;return(0,V.Jh)(this,function(b){switch(b.label){case 0:return t=null,r=null,n=null,i=0,o=[],a=["-z","--porcelain=v2","--branch","--show-stash","--untracked-files=all"],[4,e("git status ".concat(a.join(" ")),{serviceMethod:"git-status"})];case 1:if((u=b.sent()).error)return[2,u];l=et(u.output.replaceAll(tP,"$1	$2"),"\x00"),c=!0,s=!1,f=void 0;try{for(d=l[Symbol.iterator]();!(c=(h=d.next()).done);c=!0)(p=h.value).startsWith("#")?p.startsWith(tI)?(v=p.substring(tI.length),"(initial)"!==v&&(t=v)):p.startsWith(tN)?(y=p.substring(tN.length),"(detached)"!==y&&(r=y)):p.startsWith(tC)?(m=p.substring(tC.length),"(not queried)"!==m&&(n={branch:m,ahead:0,behind:0})):p.startsWith(tA)?n&&(E=(g=(0,Q._)(p.substring(tA.length).split(" ").map(function(e){return Math.abs(parseInt(e,10))}),2))[0],D=g[1],n.ahead=E,n.behind=D):p.startsWith(tS)&&(i=parseInt(p.substring(tS.length),10)):(_=function(e){var t=e[0];switch(e=e.substring(2),t){case"!":default:return null;case"?":return{type:{index:w.UNTRACKED,worktree:w.UNTRACKED},path:e,staged:!1,unmerged:!1};case"u":var r=e.match(tZ);if(!r)return null;var n=(0,Q._)(r,12),i=n[1],o=n[2],a=n[11],u=tk(i),l=tk(o),c=u!==w.UNMODIFIED;return{type:{index:u,worktree:l},path:a,staged:c,unmerged:!0};case"1":case"2":var s=e.match(tO);if(!s)return null;var f=(0,Q._)(s,10),d=f[1],h=f[2],p=f[9],v=tk(d),y=tk(h),m=v!==w.UNMODIFIED;if("1"===t)return{type:{index:v,worktree:y},path:p,staged:m,unmerged:!1};if("2"===t){var g=p.match(tM);if(!g)return null;var E=(0,Q._)(g,5),D=E[1],_=E[2],b=E[3],R=E[4];return{type:{index:v,worktree:y},path:b,staged:m,unmerged:!1,source:{type:function(e){switch(e){case"R":default:return w.RENAMED;case"C":return w.COPIED}}(D),score:parseInt(_,10),path:R}}}return null}}(p),null!==_&&o.push(_))}catch(e){s=!0,f=e}finally{try{c||null==d.return||d.return()}finally{if(s)throw f}}return[2,{commit:t,branch:r,upstream:n,stashes:i,changes:o,error:null}]}})})).apply(this,arguments)}function tk(e){switch(e){case".":default:return w.UNMODIFIED;case"M":return w.MODIFIED;case"T":return w.TYPE_CHANGED;case"A":return w.ADDED;case"D":return w.DELETED;case"R":return w.RENAMED;case"C":return w.COPIED;case"U":return w.UNMERGED}}function tG(e){return tH.apply(this,arguments)}function tH(){return(tH=(0,j._)(function(e){var t,r,n,i,o,a,u,l,c,s=arguments;return(0,V.Jh)(this,function(f){switch(f.label){case 0:return t=s.length>1&&void 0!==s[1]?s[1]:{},[4,tF(e)];case 1:if((r=f.sent()).error)return[2,r];if(!r.branch)return[2,{error:x.HEAD_DETACHED}];if(!r.upstream&&!t.experimental_override_remote||(i=(n=(0,Q._)(t.experimental_override_remote?[t.experimental_override_remote.name,t.experimental_override_remote.branch]:ei(r.upstream.branch),2))[0],o=n[1],!i||!o))return[2,{error:x.UPSTREAM_NOT_SET}];if(r.changes.length>0)return[2,{error:x.DIRTY_WORKTREE}];if("FF_ONLY"===(u=null!==(a=t.mode)&&void 0!==a?a:"FF_ONLY")&&r.upstream&&r.upstream.ahead>0)return[2,{error:x.MERGE_CONFLICT}];switch("FF_ONLY"!==u&&r.upstream&&0===r.upstream.ahead&&(u="FF_ONLY"),l=["--quiet","--no-edit"],u){case"FF_ONLY":l.push("--no-rebase","--ff-only");break;case"MERGE":l.push("--no-rebase","--ff");break;case"REBASE":l.push("--rebase")}return l.push(er(i),er(o)),[4,e("git pull ".concat(l.join(" ")),{serviceMethod:"git-pull"})];case 2:if((c=f.sent()).error!==x.MERGE_CONFLICT)return[3,8];if(t.allowConflicts)return[2,{hasConflicts:!0,error:null}];switch(u){case"MERGE":return[3,3];case"REBASE":return[3,5]}return[3,7];case 3:return[4,e("git merge --abort",{serviceMethod:"git-pull"})];case 4:case 6:return f.sent(),[3,7];case 5:return[4,e("git rebase --abort",{serviceMethod:"git-pull"})];case 7:return[2,c];case 8:if(c.error)return[2,c];return[2,{hasConflicts:!1,error:null}]}})})).apply(this,arguments)}function tU(e){return tz.apply(this,arguments)}function tz(){return(tz=(0,j._)(function(e){var t,r,n,i,o,a,u,l,c,s,f,d=arguments;return(0,V.Jh)(this,function(h){switch(h.label){case 0:return t=d.length>1&&void 0!==d[1]?d[1]:{},[4,tF(e)];case 1:if((r=h.sent()).error)return[2,r];if(!r.branch)return[2,{error:x.HEAD_DETACHED}];if(n=null,i=null,t.publish){if(r.upstream)return[2,{error:x.BRANCH_ALREADY_EXISTS}];n=t.publish.remote,i=null!==(o=t.publish.name)&&void 0!==o?o:r.branch,n=en(n),i=en(i)}else{if(!r.upstream)return[2,{error:x.UPSTREAM_NOT_SET}];if(!t.force&&r.upstream.behind>0)return[2,{error:x.PUSH_REJECTED}];n=(a=(0,Q._)(ei(r.upstream.branch),2))[0],i=a[1]}if(!n||!i)return[2,{error:x.UPSTREAM_NOT_SET}];if(t.force)return[3,3];return[4,ek(e,{remote:n})];case 2:if((u=h.sent()).error)return[2,u];h.label=3;case 3:if(!t.publish)return[3,5];return[4,ex(e,"refs/remotes/".concat(n,"/").concat(i))];case 4:if((l=h.sent()).error)return[2,l];if(l.exists&&l.ref.type===m.REMOTE_BRANCH)return[2,{error:x.BRANCH_ALREADY_EXISTS}];h.label=5;case 5:return c=["--quiet"],t.force&&!t.publish&&c.push("--force-with-lease"),t.publish&&c.push("--set-upstream"),s="refs/heads/".concat(r.branch,":refs/heads/").concat(i),c.push(er(n),er(s)),[4,e("git push ".concat(c.join(" ")),{serviceMethod:"git-push"})];case 6:if((f=h.sent()).error)return[2,f];return[2,{error:null}]}})})).apply(this,arguments)}function tB(e,t){return tj.apply(this,arguments)}function tj(){return(tj=(0,j._)(function(e,t){var r;return(0,V.Jh)(this,function(n){switch(n.label){case 0:if(!ef(t=eo(t)))return[2,{error:x.INVALID_REFERENCE}];return[4,e("git remote rm ".concat(er(t)),{serviceMethod:"git-remove-remote"})];case 1:if((r=n.sent()).error)return[2,r];return[2,{error:null}]}})})).apply(this,arguments)}function tW(e,t,r){return tV.apply(this,arguments)}function tV(){return(tV=(0,j._)(function(e,t,r){var n,i,o,a,u,l,c,s,f,d,h,p,v,y,m;return(0,V.Jh)(this,function(g){switch(g.label){case 0:if("string"==typeof t){if(""===t)return[2,{error:null}];t=[t]}if(!0!==t&&0===t.length)return[2,{error:null}];if(!(void 0!==r))return[3,2];return n=["--quiet","--no-overlay","--worktree","--source=".concat(r),!0===t?".":"-- ".concat(t.join(" "))],[4,e("git --literal-pathspecs restore ".concat(n.join(" ")),{serviceMethod:"git-restore-files"})];case 1:if((i=g.sent()).error)return[2,i];return[2,{error:null}];case 2:return[4,tF(e)];case 3:if((o=g.sent()).error)return[2,o];a=[],u=[],l=!0,c=!1,s=void 0;try{for(f=o.changes[Symbol.iterator]();!(l=(d=f.next()).done);l=!0)if(h=d.value,!0===t||t.includes(h.path))switch(h.type.worktree){case w.UNMODIFIED:continue;case w.UNTRACKED:a.push(er(h.path));break;default:u.push(er(h.path))}}catch(e){c=!0,s=e}finally{try{l||null==f.return||f.return()}finally{if(c)throw s}}if(0===a.length&&0===u.length&&void 0===r)return[2,{error:null}];return p=[],a.length&&(v=["--quiet","--force","--",a.join(" ")],p.push("git --literal-pathspecs clean ".concat(v.join(" ")))),u.length&&(y=["--quiet","--no-overlay","--worktree","-- ".concat(u.join(" "))],p.push("git --literal-pathspecs restore ".concat(y.join(" ")))),[4,e(p,{serviceMethod:"git-restore-files"})];case 4:if((m=g.sent()).error)return[2,m];return[2,{error:null}]}})})).apply(this,arguments)}function tY(e,t){return tK.apply(this,arguments)}function tK(){return(tK=(0,j._)(function(e,t){var r,n,i;return(0,V.Jh)(this,function(o){switch(o.label){case 0:if(r=t.remote,n=t.url,!ef(r=eo(r))||!ed(n))return[2,{error:x.INVALID_REFERENCE}];return r=er(r),n=er(n),[4,e("git remote set-url ".concat(r," ").concat(n),{serviceMethod:"git-set-remote-url"})];case 1:if((i=o.sent()).error)return[2,i];return[2,{error:null}]}})})).apply(this,arguments)}function tX(e,t){return tJ.apply(this,arguments)}function tJ(){return(tJ=(0,j._)(function(e,t){var r,n;return(0,V.Jh)(this,function(i){switch(i.label){case 0:if(!(r=function(e){if("all"in e)return e.all?["git add -A"]:["git reset -q -- ."];var t=e.add,r=e.reset;if(!(null==t?void 0:t.length)&&!(null==r?void 0:r.length))return null;var n=[];if(t){var i=t.map(er).join(" ");n.push("git --literal-pathspecs add -- ".concat(i))}if(r){var o=r.map(er).join(" ");n.push("git --literal-pathspecs reset -q -- ".concat(o))}return n}(t)))return[2,{error:null}];return[4,e(r,{serviceMethod:"git-stage-files"})];case 1:if((n=i.sent()).error)return[2,n];return[2,{error:null}]}})})).apply(this,arguments)}function t$(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.author,r=e.committer,n={GIT_AUTHOR_NAME:"",GIT_AUTHOR_EMAIL:"",GIT_COMMITTER_NAME:"",GIT_COMMITTER_EMAIL:"",GIT_ASKPASS:"replit-git-askpass",GIT_PAGER:"",GIT_EDITOR:"",PAGER:"",EDITOR:""};if(t){n.GIT_AUTHOR_NAME=t.username,n.GIT_COMMITTER_NAME=t.username;var i=tq(t);n.GIT_AUTHOR_EMAIL=i,n.GIT_COMMITTER_EMAIL=i,r&&(n.GIT_COMMITTER_NAME=r.username,n.GIT_COMMITTER_EMAIL=tq(r))}return n}function tq(e){if("id"in e)return"".concat(e.id,"-").concat(e.username,"@users.noreply.replit.com");if("email"in e)return e.email;throw Error("Invalid user")}(v=I||(I={})).ORDINARY="1",v.RENAMED_OR_COPIED="2",v.UNMERGED="u",v.UNTRACKED="?",v.IGNORED="!",(y=N||(N={})).FF_ONLY="FF_ONLY",y.MERGE="MERGE",y.REBASE="REBASE"},70993:function(e,t,r){r.d(t,{Z:function(){return y},l:function(){return v}});var n=r(27387),i=r(63257),o=r(96583),a=r(96082),u=r(58997),l=r(73878),c=r(72106),s=r(17437),f=r(95636),d=r(36109),h=r(91620).lW,p=r(92756),v=".replit";function y(e){var t,r,y,m,g=e.container,E=e.fs,D=e.ctx,_=(0,a.ZP)();_.setMaxListeners(50);var b=null,R=null,T=null;function w(){return x.apply(this,arguments)}function x(){return(x=(0,n._)(function(){return(0,o.Jh)(this,function(e){return b&&"open"===b.status?[2,b]:[2,new Promise(function(e){_.once(u.zW.CHANNEL_OPENED,function(t){e(t)})})]})})).apply(this,arguments)}(function(){N.apply(this,arguments)})(),g.openChannel({service:"dotreplit"},function(e){var t=e.channel;return b=t,_.emit(u.zW.CHANNEL_OPENED,t),function(){b=null}});var I=!1;function N(){return(N=(0,n._)(function(){return(0,o.Jh)(this,function(e){return E.watchDir(c.Ql,{onChange:function(e){if(!e.some(function(e){return e.filename===v&&e.type===l.Tv.File})){(null==R?void 0:R.error)!==u.Yt.NotFound&&(R={error:u.Yt.NotFound,errorMessage:"",config:null},_.emit(u.zW.CHANGE,R));return}I||(I=!0,E.watchFile(v,{onChange:function(){R=null,O.getConfig({bypassCache:!0}).then(function(e){_.emit(u.zW.CHANGE,e)})},onMoveOrDelete:function(){I=!1},onError:function(e,t){R=null,I=!1,e.code||g.unrecoverableError(e,t)}}))},onError:function(e,t){g.unrecoverableError(e,t)}}),[2]})})).apply(this,arguments)}function C(){return(C=(0,n._)(function(){return(0,o.Jh)(this,function(e){switch(e.label){case 0:return R=null,T||(T=function(){return A.apply(this,arguments)}()),[4,T];case 1:return R=e.sent(),T=null,[2,R]}})})).apply(this,arguments)}function A(){return(A=(0,n._)(function(){return(0,o.Jh)(this,function(e){var t;return[2,(0,f.DW)(D,"dotreplit.getConfigFromServer",(t=(0,n._)(function(e,t){var r,n,i,a;return(0,o.Jh)(this,function(o){switch(o.label){case 0:var l,c,s;return null==t||t.setAttributes((l={},(null==(c=g.getConnectionMetadata())?void 0:c.token)&&(l.tokenCluster=function(e){var t=e.split(".");if(4!==t.length)throw Error("Invalid token: should have exactly 4 parts: "+e);for(var r=t[2].replace(/-/g,"+").replace(/_/g,"/");r.length%4;)r+="=";var n=window.atob(r);if(n.length<64)throw Error("Invalid token: signed part is too short: "+n.length);var i=n.substring(0,n.length-64);return d.api.token.ReplToken.decode(h.from(i,"base64"))}(c.token).cluster),s=!!window.performance.getEntriesByName(p.Iy.pageNavStart,"mark").length,l.ssr=s,l)),[4,w()];case 1:if("closed"===(n=o.sent()).status)return[2,{error:u.Yt.Disconnected,errorMessage:"channel closed",config:null}];return[4,n.request({dotReplitGetRequest:{},traceInfo:e?(0,f.Rg)(e):void 0})];case 2:if((i=o.sent()).channelClosed)return[2,{error:u.Yt.Disconnected,errorMessage:"channel closed",config:null}];if(i.error){if(i.error.includes("unable to decode"))return[2,{error:u.Yt.ParseError,errorMessage:i.error,config:null}];if(i.error.includes("no such file"))return[2,{error:u.Yt.NotFound,errorMessage:i.error,config:null}];return[2,{error:u.Yt.Unknown,errorMessage:i.error,config:null}]}if(!(a=null===(r=i.dotReplitGetResponse)||void 0===r?void 0:r.dotReplit))return g.unrecoverableError(Error("Dotreplit responded with no error and no config")),[2,{error:u.Yt.Unknown,errorMessage:"Expected dotReplitGetResponse to include dotReplit",config:null}];return[2,{error:null,errorMessage:null,config:a}]}})}),function(e,r){return t.apply(this,arguments)}))]})})).apply(this,arguments)}var S=(t=(0,n._)(function(e){var t;return(0,o.Jh)(this,function(r){switch(r.label){case 0:return[4,E.stat(v)];case 1:if(r.sent().exists)return[3,3];return[4,E.writeFile(v,"")];case 2:r.sent(),r.label=3;case 3:return[4,w()];case 4:return[4,r.sent().request({dotReplitUpdateRequest:{ops:e}})];case 5:if((t=r.sent()).channelClosed)return[2,{errorMessage:"Channel closed.",error:u.au.ChannelClosed,response:null}];if(t.error){if(t.error.includes("could not parse json")||t.error.includes("is not json")||t.error.includes("parsing value field")||t.error.includes("missing field"))return[2,{errorMessage:t.error,error:u.au.JSONParseError,response:null}];if(t.error.includes("could not read file"))return[2,{errorMessage:t.error,error:u.au.NotFound,response:null}];if(t.error.includes("could not parse toml"))return[2,{errorMessage:t.error,error:u.au.TOMLParseError,response:null}];if(t.error.includes("unknown variant"))return[2,{errorMessage:t.error,error:u.au.OpType,response:null}];if(t.error.includes("could not write to file"))return[2,{errorMessage:t.error,error:u.au.CouldNotWrite,response:null}];if(t.error.includes("could not read line"))return[2,{errorMessage:t.error,error:u.au.ReadLine,response:null}];return[2,{errorMessage:t.error,error:u.au.Unknown,response:null}]}if(!t.dotReplitUpdateResponse)throw Error("Expected .replit to be updated");return[2,{response:t.dotReplitUpdateResponse,error:null,errorMessage:null}]}})}),function(e){return t.apply(this,arguments)}),O={watch:function(e){var t=!1,r=!1,n=function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];r=!0,e.apply(void 0,(0,i._)(n))};return _.on(u.zW.CHANGE,n),O.getConfig().then(function(e){t||r||n(e)}),function(){t=!0,_.removeListener(u.zW.CHANGE,n)}},getConfig:function(e){return(0,n._)(function(){return(0,o.Jh)(this,function(t){return(null==e?void 0:e.bypassCache)||!R?[2,function(){return C.apply(this,arguments)}()]:[2,R]})})()},getRunConfig:function(){return(0,n._)(function(){var e,t;return(0,o.Jh)(this,function(r){switch(r.label){case 0:return[4,w()];case 1:return[4,r.sent().request({runConfigGetRequest:{}})];case 2:if((e=r.sent()).channelClosed)return[2,this.getRunConfig()];if(!e.runConfigGetResponse)throw null!==(t=e.error)&&void 0!==t?t:Error("expected run config");return[2,e.runConfigGetResponse]}})}).apply(this)},updateDotReplit:(r=[],y=400,m=(0,s.Z)((0,n._)(function(){var e;return(0,o.Jh)(this,function(t){switch(t.label){case 0:return[4,S(r)];case 1:return e=t.sent(),r=[],[2,e]}})}),{wait:y}),function(e,t){t&&(y=t);var n=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done);n=!0)!function(){var e=a.value,t=r.findIndex(function(t){return t.path===e.path});-1!==t?r[t]=e:r.push(e)}()}catch(e){i=!0,o=e}finally{try{n||null==u.return||u.return()}finally{if(i)throw o}}return m()})};return O}},58997:function(e,t,r){var n,i,o,a,u,l;r.d(t,{Yt:function(){return n},au:function(){return i},zW:function(){return o}}),(a=n||(n={})).NotFound="NOT_FOUND",a.ParseError="PARSE_ERROR",a.Disconnected="DISCONNECTED",a.Unknown="UNKOWN_ERROR",(u=i||(i={})).ChannelClosed="CHANNEL_CLOSED",u.JSONParseError="JSON_PARSE_ERROR",u.NotFound="NOT_FOUND",u.TOMLParseError="TOML_PARSE_ERROR",u.OpType="OP_TYPE",u.CouldNotWrite="COULD_NOT_WRITE",u.ReadLine="COULD_NOT_READ_LINE",u.Unknown="UNKNOWN_ERROR",(l=o||(o={})).CHANGE="CHANGE",l.CHANNEL_OPENED="CHANNEL_OPENED"}}]);
//# sourceMappingURL=3194-8899b7d2be08c355.js.map